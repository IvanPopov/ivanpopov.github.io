/*! For license information please see preview.d7992d4422580a37a92b.js.LICENSE.txt */
(()=>{var e,t,n,r,i={"6ow8":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("q/Z8"),i=n.n(r),s=n("xqvs"),o=n.n(s)()(i());o.push([e.id,".ui-alerts {\n    position: fixed;\n    z-index: 2060;\n    padding: 23px;\n}\n\n.ui-alerts.center {\n    top: 50%;\n    left: 50%;\n    margin-top: -100px;\n    margin-left: -222px;\n}\n\n.ui-alerts.top-right {\n    top: 20px;\n    right: 20px;\n}\n\n.ui-alerts.top-center {\n    top: 20px;\n    margin-left: -222px;\n    left: 50%;\n}\n\n.ui-alerts.top-left {\n    top: 20px;\n    left: 20px;\n}\n\n.ui-alerts.bottom-right {\n    bottom: 0;\n    right: 20px;\n}\n.ui-alerts.bottom-center {\n    bottom: 0;\n    margin-left: -222px;\n    left: 50%;\n}\n\n.ui-alerts.bottom-left {\n    bottom: 0;\n    left: 20px;\n}\n\n.ui-alerts.ui-alerts > .message > .content > .header {\n    padding-right: 13px;\n}\n\n@media (min-width: 320px) {\n    /* smartphones, portrait iPhone, portrait 480x320 phones (Android) */\n    .ui-alerts.top-center {\n        margin-left: -163px;\n    }\n}\n@media (min-width: 480px) {\n    /* smartphones, Android phones, landscape iPhone */\n}\n@media (min-width: 600px) {\n    /* portrait tablets, portrait iPad, e-readers (Nook/Kindle), landscape 800x480 phones\n * (Android) */\n}\n@media (min-width: 801px) {\n    /* tablet, landscape iPad, lo-res laptops ands desktops */\n}\n@media (min-width: 1025px) {\n    /* big landscape tablets, laptops, and desktops */\n}\n@media (min-width: 1281px) {\n    /* hi-res laptops and desktops */\n}\n",""]);const a=o},eX6A:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("q/Z8"),i=n.n(r),s=n("xqvs"),o=n.n(s),a=n("GsOf"),l=n.n(a),c=new URL(n("ScS0"),n.b),u=o()(i()),h=l()(c);u.push([e.id,".dg.main.taller-than-window .close-button {\r\n    border-top: 1px solid #ddd;\r\n}\r\n\r\n.dg.main .close-button {\r\n    background-color: #ccc;\r\n}\r\n \r\n.dg.main .close-button:hover {\r\n    background-color: #ddd;\r\n}\r\n\r\n.dg {\r\n    color: #555;\r\n    text-shadow: none !important;\r\n}\r\n\r\n.dg.main::-webkit-scrollbar {\r\n    background: #fafafa;\r\n}\r\n\r\n.dg.main::-webkit-scrollbar-thumb {\r\n    background: #bbb;\r\n}\r\n \r\n.dg li:not(.folder) {\r\n    background: #fafafa;\r\n    border-bottom: 1px solid #ddd;\r\n}\r\n \r\n.dg li.save-row .button {\r\n    text-shadow: none !important;\r\n}\r\n\r\n.dg li.title {\r\n    background: #e8e8e8 url("+h+") 6px 10px no-repeat;\r\n}\r\n\r\n.dg .cr.function:hover,.dg .cr.boolean:hover {\r\n    background: #fff;\r\n}\r\n \r\n.dg .c input[type=text] {\r\n    background: #e9e9e9;\r\n}\r\n \r\n.dg .c input[type=text]:hover {\r\n    background: #eee;\r\n}\r\n \r\n.dg .c input[type=text]:focus {\r\n    background: #eee;\r\n    color: #555;\r\n}\r\n \r\n.dg .c .slider {\r\n    background: #e9e9e9;\r\n}\r\n\r\n.dg .c .slider:hover {\r\n    background: #eee;\r\n}",""]);const d=u},ITMc:(e,t,n)=>{"use strict";n.r(t)},eGir:(e,t,n)=>{"use strict";n.d(t,{R:()=>c});var r=n("D1ci"),i=n("ynia"),s=n("O6jy"),o=n("EiZM"),a=n("PczE"),l=["children","innerRef"],c=function(e){var t=e.children,n=e.innerRef,c=(0,r.Z)(e,l),u=i.Children.only(t),h=s.isForwardRef(u)?a.f:o.J,d=u&&c&&Object.keys(c).length>0?i.cloneElement(u,c):u;return i.createElement(h,{innerRef:n},d)}},EiZM:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var r=n("m290"),i=n("ynia"),s=n("7wdh"),o=n("KJe+");var a=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).prevNode=void 0,t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=s.findDOMNode(this);this.prevNode=e,(0,o.n)(this.props.innerRef,e)},n.componentDidUpdate=function(e){var t=s.findDOMNode(this);this.prevNode!==t&&(this.prevNode=t,(0,o.n)(this.props.innerRef,t)),e.innerRef!==this.props.innerRef&&(0,o.n)(this.props.innerRef,t)},n.componentWillUnmount=function(){(0,o.n)(this.props.innerRef,null),delete this.prevNode},n.render=function(){return this.props.children},t}(i.Component)},PczE:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var r=n("m290"),i=n("ynia"),s=n("KJe+"),o=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).currentNode=void 0,t.handleRefOverride=function(e){var n=t.props,r=n.children,i=n.innerRef;(0,s.n)(r.ref,e),(0,s.n)(i,e),t.currentNode=e},t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.innerRef!==this.props.innerRef&&(0,s.n)(this.props.innerRef,this.currentNode)},n.componentWillUnmount=function(){delete this.currentNode},n.render=function(){var e=this.props.children;return i.cloneElement(e,{ref:this.handleRefOverride})},t}(i.Component)},"KJe+":(e,t,n)=>{"use strict";n.d(t,{I:()=>i,n:()=>r});var r=function(e,t){"function"!=typeof e?null!==e&&"object"==typeof e&&(e.current=t):e(t)},i=function(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("current")}},"MC9+":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("foew");n("bg8x");var i=n("ynia");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var f=function(){function e(t){o(this,e),c(this,"handlers",void 0),this.handlers=t.slice(0)}return l(e,[{key:"addHandlers",value:function(t){for(var n=this.handlers.slice(0),r=t.length,i=0;i<r;i+=1)n.push(t[i]);return new e(n)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlers.length-1;if(t){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](e));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(t){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var s=this.handlers[i];-1===t.indexOf(s)&&n.push(s)}return new e(n)}}]),e}();function m(e){var t=new Map;return e.forEach((function(e,n){t.set(n,e)})),t}function g(e){return Array.isArray(e)?e:[e]}function v(e){return"document"===e?document:"window"===e?window:function(e){return null!==e&&"object"===s(e)&&e.hasOwnProperty("current")}(e)?e.current||document:e||document}var y=function(){function e(t,n){o(this,e),c(this,"handlerSets",void 0),c(this,"poolName",void 0),this.handlerSets=n,this.poolName=t}return l(e,[{key:"addHandlers",value:function(t,n){var r=m(this.handlerSets);if(r.has(t)){var i=r.get(t);r.set(t,i.addHandlers(n))}else r.set(t,new f(n));return new e(this.poolName,r)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlerSets.get(e),r="default"===this.poolName;n&&n.dispatchEvent(t,r)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(t,n){var r=m(this.handlerSets);if(!r.has(t))return new e(this.poolName,r);var i=r.get(t).removeHandlers(n);return i.hasHandlers()?r.set(t,i):r.delete(t),new e(this.poolName,r)}}]),e}();c(y,"createByType",(function(e,t,n){var r=new Map;return r.set(t,new f(n)),new y(e,r)}));var b=function(){function e(t){var n=this;o(this,e),c(this,"handlers",new Map),c(this,"pools",new Map),c(this,"target",void 0),c(this,"createEmitter",(function(e){return function(t){n.pools.forEach((function(n){n.dispatchEvent(e,t)}))}})),this.target=t}return l(e,[{key:"addHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e);this.pools.set(e,r.addHandlers(t,n))}else this.pools.set(e,y.createByType(e,t,n));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e).removeHandlers(t,n);r.hasHandlers()?this.pools.set(e,r):this.pools.delete(e);var i=!1;this.pools.forEach((function(e){return i=i||e.hasHandlers(t)})),i||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),e}(),_=new(function(){function e(){var t=this;o(this,e),c(this,"targets",new Map),c(this,"getTarget",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=v(e);if(t.targets.has(r))return t.targets.get(r);if(!n)return null;var i=new b(r);return t.targets.set(r,i),i})),c(this,"removeTarget",(function(e){t.targets.delete(v(e))}))}return l(e,[{key:"sub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,s=void 0===i?document:i,o=n.pool,a=void 0===o?"default":o;this.getTarget(s).addHandlers(a,e,g(t))}}},{key:"unsub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,s=void 0===i?document:i,o=n.pool,a=void 0===o?"default":o,l=this.getTarget(s,!1);l&&(l.removeHandlers(a,e,g(t)),l.hasHandlers()||this.removeTarget(s))}}}]),e}()),x=function(e){function t(){return o(this,t),p(this,h(t).apply(this,arguments))}return u(t,i.PureComponent),l(t,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(e){this.unsubscribe(e),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;_.sub(t,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;_.unsub(t,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),t}();c(x,"defaultProps",{pool:"default",target:"document"}),x.propTypes={},t.instance=_,t.default=x},"/lYH":(e,t,n)=>{"use strict";var r;r=n("MC9+"),e.exports=r.default,e.exports.instance=r.instance},izR9:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.OrbitControls=void 0;var s=n("dxIt"),o=-1,a=0,l=1,c=2,u=3,h=4,d=5,p={type:"change"},f={type:"start"},m={type:"end"},g=1e-6,v=function(e){function t(t,n,r){var i=e.call(this)||this;return i.object=t,i.domElement=void 0!==n?n:document,i.window=void 0!==r?r:window,i.enabled=!0,i.target=new s.Vector3,i.minDistance=0,i.maxDistance=1/0,i.minZoom=0,i.maxZoom=1/0,i.minPolarAngle=0,i.maxPolarAngle=Math.PI,i.minAzimuthAngle=-1/0,i.maxAzimuthAngle=1/0,i.enableDamping=!1,i.dampingFactor=.25,i.enableZoom=!0,i.zoomSpeed=1,i.enableRotate=!0,i.rotateSpeed=1,i.enablePan=!0,i.keyPanSpeed=7,i.autoRotate=!1,i.autoRotateSpeed=2,i.enableKeys=!0,i.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},i.mouseButtons={ORBIT:s.MOUSE.LEFT,ZOOM:s.MOUSE.MIDDLE,PAN:s.MOUSE.RIGHT},i.target0=i.target.clone(),i.position0=i.object.position.clone(),i.zoom0=i.object.zoom,i.updateOffset=new s.Vector3,i.updateQuat=(new s.Quaternion).setFromUnitVectors(t.up,new s.Vector3(0,1,0)),i.updateQuatInverse=i.updateQuat.clone().invert(),i.updateLastPosition=new s.Vector3,i.updateLastQuaternion=new s.Quaternion,i.state=o,i.scale=1,i.spherical=new s.Spherical,i.sphericalDelta=new s.Spherical,i.panOffset=new s.Vector3,i.zoomChanged=!1,i.rotateStart=new s.Vector2,i.rotateEnd=new s.Vector2,i.rotateDelta=new s.Vector2,i.panStart=new s.Vector2,i.panEnd=new s.Vector2,i.panDelta=new s.Vector2,i.dollyStart=new s.Vector2,i.dollyEnd=new s.Vector2,i.dollyDelta=new s.Vector2,i.panLeftV=new s.Vector3,i.panUpV=new s.Vector3,i.panInternalOffset=new s.Vector3,i.onMouseDown=function(e){if(!1!==i.enabled){if(e.preventDefault(),e.button===i.mouseButtons.ORBIT){if(!1===i.enableRotate)return;i.rotateStart.set(e.clientX,e.clientY),i.state=a}else if(e.button===i.mouseButtons.ZOOM){if(!1===i.enableZoom)return;i.dollyStart.set(e.clientX,e.clientY),i.state=l}else if(e.button===i.mouseButtons.PAN){if(!1===i.enablePan)return;i.panStart.set(e.clientX,e.clientY),i.state=c}i.state!==o&&(document.addEventListener("mousemove",i.onMouseMove,!1),document.addEventListener("mouseup",i.onMouseUp,!1),i.dispatchEvent(f))}},i.onMouseMove=function(e){if(!1!==i.enabled)if(e.preventDefault(),i.state===a){if(!1===i.enableRotate)return;i.rotateEnd.set(e.clientX,e.clientY),i.rotateDelta.subVectors(i.rotateEnd,i.rotateStart);var t=i.domElement===document?i.domElement.body:i.domElement;i.rotateLeft(2*Math.PI*i.rotateDelta.x/t.clientWidth*i.rotateSpeed),i.rotateUp(2*Math.PI*i.rotateDelta.y/t.clientHeight*i.rotateSpeed),i.rotateStart.copy(i.rotateEnd),i.update()}else if(i.state===l){if(!1===i.enableZoom)return;i.dollyEnd.set(e.clientX,e.clientY),i.dollyDelta.subVectors(i.dollyEnd,i.dollyStart),i.dollyDelta.y>0?i.dollyIn(i.getZoomScale()):i.dollyDelta.y<0&&i.dollyOut(i.getZoomScale()),i.dollyStart.copy(i.dollyEnd),i.update()}else if(i.state===c){if(!1===i.enablePan)return;i.panEnd.set(e.clientX,e.clientY),i.panDelta.subVectors(i.panEnd,i.panStart),i.pan(i.panDelta.x,i.panDelta.y),i.panStart.copy(i.panEnd),i.update()}},i.onMouseUp=function(e){!1!==i.enabled&&(document.removeEventListener("mousemove",i.onMouseMove,!1),document.removeEventListener("mouseup",i.onMouseUp,!1),i.dispatchEvent(m),i.state=o)},i.onMouseWheel=function(e){!1===i.enabled||!1===i.enableZoom||i.state!==o&&i.state!==a||(e.preventDefault(),e.stopPropagation(),e.deltaY<0?i.dollyOut(i.getZoomScale()):e.deltaY>0&&i.dollyIn(i.getZoomScale()),i.update(),i.dispatchEvent(f),i.dispatchEvent(m))},i.onKeyDown=function(e){if(!1!==i.enabled&&!1!==i.enableKeys&&!1!==i.enablePan)switch(e.keyCode){case i.keys.UP:i.pan(0,i.keyPanSpeed),i.update();break;case i.keys.BOTTOM:i.pan(0,-i.keyPanSpeed),i.update();break;case i.keys.LEFT:i.pan(i.keyPanSpeed,0),i.update();break;case i.keys.RIGHT:i.pan(-i.keyPanSpeed,0),i.update()}},i.onTouchStart=function(e){if(!1!==i.enabled){switch(e.touches.length){case 1:if(!1===i.enableRotate)return;i.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),i.state=u;break;case 2:if(!1===i.enableZoom)return;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);i.dollyStart.set(0,r),i.state=h;break;case 3:if(!1===i.enablePan)return;i.panStart.set(e.touches[0].pageX,e.touches[0].pageY),i.state=d;break;default:i.state=o}i.state!==o&&i.dispatchEvent(f)}},i.onTouchMove=function(e){if(!1!==i.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===i.enableRotate)return;if(i.state!==u)return;i.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),i.rotateDelta.subVectors(i.rotateEnd,i.rotateStart);var t=i.domElement===document?i.domElement.body:i.domElement;i.rotateLeft(2*Math.PI*i.rotateDelta.x/t.clientWidth*i.rotateSpeed),i.rotateUp(2*Math.PI*i.rotateDelta.y/t.clientHeight*i.rotateSpeed),i.rotateStart.copy(i.rotateEnd),i.update();break;case 2:if(!1===i.enableZoom)return;if(i.state!==h)return;var n=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,s=Math.sqrt(n*n+r*r);i.dollyEnd.set(0,s),i.dollyDelta.subVectors(i.dollyEnd,i.dollyStart),i.dollyDelta.y>0?i.dollyOut(i.getZoomScale()):i.dollyDelta.y<0&&i.dollyIn(i.getZoomScale()),i.dollyStart.copy(i.dollyEnd),i.update();break;case 3:if(!1===i.enablePan)return;if(i.state!==d)return;i.panEnd.set(e.touches[0].pageX,e.touches[0].pageY),i.panDelta.subVectors(i.panEnd,i.panStart),i.pan(i.panDelta.x,i.panDelta.y),i.panStart.copy(i.panEnd),i.update();break;default:i.state=o}},i.onTouchEnd=function(e){!1!==i.enabled&&(i.dispatchEvent(m),i.state=o)},i.onContextMenu=function(e){e.preventDefault()},i.domElement.addEventListener("contextmenu",i.onContextMenu,!1),i.domElement.addEventListener("mousedown",i.onMouseDown,!1),i.domElement.addEventListener("wheel",i.onMouseWheel,!1),i.domElement.addEventListener("touchstart",i.onTouchStart,!1),i.domElement.addEventListener("touchend",i.onTouchEnd,!1),i.domElement.addEventListener("touchmove",i.onTouchMove,!1),i.window.addEventListener("keydown",i.onKeyDown,!1),i.update(),i}return i(t,e),t.prototype.update=function(){var e=this.object.position;return this.updateOffset.copy(e).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&this.state===o&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),e.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>g||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>g)&&(this.dispatchEvent(p),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},t.prototype.panLeft=function(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)},t.prototype.panUp=function(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)},t.prototype.pan=function(e,t){var n=this.domElement===document?this.domElement.body:this.domElement;if(this._checkPerspectiveCamera(this.object)){var r=this.object.position;this.panInternalOffset.copy(r).sub(this.target);var i=this.panInternalOffset.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*i/n.clientHeight,this.object.matrix),this.panUp(2*t*i/n.clientHeight,this.object.matrix)}else this._checkOrthographicCamera(this.object)?(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},t.prototype.dollyIn=function(e){this._checkPerspectiveCamera(this.object)?this.scale/=e:this._checkOrthographicCamera(this.object)?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*e)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},t.prototype.dollyOut=function(e){this._checkPerspectiveCamera(this.object)?this.scale*=e:this._checkOrthographicCamera(this.object)?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/e)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},t.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},t.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},t.prototype.rotateLeft=function(e){this.sphericalDelta.theta-=e},t.prototype.rotateUp=function(e){this.sphericalDelta.phi-=e},t.prototype.getPolarAngle=function(){return this.spherical.phi},t.prototype.getAzimuthalAngle=function(){return this.spherical.theta},t.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},t.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(p),this.update(),this.state=o},t.prototype.saveState=function(){this.target0.copy(this.target),this.position0.copy(this.object.position),(this._checkOrthographicCamera(this.object)||this._checkPerspectiveCamera(this.object))&&(this.zoom0=this.object.zoom)},Object.defineProperty(t.prototype,"center",{get:function(){return console.warn("Three.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noZoom",{get:function(){return console.warn("Three.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("Three.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e},enumerable:!1,configurable:!0}),t.prototype._checkPerspectiveCamera=function(e){return e.isPerspectiveCamera},t.prototype._checkOrthographicCamera=function(e){return e.isOrthographicCamera},t}(s.EventDispatcher);t.OrbitControls=v},dxIt:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:()=>ne,AddEquation:()=>E,AddOperation:()=>J,AdditiveAnimationBlendMode:()=>Wt,AdditiveBlending:()=>x,AlphaFormat:()=>De,AlwaysDepth:()=>G,AlwaysStencilFunc:()=>Tn,AmbientLight:()=>dh,AmbientLightProbe:()=>Nh,AnimationClip:()=>pu,AnimationLoader:()=>xu,AnimationMixer:()=>pd,AnimationObjectGroup:()=>hd,AnimationUtils:()=>eu,ArcCurve:()=>ku,ArrayCamera:()=>Ca,ArrowHelper:()=>rp,Audio:()=>jh,AudioAnalyser:()=>Jh,AudioContext:()=>Rh,AudioListener:()=>Hh,AudioLoader:()=>Lh,AxesHelper:()=>ip,AxisHelper:()=>sf,BackSide:()=>m,BasicDepthPacking:()=>sn,BasicShadowMap:()=>u,BinaryTextureLoader:()=>uf,Bone:()=>dl,BooleanKeyframeTrack:()=>ou,BoundingBoxHelper:()=>of,Box2:()=>Sd,Box3:()=>er,Box3Helper:()=>$d,BoxBufferGeometry:()=>hs,BoxGeometry:()=>hs,BoxHelper:()=>Jd,BufferAttribute:()=>Ti,BufferGeometry:()=>ji,BufferGeometryLoader:()=>_h,ByteType:()=>Ee,Cache:()=>mu,Camera:()=>gs,CameraHelper:()=>Kd,CanvasRenderer:()=>df,CanvasTexture:()=>Vl,CatmullRomCurve3:()=>Iu,CineonToneMapping:()=>te,CircleBufferGeometry:()=>Zl,CircleGeometry:()=>Zl,ClampToEdgeWrapping:()=>de,Clock:()=>zh,Color:()=>_i,ColorKeyframeTrack:()=>au,CompressedTexture:()=>Bl,CompressedTextureLoader:()=>wu,ConeBufferGeometry:()=>jl,ConeGeometry:()=>jl,CubeCamera:()=>bs,CubeReflectionMapping:()=>se,CubeRefractionMapping:()=>oe,CubeTexture:()=>_s,CubeTextureLoader:()=>Tu,CubeUVReflectionMapping:()=>ce,CubeUVRefractionMapping:()=>ue,CubicBezierCurve:()=>Uu,CubicBezierCurve3:()=>Bu,CubicInterpolant:()=>nu,CullFaceBack:()=>a,CullFaceFront:()=>l,CullFaceFrontBack:()=>c,CullFaceNone:()=>o,Curve:()=>Au,CurvePath:()=>qu,CustomBlending:()=>T,CustomToneMapping:()=>re,CylinderBufferGeometry:()=>Hl,CylinderGeometry:()=>Hl,Cylindrical:()=>xd,DataTexture:()=>ws,DataTexture2DArray:()=>Ws,DataTexture3D:()=>qs,DataTextureLoader:()=>Eu,DataUtils:()=>ap,DecrementStencilOp:()=>pn,DecrementWrapStencilOp:()=>mn,DefaultLoadingManager:()=>vu,DepthFormat:()=>Ge,DepthStencilFormat:()=>Ze,DepthTexture:()=>Gl,DirectionalLight:()=>hh,DirectionalLightHelper:()=>jd,DiscreteInterpolant:()=>iu,DodecahedronBufferGeometry:()=>ql,DodecahedronGeometry:()=>ql,DoubleSide:()=>g,DstAlphaFactor:()=>D,DstColorFactor:()=>z,DynamicBufferAttribute:()=>Kp,DynamicCopyUsage:()=>Ln,DynamicDrawUsage:()=>Mn,DynamicReadUsage:()=>kn,EdgesGeometry:()=>$l,EdgesHelper:()=>af,EllipseCurve:()=>Cu,EqualDepth:()=>j,EqualStencilFunc:()=>bn,EquirectangularReflectionMapping:()=>ae,EquirectangularRefractionMapping:()=>le,Euler:()=>Ir,EventDispatcher:()=>Dn,ExtrudeBufferGeometry:()=>Ac,ExtrudeGeometry:()=>Ac,FaceColors:()=>Fp,FileLoader:()=>_u,FlatShading:()=>v,Float16BufferAttribute:()=>Li,Float32Attribute:()=>nf,Float32BufferAttribute:()=>Oi,Float64Attribute:()=>rf,Float64BufferAttribute:()=>Ni,FloatType:()=>Pe,Fog:()=>Da,FogExp2:()=>Ia,Font:()=>Ah,FontLoader:()=>kh,FrontSide:()=>f,Frustum:()=>Es,GLBufferAttribute:()=>gd,GLSL1:()=>Nn,GLSL3:()=>In,GammaEncoding:()=>$t,GreaterDepth:()=>q,GreaterEqualDepth:()=>W,GreaterEqualStencilFunc:()=>Sn,GreaterStencilFunc:()=>xn,GridHelper:()=>Bd,Group:()=>ka,HalfFloatType:()=>Re,HemisphereLight:()=>Ju,HemisphereLightHelper:()=>Ud,HemisphereLightProbe:()=>Oh,IcosahedronBufferGeometry:()=>kc,IcosahedronGeometry:()=>kc,ImageBitmapLoader:()=>Eh,ImageLoader:()=>Su,ImageUtils:()=>Zn,ImmediateRenderObject:()=>Ad,IncrementStencilOp:()=>dn,IncrementWrapStencilOp:()=>fn,InstancedBufferAttribute:()=>bh,InstancedBufferGeometry:()=>yh,InstancedInterleavedBuffer:()=>md,InstancedMesh:()=>_l,Int16Attribute:()=>$p,Int16BufferAttribute:()=>Ci,Int32Attribute:()=>ef,Int32BufferAttribute:()=>Pi,Int8Attribute:()=>Xp,Int8BufferAttribute:()=>Ei,IntType:()=>Ce,InterleavedBuffer:()=>za,InterleavedBufferAttribute:()=>Ba,Interpolant:()=>tu,InterpolateDiscrete:()=>Ut,InterpolateLinear:()=>Bt,InterpolateSmooth:()=>Vt,InvertStencilOp:()=>gn,JSONLoader:()=>pf,KeepStencilOp:()=>un,KeyframeTrack:()=>su,LOD:()=>sl,LatheBufferGeometry:()=>Pc,LatheGeometry:()=>Pc,Layers:()=>Dr,LensFlare:()=>mf,LessDepth:()=>Z,LessEqualDepth:()=>H,LessEqualStencilFunc:()=>_n,LessStencilFunc:()=>yn,Light:()=>Yu,LightProbe:()=>mh,Line:()=>Al,Line3:()=>Md,LineBasicMaterial:()=>xl,LineCurve:()=>Vu,LineCurve3:()=>Gu,LineDashedMaterial:()=>$c,LineLoop:()=>Rl,LinePieces:()=>Ip,LineSegments:()=>Pl,LineStrip:()=>Np,LinearEncoding:()=>Yt,LinearFilter:()=>be,LinearInterpolant:()=>ru,LinearMipMapLinearFilter:()=>Se,LinearMipMapNearestFilter:()=>xe,LinearMipmapLinearFilter:()=>we,LinearMipmapNearestFilter:()=>_e,LinearToneMapping:()=>Q,Loader:()=>yu,LoaderUtils:()=>vh,LoadingManager:()=>gu,LogLuvEncoding:()=>en,LoopOnce:()=>Dt,LoopPingPong:()=>zt,LoopRepeat:()=>Ft,LuminanceAlphaFormat:()=>Be,LuminanceFormat:()=>Ue,MOUSE:()=>i,Material:()=>pi,MaterialLoader:()=>gh,Math:()=>Un,MathUtils:()=>Un,Matrix3:()=>Vn,Matrix4:()=>Er,MaxEquation:()=>k,Mesh:()=>cs,MeshBasicMaterial:()=>xi,MeshDepthMaterial:()=>wa,MeshDistanceMaterial:()=>Sa,MeshFaceMaterial:()=>Up,MeshLambertMaterial:()=>Yc,MeshMatcapMaterial:()=>Jc,MeshNormalMaterial:()=>Xc,MeshPhongMaterial:()=>qc,MeshPhysicalMaterial:()=>Wc,MeshStandardMaterial:()=>jc,MeshToonMaterial:()=>Kc,MinEquation:()=>C,MirroredRepeatWrapping:()=>pe,MixOperation:()=>Y,MultiMaterial:()=>Bp,MultiplyBlending:()=>S,MultiplyOperation:()=>X,NearestFilter:()=>fe,NearestMipMapLinearFilter:()=>ye,NearestMipMapNearestFilter:()=>ge,NearestMipmapLinearFilter:()=>ve,NearestMipmapNearestFilter:()=>me,NeverDepth:()=>V,NeverStencilFunc:()=>vn,NoBlending:()=>b,NoColors:()=>Dp,NoToneMapping:()=>$,NormalAnimationBlendMode:()=>jt,NormalBlending:()=>_,NotEqualDepth:()=>K,NotEqualStencilFunc:()=>wn,NumberKeyframeTrack:()=>lu,Object3D:()=>Yr,ObjectLoader:()=>xh,ObjectSpaceNormalMap:()=>ln,OctahedronBufferGeometry:()=>Rc,OctahedronGeometry:()=>Rc,OneFactor:()=>R,OneMinusDstAlphaFactor:()=>F,OneMinusDstColorFactor:()=>U,OneMinusSrcAlphaFactor:()=>I,OneMinusSrcColorFactor:()=>O,OrthographicCamera:()=>ch,PCFShadowMap:()=>h,PCFSoftShadowMap:()=>d,PMREMGenerator:()=>Ep,ParametricBufferGeometry:()=>Lc,ParametricGeometry:()=>Lc,Particle:()=>Gp,ParticleBasicMaterial:()=>jp,ParticleSystem:()=>Zp,ParticleSystemMaterial:()=>Wp,Path:()=>Ku,PerspectiveCamera:()=>vs,Plane:()=>ei,PlaneBufferGeometry:()=>Cs,PlaneGeometry:()=>Cs,PlaneHelper:()=>Qd,PointCloud:()=>Vp,PointCloudMaterial:()=>Hp,PointLight:()=>lh,PointLightHelper:()=>Id,Points:()=>Fl,PointsMaterial:()=>Ll,PolarGridHelper:()=>Vd,PolyhedronBufferGeometry:()=>Wl,PolyhedronGeometry:()=>Wl,PositionalAudio:()=>Yh,PropertyBinding:()=>ud,PropertyMixer:()=>$h,QuadraticBezierCurve:()=>Zu,QuadraticBezierCurve3:()=>Hu,Quaternion:()=>Yn,QuaternionKeyframeTrack:()=>uu,QuaternionLinearInterpolant:()=>cu,REVISION:()=>r,RGBADepthPacking:()=>on,RGBAFormat:()=>ze,RGBAIntegerFormat:()=>Xe,RGBA_ASTC_10x10_Format:()=>yt,RGBA_ASTC_10x5_Format:()=>mt,RGBA_ASTC_10x6_Format:()=>gt,RGBA_ASTC_10x8_Format:()=>vt,RGBA_ASTC_12x10_Format:()=>bt,RGBA_ASTC_12x12_Format:()=>_t,RGBA_ASTC_4x4_Format:()=>at,RGBA_ASTC_5x4_Format:()=>lt,RGBA_ASTC_5x5_Format:()=>ct,RGBA_ASTC_6x5_Format:()=>ut,RGBA_ASTC_6x6_Format:()=>ht,RGBA_ASTC_8x5_Format:()=>dt,RGBA_ASTC_8x6_Format:()=>pt,RGBA_ASTC_8x8_Format:()=>ft,RGBA_BPTC_Format:()=>xt,RGBA_ETC2_EAC_Format:()=>ot,RGBA_PVRTC_2BPPV1_Format:()=>rt,RGBA_PVRTC_4BPPV1_Format:()=>nt,RGBA_S3TC_DXT1_Format:()=>Je,RGBA_S3TC_DXT3_Format:()=>$e,RGBA_S3TC_DXT5_Format:()=>Qe,RGBDEncoding:()=>rn,RGBEEncoding:()=>Qt,RGBEFormat:()=>Ve,RGBFormat:()=>Fe,RGBIntegerFormat:()=>Ke,RGBM16Encoding:()=>nn,RGBM7Encoding:()=>tn,RGB_ETC1_Format:()=>it,RGB_ETC2_Format:()=>st,RGB_PVRTC_2BPPV1_Format:()=>tt,RGB_PVRTC_4BPPV1_Format:()=>et,RGB_S3TC_DXT1_Format:()=>Ye,RGFormat:()=>We,RGIntegerFormat:()=>qe,RawShaderMaterial:()=>Hc,Ray:()=>Tr,Raycaster:()=>vd,RectAreaLight:()=>ph,RedFormat:()=>He,RedIntegerFormat:()=>je,ReinhardToneMapping:()=>ee,RepeatWrapping:()=>he,ReplaceStencilOp:()=>hn,ReverseSubtractEquation:()=>A,RingBufferGeometry:()=>Oc,RingGeometry:()=>Oc,SRGB8_ALPHA8_ASTC_10x10_Format:()=>Ot,SRGB8_ALPHA8_ASTC_10x5_Format:()=>Pt,SRGB8_ALPHA8_ASTC_10x6_Format:()=>Rt,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Lt,SRGB8_ALPHA8_ASTC_12x10_Format:()=>Nt,SRGB8_ALPHA8_ASTC_12x12_Format:()=>It,SRGB8_ALPHA8_ASTC_4x4_Format:()=>wt,SRGB8_ALPHA8_ASTC_5x4_Format:()=>St,SRGB8_ALPHA8_ASTC_5x5_Format:()=>Tt,SRGB8_ALPHA8_ASTC_6x5_Format:()=>Et,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Mt,SRGB8_ALPHA8_ASTC_8x5_Format:()=>At,SRGB8_ALPHA8_ASTC_8x6_Format:()=>Ct,SRGB8_ALPHA8_ASTC_8x8_Format:()=>kt,Scene:()=>Fa,SceneUtils:()=>ff,ShaderChunk:()=>ks,ShaderLib:()=>Rs,ShaderMaterial:()=>ms,ShadowMaterial:()=>Zc,Shape:()=>Xu,ShapeBufferGeometry:()=>Nc,ShapeGeometry:()=>Nc,ShapePath:()=>Mh,ShapeUtils:()=>Tc,ShortType:()=>Me,Skeleton:()=>ml,SkeletonHelper:()=>Od,SkinnedMesh:()=>hl,SmoothShading:()=>y,Sphere:()=>gr,SphereBufferGeometry:()=>Ic,SphereGeometry:()=>Ic,Spherical:()=>_d,SphericalHarmonics3:()=>fh,SplineCurve:()=>ju,SpotLight:()=>rh,SpotLightHelper:()=>kd,Sprite:()=>tl,SpriteMaterial:()=>Va,SrcAlphaFactor:()=>N,SrcAlphaSaturateFactor:()=>B,SrcColorFactor:()=>L,StaticCopyUsage:()=>Rn,StaticDrawUsage:()=>En,StaticReadUsage:()=>Cn,StereoCamera:()=>Fh,StreamCopyUsage:()=>On,StreamDrawUsage:()=>An,StreamReadUsage:()=>Pn,StringKeyframeTrack:()=>hu,SubtractEquation:()=>M,SubtractiveBlending:()=>w,TOUCH:()=>s,TangentSpaceNormalMap:()=>an,TetrahedronBufferGeometry:()=>Dc,TetrahedronGeometry:()=>Dc,TextBufferGeometry:()=>Fc,TextGeometry:()=>Fc,Texture:()=>jn,TextureLoader:()=>Mu,TorusBufferGeometry:()=>zc,TorusGeometry:()=>zc,TorusKnotBufferGeometry:()=>Uc,TorusKnotGeometry:()=>Uc,Triangle:()=>hi,TriangleFanDrawMode:()=>Xt,TriangleStripDrawMode:()=>Kt,TrianglesDrawMode:()=>qt,TubeBufferGeometry:()=>Bc,TubeGeometry:()=>Bc,UVMapping:()=>ie,Uint16Attribute:()=>Qp,Uint16BufferAttribute:()=>ki,Uint32Attribute:()=>tf,Uint32BufferAttribute:()=>Ri,Uint8Attribute:()=>Yp,Uint8BufferAttribute:()=>Mi,Uint8ClampedAttribute:()=>Jp,Uint8ClampedBufferAttribute:()=>Ai,Uniform:()=>fd,UniformsLib:()=>Ps,UniformsUtils:()=>fs,UnsignedByteType:()=>Te,UnsignedInt248Type:()=>Ie,UnsignedIntType:()=>ke,UnsignedShort4444Type:()=>Le,UnsignedShort5551Type:()=>Oe,UnsignedShort565Type:()=>Ne,UnsignedShortType:()=>Ae,VSMShadowMap:()=>p,Vector2:()=>Bn,Vector3:()=>Jn,Vector4:()=>qn,VectorKeyframeTrack:()=>du,Vertex:()=>qp,VertexColors:()=>zp,VideoTexture:()=>Ul,WebGL1Renderer:()=>Na,WebGLCubeRenderTarget:()=>xs,WebGLMultisampleRenderTarget:()=>Xn,WebGLRenderTarget:()=>Kn,WebGLRenderTargetCube:()=>hf,WebGLRenderer:()=>Oa,WebGLUtils:()=>Aa,WireframeGeometry:()=>Vc,WireframeHelper:()=>lf,WrapAroundEnding:()=>Ht,XHRLoader:()=>cf,ZeroCurvatureEnding:()=>Gt,ZeroFactor:()=>P,ZeroSlopeEnding:()=>Zt,ZeroStencilOp:()=>cn,sRGBEncoding:()=>Jt});const r="126",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,a=1,l=2,c=3,u=0,h=1,d=2,p=3,f=0,m=1,g=2,v=1,y=2,b=0,_=1,x=2,w=3,S=4,T=5,E=100,M=101,A=102,C=103,k=104,P=200,R=201,L=202,O=203,N=204,I=205,D=206,F=207,z=208,U=209,B=210,V=0,G=1,Z=2,H=3,j=4,W=5,q=6,K=7,X=0,Y=1,J=2,$=0,Q=1,ee=2,te=3,ne=4,re=5,ie=300,se=301,oe=302,ae=303,le=304,ce=306,ue=307,he=1e3,de=1001,pe=1002,fe=1003,me=1004,ge=1004,ve=1005,ye=1005,be=1006,_e=1007,xe=1007,we=1008,Se=1008,Te=1009,Ee=1010,Me=1011,Ae=1012,Ce=1013,ke=1014,Pe=1015,Re=1016,Le=1017,Oe=1018,Ne=1019,Ie=1020,De=1021,Fe=1022,ze=1023,Ue=1024,Be=1025,Ve=ze,Ge=1026,Ze=1027,He=1028,je=1029,We=1030,qe=1031,Ke=1032,Xe=1033,Ye=33776,Je=33777,$e=33778,Qe=33779,et=35840,tt=35841,nt=35842,rt=35843,it=36196,st=37492,ot=37496,at=37808,lt=37809,ct=37810,ut=37811,ht=37812,dt=37813,pt=37814,ft=37815,mt=37816,gt=37817,vt=37818,yt=37819,bt=37820,_t=37821,xt=36492,wt=37840,St=37841,Tt=37842,Et=37843,Mt=37844,At=37845,Ct=37846,kt=37847,Pt=37848,Rt=37849,Lt=37850,Ot=37851,Nt=37852,It=37853,Dt=2200,Ft=2201,zt=2202,Ut=2300,Bt=2301,Vt=2302,Gt=2400,Zt=2401,Ht=2402,jt=2500,Wt=2501,qt=0,Kt=1,Xt=2,Yt=3e3,Jt=3001,$t=3007,Qt=3002,en=3003,tn=3004,nn=3005,rn=3006,sn=3200,on=3201,an=0,ln=1,cn=0,un=7680,hn=7681,dn=7682,pn=7683,fn=34055,mn=34056,gn=5386,vn=512,yn=513,bn=514,_n=515,xn=516,wn=517,Sn=518,Tn=519,En=35044,Mn=35048,An=35040,Cn=35045,kn=35049,Pn=35041,Rn=35046,Ln=35050,On=35042,Nn="100",In="300 es";function Dn(){}Object.assign(Dn.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}},dispatchEvent:function(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}});const Fn=[];for(let e=0;e<256;e++)Fn[e]=(e<16?"0":"")+e.toString(16);let zn=1234567;const Un={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Fn[255&e]+Fn[e>>8&255]+Fn[e>>16&255]+Fn[e>>24&255]+"-"+Fn[255&t]+Fn[t>>8&255]+"-"+Fn[t>>16&15|64]+Fn[t>>24&255]+"-"+Fn[63&n|128]+Fn[n>>8&255]+"-"+Fn[n>>16&255]+Fn[n>>24&255]+Fn[255&r]+Fn[r>>8&255]+Fn[r>>16&255]+Fn[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},damp:function(e,t,n,r){return Un.lerp(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Un.euclideanModulo(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(zn=e%2147483647),zn=16807*zn%2147483647,(zn-1)/2147483646},degToRad:function(e){return e*Un.DEG2RAD},radToDeg:function(e){return e*Un.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((t+r)/2),u=o((t+r)/2),h=s((t-r)/2),d=o((t-r)/2),p=s((r-t)/2),f=o((r-t)/2);switch(i){case"XYX":e.set(a*u,l*h,l*d,a*c);break;case"YZY":e.set(l*d,a*u,l*h,a*c);break;case"ZXZ":e.set(l*h,l*d,a*u,a*c);break;case"XZX":e.set(a*u,l*f,l*p,a*c);break;case"YXY":e.set(l*p,a*u,l*f,a*c);break;case"ZYZ":e.set(l*f,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};class Bn{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}Bn.prototype.isVector2=!0;class Vn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,o,a,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=s*f+o*v+a*_,i[3]=s*m+o*y+a*x,i[6]=s*g+o*b+a*w,i[1]=l*f+c*v+u*_,i[4]=l*m+c*y+u*x,i[7]=l*g+c*b+u*w,i[2]=h*f+d*v+p*_,i[5]=h*m+d*y+p*x,i[8]=h*g+d*b+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*s*c-t*o*l-n*i*c+n*o*a+r*i*l-r*s*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=c*s-o*l,h=o*a-c*i,d=l*i-s*a,p=t*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(o*n-r*s)*f,e[3]=h*f,e[4]=(c*t-r*a)*f,e[5]=(r*i-o*t)*f,e[6]=d*f,e[7]=(n*a-l*t)*f,e[8]=(s*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,o){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*s+l*o)+s+e,-r*l,r*a,-r*(-l*s+a*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],s=r[3],o=r[6],a=r[1],l=r[4],c=r[7];return r[0]=t*i+n*a,r[3]=t*s+n*l,r[6]=t*o+n*c,r[1]=-n*i+t*a,r[4]=-n*s+t*l,r[7]=-n*o+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}let Gn;Vn.prototype.isMatrix3=!0;const Zn={getDataURL:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Gn&&(Gn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Gn.width=e.width,Gn.height=e.height;const n=Gn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Gn}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let Hn=0;class jn extends Dn{constructor(e=jn.DEFAULT_IMAGE,t=jn.DEFAULT_MAPPING,n=de,r=de,i=be,s=we,o=ze,a=Te,l=1,c=Yt){super(),Object.defineProperty(this,"id",{value:Hn++}),this.uuid=Un.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Bn(0,0),this.repeat=new Bn(1,1),this.center=new Bn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Un.generateUUID()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(Wn(r[e].image)):t.push(Wn(r[e]))}else t=Wn(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ie)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case he:e.x=e.x-Math.floor(e.x);break;case de:e.x=e.x<0?0:1;break;case pe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case he:e.y=e.y-Math.floor(e.y);break;case de:e.y=e.y<0?0:1;break;case pe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function Wn(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?Zn.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}jn.DEFAULT_IMAGE=void 0,jn.DEFAULT_MAPPING=ie,jn.prototype.isTexture=!0;class qn{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=.01,o=.1,a=e.elements,l=a[0],c=a[4],u=a[8],h=a[1],d=a[5],p=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(c-h)<s&&Math.abs(u-f)<s&&Math.abs(p-m)<s){if(Math.abs(c+h)<o&&Math.abs(u+f)<o&&Math.abs(p+m)<o&&Math.abs(l+d+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(d+1)/2,v=(g+1)/2,y=(c+h)/4,b=(u+f)/4,_=(p+m)/4;return e>a&&e>v?e<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):a>v?a<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=y/r,i=_/r):v<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=_/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}qn.prototype.isVector4=!0;class Kn extends Dn{constructor(e,t,n){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new qn(0,0,e,t),this.scissorTest=!1,this.viewport=new qn(0,0,e,t),n=n||{},this.texture=new jn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:be,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Kn.prototype.isWebGLRenderTarget=!0;class Xn extends Kn{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}Xn.prototype.isWebGLMultisampleRenderTarget=!0;class Yn{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return n.copy(e).slerp(t,r)}static slerpFlat(e,t,n,r,i,s,o){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[s+0],d=i[s+1],p=i[s+2],f=i[s+3];if(0===o)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||a!==h||l!==d||c!==p){let e=1-o;const t=a*h+l*d+c*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,o=Math.sin(o*s)/i}const i=o*n;if(a=a*e+h*i,l=l*e+d*i,c=c*e+p*i,u=u*e+f*i,e===1-o){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,s){const o=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[s],h=i[s+1],d=i[s+2],p=i[s+3];return e[t]=o*p+c*u+a*d-l*h,e[t+1]=a*p+c*h+l*u-o*d,e[t+2]=l*p+c*d+o*h-a*u,e[t+3]=c*p-o*u-a*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,s=e._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),h=a(n/2),d=a(r/2),p=a(i/2);switch(s){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],a=t[9],l=t[2],c=t[6],u=t[10],h=n+o+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-a)*e,this._y=(i-l)*e,this._z=(s-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(c-a)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+l)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(s-r)/e,this._x=(i+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Un.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,o=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+s*o+r*l-i*a,this._y=r*c+s*a+i*o-n*l,this._z=i*c+s*l+n*a-r*o,this._w=s*c-n*o-r*a-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let o=s*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const a=1-o*o;if(a<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,o),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Yn.prototype.isQuaternion=!0;class Jn{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Qn.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Qn.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z,a=e.w,l=a*t+s*r-o*n,c=a*n+o*t-i*r,u=a*r+i*n-s*t,h=-i*t-s*n-o*r;return this.x=l*a+h*-i+c*-o-u*-s,this.y=c*a+h*-s+u*-i-l*-o,this.z=u*a+h*-o+l*-s-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,a=t.z;return this.x=r*a-i*o,this.y=i*s-n*a,this.z=n*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return $n.copy(this).projectOnVector(e),this.sub($n)}reflect(e){return this.sub($n.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Un.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}Jn.prototype.isVector3=!0;const $n=new Jn,Qn=new Yn;class er{constructor(e=new Jn(1/0,1/0,1/0),t=new Jn(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.length;a<l;a+=3){const l=e[a],c=e[a+1],u=e[a+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>s&&(s=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,s,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.count;a<l;a++){const l=e.getX(a),c=e.getY(a),u=e.getZ(a);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>s&&(s=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,s,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=nr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Jn),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Jn),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),rr.copy(t.boundingBox),rr.applyMatrix4(e.matrixWorld),this.union(rr));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Jn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,nr),nr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ur),hr.subVectors(this.max,ur),ir.subVectors(e.a,ur),sr.subVectors(e.b,ur),or.subVectors(e.c,ur),ar.subVectors(sr,ir),lr.subVectors(or,sr),cr.subVectors(ir,or);let t=[0,-ar.z,ar.y,0,-lr.z,lr.y,0,-cr.z,cr.y,ar.z,0,-ar.x,lr.z,0,-lr.x,cr.z,0,-cr.x,-ar.y,ar.x,0,-lr.y,lr.x,0,-cr.y,cr.x,0];return!!fr(t,ir,sr,or,hr)&&(t=[1,0,0,0,1,0,0,0,1],!!fr(t,ir,sr,or,hr)&&(dr.crossVectors(ar,lr),t=[dr.x,dr.y,dr.z],fr(t,ir,sr,or,hr)))}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Jn),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return nr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(nr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(tr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),tr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),tr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),tr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),tr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),tr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),tr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),tr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(tr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}er.prototype.isBox3=!0;const tr=[new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn],nr=new Jn,rr=new er,ir=new Jn,sr=new Jn,or=new Jn,ar=new Jn,lr=new Jn,cr=new Jn,ur=new Jn,hr=new Jn,dr=new Jn,pr=new Jn;function fr(e,t,n,r,i){for(let s=0,o=e.length-3;s<=o;s+=3){pr.fromArray(e,s);const o=i.x*Math.abs(pr.x)+i.y*Math.abs(pr.y)+i.z*Math.abs(pr.z),a=t.dot(pr),l=n.dot(pr),c=r.dot(pr);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>o)return!1}return!0}const mr=new er;class gr{constructor(e=new Jn,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):mr.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Jn),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new er),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const vr=new Jn,yr=new Jn,br=new Jn,_r=new Jn,xr=new Jn,wr=new Jn,Sr=new Jn;class Tr{constructor(e=new Jn,t=new Jn(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Jn),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,vr)),this}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Jn),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=vr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vr.copy(this.direction).multiplyScalar(t).add(this.origin),vr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){yr.copy(e).add(t).multiplyScalar(.5),br.copy(t).sub(e).normalize(),_r.copy(this.origin).sub(yr);const i=.5*e.distanceTo(t),s=-this.direction.dot(br),o=_r.dot(this.direction),a=-_r.dot(br),l=_r.lengthSq(),c=Math.abs(1-s*s);let u,h,d,p;if(c>0)if(u=s*a-o,h=s*o-a,p=i*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+s*h+2*o)+h*(s*u+h+2*a)+l}else h=i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+l;else h=-i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+l;else h<=-p?(u=Math.max(0,-(-s*i+o)),h=u>0?-i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l):h<=p?(u=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+l):(u=Math.max(0,-(s*i+o)),h=u>0?i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l);else h=s>0?-i:i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(br).multiplyScalar(h).add(yr),d}intersectSphere(e,t){vr.subVectors(e.center,this.origin);const n=vr.dot(this.direction),r=vr.dot(vr)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,o,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,s=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,s=(e.min.y-h.y)*c),n>s||i>r?null:((i>n||n!=n)&&(n=i),(s<r||r!=r)&&(r=s),u>=0?(o=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),n>a||o>r?null:((o>n||n!=n)&&(n=o),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,vr)}intersectTriangle(e,t,n,r,i){xr.subVectors(t,e),wr.subVectors(n,e),Sr.crossVectors(xr,wr);let s,o=this.direction.dot(Sr);if(o>0){if(r)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}_r.subVectors(this.origin,e);const a=s*this.direction.dot(wr.crossVectors(_r,wr));if(a<0)return null;const l=s*this.direction.dot(xr.cross(_r));if(l<0)return null;if(a+l>o)return null;const c=-s*_r.dot(Sr);return c<0?null:this.at(c/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Er{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,o,a,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Er).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Mr.setFromMatrixColumn(e,0).length(),i=1/Mr.setFromMatrixColumn(e,1).length(),s=1/Mr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=s*c,n=s*u,r=o*c,i=o*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*a,t[2]=i-e*l,t[6]=r+n*l,t[10]=s*a}else if("YXZ"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=s*a}else if("ZXY"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e-i*o,t[4]=-s*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=s*c,t[9]=i-e*o,t[2]=-s*l,t[6]=o,t[10]=s*a}else if("ZYX"===e.order){const e=s*c,n=s*u,r=o*c,i=o*u;t[0]=a*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=a*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*a,t[10]=s*a}else if("YZX"===e.order){const e=s*a,n=s*l,r=o*a,i=o*l;t[0]=a*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=s*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=s*a,n=s*l,r=o*a,i=o*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=s*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Cr,e,kr)}lookAt(e,t,n){const r=this.elements;return Lr.subVectors(e,t),0===Lr.lengthSq()&&(Lr.z=1),Lr.normalize(),Pr.crossVectors(n,Lr),0===Pr.lengthSq()&&(1===Math.abs(n.z)?Lr.x+=1e-4:Lr.z+=1e-4,Lr.normalize(),Pr.crossVectors(n,Lr)),Pr.normalize(),Rr.crossVectors(Lr,Pr),r[0]=Pr.x,r[4]=Rr.x,r[8]=Lr.x,r[1]=Pr.y,r[5]=Rr.y,r[9]=Lr.y,r[2]=Pr.z,r[6]=Rr.z,r[10]=Lr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],S=r[8],T=r[12],E=r[1],M=r[5],A=r[9],C=r[13],k=r[2],P=r[6],R=r[10],L=r[14],O=r[3],N=r[7],I=r[11],D=r[15];return i[0]=s*x+o*E+a*k+l*O,i[4]=s*w+o*M+a*P+l*N,i[8]=s*S+o*A+a*R+l*I,i[12]=s*T+o*C+a*L+l*D,i[1]=c*x+u*E+h*k+d*O,i[5]=c*w+u*M+h*P+d*N,i[9]=c*S+u*A+h*R+d*I,i[13]=c*T+u*C+h*L+d*D,i[2]=p*x+f*E+m*k+g*O,i[6]=p*w+f*M+m*P+g*N,i[10]=p*S+f*A+m*R+g*I,i[14]=p*T+f*C+m*L+g*D,i[3]=v*x+y*E+b*k+_*O,i[7]=v*w+y*M+b*P+_*N,i[11]=v*S+y*A+b*R+_*I,i[15]=v*T+y*C+b*L+_*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],a=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*a*u-r*l*u-i*o*h+n*l*h+r*o*d-n*a*d)+e[7]*(+t*a*d-t*l*h+i*s*h-r*s*d+r*l*c-i*a*c)+e[11]*(+t*l*u-t*o*d-i*s*u+n*s*d+i*o*c-n*l*c)+e[15]*(-r*o*c-t*a*u+t*o*h+r*s*u-n*s*h+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*h*l+f*a*d-o*m*d-u*a*g+o*h*g,y=p*h*l-c*m*l-p*a*d+s*m*d+c*a*g-s*h*g,b=c*f*l-p*u*l+p*o*d-s*f*d-c*o*g+s*u*g,_=p*u*a-c*f*a-p*o*h+s*f*h+c*o*m-s*u*m,x=t*v+n*y+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=v*w,e[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*w,e[2]=(o*m*i-f*a*i+f*r*l-n*m*l-o*r*g+n*a*g)*w,e[3]=(u*a*i-o*h*i-u*r*l+n*h*l+o*r*d-n*a*d)*w,e[4]=y*w,e[5]=(c*m*i-p*h*i+p*r*d-t*m*d-c*r*g+t*h*g)*w,e[6]=(p*a*i-s*m*i-p*r*l+t*m*l+s*r*g-t*a*g)*w,e[7]=(s*h*i-c*a*i+c*r*l-t*h*l-s*r*d+t*a*d)*w,e[8]=b*w,e[9]=(p*u*i-c*f*i-p*n*d+t*f*d+c*n*g-t*u*g)*w,e[10]=(s*f*i-p*o*i+p*n*l-t*f*l-s*n*g+t*o*g)*w,e[11]=(c*o*i-s*u*i-c*n*l+t*u*l+s*n*d-t*o*d)*w,e[12]=_*w,e[13]=(c*f*r-p*u*r+p*n*h-t*f*h-c*n*m+t*u*m)*w,e[14]=(p*o*r-s*f*r-p*n*a+t*f*a+s*n*m-t*o*m)*w,e[15]=(s*u*r-c*o*r+c*n*a-t*u*a-s*n*h+t*o*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,a=e.z,l=i*s,c=i*o;return this.set(l*s+n,l*o-r*a,l*a+r*o,0,l*o+r*a,c*o+n,c*a-r*s,0,l*a-r*o,c*a+r*s,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,o=t._z,a=t._w,l=i+i,c=s+s,u=o+o,h=i*l,d=i*c,p=i*u,f=s*c,m=s*u,g=o*u,v=a*l,y=a*c,b=a*u,_=n.x,x=n.y,w=n.z;return r[0]=(1-(f+g))*_,r[1]=(d+b)*_,r[2]=(p-y)*_,r[3]=0,r[4]=(d-b)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(p+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Mr.set(r[0],r[1],r[2]).length();const s=Mr.set(r[4],r[5],r[6]).length(),o=Mr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Ar.copy(this);const a=1/i,l=1/s,c=1/o;return Ar.elements[0]*=a,Ar.elements[1]*=a,Ar.elements[2]*=a,Ar.elements[4]*=l,Ar.elements[5]*=l,Ar.elements[6]*=l,Ar.elements[8]*=c,Ar.elements[9]*=c,Ar.elements[10]*=c,t.setFromRotationMatrix(Ar),n.x=i,n.y=s,n.z=o,this}makePerspective(e,t,n,r,i,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,a=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(s+i)/(s-i),d=-2*s*i/(s-i);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,s){const o=this.elements,a=1/(t-e),l=1/(n-r),c=1/(s-i),u=(t+e)*a,h=(n+r)*l,d=(s+i)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Er.prototype.isMatrix4=!0;const Mr=new Jn,Ar=new Er,Cr=new Jn(0,0,0),kr=new Jn(1,1,1),Pr=new Jn,Rr=new Jn,Lr=new Jn,Or=new Er,Nr=new Yn;class Ir{constructor(e=0,t=0,n=0,r=Ir.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,n){const r=Un.clamp,i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],h=i[2],d=i[6],p=i[10];switch(t=t||this._order){case"XYZ":this._y=Math.asin(r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Or.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Or,t,n)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return Nr.setFromEuler(this),this.setFromQuaternion(Nr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Jn(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ir.prototype.isEuler=!0,Ir.DefaultOrder="XYZ",Ir.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Dr{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let Fr=0;const zr=new Jn,Ur=new Yn,Br=new Er,Vr=new Jn,Gr=new Jn,Zr=new Jn,Hr=new Yn,jr=new Jn(1,0,0),Wr=new Jn(0,1,0),qr=new Jn(0,0,1),Kr={type:"added"},Xr={type:"removed"};function Yr(){Object.defineProperty(this,"id",{value:Fr++}),this.uuid=Un.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yr.DefaultUp.clone();const e=new Jn,t=new Ir,n=new Yn,r=new Jn(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Er},normalMatrix:{value:new Vn}}),this.matrix=new Er,this.matrixWorld=new Er,this.matrixAutoUpdate=Yr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Yr.DefaultUp=new Jn(0,1,0),Yr.DefaultMatrixAutoUpdate=!0,Yr.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Yr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Ur.setFromAxisAngle(e,t),this.quaternion.multiply(Ur),this},rotateOnWorldAxis:function(e,t){return Ur.setFromAxisAngle(e,t),this.quaternion.premultiply(Ur),this},rotateX:function(e){return this.rotateOnAxis(jr,e)},rotateY:function(e){return this.rotateOnAxis(Wr,e)},rotateZ:function(e){return this.rotateOnAxis(qr,e)},translateOnAxis:function(e,t){return zr.copy(e).applyQuaternion(this.quaternion),this.position.add(zr.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(jr,e)},translateY:function(e){return this.translateOnAxis(Wr,e)},translateZ:function(e){return this.translateOnAxis(qr,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Br.copy(this.matrixWorld).invert())},lookAt:function(e,t,n){e.isVector3?Vr.copy(e):Vr.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Gr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Br.lookAt(Gr,Vr,this.up):Br.lookAt(Vr,Gr,this.up),this.quaternion.setFromRotationMatrix(Br),r&&(Br.extractRotation(r.matrixWorld),Ur.setFromRotationMatrix(Br),this.quaternion.premultiply(Ur.invert()))},add:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Kr)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Xr)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Xr)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),Br.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Br.multiply(e.parent.matrixWorld)),e.applyMatrix4(Br),this.add(e),e.updateWorldMatrix(!1,!0),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Yn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gr,e,Zr),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gr,Hr,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),o=s(e.images),a=s(e.shapes),l=s(e.skeletons),c=s(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}});const Jr=new Jn,$r=new Jn,Qr=new Vn;class ei{constructor(e=new Jn(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Jr.subVectors(n,t).cross($r.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Jn),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Jn);const n=e.delta(Jr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Jn),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Qr.getNormalMatrix(e),r=this.coplanarPoint(Jr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}ei.prototype.isPlane=!0;const ti=new Jn,ni=new Jn,ri=new Jn,ii=new Jn,si=new Jn,oi=new Jn,ai=new Jn,li=new Jn,ci=new Jn,ui=new Jn;class hi{constructor(e=new Jn,t=new Jn,n=new Jn){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Jn),r.subVectors(n,t),ti.subVectors(e,t),r.cross(ti);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ti.subVectors(r,t),ni.subVectors(n,t),ri.subVectors(e,t);const s=ti.dot(ti),o=ti.dot(ni),a=ti.dot(ri),l=ni.dot(ni),c=ni.dot(ri),u=s*l-o*o;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Jn),0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*a-o*c)*h,p=(s*c-o*a)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,ii),ii.x>=0&&ii.y>=0&&ii.x+ii.y<=1}static getUV(e,t,n,r,i,s,o,a){return this.getBarycoord(e,t,n,r,ii),a.set(0,0),a.addScaledVector(i,ii.x),a.addScaledVector(s,ii.y),a.addScaledVector(o,ii.z),a}static isFrontFacing(e,t,n,r){return ti.subVectors(n,t),ni.subVectors(e,t),ti.cross(ni).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ti.subVectors(this.c,this.b),ni.subVectors(this.a,this.b),.5*ti.cross(ni).length()}getMidpoint(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Jn),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return hi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new ei),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return hi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return hi.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return hi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return hi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Jn);const n=this.a,r=this.b,i=this.c;let s,o;si.subVectors(r,n),oi.subVectors(i,n),li.subVectors(e,n);const a=si.dot(li),l=oi.dot(li);if(a<=0&&l<=0)return t.copy(n);ci.subVectors(e,r);const c=si.dot(ci),u=oi.dot(ci);if(c>=0&&u<=c)return t.copy(r);const h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return s=a/(a-c),t.copy(n).addScaledVector(si,s);ui.subVectors(e,i);const d=si.dot(ui),p=oi.dot(ui);if(p>=0&&d<=p)return t.copy(i);const f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return o=l/(l-p),t.copy(n).addScaledVector(oi,o);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return ai.subVectors(i,r),o=(u-c)/(u-c+(d-p)),t.copy(r).addScaledVector(ai,o);const g=1/(m+f+h);return s=f*g,o=h*g,t.copy(n).addScaledVector(si,s).addScaledVector(oi,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let di=0;function pi(){Object.defineProperty(this,"id",{value:di++}),this.uuid=Un.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=_,this.side=f,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=N,this.blendDst=I,this.blendEquation=E,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=H,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Tn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=un,this.stencilZFail=un,this.stencilZPass=un,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}pi.prototype=Object.assign(Object.create(Dn.prototype),{constructor:pi,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===v;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}},toJSON:function(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_&&(n.blending=this.blending),this.side!==f&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(pi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}});const fi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},mi={h:0,s:0,l:0},gi={h:0,s:0,l:0};function vi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function yi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function bi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class _i{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Un.euclideanModulo(e,1),t=Un.clamp(t,0,1),n=Un.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=vi(i,r,e+1/3),this.g=vi(i,r,e),this.b=vi(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=fi[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=yi(e.r),this.g=yi(e.g),this.b=yi(e.b),this}copyLinearToSRGB(e){return this.r=bi(e.r),this.g=bi(e.g),this.b=bi(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),s=Math.min(t,n,r);let o,a;const l=(s+i)/2;if(s===i)o=0,a=0;else{const e=i-s;switch(a=l<=.5?e/(i+s):e/(2-i-s),i){case t:o=(n-r)/e+(n<r?6:0);break;case n:o=(r-t)/e+2;break;case r:o=(t-n)/e+4}o/=6}return e.h=o,e.s=a,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(mi),mi.h+=e,mi.s+=t,mi.l+=n,this.setHSL(mi.h,mi.s,mi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(mi),e.getHSL(gi);const n=Un.lerp(mi.h,gi.h,t),r=Un.lerp(mi.s,gi.s,t),i=Un.lerp(mi.l,gi.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}_i.NAMES=fi,_i.prototype.isColor=!0,_i.prototype.r=1,_i.prototype.g=1,_i.prototype.b=1;class xi extends pi{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new _i(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this}}xi.prototype.isMeshBasicMaterial=!0;const wi=new Jn,Si=new Bn;function Ti(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=En,this.updateRange={offset:0,count:-1},this.version=0}function Ei(e,t,n){Ti.call(this,new Int8Array(e),t,n)}function Mi(e,t,n){Ti.call(this,new Uint8Array(e),t,n)}function Ai(e,t,n){Ti.call(this,new Uint8ClampedArray(e),t,n)}function Ci(e,t,n){Ti.call(this,new Int16Array(e),t,n)}function ki(e,t,n){Ti.call(this,new Uint16Array(e),t,n)}function Pi(e,t,n){Ti.call(this,new Int32Array(e),t,n)}function Ri(e,t,n){Ti.call(this,new Uint32Array(e),t,n)}function Li(e,t,n){Ti.call(this,new Uint16Array(e),t,n)}function Oi(e,t,n){Ti.call(this,new Float32Array(e),t,n)}function Ni(e,t,n){Ti.call(this,new Float64Array(e),t,n)}function Ii(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Object.defineProperty(Ti.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ti.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new _i),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Bn),t[n++]=i.x,t[n++]=i.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new Jn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new qn),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this},applyMatrix3:function(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Si.fromBufferAttribute(this,t),Si.applyMatrix3(e),this.setXY(t,Si.x,Si.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)wi.fromBufferAttribute(this,t),wi.applyMatrix3(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)wi.x=this.getX(t),wi.y=this.getY(t),wi.z=this.getZ(t),wi.applyMatrix4(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)wi.x=this.getX(t),wi.y=this.getY(t),wi.z=this.getZ(t),wi.applyNormalMatrix(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)wi.x=this.getX(t),wi.y=this.getY(t),wi.z=this.getZ(t),wi.transformDirection(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this},set:function(e,t=0){return this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Ei.prototype=Object.create(Ti.prototype),Ei.prototype.constructor=Ei,Mi.prototype=Object.create(Ti.prototype),Mi.prototype.constructor=Mi,Ai.prototype=Object.create(Ti.prototype),Ai.prototype.constructor=Ai,Ci.prototype=Object.create(Ti.prototype),Ci.prototype.constructor=Ci,ki.prototype=Object.create(Ti.prototype),ki.prototype.constructor=ki,Pi.prototype=Object.create(Ti.prototype),Pi.prototype.constructor=Pi,Ri.prototype=Object.create(Ti.prototype),Ri.prototype.constructor=Ri,Li.prototype=Object.create(Ti.prototype),Li.prototype.constructor=Li,Li.prototype.isFloat16BufferAttribute=!0,Oi.prototype=Object.create(Ti.prototype),Oi.prototype.constructor=Oi,Ni.prototype=Object.create(Ti.prototype),Ni.prototype.constructor=Ni;const Di={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Fi(e,t){return new Di[e](t)}let zi=0;const Ui=new Er,Bi=new Yr,Vi=new Jn,Gi=new er,Zi=new er,Hi=new Jn;function ji(){Object.defineProperty(this,"id",{value:zi++}),this.uuid=Un.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ji.prototype=Object.assign(Object.create(Dn.prototype),{constructor:ji,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(Ii(e)>65535?Ri:ki)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},hasAttribute:function(e){return void 0!==this.attributes[e]},addGroup:function(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Vn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return Ui.makeRotationX(e),this.applyMatrix4(Ui),this},rotateY:function(e){return Ui.makeRotationY(e),this.applyMatrix4(Ui),this},rotateZ:function(e){return Ui.makeRotationZ(e),this.applyMatrix4(Ui),this},translate:function(e,t,n){return Ui.makeTranslation(e,t,n),this.applyMatrix4(Ui),this},scale:function(e,t,n){return Ui.makeScale(e,t,n),this.applyMatrix4(Ui),this},lookAt:function(e){return Bi.lookAt(e),Bi.updateMatrix(),this.applyMatrix4(Bi.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vi).negate(),this.translate(Vi.x,Vi.y,Vi.z),this},setFromPoints:function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Oi(t,3)),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new er);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Jn(-1/0,-1/0,-1/0),new Jn(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Gi.setFromBufferAttribute(n),this.morphTargetsRelative?(Hi.addVectors(this.boundingBox.min,Gi.min),this.boundingBox.expandByPoint(Hi),Hi.addVectors(this.boundingBox.max,Gi.max),this.boundingBox.expandByPoint(Hi)):(this.boundingBox.expandByPoint(Gi.min),this.boundingBox.expandByPoint(Gi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Jn,1/0);if(e){const n=this.boundingSphere.center;if(Gi.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Zi.setFromBufferAttribute(n),this.morphTargetsRelative?(Hi.addVectors(Gi.min,Zi.min),Gi.expandByPoint(Hi),Hi.addVectors(Gi.max,Zi.max),Gi.expandByPoint(Hi)):(Gi.expandByPoint(Zi.min),Gi.expandByPoint(Zi.max))}Gi.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Hi.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Hi));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],o=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)Hi.fromBufferAttribute(s,t),o&&(Vi.fromBufferAttribute(e,t),Hi.add(Vi)),r=Math.max(r,n.distanceToSquared(Hi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new Ti(new Float32Array(4*o),4));const a=t.tangent.array,l=[],c=[];for(let e=0;e<o;e++)l[e]=new Jn,c[e]=new Jn;const u=new Jn,h=new Jn,d=new Jn,p=new Bn,f=new Bn,m=new Bn,g=new Jn,v=new Jn;function y(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const _=new Jn,x=new Jn,w=new Jn,S=new Jn;function T(e){w.fromArray(i,3*e),S.copy(w);const t=l[e];_.copy(t),_.sub(w.multiplyScalar(w.dot(t))).normalize(),x.crossVectors(S,t);const n=x.dot(c[e])<0?-1:1;a[4*e]=_.x,a[4*e+1]=_.y,a[4*e+2]=_.z,a[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)T(n[e+0]),T(n[e+1]),T(n[e+2])}},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ti(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Jn,i=new Jn,s=new Jn,o=new Jn,a=new Jn,l=new Jn,c=new Jn,u=new Jn;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),c.subVectors(s,i),u.subVectors(r,i),c.cross(u),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),o.add(c),a.add(c),l.add(c),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,s=e.attributes[r],o=s.array,a=s.itemSize*t,l=Math.min(o.length,i.length-a);for(let e=0,t=a;e<l;e++,t++)i[t]=o[e]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Hi.fromBufferAttribute(e,t),Hi.normalize(),e.setXYZ(t,Hi.x,Hi.y,Hi.z)},toNonIndexed:function(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let o=0,a=0;for(let e=0,i=t.length;e<i;e++){o=t[e]*r;for(let e=0;e<r;e++)s[a++]=n[o++]}return new Ti(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ji,n=this.index.array,r=this.attributes;for(const i in r){const s=e(r[i],n);t.setAttribute(i,s)}const i=this.morphAttributes;for(const r in i){const s=[],o=i[r];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);s.push(r)}t.morphAttributes[r]=s}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let e=0,n=s.length;e<n;e++){const n=s[e];t.addGroup(n.start,n.count,n.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t],i=r.toJSON(e.data);""!==r.name&&(i.name=r.name),e.data.attributes[t]=i}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],s=[];for(let t=0,r=n.length;t<r;t++){const r=n[t],i=r.toJSON(e.data);""!==r.name&&(i.name=r.name),s.push(i)}s.length>0&&(r[t]=s,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e},clone:function(){return(new ji).copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let e=0,t=s.length;e<t;e++){const t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Wi=new Er,qi=new Tr,Ki=new gr,Xi=new Jn,Yi=new Jn,Ji=new Jn,$i=new Jn,Qi=new Jn,es=new Jn,ts=new Jn,ns=new Jn,rs=new Jn,is=new Bn,ss=new Bn,os=new Bn,as=new Jn,ls=new Jn;function cs(e=new ji,t=new xi){Yr.call(this),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}function us(e,t,n,r,i,s,o,a,l,c,u,h){Xi.fromBufferAttribute(i,c),Yi.fromBufferAttribute(i,u),Ji.fromBufferAttribute(i,h);const d=e.morphTargetInfluences;if(t.morphTargets&&s&&d){ts.set(0,0,0),ns.set(0,0,0),rs.set(0,0,0);for(let e=0,t=s.length;e<t;e++){const t=d[e],n=s[e];0!==t&&($i.fromBufferAttribute(n,c),Qi.fromBufferAttribute(n,u),es.fromBufferAttribute(n,h),o?(ts.addScaledVector($i,t),ns.addScaledVector(Qi,t),rs.addScaledVector(es,t)):(ts.addScaledVector($i.sub(Xi),t),ns.addScaledVector(Qi.sub(Yi),t),rs.addScaledVector(es.sub(Ji),t)))}Xi.add(ts),Yi.add(ns),Ji.add(rs)}e.isSkinnedMesh&&t.skinning&&(e.boneTransform(c,Xi),e.boneTransform(u,Yi),e.boneTransform(h,Ji));const p=function(e,t,n,r,i,s,o,a){let l;if(l=t.side===m?r.intersectTriangle(o,s,i,!0,a):r.intersectTriangle(i,s,o,t.side!==g,a),null===l)return null;ls.copy(a),ls.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(ls);return c<n.near||c>n.far?null:{distance:c,point:ls.clone(),object:e}}(e,t,n,r,Xi,Yi,Ji,as);if(p){a&&(is.fromBufferAttribute(a,c),ss.fromBufferAttribute(a,u),os.fromBufferAttribute(a,h),p.uv=hi.getUV(as,Xi,Yi,Ji,is,ss,os,new Bn)),l&&(is.fromBufferAttribute(l,c),ss.fromBufferAttribute(l,u),os.fromBufferAttribute(l,h),p.uv2=hi.getUV(as,Xi,Yi,Ji,is,ss,os,new Bn));const e={a:c,b:u,c:h,normal:new Jn,materialIndex:0};hi.getNormal(Xi,Yi,Ji,e.normal),p.face=e}return p}cs.prototype=Object.assign(Object.create(Yr.prototype),{constructor:cs,isMesh:!0,copy:function(e){return Yr.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ki.copy(n.boundingSphere),Ki.applyMatrix4(i),!1===e.ray.intersectsSphere(Ki))return;if(Wi.copy(i).invert(),qi.copy(e.ray).applyMatrix4(Wi),null!==n.boundingBox&&!1===qi.intersectsBox(n.boundingBox))return;let s;if(n.isBufferGeometry){const i=n.index,o=n.attributes.position,a=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=r[p.materialIndex];for(let n=Math.max(p.start,d.start),r=Math.min(p.start+p.count,d.start+d.count);n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);s=us(this,f,e,qi,o,a,l,c,u,r,h,d),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=p.materialIndex,t.push(s))}}else{for(let n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);n<h;n+=3){const h=i.getX(n),d=i.getX(n+1),p=i.getX(n+2);s=us(this,r,e,qi,o,a,l,c,u,h,d,p),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}else if(void 0!==o)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],p=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(i.start+i.count,d.start+d.count);n<r;n+=3){s=us(this,p,e,qi,o,a,l,c,u,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=i.materialIndex,t.push(s))}}else{for(let n=Math.max(0,d.start),i=Math.min(o.count,d.start+d.count);n<i;n+=3){s=us(this,r,e,qi,o,a,l,c,u,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class hs extends ji{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const o=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const a=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,r,i,s,p,f,m,g,v){const y=s/m,b=p/g,_=s/2,x=p/2,w=f/2,S=m+1,T=g+1;let E=0,M=0;const A=new Jn;for(let s=0;s<T;s++){const o=s*b-x;for(let a=0;a<S;a++){const h=a*y-_;A[e]=h*r,A[t]=o*i,A[n]=w,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(a/m),u.push(1-s/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+S*e,r=h+t+S*(e+1),i=h+(t+1)+S*(e+1),s=h+(t+1)+S*e;a.push(n,r,s),a.push(r,i,s),M+=6}o.addGroup(d,M,v),d+=M,h+=E}p("z","y","x",-1,-1,n,t,e,s,i,0),p("z","y","x",1,-1,n,t,-e,s,i,1),p("x","z","y",1,1,e,n,t,r,s,2),p("x","z","y",1,-1,e,n,-t,r,s,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new Oi(l,3)),this.setAttribute("normal",new Oi(c,3)),this.setAttribute("uv",new Oi(u,2))}}function ds(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function ps(e){const t={};for(let n=0;n<e.length;n++){const r=ds(e[n]);for(const e in r)t[e]=r[e]}return t}const fs={clone:ds,merge:ps};function ms(e){pi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function gs(){Yr.call(this),this.type="Camera",this.matrixWorldInverse=new Er,this.projectionMatrix=new Er,this.projectionMatrixInverse=new Er}function vs(e=50,t=1,n=.1,r=2e3){gs.call(this),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}ms.prototype=Object.create(pi.prototype),ms.prototype.constructor=ms,ms.prototype.isShaderMaterial=!0,ms.prototype.copy=function(e){return pi.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ds(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this},ms.prototype.toJSON=function(e){const t=pi.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t},gs.prototype=Object.assign(Object.create(Yr.prototype),{constructor:gs,isCamera:!0,copy:function(e,t){return Yr.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Jn),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Yr.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(e,t){Yr.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),vs.prototype=Object.assign(Object.create(gs.prototype),{constructor:vs,isPerspectiveCamera:!0,copy:function(e,t){return gs.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Un.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(.5*Un.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Un.RAD2DEG*Math.atan(Math.tan(.5*Un.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(.5*Un.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,o=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/o,r*=s.width/e,n*=s.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=Yr.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const ys=90;class bs extends Yr{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new vs(ys,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Jn(1,0,0)),this.add(r);const i=new vs(ys,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Jn(-1,0,0)),this.add(i);const s=new vs(ys,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new Jn(0,1,0)),this.add(s);const o=new vs(ys,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new Jn(0,-1,0)),this.add(o);const a=new vs(ys,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new Jn(0,0,1)),this.add(a);const l=new vs(ys,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Jn(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,s,o,a,l]=this.children,c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}class _s extends jn{constructor(e,t,n,r,i,s,o,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:se,n,r,i,s,o=void 0!==o?o:Fe,a,l,c),this._needsFlipEnvMap=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}_s.prototype.isCubeTexture=!0;class xs extends Kn{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new _s(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:be,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=ze,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new hs(5,5,5),i=new ms({name:"CubemapFromEquirect",uniforms:ds(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:b});i.uniforms.tEquirect.value=t;const s=new cs(r,i),o=t.minFilter;t.minFilter===we&&(t.minFilter=be);return new bs(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}xs.prototype.isWebGLCubeRenderTarget=!0;class ws extends jn{constructor(e,t,n,r,i,s,o,a,l,c,u,h){super(null,s,o,a,l,c,r,i,u,h),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=void 0!==l?l:fe,this.minFilter=void 0!==c?c:fe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}ws.prototype.isDataTexture=!0;const Ss=new gr,Ts=new Jn;class Es{constructor(e=new ei,t=new ei,n=new ei,r=new ei,i=new ei,s=new ei){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-r,u-a,f-h,y-m).normalize(),t[1].setComponents(o+r,u+a,f+h,y+m).normalize(),t[2].setComponents(o+i,u+l,f+d,y+g).normalize(),t[3].setComponents(o-i,u-l,f-d,y-g).normalize(),t[4].setComponents(o-s,u-c,f-p,y-v).normalize(),t[5].setComponents(o+s,u+c,f+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ss.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ss)}intersectsSprite(e){return Ss.center.set(0,0,0),Ss.radius=.7071067811865476,Ss.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ss)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Ts.x=r.normal.x>0?e.max.x:e.min.x,Ts.y=r.normal.y>0?e.max.y:e.min.y,Ts.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ts)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ms(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function As(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=r.get(t);void 0===s?r.set(t,function(t,r){const i=t.array,s=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,s),t.onUploadCallback();let a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?a=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):s.version<t.version&&(!function(t,r,i){const s=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,s):(n?e.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):e.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(s.buffer,t,i),s.version=t.version)}}}class Cs extends ji{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,o=Math.floor(n),a=Math.floor(r),l=o+1,c=a+1,u=e/o,h=t/a,d=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*h-s;for(let n=0;n<l;n++){const r=n*u-i;p.push(r,-t,0),f.push(0,0,1),m.push(n/o),m.push(1-e/a)}}for(let e=0;e<a;e++)for(let t=0;t<o;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),s=t+1+l*e;d.push(n,r,s),d.push(r,i,s)}this.setIndex(d),this.setAttribute("position",new Oi(p,3)),this.setAttribute("normal",new Oi(f,3)),this.setAttribute("uv",new Oi(m,2))}}const ks={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Ps={common:{diffuse:{value:new _i(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Vn},uv2Transform:{value:new Vn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Bn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _i(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _i(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Vn}},sprite:{diffuse:{value:new _i(15658734)},opacity:{value:1},center:{value:new Bn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Vn}}},Rs={basic:{uniforms:ps([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.fog]),vertexShader:ks.meshbasic_vert,fragmentShader:ks.meshbasic_frag},lambert:{uniforms:ps([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.fog,Ps.lights,{emissive:{value:new _i(0)}}]),vertexShader:ks.meshlambert_vert,fragmentShader:ks.meshlambert_frag},phong:{uniforms:ps([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.fog,Ps.lights,{emissive:{value:new _i(0)},specular:{value:new _i(1118481)},shininess:{value:30}}]),vertexShader:ks.meshphong_vert,fragmentShader:ks.meshphong_frag},standard:{uniforms:ps([Ps.common,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.roughnessmap,Ps.metalnessmap,Ps.fog,Ps.lights,{emissive:{value:new _i(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ks.meshphysical_vert,fragmentShader:ks.meshphysical_frag},toon:{uniforms:ps([Ps.common,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.gradientmap,Ps.fog,Ps.lights,{emissive:{value:new _i(0)}}]),vertexShader:ks.meshtoon_vert,fragmentShader:ks.meshtoon_frag},matcap:{uniforms:ps([Ps.common,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.fog,{matcap:{value:null}}]),vertexShader:ks.meshmatcap_vert,fragmentShader:ks.meshmatcap_frag},points:{uniforms:ps([Ps.points,Ps.fog]),vertexShader:ks.points_vert,fragmentShader:ks.points_frag},dashed:{uniforms:ps([Ps.common,Ps.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ks.linedashed_vert,fragmentShader:ks.linedashed_frag},depth:{uniforms:ps([Ps.common,Ps.displacementmap]),vertexShader:ks.depth_vert,fragmentShader:ks.depth_frag},normal:{uniforms:ps([Ps.common,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,{opacity:{value:1}}]),vertexShader:ks.normal_vert,fragmentShader:ks.normal_frag},sprite:{uniforms:ps([Ps.sprite,Ps.fog]),vertexShader:ks.sprite_vert,fragmentShader:ks.sprite_frag},background:{uniforms:{uvTransform:{value:new Vn},t2D:{value:null}},vertexShader:ks.background_vert,fragmentShader:ks.background_frag},cube:{uniforms:ps([Ps.envmap,{opacity:{value:1}}]),vertexShader:ks.cube_vert,fragmentShader:ks.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ks.equirect_vert,fragmentShader:ks.equirect_frag},distanceRGBA:{uniforms:ps([Ps.common,Ps.displacementmap,{referencePosition:{value:new Jn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ks.distanceRGBA_vert,fragmentShader:ks.distanceRGBA_frag},shadow:{uniforms:ps([Ps.lights,Ps.fog,{color:{value:new _i(0)},opacity:{value:1}}]),vertexShader:ks.shadow_vert,fragmentShader:ks.shadow_frag}};function Ls(e,t,n,r,i){const s=new _i(0);let o,a,l=0,c=null,u=0,h=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return s},setClearColor:function(e,t=1){s.set(e),l=t,d(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,d(s,l)},render:function(n,i,p,g){let v=!0===i.isScene?i.background:null;v&&v.isTexture&&(v=t.get(v));const y=e.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(v=null),null===v?d(s,l):v&&v.isColor&&(d(v,1),g=!0),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.isWebGLCubeRenderTarget||v.mapping===ce)?(void 0===a&&(a=new cs(new hs(1,1,1),new ms({name:"BackgroundCubeMaterial",uniforms:ds(Rs.cube.uniforms),vertexShader:Rs.cube.vertexShader,fragmentShader:Rs.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(a)),v.isWebGLCubeRenderTarget&&(v=v.texture),a.material.uniforms.envMap.value=v,a.material.uniforms.flipEnvMap.value=v.isCubeTexture&&v._needsFlipEnvMap?-1:1,c===v&&u===v.version&&h===e.toneMapping||(a.material.needsUpdate=!0,c=v,u=v.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):v&&v.isTexture&&(void 0===o&&(o=new cs(new Cs(2,2),new ms({name:"BackgroundMaterial",uniforms:ds(Rs.background.uniforms),vertexShader:Rs.background.vertexShader,fragmentShader:Rs.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),o.material.uniforms.uvTransform.value.copy(v.matrix),c===v&&u===v.version&&h===e.toneMapping||(o.material.needsUpdate=!0,c=v,u=v.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Os(e,t,n,r){const i=e.getParameter(34921),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==s,a={},l=d(null);let c=l;function u(t){return r.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function f(e){m(e,0)}function m(n,i){const s=c.newAttributes,o=c.enabledAttributes,a=c.attributeDivisors;if(s[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),a[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,s,o,a){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,s,o,a):e.vertexAttribIPointer(t,n,i,o,a)}function y(){b(),c!==l&&(c=l,u(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,y,b){let _=!1;if(o){const t=function(t,n,i){const o=!0===i.wireframe;let l=a[t.id];void 0===l&&(l={},a[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[o];void 0===u&&(u=d(r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[o]=u);return u}(y,h,l);c!==t&&(c=t,u(c.object)),_=function(e,t){const n=c.attributes,r=e.attributes;let i=0;for(const e in r){const t=n[e],s=r[e];if(void 0===t)return!0;if(t.attribute!==s)return!0;if(t.data!==s.data)return!0;i++}return c.attributesNum!==i||c.index!==t}(y,b),_&&function(e,t){const n={},r=e.attributes;let i=0;for(const e in r){const t=r[e],s={};s.attribute=t,t.data&&(s.data=t.data),n[e]=s,i++}c.attributes=n,c.attributesNum=i,c.index=t}(y,b)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===e||(c.geometry=y.id,c.program=h.id,c.wireframe=e,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(!function(i,s,o,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=a.attributes,c=o.getAttributes(),u=s.defaultAttributeValues;for(const t in c){const r=c[t];if(r>=0){const s=l[t];if(void 0!==s){const t=s.normalized,i=s.itemSize,o=n.get(s);if(void 0===o)continue;const l=o.buffer,c=o.type,u=o.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,o=n.stride,h=s.offset;n&&n.isInstancedInterleavedBuffer?(m(r,n.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)):f(r),e.bindBuffer(34962,l),v(r,i,c,t,o*u,h*u)}else s.isInstancedBufferAttribute?(m(r,s.meshPerAttribute),void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)):f(r),e.bindBuffer(34962,l),v(r,i,c,t,0,0)}else if("instanceMatrix"===t){const t=n.get(i.instanceMatrix);if(void 0===t)continue;const s=t.buffer,o=t.type;m(r+0,1),m(r+1,1),m(r+2,1),m(r+3,1),e.bindBuffer(34962,s),e.vertexAttribPointer(r+0,4,o,!1,64,0),e.vertexAttribPointer(r+1,4,o,!1,64,16),e.vertexAttribPointer(r+2,4,o,!1,64,32),e.vertexAttribPointer(r+3,4,o,!1,64,48)}else if("instanceColor"===t){const t=n.get(i.instanceColor);if(void 0===t)continue;const s=t.buffer,o=t.type;m(r,1),e.bindBuffer(34962,s),e.vertexAttribPointer(r,3,o,!1,12,0)}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r,n);break;case 3:e.vertexAttrib3fv(r,n);break;case 4:e.vertexAttrib4fv(r,n);break;default:e.vertexAttrib1fv(r,n)}}}}g()}(i,l,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function(e){if(void 0===a[e.id])return;const t=a[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete a[e.id]},releaseStatesOfProgram:function(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:f,disableUnusedAttributes:g}}function Ns(e,t,n,r){const i=r.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,r){e.drawArrays(s,t,r),n.update(r,s,1)},this.renderInstances=function(r,o,a){if(0===a)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,r,o,a),n.update(o,s,a)}}function Is(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),v=u>0,y=s||t.has("OES_texture_float");return{isWebGL2:s,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:s?e.getParameter(36183):0}}function Ds(e){const t=this;let n=null,r=0,i=!1,s=!1;const o=new ei,a=new Vn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==i||null===c){const t=r+4*s,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==s;++t,n+=4)o.copy(e[t]).applyMatrix4(i,a),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,s){const o=0!==e.length||t||0!==r||i;return i=t,n=u(e,s,0),r=e.length,o},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(t,o,a){const h=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!i||null===h||0===h.length||s&&!p)s?u(null):c();else{const e=s?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=u(h,o,t,a);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Fs(e){let t=new WeakMap;function n(e,t){return t===ae?e.mapping=se:t===le&&(e.mapping=oe),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping;if(s===ae||s===le){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const s=i.image;if(s&&s.height>0){const o=e.getRenderTarget(),a=new xs(s.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),e.setRenderTarget(o),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}function zs(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Us(e,t,n,r){const i={},s=new WeakMap;function o(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const e in a.attributes)t.remove(a.attributes[e]);a.removeEventListener("dispose",o),delete i[a.id];const l=s.get(a);l&&(t.remove(l),s.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const a=new(Ii(n)>65535?Ri:ki)(n,1);a.version=o;const l=s.get(e);l&&t.remove(l),s.set(e,a)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return s.get(e)}}}function Bs(e,t,n,r){const i=r.isWebGL2;let s,o,a;this.setMode=function(e){s=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(s,r,o,t*a),n.update(r,s,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](s,l,o,r*a,c),n.update(l,s,c)}}function Vs(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Gs(e,t){return e[0]-t[0]}function Zs(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Hs(e){const t={},n=new Float32Array(8),r=[];for(let e=0;e<8;e++)r[e]=[e,0];return{update:function(i,s,o,a){const l=i.morphTargetInfluences,c=void 0===l?0:l.length;let u=t[s.id];if(void 0===u){u=[];for(let e=0;e<c;e++)u[e]=[e,0];t[s.id]=u}for(let e=0;e<c;e++){const t=u[e];t[0]=e,t[1]=l[e]}u.sort(Zs);for(let e=0;e<8;e++)e<c&&u[e][1]?(r[e][0]=u[e][0],r[e][1]=u[e][1]):(r[e][0]=Number.MAX_SAFE_INTEGER,r[e][1]=0);r.sort(Gs);const h=o.morphTargets&&s.morphAttributes.position,d=o.morphNormals&&s.morphAttributes.normal;let p=0;for(let e=0;e<8;e++){const t=r[e],i=t[0],o=t[1];i!==Number.MAX_SAFE_INTEGER&&o?(h&&s.getAttribute("morphTarget"+e)!==h[i]&&s.setAttribute("morphTarget"+e,h[i]),d&&s.getAttribute("morphNormal"+e)!==d[i]&&s.setAttribute("morphNormal"+e,d[i]),n[e]=o,p+=o):(h&&!0===s.hasAttribute("morphTarget"+e)&&s.deleteAttribute("morphTarget"+e),d&&!0===s.hasAttribute("morphNormal"+e)&&s.deleteAttribute("morphNormal"+e),n[e]=0)}const f=s.morphTargetsRelative?1:1-p;a.getUniforms().setValue(e,"morphTargetBaseInfluence",f),a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function js(e,t,n,r){let i=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const o=r.render.frame,a=e.geometry,l=t.get(e,a);return i.get(l)!==o&&(t.update(l),i.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}Rs.physical={uniforms:ps([Rs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Bn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new _i(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ks.meshphysical_vert,fragmentShader:ks.meshphysical_frag};class Ws extends jn{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=fe,this.minFilter=fe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}Ws.prototype.isDataTexture2DArray=!0;class qs extends jn{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=fe,this.minFilter=fe,this.wrapR=de,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}}qs.prototype.isDataTexture3D=!0;const Ks=new jn,Xs=new Ws,Ys=new qs,Js=new _s,$s=[],Qs=[],eo=new Float32Array(16),to=new Float32Array(9),no=new Float32Array(4);function ro(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=$s[i];if(void 0===s&&(s=new Float32Array(i),$s[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function io(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function so(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function oo(e,t){let n=Qs[t];void 0===n&&(n=new Int32Array(t),Qs[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function ao(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function lo(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(io(n,t))return;e.uniform2fv(this.addr,t),so(n,t)}}function co(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(io(n,t))return;e.uniform3fv(this.addr,t),so(n,t)}}function uo(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(io(n,t))return;e.uniform4fv(this.addr,t),so(n,t)}}function ho(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(io(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),so(n,t)}else{if(io(n,r))return;no.set(r),e.uniformMatrix2fv(this.addr,!1,no),so(n,r)}}function po(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(io(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),so(n,t)}else{if(io(n,r))return;to.set(r),e.uniformMatrix3fv(this.addr,!1,to),so(n,r)}}function fo(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(io(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),so(n,t)}else{if(io(n,r))return;eo.set(r),e.uniformMatrix4fv(this.addr,!1,eo),so(n,r)}}function mo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Ks,i)}function go(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Xs,i)}function vo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ys,i)}function yo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Js,i)}function bo(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function _o(e,t){const n=this.cache;io(n,t)||(e.uniform2iv(this.addr,t),so(n,t))}function xo(e,t){const n=this.cache;io(n,t)||(e.uniform3iv(this.addr,t),so(n,t))}function wo(e,t){const n=this.cache;io(n,t)||(e.uniform4iv(this.addr,t),so(n,t))}function So(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function To(e,t){e.uniform1fv(this.addr,t)}function Eo(e,t){e.uniform1iv(this.addr,t)}function Mo(e,t){e.uniform2iv(this.addr,t)}function Ao(e,t){e.uniform3iv(this.addr,t)}function Co(e,t){e.uniform4iv(this.addr,t)}function ko(e,t){const n=ro(t,this.size,2);e.uniform2fv(this.addr,n)}function Po(e,t){const n=ro(t,this.size,3);e.uniform3fv(this.addr,n)}function Ro(e,t){const n=ro(t,this.size,4);e.uniform4fv(this.addr,n)}function Lo(e,t){const n=ro(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Oo(e,t){const n=ro(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function No(e,t){const n=ro(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Io(e,t,n){const r=t.length,i=oo(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTexture2D(t[e]||Ks,i[e])}function Do(e,t,n){const r=t.length,i=oo(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTextureCube(t[e]||Js,i[e])}function Fo(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return ao;case 35664:return lo;case 35665:return co;case 35666:return uo;case 35674:return ho;case 35675:return po;case 35676:return fo;case 5124:case 35670:return bo;case 35667:case 35671:return _o;case 35668:case 35672:return xo;case 35669:case 35673:return wo;case 5125:return So;case 35678:case 36198:case 36298:case 36306:case 35682:return mo;case 35679:case 36299:case 36307:return vo;case 35680:case 36300:case 36308:case 36293:return yo;case 36289:case 36303:case 36311:case 36292:return go}}(t.type)}function zo(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return To;case 35664:return ko;case 35665:return Po;case 35666:return Ro;case 35674:return Lo;case 35675:return Oo;case 35676:return No;case 5124:case 35670:return Eo;case 35667:case 35671:return Mo;case 35668:case 35672:return Ao;case 35669:case 35673:return Co;case 35678:case 36198:case 36298:case 36306:case 35682:return Io;case 35680:case 36300:case 36308:case 36293:return Do}}(t.type)}function Uo(e){this.id=e,this.seq=[],this.map={}}zo.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),so(t,e)},Uo.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}};const Bo=/(\w+)(\])?(\[|\.)?/g;function Vo(e,t){e.seq.push(t),e.map[t.id]=t}function Go(e,t,n){const r=e.name,i=r.length;for(Bo.lastIndex=0;;){const s=Bo.exec(r),o=Bo.lastIndex;let a=s[1];const l="]"===s[2],c=s[3];if(l&&(a|=0),void 0===c||"["===c&&o+2===i){Vo(n,void 0===c?new Fo(a,e,t):new zo(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new Uo(a),Vo(n,e)),n=e}}}function Zo(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Go(n,e.getUniformLocation(t,n.name),this)}}function Ho(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Zo.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Zo.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},Zo.upload=function(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],o=n[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,r)}},Zo.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let jo=0;function Wo(e){switch(e){case Yt:return["Linear","( value )"];case Jt:return["sRGB","( value )"];case Qt:return["RGBE","( value )"];case tn:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case $t:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case en:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function qo(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Ko(e,t){const n=Wo(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Xo(e,t){const n=Wo(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Yo(e,t){let n;switch(t){case Q:n="Linear";break;case ee:n="Reinhard";break;case te:n="OptimizedCineon";break;case ne:n="ACESFilmic";break;case re:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Jo(e){return""!==e}function $o(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Qo(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ea=/^[ \t]*#include +<([\w\d./]+)>/gm;function ta(e){return e.replace(ea,na)}function na(e,t){const n=ks[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ta(n)}const ra=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ia=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function sa(e){return e.replace(ia,aa).replace(ra,oa)}function oa(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),aa(e,t,n,r)}function aa(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function la(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function ca(e,t,n,r){const i=e.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===p&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case se:case oe:t="ENVMAP_TYPE_CUBE";break;case ce:case ue:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case oe:case ue:t="ENVMAP_MODE_REFRACTION"}return t}(n),f=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case X:t="ENVMAP_BLENDING_MULTIPLY";break;case Y:t="ENVMAP_BLENDING_MIX";break;case J:t="ENVMAP_BLENDING_ADD"}return t}(n),m=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Jo).join("\n")}(n),v=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),y=i.createProgram();let b,_,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[v].filter(Jo).join("\n"),b.length>0&&(b+="\n"),_=[g,v].filter(Jo).join("\n"),_.length>0&&(_+="\n")):(b=[la(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Jo).join("\n"),_=[g,la(n),"#define SHADER_NAME "+n.shaderName,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==$?"#define TONE_MAPPING":"",n.toneMapping!==$?ks.tonemapping_pars_fragment:"",n.toneMapping!==$?Yo("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",ks.encodings_pars_fragment,n.map?Ko("mapTexelToLinear",n.mapEncoding):"",n.matcap?Ko("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Ko("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Ko("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Ko("lightMapTexelToLinear",n.lightMapEncoding):"",Xo("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Jo).join("\n")),o=ta(o),o=$o(o,n),o=Qo(o,n),a=ta(a),a=$o(a,n),a=Qo(a,n),o=sa(o),a=sa(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",b=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,_=["#define varying in",n.glslVersion===In?"":"out highp vec4 pc_fragColor;",n.glslVersion===In?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const w=x+_+a,S=Ho(i,35633,x+b+o),T=Ho(i,35632,w);if(i.attachShader(y,S),i.attachShader(y,T),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(y).trim(),t=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(T).trim();let r=!0,s=!0;if(!1===i.getProgramParameter(y,35714)){r=!1;const t=qo(i,S,"vertex"),n=qo(i,T,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(y,35715),"gl.getProgramInfoLog",e,t,n)}else""!==e?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",e):""!==t&&""!==n||(s=!1);s&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:b},fragmentShader:{log:n,prefix:_}})}let E,M;return i.deleteShader(S),i.deleteShader(T),this.getUniforms=function(){return void 0===E&&(E=new Zo(i,y)),E},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i).name;n[r]=e.getAttribLocation(t,r)}return n}(i,y)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=jo++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=T,this}function ua(e,t,n,r,i,s){const o=[],a=r.isWebGL2,l=r.logarithmicDepthBuffer,c=r.floatVertexTextures,u=r.maxVertexUniforms,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function v(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Yt,t}return{getParameters:function(i,o,f,y,b){const _=y.fog,x=i.isMeshStandardMaterial?y.environment:null,w=t.get(i.envMap||x),S=p[i.type],T=b.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=u,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(b):0;let E,M;if(null!==i.precision&&(d=r.getMaxPrecision(i.precision),d!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",d,"instead.")),S){const e=Rs[S];E=e.vertexShader,M=e.fragmentShader}else E=i.vertexShader,M=i.fragmentShader;const A=e.getRenderTarget();return{isWebGL2:a,shaderID:S,shaderName:i.type,vertexShader:E,fragmentShader:M,defines:i.defines,isRawShaderMaterial:!0===i.isRawShaderMaterial,glslVersion:i.glslVersion,precision:d,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:h,outputEncoding:null!==A?v(A.texture):e.outputEncoding,map:!!i.map,mapEncoding:v(i.map),matcap:!!i.matcap,matcapEncoding:v(i.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:v(w),envMapCubeUV:!!w&&(w.mapping===ce||w.mapping===ue),lightMap:!!i.lightMap,lightMapEncoding:v(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:v(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===ln,tangentSpaceNormalMap:i.normalMapType===an,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!_,useFog:i.fog,fogExp2:_&&_.isFogExp2,flatShading:!!i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:l,skinning:i.skinning&&T>0,maxBones:T,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:i.dithering,shadowMapEnabled:e.shadowMap.enabled&&f.length>0,shadowMapType:e.shadowMap.type,toneMapping:i.toneMapped?e.toneMapping:$,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===g,flipSided:i.side===m,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<f.length;e++)n.push(t[f[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=Rs[t];n=fs.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=o.length;e<t;e++){const t=o[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new ca(e,n,t,i),o.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},programs:o}}function ha(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function da(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function pa(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function fa(e){const t=[];let n=0;const r=[],i=[],s={id:-1};function o(r,i,o,a,l,c){let u=t[n];const h=e.get(o);return void 0===u?(u={id:r.id,object:r,geometry:i,material:o,program:h.program||s,groupOrder:a,renderOrder:r.renderOrder,z:l,group:c},t[n]=u):(u.id=r.id,u.object=r,u.geometry=i,u.material=o,u.program=h.program||s,u.groupOrder=a,u.renderOrder=r.renderOrder,u.z=l,u.group=c),n++,u}return{opaque:r,transparent:i,init:function(){n=0,r.length=0,i.length=0},push:function(e,t,n,s,a,l){const c=o(e,t,n,s,a,l);(!0===n.transparent?i:r).push(c)},unshift:function(e,t,n,s,a,l){const c=o(e,t,n,s,a,l);(!0===n.transparent?i:r).unshift(c)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||da),i.length>1&&i.sort(t||pa)}}}function ma(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new fa(e),t.set(n,[i])):r>=t.get(n).length?(i=new fa(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function ga(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Jn,color:new _i};break;case"SpotLight":n={position:new Jn,direction:new Jn,color:new _i,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Jn,color:new _i,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Jn,skyColor:new _i,groundColor:new _i};break;case"RectAreaLight":n={color:new _i,position:new Jn,halfWidth:new Jn,halfHeight:new Jn}}return e[t.id]=n,n}}}let va=0;function ya(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function ba(e,t){const n=new ga,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Bn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new Jn);const s=new Jn,o=new Er,a=new Er;return{setup:function(s){let o=0,a=0,l=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,u=0,h=0,d=0,p=0,f=0,m=0,g=0;s.sort(ya);for(let e=0,t=s.length;e<t;e++){const t=s[e],v=t.color,y=t.intensity,b=t.distance,_=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=v.r*y,a+=v.g*y,l+=v.b*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],y);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=_,i.directionalShadowMatrix[c]=t.shadow.matrix,f++}i.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(v).multiplyScalar(y),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[h]=n,i.spotShadowMap[h]=_,i.spotShadowMatrix[h]=t.shadow.matrix,g++}i.spot[h]=e,h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(v).multiplyScalar(y),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[d]=e,d++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[u]=n,i.pointShadowMap[u]=_,i.pointShadowMatrix[u]=t.shadow.matrix,m++}i.point[u]=e,u++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(y),e.groundColor.copy(t.groundColor).multiplyScalar(y),i.hemi[p]=e,p++}}d>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Ps.LTC_FLOAT_1,i.rectAreaLTC2=Ps.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Ps.LTC_HALF_1,i.rectAreaLTC2=Ps.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=a,i.ambient[2]=l;const v=i.hash;v.directionalLength===c&&v.pointLength===u&&v.spotLength===h&&v.rectAreaLength===d&&v.hemiLength===p&&v.numDirectionalShadows===f&&v.numPointShadows===m&&v.numSpotShadows===g||(i.directional.length=c,i.spot.length=h,i.rectArea.length=d,i.point.length=u,i.hemi.length=p,i.directionalShadow.length=f,i.directionalShadowMap.length=f,i.pointShadow.length=m,i.pointShadowMap.length=m,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=f,i.pointShadowMatrix.length=m,i.spotShadowMatrix.length=g,v.directionalLength=c,v.pointLength=u,v.spotLength=h,v.rectAreaLength=d,v.hemiLength=p,v.numDirectionalShadows=f,v.numPointShadows=m,v.numSpotShadows=g,i.version=va++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),a.identity(),o.copy(d.matrixWorld),o.premultiply(h),a.extractRotation(o),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(d.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),u++}}},state:i}}function _a(e,t){const n=new ba(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(){n.setup(r)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function xa(e,t){let n=new WeakMap;return{get:function(r,i=0){let s;return!1===n.has(r)?(s=new _a(e,t),n.set(r,[s])):i>=n.get(r).length?(s=new _a(e,t),n.get(r).push(s)):s=n.get(r)[i],s},dispose:function(){n=new WeakMap}}}class wa extends pi{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=sn,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}wa.prototype.isMeshDepthMaterial=!0;class Sa extends pi{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Jn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Sa.prototype.isMeshDistanceMaterial=!0;function Ta(e,t,n){let r=new Es;const i=new Bn,s=new Bn,o=new qn,a=[],l=[],c={},u={0:m,1:f,2:g},d=new ms({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Bn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),v=d.clone();v.defines.HORIZONTAL_PASS=1;const y=new ji;y.setAttribute("position",new Ti(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new cs(y,d),x=this;function w(n,r){const i=t.update(_);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,d,_,null),v.uniforms.shadow_pass.value=n.mapPass.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,v,_,null)}function S(e,t,n){const r=e<<0|t<<1|n<<2;let i=a[r];return void 0===i&&(i=new wa({depthPacking:on,morphTargets:e,skinning:t}),a[r]=i),i}function T(e,t,n){const r=e<<0|t<<1|n<<2;let i=l[r];return void 0===i&&(i=new Sa({morphTargets:e,skinning:t}),l[r]=i),i}function E(t,n,r,i,s,o,a){let l=null,h=S,d=t.customDepthMaterial;if(!0===i.isPointLight&&(h=T,d=t.customDistanceMaterial),void 0===d){let e=!1;!0===r.morphTargets&&(e=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let i=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?i=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t));l=h(e,i,!0===t.isInstancedMesh)}else l=d;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){const e=l.uuid,t=r.uuid;let n=c[e];void 0===n&&(n={},c[e]=n);let i=n[t];void 0===i&&(i=l.clone(),n[t]=i),l=i}return l.visible=r.visible,l.wireframe=r.wireframe,l.side=a===p?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:u[r.side],l.clipShadows=r.clipShadows,l.clippingPlanes=r.clippingPlanes,l.clipIntersection=r.clipIntersection,l.wireframeLinewidth=r.wireframeLinewidth,l.linewidth=r.linewidth,!0===i.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(i.matrixWorld),l.nearDistance=s,l.farDistance=o),l}function M(n,i,s,o,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===p)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=E(n,r,u,o,s.near,s.far,a);e.renderBufferDirect(s,null,r,t,n,c)}}}else if(i.visible){const t=E(n,r,i,o,s.near,s.far,a);e.renderBufferDirect(s,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)M(l[e],i,s,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(t,a,l){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(b),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let c=0,u=t.length;c<u;c++){const u=t[c],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const f=h.getFrameExtents();if(i.multiply(f),s.copy(h.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(s.x=Math.floor(n/f.x),i.x=s.x*f.x,h.mapSize.x=s.x),i.y>n&&(s.y=Math.floor(n/f.y),i.y=s.y*f.y,h.mapSize.y=s.y)),null===h.map&&!h.isPointLightShadow&&this.type===p){const e={minFilter:be,magFilter:be,format:ze};h.map=new Kn(i.x,i.y,e),h.map.texture.name=u.name+".shadowMap",h.mapPass=new Kn(i.x,i.y,e),h.camera.updateProjectionMatrix()}if(null===h.map){const e={minFilter:fe,magFilter:fe,format:ze};h.map=new Kn(i.x,i.y,e),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const m=h.getViewportCount();for(let e=0;e<m;e++){const t=h.getViewport(e);o.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(o),h.updateMatrices(u,e),r=h.getFrustum(),M(a,l,h.camera,u,this.type)}h.isPointLightShadow||this.type!==p||w(h,l),h.needsUpdate=!1}x.needsUpdate=!1,e.setRenderTarget(c,u,h)}}function Ea(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new qn;let r=null;const i=new qn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,o,a){!0===a&&(t*=o,r*=o,s*=o),n.set(t,r,s,o),!1===i.equals(n)&&(e.clearColor(t,r,s,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?fe(2929):me(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case V:e.depthFunc(512);break;case G:e.depthFunc(519);break;case Z:e.depthFunc(513);break;case H:e.depthFunc(515);break;case j:e.depthFunc(514);break;case W:e.depthFunc(518);break;case q:e.depthFunc(516);break;case K:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},c=new function(){let t=!1,n=null,r=null,i=null,s=null,o=null,a=null,l=null,c=null;return{setTest:function(e){t||(e?fe(2960):me(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&s===o||(e.stencilFunc(t,n,o),r=t,i=n,s=o)},setOp:function(t,n,r){o===t&&a===n&&l===r||(e.stencilOp(t,n,r),o=t,a=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,o=null,a=null,l=null,c=null}}};let u={},h=null,d=!1,p=null,f=null,v=null,y=null,X=null,Y=null,J=null,$=!1,Q=null,ee=null,te=null,ne=null,re=null;const ie=e.getParameter(35661);let se=!1,oe=0;const ae=e.getParameter(7938);-1!==ae.indexOf("WebGL")?(oe=parseFloat(/^WebGL (\d)/.exec(ae)[1]),se=oe>=1):-1!==ae.indexOf("OpenGL ES")&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(ae)[1]),se=oe>=2);let le=null,ce={};const ue=new qn,he=new qn;function de(t,n,r){const i=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return s}const pe={};function fe(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function me(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}pe[3553]=de(3553,3553,1),pe[34067]=de(34067,34069,6),i.setClear(0,0,0,1),s.setClear(1),c.setClear(0),fe(2929),s.setFunc(H),be(!1),_e(a),fe(2884),ye(b);const ge={[E]:32774,[M]:32778,[A]:32779};if(r)ge[C]=32775,ge[k]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(ge[C]=e.MIN_EXT,ge[k]=e.MAX_EXT)}const ve={[P]:0,[R]:1,[L]:768,[N]:770,[B]:776,[z]:774,[D]:772,[O]:769,[I]:771,[U]:775,[F]:773};function ye(t,n,r,i,s,o,a,l){if(t!==b){if(!1===d&&(fe(3042),d=!0),t===T)s=s||n,o=o||r,a=a||i,n===f&&s===X||(e.blendEquationSeparate(ge[n],ge[s]),f=n,X=s),r===v&&i===y&&o===Y&&a===J||(e.blendFuncSeparate(ve[r],ve[i],ve[o],ve[a]),v=r,y=i,Y=o,J=a),p=t,$=null;else if(t!==p||l!==$){if(f===E&&X===E||(e.blendEquation(32774),f=E,X=E),l)switch(t){case _:e.blendFuncSeparate(1,771,1,771);break;case x:e.blendFunc(1,1);break;case w:e.blendFuncSeparate(0,0,769,771);break;case S:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case _:e.blendFuncSeparate(770,771,1,771);break;case x:e.blendFunc(770,1);break;case w:e.blendFunc(0,769);break;case S:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,Y=null,J=null,p=t,$=l}}else!0===d&&(me(3042),d=!1)}function be(t){Q!==t&&(t?e.frontFace(2304):e.frontFace(2305),Q=t)}function _e(t){t!==o?(fe(2884),t!==ee&&(t===a?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):me(2884),ee=t}function xe(t,n,r){t?(fe(32823),ne===n&&re===r||(e.polygonOffset(n,r),ne=n,re=r)):me(32823)}function we(t){void 0===t&&(t=33984+ie-1),le!==t&&(e.activeTexture(t),le=t)}return{buffers:{color:i,depth:s,stencil:c},enable:fe,disable:me,useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:ye,setMaterial:function(e,t){e.side===g?me(2884):fe(2884);let n=e.side===m;t&&(n=!n),be(n),e.blending===_&&!1===e.transparent?ye(b):ye(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;c.setTest(r),r&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),xe(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:be,setCullFace:_e,setLineWidth:function(t){t!==te&&(se&&e.lineWidth(t),te=t)},setPolygonOffset:xe,setScissorTest:function(e){e?fe(3089):me(3089)},activeTexture:we,bindTexture:function(t,n){null===le&&we();let r=ce[le];void 0===r&&(r={type:void 0,texture:void 0},ce[le]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||pe[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=ce[le];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ue.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ue.copy(t))},viewport:function(t){!1===he.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),he.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},le=null,ce={},h=null,d=!1,p=null,f=null,v=null,y=null,X=null,Y=null,J=null,$=!1,Q=null,ee=null,te=null,ne=null,re=null,i.reset(),s.reset(),c.reset()}}}function Ma(e,t,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=new WeakMap;let p,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Un.floorPowerOfTwo:Math.floor,s=r(i*e.width),o=r(i*e.height);void 0===p&&(p=m(s,o));const a=n?m(s,o):p;a.width=s,a.height=o;return a.getContext("2d").drawImage(e,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+o+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return Un.isPowerOfTwo(e.width)&&Un.isPowerOfTwo(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==fe&&e.minFilter!==be}function b(t,n,i,s){e.generateMipmap(t);r.get(n).__maxMipLevel=Math.log2(Math.max(i,s))}function _(n,r,i){if(!1===a)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;return 6403===r&&(5126===i&&(s=33326),5131===i&&(s=33325),5121===i&&(s=33321)),6407===r&&(5126===i&&(s=34837),5131===i&&(s=34843),5121===i&&(s=32849)),6408===r&&(5126===i&&(s=34836),5131===i&&(s=34842),5121===i&&(s=32856)),33325!==s&&33326!==s&&34842!==s&&34836!==s||t.get("EXT_color_buffer_float"),s}function x(e){return e===fe||e===me||e===ve?9728:9729}function w(t){const n=t.target;n.removeEventListener("dispose",w),function(t){const n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&d.delete(n),o.memory.textures--}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=t.texture,i=r.get(t),s=r.get(n);if(!t)return;void 0!==s.__webglTexture&&e.deleteTexture(s.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);r.remove(n),r.remove(t)}(n),o.memory.textures--}let T=0;function E(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=o.render.frame;d.get(e)!==t&&(d.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void R(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function M(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;P(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=o||l?l?r.image[e].image:r.image[e]:g(r.image[e],!1,!0,c);const h=u[0],d=v(h)||a,p=s.convert(r.format),f=s.convert(r.type),m=_(r.internalFormat,p,f);let x;if(k(34067,r,d),o){for(let e=0;e<6;e++){x=u[e].mipmaps;for(let t=0;t<x.length;t++){const i=x[t];r.format!==ze&&r.format!==Fe?null!==p?n.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,m,i.width,i.height,0,p,f,i.data)}}t.__maxMipLevel=x.length-1}else{x=r.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,p,f,u[e].data);for(let t=0;t<x.length;t++){const r=x[t].image[e].image;n.texImage2D(34069+e,t+1,m,r.width,r.height,0,p,f,r.data)}}else{n.texImage2D(34069+e,0,m,p,f,u[e]);for(let t=0;t<x.length;t++){const r=x[t];n.texImage2D(34069+e,t+1,m,p,f,r.image[e])}}t.__maxMipLevel=x.length}y(r,d)&&b(34067,r,h.width,h.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(o,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))}const A={[he]:10497,[de]:33071,[pe]:33648},C={[fe]:9728,[me]:9984,[ve]:9986,[be]:9729,[_e]:9985,[we]:9987};function k(n,s,o){if(o?(e.texParameteri(n,10242,A[s.wrapS]),e.texParameteri(n,10243,A[s.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,A[s.wrapR]),e.texParameteri(n,10240,C[s.magFilter]),e.texParameteri(n,10241,C[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),s.wrapS===de&&s.wrapT===de||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,x(s.magFilter)),e.texParameteri(n,10241,x(s.minFilter)),s.minFilter!==fe&&s.minFilter!==be&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const o=t.get("EXT_texture_filter_anisotropic");if(s.type===Pe&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&s.type===Re&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function P(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),o.memory.textures++)}function R(t,r,i){let o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),P(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const l=function(e){return!a&&(e.wrapS!==de||e.wrapT!==de||e.minFilter!==fe&&e.minFilter!==be)}(r)&&!1===v(r.image),c=g(r.image,l,!1,u),h=v(c)||a,d=s.convert(r.format);let p,f=s.convert(r.type),m=_(r.internalFormat,d,f);k(o,r,h);const x=r.mipmaps;if(r.isDepthTexture)m=6402,a?m=r.type===Pe?36012:r.type===ke?33190:r.type===Ie?35056:33189:r.type===Pe&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Ge&&6402===m&&r.type!==Ae&&r.type!==ke&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ae,f=s.convert(r.type)),r.format===Ze&&6402===m&&(m=34041,r.type!==Ie&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Ie,f=s.convert(r.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(r.isDataTexture)if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)p=x[e],n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=x.length;e<t;e++)p=x[e],r.format!==ze&&r.format!==Fe?null!==d?n.compressedTexImage2D(3553,e,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,m,p.width,p.height,0,d,f,p.data);t.__maxMipLevel=x.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data),t.__maxMipLevel=0;else if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)p=x[e],n.texImage2D(3553,e,m,d,f,p);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,m,d,f,c),t.__maxMipLevel=0;y(r,h)&&b(o,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function L(t,i,o,a){const l=i.texture,c=s.convert(l.format),u=s.convert(l.type),h=_(l.internalFormat,c,u);32879===a||35866===a?n.texImage3D(a,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(a,0,h,i.width,i.height,0,c,u,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,a,r.get(l).__webglTexture,0),e.bindFramebuffer(36160,null)}function O(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Pe?i=36012:t.type===ke&&(i=33190));const r=I(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=I(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=n.texture,i=s.convert(t.format),o=s.convert(t.type),a=_(t.internalFormat,i,o);if(r){const t=I(n);e.renderbufferStorageMultisample(36161,t,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height)}e.bindRenderbuffer(36161,null)}function N(t){const n=r.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),E(n.depthTexture,0);const i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ge)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==Ze)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)e.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=e.createRenderbuffer(),O(n.__webglDepthbuffer[r],t,!1)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),O(n.__webglDepthbuffer,t,!1);e.bindFramebuffer(36160,null)}function I(e){return a&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let D=!1,F=!1;this.allocateTextureUnit=function(){const e=T;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?R(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?R(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=M,this.setupRenderTarget=function(t){const i=t.texture,l=r.get(t),c=r.get(i);t.addEventListener("dispose",S),c.__webglTexture=e.createTexture(),o.memory.textures++;const u=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultisampleRenderTarget,d=i.isDataTexture3D||i.isDataTexture2DArray,p=v(t)||a;if(!a||i.format!==Fe||i.type!==Pe&&i.type!==Re||(i.format=ze,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),u){l.__webglFramebuffer=[];for(let t=0;t<6;t++)l.__webglFramebuffer[t]=e.createFramebuffer()}else if(l.__webglFramebuffer=e.createFramebuffer(),h)if(a){l.__webglMultisampledFramebuffer=e.createFramebuffer(),l.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,l.__webglColorRenderbuffer);const n=s.convert(i.format),r=s.convert(i.type),o=_(i.internalFormat,n,r),a=I(t);e.renderbufferStorageMultisample(36161,a,o,t.width,t.height),e.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(l.__webglDepthRenderbuffer=e.createRenderbuffer(),O(l.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,c.__webglTexture),k(34067,i,p);for(let e=0;e<6;e++)L(l.__webglFramebuffer[e],t,36064,34069+e);y(i,p)&&b(34067,i,t.width,t.height),n.bindTexture(34067,null)}else{let e=3553;if(d)if(a){e=i.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(e,c.__webglTexture),k(e,i,p),L(l.__webglFramebuffer,t,36064,e),y(i,p)&&b(3553,i,t.width,t.height),n.bindTexture(3553,null)}t.depthBuffer&&N(t)},this.updateRenderTargetMipmap=function(e){const t=e.texture;if(y(t,v(e)||a)){const i=e.isWebGLCubeRenderTarget?34067:3553,s=r.get(t).__webglTexture;n.bindTexture(i,s),b(i,t,e.width,e.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(a){const n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);const i=t.width,s=t.height;let o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024),e.blitFramebuffer(0,0,i,s,0,0,i,s,o,9728),e.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),D=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),e=e.texture),M(e,t)}}function Aa(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(e===Te)return 5121;if(e===Le)return 32819;if(e===Oe)return 32820;if(e===Ne)return 33635;if(e===Ee)return 5120;if(e===Me)return 5122;if(e===Ae)return 5123;if(e===Ce)return 5124;if(e===ke)return 5125;if(e===Pe)return 5126;if(e===Re)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===De)return 6406;if(e===Fe)return 6407;if(e===ze)return 6408;if(e===Ue)return 6409;if(e===Be)return 6410;if(e===Ge)return 6402;if(e===Ze)return 34041;if(e===He)return 6403;if(e===je)return 36244;if(e===We)return 33319;if(e===qe)return 33320;if(e===Ke)return 36248;if(e===Xe)return 36249;if(e===Ye||e===Je||e===$e||e===Qe){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===Ye)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Je)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===$e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Qe)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===et||e===tt||e===nt||e===rt){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===et)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===nt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===rt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===it)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===st||e===ot)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===st)return n.COMPRESSED_RGB8_ETC2;if(e===ot)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===at||e===lt||e===ct||e===ut||e===ht||e===dt||e===pt||e===ft||e===mt||e===gt||e===vt||e===yt||e===bt||e===_t||e===wt||e===St||e===Tt||e===Et||e===Mt||e===At||e===Ct||e===kt||e===Pt||e===Rt||e===Lt||e===Ot||e===Nt||e===It?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===xt?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===Ie?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}function Ca(e=[]){vs.call(this),this.cameras=e}Ca.prototype=Object.assign(Object.create(vs.prototype),{constructor:Ca,isArrayCamera:!0});class ka extends Yr{constructor(){super(),this.type="Group"}}function Pa(){this._targetRay=null,this._grip=null,this._hand=null}function Ra(e,t){const n=this;let r=null,i=1,s=null,o="local-floor",a=null;const l=[],c=new Map,u=new vs;u.layers.enable(1),u.viewport=new qn;const h=new vs;h.layers.enable(2),h.viewport=new qn;const d=[u,h],p=new Ca;p.layers.enable(1),p.layers.enable(2);let f=null,m=null;function g(e){const t=c.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function v(){c.forEach((function(e,t){e.disconnect(t)})),c.clear(),f=null,m=null,e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(e){const t=r.inputSources;for(let e=0;e<l.length;e++)c.set(t[e],l[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=c.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),c.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],r=c.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=l[e];return void 0===t&&(t=new Pa,l[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=l[e];return void 0===t&&(t=new Pa,l[e]=t),t.getGripSpace()},this.getHand=function(e){let t=l[e];return void 0===t&&(t=new Pa,l[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getSession=function(){return r},this.setSession=async function(e){if(r=e,null!==r){r.addEventListener("select",g),r.addEventListener("selectstart",g),r.addEventListener("selectend",g),r.addEventListener("squeeze",g),r.addEventListener("squeezestart",g),r.addEventListener("squeezeend",g),r.addEventListener("end",v),r.addEventListener("inputsourceschange",y);const e=t.getContextAttributes();!0!==e.xrCompatible&&await t.makeXRCompatible();const a={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:i},l=new XRWebGLLayer(r,t,a);r.updateRenderState({baseLayer:l}),s=await r.requestReferenceSpace(o),S.setContext(r),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const b=new Jn,_=new Jn;function x(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.getCamera=function(e){p.near=h.near=u.near=e.near,p.far=h.far=u.far=e.far,f===p.near&&m===p.far||(r.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);const t=e.parent,n=p.cameras;x(p,t);for(let e=0;e<n.length;e++)x(n[e],t);e.matrixWorld.copy(p.matrixWorld),e.matrix.copy(p.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);return 2===n.length?function(e,t,n){b.setFromMatrixPosition(t.matrixWorld),_.setFromMatrixPosition(n.matrixWorld);const r=b.distanceTo(_),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,o=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(s[8]+1)/s[0],d=o*u,p=o*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=o+f,v=a+f,y=d-m,x=p+(r-m),w=l*a/v*g,S=c*a/v*g;e.projectionMatrix.makePerspective(y,x,w,S,g,v)}(p,u,h):p.projectionMatrix.copy(u.projectionMatrix),p};let w=null;const S=new Ms;S.setAnimationLoop((function(t,n){if(a=n.getViewerPose(s),null!==a){const t=a.views,n=r.renderState.baseLayer;e.setFramebuffer(n.framebuffer);let i=!1;t.length!==p.cameras.length&&(p.cameras.length=0,i=!0);for(let e=0;e<t.length;e++){const r=t[e],s=n.getViewport(r),o=d[e];o.matrix.fromArray(r.transform.matrix),o.projectionMatrix.fromArray(r.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===e&&p.matrix.copy(o.matrix),!0===i&&p.cameras.push(o)}}const i=r.inputSources;for(let e=0;e<l.length;e++){const t=l[e],r=i[e];t.update(r,n,s)}w&&w(t,n)})),this.setAnimationLoop=function(e){w=e},this.dispose=function(){}}function La(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&r._needsFlipEnvMap?-1:1,t.reflectivity.value=n.reflectivity,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,s;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(i=n.clearcoatRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?s=n.aoMap:n.lightMap&&(s=n.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),t.uv2Transform.value.copy(s.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===m&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===m&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,s){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t){n(e,t),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap);t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===m&&e.clearcoatNormalScale.value.negate());e.transmission.value=t.transmission,t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap)}(e,r):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===m&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===m&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function Oa(e){const t=void 0!==(e=e||{}).canvas?e.canvas:function(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,d=null;const p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Yt,this.physicallyCorrectLights=!1,this.toneMapping=$,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const m=this;let g=!1,v=null,y=0,b=0,_=null,x=null,w=-1,S=null;const T=new qn,E=new qn;let M=null,A=t.width,C=t.height,k=1,P=null,R=null;const L=new qn(0,0,A,C),O=new qn(0,0,A,C);let N=!1;const I=new Es;let D=!1,F=!1;const z=new Er,U=new Jn,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return null===_?k:1}let G,Z,H,j,W,q,K,X,Y,J,Q,ee,te,ne,re,ie,se,oe,ae,le,ce,ue=n;function he(e,n){for(let r=0;r<e.length;r++){const i=e[r],s=t.getContext(i,n);if(null!==s)return s}return null}try{const e={alpha:r,depth:i,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ge,!1),null===ue){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),ue=he(t,e),null===ue)throw he(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ue.getShaderPrecisionFormat&&(ue.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function de(){G=new zs(ue),Z=new Is(ue,G,e),G.init(Z),le=new Aa(ue,G,Z),H=new Ea(ue,G,Z),H.scissor(E.copy(O).multiplyScalar(k).floor()),H.viewport(T.copy(L).multiplyScalar(k).floor()),j=new Vs(ue),W=new ha,q=new Ma(ue,G,H,W,Z,le,j),K=new Fs(m),X=new As(ue,Z),ce=new Os(ue,G,X,Z),Y=new Us(ue,X,j,ce),J=new js(ue,Y,X,j),se=new Hs(ue),re=new Ds(W),Q=new ua(m,K,G,Z,ce,re),ee=new La(W),te=new ma(W),ne=new xa(G,Z),ie=new Ls(m,K,H,J,a),oe=new Ns(ue,G,j,Z),ae=new Bs(ue,G,j,Z),j.programs=Q.programs,m.capabilities=Z,m.extensions=G,m.properties=W,m.renderLists=te,m.state=H,m.info=j}de();const pe=new Ra(m,ue);this.xr=pe;const fe=new Ta(m,J,Z.maxTextureSize);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1,de()}function ve(e){const t=e.target;t.removeEventListener("dispose",ve),function(e){ye(e),W.remove(e)}(t)}function ye(e){const t=W.get(e).program;void 0!==t&&Q.releaseProgram(t)}this.shadowMap=fe,this.getContext=function(){return ue},this.getContextAttributes=function(){return ue.getContextAttributes()},this.forceContextLoss=function(){const e=G.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=G.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(e){void 0!==e&&(k=e,this.setSize(A,C,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Bn),e.set(A,C)},this.setSize=function(e,n,r){pe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(A=e,C=n,t.width=Math.floor(e*k),t.height=Math.floor(n*k),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Bn),e.set(A*k,C*k).floor()},this.setDrawingBufferSize=function(e,n,r){A=e,C=n,k=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new qn),e.copy(T)},this.getViewport=function(e){return e.copy(L)},this.setViewport=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),H.viewport(T.copy(L).multiplyScalar(k).floor())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),H.scissor(E.copy(O).multiplyScalar(k).floor())},this.getScissorTest=function(){return N},this.setScissorTest=function(e){H.setScissorTest(N=e)},this.setOpaqueSort=function(e){P=e},this.setTransparentSort=function(e){R=e},this.getClearColor=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),e=new _i),e.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ue.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ge,!1),te.dispose(),ne.dispose(),W.dispose(),K.dispose(),J.dispose(),ce.dispose(),pe.dispose(),_e.stop()},this.renderBufferImmediate=function(e,t){ce.initAttributes();const n=W.get(e);e.hasPositions&&!n.position&&(n.position=ue.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ue.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ue.createBuffer()),e.hasColors&&!n.color&&(n.color=ue.createBuffer());const r=t.getAttributes();e.hasPositions&&(ue.bindBuffer(34962,n.position),ue.bufferData(34962,e.positionArray,35048),ce.enableAttribute(r.position),ue.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(ue.bindBuffer(34962,n.normal),ue.bufferData(34962,e.normalArray,35048),ce.enableAttribute(r.normal),ue.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(ue.bindBuffer(34962,n.uv),ue.bufferData(34962,e.uvArray,35048),ce.enableAttribute(r.uv),ue.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(ue.bindBuffer(34962,n.color),ue.bufferData(34962,e.colorArray,35048),ce.enableAttribute(r.color),ue.vertexAttribPointer(r.color,3,5126,!1,0,0)),ce.disableUnusedAttributes(),ue.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=B);const o=i.isMesh&&i.matrixWorld.determinant()<0,a=Me(e,t,r,i);H.setMaterial(r,o);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===r.wireframe&&(l=Y.getWireframeAttribute(n),h=2),(r.morphTargets||r.morphNormals)&&se.update(i,n,r,a),ce.setup(i,r,a,n,l);let d=oe;null!==l&&(u=X.get(l),d=ae,d.setIndex(u));const p=null!==l?l.count:c.count,f=n.drawRange.start*h,m=n.drawRange.count*h,g=null!==s?s.start*h:0,v=null!==s?s.count*h:1/0,y=Math.max(f,g),b=Math.min(p,f+m,g+v)-1,_=Math.max(0,b-y+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(H.setLineWidth(r.wireframeLinewidth*V()),d.setMode(1)):d.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),H.setLineWidth(e*V()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(y,_,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,_,e)}else d.render(y,_)}},this.compile=function(e,t){d=ne.get(e),d.init(),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights();const n=new WeakMap;e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];!1===n.has(s)&&(Ee(s,e,t),n.set(s))}else!1===n.has(r)&&(Ee(r,e,t),n.set(r))}))};let be=null;const _e=new Ms;function xe(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||I.intersectsSprite(e)){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=J.update(e),i=e.material;i.visible&&h.push(e,t,i,n,U.z,null)}}else if(e.isImmediateRenderObject)r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z),h.push(e,null,e.material,n,U.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==j.render.frame&&(e.skeleton.update(),e.skeleton.frame=j.render.frame),!e.frustumCulled||I.intersectsObject(e))){r&&U.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=J.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let s=0,o=r.length;s<o;s++){const o=r[s],a=i[o.materialIndex];a&&a.visible&&h.push(e,t,a,n,U.z,o)}}else i.visible&&h.push(e,t,i,n,U.z,null)}const i=e.children;for(let e=0,s=i.length;e<s;e++)xe(i[e],t,n,r)}function we(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],o=s.object,a=s.geometry,l=null===r?s.material:r,c=s.group;if(n.isArrayCamera){const e=n.cameras;for(let n=0,r=e.length;n<r;n++){const r=e[n];o.layers.test(r.layers)&&(H.viewport(T.copy(r.viewport)),d.setupLightsView(r),Se(o,t,r,a,l,c))}}else Se(o,t,n,a,l,c)}}function Se(e,t,n,r,i,s){if(e.onBeforeRender(m,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){const r=Me(n,t,i,e);H.setMaterial(i),ce.reset(),function(e,t){e.render((function(e){m.renderBufferImmediate(e,t)}))}(e,r)}else m.renderBufferDirect(n,t,r,i,e,s);e.onAfterRender(m,t,n,r,i,s)}function Ee(e,t,n){!0!==t.isScene&&(t=B);const r=W.get(e),i=d.state.lights,s=d.state.shadowsArray,o=i.state.version,a=Q.getParameters(e,i.state,s,t,n),l=Q.getProgramCacheKey(a);let c=r.program,u=!0;if(r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=K.get(e.envMap||r.environment),void 0===c)e.addEventListener("dispose",ve);else if(c.cacheKey!==l)ye(e);else if(r.lightsStateVersion!==o)u=!1;else{if(void 0!==a.shaderID)return;u=!1}u&&(a.uniforms=Q.getUniforms(e),e.onBeforeCompile(a,m),c=Q.acquireProgram(a,l),r.program=c,r.uniforms=a.uniforms,r.outputEncoding=a.outputEncoding);const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=re.numPlanes,r.numIntersection=re.numIntersection,h.clippingPlanes=re.uniform),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const p=r.program.getUniforms(),f=Zo.seqWithValue(p.seq,h);r.uniformsList=f}function Me(e,t,n,r){!0!==t.isScene&&(t=B),q.resetTextureUnits();const i=t.fog,s=n.isMeshStandardMaterial?t.environment:null,o=null===_?m.outputEncoding:_.texture.encoding,a=K.get(n.envMap||s),l=W.get(n),c=d.state.lights;if(!0===D&&(!0===F||e!==S)){const t=e===S&&n.id===w;re.setState(n,e,t)}n.version===l.__version?n.fog&&l.fog!==i||l.environment!==s||l.needsLights&&l.lightsStateVersion!==c.state.version?Ee(n,t,r):void 0===l.numClippingPlanes||l.numClippingPlanes===re.numPlanes&&l.numIntersection===re.numIntersection?(l.outputEncoding!==o||l.envMap!==a)&&Ee(n,t,r):Ee(n,t,r):(Ee(n,t,r),l.__version=n.version);let u=!1,h=!1,p=!1;const f=l.program,g=f.getUniforms(),v=l.uniforms;if(H.useProgram(f.program)&&(u=!0,h=!0,p=!0),n.id!==w&&(w=n.id,h=!0),u||S!==e){if(g.setValue(ue,"projectionMatrix",e.projectionMatrix),Z.logarithmicDepthBuffer&&g.setValue(ue,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),S!==e&&(S=e,h=!0,p=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=g.map.cameraPosition;void 0!==t&&t.setValue(ue,U.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&g.setValue(ue,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&g.setValue(ue,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){g.setOptional(ue,r,"bindMatrix"),g.setOptional(ue,r,"bindMatrixInverse");const e=r.skeleton;if(e){const t=e.bones;if(Z.floatVertexTextures){if(null===e.boneTexture){let n=Math.sqrt(4*t.length);n=Un.ceilPowerOfTwo(n),n=Math.max(n,4);const r=new Float32Array(n*n*4);r.set(e.boneMatrices);const i=new ws(r,n,n,ze,Pe);e.boneMatrices=r,e.boneTexture=i,e.boneTextureSize=n}g.setValue(ue,"boneTexture",e.boneTexture,q),g.setValue(ue,"boneTextureSize",e.boneTextureSize)}else g.setOptional(ue,e,"boneMatrices")}}var y,b;return(h||l.receiveShadow!==r.receiveShadow)&&(l.receiveShadow=r.receiveShadow,g.setValue(ue,"receiveShadow",r.receiveShadow)),h&&(g.setValue(ue,"toneMappingExposure",m.toneMappingExposure),l.needsLights&&(b=p,(y=v).ambientLightColor.needsUpdate=b,y.lightProbe.needsUpdate=b,y.directionalLights.needsUpdate=b,y.directionalLightShadows.needsUpdate=b,y.pointLights.needsUpdate=b,y.pointLightShadows.needsUpdate=b,y.spotLights.needsUpdate=b,y.spotLightShadows.needsUpdate=b,y.rectAreaLights.needsUpdate=b,y.hemisphereLights.needsUpdate=b),i&&n.fog&&ee.refreshFogUniforms(v,i),ee.refreshMaterialUniforms(v,n,k,C),Zo.upload(ue,l.uniformsList,v,q)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Zo.upload(ue,l.uniformsList,v,q),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&g.setValue(ue,"center",r.center),g.setValue(ue,"modelViewMatrix",r.modelViewMatrix),g.setValue(ue,"normalMatrix",r.normalMatrix),g.setValue(ue,"modelMatrix",r.matrixWorld),f}_e.setAnimationLoop((function(e){pe.isPresenting||be&&be(e)})),"undefined"!=typeof window&&_e.setContext(window),this.setAnimationLoop=function(e){be=e,pe.setAnimationLoop(e),null===e?_e.stop():_e.start()},this.render=function(e,t){let n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;ce.resetDefaultState(),w=-1,S=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===pe.enabled&&!0===pe.isPresenting&&(t=pe.getCamera(t)),!0===e.isScene&&e.onBeforeRender(m,e,t,n||_),d=ne.get(e,f.length),d.init(),f.push(d),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),I.setFromProjectionMatrix(z),F=this.localClippingEnabled,D=re.init(this.clippingPlanes,F,t),h=te.get(e,p.length),h.init(),p.push(h),xe(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(P,R),!0===D&&re.beginShadows();const i=d.state.shadowsArray;fe.render(i,e,t),d.setupLights(),d.setupLightsView(t),!0===D&&re.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),ie.render(h,e,t,r);const s=h.opaque,o=h.transparent;s.length>0&&we(s,e,t),o.length>0&&we(o,e,t),!0===e.isScene&&e.onAfterRender(m,e,t),null!==_&&(q.updateRenderTargetMipmap(_),q.updateMultisampleRenderTarget(_)),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1),f.pop(),d=f.length>0?f[f.length-1]:null,p.pop(),h=p.length>0?p[p.length-1]:null},this.setFramebuffer=function(e){v!==e&&null===_&&ue.bindFramebuffer(36160,e),v=e},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return _},this.setRenderTarget=function(e,t=0,n=0){_=e,y=t,b=n,e&&void 0===W.get(e).__webglFramebuffer&&q.setupRenderTarget(e);let r=v,i=!1,s=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(s=!0);const o=W.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=o[t],i=!0):r=e.isWebGLMultisampleRenderTarget?W.get(e).__webglMultisampledFramebuffer:o,T.copy(e.viewport),E.copy(e.scissor),M=e.scissorTest}else T.copy(L).multiplyScalar(k).floor(),E.copy(O).multiplyScalar(k).floor(),M=N;if(x!==r&&(ue.bindFramebuffer(36160,r),x=r),H.viewport(T),H.scissor(E),H.setScissorTest(M),i){const r=W.get(e.texture);ue.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(s){const r=W.get(e.texture),i=t||0;ue.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}},this.readRenderTargetPixels=function(e,t,n,r,i,s,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=W.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){let o=!1;a!==x&&(ue.bindFramebuffer(36160,a),o=!0);try{const a=e.texture,l=a.format,c=a.type;if(l!==ze&&le.convert(l)!==ue.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=c===Re&&(G.has("EXT_color_buffer_half_float")||Z.isWebGL2&&G.has("EXT_color_buffer_float"));if(!(c===Te||le.convert(c)===ue.getParameter(35738)||c===Pe&&(Z.isWebGL2||G.has("OES_texture_float")||G.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ue.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ue.readPixels(t,n,r,i,le.convert(l),le.convert(c),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&ue.bindFramebuffer(36160,x)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),s=Math.floor(t.image.height*r),o=le.convert(t.format);q.setTexture2D(t,0),ue.copyTexImage2D(3553,n,o,e.x,e.y,i,s,0),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,s=t.image.height,o=le.convert(n.format),a=le.convert(n.type);q.setTexture2D(n,0),ue.pixelStorei(37440,n.flipY),ue.pixelStorei(37441,n.premultiplyAlpha),ue.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ue.texSubImage2D(3553,r,e.x,e.y,i,s,o,a,t.image.data):t.isCompressedTexture?ue.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ue.texSubImage2D(3553,r,e.x,e.y,o,a,t.image),0===r&&n.generateMipmaps&&ue.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const{width:s,height:o,data:a}=n.image,l=le.convert(r.format),c=le.convert(r.type);let u;if(r.isDataTexture3D)q.setTexture3D(r,0),u=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),u=35866}ue.pixelStorei(37440,r.flipY),ue.pixelStorei(37441,r.premultiplyAlpha),ue.pixelStorei(3317,r.unpackAlignment);const h=ue.getParameter(3314),d=ue.getParameter(32878),p=ue.getParameter(3316),f=ue.getParameter(3315),g=ue.getParameter(32877);ue.pixelStorei(3314,s),ue.pixelStorei(32878,o),ue.pixelStorei(3316,e.min.x),ue.pixelStorei(3315,e.min.y),ue.pixelStorei(32877,e.min.z),ue.texSubImage3D(u,i,t.x,t.y,t.z,e.max.x-e.min.x+1,e.max.y-e.min.y+1,e.max.z-e.min.z+1,l,c,a),ue.pixelStorei(3314,h),ue.pixelStorei(32878,d),ue.pixelStorei(3316,p),ue.pixelStorei(3315,f),ue.pixelStorei(32877,g),0===i&&r.generateMipmaps&&ue.generateMipmap(u),H.unbindTexture()},this.initTexture=function(e){q.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){H.reset(),ce.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ka.prototype.isGroup=!0,Object.assign(Pa.prototype,{constructor:Pa,getHandSpace:function(){return null===this._hand&&(this._hand=new ka,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new ka,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new ka,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(e,t,n){let r=null,i=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(l&&e.hand){s=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new ka;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&o>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==s),this}}),Object.assign(Ra.prototype,Dn.prototype);class Na extends Oa{}Na.prototype.isWebGL1Renderer=!0;class Ia{constructor(e,t){this.name="",this.color=new _i(e),this.density=void 0!==t?t:25e-5}clone(){return new Ia(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Ia.prototype.isFogExp2=!0;class Da{constructor(e,t,n){this.name="",this.color=new _i(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}clone(){return new Da(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Da.prototype.isFog=!0;class Fa extends Yr{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}function za(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=En,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Un.generateUUID()}Fa.prototype.isScene=!0,Object.defineProperty(za.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(za.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t=0){return this.array.set(e,t),this},clone:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Un.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new za(new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),this.stride);return t.setUsage(this.usage),t},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Un.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Ua=new Jn;function Ba(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}Object.defineProperties(Ba.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}}),Object.assign(Ba.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)Ua.x=this.getX(t),Ua.y=this.getY(t),Ua.z=this.getZ(t),Ua.applyMatrix4(e),this.setXYZ(t,Ua.x,Ua.y,Ua.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Ti(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ba(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});class Va extends pi{constructor(e){super(),this.type="SpriteMaterial",this.color=new _i(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Ga;Va.prototype.isSpriteMaterial=!0;const Za=new Jn,Ha=new Jn,ja=new Jn,Wa=new Bn,qa=new Bn,Ka=new Er,Xa=new Jn,Ya=new Jn,Ja=new Jn,$a=new Bn,Qa=new Bn,el=new Bn;class tl extends Yr{constructor(e){if(super(),this.type="Sprite",void 0===Ga){Ga=new ji;const e=new za(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ga.setIndex([0,1,2,0,2,3]),Ga.setAttribute("position",new Ba(e,3,0,!1)),Ga.setAttribute("uv",new Ba(e,2,3,!1))}this.geometry=Ga,this.material=void 0!==e?e:new Va,this.center=new Bn(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ha.setFromMatrixScale(this.matrixWorld),Ka.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ja.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ha.multiplyScalar(-ja.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;nl(Xa.set(-.5,-.5,0),ja,s,Ha,r,i),nl(Ya.set(.5,-.5,0),ja,s,Ha,r,i),nl(Ja.set(.5,.5,0),ja,s,Ha,r,i),$a.set(0,0),Qa.set(1,0),el.set(1,1);let o=e.ray.intersectTriangle(Xa,Ya,Ja,!1,Za);if(null===o&&(nl(Ya.set(-.5,.5,0),ja,s,Ha,r,i),Qa.set(0,1),o=e.ray.intersectTriangle(Xa,Ja,Ya,!1,Za),null===o))return;const a=e.ray.origin.distanceTo(Za);a<e.near||a>e.far||t.push({distance:a,point:Za.clone(),uv:hi.getUV(Za,Xa,Ya,Ja,$a,Qa,el,new Bn),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function nl(e,t,n,r,i,s){Wa.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(qa.x=s*Wa.x-i*Wa.y,qa.y=i*Wa.x+s*Wa.y):qa.copy(Wa),e.copy(t),e.x+=qa.x,e.y+=qa.y,e.applyMatrix4(Ka)}tl.prototype.isSprite=!0;const rl=new Jn,il=new Jn;class sl extends Yr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){rl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(rl);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){rl.setFromMatrixPosition(e.matrixWorld),il.setFromMatrixPosition(this.matrixWorld);const n=rl.distanceTo(il)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}const ol=new Jn,al=new qn,ll=new qn,cl=new Jn,ul=new Er;function hl(e,t){cs.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Er,this.bindMatrixInverse=new Er}function dl(){Yr.call(this),this.type="Bone"}hl.prototype=Object.assign(Object.create(cs.prototype),{constructor:hl,isSkinnedMesh:!0,copy:function(e){return cs.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new qn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){cs.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(e,t){const n=this.skeleton,r=this.geometry;al.fromBufferAttribute(r.attributes.skinIndex,e),ll.fromBufferAttribute(r.attributes.skinWeight,e),ol.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=ll.getComponent(e);if(0!==r){const i=al.getComponent(e);ul.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(cl.copy(ol).applyMatrix4(ul),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}),dl.prototype=Object.assign(Object.create(Yr.prototype),{constructor:dl,isBone:!0});const pl=new Er,fl=new Er;class ml{constructor(e=[],t=[]){this.uuid=Un.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Er)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Er;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:fl;pl.multiplyMatrices(i,t[r]),pl.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new ml(this.bones,this.boneInverses)}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new dl),this.bones.push(i),this.boneInverses.push((new Er).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const s=n[r];e.boneInverses.push(s.toArray())}return e}}const gl=new Er,vl=new Er,yl=[],bl=new cs;function _l(e,t,n){cs.call(this,e,t),this.instanceMatrix=new Ti(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}_l.prototype=Object.assign(Object.create(cs.prototype),{constructor:_l,isInstancedMesh:!0,copy:function(e){return cs.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this},getColorAt:function(e,t){t.fromArray(this.instanceColor.array,3*e)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){const n=this.matrixWorld,r=this.count;if(bl.geometry=this.geometry,bl.material=this.material,void 0!==bl.material)for(let i=0;i<r;i++){this.getMatrixAt(i,gl),vl.multiplyMatrices(n,gl),bl.matrixWorld=vl,bl.raycast(e,yl);for(let e=0,n=yl.length;e<n;e++){const n=yl[e];n.instanceId=i,n.object=this,t.push(n)}yl.length=0}},setColorAt:function(e,t){null===this.instanceColor&&(this.instanceColor=new Ti(new Float32Array(3*this.count),3)),t.toArray(this.instanceColor.array,3*e)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});class xl extends pi{constructor(e){super(),this.type="LineBasicMaterial",this.color=new _i(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this}}xl.prototype.isLineBasicMaterial=!0;const wl=new Jn,Sl=new Jn,Tl=new Er,El=new Tr,Ml=new gr;function Al(e=new ji,t=new xl){Yr.call(this),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}Al.prototype=Object.assign(Object.create(Yr.prototype),{constructor:Al,isLine:!0,copy:function(e){return Yr.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)wl.fromBufferAttribute(t,e-1),Sl.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=wl.distanceTo(Sl);e.setAttribute("lineDistance",new Oi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ml.copy(n.boundingSphere),Ml.applyMatrix4(r),Ml.radius+=i,!1===e.ray.intersectsSphere(Ml))return;Tl.copy(r).invert(),El.copy(e.ray).applyMatrix4(Tl);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,a=new Jn,l=new Jn,c=new Jn,u=new Jn,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){const n=r.array;for(let r=0,s=n.length-1;r<s;r+=h){const s=n[r],h=n[r+1];a.fromBufferAttribute(i,s),l.fromBufferAttribute(i,h);if(El.distanceSqToSegment(a,l,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(u);d<e.near||d>e.far||t.push({distance:d,point:c.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else for(let n=0,r=i.count-1;n<r;n+=h){a.fromBufferAttribute(i,n),l.fromBufferAttribute(i,n+1);if(El.distanceSqToSegment(a,l,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(u);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Cl=new Jn,kl=new Jn;function Pl(e,t){Al.call(this,e,t),this.type="LineSegments"}Pl.prototype=Object.assign(Object.create(Al.prototype),{constructor:Pl,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Cl.fromBufferAttribute(t,e),kl.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Cl.distanceTo(kl);e.setAttribute("lineDistance",new Oi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});class Rl extends Al{constructor(e,t){super(e,t),this.type="LineLoop"}}Rl.prototype.isLineLoop=!0;class Ll extends pi{constructor(e){super(),this.type="PointsMaterial",this.color=new _i(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this}}Ll.prototype.isPointsMaterial=!0;const Ol=new Er,Nl=new Tr,Il=new gr,Dl=new Jn;function Fl(e=new ji,t=new Ll){Yr.call(this),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}function zl(e,t,n,r,i,s,o){const a=Nl.distanceSqToPoint(e);if(a<n){const n=new Jn;Nl.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:o})}}Fl.prototype=Object.assign(Object.create(Yr.prototype),{constructor:Fl,isPoints:!0,copy:function(e){return Yr.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Il.copy(n.boundingSphere),Il.applyMatrix4(r),Il.radius+=i,!1===e.ray.intersectsSphere(Il))return;Ol.copy(r).invert(),Nl.copy(e.ray).applyMatrix4(Ol);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s;if(n.isBufferGeometry){const i=n.index,s=n.attributes.position;if(null!==i){const n=i.array;for(let i=0,a=n.length;i<a;i++){const a=n[i];Dl.fromBufferAttribute(s,a),zl(Dl,a,o,r,e,t,this)}}else for(let n=0,i=s.count;n<i;n++)Dl.fromBufferAttribute(s,n),zl(Dl,n,o,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});class Ul extends jn{constructor(e,t,n,r,i,s,o,a,l){super(e,t,n,r,i,s,o,a,l),this.format=void 0!==o?o:Fe,this.minFilter=void 0!==s?s:be,this.magFilter=void 0!==i?i:be,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Ul.prototype.isVideoTexture=!0;class Bl extends jn{constructor(e,t,n,r,i,s,o,a,l,c,u,h){super(null,s,o,a,l,c,r,i,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Bl.prototype.isCompressedTexture=!0;class Vl extends jn{constructor(e,t,n,r,i,s,o,a,l){super(e,t,n,r,i,s,o,a,l),this.needsUpdate=!0}}Vl.prototype.isCanvasTexture=!0;class Gl extends jn{constructor(e,t,n,r,i,s,o,a,l,c){if((c=void 0!==c?c:Ge)!==Ge&&c!==Ze)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ge&&(n=Ae),void 0===n&&c===Ze&&(n=Ie),super(null,r,i,s,o,a,c,n,l),this.image={width:e,height:t},this.magFilter=void 0!==o?o:fe,this.minFilter=void 0!==a?a:fe,this.flipY=!1,this.generateMipmaps=!1}}Gl.prototype.isDepthTexture=!0;class Zl extends ji{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],s=[],o=[],a=[],l=new Jn,c=new Bn;s.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const h=n+i/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),s.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(s[u]/e+1)/2,c.y=(s[u+1]/e+1)/2,a.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new Oi(s,3)),this.setAttribute("normal",new Oi(o,3)),this.setAttribute("uv",new Oi(a,2))}}class Hl extends ji{constructor(e=1,t=1,n=1,r=8,i=1,s=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,s=new Bn,f=new Jn;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;const _=p;for(let e=0;e<=r;e++){const t=e/r*a+o,n=Math.cos(t),i=Math.sin(t);f.x=y*i,f.y=m*b,f.z=y*n,u.push(f.x,f.y,f.z),h.push(0,b,0),s.x=.5*n+.5,s.y=.5*i*b+.5,d.push(s.x,s.y),p++}for(let e=0;e<r;e++){const t=i+e,r=_+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const s=new Jn,v=new Jn;let y=0;const b=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*a+o,l=Math.sin(i),f=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),s.set(l,b,f).normalize(),h.push(s.x,s.y,s.z),d.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],s=f[t][e+1];c.push(n,r,s),c.push(r,i,s),y+=6}l.addGroup(g,y,0),g+=y}(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Oi(u,3)),this.setAttribute("normal",new Oi(h,3)),this.setAttribute("uv",new Oi(d,2))}}class jl extends Hl{constructor(e=1,t=1,n=8,r=1,i=!1,s=0,o=2*Math.PI){super(0,e,t,n,r,i,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:s,thetaLength:o}}}class Wl extends ji{constructor(e,t,n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],s=[];function o(e,t,n,r){const i=r+1,s=[];for(let r=0;r<=i;r++){s[r]=[];const o=e.clone().lerp(n,r/i),a=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)s[r][e]=0===e&&r===i?o:o.clone().lerp(a,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(a(s[e][n+1]),a(s[e+1][n]),a(s[e][n])):(a(s[e][n+1]),a(s[e+1][n+1]),a(s[e+1][n]))}}function a(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Jn,r=new Jn,i=new Jn;for(let s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],r),l(t[s+2],i),o(n,r,i,e)}(r),function(e){const t=new Jn;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new Jn;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,o=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);s.push(r,1-o)}var t;(function(){const e=new Jn,t=new Jn,n=new Jn,r=new Jn,o=new Bn,a=new Bn,l=new Bn;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),o.set(s[d+0],s[d+1]),a.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=u(r);c(o,d+0,e,p),c(a,d+2,t,p),c(l,d+4,n,p)}})(),function(){for(let e=0;e<s.length;e+=6){const t=s[e+0],n=s[e+2],r=s[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),r<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new Oi(i,3)),this.setAttribute("normal",new Oi(i.slice(),3)),this.setAttribute("uv",new Oi(s,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}}class ql extends Wl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}}const Kl=new Jn,Xl=new Jn,Yl=new Jn,Jl=new hi;class $l extends ji{constructor(e,t){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1,!0===e.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const n=Math.pow(10,4),r=Math.cos(Un.DEG2RAD*t),i=e.getIndex(),s=e.getAttribute("position"),o=i?i.count:s.count,a=[0,0,0],l=["a","b","c"],c=new Array(3),u={},h=[];for(let e=0;e<o;e+=3){i?(a[0]=i.getX(e),a[1]=i.getX(e+1),a[2]=i.getX(e+2)):(a[0]=e,a[1]=e+1,a[2]=e+2);const{a:t,b:o,c:d}=Jl;if(t.fromBufferAttribute(s,a[0]),o.fromBufferAttribute(s,a[1]),d.fromBufferAttribute(s,a[2]),Jl.getNormal(Yl),c[0]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,c[1]=`${Math.round(o.x*n)},${Math.round(o.y*n)},${Math.round(o.z*n)}`,c[2]=`${Math.round(d.x*n)},${Math.round(d.y*n)},${Math.round(d.z*n)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=c[e],i=c[t],s=Jl[l[e]],o=Jl[l[t]],d=`${n}_${i}`,p=`${i}_${n}`;p in u&&u[p]?(Yl.dot(u[p].normal)<=r&&(h.push(s.x,s.y,s.z),h.push(o.x,o.y,o.z)),u[p]=null):d in u||(u[d]={index0:a[e],index1:a[t],normal:Yl.clone()})}}for(const e in u)if(u[e]){const{index0:t,index1:n}=u[e];Kl.fromBufferAttribute(s,t),Xl.fromBufferAttribute(s,n),h.push(Kl.x,Kl.y,Kl.z),h.push(Xl.x,Xl.y,Xl.z)}this.setAttribute("position",new Oi(h,3))}}const Ql=function(e,t,n){n=n||2;const r=t&&t.length,i=r?t[0]*n:e.length;let s=ec(e,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,d,p;if(r&&(s=function(e,t,n,r){const i=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*r,l=s<o-1?t[s+1]*r:e.length,c=ec(e,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(hc(c));for(i.sort(ac),s=0;s<i.length;s++)lc(i[s],n),n=tc(n,n.next);return n}(e,t,s,n)),e.length>80*n){a=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-a,u-l),p=0!==p?1/p:0}return nc(s,o,n,a,l,p),o};function ec(e,t,n,r,i){let s,o;if(i===function(e,t,n,r){let i=0;for(let s=t,o=n-r;s<n;s+=r)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}(e,t,n,r)>0)for(s=t;s<n;s+=r)o=xc(s,e[s],e[s+1],o);else for(s=n-r;s>=t;s-=r)o=xc(s,e[s],e[s+1],o);return o&&mc(o,o.next)&&(wc(o),o=o.next),o}function tc(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!mc(r,r.next)&&0!==fc(r.prev,r,r.next))r=r.next;else{if(wc(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function nc(e,t,n,r,i,s,o){if(!e)return;!o&&s&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=uc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,s,o,a,l,c=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ,r);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,s);let a,l,c=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,s?ic(e,r,i,s):rc(e))t.push(a.i/n),t.push(e.i/n),t.push(l.i/n),wc(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?nc(e=sc(tc(e),t,n),t,n,r,i,s,2):2===o&&oc(e,t,n,r,i,s):nc(tc(e),t,n,r,i,s,1);break}}function rc(e){const t=e.prev,n=e,r=e.next;if(fc(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(dc(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&fc(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function ic(e,t,n,r){const i=e.prev,s=e,o=e.next;if(fc(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,l=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,c=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,u=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,h=uc(a,l,t,n,r),d=uc(c,u,t,n,r);let p=e.prevZ,f=e.nextZ;for(;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&dc(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&fc(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&dc(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&fc(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&dc(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&fc(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&dc(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&fc(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function sc(e,t,n){let r=e;do{const i=r.prev,s=r.next.next;!mc(i,s)&&gc(i,r,r.next,s)&&bc(i,s)&&bc(s,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(s.i/n),wc(r),wc(r.next),r=e=s),r=r.next}while(r!==e);return tc(r)}function oc(e,t,n,r,i,s){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&pc(o,e)){let a=_c(o,e);return o=tc(o,o.next),a=tc(a,a.next),nc(o,t,n,r,i,s),void nc(a,t,n,r,i,s)}e=e.next}o=o.next}while(o!==e)}function ac(e,t){return e.x-t.x}function lc(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let s,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>o){if(o=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!s)return null;if(r===o)return s;const a=s,l=s.x,c=s.y;let u,h=1/0;n=s;do{r>=n.x&&n.x>=l&&r!==n.x&&dc(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),bc(n,e)&&(u<h||u===h&&(n.x>s.x||n.x===s.x&&cc(s,n)))&&(s=n,h=u)),n=n.next}while(n!==a);return s}(e,t),t){const n=_c(t,e);tc(t,t.next),tc(n,n.next)}}function cc(e,t){return fc(e.prev,e,t.prev)<0&&fc(t.next,e,e.next)<0}function uc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function hc(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function dc(e,t,n,r,i,s,o,a){return(i-o)*(t-a)-(e-o)*(s-a)>=0&&(e-o)*(r-a)-(n-o)*(t-a)>=0&&(n-o)*(s-a)-(i-o)*(r-a)>=0}function pc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&gc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(bc(e,t)&&bc(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(fc(e.prev,e,t.prev)||fc(e,t.prev,t))||mc(e,t)&&fc(e.prev,e,e.next)>0&&fc(t.prev,t,t.next)>0)}function fc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function mc(e,t){return e.x===t.x&&e.y===t.y}function gc(e,t,n,r){const i=yc(fc(e,t,n)),s=yc(fc(e,t,r)),o=yc(fc(n,r,e)),a=yc(fc(n,r,t));return i!==s&&o!==a||(!(0!==i||!vc(e,n,t))||(!(0!==s||!vc(e,r,t))||(!(0!==o||!vc(n,e,r))||!(0!==a||!vc(n,t,r)))))}function vc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function yc(e){return e>0?1:e<0?-1:0}function bc(e,t){return fc(e.prev,e,e.next)<0?fc(e,t,e.next)>=0&&fc(e,e.prev,t)>=0:fc(e,t,e.prev)<0||fc(e,e.next,t)<0}function _c(e,t){const n=new Sc(e.i,e.x,e.y),r=new Sc(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function xc(e,t,n,r){const i=new Sc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function wc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Sc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}const Tc={area:function(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return Tc.area(e)<0},triangulateShape:function(e,t){const n=[],r=[],i=[];Ec(e),Mc(n,e);let s=e.length;t.forEach(Ec);for(let e=0;e<t.length;e++)r.push(s),s+=t[e].length,Mc(n,t[e]);const o=Ql(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}};function Ec(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Mc(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Ac extends ji{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++){s(e[t])}function s(e){const s=[],o=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:100,c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Cc;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,y,b,_,x=!1;f&&(g=f.getSpacedPoints(a),x=!0,c=!1,v=f.computeFrenetFrames(a,!1),y=new Jn,b=new Jn,_=new Jn),c||(p=0,u=0,h=0,d=0);const w=e.extractPoints(o);let S=w.shape;const T=w.holes;if(!Tc.isClockWise(S)){S=S.reverse();for(let e=0,t=T.length;e<t;e++){const t=T[e];Tc.isClockWise(t)&&(T[e]=t.reverse())}}const E=Tc.triangulateShape(S,T),M=S;for(let e=0,t=T.length;e<t;e++){const t=T[e];S=S.concat(t)}function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const C=S.length,k=E.length;function P(e,t,n){let r,i,s;const o=e.x-t.x,a=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+a*a,h=o*c-a*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-a/h,f=t.y+o/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(o*c-a*l);r=p+o*m-e.x,i=f+a*m-e.y;const g=r*r+i*i;if(g<=2)return new Bn(r,i);s=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(c)&&(e=!0),e?(r=-a,i=o,s=Math.sqrt(u)):(r=o,i=a,s=Math.sqrt(u/2))}return new Bn(r/s,i/s)}const R=[];for(let e=0,t=M.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),R[e]=P(M[e],M[n],M[r]);const L=[];let O,N=R.concat();for(let e=0,t=T.length;e<t;e++){const t=T[e];O=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[e]=P(t[e],t[r],t[i]);L.push(O),N=N.concat(O)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=A(M[e],R[e],r);F(t.x,t.y,-n)}for(let e=0,t=T.length;e<t;e++){const t=T[e];O=L[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],O[e],r);F(i.x,i.y,-n)}}}const I=h+d;for(let e=0;e<C;e++){const t=c?A(S[e],N[e],I):S[e];x?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),_.copy(g[0]).add(b).add(y),F(_.x,_.y,_.z)):F(t.x,t.y,0)}for(let e=1;e<=a;e++)for(let t=0;t<C;t++){const n=c?A(S[t],N[t],I):S[t];x?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),_.copy(g[e]).add(b).add(y),F(_.x,_.y,_.z)):F(n.x,n.y,l/a*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=A(M[e],R[e],r);F(t.x,t.y,l+n)}for(let e=0,t=T.length;e<t;e++){const t=T[e];O=L[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],O[e],r);x?F(i.x,i.y+g[a-1].y,g[a-1].x+n):F(i.x,i.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=a+2*p;e<n;e++){const n=C*e,s=C*(e+1);U(t+r+n,t+i+n,t+i+s,t+r+s)}}}function F(e,t,n){s.push(e),s.push(t),s.push(n)}function z(e,t,i){B(e),B(t),B(i);const s=r.length/3,o=m.generateTopUV(n,r,s-3,s-2,s-1);V(o[0]),V(o[1]),V(o[2])}function U(e,t,i,s){B(e),B(t),B(s),B(t),B(i),B(s);const o=r.length/3,a=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);V(a[0]),V(a[1]),V(a[3]),V(a[1]),V(a[2]),V(a[3])}function B(e){r.push(s[3*e+0]),r.push(s[3*e+1]),r.push(s[3*e+2])}function V(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=C*e;for(let e=0;e<k;e++){const n=E[e];z(n[2]+t,n[1]+t,n[0]+t)}e=a+2*p,t=C*e;for(let e=0;e<k;e++){const n=E[e];z(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<k;e++){const t=E[e];z(t[2],t[1],t[0])}for(let e=0;e<k;e++){const t=E[e];z(t[0]+C*a,t[1]+C*a,t[2]+C*a)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;D(M,t),t+=M.length;for(let e=0,n=T.length;e<n;e++){const n=T[e];D(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Oi(r,3)),this.setAttribute("uv",new Oi(i,2)),this.computeVertexNormals()}toJSON(){const e=ji.prototype.toJSON.call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}const Cc={generateTopUV:function(e,t,n,r,i){const s=t[3*n],o=t[3*n+1],a=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new Bn(s,o),new Bn(a,l),new Bn(c,u)]},generateSideWallUV:function(e,t,n,r,i,s){const o=t[3*n],a=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(a-u)<.01?[new Bn(o,1-l),new Bn(c,1-h),new Bn(d,1-f),new Bn(m,1-v)]:[new Bn(a,1-l),new Bn(u,1-h),new Bn(p,1-f),new Bn(g,1-v)]}};class kc extends Wl{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}}class Pc extends ji{constructor(e,t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Un.clamp(r,0,2*Math.PI);const i=[],s=[],o=[],a=1/t,l=new Jn,c=new Bn;for(let i=0;i<=t;i++){const u=n+i*a*r,h=Math.sin(u),d=Math.cos(u);for(let n=0;n<=e.length-1;n++)l.x=e[n].x*h,l.y=e[n].y,l.z=e[n].x*d,s.push(l.x,l.y,l.z),c.x=i/t,c.y=n/(e.length-1),o.push(c.x,c.y)}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,s=r,o=r+e.length,a=r+e.length+1,l=r+1;i.push(s,o,l),i.push(o,a,l)}if(this.setIndex(i),this.setAttribute("position",new Oi(s,3)),this.setAttribute("uv",new Oi(o,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new Jn,i=new Jn,s=new Jn,o=t*e.length*3;for(let t=0,a=0;t<e.length;t++,a+=3)r.x=n[a+0],r.y=n[a+1],r.z=n[a+2],i.x=n[o+a+0],i.y=n[o+a+1],i.z=n[o+a+2],s.addVectors(r,i).normalize(),n[a+0]=n[o+a+0]=s.x,n[a+1]=n[o+a+1]=s.y,n[a+2]=n[o+a+2]=s.z}}}class Rc extends Wl{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}}function Lc(e,t,n){ji.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};const r=[],i=[],s=[],o=[],a=1e-5,l=new Jn,c=new Jn,u=new Jn,h=new Jn,d=new Jn;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=t+1;for(let r=0;r<=n;r++){const p=r/n;for(let n=0;n<=t;n++){const r=n/t;e(r,p,c),i.push(c.x,c.y,c.z),r-a>=0?(e(r-a,p,u),h.subVectors(c,u)):(e(r+a,p,u),h.subVectors(u,c)),p-a>=0?(e(r,p-a,u),d.subVectors(c,u)):(e(r,p+a,u),d.subVectors(u,c)),l.crossVectors(h,d).normalize(),s.push(l.x,l.y,l.z),o.push(r,p)}}for(let e=0;e<n;e++)for(let n=0;n<t;n++){const t=e*p+n,i=e*p+n+1,s=(e+1)*p+n+1,o=(e+1)*p+n;r.push(t,i,o),r.push(i,s,o)}this.setIndex(r),this.setAttribute("position",new Oi(i,3)),this.setAttribute("normal",new Oi(s,3)),this.setAttribute("uv",new Oi(o,2))}Lc.prototype=Object.create(ji.prototype),Lc.prototype.constructor=Lc;class Oc extends ji{constructor(e=.5,t=1,n=8,r=1,i=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s},n=Math.max(3,n);const o=[],a=[],l=[],c=[];let u=e;const h=(t-e)/(r=Math.max(1,r)),d=new Jn,p=new Bn;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*s;d.x=u*Math.cos(r),d.y=u*Math.sin(r),a.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=h}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,s=r+n+1,a=r+n+2,l=r+1;o.push(i,s,l),o.push(s,a,l)}}this.setIndex(o),this.setAttribute("position",new Oi(a,3)),this.setAttribute("normal",new Oi(l,3)),this.setAttribute("uv",new Oi(c,2))}}class Nc extends ji{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],s=[];let o=0,a=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,a,t),o+=a,a=0;function l(e){const o=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Tc.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===Tc.isClockWise(t)&&(u[e]=t.reverse())}const h=Tc.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),s.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+o,i=t[1]+o,s=t[2]+o;n.push(r,i,s),a+=3}}this.setIndex(n),this.setAttribute("position",new Oi(r,3)),this.setAttribute("normal",new Oi(i,3)),this.setAttribute("uv",new Oi(s,2))}toJSON(){const e=ji.prototype.toJSON.call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}class Ic extends ji{constructor(e=1,t=8,n=6,r=0,i=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let l=0;const c=[],u=new Jn,h=new Jn,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],v=d/n;let y=0;0==d&&0==s?y=.5/t:d==n&&a==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const a=n/t;u.x=-e*Math.cos(r+a*i)*Math.sin(s+v*o),u.y=e*Math.cos(s+v*o),u.z=e*Math.sin(r+a*i)*Math.sin(s+v*o),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(a+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],o=c[e+1][r],l=c[e+1][r+1];(0!==e||s>0)&&d.push(t,i,l),(e!==n-1||a<Math.PI)&&d.push(i,o,l)}this.setIndex(d),this.setAttribute("position",new Oi(p,3)),this.setAttribute("normal",new Oi(f,3)),this.setAttribute("uv",new Oi(m,2))}}class Dc extends Wl{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}}class Fc extends Ac{constructor(e,t={}){const n=t.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ji;const r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t),this.type="TextGeometry"}}class zc extends ji{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],a=[],l=[],c=new Jn,u=new Jn,h=new Jn;for(let s=0;s<=n;s++)for(let d=0;d<=r;d++){const p=d/r*i,f=s/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),o.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(u,c).normalize(),a.push(h.x,h.y,h.z),l.push(d/r),l.push(s/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,o=(r+1)*(e-1)+t,a=(r+1)*e+t;s.push(n,i,a),s.push(i,o,a)}this.setIndex(s),this.setAttribute("position",new Oi(o,3)),this.setAttribute("normal",new Oi(a,3)),this.setAttribute("uv",new Oi(l,2))}}class Uc extends ji{constructor(e=1,t=.4,n=64,r=8,i=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new Jn,h=new Jn,d=new Jn,p=new Jn,f=new Jn,m=new Jn,g=new Jn;for(let o=0;o<=n;++o){const y=o/n*i*Math.PI*2;v(y,i,s,e,d),v(y+.01,i,s,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,s=-t*Math.cos(i),p=t*Math.sin(i);u.x=d.x+(s*g.x+p*f.x),u.y=d.y+(s*g.y+p*f.y),u.z=d.z+(s*g.z+p*f.z),a.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(o/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,a=(r+1)*(e-1)+t;o.push(n,i,a),o.push(i,s,a)}function v(e,t,n,r,i){const s=Math.cos(e),o=Math.sin(e),a=n/t*e,l=Math.cos(a);i.x=r*(2+l)*.5*s,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(a)*.5}this.setIndex(o),this.setAttribute("position",new Oi(a,3)),this.setAttribute("normal",new Oi(l,3)),this.setAttribute("uv",new Oi(c,2))}}class Bc extends ji{constructor(e,t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const s=e.computeFrenetFrames(t,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new Jn,a=new Jn,l=new Bn;let c=new Jn;const u=[],h=[],d=[],p=[];function f(i){c=e.getPointAt(i/t,c);const l=s.normals[i],d=s.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),s=-Math.cos(t);a.x=s*l.x+i*d.x,a.y=s*l.y+i*d.y,a.z=s*l.z+i*d.z,a.normalize(),h.push(a.x,a.y,a.z),o.x=c.x+n*a.x,o.y=c.y+n*a.y,o.z=c.z+n*a.z,u.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,o=(r+1)*(e-1)+t;p.push(n,i,o),p.push(i,s,o)}}()}(),this.setIndex(p),this.setAttribute("position",new Oi(u,3)),this.setAttribute("normal",new Oi(h,3)),this.setAttribute("uv",new Oi(d,2))}toJSON(){const e=ji.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class Vc extends ji{constructor(e){if(super(),this.type="WireframeGeometry",!0===e.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const t=[],n=[0,0],r={},i=new Jn;if(null!==e.index){const s=e.attributes.position,o=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,t=a.length;e<t;++e){const t=a[e],i=t.start;for(let e=i,s=i+t.count;e<s;e+=3)for(let t=0;t<3;t++){const i=o.getX(e+t),s=o.getX(e+(t+1)%3);n[0]=Math.min(i,s),n[1]=Math.max(i,s);const a=n[0]+","+n[1];void 0===r[a]&&(r[a]={index1:n[0],index2:n[1]})}}for(const e in r){const n=r[e];i.fromBufferAttribute(s,n.index1),t.push(i.x,i.y,i.z),i.fromBufferAttribute(s,n.index2),t.push(i.x,i.y,i.z)}}else{const n=e.attributes.position;for(let e=0,r=n.count/3;e<r;e++)for(let r=0;r<3;r++){const s=3*e+r;i.fromBufferAttribute(n,s),t.push(i.x,i.y,i.z);const o=3*e+(r+1)%3;i.fromBufferAttribute(n,o),t.push(i.x,i.y,i.z)}}this.setAttribute("position",new Oi(t,3))}}var Gc=Object.freeze({__proto__:null,BoxGeometry:hs,BoxBufferGeometry:hs,CircleGeometry:Zl,CircleBufferGeometry:Zl,ConeGeometry:jl,ConeBufferGeometry:jl,CylinderGeometry:Hl,CylinderBufferGeometry:Hl,DodecahedronGeometry:ql,DodecahedronBufferGeometry:ql,EdgesGeometry:$l,ExtrudeGeometry:Ac,ExtrudeBufferGeometry:Ac,IcosahedronGeometry:kc,IcosahedronBufferGeometry:kc,LatheGeometry:Pc,LatheBufferGeometry:Pc,OctahedronGeometry:Rc,OctahedronBufferGeometry:Rc,ParametricGeometry:Lc,ParametricBufferGeometry:Lc,PlaneGeometry:Cs,PlaneBufferGeometry:Cs,PolyhedronGeometry:Wl,PolyhedronBufferGeometry:Wl,RingGeometry:Oc,RingBufferGeometry:Oc,ShapeGeometry:Nc,ShapeBufferGeometry:Nc,SphereGeometry:Ic,SphereBufferGeometry:Ic,TetrahedronGeometry:Dc,TetrahedronBufferGeometry:Dc,TextGeometry:Fc,TextBufferGeometry:Fc,TorusGeometry:zc,TorusBufferGeometry:zc,TorusKnotGeometry:Uc,TorusKnotBufferGeometry:Uc,TubeGeometry:Bc,TubeBufferGeometry:Bc,WireframeGeometry:Vc});class Zc extends pi{constructor(e){super(),this.type="ShadowMaterial",this.color=new _i(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}Zc.prototype.isShadowMaterial=!0;class Hc extends ms{constructor(e){super(e),this.type="RawShaderMaterial"}}function jc(e){pi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _i(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.vertexTangents=!1,this.setValues(e)}function Wc(e){jc.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Bn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Un.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}Hc.prototype.isRawShaderMaterial=!0,jc.prototype=Object.create(pi.prototype),jc.prototype.constructor=jc,jc.prototype.isMeshStandardMaterial=!0,jc.prototype.copy=function(e){return pi.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this},Wc.prototype=Object.create(jc.prototype),Wc.prototype.constructor=Wc,Wc.prototype.isMeshPhysicalMaterial=!0,Wc.prototype.copy=function(e){return jc.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new _i).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this};class qc extends pi{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new _i(16777215),this.specular=new _i(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}qc.prototype.isMeshPhongMaterial=!0;class Kc extends pi{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _i(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}Kc.prototype.isMeshToonMaterial=!0;class Xc extends pi{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}Xc.prototype.isMeshNormalMaterial=!0;class Yc extends pi{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new _i(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _i(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}}Yc.prototype.isMeshLambertMaterial=!0;class Jc extends pi{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _i(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=an,this.normalScale=new Bn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.flatShading=e.flatShading,this}}Jc.prototype.isMeshMatcapMaterial=!0;class $c extends xl{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}$c.prototype.isLineDashedMaterial=!0;var Qc=Object.freeze({__proto__:null,ShadowMaterial:Zc,SpriteMaterial:Va,RawShaderMaterial:Hc,ShaderMaterial:ms,PointsMaterial:Ll,MeshPhysicalMaterial:Wc,MeshStandardMaterial:jc,MeshPhongMaterial:qc,MeshToonMaterial:Kc,MeshNormalMaterial:Xc,MeshLambertMaterial:Yc,MeshDepthMaterial:wa,MeshDistanceMaterial:Sa,MeshBasicMaterial:xi,MeshMatcapMaterial:Jc,LineDashedMaterial:$c,LineBasicMaterial:xl,Material:pi});const eu={arraySlice:function(e,t,n){return eu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let s=0,o=0;o!==r;++s){const r=n[s]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,s=e[0];for(;void 0!==s&&void 0===s[r];)s=e[i++];if(void 0===s)return;let o=s[r];if(void 0!==o)if(Array.isArray(o))do{o=s[r],void 0!==o&&(t.push(s.time),n.push.apply(n,o)),s=e[i++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[r],void 0!==o&&(t.push(s.time),o.toArray(n,n.length)),s=e[i++]}while(void 0!==s);else do{o=s[r],void 0!==o&&(t.push(s.time),n.push(o)),s=e[i++]}while(void 0!==s)},subclip:function(e,t,n,r,i=30){const s=e.clone();s.name=t;const o=[];for(let e=0;e<s.tracks.length;++e){const t=s.tracks[e],a=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const s=t.times[e]*i;if(!(s<n||s>=r)){l.push(t.times[e]);for(let n=0;n<a;++n)c.push(t.values[e*a+n])}}0!==l.length&&(t.times=eu.convertArray(l,t.times.constructor),t.values=eu.convertArray(c,t.values.constructor),o.push(t))}s.tracks=o;let a=1/0;for(let e=0;e<s.tracks.length;++e)a>s.tracks[e].times[0]&&(a=s.tracks[e].times[0]);for(let e=0;e<s.tracks.length;++e)s.tracks[e].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,s=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)continue;let a=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let c=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=r.times.length-1;let d;if(s<=r.times[0]){const e=a,t=l-a;d=eu.arraySlice(r.values,e,t)}else if(s>=r.times[h]){const e=h*l+a,t=e+l-a;d=eu.arraySlice(r.values,e,t)}else{const e=r.createInterpolant(),t=a,n=l-a;e.evaluate(s),d=eu.arraySlice(e.resultBuffer,t,n)}if("quaternion"===i){(new Yn).fromArray(d).normalize().conjugate().toArray(d)}const p=o.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)Yn.multiplyQuaternionsFlat(o.values,t,d,0,o.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)o.values[t+n]-=d[n]}}}return e.blendMode=Wt,e}};function tu(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function nu(e,t,n,r){tu.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ru(e,t,n,r){tu.call(this,e,t,n,r)}function iu(e,t,n,r){tu.call(this,e,t,n,r)}Object.assign(tu.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0}}for(;n<s;){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(tu.prototype,{beforeStart_:tu.prototype.copySampleValue_,afterEnd_:tu.prototype.copySampleValue_}),nu.prototype=Object.assign(Object.create(tu.prototype),{constructor:nu,DefaultSettings_:{endingStart:Gt,endingEnd:Gt},intervalChanged_:function(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,o=r[i],a=r[s];if(void 0===o)switch(this.getSettings_().endingStart){case Zt:i=e,o=2*t-n;break;case Ht:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case Zt:s=e,a=2*n-t;break;case Ht:s=1,a=n+r[1]-r[0];break;default:s=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=s*c},interpolate_:function(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let e=0;e!==o;++e)i[e]=g*s[c+e]+v*s[l+e]+y*s[a+e]+b*s[u+e];return i}}),ru.prototype=Object.assign(Object.create(tu.prototype),{constructor:ru,interpolate_:function(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==o;++e)i[e]=s[l+e]*u+s[a+e]*c;return i}}),iu.prototype=Object.assign(Object.create(tu.prototype),{constructor:iu,interpolate_:function(e){return this.copySampleValue_(e-1)}});class su{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=eu.convertArray(t,this.TimeBufferType),this.values=eu.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:eu.convertArray(e.times,Array),values:eu.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new iu(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ru(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new nu(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ut:t=this.InterpolantFactoryMethodDiscrete;break;case Bt:t=this.InterpolantFactoryMethodLinear;break;case Vt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ut;case this.InterpolantFactoryMethodLinear:return Bt;case this.InterpolantFactoryMethodSmooth:return Vt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=eu.arraySlice(n,i,s),this.values=eu.arraySlice(this.values,i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==s&&s>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,s),e=!1;break}s=r}if(void 0!==r&&eu.isTypedArray(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=eu.arraySlice(this.times),t=eu.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Vt,i=e.length-1;let s=1;for(let o=1;o<i;++o){let i=!1;const a=e[o];if(a!==e[o+1]&&(1!==o||a!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,s=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[s+o]){i=!0;break}}}if(i){if(o!==s){e[s]=e[o];const r=o*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,o=0;o!==n;++o)t[r+o]=t[e+o];++s}return s!==e.length?(this.times=eu.arraySlice(e,0,s),this.values=eu.arraySlice(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=eu.arraySlice(this.times,0),t=eu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}su.prototype.TimeBufferType=Float32Array,su.prototype.ValueBufferType=Float32Array,su.prototype.DefaultInterpolation=Bt;class ou extends su{}ou.prototype.ValueTypeName="bool",ou.prototype.ValueBufferType=Array,ou.prototype.DefaultInterpolation=Ut,ou.prototype.InterpolantFactoryMethodLinear=void 0,ou.prototype.InterpolantFactoryMethodSmooth=void 0;class au extends su{}au.prototype.ValueTypeName="color";class lu extends su{}function cu(e,t,n,r){tu.call(this,e,t,n,r)}lu.prototype.ValueTypeName="number",cu.prototype=Object.assign(Object.create(tu.prototype),{constructor:cu,interpolate_:function(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-t)/(r-t);let l=e*o;for(let e=l+o;l!==e;l+=4)Yn.slerpFlat(i,0,s,l-o,s,l,a);return i}});class uu extends su{InterpolantFactoryMethodLinear(e){return new cu(this.times,this.values,this.getValueSize(),e)}}uu.prototype.ValueTypeName="quaternion",uu.prototype.DefaultInterpolation=Bt,uu.prototype.InterpolantFactoryMethodSmooth=void 0;class hu extends su{}hu.prototype.ValueTypeName="string",hu.prototype.ValueBufferType=Array,hu.prototype.DefaultInterpolation=Ut,hu.prototype.InterpolantFactoryMethodLinear=void 0,hu.prototype.InterpolantFactoryMethodSmooth=void 0;class du extends su{}du.prototype.ValueTypeName="vector";class pu{constructor(e,t=-1,n,r=jt){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Un.generateUUID(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(fu(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(su.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let e=0;e<i;e++){let o=[],a=[];o.push((e+i-1)%i,e,(e+1)%i),a.push(0,1,0);const l=eu.getKeyframeOrder(o);o=eu.sortedArray(o,1,l),a=eu.sortedArray(a,1,l),r||0!==o[0]||(o.push(i),a.push(a[0])),s.push(new lu(".morphTargetInfluences["+t[e].name+"]",o,a).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],s=n.name.match(i);if(s&&s.length>1){const e=s[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const s=[];for(const e in r)s.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const s=[],o=[];eu.flattenJSON(n,s,o,r),0!==s.length&&i.push(new e(t,s,o))}},r=[],i=e.name||"default",s=e.fps||30,o=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],s=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),s.push(r.morphTarget===n?1:0)}r.push(new lu(".morphTargetInfluence["+n+"]",e,s))}a=e.length*(s||1)}else{const s=".bones["+t[e].name+"]";n(du,s+".position",i,"pos",r),n(uu,s+".quaternion",i,"rot",r),n(du,s+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,a,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function fu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return lu;case"vector":case"vector2":case"vector3":case"vector4":return du;case"color":return au;case"quaternion":return uu;case"bool":case"boolean":return ou;case"string":return hu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];eu.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const mu={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function gu(e,t,n){const r=this;let i,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===s&&void 0!==r.onStart&&r.onStart(e,o,a),s=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}const vu=new gu;function yu(e){this.manager=void 0!==e?e:vu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(yu.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const bu={};function _u(e){yu.call(this,e)}_u.prototype=Object.assign(Object.create(yu.prototype),{constructor:_u,load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=mu.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;if(void 0!==bu[e])return void bu[e].push({onLoad:t,onProgress:n,onError:r});const o=e.match(/^data:(.*?)(;base64)?,(.*)$/);let a;if(o){const n=o[1],s=!!o[2];let a=o[3];a=decodeURIComponent(a),s&&(a=atob(a));try{let r;const s=(this.responseType||"").toLowerCase();switch(s){case"arraybuffer":case"blob":const e=new Uint8Array(a.length);for(let t=0;t<a.length;t++)e[t]=a.charCodeAt(t);r="blob"===s?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(a,n);break;case"json":r=JSON.parse(a);break;default:r=a}setTimeout((function(){t&&t(r),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{bu[e]=[],bu[e].push({onLoad:t,onProgress:n,onError:r}),a=new XMLHttpRequest,a.open("GET",e,!0),a.addEventListener("load",(function(t){const n=this.response,r=bu[e];if(delete bu[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),mu.add(e,n);for(let e=0,t=r.length;e<t;e++){const t=r[e];t.onLoad&&t.onLoad(n)}i.manager.itemEnd(e)}else{for(let e=0,n=r.length;e<n;e++){const n=r[e];n.onError&&n.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),a.addEventListener("progress",(function(t){const n=bu[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onProgress&&r.onProgress(t)}}),!1),a.addEventListener("error",(function(t){const n=bu[e];delete bu[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),a.addEventListener("abort",(function(t){const n=bu[e];delete bu[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(a.responseType=this.responseType),void 0!==this.withCredentials&&(a.withCredentials=this.withCredentials),a.overrideMimeType&&a.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)a.setRequestHeader(e,this.requestHeader[e]);a.send(null)}return i.manager.itemStart(e),a},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}});class xu extends yu{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new _u(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=pu.parse(e[n]);t.push(r)}return t}}function wu(e){yu.call(this,e)}wu.prototype=Object.assign(Object.create(yu.prototype),{constructor:wu,load:function(e,t,n,r){const i=this,s=[],o=new Bl,a=new _u(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials);let l=0;function c(c){a.load(e[c],(function(e){const n=i.parse(e,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=be),o.image=s,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else a.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){s[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)s[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),s[t].format=n.format,s[t].width=n.width,s[t].height=n.height}o.image=s}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=be),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}});class Su extends yu{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=mu.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),mu.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class Tu extends yu{constructor(e){super(e)}load(e,t,n,r){const i=new _s,s=new Su(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)a(t);return i}}function Eu(e){yu.call(this,e)}function Mu(e){yu.call(this,e)}function Au(){this.type="Curve",this.arcLengthDivisions=200}Eu.prototype=Object.assign(Object.create(yu.prototype),{constructor:Eu,load:function(e,t,n,r){const i=this,s=new ws,o=new _u(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:de,s.wrapT=void 0!==n.wrapT?n.wrapT:de,s.magFilter=void 0!==n.magFilter?n.magFilter:be,s.minFilter=void 0!==n.minFilter?n.minFilter:be,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=we),1===n.mipmapCount&&(s.minFilter=be),s.needsUpdate=!0,t&&t(s,n))}),n,r),s}}),Mu.prototype=Object.assign(Object.create(yu.prototype),{constructor:Mu,load:function(e,t,n,r){const i=new jn,s=new Su(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(n){i.image=n;const r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Fe:ze,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}),Object.assign(Au.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let r=0;const i=n.length;let s;s=t||e*n[i-1];let o,a=0,l=i-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),o=n[r]-s,o<0)a=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,n[r]===s)return r/(i-1);const c=n[r];return(r+(s-c)/(n[r+1]-c))/(i-1)},getTangent:function(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),o=this.getPoint(i),a=t||(s.isVector2?new Bn:new Jn);return a.copy(o).sub(s).normalize(),a},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new Jn,r=[],i=[],s=[],o=new Jn,a=new Er;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new Jn),r[t].normalize()}i[0]=new Jn,s[0]=new Jn;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),s[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),s[t]=s[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(Un.clamp(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(a.makeRotationAxis(o,e))}s[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(Un.clamp(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],t*n)),s[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});class Cu extends Au{constructor(e=0,t=0,n=1,r=1,i=0,s=2*Math.PI,o=!1,a=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(e,t){const n=t||new Bn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Cu.prototype.isEllipseCurve=!0;class ku extends Cu{constructor(e,t,n,r,i,s){super(e,t,n,n,r,i,s),this.type="ArcCurve"}}function Pu(){let e=0,t=0,n=0,r=0;function i(i,s,o,a){e=i,t=o,n=-3*i+3*s-2*o-a,r=2*i-2*s+o+a}return{initCatmullRom:function(e,t,n,r,s){i(t,n,s*(n-e),s*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,s,o,a){let l=(t-e)/s-(n-e)/(s+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+a)+(r-n)/a;l*=o,c*=o,i(t,n,l,c)},calc:function(i){const s=i*i;return e+t*i+n*s+r*(s*i)}}}ku.prototype.isArcCurve=!0;const Ru=new Jn,Lu=new Pu,Ou=new Pu,Nu=new Pu;class Iu extends Au{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new Jn){const n=t,r=this.points,i=r.length,s=(i-(this.closed?0:1))*e;let o,a,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?o=r[(l-1)%i]:(Ru.subVectors(r[0],r[1]).add(r[0]),o=Ru);const u=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(Ru.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=Ru),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Lu.initNonuniformCatmullRom(o.x,u.x,h.x,a.x,t,n,r),Ou.initNonuniformCatmullRom(o.y,u.y,h.y,a.y,t,n,r),Nu.initNonuniformCatmullRom(o.z,u.z,h.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(Lu.initCatmullRom(o.x,u.x,h.x,a.x,this.tension),Ou.initCatmullRom(o.y,u.y,h.y,a.y,this.tension),Nu.initCatmullRom(o.z,u.z,h.z,a.z,this.tension));return n.set(Lu.calc(c),Ou.calc(c),Nu.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Jn).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Du(e,t,n,r,i){const s=.5*(r-t),o=.5*(i-n),a=e*e;return(2*n-2*r+s+o)*(e*a)+(-3*n+3*r-2*s-o)*a+s*e+n}function Fu(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function zu(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}Iu.prototype.isCatmullRomCurve3=!0;class Uu extends Au{constructor(e=new Bn,t=new Bn,n=new Bn,r=new Bn){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Bn){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(zu(e,r.x,i.x,s.x,o.x),zu(e,r.y,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Uu.prototype.isCubicBezierCurve=!0;class Bu extends Au{constructor(e=new Jn,t=new Jn,n=new Jn,r=new Jn){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Jn){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(zu(e,r.x,i.x,s.x,o.x),zu(e,r.y,i.y,s.y,o.y),zu(e,r.z,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Bu.prototype.isCubicBezierCurve3=!0;class Vu extends Au{constructor(e=new Bn,t=new Bn){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Bn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Bn;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Vu.prototype.isLineCurve=!0;class Gu extends Au{constructor(e=new Jn,t=new Jn){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new Jn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Zu extends Au{constructor(e=new Bn,t=new Bn,n=new Bn){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Bn){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Fu(e,r.x,i.x,s.x),Fu(e,r.y,i.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Zu.prototype.isQuadraticBezierCurve=!0;class Hu extends Au{constructor(e=new Jn,t=new Jn,n=new Jn){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Jn){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Fu(e,r.x,i.x,s.x),Fu(e,r.y,i.y,s.y),Fu(e,r.z,i.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Hu.prototype.isQuadraticBezierCurve3=!0;class ju extends Au{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Bn){const n=t,r=this.points,i=(r.length-1)*e,s=Math.floor(i),o=i-s,a=r[0===s?s:s-1],l=r[s],c=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return n.set(Du(o,a.x,l.x,c.x,u.x),Du(o,a.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Bn).fromArray(n))}return this}}ju.prototype.isSplineCurve=!0;var Wu=Object.freeze({__proto__:null,ArcCurve:ku,CatmullRomCurve3:Iu,CubicBezierCurve:Uu,CubicBezierCurve3:Bu,EllipseCurve:Cu,LineCurve:Vu,LineCurve3:Gu,QuadraticBezierCurve:Zu,QuadraticBezierCurve3:Hu,SplineCurve:ju});class qu extends Au{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Vu(t,e))}getPoint(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const e=n[r]-t,i=this.curves[r],s=i.getLength(),o=0===s?0:1-e/s;return i.getPointAt(o)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],o=s&&s.isEllipseCurve?2*e:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,a=s.getPoints(o);for(let e=0;e<a.length;e++){const r=a[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Wu[n.type]).fromJSON(n))}return this}}class Ku extends qu{constructor(e){super(),this.type="Path",this.currentPoint=new Bn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Vu(this.currentPoint.clone(),new Bn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Zu(this.currentPoint.clone(),new Bn(e,t),new Bn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,s){const o=new Uu(this.currentPoint.clone(),new Bn(e,t),new Bn(n,r),new Bn(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new ju(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,n,r,i,s),this}absarc(e,t,n,r,i,s){return this.absellipse(e,t,n,n,r,i,s),this}ellipse(e,t,n,r,i,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,s,o,a),this}absellipse(e,t,n,r,i,s,o,a){const l=new Cu(e,t,n,r,i,s,o,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Xu extends Ku{constructor(e){super(e),this.uuid=Un.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Ku).fromJSON(n))}return this}}class Yu extends Yr{constructor(e,t=1){super(),this.type="Light",this.color=new _i(e),this.intensity=t}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Yu.prototype.isLight=!0;class Ju extends Yu{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(Yr.DefaultUp),this.updateMatrix(),this.groundColor=new _i(t)}copy(e){return Yu.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Ju.prototype.isHemisphereLight=!0;const $u=new Er,Qu=new Jn,eh=new Jn;class th{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new Bn(512,512),this.map=null,this.mapPass=null,this.matrix=new Er,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Es,this._frameExtents=new Bn(1,1),this._viewportCount=1,this._viewports=[new qn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Qu.setFromMatrixPosition(e.matrixWorld),t.position.copy(Qu),eh.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(eh),t.updateMatrixWorld(),$u.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix($u),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nh extends th{constructor(){super(new vs(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*Un.RAD2DEG*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}}nh.prototype.isSpotLightShadow=!0;class rh extends Yu{constructor(e,t,n=0,r=Math.PI/3,i=0,s=1){super(e,t),this.type="SpotLight",this.position.copy(Yr.DefaultUp),this.updateMatrix(),this.target=new Yr,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.shadow=new nh}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}rh.prototype.isSpotLight=!0;const ih=new Er,sh=new Jn,oh=new Jn;class ah extends th{constructor(){super(new vs(90,1,.5,500)),this._frameExtents=new Bn(4,2),this._viewportCount=6,this._viewports=[new qn(2,1,1,1),new qn(0,1,1,1),new qn(3,1,1,1),new qn(1,1,1,1),new qn(3,0,1,1),new qn(1,0,1,1)],this._cubeDirections=[new Jn(1,0,0),new Jn(-1,0,0),new Jn(0,0,1),new Jn(0,0,-1),new Jn(0,1,0),new Jn(0,-1,0)],this._cubeUps=[new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,0,1),new Jn(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix;sh.setFromMatrixPosition(e.matrixWorld),n.position.copy(sh),oh.copy(n.position),oh.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(oh),n.updateMatrixWorld(),r.makeTranslation(-sh.x,-sh.y,-sh.z),ih.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ih)}}ah.prototype.isPointLightShadow=!0;class lh extends Yu{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new ah}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}lh.prototype.isPointLight=!0;class ch extends gs{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,o=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,o-=t*this.view.offsetY,a=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=Yr.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}ch.prototype.isOrthographicCamera=!0;class uh extends th{constructor(){super(new ch(-5,5,5,-5,.5,500))}}uh.prototype.isDirectionalLightShadow=!0;class hh extends Yu{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Yr.DefaultUp),this.updateMatrix(),this.target=new Yr,this.shadow=new uh}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}hh.prototype.isDirectionalLight=!0;class dh extends Yu{constructor(e,t){super(e,t),this.type="AmbientLight"}}dh.prototype.isAmbientLight=!0;class ph extends Yu{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}ph.prototype.isRectAreaLight=!0;class fh{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Jn)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*i),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*r*1.092548),t.addScaledVector(s[5],r*i*1.092548),t.addScaledVector(s[6],.315392*(3*i*i-1)),t.addScaledVector(s[7],n*i*1.092548),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*r),t.addScaledVector(s[2],1.023328*i),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*r),t.addScaledVector(s[5],.858086*r*i),t.addScaledVector(s[6],.743125*i*i-.247708),t.addScaledVector(s[7],.858086*n*i),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}fh.prototype.isSphericalHarmonics3=!0;class mh extends Yu{constructor(e=new fh,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}mh.prototype.isLightProbe=!0;class gh extends yu{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,s=new _u(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=new Qc[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=(new _i).setHex(e.sheen)),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.vertexTangents&&(r.vertexTangents=e.vertexTangents),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new _i).setHex(i.value);break;case"v2":r.uniforms[t].value=(new Bn).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new Jn).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new qn).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new Vn).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new Er).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Bn).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Bn).fromArray(e.clearcoatNormalScale)),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),r}setTextures(e){return this.textures=e,this}}const vh={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function yh(){ji.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function bh(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ti.call(this,e,t,n),this.meshPerAttribute=r||1}yh.prototype=Object.assign(Object.create(ji.prototype),{constructor:yh,isInstancedBufferGeometry:!0,copy:function(e){return ji.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const e=ji.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}),bh.prototype=Object.assign(Object.create(Ti.prototype),{constructor:bh,isInstancedBufferAttribute:!0,copy:function(e){return Ti.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=Ti.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}});class _h extends yu{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new _u(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],s=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),o=new za(Fi(i.type,s),i.stride);return o.uuid=i.uuid,t[r]=o,o}const i=e.isInstancedBufferGeometry?new yh:new ji,s=e.data.index;if(void 0!==s){const e=Fi(s.type,s.array);i.setIndex(new Ti(e,1))}const o=e.data.attributes;for(const t in o){const n=o[t];let s;if(n.isInterleavedBufferAttribute){s=new Ba(r(e.data,n.data),n.itemSize,n.offset,n.normalized)}else{const e=Fi(n.type,n.array);s=new(n.isInstancedBufferAttribute?bh:Ti)(e,n.itemSize,n.normalized)}void 0!==n.name&&(s.name=n.name),i.setAttribute(t,s)}const a=e.data.morphAttributes;if(a)for(const t in a){const n=a[t],s=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let o;if(i.isInterleavedBufferAttribute){o=new Ba(r(e.data,i.data),i.itemSize,i.offset,i.normalized)}else{o=new Ti(Fi(i.type,i.array),i.itemSize,i.normalized)}void 0!==i.name&&(o.name=i.name),s.push(o)}i.morphAttributes[t]=s}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new Jn;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new gr(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class xh extends yu{constructor(e){super(e)}load(e,t,n,r){const i=this,s=""===this.path?vh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new _u(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){let s=null;try{s=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const o=s.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(s,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in s)if(s[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Xu).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new ml).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};let r;if(void 0!==e){const i=new _h;for(let s=0,o=e.length;s<o;s++){let o;const a=e[s];switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Gc[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":o=new Gc[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Gc[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Gc[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Gc[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Gc[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Gc[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Gc[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Gc[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Gc[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"TubeGeometry":case"TubeBufferGeometry":o=new Gc[a.type]((new Wu[a.path.type]).fromJSON(a.path),a.tubularSegments,a.radius,a.radialSegments,a.closed);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Gc[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Gc[a.type](a.vertices,a.indices,a.radius,a.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let e=0,n=a.shapes.length;e<n;e++){const n=t[a.shapes[e]];r.push(n)}o=new Gc[a.type](r,a.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let e=0,n=a.shapes.length;e<n;e++){const n=t[a.shapes[e]];r.push(n)}const e=a.options.extrudePath;void 0!==e&&(a.options.extrudePath=(new Wu[e.type]).fromJSON(e)),o=new Gc[a.type](r,a.options);break;case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(a);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+a.type+'"');continue}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),!0===o.isBufferGeometry&&void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new gh;i.setTextures(t);for(let t=0,s=e.length;t<s;t++){const s=e[t];if("MultiMaterial"===s.type){const e=[];for(let t=0;t<s.materials.length;t++){const r=s.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[s.uuid]=e}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=pu.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function s(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Fi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new gu(t);i=new Su(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let e=0,t=i.length;e<t;e++){const t=s(i[e]);null!==t&&(t instanceof HTMLImageElement?r[n.uuid].push(t):r[n.uuid].push(new ws(t.data,t.width,t.height)))}}else{const e=s(n.url);null!==e&&(r[n.uuid]=e)}}}return r}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,s=e.length;i<s;i++){const s=e[i];let o;void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const a=t[s.image];Array.isArray(a)?(o=new _s(a),6===a.length&&(o.needsUpdate=!0)):(o=a&&a.data?new ws(a.data,a.width,a.height):new jn(a),a&&(o.needsUpdate=!0)),o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,wh)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],Sh),o.wrapT=n(s.wrap[1],Sh)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,Th)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,Th)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),r[s.uuid]=o}return r}parseObject(e,t,n,r){let i,s,o;function a(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new Fa,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new _i(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Da(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new Ia(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new vs(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new ch(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new dh(e.color,e.intensity);break;case"DirectionalLight":i=new hh(e.color,e.intensity);break;case"PointLight":i=new lh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new ph(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new rh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Ju(e.color,e.groundColor,e.intensity);break;case"LightProbe":i=(new mh).fromJSON(e);break;case"SkinnedMesh":s=a(e.geometry),o=l(e.material),i=new hl(s,o),void 0!==e.bindMode&&(i.bindMode=e.bindMode),void 0!==e.bindMatrix&&i.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(i.skeleton=e.skeleton);break;case"Mesh":s=a(e.geometry),o=l(e.material),i=new cs(s,o);break;case"InstancedMesh":s=a(e.geometry),o=l(e.material);const t=e.count,n=e.instanceMatrix;i=new _l(s,o,t),i.instanceMatrix=new Ti(new Float32Array(n.array),16);break;case"LOD":i=new sl;break;case"Line":i=new Al(a(e.geometry),l(e.material));break;case"LineLoop":i=new Rl(a(e.geometry),l(e.material));break;case"LineSegments":i=new Pl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":i=new Fl(a(e.geometry),l(e.material));break;case"Sprite":i=new tl(l(e.material));break;case"Group":i=new ka;break;case"Bone":i=new dl;break;default:i=new Yr}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(i.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)i.add(this.parseObject(s[e],t,n,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];i.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(i.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=i.getObjectByProperty("uuid",n.object);void 0!==r&&i.addLevel(r,n.distance)}}return i}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const wh={UVMapping:ie,CubeReflectionMapping:se,CubeRefractionMapping:oe,EquirectangularReflectionMapping:ae,EquirectangularRefractionMapping:le,CubeUVReflectionMapping:ce,CubeUVRefractionMapping:ue},Sh={RepeatWrapping:he,ClampToEdgeWrapping:de,MirroredRepeatWrapping:pe},Th={NearestFilter:fe,NearestMipmapNearestFilter:me,NearestMipmapLinearFilter:ve,LinearFilter:be,LinearMipmapNearestFilter:_e,LinearMipmapLinearFilter:we};function Eh(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),yu.call(this,e),this.options={premultiplyAlpha:"none"}}Eh.prototype=Object.assign(Object.create(yu.prototype),{constructor:Eh,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=mu.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){mu.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}});class Mh{constructor(){this.type="ShapePath",this.color=new _i,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ku,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,s){return this.currentPath.bezierCurveTo(e,t,n,r,i,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Xu;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,s=0;s<n;i=s++){let n=t[i],o=t[s],a=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],a=-a,o=t[i],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r}const i=Tc.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===t)return n(s);let o,a,l;const c=[];if(1===s.length)return a=s[0],l=new Xu,l.curves=a.curves,c.push(l),c;let u=!i(s[0].getPoints());u=e?!u:u;const h=[],d=[];let p,f,m=[],g=0;d[g]=void 0,m[g]=[];for(let t=0,n=s.length;t<n;t++)a=s[t],p=a.getPoints(),o=i(p),o=e?!o:o,o?(!u&&d[g]&&g++,d[g]={s:new Xu,p},d[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:p[0]});if(!d[0])return n(s);if(d.length>1){let e=!1;const t=[];for(let e=0,t=d.length;e<t;e++)h[e]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let s=0;s<i.length;s++){const o=i[s];let a=!0;for(let i=0;i<d.length;i++)r(o.p,d[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:s}),a?(a=!1,h[i].push(o)):e=!0);a&&h[n].push(o)}}t.length>0&&(e||(m=h))}for(let e=0,t=d.length;e<t;e++){l=d[e].s,c.push(l),f=m[e];for(let e=0,t=f.length;e<t;e++)l.holes.push(f[e].h)}return c}}class Ah{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=function(e,t,n){const r=Array.from(e),i=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[];let a=0,l=0;for(let e=0;e<r.length;e++){const t=r[e];if("\n"===t)a=0,l-=s;else{const e=Ch(t,i,a,l,n);a+=e.offsetX,o.push(e.path)}}return o}(e,t,this.data);for(let e=0,t=r.length;e<t;e++)Array.prototype.push.apply(n,r[e].toShapes());return n}}function Ch(e,t,n,r,i){const s=i.glyphs[e]||i.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");const o=new Mh;let a,l,c,u,h,d,p,f;if(s.o){const e=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let i=0,s=e.length;i<s;){switch(e[i++]){case"m":a=e[i++]*t+n,l=e[i++]*t+r,o.moveTo(a,l);break;case"l":a=e[i++]*t+n,l=e[i++]*t+r,o.lineTo(a,l);break;case"q":c=e[i++]*t+n,u=e[i++]*t+r,h=e[i++]*t+n,d=e[i++]*t+r,o.quadraticCurveTo(h,d,c,u);break;case"b":c=e[i++]*t+n,u=e[i++]*t+r,h=e[i++]*t+n,d=e[i++]*t+r,p=e[i++]*t+n,f=e[i++]*t+r,o.bezierCurveTo(h,d,p,f,c,u)}}}return{offsetX:s.ha*t,path:o}}Ah.prototype.isFont=!0;class kh extends yu{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new _u(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(e){let n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}const r=i.parse(n);t&&t(r)}),n,r)}parse(e){return new Ah(e)}}let Ph;const Rh={getContext:function(){return void 0===Ph&&(Ph=new(window.AudioContext||window.webkitAudioContext)),Ph},setContext:function(e){Ph=e}};class Lh extends yu{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new _u(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{const e=n.slice(0);Rh.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}class Oh extends mh{constructor(e,t,n=1){super(void 0,n);const r=(new _i).set(e),i=(new _i).set(t),s=new Jn(r.r,r.g,r.b),o=new Jn(i.r,i.g,i.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(l)}}Oh.prototype.isHemisphereLightProbe=!0;class Nh extends mh{constructor(e,t=1){super(void 0,t);const n=(new _i).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}Nh.prototype.isAmbientLightProbe=!0;const Ih=new Er,Dh=new Er;class Fh{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new vs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new vs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),r=t.eyeSep/2,i=r*t.near/t.focus,s=t.near*Math.tan(Un.DEG2RAD*t.fov*.5)/t.zoom;let o,a;Dh.elements[12]=-r,Ih.elements[12]=r,o=-s*t.aspect+i,a=s*t.aspect+i,n.elements[0]=2*t.near/(a-o),n.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(n),o=-s*t.aspect-i,a=s*t.aspect-i,n.elements[0]=2*t.near/(a-o),n.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Dh),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ih)}}class zh{constructor(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Uh(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Uh();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Uh(){return("undefined"==typeof performance?Date:performance).now()}const Bh=new Jn,Vh=new Yn,Gh=new Jn,Zh=new Jn;class Hh extends Yr{constructor(){super(),this.type="AudioListener",this.context=Rh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new zh}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Bh,Vh,Gh),Zh.set(0,0,-1).applyQuaternion(Vh),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Bh.x,e),t.positionY.linearRampToValueAtTime(Bh.y,e),t.positionZ.linearRampToValueAtTime(Bh.z,e),t.forwardX.linearRampToValueAtTime(Zh.x,e),t.forwardY.linearRampToValueAtTime(Zh.y,e),t.forwardZ.linearRampToValueAtTime(Zh.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Bh.x,Bh.y,Bh.z),t.setOrientation(Zh.x,Zh.y,Zh.z,n.x,n.y,n.z)}}class jh extends Yr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Wh=new Jn,qh=new Yn,Kh=new Jn,Xh=new Jn;class Yh extends jh{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Wh,qh,Kh),Xh.set(0,0,1).applyQuaternion(qh);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Wh.x,e),t.positionY.linearRampToValueAtTime(Wh.y,e),t.positionZ.linearRampToValueAtTime(Wh.z,e),t.orientationX.linearRampToValueAtTime(Xh.x,e),t.orientationY.linearRampToValueAtTime(Xh.y,e),t.orientationZ.linearRampToValueAtTime(Xh.z,e)}else t.setPosition(Wh.x,Wh.y,Wh.z),t.setOrientation(Xh.x,Xh.y,Xh.z)}}class Jh{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class $h{constructor(e,t,n){let r,i,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==r;++e)n[i+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){Yn.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const s=this._workIndex*i;Yn.multiplyQuaternionsFlat(e,s,e,t,e,n),Yn.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,i){const s=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*s+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]+e[n+s]*r}}}const Qh="\\[\\]\\.:\\/",ed=new RegExp("[\\[\\]\\.:\\/]","g"),td="[^\\[\\]\\.:\\/]",nd="[^"+Qh.replace("\\.","")+"]",rd=/((?:WC+[\/:])*)/.source.replace("WC",td),id=/(WCOD+)?/.source.replace("WCOD",nd),sd=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",td),od=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",td),ad=new RegExp("^"+rd+id+sd+od+"$"),ld=["material","materials","bones"];function cd(e,t,n){const r=n||ud.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function ud(e,t,n){this.path=t,this.parsedPath=n||ud.parseTrackName(t),this.node=ud.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(cd.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(ud,{Composite:cd,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new ud.Composite(e,t,n):new ud(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(ed,"")},parseTrackName:function(e){const t=ad.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==ld.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}}),Object.assign(ud.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=ud.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const s=e[r];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(ud.prototype,{_getValue_unbound:ud.prototype.getValue,_setValue_unbound:ud.prototype.setValue});class hd{constructor(){this.uuid=Un.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,s=i.length;let o,a=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=a++,t[h]=d,e.push(u);for(let e=0,t=s;e!==t;++e)i[e].push(new ud(u,n[e],r[e]))}else if(d<l){o=e[d];const a=--l,c=e[a];t[c.uuid]=d,e[d]=c,t[h]=a,e[a]=u;for(let e=0,t=s;e!==t;++e){const t=i[e],s=t[a];let o=t[d];t[d]=s,void 0===o&&(o=new ud(u,n[e],r[e])),t[a]=o}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s],a=o.uuid,l=t[a];if(void 0!==l&&l>=i){const s=i++,c=e[s];t[c.uuid]=l,e[l]=c,t[a]=s,e[s]=o;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[l];t[l]=r,t[s]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,s=e.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<i){const o=--i,a=e[o],c=--s,u=e[c];t[a.uuid]=l,e[l]=a,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[c];t[l]=r,t[o]=i,t.pop()}}else{const i=--s,o=e[i];i>0&&(t[o.uuid]=l),e[l]=o,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const s=this._paths,o=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,s.push(e),o.push(t),i.push(u);for(let n=c,r=a.length;n!==r;++n){const r=a[n];u[n]=new ud(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];t[e[o]]=n,s[n]=a,s.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}hd.prototype.isAnimationObjectGroup=!0;class dd{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,s=i.length,o=new Array(s),a={endingStart:Gt,endingEnd:Gt};for(let e=0;e!==s;++e){const t=i[e].createInterpolant(null);o[e]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ft,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,s=n/r;e.warp(1,i,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=i,a[1]=i+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Wt)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const s=n===zt;if(0===e)return-1===i?r:s&&1==(1&i)?t-r:r;if(n===Dt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(s&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Zt,r.endingEnd=Zt):(r.endingStart=e?this.zeroSlopeAtStart?Zt:Gt:Ht,r.endingEnd=t?this.zeroSlopeAtEnd?Zt:Gt:Ht)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=i,a[0]=t,o[1]=i+e,a[1]=n,this}}class pd extends Dn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,o=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];void 0===c&&(c={},l[a]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)s[e]=u;else{if(u=s[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,a,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new $h(ud.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,a,l),s[e]=u}o[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let s=i[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,s=this._actionsByClip,o=s[i],a=o.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null;delete o.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete s[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,o=s[r],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete o[i],0===Object.keys(o).length&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new ru(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let s="string"==typeof e?pu.findByName(r,e):e;const o=null!==s?s.uuid:e,a=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:jt),void 0!==a){const e=a.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=a.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new dd(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?pu.findByName(n,e):e,s=i?i.uuid:e,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),s=this._accuIndex^=1;for(let o=0;o!==n;++o){t[o]._update(r,e,i,s)}const o=this._bindings,a=this._nActiveBindings;for(let e=0;e!==a;++e)o[e].apply(s);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,s=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,s._cacheIndex=i,t[i]=s,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}pd.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class fd{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new fd(void 0===this.value.clone?this.value:this.value.clone())}}function md(e,t,n){za.call(this,e,t),this.meshPerAttribute=n||1}function gd(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}function vd(e,t,n=0,r=1/0){this.ray=new Tr(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Dr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function yd(e,t){return e.distance-t.distance}function bd(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)bd(r[e],t,n,!0)}}md.prototype=Object.assign(Object.create(za.prototype),{constructor:md,isInstancedInterleavedBuffer:!0,copy:function(e){return za.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=za.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=za.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}),Object.defineProperty(gd.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(gd.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}}),Object.assign(vd.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)},intersectObject:function(e,t=!1,n=[]){return bd(e,this,n,t),n.sort(yd),n},intersectObjects:function(e,t=!1,n=[]){for(let r=0,i=e.length;r<i;r++)bd(e[r],this,n,t);return n.sort(yd),n}});class _d{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Un.clamp(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class xd{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const wd=new Bn;class Sd{constructor(e=new Bn(1/0,1/0),t=new Bn(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=wd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Bn),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Bn),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Bn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Bn),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return wd.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Sd.prototype.isBox2=!0;const Td=new Jn,Ed=new Jn;class Md{constructor(e=new Jn,t=new Jn){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Jn),e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Jn),e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Jn),this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Td.subVectors(e,this.start),Ed.subVectors(this.end,this.start);const n=Ed.dot(Ed);let r=Ed.dot(Td)/n;return t&&(r=Un.clamp(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Jn),this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}function Ad(e){Yr.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Ad.prototype=Object.create(Yr.prototype),Ad.prototype.constructor=Ad,Ad.prototype.isImmediateRenderObject=!0;const Cd=new Jn;class kd extends Yr{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new ji,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,s=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new Oi(r,3));const i=new xl({fog:!1,toneMapped:!1});this.cone=new Pl(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Cd.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Cd),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Pd=new Jn,Rd=new Er,Ld=new Er;class Od extends Pl{constructor(e){const t=Nd(e),n=new ji,r=[],i=[],s=new _i(0,0,1),o=new _i(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(s.r,s.g,s.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new Oi(r,3)),n.setAttribute("color",new Oi(i,3));super(n,new xl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Ld.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(Rd.multiplyMatrices(Ld,i.matrixWorld),Pd.setFromMatrixPosition(Rd),r.setXYZ(n,Pd.x,Pd.y,Pd.z),Rd.multiplyMatrices(Ld,i.parent.matrixWorld),Pd.setFromMatrixPosition(Rd),r.setXYZ(n+1,Pd.x,Pd.y,Pd.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Nd(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Nd(e.children[n]));return t}class Id extends cs{constructor(e,t,n){super(new Ic(t,4,2),new xi({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Dd=new Jn,Fd=new _i,zd=new _i;class Ud extends Yr{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Rc(t);r.rotateY(.5*Math.PI),this.material=new xi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),s=new Float32Array(3*i.count);r.setAttribute("color",new Ti(s,3)),this.add(new cs(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Fd.copy(this.light.color),zd.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Fd:zd;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(Dd.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Bd extends Pl{constructor(e=10,t=10,n=4473924,r=8947848){n=new _i(n),r=new _i(r);const i=t/2,s=e/t,o=e/2,a=[],l=[];for(let e=0,c=0,u=-o;e<=t;e++,u+=s){a.push(-o,0,u,o,0,u),a.push(u,0,-o,u,0,o);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new ji;c.setAttribute("position",new Oi(a,3)),c.setAttribute("color",new Oi(l,3));super(c,new xl({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class Vd extends Pl{constructor(e=10,t=16,n=8,r=64,i=4473924,s=8947848){i=new _i(i),s=new _i(s);const o=[],a=[];for(let n=0;n<=t;n++){const r=n/t*(2*Math.PI),l=Math.sin(r)*e,c=Math.cos(r)*e;o.push(0,0,0),o.push(l,0,c);const u=1&n?i:s;a.push(u.r,u.g,u.b),a.push(u.r,u.g,u.b)}for(let t=0;t<=n;t++){const l=1&t?i:s,c=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c;o.push(n,0,i),a.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c,o.push(n,0,i),a.push(l.r,l.g,l.b)}}const l=new ji;l.setAttribute("position",new Oi(o,3)),l.setAttribute("color",new Oi(a,3));super(l,new xl({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Gd=new Jn,Zd=new Jn,Hd=new Jn;class jd extends Yr{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new ji;r.setAttribute("position",new Oi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new xl({fog:!1,toneMapped:!1});this.lightPlane=new Al(r,i),this.add(this.lightPlane),r=new ji,r.setAttribute("position",new Oi([0,0,0,0,0,1],3)),this.targetLine=new Al(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Gd.setFromMatrixPosition(this.light.matrixWorld),Zd.setFromMatrixPosition(this.light.target.matrixWorld),Hd.subVectors(Zd,Gd),this.lightPlane.lookAt(Zd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Zd),this.targetLine.scale.z=Hd.length()}}const Wd=new Jn,qd=new gs;class Kd extends Pl{constructor(e){const t=new ji,n=new xl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={},o=new _i(16755200),a=new _i(16711680),l=new _i(43775),c=new _i(16777215),u=new _i(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(r.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",a),h("p","n2",a),h("p","n3",a),h("p","n4",a),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new Oi(r,3)),t.setAttribute("color",new Oi(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){const e=this.geometry,t=this.pointMap;qd.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Xd("c",t,e,qd,0,0,-1),Xd("t",t,e,qd,0,0,1),Xd("n1",t,e,qd,-1,-1,-1),Xd("n2",t,e,qd,1,-1,-1),Xd("n3",t,e,qd,-1,1,-1),Xd("n4",t,e,qd,1,1,-1),Xd("f1",t,e,qd,-1,-1,1),Xd("f2",t,e,qd,1,-1,1),Xd("f3",t,e,qd,-1,1,1),Xd("f4",t,e,qd,1,1,1),Xd("u1",t,e,qd,.7,1.1,-1),Xd("u2",t,e,qd,-.7,1.1,-1),Xd("u3",t,e,qd,0,2,-1),Xd("cf1",t,e,qd,-1,0,1),Xd("cf2",t,e,qd,1,0,1),Xd("cf3",t,e,qd,0,-1,1),Xd("cf4",t,e,qd,0,1,1),Xd("cn1",t,e,qd,-1,0,-1),Xd("cn2",t,e,qd,1,0,-1),Xd("cn3",t,e,qd,0,-1,-1),Xd("cn4",t,e,qd,0,1,-1),e.getAttribute("position").needsUpdate=!0}}function Xd(e,t,n,r,i,s,o){Wd.set(i,s,o).unproject(r);const a=t[e];if(void 0!==a){const e=n.getAttribute("position");for(let t=0,n=a.length;t<n;t++)e.setXYZ(a[t],Wd.x,Wd.y,Wd.z)}}const Yd=new er;class Jd extends Pl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new ji;i.setIndex(new Ti(n,1)),i.setAttribute("position",new Ti(r,3)),super(i,new xl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Yd.setFromObject(this.object),Yd.isEmpty())return;const t=Yd.min,n=Yd.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return Pl.prototype.copy.call(this,e),this.object=e.object,this}}class $d extends Pl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new ji;r.setIndex(new Ti(n,1)),r.setAttribute("position",new Oi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new xl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Qd extends Al{constructor(e,t=1,n=16776960){const r=n,i=new ji;i.setAttribute("position",new Oi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new xl({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=new ji;s.setAttribute("position",new Oi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new cs(s,new xi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?m:f,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const ep=new Jn;let tp,np;class rp extends Yr{constructor(e=new Jn(0,0,1),t=new Jn(0,0,0),n=1,r=16776960,i=.2*n,s=.2*i){super(),this.type="ArrowHelper",void 0===tp&&(tp=new ji,tp.setAttribute("position",new Oi([0,0,0,0,1,0],3)),np=new Hl(0,.5,1,5,1),np.translate(0,-.5,0)),this.position.copy(t),this.line=new Al(tp,new xl({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new cs(np,new xi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ep.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ep,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class ip extends Pl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new ji;n.setAttribute("position",new Oi(t,3)),n.setAttribute("color",new Oi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new xl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}}const sp=new Float32Array(1),op=new Int32Array(sp.buffer),ap={toHalfFloat:function(e){sp[0]=e;const t=op[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}},lp=Math.pow(2,8),cp=[.125,.215,.35,.446,.526,.582],up=5+cp.length,hp=20,dp={[Yt]:0,[Jt]:1,[Qt]:2,[tn]:3,[nn]:4,[rn]:5,[$t]:6},pp=new xi({side:m,depthWrite:!1,depthTest:!1}),fp=new cs(new hs,pp),mp=new ch,{_lodPlanes:gp,_sizeLods:vp,_sigmas:yp}=Ap(),bp=new _i;let _p=null;const xp=(1+Math.sqrt(5))/2,wp=1/xp,Sp=[new Jn(1,1,1),new Jn(-1,1,1),new Jn(1,1,-1),new Jn(-1,1,-1),new Jn(0,xp,wp),new Jn(0,xp,-wp),new Jn(wp,0,xp),new Jn(-wp,0,xp),new Jn(xp,wp,0),new Jn(-xp,wp,0)];function Tp(e){const t=Math.max(e.r,e.g,e.b),n=Math.min(Math.max(Math.ceil(Math.log2(t)),-128),127);e.multiplyScalar(Math.pow(2,-n));return(n+128)/255}class Ep{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new Jn(0,1,0);return new Hc({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:dp[Yt]},outputEncoding:{value:dp[Yt]}},vertexShader:Lp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Op()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}(hp),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){_p=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Rp(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Pp(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<gp.length;e++)gp[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(_p),e.scissorTest=!1,kp(e,0,0,e.width,e.height)}_fromTexture(e){_p=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:fe,minFilter:fe,generateMipmaps:!1,type:Te,format:Ve,encoding:Mp(e)?e.encoding:Qt,depthBuffer:!1},n=Cp(t);return n.depthBuffer=!e,this._pingPongRenderTarget=Cp(t),n}_compileMaterial(e){const t=new cs(gp[0],e);this._renderer.compile(t,mp)}_sceneToCubeUV(e,t,n,r){const i=new vs(90,1,t,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.outputEncoding,u=a.toneMapping;a.getClearColor(bp),a.toneMapping=$,a.outputEncoding=Yt,a.autoClear=!1;let h=!1;const d=e.background;if(d){if(d.isColor){pp.color.copy(d).convertSRGBToLinear(),e.background=null;const t=Tp(pp.color);pp.opacity=t,h=!0}}else{pp.color.copy(bp).convertSRGBToLinear();const e=Tp(pp.color);pp.opacity=e,h=!0}for(let t=0;t<6;t++){const n=t%3;0==n?(i.up.set(0,s[t],0),i.lookAt(o[t],0,0)):1==n?(i.up.set(0,0,s[t]),i.lookAt(0,o[t],0)):(i.up.set(0,s[t],0),i.lookAt(0,0,o[t])),kp(r,n*lp,t>2?lp:0,lp,lp),a.setRenderTarget(r),h&&a.render(fp,i),a.render(e,i)}a.toneMapping=u,a.outputEncoding=c,a.autoClear=l}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Rp()):null==this._equirectShader&&(this._equirectShader=Pp());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new cs(gp[0],r),s=r.uniforms;s.envMap.value=e,e.isCubeTexture||s.texelSize.value.set(1/e.image.width,1/e.image.height),s.inputEncoding.value=dp[e.encoding],s.outputEncoding.value=dp[t.texture.encoding],kp(t,0,0,3*lp,2*lp),n.setRenderTarget(t),n.render(i,mp)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<up;t++){const n=Math.sqrt(yp[t]*yp[t]-yp[t-1]*yp[t-1]),r=Sp[(t-1)%Sp.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new cs(gp[r],l),u=l.uniforms,h=vp[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):hp;f>hp&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<hp;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0==e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,o&&(u.poleAxis.value=o),u.dTheta.value=d,u.mipInt.value=8-n,u.inputEncoding.value=dp[e.texture.encoding],u.outputEncoding.value=dp[e.texture.encoding];const v=vp[r];kp(t,3*Math.max(0,lp-2*v),(0===r?0:2*lp)+2*v*(r>4?r-8+4:0),3*v,2*v),a.setRenderTarget(t),a.render(c,mp)}}function Mp(e){return void 0!==e&&e.type===Te&&(e.encoding===Yt||e.encoding===Jt||e.encoding===$t)}function Ap(){const e=[],t=[],n=[];let r=8;for(let i=0;i<up;i++){const s=Math.pow(2,r);t.push(s);let o=1/s;i>4?o=cp[i-8+4-1]:0==i&&(o=0),n.push(o);const a=1/(s-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,d=6,p=3,f=2,m=1,g=new Float32Array(p*d*h),v=new Float32Array(f*d*h),y=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,p*d*e),v.set(u,f*d*e);const i=[e,e,e,e,e,e];y.set(i,m*d*e)}const b=new ji;b.setAttribute("position",new Ti(g,p)),b.setAttribute("uv",new Ti(v,f)),b.setAttribute("faceIndex",new Ti(y,m)),e.push(b),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function Cp(e){const t=new Kn(3*lp,3*lp,e);return t.texture.mapping=ce,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function kp(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Pp(){const e=new Bn(1,1);return new Hc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:dp[Yt]},outputEncoding:{value:dp[Yt]}},vertexShader:Lp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Op()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function Rp(){return new Hc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:dp[Yt]},outputEncoding:{value:dp[Yt]}},vertexShader:Lp(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Op()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1})}function Lp(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Op(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}const Np=0,Ip=1,Dp=0,Fp=1,zp=2;function Up(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Bp(e=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Vp(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Fl(e,t)}function Gp(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new tl(e)}function Zp(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Fl(e,t)}function Hp(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ll(e)}function jp(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ll(e)}function Wp(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ll(e)}function qp(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Jn(e,t,n)}function Kp(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ti(e,t).setUsage(Mn)}function Xp(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ei(e,t)}function Yp(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Mi(e,t)}function Jp(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ai(e,t)}function $p(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ci(e,t)}function Qp(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new ki(e,t)}function ef(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Pi(e,t)}function tf(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ri(e,t)}function nf(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Oi(e,t)}function rf(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ni(e,t)}function sf(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new ip(e)}function of(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Jd(e,t)}function af(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Pl(new $l(e.geometry),new xl({color:void 0!==t?t:16777215}))}function lf(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Pl(new Vc(e.geometry),new xl({color:void 0!==t?t:16777215}))}function cf(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new _u(e)}function uf(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Eu(e)}function hf(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new xs(e,n)}function df(){console.error("THREE.CanvasRenderer has been removed")}function pf(){console.error("THREE.JSONLoader has been removed.")}Au.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Au.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Ku.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},Bd.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Od.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},yu.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),vh.extractUrlBase(e)},yu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Sd.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},Sd.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Sd.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Sd.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},er.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},er.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},er.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},er.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},er.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},gr.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Es.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Md.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Un.random16=function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},Un.nearestPowerOfTwo=function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Un.floorPowerOfTwo(e)},Un.nextPowerOfTwo=function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Un.ceilPowerOfTwo(e)},Vn.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Vn.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Vn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Vn.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Vn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Vn.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Er.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Er.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Er.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Jn).setFromMatrixColumn(this,3)},Er.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Er.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Er.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Er.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Er.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Er.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Er.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Er.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Er.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Er.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Er.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Er.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Er.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Er.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Er.prototype.makeFrustum=function(e,t,n,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,s)},Er.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},ei.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Yn.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Yn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Tr.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Tr.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Tr.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},hi.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},hi.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},hi.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},hi.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},hi.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},hi.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),hi.getBarycoord(e,t,n,r,i)},hi.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),hi.getNormal(e,t,n,r)},Xu.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Xu.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ac(this,e)},Xu.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Nc(this,e)},Bn.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Bn.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Bn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Jn.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Jn.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Jn.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},Jn.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},Jn.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},Jn.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},Jn.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Jn.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Jn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},qn.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},qn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Yr.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},Yr.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Yr.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},Yr.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Yr.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Yr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),cs.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(cs.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),qt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(sl.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ml.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),hl.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Au.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),vs.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Yu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Ti.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Mn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Mn)}}}),Ti.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Mn:En),this},Ti.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ti.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ji.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},ji.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Ti(arguments[1],arguments[2])))},ji.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},ji.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},ji.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},ji.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},ji.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(ji.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(yh.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}}),Object.defineProperties(vd.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}}),Object.defineProperties(za.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Mn},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),za.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Mn:En),this},za.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ac.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Ac.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Ac.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Fa.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Object.defineProperties(fd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(pi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _i}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===v}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(qc.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Wc.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}}),Object.defineProperties(ms.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Oa.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},Oa.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},Oa.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Oa.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Oa.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Oa.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Oa.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Oa.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Oa.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Oa.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Oa.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Oa.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Oa.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Oa.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Oa.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},Oa.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Oa.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Oa.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Oa.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Oa.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Oa.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Oa.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Oa.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Oa.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Oa.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Oa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?Jt:Yt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Ta.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Kn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(jh.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new Lh).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Jh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},bs.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},bs.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},Zn.crossOrigin=void 0,Zn.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Mu;i.setCrossOrigin(this.crossOrigin);const s=i.load(e,n,void 0,r);return t&&(s.mapping=t),s},Zn.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new Tu;i.setCrossOrigin(this.crossOrigin);const s=i.load(e,n,void 0,r);return t&&(s.mapping=t),s},Zn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Zn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const ff={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function mf(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},nt2h:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t,n){var i=n.value;if("function"!=typeof i)throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(r(i)));var s=!1;return{configurable:!0,get:function(){if(s||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof i)return i;var n=i.bind(this);return s=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return n},set:function(e){i=e,delete this[t]}}),s=!1,n},set:function(e){i=e}}}function s(e){var t;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?t=Reflect.ownKeys(e.prototype):(t=Object.getOwnPropertyNames(e.prototype),"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e.prototype)))),t.forEach((function(t){if("constructor"!==t){var n=Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof n.value&&Object.defineProperty(e.prototype,t,i(e,t,n))}})),e}function o(){return 1===arguments.length?s.apply(void 0,arguments):i.apply(void 0,arguments)}n.d(t,{ZP:()=>o})},Ql6E:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:()=>i});const i=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},qLko:(e,t,n)=>{"use strict";n.d(t,{nk:()=>r});var r="@@router/LOCATION_CHANGE",i="@@router/CALL_HISTORY_METHOD",s=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{type:i,payload:{method:e,args:n}}}};s("push"),s("replace"),s("go"),s("goBack"),s("goForward")},"0TMr":(e,t,n)=>{"use strict";n.d(t,{iz:()=>m});var r=n("qLko");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw s}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){if(e&&e.query)return e;var t=e&&e.search;if("string"!=typeof t||0===t.length)return a({},e,{query:{}});var n=t.substring(1).split("&").reduce((function(e,t){var n=i(t.split("="),2);return a({},e,l({},n[0],n[1]))}),{});return a({},e,{query:n})};const u=function(e){var t=e.fromJS,n=e.merge;return function(e){var i=t({location:c(e.location),action:e.action});return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=s.type,a=s.payload;if(o===r.nk){var l=a.location,u=a.action,h=a.isFirstRendering;return h?e:n(e,{location:t(c(l)),action:u})}return e}}};var h=n("dyao");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={fromJS:function(e){return e},getIn:function(e,t){if(!e)return e;var n=t.length;if(n){for(var r=e,i=0;i<n&&r;++i)r=r[t[i]];return r}},merge:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t)},toJS:function(e){return e}};var m=u(f),g=(0,h.Z)(f);g.getLocation,g.getAction,g.getHash,g.getRouter,g.getSearch,g.createMatchSelector},dyao:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("vpSu");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}const s=function(e){var t=e.getIn,n=e.toJS,s=function(e){var r,s=n(t(e,["router"]));if(null==(r=s)||"object"!==i(r)||!t(r,["location"])||!t(r,["action"]))throw'Could not find router reducer in state tree, it must be mounted under "router"';return s},o=function(e){return n(t(s(e),["location"]))};return{getLocation:o,getAction:function(e){return n(t(s(e),["action"]))},getRouter:s,getSearch:function(e){return n(t(s(e),["location","search"]))},getHash:function(e){return n(t(s(e),["location","hash"]))},createMatchSelector:function(e){var t=null,n=null;return function(i){var s=(o(i)||{}).pathname;if(s===t)return n;t=s;var a=(0,r.LX)(s,e);return a&&n&&a.url===n.url&&a.isExact===n.isExact||(n=a),n}}}}},Krap:(e,t,n)=>{"use strict";var r=n("i803"),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,s,o,a,l,c,u=!1;t||(t={}),n=t.debug||!1;try{if(o=r(),a=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.ariaHidden="true",c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var s=i[t.format]||i.default;window.clipboardData.setData(s,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))})),document.body.appendChild(c),a.selectNodeContents(c),l.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(r){n&&console.error("unable to copy using execCommand: ",r),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(r){n&&console.error("unable to copy using clipboardData: ",r),n&&console.error("falling back to prompt"),s=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(s,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(a):l.removeAllRanges()),c&&document.body.removeChild(c),o()}return u}},OdQh:(e,t,n)=>{var r=n("X2wE"),i=n("T5j9"),s=TypeError;e.exports=function(e){if(r(e))return e;throw s(i(e)+" is not a function")}},qXVI:(e,t,n)=>{var r=n("X2wE"),i=String,s=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw s("Can't set "+i(e)+" as a prototype")}},"2URp":(e,t,n)=>{var r=n("lHcn"),i=n("ZPDX"),s=n("kkk3").f,o=r("unscopables"),a=Array.prototype;null==a[o]&&s(a,o,{configurable:!0,value:i(null)}),e.exports=function(e){a[o][e]=!0}},lN6u:(e,t,n)=>{var r=n("ZN7D"),i=String,s=TypeError;e.exports=function(e){if(r(e))return e;throw s(i(e)+" is not an object")}},rMrG:(e,t,n)=>{"use strict";var r=n("n6VR").forEach,i=n("g6/G")("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},LVgW:(e,t,n)=>{"use strict";var r=n("McwS"),i=n("3/zU"),s=n("YAnh"),o=n("Kl1D"),a=n("sB7h"),l=n("8O3+"),c=n("yfUv"),u=n("kd3z"),h=n("KOcH"),d=n("1wLL"),p=Array;e.exports=function(e){var t=s(e),n=l(this),f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m;g&&(m=r(m,f>2?arguments[2]:void 0));var v,y,b,_,x,w,S=d(t),T=0;if(!S||this===p&&a(S))for(v=c(t),y=n?new this(v):p(v);v>T;T++)w=g?m(t[T],T):t[T],u(y,T,w);else for(x=(_=h(t,S)).next,y=n?new this:[];!(b=i(x,_)).done;T++)w=g?o(_,m,[b.value,T],!0):b.value,u(y,T,w);return y.length=T,y}},D32n:(e,t,n)=>{var r=n("8zSk"),i=n("34V4"),s=n("yfUv"),o=function(e){return function(t,n,o){var a,l=r(t),c=s(l),u=i(o,c);if(e&&n!=n){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},n6VR:(e,t,n)=>{var r=n("McwS"),i=n("iY1y"),s=n("LPzo"),o=n("YAnh"),a=n("yfUv"),l=n("kjjI"),c=i([].push),u=function(e){var t=1==e,n=2==e,i=3==e,u=4==e,h=6==e,d=7==e,p=5==e||h;return function(f,m,g,v){for(var y,b,_=o(f),x=s(_),w=r(m,g),S=a(x),T=0,E=v||l,M=t?E(f,S):n||d?E(f,0):void 0;S>T;T++)if((p||T in x)&&(b=w(y=x[T],T,_),e))if(t)M[T]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return T;case 2:c(M,y)}else switch(e){case 4:return!1;case 7:c(M,y)}return h?-1:i||u?u:M}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},uQkD:(e,t,n)=>{var r=n("lf2+"),i=n("lHcn"),s=n("D99T"),o=i("species");e.exports=function(e){return s>=51||!r((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"g6/G":(e,t,n)=>{"use strict";var r=n("lf2+");e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},"8vdC":(e,t,n)=>{var r=n("OdQh"),i=n("YAnh"),s=n("LPzo"),o=n("yfUv"),a=TypeError,l=function(e){return function(t,n,l,c){r(n);var u=i(t),h=s(u),d=o(u),p=e?d-1:0,f=e?-1:1;if(l<2)for(;;){if(p in h){c=h[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw a("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in h&&(c=n(c,h[p],p,u));return c}};e.exports={left:l(!1),right:l(!0)}},"Hs/n":(e,t,n)=>{var r=n("34V4"),i=n("yfUv"),s=n("kd3z"),o=Array,a=Math.max;e.exports=function(e,t,n){for(var l=i(e),c=r(t,l),u=r(void 0===n?l:n,l),h=o(a(u-c,0)),d=0;c<u;c++,d++)s(h,d,e[c]);return h.length=d,h}},"2tOe":(e,t,n)=>{var r=n("iY1y");e.exports=r([].slice)},"7xJJ":(e,t,n)=>{var r=n("bZnQ"),i=n("8O3+"),s=n("ZN7D"),o=n("lHcn")("species"),a=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===a||r(t.prototype))||s(t)&&null===(t=t[o]))&&(t=void 0)),void 0===t?a:t}},kjjI:(e,t,n)=>{var r=n("7xJJ");e.exports=function(e,t){return new(r(e))(0===t?0:t)}},Kl1D:(e,t,n)=>{var r=n("lN6u"),i=n("BoXw");e.exports=function(e,t,n,s){try{return s?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},yVya:(e,t,n)=>{var r=n("lHcn")("iterator"),i=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var s={};s[r]=function(){return{next:function(){return{done:n=!0}}}},e(s)}catch(e){}return n}},QOGQ:(e,t,n)=>{var r=n("JEDY"),i=r({}.toString),s=r("".slice);e.exports=function(e){return s(i(e),8,-1)}},f4Zc:(e,t,n)=>{var r=n("Z1wZ"),i=n("X2wE"),s=n("QOGQ"),o=n("lHcn")("toStringTag"),a=Object,l="Arguments"==s(function(){return arguments}());e.exports=r?s:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),o))?n:l?s(t):"Object"==(r=s(t))&&i(t.callee)?"Arguments":r}},Nxxl:(e,t,n)=>{var r=n("0lV5"),i=n("3/qd"),s=n("ytoo"),o=n("kkk3");e.exports=function(e,t,n){for(var a=i(t),l=o.f,c=s.f,u=0;u<a.length;u++){var h=a[u];r(e,h)||n&&r(n,h)||l(e,h,c(t,h))}}},RhE0:(e,t,n)=>{var r=n("lf2+");e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},BkFL:(e,t,n)=>{var r=n("iY1y"),i=n("lPW2"),s=n("lBq/"),o=/"/g,a=r("".replace);e.exports=function(e,t,n,r){var l=s(i(e)),c="<"+t;return""!==n&&(c+=" "+n+'="'+a(s(r),o,"&quot;")+'"'),c+">"+l+"</"+t+">"}},WhHM:e=>{e.exports=function(e,t){return{value:e,done:t}}},MqHT:(e,t,n)=>{var r=n("SQUw"),i=n("kkk3"),s=n("3w4E");e.exports=r?function(e,t,n){return i.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},"3w4E":e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},kd3z:(e,t,n)=>{"use strict";var r=n("W0N/"),i=n("kkk3"),s=n("3w4E");e.exports=function(e,t,n){var o=r(t);o in e?i.f(e,o,s(0,n)):e[o]=n}},asmr:(e,t,n)=>{var r=n("X2wE"),i=n("kkk3"),s=n("OgbJ"),o=n("bALX");e.exports=function(e,t,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:t;if(r(n)&&s(n,c,a),a.global)l?e[t]=n:o(t,n);else{try{a.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},bALX:(e,t,n)=>{var r=n("xa9Y"),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},SQUw:(e,t,n)=>{var r=n("lf2+");e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},zSxJ:e=>{var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},R4cJ:(e,t,n)=>{var r=n("xa9Y"),i=n("ZN7D"),s=r.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},"4mIT":e=>{var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},TqSG:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"93pD":(e,t,n)=>{var r=n("R4cJ")("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},mxV9:(e,t,n)=>{var r=n("QOGQ"),i=n("xa9Y");e.exports="process"==r(i.process)},"6HZX":(e,t,n)=>{var r=n("/7YK");e.exports=r("navigator","userAgent")||""},D99T:(e,t,n)=>{var r,i,s=n("xa9Y"),o=n("6HZX"),a=s.process,l=s.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},Od0q:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},XZXb:(e,t,n)=>{var r=n("xa9Y"),i=n("ytoo").f,s=n("MqHT"),o=n("asmr"),a=n("bALX"),l=n("Nxxl"),c=n("yPkj");e.exports=function(e,t){var n,u,h,d,p,f=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[f]||a(f,{}):(r[f]||{}).prototype)for(u in t){if(d=t[u],h=e.dontCallGetSet?(p=i(n,u))&&p.value:n[u],!c(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==h){if(typeof d==typeof h)continue;l(d,h)}(e.sham||h&&h.sham)&&s(d,"sham",!0),o(n,u,d,e)}}},"lf2+":e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},wakE:(e,t,n)=>{var r=n("5kuA"),i=Function.prototype,s=i.apply,o=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(s):function(){return o.apply(s,arguments)})},McwS:(e,t,n)=>{var r=n("iY1y"),i=n("OdQh"),s=n("5kuA"),o=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},"5kuA":(e,t,n)=>{var r=n("lf2+");e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},"3/zU":(e,t,n)=>{var r=n("5kuA"),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},t23R:(e,t,n)=>{var r=n("SQUw"),i=n("0lV5"),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),l=a&&"something"===function(){}.name,c=a&&(!r||r&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},JEDY:(e,t,n)=>{var r=n("5kuA"),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);e.exports=function(e){return r?o(e):function(){return s.apply(e,arguments)}}},iY1y:(e,t,n)=>{var r=n("QOGQ"),i=n("JEDY");e.exports=function(e){if("Function"===r(e))return i(e)}},"/7YK":(e,t,n)=>{var r=n("xa9Y"),i=n("X2wE"),s=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?s(r[e]):r[e]&&r[e][t]}},"1wLL":(e,t,n)=>{var r=n("f4Zc"),i=n("Xbqk"),s=n("YhUk"),o=n("0dvV"),a=n("lHcn")("iterator");e.exports=function(e){if(!s(e))return i(e,a)||i(e,"@@iterator")||o[r(e)]}},KOcH:(e,t,n)=>{var r=n("3/zU"),i=n("OdQh"),s=n("lN6u"),o=n("T5j9"),a=n("1wLL"),l=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(i(n))return s(r(n,e));throw l(o(e)+" is not iterable")}},Xbqk:(e,t,n)=>{var r=n("OdQh"),i=n("YhUk");e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},xa9Y:e=>{var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t({})||function(){return this}()||Function("return this")()},"0lV5":(e,t,n)=>{var r=n("iY1y"),i=n("YAnh"),s=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(i(e),t)}},"8Mbo":e=>{e.exports={}},"2JlY":(e,t,n)=>{var r=n("/7YK");e.exports=r("document","documentElement")},frIg:(e,t,n)=>{var r=n("SQUw"),i=n("lf2+"),s=n("R4cJ");e.exports=!r&&!i((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},LPzo:(e,t,n)=>{var r=n("iY1y"),i=n("lf2+"),s=n("QOGQ"),o=Object,a=r("".split);e.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?a(e,""):o(e)}:o},K60T:(e,t,n)=>{var r=n("iY1y"),i=n("X2wE"),s=n("56at"),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},ExTQ:(e,t,n)=>{var r,i,s,o=n("GwjX"),a=n("xa9Y"),l=n("ZN7D"),c=n("MqHT"),u=n("0lV5"),h=n("56at"),d=n("dKVU"),p=n("8Mbo"),f="Object already initialized",m=a.TypeError,g=a.WeakMap;if(o||h.state){var v=h.state||(h.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,r=function(e,t){if(v.has(e))throw m(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},s=function(e){return v.has(e)}}else{var y=d("state");p[y]=!0,r=function(e,t){if(u(e,y))throw m(f);return t.facade=e,c(e,y,t),t},i=function(e){return u(e,y)?e[y]:{}},s=function(e){return u(e,y)}}e.exports={set:r,get:i,has:s,enforce:function(e){return s(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}}}},sB7h:(e,t,n)=>{var r=n("lHcn"),i=n("0dvV"),s=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[s]===e)}},bZnQ:(e,t,n)=>{var r=n("QOGQ");e.exports=Array.isArray||function(e){return"Array"==r(e)}},X2wE:(e,t,n)=>{var r=n("zSxJ"),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},"8O3+":(e,t,n)=>{var r=n("iY1y"),i=n("lf2+"),s=n("X2wE"),o=n("f4Zc"),a=n("/7YK"),l=n("K60T"),c=function(){},u=[],h=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=r(d.exec),f=!d.exec(c),m=function(e){if(!s(e))return!1;try{return h(c,u,e),!0}catch(e){return!1}},g=function(e){if(!s(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(d,l(e))}catch(e){return!0}};g.sham=!0,e.exports=!h||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},yPkj:(e,t,n)=>{var r=n("lf2+"),i=n("X2wE"),s=/#|\.prototype\./,o=function(e,t){var n=l[a(e)];return n==u||n!=c&&(i(t)?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},YhUk:e=>{e.exports=function(e){return null==e}},ZN7D:(e,t,n)=>{var r=n("X2wE"),i=n("zSxJ"),s=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===s}:function(e){return"object"==typeof e?null!==e:r(e)}},"RSP+":e=>{e.exports=!1},"5uRM":(e,t,n)=>{var r=n("/7YK"),i=n("X2wE"),s=n("sFHn"),o=n("ZYRC"),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&s(t.prototype,a(e))}},BoXw:(e,t,n)=>{var r=n("3/zU"),i=n("lN6u"),s=n("Xbqk");e.exports=function(e,t,n){var o,a;i(e);try{if(!(o=s(e,"return"))){if("throw"===t)throw n;return n}o=r(o,e)}catch(e){a=!0,o=e}if("throw"===t)throw n;if(a)throw o;return i(o),n}},a7E3:(e,t,n)=>{"use strict";var r=n("Q9J7").IteratorPrototype,i=n("ZPDX"),s=n("3w4E"),o=n("uOjg"),a=n("0dvV"),l=function(){return this};e.exports=function(e,t,n,c){var u=t+" Iterator";return e.prototype=i(r,{next:s(+!c,n)}),o(e,u,!1,!0),a[u]=l,e}},eiti:(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("3/zU"),s=n("RSP+"),o=n("t23R"),a=n("X2wE"),l=n("a7E3"),c=n("ahVE"),u=n("5vjv"),h=n("uOjg"),d=n("MqHT"),p=n("asmr"),f=n("lHcn"),m=n("0dvV"),g=n("Q9J7"),v=o.PROPER,y=o.CONFIGURABLE,b=g.IteratorPrototype,_=g.BUGGY_SAFARI_ITERATORS,x=f("iterator"),w="keys",S="values",T="entries",E=function(){return this};e.exports=function(e,t,n,o,f,g,M){l(n,t,o);var A,C,k,P=function(e){if(e===f&&I)return I;if(!_&&e in O)return O[e];switch(e){case w:case S:case T:return function(){return new n(this,e)}}return function(){return new n(this)}},R=t+" Iterator",L=!1,O=e.prototype,N=O[x]||O["@@iterator"]||f&&O[f],I=!_&&N||P(f),D="Array"==t&&O.entries||N;if(D&&(A=c(D.call(new e)))!==Object.prototype&&A.next&&(s||c(A)===b||(u?u(A,b):a(A[x])||p(A,x,E)),h(A,R,!0,!0),s&&(m[R]=E)),v&&f==S&&N&&N.name!==S&&(!s&&y?d(O,"name",S):(L=!0,I=function(){return i(N,this)})),f)if(C={values:P(S),keys:g?I:P(w),entries:P(T)},M)for(k in C)(_||L||!(k in O))&&p(O,k,C[k]);else r({target:t,proto:!0,forced:_||L},C);return s&&!M||O[x]===I||p(O,x,I,{name:f}),m[t]=I,C}},Q9J7:(e,t,n)=>{"use strict";var r,i,s,o=n("lf2+"),a=n("X2wE"),l=n("ZN7D"),c=n("ZPDX"),u=n("ahVE"),h=n("asmr"),d=n("lHcn"),p=n("RSP+"),f=d("iterator"),m=!1;[].keys&&("next"in(s=[].keys())?(i=u(u(s)))!==Object.prototype&&(r=i):m=!0),!l(r)||o((function(){var e={};return r[f].call(e)!==e}))?r={}:p&&(r=c(r)),a(r[f])||h(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},"0dvV":e=>{e.exports={}},yfUv:(e,t,n)=>{var r=n("f72T");e.exports=function(e){return r(e.length)}},OgbJ:(e,t,n)=>{var r=n("lf2+"),i=n("X2wE"),s=n("0lV5"),o=n("SQUw"),a=n("t23R").CONFIGURABLE,l=n("K60T"),c=n("ExTQ"),u=c.enforce,h=c.get,d=Object.defineProperty,p=o&&!r((function(){return 8!==d((function(){}),"length",{value:8}).length})),f=String(String).split("String"),m=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!s(e,"name")||a&&e.name!==t)&&(o?d(e,"name",{value:t,configurable:!0}):e.name=t),p&&n&&s(n,"arity")&&e.length!==n.arity&&d(e,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?o&&d(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=u(e);return s(r,"source")||(r.source=f.join("string"==typeof t?t:"")),e};Function.prototype.toString=m((function(){return i(this)&&h(this).source||l(this)}),"toString")},"5dYV":e=>{var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},ZPDX:(e,t,n)=>{var r,i=n("lN6u"),s=n("ElXP"),o=n("Od0q"),a=n("8Mbo"),l=n("2JlY"),c=n("R4cJ"),u=n("dKVU"),h=u("IE_PROTO"),d=function(){},p=function(e){return"<script>"+e+"</"+"script>"},f=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;m="undefined"!=typeof document?document.domain&&r?f(r):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F):f(r);for(var n=o.length;n--;)delete m.prototype[o[n]];return m()};a[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(d.prototype=i(e),n=new d,d.prototype=null,n[h]=e):n=m(),void 0===t?n:s.f(n,t)}},ElXP:(e,t,n)=>{var r=n("SQUw"),i=n("1VMW"),s=n("kkk3"),o=n("lN6u"),a=n("8zSk"),l=n("UO6o");t.f=r&&!i?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),i=l(t),c=i.length,u=0;c>u;)s.f(e,n=i[u++],r[n]);return e}},kkk3:(e,t,n)=>{var r=n("SQUw"),i=n("frIg"),s=n("1VMW"),o=n("lN6u"),a=n("W0N/"),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",d="configurable",p="writable";t.f=r?s?function(e,t,n){if(o(e),t=a(t),o(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n.writable){var r=u(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:d in n?n.configurable:r.configurable,enumerable:h in n?n.enumerable:r.enumerable,writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(o(e),t=a(t),o(n),i)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},ytoo:(e,t,n)=>{var r=n("SQUw"),i=n("3/zU"),s=n("7aC3"),o=n("3w4E"),a=n("8zSk"),l=n("W0N/"),c=n("0lV5"),u=n("frIg"),h=Object.getOwnPropertyDescriptor;t.f=r?h:function(e,t){if(e=a(e),t=l(t),u)try{return h(e,t)}catch(e){}if(c(e,t))return o(!i(s.f,e,t),e[t])}},"t/1C":(e,t,n)=>{var r=n("QOGQ"),i=n("8zSk"),s=n("P9Sa").f,o=n("Hs/n"),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"==r(e)?function(e){try{return s(e)}catch(e){return o(a)}}(e):s(i(e))}},P9Sa:(e,t,n)=>{var r=n("Acb5"),i=n("Od0q").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},e3Vz:(e,t)=>{t.f=Object.getOwnPropertySymbols},ahVE:(e,t,n)=>{var r=n("0lV5"),i=n("X2wE"),s=n("YAnh"),o=n("dKVU"),a=n("RhE0"),l=o("IE_PROTO"),c=Object,u=c.prototype;e.exports=a?c.getPrototypeOf:function(e){var t=s(e);if(r(t,l))return t[l];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof c?u:null}},sFHn:(e,t,n)=>{var r=n("iY1y");e.exports=r({}.isPrototypeOf)},Acb5:(e,t,n)=>{var r=n("iY1y"),i=n("0lV5"),s=n("8zSk"),o=n("D32n").indexOf,a=n("8Mbo"),l=r([].push);e.exports=function(e,t){var n,r=s(e),c=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&l(u,n);for(;t.length>c;)i(r,n=t[c++])&&(~o(u,n)||l(u,n));return u}},UO6o:(e,t,n)=>{var r=n("Acb5"),i=n("Od0q");e.exports=Object.keys||function(e){return r(e,i)}},"7aC3":(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},"5vjv":(e,t,n)=>{var r=n("iY1y"),i=n("lN6u"),s=n("qXVI");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),s(r),t?e(n,r):n.__proto__=r,n}}():void 0)},aohE:(e,t,n)=>{"use strict";var r=n("Z1wZ"),i=n("f4Zc");e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},IoNq:(e,t,n)=>{var r=n("3/zU"),i=n("X2wE"),s=n("ZN7D"),o=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&i(n=e.toString)&&!s(a=r(n,e)))return a;if(i(n=e.valueOf)&&!s(a=r(n,e)))return a;if("string"!==t&&i(n=e.toString)&&!s(a=r(n,e)))return a;throw o("Can't convert object to primitive value")}},"3/qd":(e,t,n)=>{var r=n("/7YK"),i=n("iY1y"),s=n("P9Sa"),o=n("e3Vz"),a=n("lN6u"),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=o.f;return n?l(t,n(e)):t}},nJ6V:(e,t,n)=>{var r=n("xa9Y");e.exports=r},r6zo:(e,t,n)=>{"use strict";var r=n("lN6u");e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},IEpE:(e,t,n)=>{var r=n("3/zU"),i=n("0lV5"),s=n("sFHn"),o=n("r6zo"),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!s(a,e)?t:r(o,e)}},lPW2:(e,t,n)=>{var r=n("YhUk"),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},uOjg:(e,t,n)=>{var r=n("kkk3").f,i=n("0lV5"),s=n("lHcn")("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!i(e,s)&&r(e,s,{configurable:!0,value:t})}},dKVU:(e,t,n)=>{var r=n("71AU"),i=n("3/QP"),s=r("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},"56at":(e,t,n)=>{var r=n("xa9Y"),i=n("bALX"),s="__core-js_shared__",o=r[s]||i(s,{});e.exports=o},"71AU":(e,t,n)=>{var r=n("RSP+"),i=n("56at");(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.5",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"})},pjyQ:(e,t,n)=>{var r=n("lf2+");e.exports=function(e){return r((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},"+Ajg":(e,t,n)=>{var r=n("iY1y"),i=n("rmN5"),s=n("lBq/"),o=n("lPW2"),a=r("".charAt),l=r("".charCodeAt),c=r("".slice),u=function(e){return function(t,n){var r,u,h=s(o(t)),d=i(n),p=h.length;return d<0||d>=p?e?"":void 0:(r=l(h,d))<55296||r>56319||d+1===p||(u=l(h,d+1))<56320||u>57343?e?a(h,d):r:e?c(h,d,d+2):u-56320+(r-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},osQd:(e,t,n)=>{var r=n("D99T"),i=n("lf2+");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},AiO1:(e,t,n)=>{var r=n("3/zU"),i=n("/7YK"),s=n("lHcn"),o=n("asmr");e.exports=function(){var e=i("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,a=s("toPrimitive");t&&!t[a]&&o(t,a,(function(e){return r(n,this)}),{arity:1})}},Ewpb:(e,t,n)=>{var r=n("osQd");e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},"34V4":(e,t,n)=>{var r=n("rmN5"),i=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):s(n,t)}},"8zSk":(e,t,n)=>{var r=n("LPzo"),i=n("lPW2");e.exports=function(e){return r(i(e))}},rmN5:(e,t,n)=>{var r=n("5dYV");e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},f72T:(e,t,n)=>{var r=n("rmN5"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},YAnh:(e,t,n)=>{var r=n("lPW2"),i=Object;e.exports=function(e){return i(r(e))}},MEXS:(e,t,n)=>{var r=n("3/zU"),i=n("ZN7D"),s=n("5uRM"),o=n("Xbqk"),a=n("IoNq"),l=n("lHcn"),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!i(e)||s(e))return e;var n,l=o(e,u);if(l){if(void 0===t&&(t="default"),n=r(l,e,t),!i(n)||s(n))return n;throw c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},"W0N/":(e,t,n)=>{var r=n("MEXS"),i=n("5uRM");e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},Z1wZ:(e,t,n)=>{var r={};r[n("lHcn")("toStringTag")]="z",e.exports="[object z]"===String(r)},"lBq/":(e,t,n)=>{var r=n("f4Zc"),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},T5j9:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},"3/QP":(e,t,n)=>{var r=n("iY1y"),i=0,s=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+s,36)}},ZYRC:(e,t,n)=>{var r=n("osQd");e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"1VMW":(e,t,n)=>{var r=n("SQUw"),i=n("lf2+");e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},GwjX:(e,t,n)=>{var r=n("xa9Y"),i=n("X2wE"),s=r.WeakMap;e.exports=i(s)&&/native code/.test(String(s))},Y44C:(e,t,n)=>{var r=n("nJ6V"),i=n("0lV5"),s=n("Lcfo"),o=n("kkk3").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||o(t,e,{value:s.f(e)})}},Lcfo:(e,t,n)=>{var r=n("lHcn");t.f=r},lHcn:(e,t,n)=>{var r=n("xa9Y"),i=n("71AU"),s=n("0lV5"),o=n("3/QP"),a=n("osQd"),l=n("ZYRC"),c=i("wks"),u=r.Symbol,h=u&&u.for,d=l?u:u&&u.withoutSetter||o;e.exports=function(e){if(!s(c,e)||!a&&"string"!=typeof c[e]){var t="Symbol."+e;a&&s(u,e)?c[e]=u[e]:c[e]=l&&h?h(t):d(t)}return c[e]}},"8Rbz":(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("lf2+"),s=n("bZnQ"),o=n("ZN7D"),a=n("YAnh"),l=n("yfUv"),c=n("4mIT"),u=n("kd3z"),h=n("kjjI"),d=n("uQkD"),p=n("lHcn"),f=n("D99T"),m=p("isConcatSpreadable"),g=f>=51||!i((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=d("concat"),y=function(e){if(!o(e))return!1;var t=e[m];return void 0!==t?!!t:s(e)};r({target:"Array",proto:!0,arity:1,forced:!g||!v},{concat:function(e){var t,n,r,i,s,o=a(this),d=h(o,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(y(s=-1===t?o:arguments[t]))for(i=l(s),c(p+i),n=0;n<i;n++,p++)n in s&&u(d,p,s[n]);else c(p+1),u(d,p++,s);return d.length=p,d}})},tfoZ:(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("n6VR").filter;r({target:"Array",proto:!0,forced:!n("uQkD")("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},Sdr3:(e,t,n)=>{var r=n("XZXb"),i=n("LVgW");r({target:"Array",stat:!0,forced:!n("yVya")((function(e){Array.from(e)}))},{from:i})},ZPWF:(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("iY1y"),s=n("D32n").indexOf,o=n("g6/G"),a=i([].indexOf),l=!!a&&1/a([1],1,-0)<0,c=o("indexOf");r({target:"Array",proto:!0,forced:l||!c},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return l?a(this,e,t)||0:s(this,e,t)}})},MNqA:(e,t,n)=>{"use strict";var r=n("8zSk"),i=n("2URp"),s=n("0dvV"),o=n("ExTQ"),a=n("kkk3").f,l=n("eiti"),c=n("WhHM"),u=n("RSP+"),h=n("SQUw"),d="Array Iterator",p=o.set,f=o.getterFor(d);e.exports=l(Array,"Array",(function(e,t){p(this,{type:d,target:r(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,c(void 0,!0)):c("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values");var m=s.Arguments=s.Array;if(i("keys"),i("values"),i("entries"),!u&&h&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(e){}},Iweo:(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("n6VR").map;r({target:"Array",proto:!0,forced:!n("uQkD")("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},EgfB:(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("8vdC").left,s=n("g6/G"),o=n("D99T"),a=n("mxV9");r({target:"Array",proto:!0,forced:!s("reduce")||!a&&o>79&&o<83},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},Fc4Q:(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("bZnQ"),s=n("8O3+"),o=n("ZN7D"),a=n("34V4"),l=n("yfUv"),c=n("8zSk"),u=n("kd3z"),h=n("lHcn"),d=n("uQkD"),p=n("2tOe"),f=d("slice"),m=h("species"),g=Array,v=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var n,r,h,d=c(this),f=l(d),y=a(e,f),b=a(void 0===t?f:t,f);if(i(d)&&(n=d.constructor,(s(n)&&(n===g||i(n.prototype))||o(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return p(d,y,b);for(r=new(void 0===n?g:n)(v(b-y,0)),h=0;y<b;y++,h++)y in d&&u(r,h,d[y]);return r.length=h,r}})},"r6z/":(e,t,n)=>{var r=n("SQUw"),i=n("t23R").EXISTS,s=n("iY1y"),o=n("kkk3").f,a=Function.prototype,l=s(a.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=s(c.exec);r&&!i&&o(a,"name",{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(e){return""}}})},KNY6:(e,t,n)=>{var r=n("XZXb"),i=n("/7YK"),s=n("wakE"),o=n("3/zU"),a=n("iY1y"),l=n("lf2+"),c=n("bZnQ"),u=n("X2wE"),h=n("ZN7D"),d=n("5uRM"),p=n("2tOe"),f=n("osQd"),m=i("JSON","stringify"),g=a(/./.exec),v=a("".charAt),y=a("".charCodeAt),b=a("".replace),_=a(1..toString),x=/[\uD800-\uDFFF]/g,w=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,T=!f||l((function(){var e=i("Symbol")();return"[null]"!=m([e])||"{}"!=m({a:e})||"{}"!=m(Object(e))})),E=l((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),M=function(e,t){var n=p(arguments),r=t;if((h(t)||void 0!==e)&&!d(e))return c(t)||(t=function(e,t){if(u(r)&&(t=o(r,this,e,t)),!d(t))return t}),n[1]=t,s(m,null,n)},A=function(e,t,n){var r=v(n,t-1),i=v(n,t+1);return g(w,e)&&!g(S,i)||g(S,e)&&!g(w,r)?"\\u"+_(y(e,0),16):e};m&&r({target:"JSON",stat:!0,arity:3,forced:T||E},{stringify:function(e,t,n){var r=p(arguments),i=s(T?M:m,null,r);return E&&"string"==typeof i?b(i,x,A):i}})},QXY0:(e,t,n)=>{var r=n("XZXb"),i=n("lf2+"),s=n("8zSk"),o=n("ytoo").f,a=n("SQUw"),l=i((function(){o(1)}));r({target:"Object",stat:!0,forced:!a||l,sham:!a},{getOwnPropertyDescriptor:function(e,t){return o(s(e),t)}})},tqF4:(e,t,n)=>{var r=n("XZXb"),i=n("SQUw"),s=n("3/qd"),o=n("8zSk"),a=n("ytoo"),l=n("kd3z");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),i=a.f,c=s(r),u={},h=0;c.length>h;)void 0!==(n=i(r,t=c[h++]))&&l(u,t,n);return u}})},F1Z7:(e,t,n)=>{var r=n("XZXb"),i=n("osQd"),s=n("lf2+"),o=n("e3Vz"),a=n("YAnh");r({target:"Object",stat:!0,forced:!i||s((function(){o.f(1)}))},{getOwnPropertySymbols:function(e){var t=o.f;return t?t(a(e)):[]}})},gYyb:(e,t,n)=>{var r=n("XZXb"),i=n("YAnh"),s=n("UO6o");r({target:"Object",stat:!0,forced:n("lf2+")((function(){s(1)}))},{keys:function(e){return s(i(e))}})},"+IZh":(e,t,n)=>{var r=n("Z1wZ"),i=n("asmr"),s=n("aohE");r||i(Object.prototype,"toString",s,{unsafe:!0})},y1fr:(e,t,n)=>{"use strict";var r=n("t23R").PROPER,i=n("asmr"),s=n("lN6u"),o=n("lBq/"),a=n("lf2+"),l=n("IEpE"),c="toString",u=RegExp.prototype.toString,h=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=r&&u.name!=c;(h||d)&&i(RegExp.prototype,c,(function(){var e=s(this);return"/"+o(e.source)+"/"+o(l(e))}),{unsafe:!0})},yHjf:(e,t,n)=>{"use strict";var r=n("+Ajg").charAt,i=n("lBq/"),s=n("ExTQ"),o=n("eiti"),a=n("WhHM"),l="String Iterator",c=s.set,u=s.getterFor(l);o(String,"String",(function(e){c(this,{type:l,string:i(e),index:0})}),(function(){var e,t=u(this),n=t.string,i=t.index;return i>=n.length?a(void 0,!0):(e=r(n,i),t.index+=e.length,a(e,!1))}))},vIIG:(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("BkFL");r({target:"String",proto:!0,forced:n("pjyQ")("sub")},{sub:function(){return i(this,"sub","","")}})},"+m3w":(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("xa9Y"),s=n("3/zU"),o=n("iY1y"),a=n("RSP+"),l=n("SQUw"),c=n("osQd"),u=n("lf2+"),h=n("0lV5"),d=n("sFHn"),p=n("lN6u"),f=n("8zSk"),m=n("W0N/"),g=n("lBq/"),v=n("3w4E"),y=n("ZPDX"),b=n("UO6o"),_=n("P9Sa"),x=n("t/1C"),w=n("e3Vz"),S=n("ytoo"),T=n("kkk3"),E=n("ElXP"),M=n("7aC3"),A=n("asmr"),C=n("71AU"),k=n("dKVU"),P=n("8Mbo"),R=n("3/QP"),L=n("lHcn"),O=n("Lcfo"),N=n("Y44C"),I=n("AiO1"),D=n("uOjg"),F=n("ExTQ"),z=n("n6VR").forEach,U=k("hidden"),B="Symbol",V=F.set,G=F.getterFor(B),Z=Object.prototype,H=i.Symbol,j=H&&H.prototype,W=i.TypeError,q=i.QObject,K=S.f,X=T.f,Y=x.f,J=M.f,$=o([].push),Q=C("symbols"),ee=C("op-symbols"),te=C("wks"),ne=!q||!q.prototype||!q.prototype.findChild,re=l&&u((function(){return 7!=y(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=K(Z,t);r&&delete Z[t],X(e,t,n),r&&e!==Z&&X(Z,t,r)}:X,ie=function(e,t){var n=Q[e]=y(j);return V(n,{type:B,tag:e,description:t}),l||(n.description=t),n},se=function(e,t,n){e===Z&&se(ee,t,n),p(e);var r=m(t);return p(n),h(Q,r)?(n.enumerable?(h(e,U)&&e[U][r]&&(e[U][r]=!1),n=y(n,{enumerable:v(0,!1)})):(h(e,U)||X(e,U,v(1,{})),e[U][r]=!0),re(e,r,n)):X(e,r,n)},oe=function(e,t){p(e);var n=f(t),r=b(n).concat(ue(n));return z(r,(function(t){l&&!s(ae,n,t)||se(e,t,n[t])})),e},ae=function(e){var t=m(e),n=s(J,this,t);return!(this===Z&&h(Q,t)&&!h(ee,t))&&(!(n||!h(this,t)||!h(Q,t)||h(this,U)&&this[U][t])||n)},le=function(e,t){var n=f(e),r=m(t);if(n!==Z||!h(Q,r)||h(ee,r)){var i=K(n,r);return!i||!h(Q,r)||h(n,U)&&n[U][r]||(i.enumerable=!0),i}},ce=function(e){var t=Y(f(e)),n=[];return z(t,(function(e){h(Q,e)||h(P,e)||$(n,e)})),n},ue=function(e){var t=e===Z,n=Y(t?ee:f(e)),r=[];return z(n,(function(e){!h(Q,e)||t&&!h(Z,e)||$(r,Q[e])})),r};c||(A(j=(H=function(){if(d(j,this))throw W("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=R(e),n=function(e){this===Z&&s(n,ee,e),h(this,U)&&h(this[U],t)&&(this[U][t]=!1),re(this,t,v(1,e))};return l&&ne&&re(Z,t,{configurable:!0,set:n}),ie(t,e)}).prototype,"toString",(function(){return G(this).tag})),A(H,"withoutSetter",(function(e){return ie(R(e),e)})),M.f=ae,T.f=se,E.f=oe,S.f=le,_.f=x.f=ce,w.f=ue,O.f=function(e){return ie(L(e),e)},l&&(X(j,"description",{configurable:!0,get:function(){return G(this).description}}),a||A(Z,"propertyIsEnumerable",ae,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!c,sham:!c},{Symbol:H}),z(b(te),(function(e){N(e)})),r({target:B,stat:!0,forced:!c},{useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!l},{create:function(e,t){return void 0===t?y(e):oe(y(e),t)},defineProperty:se,defineProperties:oe,getOwnPropertyDescriptor:le}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ce}),I(),D(H,B),P[U]=!0},OB0K:(e,t,n)=>{"use strict";var r=n("XZXb"),i=n("SQUw"),s=n("xa9Y"),o=n("iY1y"),a=n("0lV5"),l=n("X2wE"),c=n("sFHn"),u=n("lBq/"),h=n("kkk3").f,d=n("Nxxl"),p=s.Symbol,f=p&&p.prototype;if(i&&l(p)&&(!("description"in f)||void 0!==p().description)){var m={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=c(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(m[t]=!0),t};d(g,p),g.prototype=f,f.constructor=g;var v="Symbol(test)"==String(p("test")),y=o(f.valueOf),b=o(f.toString),_=/^Symbol\((.*)\)[^)]+$/,x=o("".replace),w=o("".slice);h(f,"description",{configurable:!0,get:function(){var e=y(this);if(a(m,e))return"";var t=b(e),n=v?w(t,7,-1):x(t,_,"$1");return""===n?void 0:n}}),r({global:!0,constructor:!0,forced:!0},{Symbol:g})}},WcOR:(e,t,n)=>{var r=n("XZXb"),i=n("/7YK"),s=n("0lV5"),o=n("lBq/"),a=n("71AU"),l=n("Ewpb"),c=a("string-to-symbol-registry"),u=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{for:function(e){var t=o(e);if(s(c,t))return c[t];var n=i("Symbol")(t);return c[t]=n,u[n]=t,n}})},"+IFi":(e,t,n)=>{n("Y44C")("iterator")},FLPt:(e,t,n)=>{n("+m3w"),n("WcOR"),n("Fbli"),n("KNY6"),n("F1Z7")},Fbli:(e,t,n)=>{var r=n("XZXb"),i=n("0lV5"),s=n("5uRM"),o=n("T5j9"),a=n("71AU"),l=n("Ewpb"),c=a("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!l},{keyFor:function(e){if(!s(e))throw TypeError(o(e)+" is not a symbol");if(i(c,e))return c[e]}})},soe2:(e,t,n)=>{var r=n("xa9Y"),i=n("TqSG"),s=n("93pD"),o=n("rMrG"),a=n("MqHT"),l=function(e){if(e&&e.forEach!==o)try{a(e,"forEach",o)}catch(t){e.forEach=o}};for(var c in i)i[c]&&l(r[c]&&r[c].prototype);l(s)},KYkv:(e,t,n)=>{var r=n("xa9Y"),i=n("TqSG"),s=n("93pD"),o=n("MNqA"),a=n("MqHT"),l=n("lHcn"),c=l("iterator"),u=l("toStringTag"),h=o.values,d=function(e,t){if(e){if(e[c]!==h)try{a(e,c,h)}catch(t){e[c]=h}if(e[u]||a(e,u,t),i[t])for(var n in o)if(e[n]!==o[n])try{a(e,n,o[n])}catch(t){e[n]=o[n]}}};for(var p in i)d(r[p]&&r[p].prototype,p);d(s,"DOMTokenList")},xqvs:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},GsOf:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},"q/Z8":e=>{"use strict";e.exports=function(e){return e[1]}},"2U48":(e,t,n)=>{"use strict";function r(e,t){var n=e.__state.conversionName.toString(),r=Math.round(e.r),i=Math.round(e.g),s=Math.round(e.b),o=e.a,a=Math.round(e.h),l=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var u=e.hex.toString(16);u.length<6;)u="0"+u;return"#"+u}return"CSS_RGB"===n?"rgb("+r+","+i+","+s+")":"CSS_RGBA"===n?"rgba("+r+","+i+","+s+","+o+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+r+","+i+","+s+"]":"RGBA_ARRAY"===n?"["+r+","+i+","+s+","+o+"]":"RGB_OBJ"===n?"{r:"+r+",g:"+i+",b:"+s+"}":"RGBA_OBJ"===n?"{r:"+r+",g:"+i+",b:"+s+",a:"+o+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+l+",v:"+c+",a:"+o+"}":"unknown format"}n.d(t,{XS:()=>de});var i=Array.prototype.forEach,s=Array.prototype.slice,o={BREAK:{},extend:function(e){return this.each(s.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(s.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=s.call(arguments);return function(){for(var t=s.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(i&&e.forEach&&e.forEach===i)e.forEach(t,n);else if(e.length===e.length+0){var r,s=void 0;for(s=0,r=e.length;s<r;s++)if(s in e&&t.call(n,e[s],s)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var i=this,s=arguments;function o(){r=null,n||e.apply(i,s)}var a=n||!r;clearTimeout(r),r=setTimeout(o,t),a&&e.apply(i,s)}},toArray:function(e){return e.toArray?e.toArray():s.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},a=[{litmus:o.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:r},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:r},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r}}},{litmus:o.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:o.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:o.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(o.isNumber(e.r)&&o.isNumber(e.g)&&o.isNumber(e.b)&&o.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(o.isNumber(e.r)&&o.isNumber(e.g)&&o.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(o.isNumber(e.h)&&o.isNumber(e.s)&&o.isNumber(e.v)&&o.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(o.isNumber(e.h)&&o.isNumber(e.s)&&o.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],l=void 0,c=void 0,u=function(){c=!1;var e=arguments.length>1?o.toArray(arguments):arguments[0];return o.each(a,(function(t){if(t.litmus(e))return o.each(t.conversions,(function(t,n){if(l=t.read(e),!1===c&&!1!==l)return c=l,l.conversionName=n,l.conversion=t,o.BREAK})),o.BREAK})),c},h=void 0,d={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),s=n*(1-t),o=n*(1-i*t),a=n*(1-(1-i)*t),l=[[n,a,s],[o,n,s],[s,n,a],[s,o,n],[a,s,n],[n,s,o]][r];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),s=i-r,o=void 0;return 0===i?{h:NaN,s:0,v:0}:(o=e===i?(t-n)/s:t===i?2+(n-e)/s:4+(e-t)/s,(o/=6)<0&&(o+=1),{h:360*o,s:s/i,v:i/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(h=8*t)|e&~(255<<h)}},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},v=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},y=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},b=function(){function e(){if(f(this,e),this.__state=u.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return m(e,[{key:"toString",value:function(){return r(this)}},{key:"toHexString",value:function(){return r(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function _(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||b.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(b.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function x(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||b.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(b.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}b.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=d.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");o.extend(e.__state,d.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},b.recalculateHSV=function(e){var t=d.rgb_to_hsv(e.r,e.g,e.b);o.extend(e.__state,{s:t.s,v:t.v}),o.isNaN(t.h)?o.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},b.COMPONENTS=["r","g","b","h","s","v","hex","a"],_(b.prototype,"r",2),_(b.prototype,"g",1),_(b.prototype,"b",0),x(b.prototype,"h"),x(b.prototype,"s"),x(b.prototype,"v"),Object.defineProperty(b.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(b.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=d.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var w=function(){function e(t,n){f(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return m(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),S={};o.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){o.each(e,(function(e){S[e]=t}))}));var T=/(\d+(\.\d+)?)px/;function E(e){if("0"===e||o.isUndefined(e))return 0;var t=e.match(T);return o.isNull(t)?0:parseFloat(t[1])}var M={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,i=t;o.isUndefined(i)&&(i=!0),o.isUndefined(r)&&(r=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var i=n||{},s=S[t];if(!s)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var l=i.x||i.clientX||0,c=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=a.initKeyboardEvent||a.initKeyEvent;o.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}o.defaults(a,r),e.dispatchEvent(a)},bind:function(e,t,n,r){var i=r||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),M},unbind:function(e,t,n,r){var i=r||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),M},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return M},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return M},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return E(t["border-left-width"])+E(t["border-right-width"])+E(t["padding-left"])+E(t["padding-right"])+E(t.width)},getHeight:function(e){var t=getComputedStyle(e);return E(t["border-top-width"])+E(t["border-bottom-width"])+E(t["padding-top"])+E(t["padding-bottom"])+E(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},A=function(e){function t(e,n){f(this,t);var r=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),M.bind(r.__checkbox,"change",(function(){i.setValue(!i.__prev)}),!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return v(t,e),m(t,[{key:"setValue",value:function(e){var n=g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(w),C=function(e){function t(e,n,r){f(this,t);var i=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=r,a=i;if(i.__select=document.createElement("select"),o.isArray(s)){var l={};o.each(s,(function(e){l[e]=e})),s=l}return o.each(s,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)})),i.updateDisplay(),M.bind(i.__select,"change",(function(){var e=this.options[this.selectedIndex].value;a.setValue(e)})),i.domElement.appendChild(i.__select),i}return v(t,e),m(t,[{key:"setValue",value:function(e){var n=g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return M.isActive(this.__select)?this:(this.__select.value=this.getValue(),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(w),k=function(e){function t(e,n){f(this,t);var r=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;function s(){i.setValue(i.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),M.bind(r.__input,"keyup",s),M.bind(r.__input,"change",s),M.bind(r.__input,"blur",(function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())})),M.bind(r.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return v(t,e),m(t,[{key:"updateDisplay",value:function(){return M.isActive(this.__input)||(this.__input.value=this.getValue()),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(w);function P(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var R=function(e){function t(e,n,r){f(this,t);var i=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=r||{};return i.__min=s.min,i.__max=s.max,i.__step=s.step,o.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=P(i.__impliedStep),i}return v(t,e),m(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=P(e),this}}]),t}(w);var L=function(e){function t(e,n,r){f(this,t);var i=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));i.__truncationSuspended=!1;var s=i,a=void 0;function l(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(e){var t=a-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),a=e.clientY}function u(){M.unbind(window,"mousemove",c),M.unbind(window,"mouseup",u),l()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),M.bind(i.__input,"change",(function(){var e=parseFloat(s.__input.value);o.isNaN(e)||s.setValue(e)})),M.bind(i.__input,"blur",(function(){l()})),M.bind(i.__input,"mousedown",(function(e){M.bind(window,"mousemove",c),M.bind(window,"mouseup",u),a=e.clientY})),M.bind(i.__input,"keydown",(function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,l())})),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return v(t,e),m(t,[{key:"updateDisplay",value:function(){var e,n,r;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,r=Math.pow(10,n),Math.round(e*r)/r),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(R);function O(e,t,n,r,i){return r+(e-t)/(n-t)*(i-r)}var N=function(e){function t(e,n,r,i,s){f(this,t);var o=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:r,max:i,step:s})),a=o;function l(e){e.preventDefault();var t=a.__background.getBoundingClientRect();return a.setValue(O(e.clientX,t.left,t.right,a.__min,a.__max)),!1}function c(){M.unbind(window,"mousemove",l),M.unbind(window,"mouseup",c),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function u(e){var t=e.touches[0].clientX,n=a.__background.getBoundingClientRect();a.setValue(O(t,n.left,n.right,a.__min,a.__max))}function h(){M.unbind(window,"touchmove",u),M.unbind(window,"touchend",h),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return o.__background=document.createElement("div"),o.__foreground=document.createElement("div"),M.bind(o.__background,"mousedown",(function(e){document.activeElement.blur(),M.bind(window,"mousemove",l),M.bind(window,"mouseup",c),l(e)})),M.bind(o.__background,"touchstart",(function(e){if(1!==e.touches.length)return;M.bind(window,"touchmove",u),M.bind(window,"touchend",h),u(e)})),M.addClass(o.__background,"slider"),M.addClass(o.__foreground,"slider-fg"),o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return v(t,e),m(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(R),I=function(e){function t(e,n,r){f(this,t);var i=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===r?"Fire":r,M.bind(i.__button,"click",(function(e){return e.preventDefault(),s.fire(),!1})),M.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return v(t,e),m(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(w),D=function(e){function t(e,n){f(this,t);var r=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.__color=new b(r.getValue()),r.__temp=new b(0);var i=r;r.domElement=document.createElement("div"),M.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",M.bind(r.__input,"keydown",(function(e){13===e.keyCode&&p.call(this)})),M.bind(r.__input,"blur",p),M.bind(r.__selector,"mousedown",(function(){M.addClass(this,"drag").bind(window,"mouseup",(function(){M.removeClass(i.__selector,"drag")}))})),M.bind(r.__selector,"touchstart",(function(){M.addClass(this,"drag").bind(window,"touchend",(function(){M.removeClass(i.__selector,"drag")}))}));var s,a=document.createElement("div");function l(e){g(e),M.bind(window,"mousemove",g),M.bind(window,"touchmove",g),M.bind(window,"mouseup",h),M.bind(window,"touchend",h)}function c(e){v(e),M.bind(window,"mousemove",v),M.bind(window,"touchmove",v),M.bind(window,"mouseup",d),M.bind(window,"touchend",d)}function h(){M.unbind(window,"mousemove",g),M.unbind(window,"touchmove",g),M.unbind(window,"mouseup",h),M.unbind(window,"touchend",h),m()}function d(){M.unbind(window,"mousemove",v),M.unbind(window,"touchmove",v),M.unbind(window,"mouseup",d),M.unbind(window,"touchend",d),m()}function p(){var e=u(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function m(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function g(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,r=n.clientX,s=n.clientY,o=(r-t.left)/(t.right-t.left),a=1-(s-t.top)/(t.bottom-t.top);return a>1?a=1:a<0&&(a=0),o>1?o=1:o<0&&(o=0),i.__color.v=a,i.__color.s=o,i.setValue(i.__color.toOriginal()),!1}function v(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),i.__color.h=360*n,i.setValue(i.__color.toOriginal()),!1}return o.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(a.style,{width:"100%",height:"100%",background:"none"}),z(a,"top","rgba(0,0,0,0)","#000"),o.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(s=r.__hue_field).style.background="",s.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",s.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),M.bind(r.__saturation_field,"mousedown",l),M.bind(r.__saturation_field,"touchstart",l),M.bind(r.__field_knob,"mousedown",l),M.bind(r.__field_knob,"touchstart",l),M.bind(r.__hue_field,"mousedown",c),M.bind(r.__hue_field,"touchstart",c),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return v(t,e),m(t,[{key:"updateDisplay",value:function(){var e=u(this.getValue());if(!1!==e){var t=!1;o.each(b.COMPONENTS,(function(n){if(!o.isUndefined(e[n])&&!o.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&o.extend(this.__color.__state,e)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,r=255-n;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,z(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),o.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+r+","+r+","+r+",.7)"})}}]),t}(w),F=["-moz-","-o-","-webkit-","-ms-",""];function z(e,t,n,r){e.style.background="",o.each(F,(function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "}))}var U=function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(r)}catch(e){}},B='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',V=function(e,t){var n=e[t];return o.isArray(arguments[2])||o.isObject(arguments[2])?new C(e,t,arguments[2]):o.isNumber(n)?o.isNumber(arguments[2])&&o.isNumber(arguments[3])?o.isNumber(arguments[4])?new N(e,t,arguments[2],arguments[3],arguments[4]):new N(e,t,arguments[2],arguments[3]):o.isNumber(arguments[4])?new L(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new L(e,t,{min:arguments[2],max:arguments[3]}):o.isString(n)?new k(e,t):o.isFunction(n)?new I(e,t,""):o.isBoolean(n)?new A(e,t):null};var G=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},Z=function(){function e(){f(this,e),this.backgroundElement=document.createElement("div"),o.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),M.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),o.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;M.bind(this.backgroundElement,"click",(function(){t.hide()}))}return m(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),o.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",M.unbind(e.domElement,"webkitTransitionEnd",t),M.unbind(e.domElement,"transitionend",t),M.unbind(e.domElement,"oTransitionEnd",t)};M.bind(this.domElement,"webkitTransitionEnd",t),M.bind(this.domElement,"transitionend",t),M.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-M.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-M.getHeight(this.domElement)/2+"px"}}]),e}(),H=function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");U(H);var j="Default",W=function(){try{return!!window.localStorage}catch(e){return!1}}(),q=void 0,K=!0,X=void 0,Y=!1,J=[],$=function e(t){var n=this,r=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),M.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],r=o.defaults(r,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),r=o.defaults(r,{resizable:r.autoPlace,hideable:r.autoPlace}),o.isUndefined(r.load)?r.load={preset:j}:r.preset&&(r.load.preset=r.preset),o.isUndefined(r.parent)&&r.hideable&&J.push(this),r.resizable=o.isUndefined(r.parent)&&r.resizable,r.autoPlace&&o.isUndefined(r.scrollable)&&(r.scrollable=!0);var i,s=W&&"true"===localStorage.getItem(ie(this,"isLocal")),a=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return r.parent}},scrollable:{get:function(){return r.scrollable}},autoPlace:{get:function(){return r.autoPlace}},closeOnTop:{get:function(){return r.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:r.load.preset},set:function(e){n.parent?n.getRoot().preset=e:r.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return r.width},set:function(e){r.width=e,ce(n,e)}},name:{get:function(){return r.name},set:function(e){r.name=e,l&&(l.innerHTML=r.name)}},closed:{get:function(){return r.closed},set:function(t){r.closed=t,r.closed?M.addClass(n.__ul,e.CLASS_CLOSED):M.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return r.load}},useLocalStorage:{get:function(){return s},set:function(e){W&&(s=e,e?M.bind(window,"unload",a):M.unbind(window,"unload",a),localStorage.setItem(ie(n,"isLocal"),e))}}}),o.isUndefined(r.parent)){if(this.closed=r.closed||!1,M.addClass(this.domElement,e.CLASS_MAIN),M.makeSelectable(this.domElement,!1),W&&s){n.useLocalStorage=!0;var c=localStorage.getItem(ie(this,"gui"));c&&(r.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,M.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),r.closeOnTop?(M.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(M.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),M.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===r.closed&&(r.closed=!0);var u=document.createTextNode(r.name);M.addClass(u,"controller-name"),l=Q(n,u);M.addClass(this.__ul,e.CLASS_CLOSED),M.addClass(l,"title"),M.bind(l,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),r.closed||(this.closed=!1)}r.autoPlace&&(o.isUndefined(r.parent)&&(K&&(X=document.createElement("div"),M.addClass(X,"dg"),M.addClass(X,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(X),K=!1),X.appendChild(this.domElement),M.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||ce(n,r.width)),this.__resizeHandler=function(){n.onResizeDebounced()},M.bind(window,"resize",this.__resizeHandler),M.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),M.bind(this.__ul,"transitionend",this.__resizeHandler),M.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),r.resizable&&le(this),a=function(){W&&"true"===localStorage.getItem(ie(n,"isLocal"))&&localStorage.setItem(ie(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=a,r.parent||((i=n.getRoot()).width+=1,o.defer((function(){i.width-=1})))};function Q(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function ee(e){M.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&M.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function te(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function ne(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var s=n.load.remembered,o=void 0;if(s[e.preset])o=s[e.preset];else{if(!s.Default)return;o=s.Default}if(o[r]&&void 0!==o[r][t.property]){var a=o[r][t.property];t.initialValue=a,t.setValue(a)}}}}function re(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(r.color)i=new D(t,n);else{var s=[t,n].concat(r.factoryArgs);i=V.apply(e,s)}r.before instanceof w&&(r.before=r.before.__li),ne(e,i),M.addClass(i.domElement,"c");var a=document.createElement("span");M.addClass(a,"property-name"),a.innerHTML=i.property;var l=document.createElement("div");l.appendChild(a),l.appendChild(i.domElement);var c=Q(e,l,r.before);return M.addClass(c,$.CLASS_CONTROLLER_ROW),i instanceof D?M.addClass(c,"color"):M.addClass(c,p(i.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,o.extend(n,{options:function(t){if(arguments.length>1){var r=n.__li.nextElementSibling;return n.remove(),re(e,n.object,n.property,{before:r,factoryArgs:[o.toArray(arguments)]})}if(o.isArray(t)||o.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),re(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof N){var r=new L(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});o.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(r,e),t.apply(n,e)}})),M.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof L){var i=function(t){if(o.isNumber(n.__min)&&o.isNumber(n.__max)){var r=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var s=re(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return s.name(r),i&&s.listen(),s}return t};n.min=o.compose(i,n.min),n.max=o.compose(i,n.max)}else n instanceof A?(M.bind(t,"click",(function(){M.fakeEvent(n.__checkbox,"click")})),M.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof I?(M.bind(t,"click",(function(){M.fakeEvent(n.__button,"click")})),M.bind(t,"mouseover",(function(){M.addClass(n.__button,"hover")})),M.bind(t,"mouseout",(function(){M.removeClass(n.__button,"hover")}))):n instanceof D&&(M.addClass(t,"color"),n.updateDisplay=o.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=o.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&te(e.getRoot(),!0),t}),n.setValue)}(e,c,i),e.__controllers.push(i),i}function ie(e,t){return document.location.href+"."+t}function se(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function oe(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ae(e){var t=e.__save_row=document.createElement("li");M.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),M.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",M.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",M.addClass(r,"button"),M.addClass(r,"save");var i=document.createElement("span");i.innerHTML="New",M.addClass(i,"button"),M.addClass(i,"save-as");var s=document.createElement("span");s.innerHTML="Revert",M.addClass(s,"button"),M.addClass(s,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?o.each(e.load.remembered,(function(t,n){se(e,n,n===e.preset)})):se(e,j,!1),M.bind(a,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(i),t.appendChild(s),W){var l=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(ie(0,"isLocal"))&&c.setAttribute("checked","checked"),oe(e,l),M.bind(c,"change",(function(){e.useLocalStorage=!e.useLocalStorage,oe(e,l)}))}var u=document.getElementById("dg-new-constructor");M.bind(u,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||q.hide()})),M.bind(n,"click",(function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),q.show(),u.focus(),u.select()})),M.bind(r,"click",(function(){e.save()})),M.bind(i,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),M.bind(s,"click",(function(){e.revert()}))}function le(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function r(){M.removeClass(e.__closeButton,$.CLASS_DRAG),M.unbind(window,"mousemove",n),M.unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),t=i.clientX,M.addClass(e.__closeButton,$.CLASS_DRAG),M.bind(window,"mousemove",n),M.bind(window,"mouseup",r),!1}e.__resize_handle=document.createElement("div"),o.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),M.bind(e.__resize_handle,"mousedown",i),M.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function ce(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function ue(e,t){var n={};return o.each(e.__rememberedObjects,(function(r,i){var s={},a=e.__rememberedObjectIndecesToControllers[i];o.each(a,(function(e,n){s[n]=t?e.initialValue:e.getValue()})),n[i]=s})),n}function he(e){0!==e.length&&G.call(window,(function(){he(e)})),o.each(e,(function(e){e.updateDisplay()}))}$.toggleHide=function(){Y=!Y,o.each(J,(function(e){e.domElement.style.display=Y?"none":""}))},$.CLASS_AUTO_PLACE="a",$.CLASS_AUTO_PLACE_CONTAINER="ac",$.CLASS_MAIN="main",$.CLASS_CONTROLLER_ROW="cr",$.CLASS_TOO_TALL="taller-than-window",$.CLASS_CLOSED="closed",$.CLASS_CLOSE_BUTTON="close-button",$.CLASS_CLOSE_TOP="close-top",$.CLASS_CLOSE_BOTTOM="close-bottom",$.CLASS_DRAG="drag",$.DEFAULT_WIDTH=245,$.TEXT_CLOSED="Close Controls",$.TEXT_OPEN="Open Controls",$._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||$.toggleHide()},M.bind(window,"keydown",$._keydownHandler,!1),o.extend($.prototype,{add:function(e,t){return re(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return re(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;o.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&X.removeChild(this.domElement);var e=this;o.each(this.__folders,(function(t){e.removeFolder(t)})),M.unbind(window,"keydown",$._keydownHandler,!1),ee(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new $(t);this.__folders[e]=n;var r=Q(this,n.domElement);return M.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],ee(e);var t=this;o.each(e.__folders,(function(t){e.removeFolder(t)})),o.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=M.getOffset(e.__ul).top,n=0;o.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=M.getHeight(t))})),window.innerHeight-t-20<n?(M.addClass(e.domElement,$.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(M.removeClass(e.domElement,$.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&o.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:o.debounce((function(){this.onResize()}),50),remember:function(){if(o.isUndefined(q)&&((q=new Z).domElement.innerHTML=B),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;o.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&ae(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&ce(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=ue(this)),e.folders={},o.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=ue(this),te(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=ue(this,!0)),this.load.remembered[e]=ue(this),this.preset=e,se(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){o.each(this.__controllers,(function(t){this.getRoot().load.remembered?ne(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),o.each(this.__folders,(function(e){e.revert(e)})),e||te(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&he(this.__listening)},updateDisplay:function(){o.each(this.__controllers,(function(e){e.updateDisplay()})),o.each(this.__folders,(function(e){e.updateDisplay()}))}});var de=$},isQe:(e,t,n)=>{var r=n("m6HD");const i=n("uOvH"),s=n("VXBr"),o=s.join("/","path.txt");e.exports=function(){let e;if(i.existsSync(o)&&(e=i.readFileSync(o,"utf-8")),r.env.ELECTRON_OVERRIDE_DIST_PATH)return s.join(r.env.ELECTRON_OVERRIDE_DIST_PATH,e||"electron");if(e)return s.join("/","dist",e);throw new Error("Electron failed to install correctly, please delete node_modules/electron and try installing again")}()},foew:(e,t,n)=>{var r;!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),s={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},6977:(e,t,n)=>{"use strict";n.d(t,{Ib:()=>u,cZ:()=>c,XU:()=>r});const r=4,i=new Int32Array(2),s=new Float32Array(i.buffer),o=new Float64Array(i.buffer),a=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];var l;!function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"}(l||(l={}));class c{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new c(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return i[0]=this.readInt32(e),s[0]}readFloat64(e){return i[a?0:1]=this.readInt32(e),i[a?1:0]=this.readInt32(e+4),o[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){s[0]=t,this.writeInt32(e,i[0])}writeFloat64(e,t){o[0]=t,this.writeInt32(e,i[a?0:1]),this.writeInt32(e+4,i[a?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<4;t++)e+=String.fromCharCode(this.readInt8(this.position_+4+t));return e}__offset(e,t){const n=e-this.readInt32(e);return t<this.readInt16(n)?this.readInt16(n+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const n=this.readInt32(e);e+=4;const r=this.bytes_.subarray(e,e+n);return t===l.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+4}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(4!=e.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let t=0;t<4;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+4+t))return!1;return!0}createScalarList(e,t){const n=[];for(let r=0;r<t;++r)null!==e(r)&&n.push(e(r));return n}createObjList(e,t){const n=[];for(let r=0;r<t;++r){const t=e(r);null!==t&&n.push(t.unpack())}return n}}class u{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=c.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const n=1+~(this.bb.capacity()-this.space+t)&e-1;for(;this.space<n+e+t;){const e=this.bb.capacity();this.bb=u.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(n)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,n){(this.force_defaults||t!=n)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,n){(this.force_defaults||t!=n)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,n){(this.force_defaults||t!=n)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,n){(this.force_defaults||t!==n)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,n){(this.force_defaults||t!=n)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,n){t!=n&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=t<<1,r=c.allocate(n);return r.setPosition(n-t),r.bytes().set(e.bytes(),n-t),r}addOffset(e){this.prep(4,0),this.writeInt32(this.offset()-e+4)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);const n=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);const r=2*(n+2);this.addInt16(r);let i=0;const s=this.space;e:for(t=0;t<this.vtables.length;t++){const e=this.bb.capacity()-this.vtables[t];if(r==this.bb.readInt16(e)){for(let t=2;t<r;t+=2)if(this.bb.readInt16(s+t)!=this.bb.readInt16(e+t))continue e;i=this.vtables[t];break}}return i?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,i-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,n){const i=n?r:0;if(t){const e=t;if(this.prep(this.minalign,8+i),4!=e.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let t=3;t>=0;t--)this.writeInt8(e.charCodeAt(t))}this.prep(this.minalign,4+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const n=this.bb.capacity()-e,r=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(r+t)))throw new Error("FlatBuffers: field "+t+" must be set")}startVector(e,t,n){this.notNested(),this.vector_num_elems=t,this.prep(4,e*t),this.prep(n,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(null==e)return 0;let t;t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(let e=0,n=this.space,r=this.bb.bytes();e<t.length;e++)r[n++]=t[e];return this.endVector()}createObjectOffset(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n];if(null===r)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(r))}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}},"3tQP":(e,t,n)=>{"use strict";n.d(t,{q_:()=>w,ob:()=>p,PP:()=>T,Ep:()=>d});var r=n("H+Tk");function i(e){return"/"===e.charAt(0)}function s(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],o=t&&t.split("/")||[],a=e&&i(e),l=t&&i(t),c=a||l;if(e&&i(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var u=o[o.length-1];n="."===u||".."===u||""===u}else n=!1;for(var h=0,d=o.length;d>=0;d--){var p=o[d];"."===p?s(o,d):".."===p?(s(o,d),h++):h&&(s(o,d),h--)}if(!c)for(;h--;h)o.unshift("..");!c||""===o[0]||o[0]&&i(o[0])||o.unshift("");var f=o.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f};var a=n("XvIh");function l(e){return"/"===e.charAt(0)?e:"/"+e}function c(e){return"/"===e.charAt(0)?e.substr(1):e}function u(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function h(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function d(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function p(e,t,n,i){var s;"string"==typeof e?(s=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),s.state=t):(void 0===(s=(0,r.Z)({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(s.key=n),i?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=o(s.pathname,i.pathname)):s.pathname=i.pathname:s.pathname||(s.pathname="/"),s}function f(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"==typeof e?e(t,n):e;"string"==typeof s?"function"==typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var m=!("undefined"==typeof window||!window.document||!window.document.createElement);function g(e,t){t(window.confirm(e))}var v="hashchange",y={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+c(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:c,decodePath:l},slash:{encodePath:l,decodePath:l}};function b(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function _(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function x(e){window.location.replace(b(window.location.href)+"#"+e)}function w(e){void 0===e&&(e={}),m||(0,a.Z)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,s=void 0===i?g:i,o=n.hashType,c=void 0===o?"slash":o,w=e.basename?h(l(e.basename)):"",S=y[c],T=S.encodePath,E=S.decodePath;function M(){var e=E(_());return w&&(e=u(e,w)),p(e)}var A=f();function C(e){(0,r.Z)(B,e),B.length=t.length,A.notifyListeners(B.location,B.action)}var k=!1,P=null;function R(){var e,t,n=_(),r=T(n);if(n!==r)x(r);else{var i=M(),o=B.location;if(!k&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(P===d(i))return;P=null,function(e){if(k)k=!1,C();else{var t="POP";A.confirmTransitionTo(e,t,s,(function(n){n?C({action:t,location:e}):function(e){var t=B.location,n=I.lastIndexOf(d(t));-1===n&&(n=0);var r=I.lastIndexOf(d(e));-1===r&&(r=0);var i=n-r;i&&(k=!0,D(i))}(e)}))}}(i)}}var L=_(),O=T(L);L!==O&&x(O);var N=M(),I=[d(N)];function D(e){t.go(e)}var F=0;function z(e){1===(F+=e)&&1===e?window.addEventListener(v,R):0===F&&window.removeEventListener(v,R)}var U=!1;var B={length:t.length,action:"POP",location:N,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=b(window.location.href)),n+"#"+T(w+d(e))},push:function(e,t){var n="PUSH",r=p(e,void 0,void 0,B.location);A.confirmTransitionTo(r,n,s,(function(e){if(e){var t=d(r),i=T(w+t);if(_()!==i){P=t,function(e){window.location.hash=e}(i);var s=I.lastIndexOf(d(B.location)),o=I.slice(0,s+1);o.push(t),I=o,C({action:n,location:r})}else C()}}))},replace:function(e,t){var n="REPLACE",r=p(e,void 0,void 0,B.location);A.confirmTransitionTo(r,n,s,(function(e){if(e){var t=d(r),i=T(w+t);_()!==i&&(P=t,x(i));var s=I.indexOf(d(B.location));-1!==s&&(I[s]=t),C({action:n,location:r})}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(e){void 0===e&&(e=!1);var t=A.setPrompt(e);return U||(z(1),U=!0),function(){return U&&(U=!1,z(-1)),t()}},listen:function(e){var t=A.appendListener(e);return z(1),function(){z(-1),t()}}};return B}function S(e,t,n){return Math.min(Math.max(e,t),n)}function T(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,s=void 0===i?["/"]:i,o=t.initialIndex,a=void 0===o?0:o,l=t.keyLength,c=void 0===l?6:l,u=f();function h(e){(0,r.Z)(_,e),_.length=_.entries.length,u.notifyListeners(_.location,_.action)}function m(){return Math.random().toString(36).substr(2,c)}var g=S(a,0,s.length-1),v=s.map((function(e){return p(e,void 0,"string"==typeof e?m():e.key||m())})),y=d;function b(e){var t=S(_.index+e,0,_.entries.length-1),r=_.entries[t];u.confirmTransitionTo(r,"POP",n,(function(e){e?h({action:"POP",location:r,index:t}):h()}))}var _={length:v.length,action:"POP",location:v[g],index:g,entries:v,createHref:y,push:function(e,t){var r="PUSH",i=p(e,t,m(),_.location);u.confirmTransitionTo(i,r,n,(function(e){if(e){var t=_.index+1,n=_.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),h({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=p(e,t,m(),_.location);u.confirmTransitionTo(i,r,n,(function(e){e&&(_.entries[_.index]=i,h({action:r,location:i}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=_.index+e;return t>=0&&t<_.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return _}},lf1J:(e,t,n)=>{"use strict";var r=n("O6jy"),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(f){var i=p(n);i&&i!==f&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var v=o[g];if(!(s[v]||r&&r[v]||m&&m[v]||a&&a[v])){var y=d(n,v);try{c(t,v,y)}catch(e){}}}}return t}},GIbF:e=>{"use strict";e.exports=function(e,t,n,r,i,s,o,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,o,a],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},"s0+s":(e,t,n)=>{var r=n("m6HD");e.exports=function(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!(void 0===r||"object"!=typeof r.versions||!r.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},"8mqI":(e,t,n)=>{"use strict";var r=n("XAh5"),i=n("vQic");function s(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}e.exports.Type=n("JZHw"),e.exports.Schema=n("qfpZ"),e.exports.FAILSAFE_SCHEMA=n("OU65"),e.exports.JSON_SCHEMA=n("Htxy"),e.exports.CORE_SCHEMA=n("7jV8"),e.exports.DEFAULT_SCHEMA=n("GZyP"),e.exports.load=r.load,e.exports.loadAll=r.loadAll,e.exports.dump=i.dump,e.exports.YAMLException=n("0Nbd"),e.exports.types={binary:n("O3R0"),float:n("gg2i"),map:n("siGW"),null:n("c3Y2"),pairs:n("5e4v"),set:n("sveK"),timestamp:n("w0EM"),bool:n("Z9IN"),int:n("dyW2"),merge:n("DSQR"),omap:n("Yfbc"),seq:n("Wcbe"),str:n("ebAy")},e.exports.safeLoad=s("safeLoad","load"),e.exports.safeLoadAll=s("safeLoadAll","loadAll"),e.exports.safeDump=s("safeDump","dump")},oph7:e=>{"use strict";function t(e){return null==e}e.exports.isNothing=t,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:t(e)?[]:[e]},e.exports.repeat=function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var n,r,i,s;if(t)for(n=0,r=(s=Object.keys(t)).length;n<r;n+=1)e[i=s[n]]=t[i];return e}},vQic:(e,t,n)=>{"use strict";var r=n("oph7"),i=n("0Nbd"),s=n("GZyP"),o=Object.prototype.toString,a=Object.prototype.hasOwnProperty,l=65279,c={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},u=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],h=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function d(e){var t,n,s;if(t=e.toString(16).toUpperCase(),e<=255)n="x",s=2;else if(e<=65535)n="u",s=4;else{if(!(e<=4294967295))throw new i("code point within a string may not be greater than 0xFFFFFFFF");n="U",s=8}return"\\"+n+r.repeat("0",s-t.length)+t}function p(e){this.schema=e.schema||s,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=r.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,i,s,o,l,c;if(null===t)return{};for(n={},i=0,s=(r=Object.keys(t)).length;i<s;i+=1)o=r[i],l=String(t[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(c=e.compiledTypeMap.fallback[o])&&a.call(c.styleAliases,l)&&(l=c.styleAliases[l]),n[o]=l;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function f(e,t){for(var n,i=r.repeat(" ",t),s=0,o=-1,a="",l=e.length;s<l;)-1===(o=e.indexOf("\n",s))?(n=e.slice(s),s=l):(n=e.slice(s,o+1),s=o+1),n.length&&"\n"!==n&&(a+=i),a+=n;return a}function m(e,t){return"\n"+r.repeat(" ",e.indent*t)}function g(e){return 32===e||9===e}function v(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==l||65536<=e&&e<=1114111}function y(e){return v(e)&&e!==l&&13!==e&&10!==e}function b(e,t,n){var r=y(e),i=r&&!g(e);return(n?r:r&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!i)||y(t)&&!g(t)&&35===e||58===t&&i}function _(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function x(e){return/^\n* /.test(e)}function w(e,t,n,r,i,s,o,a){var c,u,h=0,d=null,p=!1,f=!1,m=-1!==r,y=-1,w=v(u=_(e,0))&&u!==l&&!g(u)&&45!==u&&63!==u&&58!==u&&44!==u&&91!==u&&93!==u&&123!==u&&125!==u&&35!==u&&38!==u&&42!==u&&33!==u&&124!==u&&61!==u&&62!==u&&39!==u&&34!==u&&37!==u&&64!==u&&96!==u&&function(e){return!g(e)&&58!==e}(_(e,e.length-1));if(t||o)for(c=0;c<e.length;h>=65536?c+=2:c++){if(!v(h=_(e,c)))return 5;w=w&&b(h,d,a),d=h}else{for(c=0;c<e.length;h>=65536?c+=2:c++){if(10===(h=_(e,c)))p=!0,m&&(f=f||c-y-1>r&&" "!==e[y+1],y=c);else if(!v(h))return 5;w=w&&b(h,d,a),d=h}f=f||m&&c-y-1>r&&" "!==e[y+1]}return p||f?n>9&&x(e)?5:o?2===s?5:2:f?4:3:!w||o||i(e)?2===s?5:2:1}function S(e,t,n,r,s){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==u.indexOf(t)||h.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),l=r||e.flowLevel>-1&&n>=e.flowLevel;switch(w(t,l,e.indent,a,(function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!r,s)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+T(t,e.indent)+E(f(t,o));case 4:return">"+T(t,e.indent)+E(f(function(e,t){var n,r,i=/(\n+)([^\n]*)/g,s=(a=e.indexOf("\n"),a=-1!==a?a:e.length,i.lastIndex=a,M(e.slice(0,a),t)),o="\n"===e[0]||" "===e[0];var a;for(;r=i.exec(e);){var l=r[1],c=r[2];n=" "===c[0],s+=l+(o||n||""===c?"":"\n")+M(c,t),o=n}return s}(t,a),o));case 5:return'"'+function(e){for(var t,n="",r=0,i=0;i<e.length;r>=65536?i+=2:i++)r=_(e,i),!(t=c[r])&&v(r)?(n+=e[i],r>=65536&&(n+=e[i+1])):n+=t||d(r);return n}(t)+'"';default:throw new i("impossible error: invalid scalar style")}}()}function T(e,t){var n=x(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function E(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function M(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,s=0,o=0,a=0,l="";n=i.exec(e);)(a=n.index)-s>t&&(r=o>s?o:a,l+="\n"+e.slice(s,r),s=r+1),o=a;return l+="\n",e.length-s>t&&o>s?l+=e.slice(s,o)+"\n"+e.slice(o+1):l+=e.slice(s),l.slice(1)}function A(e,t,n,r){var i,s,o,a="",l=e.tag;for(i=0,s=n.length;i<s;i+=1)o=n[i],e.replacer&&(o=e.replacer.call(n,String(i),o)),(k(e,t+1,o,!0,!0,!1,!0)||void 0===o&&k(e,t+1,null,!0,!0,!1,!0))&&(r&&""===a||(a+=m(e,t)),e.dump&&10===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=l,e.dump=a||"[]"}function C(e,t,n){var r,s,l,c,u,h;for(l=0,c=(s=n?e.explicitTypes:e.implicitTypes).length;l<c;l+=1)if(((u=s[l]).instanceOf||u.predicate)&&(!u.instanceOf||"object"==typeof t&&t instanceof u.instanceOf)&&(!u.predicate||u.predicate(t))){if(n?u.multi&&u.representName?e.tag=u.representName(t):e.tag=u.tag:e.tag="?",u.represent){if(h=e.styleMap[u.tag]||u.defaultStyle,"[object Function]"===o.call(u.represent))r=u.represent(t,h);else{if(!a.call(u.represent,h))throw new i("!<"+u.tag+'> tag resolver accepts not "'+h+'" style');r=u.represent[h](t,h)}e.dump=r}return!0}return!1}function k(e,t,n,r,s,a,l){e.tag=null,e.dump=n,C(e,n,!1)||C(e,n,!0);var c,u=o.call(e.dump),h=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var d,p,f="[object Object]"===u||"[object Array]"===u;if(f&&(p=-1!==(d=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||p||2!==e.indent&&t>0)&&(s=!1),p&&e.usedDuplicates[d])e.dump="*ref_"+d;else{if(f&&p&&!e.usedDuplicates[d]&&(e.usedDuplicates[d]=!0),"[object Object]"===u)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var s,o,a,l,c,u,h="",d=e.tag,p=Object.keys(n);if(!0===e.sortKeys)p.sort();else if("function"==typeof e.sortKeys)p.sort(e.sortKeys);else if(e.sortKeys)throw new i("sortKeys must be a boolean or a function");for(s=0,o=p.length;s<o;s+=1)u="",r&&""===h||(u+=m(e,t)),l=n[a=p[s]],e.replacer&&(l=e.replacer.call(n,a,l)),k(e,t+1,a,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?u+="?":u+="? "),u+=e.dump,c&&(u+=m(e,t)),k(e,t+1,l,!0,c)&&(e.dump&&10===e.dump.charCodeAt(0)?u+=":":u+=": ",h+=u+=e.dump));e.tag=d,e.dump=h||"{}"}(e,t,e.dump,s),p&&(e.dump="&ref_"+d+e.dump)):(!function(e,t,n){var r,i,s,o,a,l="",c=e.tag,u=Object.keys(n);for(r=0,i=u.length;r<i;r+=1)a="",""!==l&&(a+=", "),e.condenseFlow&&(a+='"'),o=n[s=u[r]],e.replacer&&(o=e.replacer.call(n,s,o)),k(e,t,s,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),k(e,t,o,!1,!1)&&(l+=a+=e.dump));e.tag=c,e.dump="{"+l+"}"}(e,t,e.dump),p&&(e.dump="&ref_"+d+" "+e.dump));else if("[object Array]"===u)r&&0!==e.dump.length?(e.noArrayIndent&&!l&&t>0?A(e,t-1,e.dump,s):A(e,t,e.dump,s),p&&(e.dump="&ref_"+d+e.dump)):(!function(e,t,n){var r,i,s,o="",a=e.tag;for(r=0,i=n.length;r<i;r+=1)s=n[r],e.replacer&&(s=e.replacer.call(n,String(r),s)),(k(e,t,s,!1,!1)||void 0===s&&k(e,t,null,!1,!1))&&(""!==o&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}(e,t,e.dump),p&&(e.dump="&ref_"+d+" "+e.dump));else{if("[object String]"!==u){if("[object Undefined]"===u)return!1;if(e.skipInvalid)return!1;throw new i("unacceptable kind of an object to dump "+u)}"?"!==e.tag&&S(e,e.dump,t,a,h)}null!==e.tag&&"?"!==e.tag&&(c=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),c="!"===e.tag[0]?"!"+c:"tag:yaml.org,2002:"===c.slice(0,18)?"!!"+c.slice(18):"!<"+c+">",e.dump=c+" "+e.dump)}return!0}function P(e,t){var n,r,i=[],s=[];for(R(e,i,s),n=0,r=s.length;n<r;n+=1)t.duplicates.push(i[s[n]]);t.usedDuplicates=new Array(r)}function R(e,t,n){var r,i,s;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)R(e[i],t,n);else for(i=0,s=(r=Object.keys(e)).length;i<s;i+=1)R(e[r[i]],t,n)}e.exports.dump=function(e,t){var n=new p(t=t||{});n.noRefs||P(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),k(n,0,r,!0,!0)?n.dump+"\n":""}},"0Nbd":e=>{"use strict";function t(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function n(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=t(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(e){return this.name+": "+t(this,e)},e.exports=n},XAh5:(e,t,n)=>{"use strict";var r=n("oph7"),i=n("0Nbd"),s=n("K+w9"),o=n("GZyP"),a=Object.prototype.hasOwnProperty,l=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,c=/[\x85\u2028\u2029]/,u=/[,\[\]\{\}]/,h=/^(?:!|!!|![a-z\-]+!)$/i,d=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function p(e){return Object.prototype.toString.call(e)}function f(e){return 10===e||13===e}function m(e){return 9===e||32===e}function g(e){return 9===e||32===e||10===e||13===e}function v(e){return 44===e||91===e||93===e||123===e||125===e}function y(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function b(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function _(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var x=new Array(256),w=new Array(256),S=0;S<256;S++)x[S]=b(S)?1:0,w[S]=b(S);function T(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||o,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function E(e,t){var n={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return n.snippet=s(n),new i(t,n)}function M(e,t){throw E(e,t)}function A(e,t){e.onWarning&&e.onWarning.call(null,E(e,t))}var C={YAML:function(e,t,n){var r,i,s;null!==e.version&&M(e,"duplication of %YAML directive"),1!==n.length&&M(e,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&M(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),s=parseInt(r[2],10),1!==i&&M(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,1!==s&&2!==s&&A(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&M(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],h.test(r)||M(e,"ill-formed tag handle (first argument) of the TAG directive"),a.call(e.tagMap,r)&&M(e,'there is a previously declared suffix for "'+r+'" tag handle'),d.test(i)||M(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(t){M(e,"tag prefix is malformed: "+i)}e.tagMap[r]=i}};function k(e,t,n,r){var i,s,o,a;if(t<n){if(a=e.input.slice(t,n),r)for(i=0,s=a.length;i<s;i+=1)9===(o=a.charCodeAt(i))||32<=o&&o<=1114111||M(e,"expected valid JSON character");else l.test(a)&&M(e,"the stream contains non-printable characters");e.result+=a}}function P(e,t,n,i){var s,o,l,c;for(r.isObject(n)||M(e,"cannot merge mappings; the provided source object is unacceptable"),l=0,c=(s=Object.keys(n)).length;l<c;l+=1)o=s[l],a.call(t,o)||(t[o]=n[o],i[o]=!0)}function R(e,t,n,r,i,s,o,l,c){var u,h;if(Array.isArray(i))for(u=0,h=(i=Array.prototype.slice.call(i)).length;u<h;u+=1)Array.isArray(i[u])&&M(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===p(i[u])&&(i[u]="[object Object]");if("object"==typeof i&&"[object Object]"===p(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(s))for(u=0,h=s.length;u<h;u+=1)P(e,t,s[u],n);else P(e,t,s,n);else e.json||a.call(n,i)||!a.call(t,i)||(e.line=o||e.line,e.lineStart=l||e.lineStart,e.position=c||e.position,M(e,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete n[i];return t}function L(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):M(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function O(e,t,n){for(var r=0,i=e.input.charCodeAt(e.position);0!==i;){for(;m(i);)9===i&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!f(i))break;for(L(e),i=e.input.charCodeAt(e.position),r++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==n&&0!==r&&e.lineIndent<n&&A(e,"deficient indentation"),r}function N(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!g(t)))}function I(e,t){1===t?e.result+=" ":t>1&&(e.result+=r.repeat("\n",t-1))}function D(e,t){var n,r,i=e.tag,s=e.anchor,o=[],a=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),r=e.input.charCodeAt(e.position);0!==r&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,M(e,"tab characters must not be used in indentation")),45===r)&&g(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,O(e,!0,-1)&&e.lineIndent<=t)o.push(null),r=e.input.charCodeAt(e.position);else if(n=e.line,U(e,t,3,!1,!0),o.push(e.result),O(e,!0,-1),r=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==r)M(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=i,e.anchor=s,e.kind="sequence",e.result=o,!0)}function F(e){var t,n,r,i,s=!1,o=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&M(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(s=!0,i=e.input.charCodeAt(++e.position)):33===i?(o=!0,n="!!",i=e.input.charCodeAt(++e.position)):n="!",t=e.position,s){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(r=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):M(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!g(i);)33===i&&(o?M(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),h.test(n)||M(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),u.test(r)&&M(e,"tag suffix cannot contain flow indicator characters")}r&&!d.test(r)&&M(e,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(t){M(e,"tag name is malformed: "+r)}return s?e.tag=r:a.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:M(e,'undeclared tag handle "'+n+'"'),!0}function z(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&M(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!g(n)&&!v(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&M(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function U(e,t,n,i,s){var o,l,c,u,h,d,p,b,S,T=1,E=!1,A=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=l=c=4===n||3===n,i&&O(e,!0,-1)&&(E=!0,e.lineIndent>t?T=1:e.lineIndent===t?T=0:e.lineIndent<t&&(T=-1)),1===T)for(;F(e)||z(e);)O(e,!0,-1)?(E=!0,c=o,e.lineIndent>t?T=1:e.lineIndent===t?T=0:e.lineIndent<t&&(T=-1)):c=!1;if(c&&(c=E||s),1!==T&&4!==n||(b=1===n||2===n?t:t+1,S=e.position-e.lineStart,1===T?c&&(D(e,S)||function(e,t,n){var r,i,s,o,a,l,c,u=e.tag,h=e.anchor,d={},p=Object.create(null),f=null,v=null,y=null,b=!1,_=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),c=e.input.charCodeAt(e.position);0!==c;){if(b||-1===e.firstTabInLine||(e.position=e.firstTabInLine,M(e,"tab characters must not be used in indentation")),r=e.input.charCodeAt(e.position+1),s=e.line,63!==c&&58!==c||!g(r)){if(o=e.line,a=e.lineStart,l=e.position,!U(e,n,2,!1,!0))break;if(e.line===s){for(c=e.input.charCodeAt(e.position);m(c);)c=e.input.charCodeAt(++e.position);if(58===c)g(c=e.input.charCodeAt(++e.position))||M(e,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(R(e,d,p,f,v,null,o,a,l),f=v=y=null),_=!0,b=!1,i=!1,f=e.tag,v=e.result;else{if(!_)return e.tag=u,e.anchor=h,!0;M(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!_)return e.tag=u,e.anchor=h,!0;M(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(b&&(R(e,d,p,f,v,null,o,a,l),f=v=y=null),_=!0,b=!0,i=!0):b?(b=!1,i=!0):M(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,c=r;if((e.line===s||e.lineIndent>t)&&(b&&(o=e.line,a=e.lineStart,l=e.position),U(e,t,4,!0,i)&&(b?v=e.result:y=e.result),b||(R(e,d,p,f,v,y,o,a,l),f=v=y=null),O(e,!0,-1),c=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&0!==c)M(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return b&&R(e,d,p,f,v,null,o,a,l),_&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),_}(e,S,b))||function(e,t){var n,r,i,s,o,a,l,c,u,h,d,p,f=!0,m=e.tag,v=e.anchor,y=Object.create(null);if(91===(p=e.input.charCodeAt(e.position)))o=93,c=!1,s=[];else{if(123!==p)return!1;o=125,c=!0,s={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),p=e.input.charCodeAt(++e.position);0!==p;){if(O(e,!0,t),(p=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=m,e.anchor=v,e.kind=c?"mapping":"sequence",e.result=s,!0;f?44===p&&M(e,"expected the node content, but found ','"):M(e,"missed comma between flow collection entries"),d=null,a=l=!1,63===p&&g(e.input.charCodeAt(e.position+1))&&(a=l=!0,e.position++,O(e,!0,t)),n=e.line,r=e.lineStart,i=e.position,U(e,t,1,!1,!0),h=e.tag,u=e.result,O(e,!0,t),p=e.input.charCodeAt(e.position),!l&&e.line!==n||58!==p||(a=!0,p=e.input.charCodeAt(++e.position),O(e,!0,t),U(e,t,1,!1,!0),d=e.result),c?R(e,s,y,h,u,d,n,r,i):a?s.push(R(e,null,y,h,u,d,n,r,i)):s.push(u),O(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(f=!0,p=e.input.charCodeAt(++e.position)):f=!1}M(e,"unexpected end of the stream within a flow collection")}(e,b)?A=!0:(l&&function(e,t){var n,i,s,o,a,l=1,c=!1,u=!1,h=t,d=0,p=!1;if(124===(o=e.input.charCodeAt(e.position)))i=!1;else{if(62!==o)return!1;i=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)1===l?l=43===o?3:2:M(e,"repeat of a chomping mode identifier");else{if(!((s=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===s?M(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?M(e,"repeat of an indentation width identifier"):(h=t+s-1,u=!0)}if(m(o)){do{o=e.input.charCodeAt(++e.position)}while(m(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!f(o)&&0!==o)}for(;0!==o;){for(L(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!u||e.lineIndent<h)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!u&&e.lineIndent>h&&(h=e.lineIndent),f(o))d++;else{if(e.lineIndent<h){3===l?e.result+=r.repeat("\n",c?1+d:d):1===l&&c&&(e.result+="\n");break}for(i?m(o)?(p=!0,e.result+=r.repeat("\n",c?1+d:d)):p?(p=!1,e.result+=r.repeat("\n",d+1)):0===d?c&&(e.result+=" "):e.result+=r.repeat("\n",d):e.result+=r.repeat("\n",c?1+d:d),c=!0,u=!0,d=0,n=e.position;!f(o)&&0!==o;)o=e.input.charCodeAt(++e.position);k(e,n,e.position,!1)}}return!0}(e,b)||function(e,t){var n,r,i;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(k(e,r,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;r=e.position,e.position++,i=e.position}else f(n)?(k(e,r,i,!0),I(e,O(e,!1,t)),r=i=e.position):e.position===e.lineStart&&N(e)?M(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);M(e,"unexpected end of the stream within a single quoted scalar")}(e,b)||function(e,t){var n,r,i,s,o,a,l;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=r=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return k(e,n,e.position,!0),e.position++,!0;if(92===a){if(k(e,n,e.position,!0),f(a=e.input.charCodeAt(++e.position)))O(e,!1,t);else if(a<256&&x[a])e.result+=w[a],e.position++;else if((o=120===(l=a)?2:117===l?4:85===l?8:0)>0){for(i=o,s=0;i>0;i--)(o=y(a=e.input.charCodeAt(++e.position)))>=0?s=(s<<4)+o:M(e,"expected hexadecimal character");e.result+=_(s),e.position++}else M(e,"unknown escape sequence");n=r=e.position}else f(a)?(k(e,n,r,!0),I(e,O(e,!1,t)),n=r=e.position):e.position===e.lineStart&&N(e)?M(e,"unexpected end of the document within a double quoted scalar"):(e.position++,r=e.position)}M(e,"unexpected end of the stream within a double quoted scalar")}(e,b)?A=!0:!function(e){var t,n,r;if(42!==(r=e.input.charCodeAt(e.position)))return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!g(r)&&!v(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&M(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),a.call(e.anchorMap,n)||M(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],O(e,!0,-1),!0}(e)?function(e,t,n){var r,i,s,o,a,l,c,u,h=e.kind,d=e.result;if(g(u=e.input.charCodeAt(e.position))||v(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(g(r=e.input.charCodeAt(e.position+1))||n&&v(r)))return!1;for(e.kind="scalar",e.result="",i=s=e.position,o=!1;0!==u;){if(58===u){if(g(r=e.input.charCodeAt(e.position+1))||n&&v(r))break}else if(35===u){if(g(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&N(e)||n&&v(u))break;if(f(u)){if(a=e.line,l=e.lineStart,c=e.lineIndent,O(e,!1,-1),e.lineIndent>=t){o=!0,u=e.input.charCodeAt(e.position);continue}e.position=s,e.line=a,e.lineStart=l,e.lineIndent=c;break}}o&&(k(e,i,s,!1),I(e,e.line-a),i=s=e.position,o=!1),m(u)||(s=e.position+1),u=e.input.charCodeAt(++e.position)}return k(e,i,s,!1),!!e.result||(e.kind=h,e.result=d,!1)}(e,b,1===n)&&(A=!0,null===e.tag&&(e.tag="?")):(A=!0,null===e.tag&&null===e.anchor||M(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===T&&(A=c&&D(e,S))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&M(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),u=0,h=e.implicitTypes.length;u<h;u+=1)if((p=e.implicitTypes[u]).resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(a.call(e.typeMap[e.kind||"fallback"],e.tag))p=e.typeMap[e.kind||"fallback"][e.tag];else for(p=null,u=0,h=(d=e.typeMap.multi[e.kind||"fallback"]).length;u<h;u+=1)if(e.tag.slice(0,d[u].tag.length)===d[u].tag){p=d[u];break}p||M(e,"unknown tag !<"+e.tag+">"),null!==e.result&&p.kind!==e.kind&&M(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result,e.tag)?(e.result=p.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):M(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||A}function B(e){var t,n,r,i,s=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(i=e.input.charCodeAt(e.position))&&(O(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(o=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!g(i);)i=e.input.charCodeAt(++e.position);for(r=[],(n=e.input.slice(t,e.position)).length<1&&M(e,"directive name must not be less than one character in length");0!==i;){for(;m(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!f(i));break}if(f(i))break;for(t=e.position;0!==i&&!g(i);)i=e.input.charCodeAt(++e.position);r.push(e.input.slice(t,e.position))}0!==i&&L(e),a.call(C,n)?C[n](e,n,r):A(e,'unknown document directive "'+n+'"')}O(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,O(e,!0,-1)):o&&M(e,"directives end mark is expected"),U(e,e.lineIndent-1,4,!1,!0),O(e,!0,-1),e.checkLineBreaks&&c.test(e.input.slice(s,e.position))&&A(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&N(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,O(e,!0,-1)):e.position<e.length-1&&M(e,"end of the stream or a document separator is expected")}function V(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new T(e,t),r=e.indexOf("\0");for(-1!==r&&(n.position=r,M(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)B(n);return n.documents}e.exports.loadAll=function(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var r=V(e,n);if("function"!=typeof t)return r;for(var i=0,s=r.length;i<s;i+=1)t(r[i])},e.exports.load=function(e,t){var n=V(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new i("expected a single document in the stream, but found more")}}},qfpZ:(e,t,n)=>{"use strict";var r=n("0Nbd"),i=n("JZHw");function s(e,t){var n=[];return e[t].forEach((function(e){var t=n.length;n.forEach((function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)})),n[t]=e})),n}function o(e){return this.extend(e)}o.prototype.extend=function(e){var t=[],n=[];if(e instanceof i)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof i))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(e){if(!(e instanceof i))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var a=Object.create(o.prototype);return a.implicit=(this.implicit||[]).concat(t),a.explicit=(this.explicit||[]).concat(n),a.compiledImplicit=s(a,"implicit"),a.compiledExplicit=s(a,"explicit"),a.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(a.compiledImplicit,a.compiledExplicit),a},e.exports=o},"7jV8":(e,t,n)=>{"use strict";e.exports=n("Htxy")},GZyP:(e,t,n)=>{"use strict";e.exports=n("7jV8").extend({implicit:[n("w0EM"),n("DSQR")],explicit:[n("O3R0"),n("Yfbc"),n("5e4v"),n("sveK")]})},OU65:(e,t,n)=>{"use strict";var r=n("qfpZ");e.exports=new r({explicit:[n("ebAy"),n("Wcbe"),n("siGW")]})},Htxy:(e,t,n)=>{"use strict";e.exports=n("OU65").extend({implicit:[n("c3Y2"),n("Z9IN"),n("dyW2"),n("gg2i")]})},"K+w9":(e,t,n)=>{"use strict";var r=n("oph7");function i(e,t,n,r,i){var s="",o="",a=Math.floor(i/2)-1;return r-t>a&&(t=r-a+(s=" ... ").length),n-r>a&&(n=r+a-(o=" ...").length),{str:s+e.slice(t,n).replace(/\t/g,"→")+o,pos:r-t+s.length}}function s(e,t){return r.repeat(" ",t-e.length)+e}e.exports=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var n,o=/\r?\n|\r|\0/g,a=[0],l=[],c=-1;n=o.exec(e.buffer);)l.push(n.index),a.push(n.index+n[0].length),e.position<=n.index&&c<0&&(c=a.length-2);c<0&&(c=a.length-1);var u,h,d="",p=Math.min(e.line+t.linesAfter,l.length).toString().length,f=t.maxLength-(t.indent+p+3);for(u=1;u<=t.linesBefore&&!(c-u<0);u++)h=i(e.buffer,a[c-u],l[c-u],e.position-(a[c]-a[c-u]),f),d=r.repeat(" ",t.indent)+s((e.line-u+1).toString(),p)+" | "+h.str+"\n"+d;for(h=i(e.buffer,a[c],l[c],e.position,f),d+=r.repeat(" ",t.indent)+s((e.line+1).toString(),p)+" | "+h.str+"\n",d+=r.repeat("-",t.indent+p+3+h.pos)+"^\n",u=1;u<=t.linesAfter&&!(c+u>=l.length);u++)h=i(e.buffer,a[c+u],l[c+u],e.position-(a[c]-a[c+u]),f),d+=r.repeat(" ",t.indent)+s((e.line+u+1).toString(),p)+" | "+h.str+"\n";return d.replace(/\n$/,"")}},JZHw:(e,t,n)=>{"use strict";var r=n("0Nbd"),i=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],s=["scalar","sequence","mapping"];e.exports=function(e,t){var n,o;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===i.indexOf(t))throw new r('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(n=t.styleAliases||null,o={},null!==n&&Object.keys(n).forEach((function(e){n[e].forEach((function(t){o[String(t)]=e}))})),o),-1===s.indexOf(this.kind))throw new r('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},O3R0:(e,t,n)=>{"use strict";var r=n("JZHw"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new r("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,s=e.length,o=i;for(n=0;n<s;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),s=r.length,o=i,a=0,l=[];for(t=0;t<s;t++)t%4==0&&t&&(l.push(a>>16&255),l.push(a>>8&255),l.push(255&a)),a=a<<6|o.indexOf(r.charAt(t));return 0===(n=s%4*6)?(l.push(a>>16&255),l.push(a>>8&255),l.push(255&a)):18===n?(l.push(a>>10&255),l.push(a>>2&255)):12===n&&l.push(a>>4&255),new Uint8Array(l)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",s=0,o=e.length,a=i;for(t=0;t<o;t++)t%3==0&&t&&(r+=a[s>>18&63],r+=a[s>>12&63],r+=a[s>>6&63],r+=a[63&s]),s=(s<<8)+e[t];return 0===(n=o%3)?(r+=a[s>>18&63],r+=a[s>>12&63],r+=a[s>>6&63],r+=a[63&s]):2===n?(r+=a[s>>10&63],r+=a[s>>4&63],r+=a[s<<2&63],r+=a[64]):1===n&&(r+=a[s>>2&63],r+=a[s<<4&63],r+=a[64],r+=a[64]),r}})},Z9IN:(e,t,n)=>{"use strict";var r=n("JZHw");e.exports=new r("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},gg2i:(e,t,n)=>{"use strict";var r=n("oph7"),i=n("JZHw"),s=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var o=/^[-+]?[0-9]+e/;e.exports=new i("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!s.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||r.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(r.isNegativeZero(e))return"-0.0";return n=e.toString(10),o.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})},dyW2:(e,t,n)=>{"use strict";var r=n("oph7"),i=n("JZHw");function s(e){return 48<=e&&e<=55}function o(e){return 48<=e&&e<=57}e.exports=new i("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=e.length,i=0,a=!1;if(!r)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===r)return!0;if("b"===(t=e[++i])){for(i++;i<r;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;a=!0}return a&&"_"!==t}if("x"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!(48<=(n=e.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;a=!0}return a&&"_"!==t}if("o"===t){for(i++;i<r;i++)if("_"!==(t=e[i])){if(!s(e.charCodeAt(i)))return!1;a=!0}return a&&"_"!==t}}if("_"===t)return!1;for(;i<r;i++)if("_"!==(t=e[i])){if(!o(e.charCodeAt(i)))return!1;a=!0}return!(!a||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!r.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},siGW:(e,t,n)=>{"use strict";var r=n("JZHw");e.exports=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},DSQR:(e,t,n)=>{"use strict";var r=n("JZHw");e.exports=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},c3Y2:(e,t,n)=>{"use strict";var r=n("JZHw");e.exports=new r("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})},Yfbc:(e,t,n)=>{"use strict";var r=n("JZHw"),i=Object.prototype.hasOwnProperty,s=Object.prototype.toString;e.exports=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,o,a,l=[],c=e;for(t=0,n=c.length;t<n;t+=1){if(r=c[t],a=!1,"[object Object]"!==s.call(r))return!1;for(o in r)if(i.call(r,o)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==l.indexOf(o))return!1;l.push(o)}return!0},construct:function(e){return null!==e?e:[]}})},"5e4v":(e,t,n)=>{"use strict";var r=n("JZHw"),i=Object.prototype.toString;e.exports=new r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,s,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],"[object Object]"!==i.call(r))return!1;if(1!==(s=Object.keys(r)).length)return!1;o[t]=[s[0],r[s[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1)r=o[t],i=Object.keys(r),s[t]=[i[0],r[i[0]]];return s}})},Wcbe:(e,t,n)=>{"use strict";var r=n("JZHw");e.exports=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},sveK:(e,t,n)=>{"use strict";var r=n("JZHw"),i=Object.prototype.hasOwnProperty;e.exports=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(i.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},ebAy:(e,t,n)=>{"use strict";var r=n("JZHw");e.exports=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},w0EM:(e,t,n)=>{"use strict";var r=n("JZHw"),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new r("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==i.exec(e)||null!==s.exec(e))},construct:function(e){var t,n,r,o,a,l,c,u,h=0,d=null;if(null===(t=i.exec(e))&&(t=s.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,r,o));if(a=+t[4],l=+t[5],c=+t[6],t[7]){for(h=t[7].slice(0,3);h.length<3;)h+="0";h=+h}return t[9]&&(d=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(d=-d)),u=new Date(Date.UTC(n,r,o,a,l,c,h)),d&&u.setTime(u.getTime()-d),u},instanceOf:Date,represent:function(e){return e.toISOString()}})},"7koP":(e,t)=>{function n(e,t){var n=[],r=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"}),function(i,s){if(n.length>0){var o=n.indexOf(this);~o?n.splice(o+1):n.push(this),~o?r.splice(o,1/0,i):r.push(i),~n.indexOf(s)&&(s=t.call(this,i,s))}else n.push(s);return null==e?s:e.call(this,i,s)}}(e.exports=function(e,t,r,i){return JSON.stringify(e,n(t,i),r)}).getSerialize=n},paW0:e=>{"use strict";for(var t=function(e){return null!==e&&!Array.isArray(e)&&"object"==typeof e},n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},r=0;r<24;r+=1)n[112+r]="F"+(r+1);for(var i=0;i<26;i+=1){var s=i+65;n[s]=[String.fromCharCode(s+32),String.fromCharCode(s)]}var o={codes:n,getCode:function(e){return t(e)?e.keyCode||e.which||this[e.key]:this[e]},getKey:function(e){var r=t(e);if(r&&e.key)return e.key;var i=n[r?e.keyCode||e.which:e];return Array.isArray(i)&&(i=r?i[e.shiftKey?1:0]:i[0]),i},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};o.Spacebar=o[" "],o.Digit0=o[0],o.Digit1=o[1],o.Digit2=o[2],o.Digit3=o[3],o.Digit4=o[4],o.Digit5=o[5],o.Digit6=o[6],o.Digit7=o[7],o.Digit8=o[8],o.Digit9=o[9],o.Tilde=o["~"],o.GraveAccent=o["`"],o.ExclamationPoint=o["!"],o.AtSign=o["@"],o.PoundSign=o["#"],o.PercentSign=o["%"],o.Caret=o["^"],o.Ampersand=o["&"],o.PlusSign=o["+"],o.MinusSign=o["-"],o.EqualsSign=o["="],o.DivisionSign=o["/"],o.MultiplicationSign=o["*"],o.Comma=o[","],o.Decimal=o["."],o.Colon=o[":"],o.Semicolon=o[";"],o.Pipe=o["|"],o.BackSlash=o["\\"],o.QuestionMark=o["?"],o.SingleQuote=o["'"],o.DoubleQuote=o['"'],o.LeftCurlyBrace=o["{"],o.RightCurlyBrace=o["}"],o.LeftParenthesis=o["("],o.RightParenthesis=o[")"],o.LeftAngleBracket=o["<"],o.RightAngleBracket=o[">"],o.LeftSquareBracket=o["["],o.RightSquareBracket=o["]"],e.exports=o},"5Ao9":function(e,t,n){var r=n("m6HD");!function(e){var t=e.LiteGraph={VERSION:.4,CANVAS_GRID_SIZE:10,NODE_TITLE_HEIGHT:30,NODE_TITLE_TEXT_Y:20,NODE_SLOT_HEIGHT:20,NODE_WIDGET_HEIGHT:20,NODE_WIDTH:140,NODE_MIN_WIDTH:50,NODE_COLLAPSED_RADIUS:10,NODE_COLLAPSED_WIDTH:80,NODE_TITLE_COLOR:"#999",NODE_SELECTED_TITLE_COLOR:"#FFF",NODE_TEXT_SIZE:14,NODE_TEXT_COLOR:"#AAA",NODE_SUBTEXT_SIZE:12,NODE_DEFAULT_COLOR:"#333",NODE_DEFAULT_BGCOLOR:"#353535",NODE_DEFAULT_BOXCOLOR:"#666",NODE_DEFAULT_SHAPE:"box",NODE_BOX_OUTLINE_COLOR:"#FFF",DEFAULT_SHADOW_COLOR:"rgba(0,0,0,0.5)",DEFAULT_GROUP_FONT:24,WIDGET_BGCOLOR:"#222",WIDGET_OUTLINE_COLOR:"#666",WIDGET_TEXT_COLOR:"#DDD",WIDGET_SECONDARY_TEXT_COLOR:"#999",LINK_COLOR:"#9A9",EVENT_LINK_COLOR:"#A86",CONNECTING_LINK_COLOR:"#AFA",MAX_NUMBER_OF_NODES:1e3,DEFAULT_POSITION:[100,100],VALID_SHAPES:["default","box","round","card"],BOX_SHAPE:1,ROUND_SHAPE:2,CIRCLE_SHAPE:3,CARD_SHAPE:4,ARROW_SHAPE:5,GRID_SHAPE:6,INPUT:1,OUTPUT:2,EVENT:-1,ACTION:-1,NODE_MODES:["Always","On Event","Never","On Trigger"],NODE_MODES_COLORS:["#666","#422","#333","#224","#626"],ALWAYS:0,ON_EVENT:1,NEVER:2,ON_TRIGGER:3,UP:1,DOWN:2,LEFT:3,RIGHT:4,CENTER:5,LINK_RENDER_MODES:["Straight","Linear","Spline"],STRAIGHT_LINK:0,LINEAR_LINK:1,SPLINE_LINK:2,NORMAL_TITLE:0,NO_TITLE:1,TRANSPARENT_TITLE:2,AUTOHIDE_TITLE:3,VERTICAL_LAYOUT:"vertical",proxy:null,node_images_path:"",debug:!1,catch_exceptions:!0,throw_errors:!0,allow_scripts:!1,registered_node_types:{},node_types_by_file_extension:{},Nodes:{},Globals:{},searchbox_extras:{},auto_sort_node_types:!1,node_box_coloured_when_on:!1,node_box_coloured_by_mode:!1,dialog_close_on_mouse_leave:!0,dialog_close_on_mouse_leave_delay:500,shift_click_do_break_link_from:!1,click_do_break_link_to:!1,search_hide_on_mouse_leave:!0,search_filter_enabled:!1,search_show_all_on_open:!0,auto_load_slot_types:!1,registered_slot_in_types:{},registered_slot_out_types:{},slot_types_in:[],slot_types_out:[],slot_types_default_in:[],slot_types_default_out:[],alt_drag_do_clone_nodes:!1,do_add_triggers_slots:!1,allow_multi_output_for_events:!0,draw_invisible_connections:!1,middle_click_slot_add_default_node:!1,middle_click_canvas_dragging:!1,release_link_on_empty_shows_menu:!1,pointerevents_method:"mouse",registerNodeType:function(e,n){if(!n.prototype)throw"Cannot register a simple object, it must be a class with a prototype";n.type=e,t.debug&&console.log("Node registered: "+e);e.split("/");var r=n.name,i=e.lastIndexOf("/");if(n.category=e.substr(0,i),n.title||(n.title=r),n.prototype)for(var s in o.prototype)n.prototype[s]||(n.prototype[s]=o.prototype[s]);var a=this.registered_node_types[e];if(a)console.log("replacing node type: "+e);else if(Object.hasOwnProperty(n.prototype,"shape")||Object.defineProperty(n.prototype,"shape",{set:function(e){switch(e){case"default":delete this._shape;break;case"box":this._shape=t.BOX_SHAPE;break;case"round":this._shape=t.ROUND_SHAPE;break;case"circle":this._shape=t.CIRCLE_SHAPE;break;case"card":this._shape=t.CARD_SHAPE;break;default:this._shape=e}},get:function(e){return this._shape},enumerable:!0,configurable:!0}),n.prototype.onPropertyChange&&console.warn("LiteGraph node class "+e+" has onPropertyChange method, it must be called onPropertyChanged with d at the end"),n.supported_extensions)for(var s in n.supported_extensions){(l=n.supported_extensions[s])&&l.constructor===String&&(this.node_types_by_file_extension[l.toLowerCase()]=n)}if(this.registered_node_types[e]=n,n.constructor.name&&(this.Nodes[r]=n),t.onNodeTypeRegistered&&t.onNodeTypeRegistered(e,n),a&&t.onNodeTypeReplaced&&t.onNodeTypeReplaced(e,n,a),n.prototype.onPropertyChange&&console.warn("LiteGraph node class "+e+" has onPropertyChange method, it must be called onPropertyChanged with d at the end"),n.supported_extensions)for(s=0;s<n.supported_extensions.length;s++){var l;(l=n.supported_extensions[s])&&l.constructor===String&&(this.node_types_by_file_extension[l.toLowerCase()]=n)}this.auto_load_slot_types&&(nodeTmp=new n(n.title||"tmpnode"))},unregisterNodeType:function(e){var t=e.constructor===String?this.registered_node_types[e]:e;if(!t)throw"node type not found: "+e;delete this.registered_node_types[t.type],t.constructor.name&&delete this.Nodes[t.constructor.name]},registerNodeAndSlotType:function(e,t,n){n=n||!1;var r=(e.constructor===String&&"anonymous"!==this.registered_node_types[e]?this.registered_node_types[e]:e).constructor.type;if("string"==typeof t)var i=t.split(",");else if(t==this.EVENT||t==this.ACTION)i=["_event_"];else i=["*"];for(var s=0;s<i.length;++s){var o=i[s];""===o&&(o="*");var a=n?"registered_slot_out_types":"registered_slot_in_types";void 0===this[a][o]&&(this[a][o]={nodes:[]}),this[a][o].nodes.push(r),n?this.slot_types_out.includes(o.toLowerCase())||(this.slot_types_out.push(o.toLowerCase()),this.slot_types_out.sort()):this.slot_types_in.includes(o.toLowerCase())||(this.slot_types_in.push(o.toLowerCase()),this.slot_types_in.sort())}},wrapFunctionAsNode:function(e,n,r,i,s){for(var o=Array(n.length),a="",l=t.getParameterNames(n),c=0;c<l.length;++c)a+="this.addInput('"+l[c]+"',"+(r&&r[c]?"'"+r[c]+"'":"0")+");\n";a+="this.addOutput('out',"+(i?"'"+i+"'":0)+");\n",s&&(a+="this.properties = "+JSON.stringify(s)+";\n");var u=Function(a);u.title=e.split("/").pop(),u.desc="Generated from "+n.name,u.prototype.onExecute=function(){for(var e=0;e<o.length;++e)o[e]=this.getInputData(e);var t=n.apply(this,o);this.setOutputData(0,t)},this.registerNodeType(e,u)},clearRegisteredTypes:function(){this.registered_node_types={},this.node_types_by_file_extension={},this.Nodes={},this.searchbox_extras={}},addNodeMethod:function(e,t){for(var n in o.prototype[e]=t,this.registered_node_types){var r=this.registered_node_types[n];r.prototype[e]&&(r.prototype["_"+e]=r.prototype[e]),r.prototype[e]=t}},createNode:function(e,n,r){var i=this.registered_node_types[e];if(!i)return t.debug&&console.log('GraphNode type "'+e+'" not registered.'),null;i.prototype;n=n||i.title||e;var s=null;if(t.catch_exceptions)try{s=new i(n)}catch(e){return console.error(e),null}else s=new i(n);if(s.type=e,!s.title&&n&&(s.title=n),s.properties||(s.properties={}),s.properties_info||(s.properties_info=[]),s.flags||(s.flags={}),s.size||(s.size=s.computeSize()),s.pos||(s.pos=t.DEFAULT_POSITION.concat()),s.mode||(s.mode=t.ALWAYS),r)for(var o in r)s[o]=r[o];return s.onNodeCreated&&s.onNodeCreated(),s},getNodeType:function(e){return this.registered_node_types[e]},getNodeTypesInCategory:function(e,t){var n=[];for(var r in this.registered_node_types){var i=this.registered_node_types[r];i.filter==t&&(""==e?null==i.category&&n.push(i):i.category==e&&n.push(i))}return this.auto_sort_node_types&&n.sort((function(e,t){return e.title.localeCompare(t.title)})),n},getNodeTypesCategories:function(e){var t={"":1};for(var n in this.registered_node_types){var r=this.registered_node_types[n];if(r.category&&!r.skip_list){if(r.filter!=e)continue;t[r.category]=1}}var i=[];for(var n in t)i.push(n);return this.auto_sort_node_types?i.sort():i},reloadNodes:function(e){for(var n=document.getElementsByTagName("script"),r=[],i=0;i<n.length;i++)r.push(n[i]);var s=document.getElementsByTagName("head")[0];e=document.location.href+e;for(i=0;i<r.length;i++){var o=r[i].src;if(o&&o.substr(0,e.length)==e)try{t.debug&&console.log("Reloading: "+o);var a=document.createElement("script");a.type="text/javascript",a.src=o,s.appendChild(a),s.removeChild(r[i])}catch(e){if(t.throw_errors)throw e;t.debug&&console.log("Error while reloading "+o)}}t.debug&&console.log("Nodes reloaded")},cloneObject:function(e,t){if(null==e)return null;var n=JSON.parse(JSON.stringify(e));if(!t)return n;for(var r in n)t[r]=n[r];return t},isValidConnection:function(e,n){if(""!=e&&"*"!==e||(e=0),""!=n&&"*"!==n||(n=0),!e||!n||e==n||e==t.EVENT&&n==t.ACTION)return!0;if(e=String(e),n=String(n),e=e.toLowerCase(),n=n.toLowerCase(),-1==e.indexOf(",")&&-1==n.indexOf(","))return e==n;for(var r=e.split(","),i=n.split(","),s=0;s<r.length;++s)for(var o=0;o<i.length;++o)if(this.isValidConnection(r[s],i[o]))return!0;return!1},registerSearchboxExtra:function(e,t,n){this.searchbox_extras[t.toLowerCase()]={type:e,desc:t,data:n}},fetchFile:function(e,n,r,i){if(!e)return null;if(n=n||"text",e.constructor===String)return"http"==e.substr(0,4)&&t.proxy&&(e=t.proxy+e.substr(e.indexOf(":")+3)),fetch(e).then((function(e){if(!e.ok)throw new Error("File not found");return"arraybuffer"==n?e.arrayBuffer():"text"==n||"string"==n?e.text():"json"==n?e.json():"blob"==n?e.blob():void 0})).then((function(e){r&&r(e)})).catch((function(t){console.error("error fetching file:",e),i&&i(t)}));if(e.constructor===File||e.constructor===Blob){var s=new FileReader;if(s.onload=function(e){var t=e.target.result;"json"==n&&(t=JSON.parse(t)),r&&r(t)},"arraybuffer"==n)return s.readAsArrayBuffer(e);if("text"==n||"json"==n)return s.readAsText(e);if("blob"==n)return s.readAsBinaryString(e)}return null}};function n(e,t=1,n=1){var r;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3==(r=e.substring(1).split("")).length&&(r=[r[0],r[0],r[1],r[1],r[2],r[2]]),"rgba("+[(r="0x"+r.join(""))>>16&255,r>>8&255,255&r].map((e=>Math.min(255,e*n))).join(",")+`,${t})`;throw new Error("Bad Hex")}function i(e){t.debug&&console.log("Graph created"),this.list_of_graphcanvas=null,this.clear(),e&&this.configure(e)}function s(e,t,n,r,i,s){this.id=e,this.type=t,this.origin_id=n,this.origin_slot=r,this.target_id=i,this.target_slot=s,this._data=null,this._pos=new Float32Array(2)}function o(e){this._ctor(e)}function a(e){this._ctor(e)}function l(e,t){this.offset=new Float32Array([0,0]),this.scale=1,this.max_scale=10,this.min_scale=.1,this.onredraw=null,this.enabled=!0,this.last_mouse=[0,0],this.element=null,this.visible_area=new Float32Array(4),e&&(this.element=e,t||this.bindEvents(e))}function c(e,n,r){this.options=r=r||{},this.background_image=c.DEFAULT_BACKGROUND_IMAGE,e&&e.constructor===String&&(e=document.querySelector(e)),this.ds=new l,this.zoom_modify_alpha=!0,this.title_text_font=t.NODE_TEXT_SIZE+"px Arial",this.inner_text_font="normal "+t.NODE_SUBTEXT_SIZE+"px Arial",this.node_title_color=t.NODE_TITLE_COLOR,this.default_link_color=t.LINK_COLOR,this.default_connection_color={input_off:"#778",input_on:"#7F7",output_off:"#778",output_on:"#7F7"},this.title_shadow_blur=0,this.title_shadow_offset_x=0,this.title_shadow_offset_y=0,this.title_shadow_color="#000",this.default_connection_color_byType={number:"#1da144",float:"#1da144",uint:"#ffb066",int:"#FFD166",boolean:"#EF476F",bool:"#EF476F",float3:"#FFD166",float2:"#45D592",float4:"#06D6A0",string:"#77F"},this.default_connection_color_byTypeOff={number:"#1da144",float:"#1da144",uint:"#ffb066",int:"#FFD166",boolean:"#EF476F",bool:"#EF476F",float3:"#FFD166",float2:"#45D592",float4:"#06D6A0",string:"#77F"},this.highquality_render=!0,this.use_gradients=!1,this.editor_alpha=1,this.pause_rendering=!1,this.clear_background=!0,this.read_only=!1,this.render_only_selected=!0,this.live_mode=!1,this.show_info=!0,this.allow_dragcanvas=!0,this.allow_dragnodes=!0,this.allow_interaction=!0,this.allow_searchbox=!0,this.allow_reconnect_links=!0,this.align_to_grid=!1,this.drag_mode=!1,this.dragging_rectangle=null,this.filter=null,this.set_canvas_dirty_on_mouse_event=!0,this.always_render_background=!1,this.render_shadows=!0,this.render_canvas_border=!0,this.render_connections_shadows=!1,this.render_connections_border=!1,this.render_curved_connections=!1,this.render_connection_arrows=!1,this.render_collapsed_slots=!0,this.render_execution_order=!1,this.render_title_colored=!0,this.render_link_tooltip=!0,this.render_link_center=!1,this.links_render_mode=t.SPLINE_LINK,this.mouse=[0,0],this.graph_mouse=[0,0],this.canvas_mouse=this.graph_mouse,this.onSearchBox=null,this.onSearchBoxSelection=null,this.onMouse=null,this.onDrawBackground=null,this.onDrawForeground=null,this.onDrawOverlay=null,this.onDrawLinkTooltip=null,this.onNodeMoved=null,this.onSelectionChange=null,this.onConnectingChange=null,this.onBeforeChange=null,this.onAfterChange=null,this.connections_width=2,this.round_radius=3,this.current_node=null,this.node_widget=null,this.over_link_center=null,this.last_mouse_position=[0,0],this.visible_area=this.ds.visible_area,this.visible_links=[],this.viewport=r.viewport||null,n&&n.attachCanvas(this),this.setCanvas(e,r.skip_events),this.clear(),r.skip_render||this.startRendering(),this.autoresize=r.autoresize}"undefined"!=typeof performance?t.getTime=performance.now.bind(performance):"undefined"!=typeof Date&&Date.now?t.getTime=Date.now.bind(Date):t.getTime=void 0!==r?function(){var e=r.hrtime();return.001*e[0]+1e-6*e[1]}:function(){return(new Date).getTime()},e.LGraph=t.LGraph=i,i.supported_types=["number","string","boolean"],i.prototype.getSupportedTypes=function(){return this.supported_types||i.supported_types},i.STATUS_STOPPED=1,i.STATUS_RUNNING=2,i.prototype.clear=function(){if(this.stop(),this.status=i.STATUS_STOPPED,this.last_node_id=0,this.last_link_id=0,this._version=-1,this._nodes)for(var e=0;e<this._nodes.length;++e){var t=this._nodes[e];t.onRemoved&&t.onRemoved()}this._nodes=[],this._nodes_by_id={},this._nodes_in_order=[],this._nodes_executable=null,this._groups=[],this.links={},this.iteration=0,this.config={},this.vars={},this.extra={},this.globaltime=0,this.runningtime=0,this.fixedtime=0,this.fixedtime_lapse=.01,this.elapsed_time=.01,this.last_update_time=0,this.starttime=0,this.catch_errors=!0,this.nodes_executing=[],this.nodes_actioning=[],this.nodes_executedAction=[],this.inputs={},this.outputs={},this.change(),this.sendActionToCanvas("clear")},i.prototype.attachCanvas=function(e){if(e.constructor!=c)throw"attachCanvas expects a LGraphCanvas instance";e.graph&&e.graph!=this&&e.graph.detachCanvas(e),e.graph=this,this.list_of_graphcanvas||(this.list_of_graphcanvas=[]),this.list_of_graphcanvas.push(e)},i.prototype.detachCanvas=function(e){if(this.list_of_graphcanvas){var t=this.list_of_graphcanvas.indexOf(e);-1!=t&&(e.graph=null,this.list_of_graphcanvas.splice(t,1))}},i.prototype.start=function(e){if(this.status!=i.STATUS_RUNNING){this.status=i.STATUS_RUNNING,this.onPlayEvent&&this.onPlayEvent(),this.sendEventToAllNodes("onStart"),this.starttime=t.getTime(),this.last_update_time=this.starttime;var n=this;if(0==(e=e||0)&&"undefined"!=typeof window&&window.requestAnimationFrame){this.execution_timer_id=-1,function e(){-1==n.execution_timer_id&&(window.requestAnimationFrame(e),n.onBeforeStep&&n.onBeforeStep(),n.runStep(1,!n.catch_errors),n.onAfterStep&&n.onAfterStep())}()}else this.execution_timer_id=setInterval((function(){n.onBeforeStep&&n.onBeforeStep(),n.runStep(1,!n.catch_errors),n.onAfterStep&&n.onAfterStep()}),e)}},i.prototype.stop=function(){this.status!=i.STATUS_STOPPED&&(this.status=i.STATUS_STOPPED,this.onStopEvent&&this.onStopEvent(),null!=this.execution_timer_id&&(-1!=this.execution_timer_id&&clearInterval(this.execution_timer_id),this.execution_timer_id=null),this.sendEventToAllNodes("onStop"))},i.prototype.runStep=function(e,n,r){e=e||1;var i=t.getTime();this.globaltime=.001*(i-this.starttime);var s=this._nodes_executable?this._nodes_executable:this._nodes;if(s){if(r=r||s.length,n){for(var o=0;o<e;o++){for(var a=0;a<r;++a){(l=s[a]).mode==t.ALWAYS&&l.onExecute&&l.doExecute()}this.fixedtime+=this.fixedtime_lapse,this.onExecuteStep&&this.onExecuteStep()}this.onAfterExecute&&this.onAfterExecute()}else try{for(o=0;o<e;o++){for(a=0;a<r;++a){var l;(l=s[a]).mode==t.ALWAYS&&l.onExecute&&l.onExecute()}this.fixedtime+=this.fixedtime_lapse,this.onExecuteStep&&this.onExecuteStep()}this.onAfterExecute&&this.onAfterExecute(),this.errors_in_execution=!1}catch(e){if(this.errors_in_execution=!0,t.throw_errors)throw e;t.debug&&console.log("Error during execution: "+e),this.stop()}var c=t.getTime(),u=c-i;0==u&&(u=1),this.execution_time=.001*u,this.globaltime+=.001*u,this.iteration+=1,this.elapsed_time=.001*(c-this.last_update_time),this.last_update_time=c,this.nodes_executing=[],this.nodes_actioning=[],this.nodes_executedAction=[]}},i.prototype.updateExecutionOrder=function(){this._nodes_in_order=this.computeExecutionOrder(!1),this._nodes_executable=[];for(var e=0;e<this._nodes_in_order.length;++e)this._nodes_in_order[e].onExecute&&this._nodes_executable.push(this._nodes_in_order[e])},i.prototype.computeExecutionOrder=function(e,n){for(var r=[],i=[],s={},o={},a={},l=0,c=this._nodes.length;l<c;++l){var u=this._nodes[l];if(!e||u.onExecute){s[u.id]=u;var h=0;if(u.inputs)for(var d=0,p=u.inputs.length;d<p;d++)u.inputs[d]&&null!=u.inputs[d].link&&(h+=1);0==h?(i.push(u),n&&(u._level=1)):(n&&(u._level=0),a[u.id]=h)}}for(;0!=i.length;){u=i.shift();if(r.push(u),delete s[u.id],u.outputs)for(l=0;l<u.outputs.length;l++){var f=u.outputs[l];if(null!=f&&null!=f.links&&0!=f.links.length)for(d=0;d<f.links.length;d++){var m=f.links[d],g=this.links[m];if(g&&!o[g.id]){var v=this.getNodeById(g.target_id);null!=v?(n&&(!v._level||v._level<=u._level)&&(v._level=u._level+1),o[g.id]=!0,a[v.id]-=1,0==a[v.id]&&i.push(v)):o[g.id]=!0}}}}for(var l in s)r.push(s[l]);r.length!=this._nodes.length&&t.debug&&console.warn("something went wrong, nodes missing");for(c=r.length,l=0;l<c;++l)r[l].order=l;r=r.sort((function(e,t){var n=e.constructor.priority||e.priority||0,r=t.constructor.priority||t.priority||0;return n==r?e.order-t.order:n-r}));for(l=0;l<c;++l)r[l].order=l;return r},i.prototype.getAncestors=function(e){for(var t=[],n=[e],r={};n.length;){var i=n.shift();if(i.inputs){r[i.id]||i==e||(r[i.id]=!0,t.push(i));for(var s=0;s<i.inputs.length;++s){var o=i.getInputNode(s);o&&-1==t.indexOf(o)&&n.push(o)}}}return t.sort((function(e,t){return e.order-t.order})),t},i.prototype.arrange=function(e,n){e=e||100;for(var r=this.computeExecutionOrder(!1,!0),i=[],s=0;s<r.length;++s){var o=(d=r[s])._level||1;i[o]||(i[o]=[]),i[o].push(d)}var a=e;for(s=0;s<i.length;++s){var l=i[s];if(l){for(var c=100,u=e+t.NODE_TITLE_HEIGHT,h=0;h<l.length;++h){var d;(d=l[h]).pos[0]=n==t.VERTICAL_LAYOUT?u:a,d.pos[1]=n==t.VERTICAL_LAYOUT?a:u,max_size_index=n==t.VERTICAL_LAYOUT?1:0,d.size[max_size_index]>c&&(c=d.size[max_size_index]),node_size_index=n==t.VERTICAL_LAYOUT?0:1,u+=d.size[node_size_index]+e+t.NODE_TITLE_HEIGHT}a+=c+e}}this.setDirtyCanvas(!0,!0)},i.prototype.getTime=function(){return this.globaltime},i.prototype.getFixedTime=function(){return this.fixedtime},i.prototype.getElapsedTime=function(){return this.elapsed_time},i.prototype.sendEventToAllNodes=function(e,n,r){r=r||t.ALWAYS;var i=this._nodes_in_order?this._nodes_in_order:this._nodes;if(i)for(var s=0,o=i.length;s<o;++s){var a=i[s];a.constructor!==t.Subgraph||"onExecute"==e?a[e]&&a.mode==r&&(void 0===n?a[e]():n&&n.constructor===Array?a[e].apply(a,n):a[e](n)):a.mode==r&&a.sendEventToAllNodes(e,n,r)}},i.prototype.sendActionToCanvas=function(e,t){if(this.list_of_graphcanvas)for(var n=0;n<this.list_of_graphcanvas.length;++n){var r=this.list_of_graphcanvas[n];r[e]&&r[e].apply(r,t)}},i.prototype.add=function(e,n){if(e){if(e.constructor===a)return this._groups.push(e),this.setDirtyCanvas(!0),this.change(),e.graph=this,void this._version++;if(-1!=e.id&&null!=this._nodes_by_id[e.id]&&(console.warn("LiteGraph: there is already a node with this ID, changing it"),e.id=++this.last_node_id),this._nodes.length>=t.MAX_NUMBER_OF_NODES)throw"LiteGraph: max number of nodes in a graph reached";return null==e.id||-1==e.id?e.id=++this.last_node_id:this.last_node_id<e.id&&(this.last_node_id=e.id),e.graph=this,this._version++,this._nodes.push(e),this._nodes_by_id[e.id]=e,e.onAdded&&e.onAdded(this),this.config.align_to_grid&&e.alignToGrid(),n||this.updateExecutionOrder(),this.onNodeAdded&&this.onNodeAdded(e),this.setDirtyCanvas(!0),this.change(),e}},i.prototype.remove=function(e){if(e.constructor===t.LGraphGroup){var n=this._groups.indexOf(e);return-1!=n&&this._groups.splice(n,1),e.graph=null,this._version++,this.setDirtyCanvas(!0,!0),void this.change()}if(null!=this._nodes_by_id[e.id]&&!e.ignore_remove){if(this.beforeChange(),e.inputs)for(var r=0;r<e.inputs.length;r++){null!=(i=e.inputs[r]).link&&e.disconnectInput(r)}if(e.outputs)for(r=0;r<e.outputs.length;r++){var i;null!=(i=e.outputs[r]).links&&i.links.length&&e.disconnectOutput(r)}if(e.onRemoved&&e.onRemoved(),e.graph=null,this._version++,this.list_of_graphcanvas)for(r=0;r<this.list_of_graphcanvas.length;++r){var s=this.list_of_graphcanvas[r];s.selected_nodes[e.id]&&delete s.selected_nodes[e.id],s.node_dragged==e&&(s.node_dragged=null)}var o=this._nodes.indexOf(e);-1!=o&&this._nodes.splice(o,1),delete this._nodes_by_id[e.id],this.onNodeRemoved&&this.onNodeRemoved(e),this.sendActionToCanvas("checkPanels"),this.setDirtyCanvas(!0,!0),this.afterChange(),this.change(),this.updateExecutionOrder()}},i.prototype.getNodeById=function(e){return null==e?null:this._nodes_by_id[e]},i.prototype.findNodesByClass=function(e,t){(t=t||[]).length=0;for(var n=0,r=this._nodes.length;n<r;++n)this._nodes[n].constructor===e&&t.push(this._nodes[n]);return t},i.prototype.findNodesByType=function(e,t){e=e.toLowerCase();(t=t||[]).length=0;for(var n=0,r=this._nodes.length;n<r;++n)this._nodes[n].type.toLowerCase()==e&&t.push(this._nodes[n]);return t},i.prototype.findNodeByTitle=function(e){for(var t=0,n=this._nodes.length;t<n;++t)if(this._nodes[t].title==e)return this._nodes[t];return null},i.prototype.findNodesByTitle=function(e){for(var t=[],n=0,r=this._nodes.length;n<r;++n)this._nodes[n].title==e&&t.push(this._nodes[n]);return t},i.prototype.getNodeOnPos=function(e,t,n,r){for(var i=(n=n||this._nodes).length-1;i>=0;i--){var s=n[i];if(s.isPointInside(e,t,r))return s}return null},i.prototype.getNodesOnPos=function(e,t,n,r){for(var i=[],s=(n=n||this._nodes).length-1;s>=0;s--){var o=n[s];o.isPointInside(e,t,r)&&i.push(o)}return i},i.prototype.getGroupOnPos=function(e,t){for(var n=this._groups.length-1;n>=0;n--){var r=this._groups[n];if(r.isPointInside(e,t,2,!0))return r}return null},i.prototype.checkNodeTypes=function(){for(var e=0;e<this._nodes.length;e++){var n=this._nodes[e],r=t.registered_node_types[n.type];if(n.constructor!=r){console.log("node being replaced by newer version: "+n.type);var i=t.createNode(n.type);!0,this._nodes[e]=i,i.configure(n.serialize()),i.graph=this,this._nodes_by_id[i.id]=i,n.inputs&&(i.inputs=n.inputs.concat()),n.outputs&&(i.outputs=n.outputs.concat())}}this.updateExecutionOrder()},i.prototype.onAction=function(e,n,r){this._input_nodes=this.findNodesByClass(t.GraphInput,this._input_nodes);for(var i=0;i<this._input_nodes.length;++i){var s=this._input_nodes[i];if(s.properties.name==e){s.actionDo(e,n,r);break}}},i.prototype.trigger=function(e,t){this.onTrigger&&this.onTrigger(e,t)},i.prototype.addInput=function(e,t,n){this.inputs[e]||(this.beforeChange(),this.inputs[e]={name:e,type:t,value:n},this._version++,this.afterChange(),this.onInputAdded&&this.onInputAdded(e,t),this.onInputsOutputsChange&&this.onInputsOutputsChange())},i.prototype.setInputData=function(e,t){var n=this.inputs[e];n&&(n.value=t)},i.prototype.getInputData=function(e){var t=this.inputs[e];return t?t.value:null},i.prototype.renameInput=function(e,t){if(t!=e){if(!this.inputs[e])return!1;if(this.inputs[t])return console.error("there is already one input with that name"),!1;this.inputs[t]=this.inputs[e],delete this.inputs[e],this._version++,this.onInputRenamed&&this.onInputRenamed(e,t),this.onInputsOutputsChange&&this.onInputsOutputsChange()}},i.prototype.changeInputType=function(e,t){if(!this.inputs[e])return!1;this.inputs[e].type&&String(this.inputs[e].type).toLowerCase()==String(t).toLowerCase()||(this.inputs[e].type=t,this._version++,this.onInputTypeChanged&&this.onInputTypeChanged(e,t))},i.prototype.removeInput=function(e){return!!this.inputs[e]&&(delete this.inputs[e],this._version++,this.onInputRemoved&&this.onInputRemoved(e),this.onInputsOutputsChange&&this.onInputsOutputsChange(),!0)},i.prototype.addOutput=function(e,t,n){this.outputs[e]={name:e,type:t,value:n},this._version++,this.onOutputAdded&&this.onOutputAdded(e,t),this.onInputsOutputsChange&&this.onInputsOutputsChange()},i.prototype.setOutputData=function(e,t){var n=this.outputs[e];n&&(n.value=t)},i.prototype.getOutputData=function(e){var t=this.outputs[e];return t?t.value:null},i.prototype.renameOutput=function(e,t){return!!this.outputs[e]&&(this.outputs[t]?(console.error("there is already one output with that name"),!1):(this.outputs[t]=this.outputs[e],delete this.outputs[e],this._version++,this.onOutputRenamed&&this.onOutputRenamed(e,t),void(this.onInputsOutputsChange&&this.onInputsOutputsChange())))},i.prototype.changeOutputType=function(e,t){if(!this.outputs[e])return!1;this.outputs[e].type&&String(this.outputs[e].type).toLowerCase()==String(t).toLowerCase()||(this.outputs[e].type=t,this._version++,this.onOutputTypeChanged&&this.onOutputTypeChanged(e,t))},i.prototype.removeOutput=function(e){return!!this.outputs[e]&&(delete this.outputs[e],this._version++,this.onOutputRemoved&&this.onOutputRemoved(e),this.onInputsOutputsChange&&this.onInputsOutputsChange(),!0)},i.prototype.triggerInput=function(e,t){for(var n=this.findNodesByTitle(e),r=0;r<n.length;++r)n[r].onTrigger(t)},i.prototype.setCallback=function(e,t){for(var n=this.findNodesByTitle(e),r=0;r<n.length;++r)n[r].setTrigger(t)},i.prototype.beforeChange=function(e){this.onBeforeChange&&this.onBeforeChange(this,e),this.sendActionToCanvas("onBeforeChange",this)},i.prototype.afterChange=function(e){this.onAfterChange&&this.onAfterChange(this,e),this.sendActionToCanvas("onAfterChange",this)},i.prototype.connectionChange=function(e,t){this.updateExecutionOrder(),this.onConnectionChange&&this.onConnectionChange(e),this._version++,this.sendActionToCanvas("onConnectionChange")},i.prototype.isLive=function(){if(!this.list_of_graphcanvas)return!1;for(var e=0;e<this.list_of_graphcanvas.length;++e){if(this.list_of_graphcanvas[e].live_mode)return!0}return!1},i.prototype.clearTriggeredSlots=function(){for(var e in this.links){var t=this.links[e];t&&(t._last_time&&(t._last_time=0))}},i.prototype.change=function(){t.debug&&console.log("Graph changed"),this.sendActionToCanvas("setDirty",[!0,!0]),this.on_change&&this.on_change(this)},i.prototype.setDirtyCanvas=function(e,t){this.sendActionToCanvas("setDirty",[e,t])},i.prototype.removeLink=function(e){var t=this.links[e];if(t){var n=this.getNodeById(t.target_id);n&&n.disconnectInput(t.target_slot)}},i.prototype.serialize=function(){for(var e=[],n=0,r=this._nodes.length;n<r;++n)e.push(this._nodes[n].serialize());var i=[];for(var n in this.links){var o=this.links[n];if(!o.serialize){console.warn("weird LLink bug, link info is not a LLink but a regular object");var a=new s;for(var l in o)a[l]=o[l];this.links[n]=a,o=a}i.push(o.serialize())}var c=[];for(n=0;n<this._groups.length;++n)c.push(this._groups[n].serialize());var u={last_node_id:this.last_node_id,last_link_id:this.last_link_id,nodes:e,links:i,groups:c,config:this.config,extra:this.extra,version:t.VERSION};return this.onSerialize&&this.onSerialize(u),u},i.prototype.configure=function(e,n){if(e){n||this.clear();var r=e.nodes;if(e.links&&e.links.constructor===Array){for(var i=[],a=0;a<e.links.length;++a){var l=e.links[a];if(l){var c=new s;c.configure(l),i[c.id]=c}else console.warn("serialized graph link data contains errors, skipping.")}e.links=i}for(var a in e)"nodes"!=a&&"groups"!=a&&(this[a]=e[a]);var u=!1;if(this._nodes=[],r){a=0;for(var h=r.length;a<h;++a){var d=r[a];(p=t.createNode(d.type,d.title))||(t.debug&&console.log("Node not found or has errors: "+d.type),(p=new o).last_serialization=d,p.has_errors=!0,u=!0),p.id=d.id,this.add(p,!0)}for(a=0,h=r.length;a<h;++a){var p;d=r[a];(p=this.getNodeById(d.id))&&p.configure(d)}}if(this._groups.length=0,e.groups)for(a=0;a<e.groups.length;++a){var f=new t.LGraphGroup;f.configure(e.groups[a]),this.add(f)}return this.updateExecutionOrder(),this.extra=e.extra||{},this.onConfigure&&this.onConfigure(e),this._version++,this.setDirtyCanvas(!0,!0),u}},i.prototype.load=function(e,t){var n=this;if(e.constructor===File||e.constructor===Blob){var r=new FileReader;return r.addEventListener("load",(function(e){var r=JSON.parse(e.target.result);n.configure(r),t&&t()})),void r.readAsText(e)}var i=new XMLHttpRequest;i.open("GET",e,!0),i.send(null),i.onload=function(e){if(200===i.status){var r=JSON.parse(i.response);n.configure(r),t&&t()}else console.error("Error loading graph:",i.status,i.response)},i.onerror=function(e){console.error("Error loading graph:",e)}},i.prototype.onNodeTrace=function(e,t,n){},s.prototype.configure=function(e){e.constructor===Array?(this.id=e[0],this.origin_id=e[1],this.origin_slot=e[2],this.target_id=e[3],this.target_slot=e[4],this.type=e[5]):(this.id=e.id,this.type=e.type,this.origin_id=e.origin_id,this.origin_slot=e.origin_slot,this.target_id=e.target_id,this.target_slot=e.target_slot)},s.prototype.serialize=function(){return[this.id,this.origin_id,this.origin_slot,this.target_id,this.target_slot,this.type]},t.LLink=s,e.LGraphNode=t.LGraphNode=o,o.prototype._ctor=function(e){this.title=e||"Unnamed",this.size=[t.NODE_WIDTH,60],this.graph=null,this._pos=new Float32Array(10,10),Object.defineProperty(this,"pos",{set:function(e){!e||e.length<2||(this._pos[0]=e[0],this._pos[1]=e[1])},get:function(){return this._pos},enumerable:!0}),this.id=-1,this.type=null,this.inputs=[],this.outputs=[],this.connections=[],this.properties={},this.properties_info=[],this.flags={}},o.prototype.configure=function(e){for(var n in this.graph&&this.graph._version++,e)if("properties"!=n)null!=e[n]&&("object"==typeof e[n]?this[n]&&this[n].configure?this[n].configure(e[n]):this[n]=t.cloneObject(e[n],this[n]):this[n]=e[n]);else for(var r in e.properties)this.properties[r]=e.properties[r],this.onPropertyChanged&&this.onPropertyChanged(r,e.properties[r]);if(e.title||(this.title=this.constructor.title),this.inputs)for(var i=0;i<this.inputs.length;++i){var s=this.inputs[i],o=this.graph?this.graph.links[s.link]:null;this.onConnectionsChange&&this.onConnectionsChange(t.INPUT,i,!0,o,s),this.onInputAdded&&this.onInputAdded(s)}if(this.outputs)for(i=0;i<this.outputs.length;++i){var a=this.outputs[i];if(a.links){for(n=0;n<a.links.length;++n){o=this.graph?this.graph.links[a.links[n]]:null;this.onConnectionsChange&&this.onConnectionsChange(t.OUTPUT,i,!0,o,a)}this.onOutputAdded&&this.onOutputAdded(a)}}if(this.widgets){for(i=0;i<this.widgets.length;++i){var l=this.widgets[i];l&&(l.options&&l.options.property&&this.properties[l.options.property]&&(l.value=JSON.parse(JSON.stringify(this.properties[l.options.property]))))}if(e.widgets_values)for(i=0;i<e.widgets_values.length;++i)this.widgets[i]&&(this.widgets[i].value=e.widgets_values[i])}this.onConfigure&&this.onConfigure(e)},o.prototype.serialize=function(){var e={id:this.id,type:this.type,pos:this.pos,size:this.size,flags:t.cloneObject(this.flags),order:this.order,mode:this.mode,hide_input_connections:this.hide_input_connections};if(this.constructor===o&&this.last_serialization)return this.last_serialization;if(this.inputs&&(e.inputs=this.inputs),this.outputs){for(var n=0;n<this.outputs.length;n++)delete this.outputs[n]._data;e.outputs=this.outputs}if(this.title&&this.title!=this.constructor.title&&(e.title=this.title),this.properties&&(e.properties=t.cloneObject(this.properties)),this.widgets&&this.serialize_widgets){e.widgets_values=[];for(n=0;n<this.widgets.length;++n)this.widgets[n]?e.widgets_values[n]=this.widgets[n].value:e.widgets_values[n]=null}return e.type||(e.type=this.constructor.type),this.color&&(e.color=this.color),this.bgcolor&&(e.bgcolor=this.bgcolor),this.boxcolor&&(e.boxcolor=this.boxcolor),this.shape&&(e.shape=this.shape),this.onSerialize&&this.onSerialize(e)&&console.warn("node onSerialize shouldnt return anything, data should be stored in the object pass in the first parameter"),e},o.prototype.clone=function(){var e=t.createNode(this.type);if(!e)return null;var n=t.cloneObject(this.serialize());if(n.inputs)for(var r=0;r<n.inputs.length;++r)n.inputs[r].link=null;if(n.outputs)for(r=0;r<n.outputs.length;++r)n.outputs[r].links&&(n.outputs[r].links.length=0);return delete n.id,e.configure(n),e},o.prototype.toString=function(){return JSON.stringify(this.serialize())},o.prototype.getTitle=function(){return this.title||this.constructor.title},o.prototype.setProperty=function(e,t){if(this.properties||(this.properties={}),t!==this.properties[e]){var n=this.properties[e];if(this.properties[e]=t,this.onPropertyChanged&&!1===this.onPropertyChanged(e,t,n)&&(this.properties[e]=n),this.widgets)for(var r=0;r<this.widgets.length;++r){var i=this.widgets[r];if(i&&i.options.property==e){i.value=t;break}}}},o.prototype.setOutputData=function(e,t){if(this.outputs&&!(-1==e||e>=this.outputs.length)){var n=this.outputs[e];if(n&&(n._data=t,this.outputs[e].links))for(var r=0;r<this.outputs[e].links.length;r++){var i=this.outputs[e].links[r],s=this.graph.links[i];s&&(s.data=t)}}},o.prototype.setOutputDataType=function(e,t){if(this.outputs&&!(-1==e||e>=this.outputs.length)){var n=this.outputs[e];if(n&&(n.type=t,this.outputs[e].links))for(var r=0;r<this.outputs[e].links.length;r++){var i=this.outputs[e].links[r];this.graph.links[i].type=t}}},o.prototype.getInputData=function(e,t){if(this.inputs&&!(e>=this.inputs.length||null==this.inputs[e].link)){var n=this.inputs[e].link,r=this.graph.links[n];if(!r)return null;if(!t)return r.data;var i=this.graph.getNodeById(r.origin_id);return i?(i.updateOutputData?i.updateOutputData(r.origin_slot):i.onExecute&&i.onExecute(),r.data):r.data}},o.prototype.getInputDataType=function(e){if(!this.inputs)return null;if(e>=this.inputs.length||null==this.inputs[e].link)return null;var t=this.inputs[e].link,n=this.graph.links[t];if(!n)return null;var r=this.graph.getNodeById(n.origin_id);if(!r)return n.type;var i=r.outputs[n.origin_slot];return i?i.type:null},o.prototype.getInputDataByName=function(e,t){var n=this.findInputSlot(e);return-1==n?null:this.getInputData(n,t)},o.prototype.isInputConnected=function(e){return!!this.inputs&&(e<this.inputs.length&&null!=this.inputs[e].link)},o.prototype.getInputInfo=function(e){return this.inputs&&e<this.inputs.length?this.inputs[e]:null},o.prototype.getInputLink=function(e){if(!this.inputs)return null;if(e<this.inputs.length){var t=this.inputs[e];return this.graph.links[t.link]}return null},o.prototype.getInputNode=function(e){if(!this.inputs)return null;if(e>=this.inputs.length)return null;var t=this.inputs[e];if(!t||null===t.link)return null;var n=this.graph.links[t.link];return n?this.graph.getNodeById(n.origin_id):null},o.prototype.getInputOrProperty=function(e){if(!this.inputs||!this.inputs.length)return this.properties?this.properties[e]:null;for(var t=0,n=this.inputs.length;t<n;++t){var r=this.inputs[t];if(e==r.name&&null!=r.link){var i=this.graph.links[r.link];if(i)return i.data}}return this.properties[e]},o.prototype.getOutputData=function(e){return this.outputs?e>=this.outputs.length?null:this.outputs[e]._data:null},o.prototype.getOutputInfo=function(e){return this.outputs&&e<this.outputs.length?this.outputs[e]:null},o.prototype.isOutputConnected=function(e){return!!this.outputs&&(e<this.outputs.length&&this.outputs[e].links&&this.outputs[e].links.length)},o.prototype.isAnyOutputConnected=function(){if(!this.outputs)return!1;for(var e=0;e<this.outputs.length;++e)if(this.outputs[e].links&&this.outputs[e].links.length)return!0;return!1},o.prototype.getOutputNodes=function(e){if(!this.outputs||0==this.outputs.length)return null;if(e>=this.outputs.length)return null;var t=this.outputs[e];if(!t.links||0==t.links.length)return null;for(var n=[],r=0;r<t.links.length;r++){var i=t.links[r],s=this.graph.links[i];if(s){var o=this.graph.getNodeById(s.target_id);o&&n.push(o)}}return n},o.prototype.addOnTriggerInput=function(){var e=this.findInputSlot("onTrigger");if(-1==e){this.addInput("onTrigger",t.EVENT,{optional:!0,nameLocked:!0});return this.findInputSlot("onTrigger")}return e},o.prototype.addOnExecutedOutput=function(){var e=this.findOutputSlot("onExecuted");if(-1==e){this.addOutput("onExecuted",t.ACTION,{optional:!0,nameLocked:!0});return this.findOutputSlot("onExecuted")}return e},o.prototype.onAfterExecuteNode=function(e,t){var n=this.findOutputSlot("onExecuted");-1!=n&&this.triggerSlot(n,e,null,t)},o.prototype.changeMode=function(e){switch(e){case t.ON_EVENT:break;case t.ON_TRIGGER:this.addOnTriggerInput(),this.addOnExecutedOutput();break;case t.NEVER:case t.ALWAYS:case t.ON_REQUEST:break;default:return!1}return this.mode=e,!0},o.prototype.doExecute=function(e,t){t=t||{},this.onExecute&&(t.action_call||(t.action_call=this.id+"_exec_"+Math.floor(9999*Math.random())),this.graph.nodes_executing[this.id]=!0,this.onExecute(e,t),this.graph.nodes_executing[this.id]=!1,this.exec_version=this.graph.iteration,t&&t.action_call&&(this.action_call=t.action_call,this.graph.nodes_executedAction[this.id]=t.action_call)),this.execute_triggered=2,this.onAfterExecuteNode&&this.onAfterExecuteNode(e,t)},o.prototype.actionDo=function(e,t,n){n=n||{},this.onAction&&(n.action_call||(n.action_call=this.id+"_"+(e||"action")+"_"+Math.floor(9999*Math.random())),this.graph.nodes_actioning[this.id]=e||"actioning",this.onAction(e,t,n),this.graph.nodes_actioning[this.id]=!1,n&&n.action_call&&(this.action_call=n.action_call,this.graph.nodes_executedAction[this.id]=n.action_call)),this.action_triggered=2,this.onAfterExecuteNode&&this.onAfterExecuteNode(t,n)},o.prototype.trigger=function(e,n,r){if(this.outputs&&this.outputs.length){this.graph&&(this.graph._last_trigger_time=t.getTime());for(var i=0;i<this.outputs.length;++i){var s=this.outputs[i];!s||s.type!==t.EVENT||e&&s.name!=e||this.triggerSlot(i,n,null,r)}}},o.prototype.triggerSlot=function(e,n,r,i){if(i=i||{},this.outputs){var s=this.outputs[e];if(s){var o=s.links;if(o&&o.length){this.graph&&(this.graph._last_trigger_time=t.getTime());for(var a=0;a<o.length;++a){var l=o[a];if(null==r||r==l){var c=this.graph.links[o[a]];if(c){c._last_time=t.getTime();var u=this.graph.getNodeById(c.target_id);if(u){var h=u.inputs[c.target_slot];if(u.mode===t.ON_TRIGGER)i.action_call||(i.action_call=this.id+"_trigg_"+Math.floor(9999*Math.random())),u.onExecute&&u.doExecute(n,i);else if(u.onAction){i.action_call||(i.action_call=this.id+"_act_"+Math.floor(9999*Math.random()));h=u.inputs[c.target_slot];u.actionDo(h.name,n,i)}}}}}}}}},o.prototype.clearTriggeredSlot=function(e,t){if(this.outputs){var n=this.outputs[e];if(n){var r=n.links;if(r&&r.length)for(var i=0;i<r.length;++i){var s=r[i];if(null==t||t==s){var o=this.graph.links[r[i]];o&&(o._last_time=0)}}}}},o.prototype.setSize=function(e){this.size=e,this.onResize&&this.onResize(this.size)},o.prototype.addProperty=function(e,t,n,r){var i={name:e,type:n,default_value:t};if(r)for(var s in r)i[s]=r[s];return this.properties_info||(this.properties_info=[]),this.properties_info.push(i),this.properties||(this.properties={}),this.properties[e]=t,i},o.prototype.addOutput=function(e,n,r){var i={name:e,type:n,links:null};if(r)for(var s in r)i[s]=r[s];return this.outputs||(this.outputs=[]),this.outputs.push(i),this.onOutputAdded&&this.onOutputAdded(i),t.auto_load_slot_types&&t.registerNodeAndSlotType(this,n,!0),this.setSize(this.computeSize()),this.setDirtyCanvas(!0,!0),i},o.prototype.addOutputs=function(e){for(var n=0;n<e.length;++n){var r=e[n],i={name:r[0],type:r[1],link:null};if(e[2])for(var s in r[2])i[s]=r[2][s];this.outputs||(this.outputs=[]),this.outputs.push(i),this.onOutputAdded&&this.onOutputAdded(i),t.auto_load_slot_types&&t.registerNodeAndSlotType(this,r[1],!0)}this.setSize(this.computeSize()),this.setDirtyCanvas(!0,!0)},o.prototype.removeOutput=function(e){this.disconnectOutput(e),this.outputs.splice(e,1);for(var t=e;t<this.outputs.length;++t)if(this.outputs[t]&&this.outputs[t].links)for(var n=this.outputs[t].links,r=0;r<n.length;++r){var i=this.graph.links[n[r]];i&&(i.origin_slot-=1)}this.setSize(this.computeSize()),this.onOutputRemoved&&this.onOutputRemoved(e),this.setDirtyCanvas(!0,!0)},o.prototype.addInput=function(e,n,r){var i={name:e,type:n=n||0,link:null};if(r)for(var s in r)i[s]=r[s];return this.inputs||(this.inputs=[]),this.inputs.push(i),this.setSize(this.computeSize()),this.onInputAdded&&this.onInputAdded(i),t.registerNodeAndSlotType(this,n),this.setDirtyCanvas(!0,!0),i},o.prototype.addInputs=function(e){for(var n=0;n<e.length;++n){var r=e[n],i={name:r[0],type:r[1],link:null};if(e[2])for(var s in r[2])i[s]=r[2][s];this.inputs||(this.inputs=[]),this.inputs.push(i),this.onInputAdded&&this.onInputAdded(i),t.registerNodeAndSlotType(this,r[1])}this.setSize(this.computeSize()),this.setDirtyCanvas(!0,!0)},o.prototype.removeInput=function(e){this.disconnectInput(e);for(var t=this.inputs.splice(e,1),n=e;n<this.inputs.length;++n)if(this.inputs[n]){var r=this.graph.links[this.inputs[n].link];r&&(r.target_slot-=1)}this.setSize(this.computeSize()),this.onInputRemoved&&this.onInputRemoved(e,t[0]),this.setDirtyCanvas(!0,!0)},o.prototype.addConnection=function(e,t,n,r){var i={name:e,type:t,pos:n,direction:r,links:null};return this.connections.push(i),i},o.prototype.computeSize=function(e){if(this.constructor.size)return this.constructor.size.concat();var n=this.inputs?this.inputs.filter((e=>t.draw_invisible_connections||!1!==e.visible)):null,r=this.outputs?this.outputs.filter((e=>t.draw_invisible_connections||!1!==e.visible)):null,i=Math.max(n?n.length:1,this.outputs?this.outputs.length:1),s=e||new Float32Array([0,0]);i=Math.max(i,1);var o=t.NODE_TEXT_SIZE,a=g(this.title),l=0,c=0;if(n)for(var u=0,h=n.length;u<h;++u){var d=n[u];l<(p=g(d.label||d.name||""))&&(l=p)}if(r)for(u=0,h=r.length;u<h;++u){var p,f=r[u];c<(p=g(f.label||f.name||""))&&(c=p)}s[0]=Math.max(l+c+10,a),s[0]=Math.max(s[0],t.NODE_WIDTH),this.widgets&&this.widgets.length&&(s[0]=Math.max(s[0],1.5*t.NODE_WIDTH)),s[1]=(this.constructor.slot_start_y||0)+i*t.NODE_SLOT_HEIGHT;var m=0;if(this.widgets&&this.widgets.length){for(u=0,h=this.widgets.length;u<h;++u)this.widgets[u].computeSize?m+=this.widgets[u].computeSize(s[0])[1]+4:m+=t.NODE_WIDGET_HEIGHT+4;m+=8}function g(e){return e?o*e.length*.6:0}return this.widgets_up?s[1]=Math.max(s[1],m):null!=this.widgets_start_y?s[1]=Math.max(s[1],m+this.widgets_start_y):s[1]+=m,this.constructor.min_height&&s[1]<this.constructor.min_height&&(s[1]=this.constructor.min_height),s[1]+=6,s},o.prototype.getPropertyInfo=function(e){var t=null;if(this.properties_info)for(var n=0;n<this.properties_info.length;++n)if(this.properties_info[n].name==e){t=this.properties_info[n];break}return this.constructor["@"+e]&&(t=this.constructor["@"+e]),this.constructor.widgets_info&&this.constructor.widgets_info[e]&&(t=this.constructor.widgets_info[e]),!t&&this.onGetPropertyInfo&&(t=this.onGetPropertyInfo(e)),t||(t={}),t.type||(t.type=typeof this.properties[e]),"combo"==t.widget&&(t.type="enum"),t},o.prototype.addWidget=function(e,t,n,r,i){this.widgets||(this.widgets=[]),!i&&r&&r.constructor===Object&&(i=r,r=null),i&&i.constructor===String&&(i={property:i}),r&&r.constructor===String&&(i||(i={}),i.property=r,r=null),r&&r.constructor!==Function&&(console.warn("addWidget: callback must be a function"),r=null);var s={type:e.toLowerCase(),name:t,value:n,callback:r,options:i||{}};if(void 0!==s.options.y&&(s.y=s.options.y),r||s.options.callback||s.options.property||console.warn("LiteGraph addWidget(...) without a callback or property assigned"),"combo"==e&&!s.options.values)throw"LiteGraph addWidget('combo',...) requires to pass values in options: { values:['red','blue'] }";return this.widgets.push(s),this.setSize(this.computeSize()),s},o.prototype.addCustomWidget=function(e){return this.widgets||(this.widgets=[]),this.widgets.push(e),e},o.prototype.getBounding=function(e){return(e=e||new Float32Array(4))[0]=this.pos[0]-4,e[1]=this.pos[1]-t.NODE_TITLE_HEIGHT,e[2]=this.size[0]+4,e[3]=this.flags.collapsed?t.NODE_TITLE_HEIGHT:this.size[1]+t.NODE_TITLE_HEIGHT,this.onBounding&&this.onBounding(e),e},o.prototype.isPointInside=function(e,n,r,i){r=r||0;var s=this.graph&&this.graph.isLive()?0:t.NODE_TITLE_HEIGHT;if(i&&(s=0),this.flags&&this.flags.collapsed){if(y(e,n,this.pos[0]-r,this.pos[1]-t.NODE_TITLE_HEIGHT-r,(this._collapsed_width||t.NODE_COLLAPSED_WIDTH)+2*r,t.NODE_TITLE_HEIGHT+2*r))return!0}else if(this.pos[0]-4-r<e&&this.pos[0]+this.size[0]+4+r>e&&this.pos[1]-s-r<n&&this.pos[1]+this.size[1]+r>n)return!0;return!1},o.prototype.getSlotInPosition=function(e,t){var n=new Float32Array(2);if(this.inputs)for(var r=0,i=this.inputs.length;r<i;++r){var s=this.inputs[r];if(this.getConnectionPos(!0,r,n),y(e,t,n[0]-10,n[1]-5,20,10))return{input:s,slot:r,link_pos:n}}if(this.outputs)for(r=0,i=this.outputs.length;r<i;++r){var o=this.outputs[r];if(this.getConnectionPos(!1,r,n),y(e,t,n[0]-10,n[1]-5,20,10))return{output:o,slot:r,link_pos:n}}return null},o.prototype.findInputSlot=function(e,t){if(!this.inputs)return-1;for(var n=0,r=this.inputs.length;n<r;++n)if(e==this.inputs[n].name)return t?this.inputs[n]:n;return-1},o.prototype.findOutputSlot=function(e,t){if(t=t||!1,!this.outputs)return-1;for(var n=0,r=this.outputs.length;n<r;++n)if(e==this.outputs[n].name)return t?this.outputs[n]:n;return-1},o.prototype.findInputSlotFree=function(e){e=e||{};var t=Object.assign({returnObj:!1,typesNotAccepted:[]},e);if(!this.inputs)return-1;for(var n=0,r=this.inputs.length;n<r;++n)if(!(this.inputs[n].link&&null!=this.inputs[n].link||t.typesNotAccepted&&t.typesNotAccepted.includes&&t.typesNotAccepted.includes(this.inputs[n].type)))return t.returnObj?this.inputs[n]:n;return-1},o.prototype.findOutputSlotFree=function(e){e=e||{};var t=Object.assign({returnObj:!1,typesNotAccepted:[]},e);if(!this.outputs)return-1;for(var n=0,r=this.outputs.length;n<r;++n)if(!(this.outputs[n].links&&null!=this.outputs[n].links||t.typesNotAccepted&&t.typesNotAccepted.includes&&t.typesNotAccepted.includes(this.outputs[n].type)))return t.returnObj?this.outputs[n]:n;return-1},o.prototype.findInputSlotByType=function(e,t,n,r){return this.findSlotByType(!0,e,t,n,r)},o.prototype.findOutputSlotByType=function(e,t,n,r){return this.findSlotByType(!1,e,t,n,r)},o.prototype.findSlotByType=function(e,n,r,i,s){r=r||!1,i=i||!1,s=s||!1;var o=(e=e||!1)?this.inputs:this.outputs;if(!o)return-1;""!=n&&"*"!=n||(n=0);for(var a=0,l=o.length;a<l;++a){var c=(n+"").toLowerCase().split(",");for(u=((u="0"==o[a].type||"*"==o[a].type?"0":o[a].type)+"").toLowerCase().split(","),sI=0;sI<c.length;sI++)for(dI=0;dI<u.length;dI++)if("_event_"==c[sI]&&(c[sI]=t.EVENT),"_event_"==u[sI]&&(u[sI]=t.EVENT),"*"==c[sI]&&(c[sI]=0),"*"==u[sI]&&(u[sI]=0),c[sI]==u[dI]){if(i&&o[a].links&&null!==o[a].links)continue;return r?o[a]:a}}if(i&&!s)for(a=0,l=o.length;a<l;++a){var u;c=(n+"").toLowerCase().split(",");for(u=((u="0"==o[a].type||"*"==o[a].type?"0":o[a].type)+"").toLowerCase().split(","),sI=0;sI<c.length;sI++)for(dI=0;dI<u.length;dI++)if("*"==c[sI]&&(c[sI]=0),"*"==u[sI]&&(u[sI]=0),c[sI]==u[dI])return r?o[a]:a}return-1},o.prototype.connectByType=function(e,n,r,i){i=i||{};var s,o=Object.assign({createEventInCase:!0,firstFreeIfOutputGeneralInCase:!0,generalTypeInCase:!0},i);return n&&n.constructor===Number&&(n=this.graph.getNodeById(n)),(s=n.findInputSlotByType(r,!1,!0))>=0&&null!==s?this.connect(e,n,s):o.createEventInCase&&r==t.EVENT?this.connect(e,n,-1):o.generalTypeInCase&&(s=n.findInputSlotByType(0,!1,!0,!0))>=0||o.firstFreeIfOutputGeneralInCase&&(0==r||"*"==r||""==r)&&(s=n.findInputSlotFree({typesNotAccepted:[t.EVENT]}))>=0?this.connect(e,n,s):(console.debug("no way to connect type: ",r," to targetNODE ",n),null)},o.prototype.connectByTypeOutput=function(e,n,r,i){i=i||{};var s=Object.assign({createEventInCase:!0,firstFreeIfInputGeneralInCase:!0,generalTypeInCase:!0},i);if(n&&n.constructor===Number&&(n=this.graph.getNodeById(n)),(o=n.findOutputSlotByType(r,!1,!0))>=0&&null!==o)return n.connect(o,this,e);if(s.generalTypeInCase&&(o=n.findOutputSlotByType(0,!1,!0,!0))>=0)return n.connect(o,this,e);if(s.createEventInCase&&r==t.EVENT&&t.do_add_triggers_slots){var o=n.addOnExecutedOutput();return n.connect(o,this,e)}return s.firstFreeIfInputGeneralInCase&&(0==r||"*"==r||""==r)&&(o=n.findOutputSlotFree({typesNotAccepted:[t.EVENT]}))>=0?n.connect(o,this,e):(console.debug("no way to connect byOUT type: ",r," to sourceNODE ",n),null)},o.prototype.connect=function(e,n,r){if(r=r||0,!this.graph)return console.log("Connect: Error, node doesn't belong to any graph. Nodes must be added first to a graph before connecting them."),null;if(e.constructor===String){if(-1==(e=this.findOutputSlot(e)))return t.debug&&console.log("Connect: Error, no slot of name "+e),null}else if(!this.outputs||e>=this.outputs.length)return t.debug&&console.log("Connect: Error, slot number not found"),null;if(n&&n.constructor===Number&&(n=this.graph.getNodeById(n)),!n)throw"target node is null";if(n==this)return null;if(r.constructor===String){if(-1==(r=n.findInputSlot(r)))return t.debug&&console.log("Connect: Error, no slot of name "+r),null}else if(r===t.EVENT){if(!t.do_add_triggers_slots)return null;n.changeMode(t.ON_TRIGGER),r=n.findInputSlot("onTrigger")}else if(!n.inputs||r>=n.inputs.length)return t.debug&&console.log("Connect: Error, slot number not found"),null;var i=!1,o=n.inputs[r],a=null,l=this.outputs[e];if(!this.outputs[e])return null;if(n.onBeforeConnectInput&&(r=n.onBeforeConnectInput(r)),!1===r||null===r||!t.isValidConnection(l.type,o.type))return this.setDirtyCanvas(!1,!0),i&&this.graph.connectionChange(this,a),null;if(n.onConnectInput&&!1===n.onConnectInput(r,l.type,l,this,e))return null;if(this.onConnectOutput&&!1===this.onConnectOutput(e,o.type,o,n,r))return null;if(n.inputs[r]&&null!=n.inputs[r].link&&(this.graph.beforeChange(),n.disconnectInput(r,{doProcessChange:!1}),i=!0),null!==l.links&&l.links.length&&l.type===t.EVENT)t.allow_multi_output_for_events||(this.graph.beforeChange(),this.disconnectOutput(e,!1,{doProcessChange:!1}),i=!0);return a=new s(++this.graph.last_link_id,o.type||l.type,this.id,e,n.id,r),this.graph.links[a.id]=a,null==l.links&&(l.links=[]),l.links.push(a.id),n.inputs[r].link=a.id,this.graph&&this.graph._version++,this.onConnectionsChange&&this.onConnectionsChange(t.OUTPUT,e,!0,a,l),n.onConnectionsChange&&n.onConnectionsChange(t.INPUT,r,!0,a,o),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(t.INPUT,n,r,this,e),this.graph.onNodeConnectionChange(t.OUTPUT,this,e,n,r)),this.setDirtyCanvas(!1,!0),this.graph.afterChange(),this.graph.connectionChange(this,a),a},o.prototype.disconnectOutput=function(e,n){if(e.constructor===String){if(-1==(e=this.findOutputSlot(e)))return t.debug&&console.log("Connect: Error, no slot of name "+e),!1}else if(!this.outputs||e>=this.outputs.length)return t.debug&&console.log("Connect: Error, slot number not found"),!1;var r=this.outputs[e];if(!r||!r.links||0==r.links.length)return!1;if(n){if(n.constructor===Number&&(n=this.graph.getNodeById(n)),!n)throw"Target Node not found";for(var i=0,s=r.links.length;i<s;i++){var o=r.links[i];if((a=this.graph.links[o]).target_id==n.id){r.links.splice(i,1),(l=n.inputs[a.target_slot]).link=null,delete this.graph.links[o],this.graph&&this.graph._version++,n.onConnectionsChange&&n.onConnectionsChange(t.INPUT,a.target_slot,!1,a,l),this.onConnectionsChange&&this.onConnectionsChange(t.OUTPUT,e,!1,a,r),this.graph&&this.graph.onNodeConnectionChange&&this.graph.onNodeConnectionChange(t.OUTPUT,this,e),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(t.OUTPUT,this,e),this.graph.onNodeConnectionChange(t.INPUT,n,a.target_slot));break}}}else{for(i=0,s=r.links.length;i<s;i++){var a;o=r.links[i];if(a=this.graph.links[o]){n=this.graph.getNodeById(a.target_id);var l=null;this.graph&&this.graph._version++,n&&((l=n.inputs[a.target_slot]).link=null,n.onConnectionsChange&&n.onConnectionsChange(t.INPUT,a.target_slot,!1,a,l),this.graph&&this.graph.onNodeConnectionChange&&this.graph.onNodeConnectionChange(t.INPUT,n,a.target_slot)),delete this.graph.links[o],this.onConnectionsChange&&this.onConnectionsChange(t.OUTPUT,e,!1,a,r),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(t.OUTPUT,this,e),this.graph.onNodeConnectionChange(t.INPUT,n,a.target_slot))}}r.links=null}return this.setDirtyCanvas(!1,!0),this.graph.connectionChange(this),!0},o.prototype.disconnectInput=function(e){if(e.constructor===String){if(-1==(e=this.findInputSlot(e)))return t.debug&&console.log("Connect: Error, no slot of name "+e),!1}else if(!this.inputs||e>=this.inputs.length)return t.debug&&console.log("Connect: Error, slot number not found"),!1;var n=this.inputs[e];if(!n)return!1;var r=this.inputs[e].link;if(null!=r){this.inputs[e].link=null;var i=this.graph.links[r];if(i){var s=this.graph.getNodeById(i.origin_id);if(!s)return!1;var o=s.outputs[i.origin_slot];if(!o||!o.links||0==o.links.length)return!1;for(var a=0,l=o.links.length;a<l;a++)if(o.links[a]==r){o.links.splice(a,1);break}delete this.graph.links[r],this.graph&&this.graph._version++,this.onConnectionsChange&&this.onConnectionsChange(t.INPUT,e,!1,i,n),s.onConnectionsChange&&s.onConnectionsChange(t.OUTPUT,a,!1,i,o),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(t.OUTPUT,s,a),this.graph.onNodeConnectionChange(t.INPUT,this,e))}}return this.setDirtyCanvas(!1,!0),this.graph&&this.graph.connectionChange(this),!0},o.prototype.getConnectionPos=function(e,n,r){r=r||new Float32Array(2);var i=0;e&&this.inputs&&(i=this.inputs.length),!e&&this.outputs&&(i=this.outputs.length);var s=.5*t.NODE_SLOT_HEIGHT;if(this.flags.collapsed){var o=this._collapsed_width||t.NODE_COLLAPSED_WIDTH;return this.horizontal?(r[0]=this.pos[0]+.5*o,r[1]=e?this.pos[1]-t.NODE_TITLE_HEIGHT:this.pos[1]):(r[0]=e?this.pos[0]:this.pos[0]+o,r[1]=this.pos[1]-.5*t.NODE_TITLE_HEIGHT),r}return e&&-1==n?(r[0]=this.pos[0]+.5*t.NODE_TITLE_HEIGHT,r[1]=this.pos[1]+.5*t.NODE_TITLE_HEIGHT,r):e&&i>n&&this.inputs[n].pos?(r[0]=this.pos[0]+this.inputs[n].pos[0],r[1]=this.pos[1]+this.inputs[n].pos[1],r):!e&&i>n&&this.outputs[n].pos?(r[0]=this.pos[0]+this.outputs[n].pos[0],r[1]=this.pos[1]+this.outputs[n].pos[1],r):this.horizontal?(r[0]=this.pos[0]+(n+.5)*(this.size[0]/i),r[1]=e?this.pos[1]-t.NODE_TITLE_HEIGHT:this.pos[1]+this.size[1],r):(r[0]=e?this.pos[0]+s:this.pos[0]+this.size[0]+1-s,r[1]=this.pos[1]+(n+.7)*t.NODE_SLOT_HEIGHT+(this.constructor.slot_start_y||0),r)},o.prototype.alignToGrid=function(){this.pos[0]=t.CANVAS_GRID_SIZE*Math.round(this.pos[0]/t.CANVAS_GRID_SIZE),this.pos[1]=t.CANVAS_GRID_SIZE*Math.round(this.pos[1]/t.CANVAS_GRID_SIZE)},o.prototype.trace=function(e){this.console||(this.console=[]),this.console.push(e),this.console.length>o.MAX_CONSOLE&&this.console.shift(),this.graph.onNodeTrace&&this.graph.onNodeTrace(this,e)},o.prototype.setDirtyCanvas=function(e,t){this.graph&&this.graph.sendActionToCanvas("setDirty",[e,t])},o.prototype.loadImage=function(e){var n=new Image;n.src=t.node_images_path+e,n.ready=!1;var r=this;return n.onload=function(){this.ready=!0,r.setDirtyCanvas(!0)},n},o.prototype.captureInput=function(e){if(this.graph&&this.graph.list_of_graphcanvas)for(var t=this.graph.list_of_graphcanvas,n=0;n<t.length;++n){var r=t[n];(e||r.node_capturing_input==this)&&(r.node_capturing_input=e?this:null)}},o.prototype.collapse=function(e){this.graph._version++,(!1!==this.constructor.collapsable||e)&&(this.flags.collapsed?this.flags.collapsed=!1:this.flags.collapsed=!0,this.setDirtyCanvas(!0,!0))},o.prototype.pin=function(e){this.graph._version++,this.flags.pinned=void 0===e?!this.flags.pinned:e},o.prototype.localToScreen=function(e,t,n){return[(e+this.pos[0])*n.scale+n.offset[0],(t+this.pos[1])*n.scale+n.offset[1]]},e.LGraphGroup=t.LGraphGroup=a,a.prototype._ctor=function(e){this.title=e||"Group",this.font_size=24,this.color=c.node_colors.pale_blue?c.node_colors.pale_blue.groupcolor:"#AAA",this._bounding=new Float32Array([10,10,140,80]),this._pos=this._bounding.subarray(0,2),this._size=this._bounding.subarray(2,4),this._nodes=[],this.graph=null,Object.defineProperty(this,"pos",{set:function(e){!e||e.length<2||(this._pos[0]=e[0],this._pos[1]=e[1])},get:function(){return this._pos},enumerable:!0}),Object.defineProperty(this,"size",{set:function(e){!e||e.length<2||(this._size[0]=Math.max(140,e[0]),this._size[1]=Math.max(80,e[1]))},get:function(){return this._size},enumerable:!0})},a.prototype.configure=function(e){this.title=e.title,this._bounding.set(e.bounding),this.color=e.color,this.font=e.font},a.prototype.serialize=function(){var e=this._bounding;return{title:this.title,bounding:[Math.round(e[0]),Math.round(e[1]),Math.round(e[2]),Math.round(e[3])],color:this.color,font:this.font}},a.prototype.move=function(e,t,n){if(this._pos[0]+=e,this._pos[1]+=t,!n)for(var r=0;r<this._nodes.length;++r){var i=this._nodes[r];i.pos[0]+=e,i.pos[1]+=t}},a.prototype.recomputeInsideNodes=function(){this._nodes.length=0;for(var e=this.graph._nodes,t=new Float32Array(4),n=0;n<e.length;++n){var r=e[n];r.getBounding(t),b(this._bounding,t)&&this._nodes.push(r)}},a.prototype.isPointInside=o.prototype.isPointInside,a.prototype.setDirtyCanvas=o.prototype.setDirtyCanvas,t.DragAndScale=l,l.prototype.bindEvents=function(e){this.last_mouse=new Float32Array(2),this._binded_mouse_callback=this.onMouse.bind(this),t.pointerListenerAdd(e,"down",this._binded_mouse_callback),t.pointerListenerAdd(e,"move",this._binded_mouse_callback),t.pointerListenerAdd(e,"up",this._binded_mouse_callback),e.addEventListener("mousewheel",this._binded_mouse_callback,!1),e.addEventListener("wheel",this._binded_mouse_callback,!1)},l.prototype.computeVisibleArea=function(e){if(this.element){var t=this.element.width,n=this.element.height,r=-this.offset[0],i=-this.offset[1];e&&(r+=e[0]/this.scale,i+=e[1]/this.scale,t=e[2],n=e[3]);var s=r+t/this.scale,o=i+n/this.scale;this.visible_area[0]=r,this.visible_area[1]=i,this.visible_area[2]=s-r,this.visible_area[3]=o-i}else this.visible_area[0]=this.visible_area[1]=this.visible_area[2]=this.visible_area[3]=0},l.prototype.onMouse=function(e){if(this.enabled){var n=this.element,r=n.getBoundingClientRect(),i=e.clientX-r.left,s=e.clientY-r.top;e.canvasx=i,e.canvasy=s,e.dragging=this.dragging;var o=!this.viewport||this.viewport&&i>=this.viewport[0]&&i<this.viewport[0]+this.viewport[2]&&s>=this.viewport[1]&&s<this.viewport[1]+this.viewport[3],a=!1;if(this.onmouse&&(a=this.onmouse(e)),e.type==t.pointerevents_method+"down"&&o)this.dragging=!0,t.pointerListenerRemove(n,"move",this._binded_mouse_callback),t.pointerListenerAdd(document,"move",this._binded_mouse_callback),t.pointerListenerAdd(document,"up",this._binded_mouse_callback);else if(e.type==t.pointerevents_method+"move"){if(!a){var l=i-this.last_mouse[0],c=s-this.last_mouse[1];this.dragging&&this.mouseDrag(l,c)}}else e.type==t.pointerevents_method+"up"?(this.dragging=!1,t.pointerListenerRemove(document,"move",this._binded_mouse_callback),t.pointerListenerRemove(document,"up",this._binded_mouse_callback),t.pointerListenerAdd(n,"move",this._binded_mouse_callback)):!o||"mousewheel"!=e.type&&"wheel"!=e.type&&"DOMMouseScroll"!=e.type||(e.eventType="mousewheel","wheel"==e.type?e.wheel=-e.deltaY:e.wheel=null!=e.wheelDeltaY?e.wheelDeltaY:-60*e.detail,e.delta=e.wheelDelta?e.wheelDelta/40:e.deltaY?-e.deltaY/3:0,this.changeDeltaScale(1+.05*e.delta));return this.last_mouse[0]=i,this.last_mouse[1]=s,o?(e.preventDefault(),e.stopPropagation(),!1):void 0}},l.prototype.toCanvasContext=function(e){e.scale(this.scale,this.scale),e.translate(this.offset[0],this.offset[1])},l.prototype.convertOffsetToCanvas=function(e){return[(e[0]+this.offset[0])*this.scale,(e[1]+this.offset[1])*this.scale]},l.prototype.convertCanvasToOffset=function(e,t){return(t=t||[0,0])[0]=e[0]/this.scale-this.offset[0],t[1]=e[1]/this.scale-this.offset[1],t},l.prototype.mouseDrag=function(e,t){this.offset[0]+=e/this.scale,this.offset[1]+=t/this.scale,this.onredraw&&this.onredraw(this)},l.prototype.changeScale=function(e,t){if(e<this.min_scale?e=this.min_scale:e>this.max_scale&&(e=this.max_scale),e!=this.scale&&this.element){var n=this.element.getBoundingClientRect();if(n){t=t||[.5*n.width,.5*n.height];var r=this.convertCanvasToOffset(t);this.scale=e,Math.abs(this.scale-1)<.01&&(this.scale=1);var i=this.convertCanvasToOffset(t),s=[i[0]-r[0],i[1]-r[1]];this.offset[0]+=s[0],this.offset[1]+=s[1],this.onredraw&&this.onredraw(this)}}},l.prototype.changeDeltaScale=function(e,t){this.changeScale(this.scale*e,t)},l.prototype.reset=function(){this.scale=1,this.offset[0]=0,this.offset[1]=0},e.LGraphCanvas=t.LGraphCanvas=c,c.DEFAULT_BACKGROUND_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQBJREFUeNrs1rEKwjAUhlETUkj3vP9rdmr1Ysammk2w5wdxuLgcMHyptfawuZX4pJSWZTnfnu/lnIe/jNNxHHGNn//HNbbv+4dr6V+11uF527arU7+u63qfa/bnmh8sWLBgwYJlqRf8MEptXPBXJXa37BSl3ixYsGDBMliwFLyCV/DeLIMFCxYsWLBMwSt4Be/NggXLYMGCBUvBK3iNruC9WbBgwYJlsGApeAWv4L1ZBgsWLFiwYJmCV/AK3psFC5bBggULloJX8BpdwXuzYMGCBctgwVLwCl7Be7MMFixYsGDBsu8FH1FaSmExVfAxBa/gvVmwYMGCZbBg/W4vAQYA5tRF9QYlv/QAAAAASUVORK5CYII=",c.link_type_colors={"-1":t.EVENT_LINK_COLOR,number:"#1da144",float:"#1da144",uint:"#ffb066",int:"#FFD166",boolean:"#EF476F",bool:"#EF476F",float3:"#FFD166",float2:"#45D592",float4:"#06D6A0",string:"#77F",node:"#DCA"},c.gradients={},c.prototype.clear=function(){this.frame=0,this.last_draw_time=0,this.render_time=0,this.fps=0,this.dragging_rectangle=null,this.selected_nodes={},this.selected_group=null,this.visible_nodes=[],this.node_dragged=null,this.node_over=null,this.node_capturing_input=null,this.connecting_node=null,this.highlighted_links={},this.dragging_canvas=!1,this.dirty_canvas=!0,this.dirty_bgcanvas=!0,this.dirty_area=null,this.node_in_panel=null,this.node_widget=null,this.last_mouse=[0,0],this.last_mouseclick=0,this.pointer_is_down=!1,this.pointer_is_double=!1,this.visible_area.set([0,0,0,0]),this.onClear&&this.onClear()},c.prototype.setGraph=function(e,t){this.graph!=e&&(t||this.clear(),e||!this.graph?(e.attachCanvas(this),this._graph_stack&&(this._graph_stack=null),this.setDirty(!0,!0)):this.graph.detachCanvas(this))},c.prototype.getTopGraph=function(){return this._graph_stack.length?this._graph_stack[0]:this.graph},c.prototype.openSubgraph=function(e){if(!e)throw"graph cannot be null";if(this.graph==e)throw"graph cannot be the same";this.clear(),this.graph&&(this._graph_stack||(this._graph_stack=[]),this._graph_stack.push(this.graph)),e.attachCanvas(this),this.checkPanels(),this.setDirty(!0,!0)},c.prototype.closeSubgraph=function(){if(this._graph_stack&&0!=this._graph_stack.length){var e=this.graph._subgraph_node,t=this._graph_stack.pop();this.selected_nodes={},this.highlighted_links={},t.attachCanvas(this),this.setDirty(!0,!0),e&&(this.centerOnNode(e),this.selectNodes([e])),this.ds.offset=[0,0],this.ds.scale=1}},c.prototype.getCurrentGraph=function(){return this.graph},c.prototype.setCanvas=function(e,t){if(e&&e.constructor===String&&!(e=document.getElementById(e)))throw"Error creating LiteGraph canvas: Canvas not found";if(e!==this.canvas&&(!e&&this.canvas&&(t||this.unbindEvents()),this.canvas=e,this.ds.element=e,e)){if(e.className+=" lgraphcanvas",e.data=this,e.tabindex="1",this.bgcanvas=null,this.bgcanvas||(this.bgcanvas=document.createElement("canvas"),this.bgcanvas.width=this.canvas.width,this.bgcanvas.height=this.canvas.height),null==e.getContext){if("canvas"!=e.localName)throw"Element supplied for LGraphCanvas must be a <canvas> element, you passed a "+e.localName;throw"This browser doesn't support Canvas"}null==(this.ctx=e.getContext("2d"))&&(e.webgl_enabled||console.warn("This canvas seems to be WebGL, enabling WebGL renderer"),this.enableWebGL()),t||this.bindEvents()}},c.prototype._doNothing=function(e){return e.preventDefault(),!1},c.prototype._doReturnTrue=function(e){return e.preventDefault(),!0},c.prototype.bindEvents=function(){if(this._events_binded)console.warn("LGraphCanvas: events already binded");else{var e=this.canvas,n=this.getCanvasWindow().document;this._mousedown_callback=this.processMouseDown.bind(this),this._mousewheel_callback=this.processMouseWheel.bind(this),this._mousemove_callback=this.processMouseMove.bind(this),this._mouseup_callback=this.processMouseUp.bind(this),t.pointerListenerAdd(e,"down",this._mousedown_callback,!0),e.addEventListener("mousewheel",this._mousewheel_callback,!1),t.pointerListenerAdd(e,"up",this._mouseup_callback,!0),t.pointerListenerAdd(e,"move",this._mousemove_callback),e.addEventListener("contextmenu",this._doNothing),e.addEventListener("DOMMouseScroll",this._mousewheel_callback,!1),this._key_callback=this.processKey.bind(this),e.addEventListener("keydown",this._key_callback,!0),n.addEventListener("keyup",this._key_callback,!0),this._ondrop_callback=this.processDrop.bind(this),e.addEventListener("dragover",this._doNothing,!1),e.addEventListener("dragend",this._doNothing,!1),e.addEventListener("drop",this._ondrop_callback,!1),e.addEventListener("dragenter",this._doReturnTrue,!1),this._events_binded=!0}},c.prototype.unbindEvents=function(){if(this._events_binded){var e=this.getCanvasWindow().document;t.pointerListenerRemove(this.canvas,"move",this._mousedown_callback),t.pointerListenerRemove(this.canvas,"up",this._mousedown_callback),t.pointerListenerRemove(this.canvas,"down",this._mousedown_callback),this.canvas.removeEventListener("mousewheel",this._mousewheel_callback),this.canvas.removeEventListener("DOMMouseScroll",this._mousewheel_callback),this.canvas.removeEventListener("keydown",this._key_callback),e.removeEventListener("keyup",this._key_callback),this.canvas.removeEventListener("contextmenu",this._doNothing),this.canvas.removeEventListener("drop",this._ondrop_callback),this.canvas.removeEventListener("dragenter",this._doReturnTrue),this._mousedown_callback=null,this._mousewheel_callback=null,this._key_callback=null,this._ondrop_callback=null,this._events_binded=!1}else console.warn("LGraphCanvas: no events binded")},c.getFileExtension=function(e){var t=e.indexOf("?");-1!=t&&(e=e.substr(0,t));var n=e.lastIndexOf(".");return-1==n?"":e.substr(n+1).toLowerCase()},c.prototype.enableWebGL=function(){if(void 0===typeof GL)throw"litegl.js must be included to use a WebGL canvas";if(void 0===typeof enableWebGLCanvas)throw"webglCanvas.js must be included to use this feature";this.gl=this.ctx=enableWebGLCanvas(this.canvas),this.ctx.webgl=!0,this.bgcanvas=this.canvas,this.bgctx=this.gl,this.canvas.webgl_enabled=!0},c.prototype.setDirty=function(e,t){e&&(this.dirty_canvas=!0),t&&(this.dirty_bgcanvas=!0)},c.prototype.getCanvasWindow=function(){if(!this.canvas)return window;var e=this.canvas.ownerDocument;return e.defaultView||e.parentWindow},c.prototype.startRendering=function(){this.is_rendering||(this.is_rendering=!0,function e(){this.pause_rendering||this.draw();var t=this.getCanvasWindow();this.is_rendering&&t.requestAnimationFrame(e.bind(this))}.call(this))},c.prototype.stopRendering=function(){this.is_rendering=!1},c.prototype.blockClick=function(){this.block_click=!0,this.last_mouseclick=0},c.prototype.processMouseDown=function(e){if(this.set_canvas_dirty_on_mouse_event&&(this.dirty_canvas=!0),this.graph){this.adjustMouseEvent(e);var n=this.getCanvasWindow();n.document;c.active_canvas=this;var r=this,i=e.clientX,s=e.clientY;this.ds.viewport=this.viewport;var o=!this.viewport||this.viewport&&i>=this.viewport[0]&&i<this.viewport[0]+this.viewport[2]&&s>=this.viewport[1]&&s<this.viewport[1]+this.viewport[3];if(this.options.skip_events||(t.pointerListenerRemove(this.canvas,"move",this._mousemove_callback),t.pointerListenerAdd(n.document,"move",this._mousemove_callback,!0),t.pointerListenerAdd(n.document,"up",this._mouseup_callback,!0)),o){var a=this.graph.getNodeOnPos(e.canvasX,e.canvasY,this.visible_nodes,5),l=!1,u=t.getTime(),h=void 0===e.isPrimary||!e.isPrimary,d=u-this.last_mouseclick<300&&h;if(this.mouse[0]=e.clientX,this.mouse[1]=e.clientY,this.graph_mouse[0]=e.canvasX,this.graph_mouse[1]=e.canvasY,this.last_click_position=[this.mouse[0],this.mouse[1]],this.pointer_is_down&&h?this.pointer_is_double=!0:this.pointer_is_double=!1,this.pointer_is_down=!0,this.canvas.focus(),t.closeAllContextMenus(n),!this.onMouse||1!=this.onMouse(e)){if(1!=e.which||this.pointer_is_double)if(2==e.which){if(t.middle_click_canvas_dragging)this.dragging_canvas=!0;else if(t.middle_click_slot_add_default_node&&a&&this.allow_interaction&&!l&&!this.read_only&&!this.connecting_node&&!a.flags.collapsed&&!this.live_mode){var p=!1,f=!1,m=!1;if(a.outputs)for(w=0,S=a.outputs.length;w<S;++w){T=a.outputs[w],E=a.getConnectionPos(!1,w);if(y(e.canvasX,e.canvasY,E[0]-15,E[1]-10,30,20)){p=T,f=w,m=!0;break}}if(a.inputs)for(w=0,S=a.inputs.length;w<S;++w){M=a.inputs[w],E=a.getConnectionPos(!0,w);if(y(e.canvasX,e.canvasY,E[0]-15,E[1]-10,30,20)){p=M,f=w,m=!1;break}}if(p&&!1!==f){var g=.5-(f+1)/(m?a.outputs.length:a.inputs.length),b=a.getBounding(),_=[m?b[0]+b[2]:b[0],e.canvasY-80];this.createDefaultNodeForSlot({nodeFrom:m?a:null,slotFrom:m?f:null,nodeTo:m?null:a,slotTo:m?null:f,position:_,nodeType:"AUTO",posAdd:[m?30:-30,130*-g],posSizeFix:[m?0:-1,0]})}}}else(3==e.which||this.pointer_is_double)&&(!this.allow_interaction||l||this.read_only||(a&&(Object.keys(this.selected_nodes).length&&(this.selected_nodes[a.id]||e.shiftKey||e.ctrlKey||e.metaKey)?this.selected_nodes[a.id]||this.selectNodes([a],!0):this.selectNodes([a])),this.processContextMenu(a,e)));else{e.ctrlKey&&(this.dragging_rectangle=new Float32Array(4),this.dragging_rectangle[0]=e.canvasX,this.dragging_rectangle[1]=e.canvasY,this.dragging_rectangle[2]=1,this.dragging_rectangle[3]=1,l=!0),t.alt_drag_do_clone_nodes&&e.altKey&&a&&this.allow_interaction&&!l&&!this.read_only&&(cloned=a.clone())&&(cloned.pos[0]+=5,cloned.pos[1]+=5,this.graph.add(cloned,!1,{doCalcSize:!1}),a=cloned,l=!0,C||(this.allow_dragnodes&&(this.graph.beforeChange(),this.node_dragged=a),this.selected_nodes[a.id]||this.processNodeSelected(a,e)));var x=!1;if(a&&this.allow_interaction&&!l&&!this.read_only){if(this.live_mode||a.flags.pinned||(this.bringToFront(a),a.onBringToFront&&a.onBringToFront(this)),!this.connecting_node&&!a.flags.collapsed&&!this.live_mode)if(!l&&!1!==a.resizable&&y(e.canvasX,e.canvasY,a.pos[0]+a.size[0]-5,a.pos[1]+a.size[1]-5,10,10))this.graph.beforeChange(),this.resizing_node=a,this.canvas.style.cursor="se-resize",l=!0;else{if(a.outputs)for(var w=0,S=a.outputs.length;w<S;++w){var T=a.outputs[w],E=a.getConnectionPos(!1,w);if(y(e.canvasX,e.canvasY,E[0]-15,E[1]-10,30,20)&&(!1!==T.visible||t.draw_invisible_connections)){this.connecting_node=a,this.connecting_output=T,this.connecting_output.slot_index=w,this.connecting_pos=a.getConnectionPos(!1,w),this.connecting_slot=w,t.shift_click_do_break_link_from&&e.shiftKey&&a.disconnectOutput(w),d?a.onOutputDblClick&&a.onOutputDblClick(w,e):a.onOutputClick&&a.onOutputClick(w,e),l=!0;break}}if(a.inputs)for(var w=0,S=a.inputs.length;w<S;++w){var M=a.inputs[w],E=a.getConnectionPos(!0,w);if(y(e.canvasX,e.canvasY,E[0]-15,E[1]-10,30,20)&&(!1!==M.visible||t.draw_invisible_connections)){if(d?a.onInputDblClick&&a.onInputDblClick(w,e):a.onInputClick&&a.onInputClick(w,e),null!==M.link){var A=this.graph.links[M.link];t.click_do_break_link_to&&(a.disconnectInput(w),this.dirty_bgcanvas=!0,l=!0),(this.allow_reconnect_links||e.shiftKey)&&(t.click_do_break_link_to||a.disconnectInput(w),this.connecting_node=this.graph._nodes_by_id[A.origin_id],this.connecting_slot=A.origin_slot,this.connecting_output=this.connecting_node.outputs[this.connecting_slot],this.connecting_pos=this.connecting_node.getConnectionPos(!1,this.connecting_slot),this.dirty_bgcanvas=!0,l=!0)}l||(this.connecting_node=a,this.connecting_input=M,this.connecting_input.slot_index=w,this.connecting_pos=a.getConnectionPos(!0,w),this.connecting_slot=w,this.dirty_bgcanvas=!0,l=!0)}}}if(!l){var C=!1,k=[e.canvasX-a.pos[0],e.canvasY-a.pos[1]],P=this.processNodeWidgets(a,this.graph_mouse,e);if(P&&(C=!0,this.node_widget=[a,P]),d&&this.selected_nodes[a.id]&&(a.onDblClick&&a.onDblClick(e,k,this),this.processNodeDblClicked(a),C=!0),a.onMouseDown&&a.onMouseDown(e,k,this))C=!0;else{if(a.subgraph&&!a.skip_subgraph_button&&!a.flags.collapsed&&k[0]>a.size[0]-t.NODE_TITLE_HEIGHT&&k[1]<0){r=this;setTimeout((function(){r.openSubgraph(a.subgraph)}),10)}this.live_mode&&(x=!0,C=!0)}C||(this.allow_dragnodes&&(this.graph.beforeChange(),this.node_dragged=a),this.selected_nodes[a.id]||this.processNodeSelected(a,e)),this.dirty_canvas=!0}}else if(!l){if(!this.read_only)for(var w=0;w<this.visible_links.length;++w){var R=this.visible_links[w],L=R._pos;if(!(!L||e.canvasX<L[0]-4||e.canvasX>L[0]+4||e.canvasY<L[1]-4||e.canvasY>L[1]+4)){this.showLinkMenu(R,e),this.over_link_center=null;break}}if(this.selected_group=this.graph.getGroupOnPos(e.canvasX,e.canvasY),this.selected_group_resizing=!1,this.selected_group&&!this.read_only)e.ctrlKey&&(this.dragging_rectangle=null),v([e.canvasX,e.canvasY],[this.selected_group.pos[0]+this.selected_group.size[0],this.selected_group.pos[1]+this.selected_group.size[1]])*this.ds.scale<10?this.selected_group_resizing=!0:this.selected_group.recomputeInsideNodes();d&&!this.read_only&&this.allow_searchbox&&(this.showSearchBox(e),e.preventDefault(),e.stopPropagation()),x=!0}!l&&x&&this.allow_dragcanvas&&(this.dragging_canvas=!0)}return this.last_mouse[0]=e.clientX,this.last_mouse[1]=e.clientY,this.last_mouseclick=t.getTime(),this.last_mouse_dragging=!0,this.graph.change(),(!n.document.activeElement||"input"!=n.document.activeElement.nodeName.toLowerCase()&&"textarea"!=n.document.activeElement.nodeName.toLowerCase())&&e.preventDefault(),e.stopPropagation(),this.onMouseDown&&this.onMouseDown(e),!1}}}},c.prototype.processMouseMove=function(e){if(this.autoresize&&this.resize(),this.set_canvas_dirty_on_mouse_event&&(this.dirty_canvas=!0),this.graph){c.active_canvas=this,this.adjustMouseEvent(e);var n=[e.clientX,e.clientY];this.mouse[0]=n[0],this.mouse[1]=n[1];var r=[n[0]-this.last_mouse[0],n[1]-this.last_mouse[1]];if(this.last_mouse=n,this.graph_mouse[0]=e.canvasX,this.graph_mouse[1]=e.canvasY,this.block_click)return e.preventDefault(),!1;if(e.dragging=this.last_mouse_dragging,this.node_widget&&(this.processNodeWidgets(this.node_widget[0],this.graph_mouse,e,this.node_widget[1]),this.dirty_canvas=!0),this.dragging_rectangle)this.dragging_rectangle[2]=e.canvasX-this.dragging_rectangle[0],this.dragging_rectangle[3]=e.canvasY-this.dragging_rectangle[1],this.dirty_canvas=!0;else if(this.selected_group&&!this.read_only){if(this.selected_group_resizing)this.selected_group.size=[e.canvasX-this.selected_group.pos[0],e.canvasY-this.selected_group.pos[1]];else{var i=r[0]/this.ds.scale,s=r[1]/this.ds.scale;this.selected_group.move(i,s,e.ctrlKey),this.selected_group._nodes.length&&(this.dirty_canvas=!0)}this.dirty_bgcanvas=!0}else if(this.dragging_canvas)this.ds.offset[0]+=r[0]/this.ds.scale,this.ds.offset[1]+=r[1]/this.ds.scale,this.dirty_canvas=!0,this.dirty_bgcanvas=!0;else if(this.allow_interaction&&!this.read_only){this.connecting_node&&(this.dirty_canvas=!0);for(var o=this.graph.getNodeOnPos(e.canvasX,e.canvasY,this.visible_nodes),a=0,l=this.graph._nodes.length;a<l;++a)this.graph._nodes[a].mouseOver&&o!=this.graph._nodes[a]&&(this.graph._nodes[a].mouseOver=!1,this.node_over&&this.node_over.onMouseLeave&&this.node_over.onMouseLeave(e),this.node_over=null,this.dirty_canvas=!0);if(o){if(o.redraw_on_mouse&&(this.dirty_canvas=!0),o.mouseOver||(o.mouseOver=!0,this.node_over=o,this.dirty_canvas=!0,o.onMouseEnter&&o.onMouseEnter(e)),o.onMouseMove&&o.onMouseMove(e,[e.canvasX-o.pos[0],e.canvasY-o.pos[1]],this),this.node_dragged&&o.constructor.can_be_dropped){this.dnd_nodes=this.dnd_nodes||[];let t=this.graph.getNodesOnPos(e.canvasX,e.canvasY,this.visible_nodes).filter((e=>e!=o&&e.constructor.can_accept_drop));t=t.sort(((e,t)=>this.graph._nodes.indexOf(t)-this.graph._nodes.indexOf(e))).slice(0,1);const n=this.dnd_nodes.filter((e=>!t.includes(e))),r=t.filter((e=>!this.dnd_nodes.includes(e)));n.forEach((e=>{e.onDropLeave&&e.onDropLeave(o,this)})),r.forEach((e=>{e.onDropEnter&&e.onDropEnter(o,this)})),t.forEach((t=>t.onDropMove&&t.onDropMove(o,[e.canvasX-t.pos[0],e.canvasY-t.pos[1]],this))),this.dnd_nodes=t}if(this.connecting_node)if(this.connecting_output){var u=this._highlight_input||[0,0];if(this.isOverNodeBox(o,e.canvasX,e.canvasY));else if(-1!=(d=this.isOverNodeInput(o,e.canvasX,e.canvasY,u))&&o.inputs[d]&&!1!==o.inputs[d].visible){var h=o.inputs[d].type;t.isValidConnection(this.connecting_output.type,h)&&(this._highlight_input=u,this._highlight_input_slot=o.inputs[d])}else this._highlight_input=null,this._highlight_input_slot=null}else if(this.connecting_input){var d;u=this._highlight_output||[0,0];if(this.isOverNodeBox(o,e.canvasX,e.canvasY));else if(-1!=(d=this.isOverNodeOutput(o,e.canvasX,e.canvasY,u))&&o.outputs[d]&&!1!==o.outputs[d].visible){h=o.outputs[d].type;t.isValidConnection(this.connecting_input.type,h)&&(this._highlight_output=u)}else this._highlight_output=null}this.canvas&&(y(e.canvasX,e.canvasY,o.pos[0]+o.size[0]-5,o.pos[1]+o.size[1]-5,5,5)?this.canvas.style.cursor="se-resize":this.canvas.style.cursor="crosshair")}else{var p=null;for(a=0;a<this.visible_links.length;++a){var f=this.visible_links[a],m=f._pos;if(!(!m||e.canvasX<m[0]-4||e.canvasX>m[0]+4||e.canvasY<m[1]-4||e.canvasY>m[1]+4)){p=f;break}}p!=this.over_link_center&&(this.over_link_center=p,this.dirty_canvas=!0),this.canvas&&(this.canvas.style.cursor="")}if(this.node_capturing_input&&this.node_capturing_input!=o&&this.node_capturing_input.onMouseMove&&this.node_capturing_input.onMouseMove(e,[e.canvasX-this.node_capturing_input.pos[0],e.canvasY-this.node_capturing_input.pos[1]],this),this.node_dragged&&!this.live_mode){for(var a in this.selected_nodes){var g=this.selected_nodes[a];g.pos[0]+=r[0]/this.ds.scale,g.pos[1]+=r[1]/this.ds.scale,g.onDrag&&g.onDrag(this)}this.dirty_canvas=!0,this.dirty_bgcanvas=!0}if(this.resizing_node&&!this.live_mode){var v=[e.canvasX-this.resizing_node.pos[0],e.canvasY-this.resizing_node.pos[1]],b=this.resizing_node.computeSize();v[0]=Math.max(b[0],v[0]),v[1]=Math.max(b[1],v[1]),this.resizing_node.setSize(v),this.canvas.style.cursor="se-resize",this.dirty_canvas=!0,this.dirty_bgcanvas=!0}}return e.preventDefault(),!1}},c.prototype.processMouseUp=function(e){var n=void 0===e.isPrimary||e.isPrimary;if(!n)return!1;if(this.set_canvas_dirty_on_mouse_event&&(this.dirty_canvas=!0),this.graph){var r=this.getCanvasWindow().document;c.active_canvas=this,this.options.skip_events||(t.pointerListenerRemove(r,"move",this._mousemove_callback,!0),t.pointerListenerAdd(this.canvas,"move",this._mousemove_callback,!0),t.pointerListenerRemove(r,"up",this._mouseup_callback,!0)),this.adjustMouseEvent(e);var i=t.getTime();if(e.click_time=i-this.last_mouseclick,this.last_mouse_dragging=!1,this.last_click_position=null,this.block_click&&(this.block_click=!1),1==e.which){if(this.node_widget&&this.processNodeWidgets(this.node_widget[0],this.graph_mouse,e),this.node_widget=null,this.selected_group){var s=this.selected_group.pos[0]-Math.round(this.selected_group.pos[0]),o=this.selected_group.pos[1]-Math.round(this.selected_group.pos[1]);this.selected_group.move(s,o,e.ctrlKey),this.selected_group.pos[0]=Math.round(this.selected_group.pos[0]),this.selected_group.pos[1]=Math.round(this.selected_group.pos[1]),this.selected_group._nodes.length&&(this.dirty_canvas=!0),this.selected_group=null}this.selected_group_resizing=!1;var a=this.graph.getNodeOnPos(e.canvasX,e.canvasY,this.visible_nodes);if(this.dragging_rectangle){if(this.graph){var l=this.graph._nodes,u=new Float32Array(4),h=Math.abs(this.dragging_rectangle[2]),d=Math.abs(this.dragging_rectangle[3]),p=this.dragging_rectangle[2]<0?this.dragging_rectangle[0]-h:this.dragging_rectangle[0],f=this.dragging_rectangle[3]<0?this.dragging_rectangle[1]-d:this.dragging_rectangle[1];if(this.dragging_rectangle[0]=p,this.dragging_rectangle[1]=f,this.dragging_rectangle[2]=h,this.dragging_rectangle[3]=d,!a||h>10&&d>10){for(var m=[],g=0;g<l.length;++g){var v=l[g];v.getBounding(u),b(this.dragging_rectangle,u)&&m.push(v)}m.length&&this.selectNodes(m,e.shiftKey)}else this.selectNodes([a],e.shiftKey||e.ctrlKey)}this.dragging_rectangle=null}else if(this.connecting_node){this.dirty_canvas=!0,this.dirty_bgcanvas=!0;var _=(this.connecting_output||this.connecting_input).type;if(a){if(this.connecting_output)-1!=(x=this.isOverNodeInput(a,e.canvasX,e.canvasY))?this.connecting_node.connect(this.connecting_slot,a,x):this.connecting_node.connectByType(this.connecting_slot,a,_);else if(this.connecting_input){var x;-1!=(x=this.isOverNodeOutput(a,e.canvasX,e.canvasY))?a.connect(x,this.connecting_node,this.connecting_slot):this.connecting_node.connectByTypeOutput(this.connecting_slot,a,_)}}else t.release_link_on_empty_shows_menu&&(e.shiftKey&&this.allow_searchbox?this.connecting_output?this.showSearchBox(e,{node_from:this.connecting_node,slot_from:this.connecting_output,type_filter_in:this.connecting_output.type}):this.connecting_input&&this.showSearchBox(e,{node_to:this.connecting_node,slot_from:this.connecting_input,type_filter_out:this.connecting_input.type}):this.connecting_output?this.showConnectionMenu({nodeFrom:this.connecting_node,slotFrom:this.connecting_output,e}):this.connecting_input&&this.showConnectionMenu({nodeTo:this.connecting_node,slotTo:this.connecting_input,e}));this.connecting_output=null,this.connecting_input=null,this.connecting_pos=null,this.connecting_node=null,this.connecting_slot=-1}else if(this.resizing_node)this.dirty_canvas=!0,this.dirty_bgcanvas=!0,this.graph.afterChange(this.resizing_node),this.resizing_node=null;else if(this.node_dragged){(a=this.node_dragged)&&e.click_time<300&&y(e.canvasX,e.canvasY,a.pos[0],a.pos[1]-t.NODE_TITLE_HEIGHT,t.NODE_TITLE_HEIGHT,t.NODE_TITLE_HEIGHT)&&a.collapse(),this.dirty_canvas=!0,this.dirty_bgcanvas=!0,this.node_dragged.pos[0]=Math.round(this.node_dragged.pos[0]),this.node_dragged.pos[1]=Math.round(this.node_dragged.pos[1]),(this.graph.config.align_to_grid||this.align_to_grid)&&this.node_dragged.alignToGrid(),this.onNodeMoved&&this.onNodeMoved(this.node_dragged),this.dnd_nodes&&(this.dnd_nodes.forEach((e=>{e.onDrop&&e.onDrop(this.node_dragged)})),this.dnd_nodes=null),this.graph.afterChange(this.node_dragged),this.node_dragged=null}else{!(a=this.graph.getNodeOnPos(e.canvasX,e.canvasY,this.visible_nodes))&&e.click_time<300&&this.deselectAllNodes(),this.dirty_canvas=!0,this.dragging_canvas=!1,this.node_over&&this.node_over.onMouseUp&&this.node_over.onMouseUp(e,[e.canvasX-this.node_over.pos[0],e.canvasY-this.node_over.pos[1]],this),this.node_capturing_input&&this.node_capturing_input.onMouseUp&&this.node_capturing_input.onMouseUp(e,[e.canvasX-this.node_capturing_input.pos[0],e.canvasY-this.node_capturing_input.pos[1]])}}else(2==e.which||3==e.which)&&(this.dirty_canvas=!0,this.dragging_canvas=!1);return n&&(this.pointer_is_down=!1,this.pointer_is_double=!1),this.graph.change(),e.stopPropagation(),e.preventDefault(),!1}},c.prototype.processMouseWheel=function(e){if(this.graph&&this.allow_dragcanvas){var t=null!=e.wheelDeltaY?e.wheelDeltaY:-60*e.detail;this.adjustMouseEvent(e);var n=e.clientX,r=e.clientY;if(!this.viewport||this.viewport&&n>=this.viewport[0]&&n<this.viewport[0]+this.viewport[2]&&r>=this.viewport[1]&&r<this.viewport[1]+this.viewport[3]){var i=this.ds.scale;return t>0?i*=1.1:t<0&&(i*=1/1.1),this.ds.changeScale(i,[e.clientX,e.clientY]),this.graph.change(),e.preventDefault(),!1}}},c.prototype.isOverNodeBox=function(e,n,r){var i=t.NODE_TITLE_HEIGHT;return!!y(n,r,e.pos[0]+2,e.pos[1]+2-i,i-4,i-4)},c.prototype.isOverNodeInput=function(e,t,n,r){if(e.inputs)for(var i=0,s=e.inputs.length;i<s;++i){e.inputs[i];var o=e.getConnectionPos(!0,i);if(e.horizontal?y(t,n,o[0]-5,o[1]-10,10,20):y(t,n,o[0]-10,o[1]-5,40,10))return r&&(r[0]=o[0],r[1]=o[1]),i}return-1},c.prototype.isOverNodeOutput=function(e,t,n,r){if(e.outputs)for(var i=0,s=e.outputs.length;i<s;++i){e.outputs[i];var o=e.getConnectionPos(!1,i);if(e.horizontal?y(t,n,o[0]-5,o[1]-10,10,20):y(t,n,o[0]-10,o[1]-5,40,10))return r&&(r[0]=o[0],r[1]=o[1]),i}return-1},c.prototype.processKey=function(e){if(this.graph){var t=!1;if("input"!=e.target.localName){if("keydown"==e.type){if(32==e.keyCode&&(this.dragging_canvas=!0,t=!0),27==e.keyCode&&(this.node_panel&&this.node_panel.close(),this.options_panel&&this.options_panel.close(),t=!0),65==e.keyCode&&e.ctrlKey&&(this.selectNodes(),t=!0),"KeyC"!=e.code||!e.metaKey&&!e.ctrlKey||e.shiftKey||this.selected_nodes&&(this.copyToClipboard(),t=!0),"KeyV"!=e.code||!e.metaKey&&!e.ctrlKey||e.shiftKey||this.pasteFromClipboard(),46!=e.keyCode&&8!=e.keyCode||"input"!=e.target.localName&&"textarea"!=e.target.localName&&(this.deleteSelectedNodes(),t=!0),this.selected_nodes)for(var n in this.selected_nodes)this.selected_nodes[n].onKeyDown&&this.selected_nodes[n].onKeyDown(e)}else if("keyup"==e.type&&(32==e.keyCode&&(this.dragging_canvas=!1),this.selected_nodes))for(var n in this.selected_nodes)this.selected_nodes[n].onKeyUp&&this.selected_nodes[n].onKeyUp(e);return this.graph.change(),t?(e.preventDefault(),e.stopImmediatePropagation(),!1):void 0}}},c.prototype.copyToClipboard=function(){var e={nodes:[],links:[]},t=0,n=[];for(var r in this.selected_nodes){(i=this.selected_nodes[r])._relative_id=t,n.push(i),t+=1}for(r=0;r<n.length;++r){var i,s=(i=n[r]).clone();if(s){if(e.nodes.push(s.serialize()),i.inputs&&i.inputs.length)for(var o=0;o<i.inputs.length;++o){var a=i.inputs[o];if(a&&null!=a.link){var l=this.graph.links[a.link];if(l){var c=this.graph.getNodeById(l.origin_id);c&&this.selected_nodes[c.id]&&e.links.push([c._relative_id,l.origin_slot,i._relative_id,l.target_slot])}}}}else console.warn("node type not found: "+i.type)}localStorage.setItem("litegrapheditor_clipboard",JSON.stringify(e))},c.prototype.pasteFromClipboard=function(){var e=localStorage.getItem("litegrapheditor_clipboard");if(e){this.graph.beforeChange();for(var n=JSON.parse(e),r=!1,i=!1,s=0;s<n.nodes.length;++s)r?(r[0]>n.nodes[s].pos[0]&&(r[0]=n.nodes[s].pos[0],i[0]=s),r[1]>n.nodes[s].pos[1]&&(r[1]=n.nodes[s].pos[1],i[1]=s)):(r=[n.nodes[s].pos[0],n.nodes[s].pos[1]],i=[s,s]);var o=[];for(s=0;s<n.nodes.length;++s){var a=n.nodes[s],l=t.createNode(a.type);l&&(l.configure(a),l.pos[0]+=this.graph_mouse[0]-r[0],l.pos[1]+=this.graph_mouse[1]-r[1],this.graph.add(l,{doProcessChange:!1}),o.push(l))}for(s=0;s<n.links.length;++s){var c=n.links[s],u=o[c[0]],h=o[c[2]];u&&h?u.connect(c[1],h,c[3]):console.warn("Warning, nodes missing on pasting")}this.selectNodes(o),this.graph.afterChange()}},c.prototype.processDrop=function(e){e.preventDefault(),this.adjustMouseEvent(e);var t=e.clientX,n=e.clientY;if(!this.viewport||this.viewport&&t>=this.viewport[0]&&t<this.viewport[0]+this.viewport[2]&&n>=this.viewport[1]&&n<this.viewport[1]+this.viewport[3]){var r=[e.canvasX,e.canvasY],i=this.graph?this.graph.getNodeOnPos(r[0],r[1]):null;if(!i){var s=null;return this.onDropItem&&(s=this.onDropItem(event)),void(s||this.checkDropItem(e))}if(i.onDropFile||i.onDropData){var o=e.dataTransfer.files;if(o&&o.length)for(var a=0;a<o.length;a++){var l=e.dataTransfer.files[0],u=l.name;c.getFileExtension(u);if(i.onDropFile&&i.onDropFile(l),i.onDropData){var h=new FileReader;h.onload=function(e){var t=e.target.result;i.onDropData(t,u,l)};var d=l.type.split("/")[0];"text"==d||""==d?h.readAsText(l):"image"==d?h.readAsDataURL(l):h.readAsArrayBuffer(l)}}}return!(!i.onDropItem||!i.onDropItem(event))||!!this.onDropItem&&this.onDropItem(event)}},c.prototype.checkDropItem=function(e){if(e.dataTransfer.files.length){var n=e.dataTransfer.files[0],r=c.getFileExtension(n.name).toLowerCase(),i=t.node_types_by_file_extension[r];if(i){this.graph.beforeChange();var s=t.createNode(i.type);s.pos=[e.canvasX,e.canvasY],this.graph.add(s),s.onDropFile&&s.onDropFile(n),this.graph.afterChange()}}},c.prototype.processNodeDblClicked=function(e){this.onShowNodePanel?this.onShowNodePanel(e):this.showShowNodePanel(e),this.onNodeDblClicked&&this.onNodeDblClicked(e),this.setDirty(!0)},c.prototype.processNodeSelected=function(e,t){this.selectNode(e,t&&(t.shiftKey||t.ctrlKey)),this.onNodeSelected&&this.onNodeSelected(e)},c.prototype.selectNode=function(e,t){null==e?this.deselectAllNodes():this.selectNodes([e],t)},c.prototype.selectNodes=function(e,t){for(var n in t||this.deselectAllNodes(),"string"==typeof(e=e||this.graph._nodes)&&(e=[e]),e){var r=e[n];if(!r.is_selected){if(!r.is_selected&&r.onSelected&&r.onSelected(),r.is_selected=!0,this.selected_nodes[r.id]=r,r.inputs)for(var i=0;i<r.inputs.length;++i)this.highlighted_links[r.inputs[i].link]=!0;if(r.outputs)for(i=0;i<r.outputs.length;++i){var s=r.outputs[i];if(s.links)for(var o=0;o<s.links.length;++o)this.highlighted_links[s.links[o]]=!0}}}this.onSelectionChange&&this.onSelectionChange(this.selected_nodes),this.setDirty(!0)},c.prototype.deselectNode=function(e){if(e.is_selected){if(e.onDeselected&&e.onDeselected(),e.is_selected=!1,this.onNodeDeselected&&this.onNodeDeselected(e),e.inputs)for(var t=0;t<e.inputs.length;++t)delete this.highlighted_links[e.inputs[t].link];if(e.outputs)for(t=0;t<e.outputs.length;++t){var n=e.outputs[t];if(n.links)for(var r=0;r<n.links.length;++r)delete this.highlighted_links[n.links[r]]}}},c.prototype.deselectAllNodes=function(){if(this.graph){for(var e=this.graph._nodes,t=0,n=e.length;t<n;++t){var r=e[t];r.is_selected&&(r.onDeselected&&r.onDeselected(),r.is_selected=!1,this.onNodeDeselected&&this.onNodeDeselected(r))}this.selected_nodes={},this.current_node=null,this.highlighted_links={},this.onSelectionChange&&this.onSelectionChange(this.selected_nodes),this.setDirty(!0)}},c.prototype.deleteSelectedNodes=function(){for(var e in this.graph.beforeChange(),this.selected_nodes){var n=this.selected_nodes[e];if(!n.block_delete){if(n.inputs&&n.inputs.length&&n.outputs&&n.outputs.length&&t.isValidConnection(n.inputs[0].type,n.outputs[0].type)&&n.inputs[0].link&&n.outputs[0].links&&n.outputs[0].links.length){var r=n.graph.links[n.inputs[0].link],i=n.graph.links[n.outputs[0].links[0]],s=n.getInputNode(0),o=n.getOutputNodes(0)[0];s&&o&&s.connect(r.origin_slot,o,i.target_slot)}this.graph.remove(n),this.onNodeDeselected&&this.onNodeDeselected(n)}}this.selected_nodes={},this.current_node=null,this.highlighted_links={},this.setDirty(!0),this.graph.afterChange()},c.prototype.centerOnNode=function(e){this.ds.offset[0]=-e.pos[0]-.5*e.size[0]+.5*this.canvas.width/this.ds.scale,this.ds.offset[1]=-e.pos[1]-.5*e.size[1]+.5*this.canvas.height/this.ds.scale,this.setDirty(!0,!0)},c.prototype.adjustMouseEvent=function(e){var t=0,n=0;if(this.canvas){var r=this.canvas.getBoundingClientRect();t=e.clientX-r.left,n=e.clientY-r.top}else t=e.clientX,n=e.clientY;e.deltaX=t-this.last_mouse_position[0],e.deltaY=n-this.last_mouse_position[1],this.last_mouse_position[0]=t,this.last_mouse_position[1]=n,e.canvasX=t/this.ds.scale-this.ds.offset[0],e.canvasY=n/this.ds.scale-this.ds.offset[1]},c.prototype.setZoom=function(e,t){this.ds.changeScale(e,t),this.dirty_canvas=!0,this.dirty_bgcanvas=!0},c.prototype.convertOffsetToCanvas=function(e,t){return this.ds.convertOffsetToCanvas(e,t)},c.prototype.convertCanvasToOffset=function(e,t){return this.ds.convertCanvasToOffset(e,t)},c.prototype.convertEventToCanvasOffset=function(e){var t=this.canvas.getBoundingClientRect();return this.convertCanvasToOffset([e.clientX-t.left,e.clientY-t.top])},c.prototype.bringToFront=function(e){var t=this.graph._nodes.indexOf(e);-1!=t&&(this.graph._nodes.splice(t,1),this.graph._nodes.push(e))},c.prototype.sendToBack=function(e){var t=this.graph._nodes.indexOf(e);-1!=t&&(this.graph._nodes.splice(t,1),this.graph._nodes.unshift(e))};var u=new Float32Array(4);c.prototype.computeVisibleNodes=function(e,t){var n=t||[];n.length=0;for(var r=0,i=(e=e||this.graph._nodes).length;r<i;++r){var s=e[r];(!this.live_mode||s.onDrawBackground||s.onDrawForeground)&&(b(this.visible_area,s.getBounding(u))&&n.push(s))}return n},c.prototype.draw=function(e,n){if(this.canvas&&0!=this.canvas.width&&0!=this.canvas.height){var r=t.getTime();this.render_time=.001*(r-this.last_draw_time),this.last_draw_time=r,this.graph&&this.ds.computeVisibleArea(this.viewport),(this.dirty_bgcanvas||n||this.always_render_background||this.graph&&this.graph._last_trigger_time&&r-this.graph._last_trigger_time<1e3)&&this.drawBackCanvas(),(this.dirty_canvas||e)&&this.drawFrontCanvas(),this.fps=this.render_time?1/this.render_time:0,this.frame+=1}},c.prototype.drawFrontCanvas=function(){this.dirty_canvas=!1,this.ctx||(this.ctx=this.bgcanvas.getContext("2d"));var e=this.ctx;if(e){var n=this.canvas;e.start2D&&!this.viewport&&(e.start2D(),e.restore(),e.setTransform(1,0,0,1,0,0));var r=this.viewport||this.dirty_area;if(r&&(e.save(),e.beginPath(),e.rect(r[0],r[1],r[2],r[3]),e.clip()),this.clear_background&&(r?e.clearRect(r[0],r[1],r[2],r[3]):e.clearRect(0,0,n.width,n.height)),this.bgcanvas==this.canvas?this.drawBackCanvas():e.drawImage(this.bgcanvas,0,0),this.onRender&&this.onRender(n,e),this.show_info&&this.renderInfo(e,r?r[0]:0,r?r[1]:0),this.graph){e.save(),this.ds.toCanvasContext(e);for(var i=this.computeVisibleNodes(null,this.visible_nodes),s=0;s<i.length;++s){var o=i[s];e.save(),e.translate(o.pos[0],o.pos[1]),this.drawNode(o,e),1,e.restore()}if(this.render_execution_order&&this.drawExecutionOrder(e),this.graph.config.links_ontop&&(this.live_mode||this.drawConnections(e)),null!=this.connecting_pos){e.lineWidth=this.connections_width;var a=null,l=this.connecting_output||this.connecting_input,c=l.type,u=l.dir;null==u&&(u=this.connecting_output?this.connecting_node.horizontal?t.DOWN:t.RIGHT:this.connecting_node.horizontal?t.UP:t.LEFT);var h=l.shape;if(c===t.EVENT)a=t.EVENT_LINK_COLOR;else a=t.CONNECTING_LINK_COLOR;if(this.renderLink(e,this.connecting_pos,[this.graph_mouse[0],this.graph_mouse[1]],null,!1,null,a,u,t.CENTER),e.beginPath(),c===t.EVENT||h===t.BOX_SHAPE?(e.rect(this.connecting_pos[0]-6+.5,this.connecting_pos[1]-5+.5,14,10),e.fill(),e.beginPath(),e.rect(this.graph_mouse[0]-6+.5,this.graph_mouse[1]-5+.5,14,10)):h===t.ARROW_SHAPE?(e.moveTo(this.connecting_pos[0]+8,this.connecting_pos[1]+.5),e.lineTo(this.connecting_pos[0]-4,this.connecting_pos[1]+6+.5),e.lineTo(this.connecting_pos[0]-4,this.connecting_pos[1]-6+.5),e.closePath()):(e.arc(this.connecting_pos[0],this.connecting_pos[1],4,0,2*Math.PI),e.fill(),e.beginPath(),e.arc(this.graph_mouse[0],this.graph_mouse[1],4,0,2*Math.PI)),e.fill(),e.fillStyle="#ffcc00",this._highlight_input){e.beginPath();var d=this._highlight_input_slot.shape;d===t.ARROW_SHAPE?(e.moveTo(this._highlight_input[0]+8,this._highlight_input[1]+.5),e.lineTo(this._highlight_input[0]-4,this._highlight_input[1]+6+.5),e.lineTo(this._highlight_input[0]-4,this._highlight_input[1]-6+.5),e.closePath()):e.arc(this._highlight_input[0],this._highlight_input[1],6,0,2*Math.PI),e.fill()}this._highlight_output&&(e.beginPath(),d===t.ARROW_SHAPE?(e.moveTo(this._highlight_output[0]+8,this._highlight_output[1]+.5),e.lineTo(this._highlight_output[0]-4,this._highlight_output[1]+6+.5),e.lineTo(this._highlight_output[0]-4,this._highlight_output[1]-6+.5),e.closePath()):e.arc(this._highlight_output[0],this._highlight_output[1],6,0,2*Math.PI),e.fill())}this.dragging_rectangle&&(e.strokeStyle="#FFF",e.strokeRect(this.dragging_rectangle[0],this.dragging_rectangle[1],this.dragging_rectangle[2],this.dragging_rectangle[3])),this.over_link_center&&this.render_link_tooltip?this.drawLinkTooltip(e,this.over_link_center):this.onDrawLinkTooltip&&this.onDrawLinkTooltip(e,null),this.onDrawForeground&&this.onDrawForeground(e,this.visible_rect),e.restore()}this._graph_stack&&this._graph_stack.length&&this.drawSubgraphPanel(e),this.onDrawOverlay&&this.onDrawOverlay(e),r&&e.restore(),e.finish2D&&e.finish2D()}},c.prototype.drawSubgraphPanel=function(e){var t=this.graph,n=t._subgraph_node;n?(this.drawSubgraphPanelLeft(t,n,e),this.drawSubgraphPanelRight(t,n,e)):console.warn("subgraph without subnode")},c.prototype.drawSubgraphPanelLeft=function(e,n,r){var i=n.inputs?n.inputs.length:0,s=200,o=Math.floor(1.6*t.NODE_SLOT_HEIGHT);if(r.fillStyle="#111",r.globalAlpha=.8,r.beginPath(),r.roundRect(10,10,s,(i+1)*o+50,[8]),r.fill(),r.globalAlpha=1,r.fillStyle="#888",r.font="14px Arial",r.textAlign="left",r.fillText("Graph Inputs",20,34),this.drawButton(180,20,20,20,"X","#151515"))this.closeSubgraph();else{var a=50;if(r.font="14px Arial",n.inputs)for(var l=0;l<n.inputs.length;++l){var c=n.inputs[l];if(!c.not_subgraph_input){if(this.drawButton(20,a+2,180,o-2)){var u=n.constructor.input_node_type||"graph/input";this.graph.beforeChange();var h=t.createNode(u);h?(e.add(h),this.block_click=!1,this.last_click_position=null,this.selectNodes([h]),this.node_dragged=h,this.dragging_canvas=!1,h.setProperty("name",c.name),h.setProperty("type",c.type),this.node_dragged.pos[0]=this.graph_mouse[0]-5,this.node_dragged.pos[1]=this.graph_mouse[1]-5,this.graph.afterChange()):console.error("graph input node not found:",u)}r.fillStyle="#9C9",r.beginPath(),r.arc(184,a+.5*o,5,0,2*Math.PI),r.fill(),r.fillStyle="#AAA",r.fillText(c.name,30,a+.75*o),r.fillStyle="#777",r.fillText(c.type,130,a+.75*o),a+=o}}this.drawButton(20,a+2,180,o-2,"+","#151515","#222")&&this.showSubgraphPropertiesDialog(n)}},c.prototype.drawSubgraphPanelRight=function(e,n,r){var i=n.outputs?n.outputs.length:0,s=this.bgcanvas.width,o=200,a=Math.floor(1.6*t.NODE_SLOT_HEIGHT);r.fillStyle="#111",r.globalAlpha=.8,r.beginPath(),r.roundRect(s-o-10,10,o,(i+1)*a+50,[8]),r.fill(),r.globalAlpha=1,r.fillStyle="#888",r.font="14px Arial",r.textAlign="left";var l="Graph Outputs",c=r.measureText(l).width;if(r.fillText(l,s-c-20,34),this.drawButton(s-o,20,20,20,"X","#151515"))this.closeSubgraph();else{var u=50;if(r.font="14px Arial",n.outputs)for(var h=0;h<n.outputs.length;++h){var d=n.outputs[h];if(!d.not_subgraph_input){if(this.drawButton(s-o,u+2,180,a-2)){var p=n.constructor.output_node_type||"graph/output";this.graph.beforeChange();var f=t.createNode(p);f?(e.add(f),this.block_click=!1,this.last_click_position=null,this.selectNodes([f]),this.node_dragged=f,this.dragging_canvas=!1,f.setProperty("name",d.name),f.setProperty("type",d.type),this.node_dragged.pos[0]=this.graph_mouse[0]-5,this.node_dragged.pos[1]=this.graph_mouse[1]-5,this.graph.afterChange()):console.error("graph input node not found:",p)}r.fillStyle="#9C9",r.beginPath(),r.arc(s-o+16,u+.5*a,5,0,2*Math.PI),r.fill(),r.fillStyle="#AAA",r.fillText(d.name,s-o+30,u+.75*a),r.fillStyle="#777",r.fillText(d.type,s-o+130,u+.75*a),u+=a}}this.drawButton(s-o,u+2,180,a-2,"+","#151515","#222")&&this.showSubgraphPropertiesDialogRight(n)}},c.prototype.drawButton=function(e,n,r,i,s,o,a,l){var c=this.ctx;o=o||t.NODE_DEFAULT_COLOR,a=a||"#555",l=l||t.NODE_TEXT_COLOR;var u=n+t.NODE_TITLE_HEIGHT+2,h=this.mouse,d=t.isInsideRectangle(h[0],h[1],e,u,r,i),p=(h=this.last_click_position)&&t.isInsideRectangle(h[0],h[1],e,u,r,i);c.fillStyle=d?a:o,p&&(c.fillStyle="#AAA"),c.beginPath(),c.roundRect(e,n,r,i,[4]),c.fill(),null!=s&&s.constructor==String&&(c.fillStyle=l,c.textAlign="center",c.font=(.65*i|0)+"px Arial",c.fillText(s,e+.5*r,n+.75*i),c.textAlign="left");var f=p&&!this.block_click;return p&&this.blockClick(),f},c.prototype.isAreaClicked=function(e,n,r,i,s){var o=this.mouse,a=(t.isInsideRectangle(o[0],o[1],e,n,r,i),(o=this.last_click_position)&&t.isInsideRectangle(o[0],o[1],e,n,r,i)),l=a&&!this.block_click;return a&&s&&this.blockClick(),l},c.prototype.renderInfo=function(e,t,n){t=t||10,n=n||this.canvas.height-80,e.save(),e.translate(t,n),e.font="10px Arial",e.fillStyle="#888",e.textAlign="left",this.graph?(e.fillText("T: "+this.graph.globaltime.toFixed(2)+"s",5,13),e.fillText("I: "+this.graph.iteration,5,26),e.fillText("N: "+this.graph._nodes.length+" ["+this.visible_nodes.length+"]",5,39),e.fillText("V: "+this.graph._version,5,52),e.fillText("FPS:"+this.fps.toFixed(2),5,65)):e.fillText("No graph selected",5,13),e.restore()},c.prototype.drawBackCanvas=function(){var e=this.bgcanvas;e.width==this.canvas.width&&e.height==this.canvas.height||(e.width=this.canvas.width,e.height=this.canvas.height),this.bgctx||(this.bgctx=this.bgcanvas.getContext("2d"));var t=this.bgctx;t.start&&t.start();var n=this.viewport||[0,0,t.canvas.width,t.canvas.height];if(this.clear_background&&t.clearRect(n[0],n[1],n[2],n[3]),this._graph_stack&&this._graph_stack.length){t.save();this._graph_stack[this._graph_stack.length-1];var r=this.graph._subgraph_node;t.strokeStyle=r.bgcolor,t.lineWidth=10,t.strokeRect(1,1,e.width-2,e.height-2),t.lineWidth=1,t.font="40px Arial",t.textAlign="center",t.fillStyle=r.bgcolor||"#AAA";for(var i="",s=1;s<this._graph_stack.length;++s)i+=this._graph_stack[s]._subgraph_node.getTitle()+" >> ";t.fillText(i+r.getTitle(),.5*e.width,40),t.restore()}var o=!1;if(this.onRenderBackground&&(o=this.onRenderBackground(e,t)),this.viewport||(t.restore(),t.setTransform(1,0,0,1,0,0)),this.visible_links.length=0,this.graph){if(t.save(),this.ds.toCanvasContext(t),this.background_image&&this.ds.scale>.5&&!o){if(this.zoom_modify_alpha?t.globalAlpha=(1-.5/this.ds.scale)*this.editor_alpha:t.globalAlpha=this.editor_alpha,t.imageSmoothingEnabled=t.imageSmoothingEnabled=!1,!this._bg_img||this._bg_img.name!=this.background_image){this._bg_img=new Image,this._bg_img.name=this.background_image,this._bg_img.src=this.background_image;var a=this;this._bg_img.onload=function(){a.draw(!0,!0)}}var l=null;null==this._pattern&&this._bg_img.width>0?(l=t.createPattern(this._bg_img,"repeat"),this._pattern_img=this._bg_img,this._pattern=l):l=this._pattern,l&&(t.save(),t.filter="brightness(120%)",t.fillStyle=l,t.fillRect(this.visible_area[0],this.visible_area[1],this.visible_area[2],this.visible_area[3]),t.restore(),t.fillStyle="transparent"),t.globalAlpha=1,t.imageSmoothingEnabled=t.imageSmoothingEnabled=!0}this.graph._groups.length&&!this.live_mode&&this.drawGroups(e,t),this.onDrawBackground&&this.onDrawBackground(t,this.visible_area),this.onBackgroundRender&&(console.error("WARNING! onBackgroundRender deprecated, now is named onDrawBackground "),this.onBackgroundRender=null),this.render_canvas_border&&(t.strokeStyle="#235",t.strokeRect(0,0,e.width,e.height)),this.render_connections_shadows?(t.shadowColor="#000",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=6):t.shadowColor="rgba(0,0,0,0)",this.live_mode||this.drawConnections(t),t.shadowColor="rgba(0,0,0,0)",t.restore()}t.finish&&t.finish(),this.dirty_bgcanvas=!1,this.dirty_canvas=!0};var h=new Float32Array(2);c.prototype.drawNode=function(e,n){this.current_node=e;var r=e.color||e.constructor.color||t.NODE_DEFAULT_COLOR,i=e.bgcolor||e.constructor.bgcolor||t.NODE_DEFAULT_BGCOLOR;e.mouseOver;var s=this.ds.scale<.6;if(this.live_mode)e.flags.collapsed||(n.shadowColor="transparent",e.onDrawForeground&&e.onDrawForeground(n,this,this.canvas));else{var o=this.editor_alpha;if(n.globalAlpha=o,this.render_shadows&&!s?(n.shadowColor=t.DEFAULT_SHADOW_COLOR,n.shadowOffsetX=0*this.ds.scale,n.shadowOffsetY=3*this.ds.scale,n.shadowBlur=6*this.ds.scale):n.shadowColor="transparent",!e.flags.collapsed||!e.onDrawCollapsed||1!=e.onDrawCollapsed(n,this)){var a=e._shape||t.BOX_SHAPE,l=h;h.set(e.size);var c=e.horizontal;if(e.flags.collapsed){n.font=this.inner_text_font;var u=e.getTitle?e.getTitle():e.title;null!=u&&(e._collapsed_width=Math.min(e.size[0],n.measureText(u).width+2*t.NODE_TITLE_HEIGHT),l[0]=e._collapsed_width,l[1]=0)}e.clip_area&&(n.save(),n.beginPath(),a==t.BOX_SHAPE?n.rect(0,0,l[0],l[1]):a==t.ROUND_SHAPE?n.roundRect(0,0,l[0],l[1],[10]):a==t.CIRCLE_SHAPE&&n.arc(.5*l[0],.5*l[1],.5*l[0],0,2*Math.PI),n.clip()),e.has_errors&&(i="red"),this.drawNodeShape(e,n,l,r,i,e.is_selected,e.mouseOver),n.shadowColor="transparent",e.onDrawForeground&&e.onDrawForeground(n,this,this.canvas),n.textAlign=c?"center":"left",n.font=this.inner_text_font;var d=!s,p=this.connecting_output,f=this.connecting_input;n.lineWidth=1;var m=0,g=new Float32Array(2);if(e.flags.collapsed){if(this.render_collapsed_slots){var v=null,y=null;if(e.inputs)for(x=0;x<e.inputs.length;x++){if(null!=(E=e.inputs[x]).link){v=E;break}}if(e.outputs)for(x=0;x<e.outputs.length;x++){(E=e.outputs[x]).links&&E.links.length&&(y=E)}if(v){var b=0,_=-.5*t.NODE_TITLE_HEIGHT;c&&(b=.5*e._collapsed_width,_=-t.NODE_TITLE_HEIGHT),n.fillStyle="#686",n.beginPath(),E.type===t.EVENT||E.shape===t.BOX_SHAPE?n.rect(b-7+.5,_-4,14,8):E.shape===t.ARROW_SHAPE?(n.moveTo(b+8,_),n.lineTo(b+-4,_-4),n.lineTo(b+-4,_+4),n.closePath()):n.arc(b,_,4,0,2*Math.PI),n.fill()}if(y){b=e._collapsed_width,_=-.5*t.NODE_TITLE_HEIGHT;c&&(b=.5*e._collapsed_width,_=0),n.fillStyle="#686",n.strokeStyle="black",n.beginPath(),E.type===t.EVENT||E.shape===t.BOX_SHAPE?n.rect(b-7+.5,_-4,14,8):E.shape===t.ARROW_SHAPE?(n.moveTo(b+6,_),n.lineTo(b-6,_-4),n.lineTo(b-6,_+4),n.closePath()):n.arc(b,_,4,0,2*Math.PI),n.fill()}}}else{if(e.inputs)for(var x=0;x<e.inputs.length;x++){if(!1!==(E=e.inputs[x]).visible||t.draw_invisible_connections){var w=E.type,S=E.shape;n.globalAlpha=o,this.connecting_output&&!t.isValidConnection(E.type,p.type)&&(n.globalAlpha=.4*o),n.fillStyle=null!=E.link?E.color_on||this.default_connection_color_byType[w]||this.default_connection_color.input_on:E.color_off||this.default_connection_color.input_off,(M=e.getConnectionPos(!0,x,g))[0]-=e.pos[0],M[1]-=e.pos[1],m<M[1]+.5*t.NODE_SLOT_HEIGHT&&(m=M[1]+.5*t.NODE_SLOT_HEIGHT),n.beginPath(),"array"==w&&(S=t.GRID_SHAPE);var T=!0;if(E.type===t.EVENT||E.shape===t.BOX_SHAPE?c?n.rect(M[0]-5+.5,M[1]-8+.5,10,14):n.rect(M[0]-6+.5,M[1]-5+.5,14,10):S===t.ARROW_SHAPE?(n.moveTo(M[0]+8,M[1]+.5),n.lineTo(M[0]-4,M[1]+6+.5),n.lineTo(M[0]-4,M[1]-6+.5),n.closePath()):S===t.GRID_SHAPE?(n.rect(M[0]-4,M[1]-4,2,2),n.rect(M[0]-1,M[1]-4,2,2),n.rect(M[0]+2,M[1]-4,2,2),n.rect(M[0]-4,M[1]-1,2,2),n.rect(M[0]-1,M[1]-1,2,2),n.rect(M[0]+2,M[1]-1,2,2),n.rect(M[0]-4,M[1]+2,2,2),n.rect(M[0]-1,M[1]+2,2,2),n.rect(M[0]+2,M[1]+2,2,2),T=!1):s?n.rect(M[0]-4,M[1]-4,8,8):n.arc(M[0],M[1],4,0,2*Math.PI),n.strokeStyle=n.fillStyle,n.stroke(),E.link&&n.fill(),d)(A=null!=E.label?E.label:E.name)&&(n.fillStyle=t.NODE_TEXT_COLOR,c||E.dir==t.UP?n.fillText(A,M[0],M[1]-10):n.fillText(A,M[0]+10,M[1]+5))}}if(n.textAlign=c?"center":"right",n.strokeStyle="black",e.outputs)for(var x=0;x<e.outputs.length;x++){var E;if(!1!==(E=e.outputs[x]).visible||t.draw_invisible_connections){var M;w=E.type,S=E.shape;this.connecting_input&&!t.isValidConnection(w,f.type)&&(n.globalAlpha=.4*o),(M=e.getConnectionPos(!1,x,g))[0]-=e.pos[0],M[1]-=e.pos[1],m<M[1]+.5*t.NODE_SLOT_HEIGHT&&(m=M[1]+.5*t.NODE_SLOT_HEIGHT),n.fillStyle=E.links&&E.links.length?E.color_on||this.default_connection_color_byType[w]||this.default_connection_color.output_on:E.color_off||this.default_connection_color_byTypeOff[w]||this.default_connection_color_byType[w]||this.default_connection_color.output_off,n.beginPath(),"array"==w&&(S=t.GRID_SHAPE);var A;T=!0;if(w===t.EVENT||S===t.BOX_SHAPE?c?n.rect(M[0]-5+.5,M[1]-8+.5,10,14):n.rect(M[0]-6+.5,M[1]-5+.5,14,10):S===t.ARROW_SHAPE?(n.moveTo(M[0]+8,M[1]+.5),n.lineTo(M[0]-4,M[1]+6+.5),n.lineTo(M[0]-4,M[1]-6+.5),n.closePath()):S===t.GRID_SHAPE?(n.rect(M[0]-4,M[1]-4,2,2),n.rect(M[0]-1,M[1]-4,2,2),n.rect(M[0]+2,M[1]-4,2,2),n.rect(M[0]-4,M[1]-1,2,2),n.rect(M[0]-1,M[1]-1,2,2),n.rect(M[0]+2,M[1]-1,2,2),n.rect(M[0]-4,M[1]+2,2,2),n.rect(M[0]-1,M[1]+2,2,2),n.rect(M[0]+2,M[1]+2,2,2),T=!1):s?n.rect(M[0]-4,M[1]-4,8,8):n.arc(M[0],M[1],4,0,2*Math.PI),n.strokeStyle=n.fillStyle,n.stroke(),E.links&&E.links.length&&n.fill(),!s&&T&&n.stroke(),d)(A=null!=E.label?E.label:E.name)&&(n.fillStyle=t.NODE_TEXT_COLOR,c||E.dir==t.DOWN?n.fillText(A,M[0],M[1]-8):n.fillText(A,M[0]-10,M[1]+4))}}if(n.textAlign="left",n.globalAlpha=1,e.widgets){var C=m;(c||e.widgets_up)&&(C=2),null!=e.widgets_start_y&&(C=e.widgets_start_y),this.drawNodeWidgets(e,C,n,this.node_widget&&this.node_widget[0]==e?this.node_widget[1]:null)}}e.clip_area&&n.restore(),n.globalAlpha=1}}},c.prototype.drawLinkTooltip=function(e,t){var n=t._pos;if(e.fillStyle="black",e.beginPath(),e.arc(n[0],n[1],3,0,2*Math.PI),e.fill(),null!=t.data&&(!this.onDrawLinkTooltip||1!=this.onDrawLinkTooltip(e,t,this))){var r=t.data,i=null;if(null!=(i=r.constructor===Number?r.toFixed(2):r.constructor===String?'"'+r+'"':r.constructor===Boolean?String(r):r.toToolTip?r.toToolTip():"["+r.constructor.name+"]")){i=i.substr(0,30),e.font="14px Courier New";var s=e.measureText(i).width+20;e.shadowColor="black",e.shadowOffsetX=2,e.shadowOffsetY=2,e.shadowBlur=3,e.fillStyle="#454",e.beginPath(),e.roundRect(n[0]-.5*s,n[1]-15-24,s,24,[3]),e.moveTo(n[0]-10,n[1]-15),e.lineTo(n[0]+10,n[1]-15),e.lineTo(n[0],n[1]-5),e.fill(),e.shadowColor="transparent",e.textAlign="center",e.fillStyle="#CEC",e.fillText(i,n[0],n[1]-15-24*.3)}}};var d=new Float32Array(4);c.prototype.drawNodeShape=function(e,n,r,i,s,o,a){n.strokeStyle=i,n.fillStyle=s;var l=t.NODE_TITLE_HEIGHT,u=this.ds.scale<.5,h=e._shape||e.constructor.shape||t.ROUND_SHAPE,p=e.constructor.title_mode,f=!0;p==t.TRANSPARENT_TITLE||p==t.NO_TITLE?f=!1:p==t.AUTOHIDE_TITLE&&a&&(f=!0);var m=d;m[0]=-1,m[1]=f?-l-1:0,m[2]=r[0]+3,m[3]=f?r[1]+l+2:r[1];var g=n.globalAlpha;if(n.beginPath(),h==t.BOX_SHAPE||u?n.fillRect(m[0],m[1],m[2],m[3]):h==t.ROUND_SHAPE||h==t.CARD_SHAPE?n.roundRect(m[0],m[1],m[2],m[3],h==t.CARD_SHAPE?[this.round_radius,this.round_radius,0,0]:[this.round_radius]):h==t.CIRCLE_SHAPE&&n.arc(.5*r[0],.5*r[1],.5*r[0],0,2*Math.PI),n.fill(),n.shadowColor="transparent",e.onDrawBackground&&e.onDrawBackground(n,this,this.canvas,this.graph_mouse),f||p==t.TRANSPARENT_TITLE){if(e.onDrawTitleBar)e.onDrawTitleBar(n,l,r,this.ds.scale,i);else if(p!=t.TRANSPARENT_TITLE&&(e.constructor.title_color||this.render_title_colored)){var v=e.constructor.title_color||i;e.flags.collapsed&&(n.shadowColor=t.DEFAULT_SHADOW_COLOR);!1!==e.constructor.use_gradients&&!1!==e.use_gradients&&this.use_gradients;if(this.use_gradients){var y=c.gradients[v];y||((y=c.gradients[v]=n.createLinearGradient(0,0,400,0)).addColorStop(0,v),y.addColorStop(1,"#000")),n.fillStyle=y}else n.fillStyle=v;n.beginPath(),h==t.BOX_SHAPE||u?n.rect(0,-l,r[0]+1,l):h!=t.ROUND_SHAPE&&h!=t.CARD_SHAPE||n.roundRect(0,-l,r[0]+1,l,e.flags.collapsed?[this.round_radius]:[this.round_radius,this.round_radius,0,0]),n.fill(),n.shadowColor="transparent"}var b=!1;t.node_box_coloured_by_mode&&t.NODE_MODES_COLORS[e.mode]&&(b=t.NODE_MODES_COLORS[e.mode]),t.node_box_coloured_when_on&&(b=e.action_triggered?"#FFF":e.execute_triggered?"#AAA":b);var _=10;if(e.onDrawTitleBox?e.onDrawTitleBox(n,l,r,this.ds.scale):h==t.ROUND_SHAPE||h==t.CIRCLE_SHAPE||h==t.CARD_SHAPE?(u&&(n.fillStyle="black",n.beginPath(),n.arc(.5*l,-.5*l,6,0,2*Math.PI),n.fill()),n.fillStyle=e.boxcolor||b||t.NODE_DEFAULT_BOXCOLOR,u?n.fillRect(.5*l-5,-.5*l-5,_,_):(n.beginPath(),n.arc(.5*l,-.5*l,5,0,2*Math.PI),n.fill())):(u&&(n.fillStyle="black",n.fillRect(.5*(l-_)-1,-.5*(l+_)-1,12,12)),n.fillStyle=e.boxcolor||b||t.NODE_DEFAULT_BOXCOLOR,n.fillRect(.5*(l-_),-.5*(l+_),_,_)),n.globalAlpha=g,e.onDrawTitleText)e.onDrawTitleText(n,l,r,this.ds.scale,this.title_text_font,o);else if(!u){n.font=this.title_text_font;var x=String(e.getTitle());if(x)if(n.shadowBlur=this.title_shadow_blur,n.shadowOffsetX=this.title_shadow_offset_x,n.shadowOffsetY=this.title_shadow_offset_y,n.shadowColor=this.title_shadow_color,n.fillStyle=o?t.NODE_SELECTED_TITLE_COLOR:e.constructor.title_text_color||this.node_title_color,e.flags.collapsed){n.textAlign="left";n.measureText(x);n.fillText(x.substr(0,20),l,t.NODE_TITLE_TEXT_Y-l),n.textAlign="left"}else n.textAlign="left",n.fillText(x,e.title_offset_x||e.constructor.title_offset_x||l,t.NODE_TITLE_TEXT_Y-l)}if(!e.flags.collapsed&&e.subgraph&&!e.skip_subgraph_button){var w=t.NODE_TITLE_HEIGHT,S=e.size[0]-w,T=t.isInsideRectangle(this.graph_mouse[0]-e.pos[0],this.graph_mouse[1]-e.pos[1],S+2,2-w,w-4,w-4);n.fillStyle=T?"#888":"#555",h==t.BOX_SHAPE||u?n.fillRect(S+2,2-w,w-4,w-4):(n.beginPath(),n.roundRect(S+2,2-w,w-4,w-4,[4]),n.fill()),n.fillStyle="#333",n.beginPath(),n.moveTo(S+.2*w,.6*-w),n.lineTo(S+.8*w,.6*-w),n.lineTo(S+.5*w,.3*-w),n.fill()}e.onDrawTitle&&e.onDrawTitle(n)}o&&(e.onBounding&&e.onBounding(m),p==t.TRANSPARENT_TITLE&&(m[1]-=l,m[3]+=l),n.lineWidth=1,n.globalAlpha=.8,n.beginPath(),h==t.BOX_SHAPE?n.rect(-6+m[0],-6+m[1],12+m[2],12+m[3]):h==t.ROUND_SHAPE||h==t.CARD_SHAPE&&e.flags.collapsed?n.roundRect(-6+m[0],-6+m[1],12+m[2],12+m[3],[2*this.round_radius]):h==t.CARD_SHAPE?n.roundRect(-6+m[0],-6+m[1],12+m[2],12+m[3],[2*this.round_radius,2,2*this.round_radius,2]):h==t.CIRCLE_SHAPE&&n.arc(.5*r[0],.5*r[1],.5*r[0]+6,0,2*Math.PI),n.strokeStyle=t.NODE_BOX_OUTLINE_COLOR,n.stroke(),n.strokeStyle=i,n.globalAlpha=1),e.execute_triggered>0&&e.execute_triggered--,e.action_triggered>0&&e.action_triggered--};var p=new Float32Array(4),f=new Float32Array(4),m=new Float32Array(2),g=new Float32Array(2);function v(e,t){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function y(e,t,n,r,i,s){return n<e&&n+i>e&&r<t&&r+s>t}function b(e,t){var n=e[0]+e[2],r=e[1]+e[3],i=t[0]+t[2],s=t[1]+t[3];return!(e[0]>i||e[1]>s||n<t[0]||r<t[1])}function _(e,n){n=n||{},this.options=n;var r=this;n.parentMenu&&(n.parentMenu.constructor!==this.constructor?(console.error("parentMenu must be of class ContextMenu, ignoring it"),n.parentMenu=null):(this.parentMenu=n.parentMenu,this.parentMenu.lock=!0,this.parentMenu.current_submenu=this));var i=null;n.event&&(i=n.event.constructor.name),"MouseEvent"!==i&&"CustomEvent"!==i&&"PointerEvent"!==i&&(console.error("Event passed to ContextMenu is not of type MouseEvent or CustomEvent. Ignoring it. ("+i+")"),n.event=null);var s=document.createElement("div");function o(e){var t=parseInt(s.style.top);return s.style.top=(t+e.deltaY*n.scroll_speed).toFixed()+"px",e.preventDefault(),!0}if(s.className="litegraph litecontextmenu litemenubar-panel",n.className&&(s.className+=" "+n.className),s.style.minWidth=100,s.style.minHeight=100,s.style.pointerEvents="none",setTimeout((function(){s.style.pointerEvents="auto"}),100),t.pointerListenerAdd(s,"up",(function(e){return e.preventDefault(),!0}),!0),s.addEventListener("contextmenu",(function(e){return 2!=e.button||e.preventDefault(),!1}),!0),t.pointerListenerAdd(s,"down",(function(e){if(2==e.button)return r.close(),e.preventDefault(),!0}),!0),n.scroll_speed||(n.scroll_speed=.1),s.addEventListener("wheel",o,!0),s.addEventListener("mousewheel",o,!0),this.root=s,n.title){var a=document.createElement("div");a.className="litemenu-title",a.innerHTML=n.title,s.appendChild(a)}for(var l=0;l<e.length;l++){var c=e.constructor==Array?e[l]:l;null!=c&&c.constructor!==String&&(c=void 0===c.content?String(c):c.content);var u=e[l];this.addItem(c,u,n)}t.pointerListenerAdd(s,"enter",(function(e){s.closing_timer&&clearTimeout(s.closing_timer)}));var h=document;n.event&&(h=n.event.target.ownerDocument),h||(h=document),h.fullscreenElement?h.fullscreenElement.appendChild(s):h.body.appendChild(s);var d=n.left||0,p=n.top||0;if(n.event){if(d=n.event.clientX-10,p=n.event.clientY-10,n.title&&(p-=20),n.parentMenu){var f=n.parentMenu.root.getBoundingClientRect();d=f.left+f.width}var m=document.body.getBoundingClientRect(),g=s.getBoundingClientRect();0==m.height&&console.error("document.body height is 0. That is dangerous, set html,body { height: 100%; }"),m.width&&d>m.width-g.width-10&&(d=m.width-g.width-10),m.height&&p>m.height-g.height-10&&(p=m.height-g.height-10)}s.style.left=d+"px",s.style.top=p+"px",n.scale&&(s.style.transform="scale("+n.scale+")")}function x(e){this.points=e,this.selected=-1,this.nearest=-1,this.size=null,this.must_update=!0,this.margin=5}c.prototype.drawConnections=function(e){var n=t.getTime(),r=this.visible_area;p[0]=r[0]-20,p[1]=r[1]-20,p[2]=r[2]+40,p[3]=r[3]+40,e.lineWidth=this.connections_width,e.fillStyle="#AAA",e.strokeStyle="#AAA",e.globalAlpha=this.editor_alpha;for(var i=this.graph._nodes,s=0,o=i.length;s<o;++s){var a=i[s];if(a.inputs&&a.inputs.length)for(var l=0;l<a.inputs.length;++l){var c=a.inputs[l];if(c&&null!=c.link){var u=c.link,h=this.graph.links[u];if(h){var d=this.graph.getNodeById(h.origin_id);if(null!=d){var v=h.origin_slot,y=null;y=-1==v?[d.pos[0]+10,d.pos[1]+10]:d.getConnectionPos(!1,v,m);var _=a.getConnectionPos(!0,l,g);if(f[0]=y[0],f[1]=y[1],f[2]=_[0]-y[0],f[3]=_[1]-y[1],f[2]<0&&(f[0]+=f[2],f[2]=Math.abs(f[2])),f[3]<0&&(f[1]+=f[3],f[3]=Math.abs(f[3])),b(f,p)){var x=d.outputs[v],w=a.inputs[l];if(x&&w){var S=!!a.hide_input_connections,T=!1===x.visible||!1===w.visible;if(!T||t.draw_invisible_connections){var E=x.dir||(d.horizontal?t.DOWN:t.RIGHT),M=w.dir||(a.horizontal?t.UP:t.LEFT);if(this.renderLink(e,y,_,h,!1,0,T?"red":null,E,M,1,S),h&&h._last_time&&n-h._last_time<1e3){var A=2-.002*(n-h._last_time),C=e.globalAlpha;e.globalAlpha=C*A,this.renderLink(e,y,_,h,!0,A,"white",E,M,1,S),e.globalAlpha=C}}}}}}}}}e.globalAlpha=1},c.prototype.renderLink=function(e,r,i,s,o,a,l,u,h,d,p,f){s&&this.visible_links.push(s);f=f||v(r,i);if(!l&&s&&(l=s.color||c.link_type_colors[s.type]),l||(l=this.default_link_color),null!=s&&this.highlighted_links[s.id])l="#FFF";else if(!0===p){let t=Math.min(50/f,1),n=[i[0]-r[0],i[1]-r[1]];return this.renderLink(e,r,[r[0]+n[0]*t,r[1]+n[1]*t],s,o,a,l,u,h,d,1),void this.renderLink(e,[r[0]+n[0]*(1-t),r[1]+n[1]*(1-t)],i,s,o,a,l,u,h,d,1)}u=u||t.RIGHT,h=h||t.LEFT,this.render_connections_border&&this.ds.scale>.6&&(e.lineWidth=this.connections_width+4),e.lineJoin="round",(d=d||1)>1&&(e.lineWidth=.5),e.beginPath();for(var m=0;m<d;m+=1){var g=5*(m-.5*(d-1)),y=p&&!this.highlighted_links[s.id],b=y?t.LINEAR_LINK:this.links_render_mode;if(b==t.SPLINE_LINK){e.moveTo(r[0],r[1]+g);var _=0,x=0,w=0,S=0;switch(u){case t.LEFT:_=-.25*f;break;case t.RIGHT:_=.25*f;break;case t.UP:x=-.25*f;break;case t.DOWN:x=.25*f}switch(h){case t.LEFT:w=-.25*f;break;case t.RIGHT:w=.25*f;break;case t.UP:S=-.25*f;break;case t.DOWN:S=.25*f}e.bezierCurveTo(r[0]+_,r[1]+x+g,i[0]+w,i[1]+S+g,i[0],i[1]+g)}else if(b==t.LINEAR_LINK){e.moveTo(r[0],r[1]+g);_=0,x=0,w=0,S=0;switch(u){case t.LEFT:_=-1;break;case t.RIGHT:_=1;break;case t.UP:x=-1;break;case t.DOWN:x=1}switch(h){case t.LEFT:w=-1;break;case t.RIGHT:w=1;break;case t.UP:S=-1;break;case t.DOWN:S=1}var T=y?0:15;e.lineTo(r[0]+_*T,r[1]+x*T+g),e.lineTo(i[0]+w*T,i[1]+S*T+g),e.lineTo(i[0],i[1]+g)}else{if(b!=t.STRAIGHT_LINK)return;e.moveTo(r[0],r[1]);var E=r[0],M=r[1],A=i[0],C=i[1];u==t.RIGHT?E+=10:M+=10,h==t.LEFT?A-=10:C-=10,e.lineTo(E,M),e.lineTo(.5*(E+A),M),e.lineTo(.5*(E+A),C),e.lineTo(A,C),e.lineTo(i[0],i[1])}}this.render_connections_border&&this.ds.scale>.6&&!o&&(e.strokeStyle="rgba(0,0,0,0.5)",e.stroke()),p?e.setLineDash([5,3]):e.setLineDash([]),e.lineWidth=this.connections_width,e.fillStyle=e.strokeStyle=l,e.shadowBlur=3*this.ds.scale,e.shadowColor="black",e.shadowOffsetX=0,e.stroke(),e.shadowBlur=0,e.lineWidth=1,e.fillStyle=e.strokeStyle=n(e.fillStyle,1,1.5),e.stroke();var k=this.computeConnectionPoint(r,i,.5,u,h);if(s&&s._pos&&(s._pos[0]=k[0],s._pos[1]=k[1]),this.ds.scale>=.6&&this.highquality_render&&h!=t.CENTER){if(this.render_connection_arrows){var P=this.computeConnectionPoint(r,i,.25,u,h),R=this.computeConnectionPoint(r,i,.26,u,h),L=this.computeConnectionPoint(r,i,.75,u,h),O=this.computeConnectionPoint(r,i,.76,u,h),N=0,I=0;this.render_curved_connections?(N=-Math.atan2(R[0]-P[0],R[1]-P[1]),I=-Math.atan2(O[0]-L[0],O[1]-L[1])):I=N=i[1]>r[1]?0:Math.PI,e.save(),e.translate(P[0],P[1]),e.rotate(N),e.beginPath(),e.moveTo(-5,-3),e.lineTo(0,7),e.lineTo(5,-3),e.fill(),e.restore(),e.save(),e.translate(L[0],L[1]),e.rotate(I),e.beginPath(),e.moveTo(-5,-3),e.lineTo(0,7),e.lineTo(5,-3),e.fill(),e.restore()}this.render_link_center&&(e.beginPath(),e.arc(k[0],k[1],5,0,2*Math.PI),e.fill())}if(a){e.fillStyle=l;for(m=0;m<5;++m){var D=(.001*t.getTime()+.2*m)%1;k=this.computeConnectionPoint(r,i,D,u,h);e.beginPath(),e.arc(k[0],k[1],5,0,2*Math.PI),e.fill()}}},c.prototype.computeConnectionPoint=function(e,n,r,i,s){i=i||t.RIGHT,s=s||t.LEFT;var o=v(e,n),a=e,l=[e[0],e[1]],c=[n[0],n[1]],u=n;switch(i){case t.LEFT:l[0]+=-.25*o;break;case t.RIGHT:l[0]+=.25*o;break;case t.UP:l[1]+=-.25*o;break;case t.DOWN:l[1]+=.25*o}switch(s){case t.LEFT:c[0]+=-.25*o;break;case t.RIGHT:c[0]+=.25*o;break;case t.UP:c[1]+=-.25*o;break;case t.DOWN:c[1]+=.25*o}var h=(1-r)*(1-r)*(1-r),d=(1-r)*(1-r)*3*r,p=3*(1-r)*(r*r),f=r*r*r;return[h*a[0]+d*l[0]+p*c[0]+f*u[0],h*a[1]+d*l[1]+p*c[1]+f*u[1]]},c.prototype.drawExecutionOrder=function(e){e.shadowColor="transparent",e.globalAlpha=.25,e.textAlign="center",e.strokeStyle="white",e.globalAlpha=.75;for(var n=this.visible_nodes,r=0;r<n.length;++r){var i=n[r];e.fillStyle="black",e.fillRect(i.pos[0]-t.NODE_TITLE_HEIGHT,i.pos[1]-t.NODE_TITLE_HEIGHT,t.NODE_TITLE_HEIGHT,t.NODE_TITLE_HEIGHT),0==i.order&&e.strokeRect(i.pos[0]-t.NODE_TITLE_HEIGHT+.5,i.pos[1]-t.NODE_TITLE_HEIGHT+.5,t.NODE_TITLE_HEIGHT,t.NODE_TITLE_HEIGHT),e.fillStyle="#FFF",e.fillText(i.order,i.pos[0]+-.5*t.NODE_TITLE_HEIGHT,i.pos[1]-6)}e.globalAlpha=1},c.prototype.drawNodeWidgets=function(e,n,r,i){if(!e.widgets||!e.widgets.length)return 0;var s=e.size[0],o=e.widgets;n+=2;var a=t.NODE_WIDGET_HEIGHT,l=this.ds.scale>.5;r.save(),r.globalAlpha=this.editor_alpha;for(var c=t.WIDGET_OUTLINE_COLOR,u=t.WIDGET_BGCOLOR,h=t.WIDGET_TEXT_COLOR,d=t.WIDGET_SECONDARY_TEXT_COLOR,p=15,f=0;f<o.length;++f){var m=o[f],g=n;m.y&&(g=m.y),m.last_y=g,r.strokeStyle=c,r.fillStyle="#222",r.textAlign="left",m.disabled&&(r.globalAlpha*=.5);var v=m.width||s;switch(m.type){case"button":m.clicked&&(r.fillStyle="#AAA",m.clicked=!1,this.dirty_canvas=!0),r.fillRect(p,g,v-30,a),l&&!m.disabled&&r.strokeRect(p,g,v-30,a),l&&(r.textAlign="center",r.fillStyle=h,r.fillText(m.name,.5*v,g+.7*a));break;case"toggle":r.textAlign="left",r.strokeStyle=c,r.fillStyle=u,r.beginPath(),l?r.roundRect(p,g,v-30,a,[.5*a]):r.rect(p,g,v-30,a),r.fill(),l&&!m.disabled&&r.stroke(),r.fillStyle=m.value?"#89A":"#333",r.beginPath(),r.arc(v-30,g+.5*a,.36*a,0,2*Math.PI),r.fill(),l&&(r.fillStyle=d,null!=m.name&&r.fillText(m.name,30,g+.7*a),r.fillStyle=m.value?h:d,r.textAlign="right",r.fillText(m.value?m.options.on||"true":m.options.off||"false",v-40,g+.7*a));break;case"slider":r.fillStyle=u,r.fillRect(p,g,v-30,a);var y=m.options.max-m.options.min,b=(m.value-m.options.min)/y;if(r.fillStyle=i==m?"#89A":"#678",r.fillRect(p,g,b*(v-30),a),l&&!m.disabled&&r.strokeRect(p,g,v-30,a),m.marker){var _=(m.marker-m.options.min)/y;r.fillStyle="#AA9",r.fillRect(p+_*(v-30),g,2,a)}l&&(r.textAlign="center",r.fillStyle=h,r.fillText(m.name+"  "+Number(m.value).toFixed(3),.5*v,g+.7*a));break;case"number":case"combo":if(r.textAlign="left",r.strokeStyle=c,r.fillStyle=u,r.beginPath(),l?r.roundRect(p,g,v-30,a,[.5*a]):r.rect(p,g,v-30,a),r.fill(),l)if(m.disabled||r.stroke(),r.fillStyle=h,m.disabled||(r.beginPath(),r.moveTo(31,g+5),r.lineTo(21,g+.5*a),r.lineTo(31,g+a-5),r.fill(),r.beginPath(),r.moveTo(v-p-16,g+5),r.lineTo(v-p-6,g+.5*a),r.lineTo(v-p-16,g+a-5),r.fill()),r.fillStyle=d,r.fillText(m.name,35,g+.7*a),r.fillStyle=h,r.textAlign="right","number"==m.type)r.fillText(Number(m.value).toFixed(void 0!==m.options.precision?m.options.precision:3),v-30-20,g+.7*a);else{var x=m.value;if(m.options.values){var w=m.options.values;w.constructor===Function&&(w=w()),w&&w.constructor!==Array&&(x=w[m.value])}r.fillText(x,v-30-20,g+.7*a)}break;case"string":case"text":r.textAlign="left",r.strokeStyle=c,r.fillStyle=u,r.beginPath(),l?r.roundRect(p,g,v-30,a,[.5*a]):r.rect(p,g,v-30,a),r.fill(),l&&(m.disabled||r.stroke(),r.save(),r.beginPath(),r.rect(p,g,v-30,a),r.clip(),r.fillStyle=d,null!=m.name&&r.fillText(m.name,30,g+.7*a),r.fillStyle=h,r.textAlign="right",r.fillText(String(m.value).substr(0,30),v-30,g+.7*a),r.restore());break;default:m.draw&&m.draw(r,e,v,g,a)}n+=(m.computeSize?m.computeSize(v)[1]:a)+4,r.globalAlpha=this.editor_alpha}r.restore(),r.textAlign="left"},c.prototype.processNodeWidgets=function(e,n,r,i){if(!e.widgets||!e.widgets.length)return null;for(var s=n[0]-e.pos[0],o=n[1]-e.pos[1],a=e.size[0],l=this,c=this.getCanvasWindow(),u=0;u<e.widgets.length;++u){var h=e.widgets[u];if(h&&!h.disabled){var d=h.computeSize?h.computeSize(a)[1]:t.NODE_WIDGET_HEIGHT,p=h.width||a;if(h==i||!(s<6||s>p-12||o<h.last_y||o>h.last_y+d||void 0===h.last_y)){var f=h.value;switch(h.type){case"button":r.type===t.pointerevents_method+"down"&&(h.callback&&setTimeout((function(){h.callback(h,l,e,n,r)}),20),h.clicked=!0,this.dirty_canvas=!0);break;case"slider":h.options.max,h.options.min;var m=Math.clamp((s-15)/(p-30),0,1);h.value=h.options.min+(h.options.max-h.options.min)*m,h.callback&&setTimeout((function(){w(h,h.value)}),20),this.dirty_canvas=!0;break;case"number":case"combo":f=h.value;if(r.type==t.pointerevents_method+"move"&&"number"==h.type)h.value+=.1*r.deltaX*(h.options.step||1),null!=h.options.min&&h.value<h.options.min&&(h.value=h.options.min),null!=h.options.max&&h.value>h.options.max&&(h.value=h.options.max);else if(r.type==t.pointerevents_method+"down"){var g=h.options.values;g&&g.constructor===Function&&(g=h.options.values(h,e));var v=null;"number"!=h.type&&(v=g.constructor===Array?g:Object.keys(g));var y=s<40?-1:s>p-40?1:0;if("number"==h.type)h.value+=.1*y*(h.options.step||1),null!=h.options.min&&h.value<h.options.min&&(h.value=h.options.min),null!=h.options.max&&h.value>h.options.max&&(h.value=h.options.max);else if(y){var b=-1;this.last_mouseclick=0,(b=g.constructor===Object?v.indexOf(String(h.value))+y:v.indexOf(h.value)+y)>=v.length&&(b=v.length-1),b<0&&(b=0),g.constructor===Array?h.value=g[b]:h.value=b}else{var _=g!=v?Object.values(g):g;new t.ContextMenu(_,{scale:Math.max(1,this.ds.scale),event:r,className:"dark",callback:x.bind(h)},c);function x(e,t,n){return g!=v&&(e=_.indexOf(e)),this.value=e,w(this,e),l.dirty_canvas=!0,!1}}}else if(r.type==t.pointerevents_method+"up"&&"number"==h.type){y=s<40?-1:s>p-40?1:0;r.click_time<200&&0==y&&this.prompt("Value",h.value,function(e){this.value=Number(e),w(this,this.value)}.bind(h),r)}f!=h.value&&setTimeout(function(){w(this,this.value)}.bind(h),20),this.dirty_canvas=!0;break;case"toggle":r.type==t.pointerevents_method+"down"&&(h.value=!h.value,setTimeout((function(){w(h,h.value)}),20));break;case"string":case"text":r.type==t.pointerevents_method+"down"&&this.prompt("Value",h.value,function(e){this.value=e,w(this,e)}.bind(h),r,!!h.options&&h.options.multiline);break;default:h.mouse&&(this.dirty_canvas=h.mouse(r,[s,o],e))}return f!=h.value&&(e.onWidgetChanged&&e.onWidgetChanged(h.name,h.value,f,h),e.graph._version++),h}}}function w(t,i){t.value=i,t.options&&t.options.property&&void 0!==e.properties[t.options.property]&&e.setProperty(t.options.property,i),t.callback&&t.callback(t.value,l,e,n,r)}return null},c.prototype.drawGroups=function(e,n){if(this.graph){var r=this.graph._groups;n.save(),n.globalAlpha=.5*this.editor_alpha;for(var i=0;i<r.length;++i){var s=r[i];if(b(this.visible_area,s._bounding)){n.fillStyle=s.color||"#335",n.strokeStyle=s.color||"#335";var o=s._pos,a=s._size;n.globalAlpha=.25*this.editor_alpha,n.beginPath(),n.rect(o[0]+.5,o[1]+.5,a[0],a[1]),n.fill(),n.globalAlpha=this.editor_alpha,n.stroke(),n.beginPath(),n.moveTo(o[0]+a[0],o[1]+a[1]),n.lineTo(o[0]+a[0]-10,o[1]+a[1]),n.lineTo(o[0]+a[0],o[1]+a[1]-10),n.fill();var l=s.font_size||t.DEFAULT_GROUP_FONT_SIZE;n.font=l+"px Arial",n.textAlign="left",n.fillText(s.title,o[0]+4,o[1]+l)}}n.restore()}},c.prototype.adjustNodesSize=function(){for(var e=this.graph._nodes,t=0;t<e.length;++t)e[t].size=e[t].computeSize();this.setDirty(!0,!0)},c.prototype.resize=function(e,t){if(!e&&!t){var n=this.canvas.parentNode;e=n.offsetWidth,t=n.offsetHeight}this.canvas.width==e&&this.canvas.height==t||(this.canvas.width=e,this.canvas.height=t,this.bgcanvas.width=this.canvas.width,this.bgcanvas.height=this.canvas.height,this.setDirty(!0,!0))},c.prototype.switchLiveMode=function(e){if(!e)return this.live_mode=!this.live_mode,this.dirty_canvas=!0,void(this.dirty_bgcanvas=!0);var t=this,n=this.live_mode?1.1:.9;this.live_mode&&(this.live_mode=!1,this.editor_alpha=.1);var r=setInterval((function(){t.editor_alpha*=n,t.dirty_canvas=!0,t.dirty_bgcanvas=!0,n<1&&t.editor_alpha<.01&&(clearInterval(r),n<1&&(t.live_mode=!0)),n>1&&t.editor_alpha>.99&&(clearInterval(r),t.editor_alpha=1)}),1)},c.prototype.onNodeSelectionChange=function(e){},c.onGroupAdd=function(e,n,r){var i=c.active_canvas,s=(i.getCanvasWindow(),new t.LGraphGroup);s.pos=i.convertEventToCanvasOffset(r),i.graph.add(s)},c.onMenuAdd=function(e,n,r,i,s){var o=c.active_canvas,a=o.getCanvasWindow(),l=o.graph;if(l)return function e(n,i){var c=t.getNodeTypesCategories(o.filter||l.filter).filter((function(e){return e.startsWith(n)})),u=[];c.map((function(t){if(t){var r=new RegExp("^("+n+")"),i=t.replace(r,"").split("/")[0],s=""===n?i+"/":n+i+"/",o=i;-1!=o.indexOf("::")&&(o=o.split("::")[1]),-1===u.findIndex((function(e){return e.value===s}))&&u.push({value:s,content:o,has_submenu:!0,callback:function(t,n,r,i){e(t.value,i)}})}})),t.getNodeTypesInCategory(n.slice(0,-1),o.filter||l.filter).map((function(e){if(!e.skip_list){var n={value:e.type,content:e.title,has_submenu:!1,callback:function(e,n,r,i){var a=i.getFirstEvent();o.graph.beforeChange();var l=t.createNode(e.value);l&&(l.pos=o.convertEventToCanvasOffset(a),o.graph.add(l)),s&&s(l),o.graph.afterChange()}};u.push(n)}})),new t.ContextMenu(u,{event:r,parentMenu:i},a)}("",i),!1},c.onMenuCollapseAll=function(){},c.onMenuNodeEdit=function(){},c.showMenuNodeOptionalInputs=function(e,n,r,i,s){if(s){var o=this,a=c.active_canvas.getCanvasWindow();n=s.optional_inputs;s.onGetInputs&&(n=s.onGetInputs());var l=[];if(n)for(var u=0;u<n.length;u++){var h=n[u];if(h){var d=h[0];h[2]||(h[2]={}),h[2].label&&(d=h[2].label),h[2].removable=!0;var p={content:d,value:h};h[1]==t.ACTION&&(p.className="event"),l.push(p)}else l.push(null)}if(s.onMenuNodeInputs){var f=s.onMenuNodeInputs(l);f&&(l=f)}if(l.length){new t.ContextMenu(l,{event:r,callback:function(e,t,n){if(!s)return;e.callback&&e.callback.call(o,s,e,t,n);e.value&&(s.graph.beforeChange(),s.addInput(e.value[0],e.value[1],e.value[2]),s.onNodeInputAdd&&s.onNodeInputAdd(e.value),s.setDirtyCanvas(!0,!0),s.graph.afterChange())},parentMenu:i,node:s},a);return!1}console.log("no input entries")}},c.showMenuNodeOptionalOutputs=function(e,n,r,i,s){if(s){var o=this,a=c.active_canvas.getCanvasWindow();n=s.optional_outputs;s.onGetOutputs&&(n=s.onGetOutputs());var l=[];if(n)for(var u=0;u<n.length;u++){var h=n[u];if(h){if(!s.flags||!s.flags.skip_repeated_outputs||-1==s.findOutputSlot(h[0])){var d=h[0];h[2]||(h[2]={}),h[2].label&&(d=h[2].label),h[2].removable=!0;var p={content:d,value:h};h[1]==t.EVENT&&(p.className="event"),l.push(p)}}else l.push(null)}if(this.onMenuNodeOutputs&&(l=this.onMenuNodeOutputs(l)),t.do_add_triggers_slots&&-1==s.findOutputSlot("onExecuted")&&l.push({content:"On Executed",value:["onExecuted",t.EVENT,{nameLocked:!0}],className:"event"}),s.onMenuNodeOutputs){var f=s.onMenuNodeOutputs(l);f&&(l=f)}if(l.length){new t.ContextMenu(l,{event:r,callback:function e(n,r,a){if(!s)return;n.callback&&n.callback.call(o,s,n,r,a);if(!n.value)return;var l=n.value[1];if(l&&(l.constructor===Object||l.constructor===Array)){var c=[];for(var u in l)c.push({content:u,value:l[u]});return new t.ContextMenu(c,{event:r,callback:e,parentMenu:i,node:s}),!1}s.graph.beforeChange(),s.addOutput(n.value[0],n.value[1],n.value[2]),s.onNodeOutputAdd&&s.onNodeOutputAdd(n.value),s.setDirtyCanvas(!0,!0),s.graph.afterChange()},parentMenu:i,node:s},a);return!1}}},c.onShowMenuNodeProperties=function(e,n,r,i,s){if(s&&s.properties){var o=c.active_canvas,a=o.getCanvasWindow(),l=[];for(var u in s.properties){"object"==typeof(e=void 0!==s.properties[u]?s.properties[u]:" ")&&(e=JSON.stringify(e));var h=s.getPropertyInfo(u);"enum"!=h.type&&"combo"!=h.type||(e=c.getPropertyPrintableValue(e,h.values)),e=c.decodeHTML(e),l.push({content:"<span class='property_name'>"+(h.label?h.label:u)+"</span><span class='property_value'>"+e+"</span>",value:u})}if(l.length){new t.ContextMenu(l,{event:r,callback:function(e,t,n,r){if(!s)return;var i=this.getBoundingClientRect();o.showEditPropertyValue(s,e.value,{position:[i.left,i.top]})},parentMenu:i,allow_html:!0,node:s},a);return!1}}},c.decodeHTML=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML},c.onMenuResizeNode=function(e,t,n,r,i){if(i){var s=function(e){e.size=e.computeSize(),e.onResize&&e.onResize(e.size)},o=c.active_canvas;if(!o.selected_nodes||Object.keys(o.selected_nodes).length<=1)s(i);else for(var a in o.selected_nodes)s(o.selected_nodes[a]);i.setDirtyCanvas(!0,!0)}},c.prototype.showLinkMenu=function(e,n){var r=this,i=r.graph.getNodeById(e.origin_id),s=r.graph.getNodeById(e.target_id),o=!1;i&&i.outputs&&i.outputs[e.origin_slot]&&(o=i.outputs[e.origin_slot].type);var a=!1;s&&s.outputs&&s.outputs[e.target_slot]&&(a=s.inputs[e.target_slot].type);var l=new t.ContextMenu(["Add Node",null,"Delete",null],{event:n,title:null!=e.data?e.data.constructor.name:null,callback:function(t,n,u){switch(t){case"Add Node":c.onMenuAdd(null,null,u,l,(function(t){t.inputs&&t.inputs.length&&t.outputs&&t.outputs.length&&i.connectByType(e.origin_slot,t,o)&&(t.connectByType(e.target_slot,s,a),t.pos[0]-=.5*t.size[0])}));break;case"Delete":r.graph.removeLink(e.id)}}});return!1},c.prototype.createDefaultNodeForSlot=function(e){e=e||{};var n=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,position:[],nodeType:null,posAdd:[0,0],posSizeFix:[0,0]},e),r=n.nodeFrom&&null!==n.slotFrom,i=!r&&n.nodeTo&&null!==n.slotTo;if(!r&&!i)return console.warn("No data passed to createDefaultNodeForSlot "+n.nodeFrom+" "+n.slotFrom+" "+n.nodeTo+" "+n.slotTo),!1;if(!n.nodeType)return console.warn("No type to createDefaultNodeForSlot"),!1;var s=r?n.nodeFrom:n.nodeTo,o=r?n.slotFrom:n.slotTo,a=!1;switch(typeof o){case"string":a=r?s.findOutputSlot(o,!1):s.findInputSlot(o,!1),o=r?s.outputs[o]:s.inputs[o];break;case"object":a=r?s.findOutputSlot(o.name):s.findInputSlot(o.name);break;case"number":a=o,o=r?s.outputs[o]:s.inputs[o];break;default:return console.warn("Cant get slot information "+o),!1}!1!==o&&!1!==a||console.warn("createDefaultNodeForSlot bad slotX "+o+" "+a);var l=o.type==t.EVENT?"_event_":o.type,c=r?t.slot_types_default_out:t.slot_types_default_in;if(c&&c[l]){if(o.link,nodeNewType=!1,"object"==typeof c[l]||"array"==typeof c[l]){for(var u in c[l])if(n.nodeType==c[l][u]||"AUTO"==n.nodeType){nodeNewType=c[l][u];break}}else n.nodeType!=c[l]&&"AUTO"!=n.nodeType||(nodeNewType=c[l]);if(nodeNewType){var h=!1;"object"==typeof nodeNewType&&nodeNewType.node&&(h=nodeNewType,nodeNewType=nodeNewType.node);var d=t.createNode(nodeNewType);if(d){if(h){if(h.properties)for(var p in h.properties)d.addProperty(p,h.properties[p]);if(h.inputs)for(var p in d.inputs=[],h.inputs)d.addOutput(h.inputs[p][0],h.inputs[p][1]);if(h.outputs)for(var p in d.outputs=[],h.outputs)d.addOutput(h.outputs[p][0],h.outputs[p][1]);h.title&&(d.title=h.title),h.json&&d.configure(h.json)}return this.graph.add(d),d.pos=[n.position[0]+n.posAdd[0]+(n.posSizeFix[0]?n.posSizeFix[0]*d.size[0]:0),n.position[1]+n.posAdd[1]+(n.posSizeFix[1]?n.posSizeFix[1]*d.size[1]:0)],r?n.nodeFrom.connectByType(a,d,l):n.nodeTo.connectByTypeOutput(a,d,l),!0}console.log("failed creating "+nodeNewType)}}return!1},c.prototype.showConnectionMenu=function(e){e=e||{};var n=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,e:null},e),r=this,i=n.nodeFrom&&n.slotFrom,s=!i&&n.nodeTo&&n.slotTo;if(!i&&!s)return console.warn("No data passed to showConnectionMenu"),!1;var o=i?n.nodeFrom:n.nodeTo,a=i?n.slotFrom:n.slotTo,l=!1;switch(typeof a){case"string":l=i?o.findOutputSlot(a,!1):o.findInputSlot(a,!1),a=i?o.outputs[a]:o.inputs[a];break;case"object":l=i?o.findOutputSlot(a.name):o.findInputSlot(a.name);break;case"number":l=a,a=i?o.outputs[a]:o.inputs[a];break;default:return console.warn("Cant get slot information "+a),!1}var u=["Add Node",null];r.allow_searchbox&&(u.push("Search"),u.push(null));var h=a.type==t.EVENT?"_event_":a.type,d=i?t.slot_types_default_out:t.slot_types_default_in;if(d&&d[h])if("object"==typeof d[h]||"array"==typeof d[h])for(var p in d[h])u.push(d[h][p]);else u.push(d[h]);var f=new t.ContextMenu(u,{event:n.e,title:(a&&""!=a.name?a.name+(h?" | ":""):"")+(a&&h?h:""),callback:function(e,t,s){switch(e){case"Add Node":c.onMenuAdd(null,null,s,f,(function(e){i?n.nodeFrom.connectByType(l,e,h):n.nodeTo.connectByTypeOutput(l,e,h)}));break;case"Search":i?r.showSearchBox(s,{node_from:n.nodeFrom,slot_from:a,type_filter_in:h}):r.showSearchBox(s,{node_to:n.nodeTo,slot_from:a,type_filter_out:h});break;default:r.createDefaultNodeForSlot(Object.assign(n,{position:[n.e.canvasX,n.e.canvasY],nodeType:e}))}}});return!1},c.onShowPropertyEditor=function(e,n,r,i,s){var o=e.property||"title",a=s[o],l=document.createElement("div");l.is_modified=!1,l.className="graphdialog",l.innerHTML="<span class='name'></span><input autofocus type='text' class='value'/><button>OK</button>",l.close=function(){l.parentNode&&l.parentNode.removeChild(l)},l.querySelector(".name").innerText=o;var u=l.querySelector(".value");u&&(u.value=a,u.addEventListener("blur",(function(e){this.focus()})),u.addEventListener("keydown",(function(e){if(l.is_modified=!0,27==e.keyCode)l.close();else if(13==e.keyCode)g();else if(13!=e.keyCode&&"textarea"!=e.target.localName)return;e.preventDefault(),e.stopPropagation()})));var h=c.active_canvas.canvas,d=h.getBoundingClientRect(),p=-20,f=-20;d&&(p-=d.left,f-=d.top),event?(l.style.left=event.clientX+p+"px",l.style.top=event.clientY+f+"px"):(l.style.left=.5*h.width+p+"px",l.style.top=.5*h.height+f+"px"),l.querySelector("button").addEventListener("click",g),h.parentNode.appendChild(l),u&&u.focus();var m=null;function g(){u&&function(t){"Number"==e.type?t=Number(t):"Boolean"==e.type&&(t=Boolean(t));s[o]=t,l.parentNode&&l.parentNode.removeChild(l);s.setDirtyCanvas(!0,!0)}(u.value)}l.addEventListener("mouseleave",(function(e){t.dialog_close_on_mouse_leave&&!l.is_modified&&t.dialog_close_on_mouse_leave&&(m=setTimeout(l.close,t.dialog_close_on_mouse_leave_delay))})),l.addEventListener("mouseenter",(function(e){t.dialog_close_on_mouse_leave&&m&&clearTimeout(m)}))},c.prototype.prompt=function(e,n,r,i,s){var o=this;e=e||"";var a=document.createElement("div");a.is_modified=!1,a.className="graphdialog rounded",a.innerHTML=s?"<span class='name'></span> <textarea autofocus class='value'></textarea><button class='rounded'>OK</button>":"<span class='name'></span> <input autofocus type='text' class='value'/><button class='rounded'>OK</button>",a.close=function(){o.prompt_box=null,a.parentNode&&a.parentNode.removeChild(a)};var l=c.active_canvas.canvas;l.parentNode.appendChild(a),this.ds.scale>1&&(a.style.transform="scale("+this.ds.scale+")");var u=null,h=!1;t.pointerListenerAdd(a,"leave",(function(e){h||t.dialog_close_on_mouse_leave&&!a.is_modified&&t.dialog_close_on_mouse_leave&&(u=setTimeout(a.close,t.dialog_close_on_mouse_leave_delay))})),t.pointerListenerAdd(a,"enter",(function(e){t.dialog_close_on_mouse_leave&&u&&clearTimeout(u)}));var d=a.querySelectorAll("select");d&&d.forEach((function(e){e.addEventListener("click",(function(e){h++})),e.addEventListener("blur",(function(e){h=0})),e.addEventListener("change",(function(e){h=-1}))})),o.prompt_box&&o.prompt_box.close(),o.prompt_box=a;a.querySelector(".name").innerText=e;var p=a.querySelector(".value");p.value=n;var f=p;f.addEventListener("keydown",(function(e){if(a.is_modified=!0,27==e.keyCode)a.close();else{if(13!=e.keyCode||"textarea"==e.target.localName)return;r&&r(this.value),a.close()}e.preventDefault(),e.stopPropagation()})),a.querySelector("button").addEventListener("click",(function(e){r&&r(f.value),o.setDirty(!0),a.close()}));var m=l.getBoundingClientRect(),g=-20,v=-20;return m&&(g-=m.left,v-=m.top),i?(a.style.left=i.clientX+g+"px",a.style.top=i.clientY+v+"px"):(a.style.left=.5*l.width+g+"px",a.style.top=.5*l.height+v+"px"),setTimeout((function(){f.focus()}),10),a},c.search_limit=-1,c.prototype.showSearchBox=function(e,n){def_options={slot_from:null,node_from:null,node_to:null,do_type_filter:t.search_filter_enabled,type_filter_in:!1,type_filter_out:!1,show_general_if_none_on_typefilter:!0,show_general_after_typefiltered:!0,hide_on_mouse_leave:t.search_hide_on_mouse_leave,show_all_if_empty:!0,show_all_on_open:t.search_show_all_on_open},n=Object.assign(def_options,n||{});var r=this,i=c.active_canvas,s=i.canvas,o=s.ownerDocument||document,a=document.createElement("div");if(a.className="litegraph litesearchbox graphdialog rounded",a.innerHTML="<span class='name'>Search</span> <input autofocus type='text' placeholder='search' class='value rounded'/>",n.do_type_filter&&(a.innerHTML+="<select class='slot_in_type_filter'><option value=''></option></select>",a.innerHTML+="<select class='slot_out_type_filter'><option value=''></option></select>"),a.innerHTML+="<div class='helper'></div>",o.fullscreenElement?o.fullscreenElement.appendChild(a):(o.body.appendChild(a),o.body.style.overflow="hidden"),n.do_type_filter)var l=a.querySelector(".slot_in_type_filter"),u=a.querySelector(".slot_out_type_filter");if(a.close=function(){r.search_box=null,this.blur(),s.focus(),o.body.style.overflow="",setTimeout((function(){r.canvas.focus()}),20),a.parentNode&&a.parentNode.removeChild(a)},this.ds.scale>1&&(a.style.transform="scale("+this.ds.scale+")"),n.hide_on_mouse_leave){var h=!1,d=null;t.pointerListenerAdd(a,"enter",(function(e){d&&(clearTimeout(d),d=null)})),t.pointerListenerAdd(a,"leave",(function(e){h||(d=setTimeout((function(){a.close()}),500))})),n.do_type_filter&&(l.addEventListener("click",(function(e){h++})),l.addEventListener("blur",(function(e){h=0})),l.addEventListener("change",(function(e){h=-1})),u.addEventListener("click",(function(e){h++})),u.addEventListener("blur",(function(e){h=0})),u.addEventListener("change",(function(e){h=-1})))}r.search_box&&r.search_box.close(),r.search_box=a;var p=a.querySelector(".helper"),f=null,m=null,g=null,v=a.querySelector("input");if(v&&(v.addEventListener("blur",(function(e){this.focus()})),v.addEventListener("keydown",(function(e){if(38==e.keyCode)M(!1);else if(40==e.keyCode)M(!0);else if(27==e.keyCode)a.close();else{if(13!=e.keyCode)return m&&clearInterval(m),void(m=setTimeout(A,250));g?E(g.innerHTML):f?E(f):a.close()}return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!0}))),n.do_type_filter){if(l){var y=(_=t.slot_types_in).length;n.type_filter_in!=t.EVENT&&n.type_filter_in!=t.ACTION||(n.type_filter_in="_event_");for(var b=0;b<y;b++){(x=document.createElement("option")).value=_[b],x.innerHTML=_[b],l.appendChild(x),!1!==n.type_filter_in&&(n.type_filter_in+"").toLowerCase()==(_[b]+"").toLowerCase()&&(x.selected=!0)}l.addEventListener("change",(function(){A()}))}if(u){var _;y=(_=t.slot_types_out).length;n.type_filter_out!=t.EVENT&&n.type_filter_out!=t.ACTION||(n.type_filter_out="_event_");for(b=0;b<y;b++){var x;(x=document.createElement("option")).value=_[b],x.innerHTML=_[b],u.appendChild(x),!1!==n.type_filter_out&&(n.type_filter_out+"").toLowerCase()==(_[b]+"").toLowerCase()&&(x.selected=!0)}u.addEventListener("change",(function(){A()}))}}var w=s.getBoundingClientRect(),S=(e?e.clientX:w.left+.5*w.width)-80,T=(e?e.clientY:w.top+.5*w.height)-20;function E(s){if(s)if(r.onSearchBoxSelection)r.onSearchBoxSelection(s,e,i);else{var o=t.searchbox_extras[s.toLowerCase()];o&&(s=o.type),i.graph.beforeChange();var l=t.createNode(s);if(l&&(l.pos=i.convertEventToCanvasOffset(e),i.graph.add(l,!1)),o&&o.data){if(o.data.properties)for(var c in o.data.properties)l.addProperty(c,o.data.properties[c]);if(o.data.inputs)for(var c in l.inputs=[],o.data.inputs)l.addOutput(o.data.inputs[c][0],o.data.inputs[c][1]);if(o.data.outputs)for(var c in l.outputs=[],o.data.outputs)l.addOutput(o.data.outputs[c][0],o.data.outputs[c][1]);o.data.title&&(l.title=o.data.title),o.data.json&&l.configure(o.data.json)}if(n.node_from){var u=!1;switch(typeof n.slot_from){case"string":u=n.node_from.findOutputSlot(n.slot_from);break;case"object":-1==(u=n.slot_from.name?n.node_from.findOutputSlot(n.slot_from.name):-1)&&void 0!==n.slot_from.slot_index&&(u=n.slot_from.slot_index);break;case"number":u=n.slot_from;break;default:u=0}void 0!==typeof n.node_from.outputs[u]&&!1!==u&&u>-1&&n.node_from.connectByType(u,l,n.node_from.outputs[u].type)}if(n.node_to){u=!1;switch(typeof n.slot_from){case"string":u=n.node_to.findInputSlot(n.slot_from);break;case"object":-1==(u=n.slot_from.name?n.node_to.findInputSlot(n.slot_from.name):-1)&&void 0!==n.slot_from.slot_index&&(u=n.slot_from.slot_index);break;case"number":u=n.slot_from;break;default:u=0}void 0!==typeof n.node_to.inputs[u]&&!1!==u&&u>-1&&n.node_to.connectByTypeOutput(u,l,n.node_to.inputs[u].type)}i.graph.afterChange()}a.close()}function M(e){var t=g;g&&g.classList.remove("selected"),g?(g=e?g.nextSibling:g.previousSibling)||(g=t):g=e?p.childNodes[0]:p.childNodes[p.childNodes.length],g&&(g.classList.add("selected"),g.scrollIntoView({block:"end",behavior:"smooth"}))}function A(){m=null;var e=v.value;if(f=null,p.innerHTML="",e||n.show_all_if_empty)if(r.onSearchBox){var s=r.onSearchBox(p,e,i);if(s)for(var o=0;o<s.length;++o)_(s[o])}else{var a=0;e=e.toLowerCase();var l=i.filter||i.graph.filter;if(n.do_type_filter&&r.search_box)var u=r.search_box.querySelector(".slot_in_type_filter"),h=r.search_box.querySelector(".slot_out_type_filter");else u=!1,h=!1;for(var o in t.searchbox_extras){var d=t.searchbox_extras[o];if(n.show_all_if_empty&&!e||-1!==d.desc.toLowerCase().indexOf(e)){var g=t.registered_node_types[d.type];if((!g||g.filter==l)&&b(d.type)&&(_(d.desc,"searchbox_extra"),-1!==c.search_limit&&a++>c.search_limit))break}}var y=null;if(Array.prototype.filter)y=Object.keys(t.registered_node_types).filter(b);else for(var o in y=[],t.registered_node_types)b(o)&&y.push(o);for(o=0;o<y.length&&(_(y[o]),!(-1!==c.search_limit&&a++>c.search_limit));o++);if(n.show_general_after_typefiltered&&(u.value||h.value)){for(var o in filtered_extra=[],t.registered_node_types)b(o,{inTypeOverride:!(!u||!u.value)&&"*",outTypeOverride:!(!h||!h.value)&&"*"})&&filtered_extra.push(o);for(o=0;o<filtered_extra.length&&(_(filtered_extra[o],"generic_type"),!(-1!==c.search_limit&&a++>c.search_limit));o++);}if((u.value||h.value)&&0==p.childNodes.length&&n.show_general_if_none_on_typefilter){for(var o in filtered_extra=[],t.registered_node_types)b(o,{skipFilter:!0})&&filtered_extra.push(o);for(o=0;o<filtered_extra.length&&(_(filtered_extra[o],"not_in_filter"),!(-1!==c.search_limit&&a++>c.search_limit));o++);}function b(r,i){i=i||{};var s=Object.assign({skipFilter:!1,inTypeOverride:!1,outTypeOverride:!1},i),o=t.registered_node_types[r];if(l&&o.filter!=l)return!1;if((!n.show_all_if_empty||e)&&-1===r.toLowerCase().indexOf(e))return!1;if(n.do_type_filter&&!s.skipFilter){var a=r,c=u.value;if(!1!==s.inTypeOverride&&(c=s.inTypeOverride),u&&c)if(t.registered_slot_in_types[c]&&t.registered_slot_in_types[c].nodes)if(!1===t.registered_slot_in_types[c].nodes.includes(a))return!1;c=h.value;if(!1!==s.outTypeOverride&&(c=s.outTypeOverride),h&&c)if(t.registered_slot_out_types[c]&&t.registered_slot_out_types[c].nodes)if(!1===t.registered_slot_out_types[c].nodes.includes(a))return!1}return!0}}function _(e,t){var n=document.createElement("div");f||(f=e),n.innerText=e,n.dataset.type=escape(e),n.className="litegraph lite-search-item",t&&(n.className+=" "+t),n.addEventListener("click",(function(e){E(unescape(this.dataset.type))})),p.appendChild(n)}}return a.style.left=S+"px",a.style.top=T+"px",e.layerY>w.height-200&&(p.style.maxHeight=w.height-e.layerY-20+"px"),v.focus(),n.show_all_on_open&&A(),a},c.prototype.showEditPropertyValue=function(e,t,n){if(e&&void 0!==e.properties[t]){n=n||{};var r=e.getPropertyInfo(t),i=r.type,s="";if("string"==i||"number"==i||"array"==i||"object"==i)s="<input autofocus type='text' class='value'/>";else if("enum"!=i&&"combo"!=i||!r.values){if("boolean"!=i&&"toggle"!=i)return void console.warn("unknown type: "+i);s="<input autofocus type='checkbox' class='value' "+(e.properties[t]?"checked":"")+"/>"}else{for(var o in s="<select autofocus type='text' class='value'>",r.values){var a=o;r.values.constructor===Array&&(a=r.values[o]),s+="<option value='"+a+"' "+(a==e.properties[t]?"selected":"")+">"+r.values[o]+"</option>"}s+="</select>"}var l=this.createDialog("<span class='name'>"+(r.label?r.label:t)+"</span>"+s+"<button>OK</button>",n),c=!1;if("enum"!=i&&"combo"!=i||!r.values){if("boolean"==i||"toggle"==i)(c=l.querySelector("input"))&&c.addEventListener("click",(function(e){l.modified(),h(!!c.checked)}));else if(c=l.querySelector("input")){c.addEventListener("blur",(function(e){this.focus()}));a=void 0!==e.properties[t]?e.properties[t]:"";"string"!==i&&(a=JSON.stringify(a)),c.value=a,c.addEventListener("keydown",(function(e){if(27==e.keyCode)l.close();else if(13==e.keyCode)u();else if(13!=e.keyCode)return void l.modified();e.preventDefault(),e.stopPropagation()}))}}else(c=l.querySelector("select")).addEventListener("change",(function(e){l.modified(),h(e.target.value)}));return c&&c.focus(),l.querySelector("button").addEventListener("click",u),l}function u(){h(c.value)}function h(s){r&&r.values&&r.values.constructor===Object&&null!=r.values[s]&&(s=r.values[s]),"number"==typeof e.properties[t]&&(s=Number(s)),"array"!=i&&"object"!=i||(s=JSON.parse(s)),e.properties[t]=s,e.graph&&e.graph._version++,e.onPropertyChanged&&e.onPropertyChanged(t,s),n.onclose&&n.onclose(),l.close(),e.setDirtyCanvas(!0,!0)}},c.prototype.createDialog=function(e,n){def_options={checkForInput:!1,closeOnLeave:!0,closeOnLeave_checkModified:!0},n=Object.assign(def_options,n||{});var r=document.createElement("div");r.className="graphdialog",r.innerHTML=e,r.is_modified=!1;var i=this.canvas.getBoundingClientRect(),s=-20,o=-20;if(i&&(s-=i.left,o-=i.top),n.position?(s+=n.position[0],o+=n.position[1]):n.event?(s+=n.event.clientX,o+=n.event.clientY):(s+=.5*this.canvas.width,o+=.5*this.canvas.height),r.style.left=s+"px",r.style.top=o+"px",this.canvas.parentNode.appendChild(r),n.checkForInput){var a=[];(a=r.querySelectorAll("input"))&&a.forEach((function(e){e.addEventListener("keydown",(function(e){if(r.modified(),27==e.keyCode)r.close();else if(13!=e.keyCode)return;e.preventDefault(),e.stopPropagation()})),e.focus()}))}r.modified=function(){r.is_modified=!0},r.close=function(){r.parentNode&&r.parentNode.removeChild(r)};var l=null,c=!1;r.addEventListener("mouseleave",(function(e){c||(n.closeOnLeave||t.dialog_close_on_mouse_leave)&&!r.is_modified&&t.dialog_close_on_mouse_leave&&(l=setTimeout(r.close,t.dialog_close_on_mouse_leave_delay))})),r.addEventListener("mouseenter",(function(e){(n.closeOnLeave||t.dialog_close_on_mouse_leave)&&l&&clearTimeout(l)}));var u=r.querySelectorAll("select");return u&&u.forEach((function(e){e.addEventListener("click",(function(e){c++})),e.addEventListener("blur",(function(e){c=0})),e.addEventListener("change",(function(e){c=-1}))})),r},c.prototype.createPanel=function(e,n){var r=(n=n||{}).window||window,i=document.createElement("div");if(i.className="litegraph dialog",i.innerHTML="<div class='dialog-header'><span class='dialog-title'></span></div><div class='dialog-content'></div><div style='display:none;' class='dialog-alt-content'></div><div class='dialog-footer'></div>",i.header=i.querySelector(".dialog-header"),n.width&&(i.style.width=n.width+(n.width.constructor===Number?"px":"")),n.height&&(i.style.height=n.height+(n.height.constructor===Number?"px":"")),n.closable){var s=document.createElement("span");s.innerHTML="&#10005;",s.classList.add("close"),s.addEventListener("click",(function(){i.close()})),i.header.appendChild(s)}return i.title_element=i.querySelector(".dialog-title"),i.title_element.innerText=e,i.content=i.querySelector(".dialog-content"),i.alt_content=i.querySelector(".dialog-alt-content"),i.footer=i.querySelector(".dialog-footer"),i.close=function(){i.onClose&&"function"==typeof i.onClose&&i.onClose(),i.parentNode.removeChild(i),this.parentNode&&this.parentNode.removeChild(this)},i.toggleAltContent=function(e){if(void 0!==e)var t=e?"block":"none",n=e?"none":"block";else t="block"!=i.alt_content.style.display?"block":"none",n="block"!=i.alt_content.style.display?"none":"block";i.alt_content.style.display=t,i.content.style.display=n},i.toggleFooterVisibility=function(e){if(void 0!==e)var t=e?"block":"none";else t="block"!=i.footer.style.display?"block":"none";i.footer.style.display=t},i.clear=function(){this.content.innerHTML=""},i.addHTML=function(e,t,n){var r=document.createElement("div");return t&&(r.className=t),r.innerHTML=e,n?i.footer.appendChild(r):i.content.appendChild(r),r},i.addButton=function(e,t,n){var r=document.createElement("button");return r.innerText=e,r.options=n,r.classList.add("btn"),r.addEventListener("click",t),i.footer.appendChild(r),r},i.addSeparator=function(){var e=document.createElement("div");e.className="separator",i.content.appendChild(e)},i.addWidget=function(e,n,s,o,a){o=o||{};var l=String(s);"number"==(e=e.toLowerCase())&&(l=s.toFixed(3));var u=document.createElement("div");u.className="property",u.innerHTML="<span class='property_name'></span><span class='property_value'></span>",u.querySelector(".property_name").innerText=o.label||n;var h=u.querySelector(".property_value");if(h.innerText=l,u.dataset.property=n,u.dataset.type=o.type||e,u.options=o,u.value=s,"code"==e)u.addEventListener("click",(function(e){i.inner_showCodePad(this.dataset.property)}));else if("boolean"==e)u.classList.add("boolean"),s&&u.classList.add("bool-on"),u.addEventListener("click",(function(){var e=this.dataset.property;this.value=!this.value,this.classList.toggle("bool-on"),this.querySelector(".property_value").innerText=this.value?"true":"false",d(e,this.value)}));else if("string"==e||"number"==e)h.setAttribute("contenteditable",!0),h.addEventListener("keydown",(function(t){"Enter"!=t.code||"string"==e&&t.shiftKey||(t.preventDefault(),this.blur())})),h.addEventListener("blur",(function(){var e=this.innerText,t=this.parentNode.dataset.property;"number"==this.parentNode.dataset.type&&(e=Number(e)),d(t,e)}));else if("enum"==e||"combo"==e){l=c.getPropertyPrintableValue(s,o.values);h.innerText=l,h.addEventListener("click",(function(e){var n=o.values||[],i=this.parentNode.dataset.property,s=this;new t.ContextMenu(n,{event:e,className:"dark",callback:function(e,t,n){return s.innerText=e,d(i,e),!1}},r)}))}function d(e,t){o.callback&&o.callback(e,t,o),a&&a(e,t,o)}return i.content.appendChild(u),u},i.onOpen&&"function"==typeof i.onOpen&&i.onOpen(),i},c.getPropertyPrintableValue=function(e,t){if(!t)return String(e);if(t.constructor===Array)return String(e);if(t.constructor===Object){var n="";for(var r in t)if(t[r]==e){n=r;break}return String(e)+" ("+n+")"}},c.prototype.closePanels=function(){var e;(e=document.querySelector("#node-panel"))&&e.close(),(e=document.querySelector("#option-panel"))&&e.close()},c.prototype.showShowGraphOptionsPanel=function(e,n,r,i){if(this.constructor&&"HTMLDivElement"==this.constructor.name){if(!(n&&n.event&&n.event.target&&n.event.target.lgraphcanvas))return void console.warn("Canvas not found");var s=n.event.target.lgraphcanvas}else s=this;s.closePanels();var o=s.getCanvasWindow();panel=s.createPanel("Options",{closable:!0,window:o,onOpen:function(){s.OPTIONPANEL_IS_OPEN=!0},onClose:function(){s.OPTIONPANEL_IS_OPEN=!1,s.options_panel=null}}),s.options_panel=panel,panel.id="option-panel",panel.classList.add("settings"),function(){panel.content.innerHTML="";var e=function(e,t,n){n&&n.key&&(e=n.key),n.values&&(t=Object.values(n.values).indexOf(t)),s[e]=t},n=t.availableCanvasOptions;for(pI in n.sort(),n){var r=n[pI];panel.addWidget("boolean",r,s[r],{key:r,on:"True",off:"False"},e)}s.links_render_mode,panel.addWidget("combo","Render mode",t.LINK_RENDER_MODES[s.links_render_mode],{key:"links_render_mode",values:t.LINK_RENDER_MODES},e),panel.addSeparator(),panel.footer.innerHTML=""}(),s.canvas.parentNode.appendChild(panel)},c.prototype.showShowNodePanel=function(e){this.SELECTED_NODE=e,this.closePanels();var r=this.getCanvasWindow(),i=this;function s(){panel.content.innerHTML="",panel.addHTML("<span class='node_type'>"+e.type+"</span><span class='node_desc'>"+(e.constructor.desc||"")+"</span><span class='separator'></span>"),panel.addHTML("<h3>Properties</h3>");var r=function(r,s){switch(i.graph.beforeChange(e),r){case"Title":e.title=s;break;case"Mode":var o=Object.values(t.NODE_MODES).indexOf(s);o>=0&&t.NODE_MODES[o]?e.changeMode(o):console.warn("unexpected mode: "+s);break;case"Color":c.node_colors[s]?(e.color=n(c.node_colors[s].color,.5),e.bgcolor=n(c.node_colors[s].bgcolor,.5)):console.warn("unexpected color: "+s);break;default:e.setProperty(r,s)}i.graph.afterChange(),i.dirty_canvas=!0};panel.addWidget("string","Title",e.title,{},r),panel.addWidget("combo","Mode",t.NODE_MODES[e.mode],{values:t.NODE_MODES},r);var s="";for(var o in void 0!==e.color&&(s=Object.keys(c.node_colors).filter((function(t){return c.node_colors[t].color==e.color}))),panel.addWidget("combo","Color",s,{values:Object.keys(c.node_colors)},r),e.properties){var a=e.properties[o],l=e.getPropertyInfo(o);l.type;e.onAddPropertyToPanel&&e.onAddPropertyToPanel(o,panel)||panel.addWidget(l.widget||l.type,o,a,l,r)}panel.addSeparator(),e.onShowCustomPanelInfo&&e.onShowCustomPanelInfo(panel),panel.footer.innerHTML="",panel.addButton("Delete",(function(){e.block_delete||(e.graph.remove(e),panel.close())})).classList.add("delete")}panel=this.createPanel(e.title||"",{closable:!0,window:r,onOpen:function(){i.NODEPANEL_IS_OPEN=!0},onClose:function(){i.NODEPANEL_IS_OPEN=!1,i.node_panel=null}}),i.node_panel=panel,panel.id="node-panel",panel.node=e,panel.classList.add("settings"),panel.inner_showCodePad=function(t){panel.classList.remove("settings"),panel.classList.add("centered"),panel.alt_content.innerHTML="<textarea class='code'></textarea>";var n=panel.alt_content.querySelector("textarea"),r=function(){panel.toggleAltContent(!1),panel.toggleFooterVisibility(!0),n.parentNode.removeChild(n),panel.classList.add("settings"),panel.classList.remove("centered"),s()};n.value=e.properties[t],n.addEventListener("keydown",(function(i){"Enter"==i.code&&i.ctrlKey&&(e.setProperty(t,n.value),r())})),panel.toggleAltContent(!0),panel.toggleFooterVisibility(!1),n.style.height="calc(100% - 40px)";var i=panel.addButton("Assign",(function(){e.setProperty(t,n.value),r()}));panel.alt_content.appendChild(i);var o=panel.addButton("Close",r);o.style.float="right",panel.alt_content.appendChild(o)},s(),this.canvas.parentNode.appendChild(panel)},c.prototype.showSubgraphPropertiesDialog=function(e){console.log("showing subgraph properties dialog");var t=this.canvas.parentNode.querySelector(".subgraph_dialog");t&&t.close();var n=this.createPanel("Subgraph Inputs",{closable:!0,width:500});function r(){if(n.clear(),e.inputs)for(var t=0;t<e.inputs.length;++t){var i=e.inputs[t];if(!i.not_subgraph_input){var s=n.addHTML("<button>&#10005;</button> <span class='bullet_icon'></span><span class='name'></span><span class='type'></span>","subgraph_property");s.dataset.name=i.name,s.dataset.slot=t,s.querySelector(".name").innerText=i.name,s.querySelector(".type").innerText=i.type,s.querySelector("button").addEventListener("click",(function(t){e.removeInput(Number(this.parentNode.dataset.slot)),r()}))}}}n.node=e,n.classList.add("subgraph_dialog");return n.addHTML(" + <span class='label'>Name</span><input class='name'/><span class='label'>Type</span><input class='type'></input><button>+</button>","subgraph_property extra",!0).querySelector("button").addEventListener("click",(function(t){var n=this.parentNode,i=n.querySelector(".name").value,s=n.querySelector(".type").value;i&&-1==e.findInputSlot(i)&&(e.addInput(i,s),n.querySelector(".name").value="",n.querySelector(".type").value="",r())})),r(),this.canvas.parentNode.appendChild(n),n},c.prototype.showSubgraphPropertiesDialogRight=function(e){var t=this.canvas.parentNode.querySelector(".subgraph_dialog");t&&t.close();var n=this.createPanel("Subgraph Outputs",{closable:!0,width:500});function r(){if(n.clear(),e.outputs)for(var t=0;t<e.outputs.length;++t){var i=e.outputs[t];if(!i.not_subgraph_output){var s=n.addHTML("<button>&#10005;</button> <span class='bullet_icon'></span><span class='name'></span><span class='type'></span>","subgraph_property");s.dataset.name=i.name,s.dataset.slot=t,s.querySelector(".name").innerText=i.name,s.querySelector(".type").innerText=i.type,s.querySelector("button").addEventListener("click",(function(t){e.removeOutput(Number(this.parentNode.dataset.slot)),r()}))}}}n.node=e,n.classList.add("subgraph_dialog");var i=n.addHTML(" + <span class='label'>Name</span><input class='name'/><span class='label'>Type</span><input class='type'></input><button>+</button>","subgraph_property extra",!0);function s(){var t=this.parentNode,n=t.querySelector(".name").value,i=t.querySelector(".type").value;n&&-1==e.findOutputSlot(n)&&(e.addOutput(n,i),t.querySelector(".name").value="",t.querySelector(".type").value="",r())}return i.querySelector(".name").addEventListener("keydown",(function(e){13==e.keyCode&&s.apply(this)})),i.querySelector("button").addEventListener("click",(function(e){s.apply(this)})),r(),this.canvas.parentNode.appendChild(n),n},c.prototype.checkPanels=function(){if(this.canvas)for(var e=this.canvas.parentNode.querySelectorAll(".litegraph.dialog"),t=0;t<e.length;++t){var n=e[t];n.node&&(n.node.graph&&n.graph==this.graph||n.close())}},c.onMenuNodeCollapse=function(e,t,n,r,i){i.graph.beforeChange();var s=function(e){e.collapse()},o=c.active_canvas;if(!o.selected_nodes||Object.keys(o.selected_nodes).length<=1)s(i);else for(var a in o.selected_nodes)s(o.selected_nodes[a]);i.graph.afterChange()},c.onMenuNodePin=function(e,t,n,r,i){i.pin()},c.onMenuNodeMode=function(e,n,r,i,s){return new t.ContextMenu(t.NODE_MODES,{event:r,callback:function(e){if(!s)return;var n=Object.values(t.NODE_MODES).indexOf(e),r=function(r){n>=0&&t.NODE_MODES[n]?r.changeMode(n):(console.warn("unexpected mode: "+e),r.changeMode(t.ALWAYS))},i=c.active_canvas;if(!i.selected_nodes||Object.keys(i.selected_nodes).length<=1)r(s);else for(var o in i.selected_nodes)r(i.selected_nodes[o])},parentMenu:i,node:s}),!1},c.onMenuNodeColors=function(e,r,i,s,o){if(!o)throw"no node for color";var a=[];for(var l in a.push({value:null,content:"<span style='display: block; padding-left: 4px;'>No color</span>"}),c.node_colors){var u=c.node_colors[l];e={value:l,content:"<span style='display: block; color: #999; padding-left: 4px; border-left: 8px solid "+u.color+"; background-color:"+u.bgcolor+"'>"+l+"</span>"};a.push(e)}return new t.ContextMenu(a,{event:i,callback:function(e){if(!o)return;var r=e.value?c.node_colors[e.value]:null,i=function(e){r?e.constructor===t.LGraphGroup?e.color=r.groupcolor:(e.color=n(r.color,.5),e.bgcolor=n(r.bgcolor,.5)):(delete e.color,delete e.bgcolor)},s=c.active_canvas;if(!s.selected_nodes||Object.keys(s.selected_nodes).length<=1)i(o);else for(var a in s.selected_nodes)i(s.selected_nodes[a]);o.setDirtyCanvas(!0,!0)},parentMenu:s,node:o}),!1},c.onMenuNodeShapes=function(e,n,r,i,s){if(!s)throw"no node passed";return new t.ContextMenu(t.VALID_SHAPES,{event:r,callback:function(e){if(!s)return;s.graph.beforeChange();var t=function(t){t.shape=e},n=c.active_canvas;if(!n.selected_nodes||Object.keys(n.selected_nodes).length<=1)t(s);else for(var r in n.selected_nodes)t(n.selected_nodes[r]);s.graph.afterChange(),s.setDirtyCanvas(!0)},parentMenu:i,node:s}),!1},c.onMenuNodeRemove=function(e,t,n,r,i){if(!i)throw"no node passed";var s=i.graph;s.beforeChange();var o=function(e){!1!==e.removable&&s.remove(e)},a=c.active_canvas;if(!a.selected_nodes||Object.keys(a.selected_nodes).length<=1)o(i);else for(var l in a.selected_nodes)o(a.selected_nodes[l]);s.afterChange(),i.setDirtyCanvas(!0,!0)},c.onMenuNodeToSubgraph=function(e,n,r,i,s){var o=s.graph,a=c.active_canvas;if(a){var l=Object.values(a.selected_nodes||{});l.length||(l=[s]);var u=t.createNode("graph/subgraph");u.pos=s.pos.concat(),o.add(u),u.buildFromNodes(l),a.deselectAllNodes(),s.setDirtyCanvas(!0,!0)}},c.onMenuHideInputConnections=function(e,t,n,r,i){i.graph.beforeChange();var s={},o=function(e){e.hide_input_connections=!e.hide_input_connections},a=c.active_canvas;if(!a.selected_nodes||Object.keys(a.selected_nodes).length<=1)o(i);else for(var l in a.selected_nodes)o(a.selected_nodes[l]);Object.keys(s).length&&a.selectNodes(s),i.graph.afterChange(),i.setDirtyCanvas(!0,!0)},c.onMenuNodeClone=function(e,t,n,r,i){i.graph.beforeChange();var s={},o=function(e){if(0!=e.clonable){var t=e.clone();t&&(t.pos=[e.pos[0]+5,e.pos[1]+5],e.graph.add(t),s[t.id]=t)}},a=c.active_canvas;if(!a.selected_nodes||Object.keys(a.selected_nodes).length<=1)o(i);else for(var l in a.selected_nodes)o(a.selected_nodes[l]);Object.keys(s).length&&a.selectNodes(s),i.graph.afterChange(),i.setDirtyCanvas(!0,!0)},c.node_colors={red:{color:"#322",bgcolor:"#533",groupcolor:"#A88"},brown:{color:"#332922",bgcolor:"#593930",groupcolor:"#b06634"},green:{color:"#232",bgcolor:"#353",groupcolor:"#8A8"},blue:{color:"#223",bgcolor:"#335",groupcolor:"#88A"},pale_blue:{color:"#2a363b",bgcolor:"#3f5159",groupcolor:"#3f789e"},cyan:{color:"#233",bgcolor:"#355",groupcolor:"#8AA"},purple:{color:"#323",bgcolor:"#535",groupcolor:"#a1309b"},yellow:{color:"#432",bgcolor:"#653",groupcolor:"#b58b2a"},black:{color:"#222",bgcolor:"#000",groupcolor:"#444"}},c.prototype.getCanvasMenuOptions=function(){var e=null;if(this.getMenuOptions?e=this.getMenuOptions():(e=[{content:"Add Node",has_submenu:!0,callback:c.onMenuAdd},{content:"Add Group",callback:c.onGroupAdd}],this._graph_stack&&this._graph_stack.length>0&&e.push(null,{content:"Close subgraph",callback:this.closeSubgraph.bind(this)})),this.getExtraMenuOptions){var t=this.getExtraMenuOptions(this,e);t&&(e=e.concat(t))}return e},c.prototype.getNodeMenuOptions=function(e){var t=null;if(e.getMenuOptions?t=e.getMenuOptions(this):(t=[{content:"Inputs",has_submenu:!0,disabled:!0,callback:c.showMenuNodeOptionalInputs},{content:"Outputs",has_submenu:!0,disabled:!0,callback:c.showMenuNodeOptionalOutputs},null,{content:"Properties",has_submenu:!0,callback:c.onShowMenuNodeProperties},null,{content:"Title",callback:c.onShowPropertyEditor},{content:"Mode",has_submenu:!0,callback:c.onMenuNodeMode}],!1!==e.resizable&&t.push({content:"Resize",callback:c.onMenuResizeNode}),t.push({content:"Collapse",callback:c.onMenuNodeCollapse},{content:"Pin",callback:c.onMenuNodePin},{content:"Colors",has_submenu:!0,callback:c.onMenuNodeColors},{content:"Shapes",has_submenu:!0,callback:c.onMenuNodeShapes},null)),e.onGetInputs){var n=e.onGetInputs();n&&n.length&&(t[0].disabled=!1)}if(e.onGetOutputs){var r=e.onGetOutputs();r&&r.length&&(t[1].disabled=!1)}if(e.getExtraMenuOptions){var i=e.getExtraMenuOptions(this,t);i&&(i.push(null),t=i.concat(t))}return!1!==e.clonable&&t.push({content:"Clone",callback:c.onMenuNodeClone}),t.push({content:!0!==e.hide_input_connections?"Hide Input Connections":"Show Input Connections",callback:c.onMenuHideInputConnections}),t.push(null,{content:"Remove",disabled:!(!1!==e.removable&&!e.block_delete),callback:c.onMenuNodeRemove}),e.graph&&e.graph.onGetNodeMenuOptions&&e.graph.onGetNodeMenuOptions(t,e),t},c.prototype.getGroupMenuOptions=function(e){return[{content:"Title",callback:c.onShowPropertyEditor},{content:"Color",has_submenu:!0,callback:c.onMenuNodeColors},{content:"Font size",property:"font_size",type:"Number",callback:c.onShowPropertyEditor},null,{content:"Remove",callback:c.onMenuNodeRemove}]},c.prototype.processContextMenu=function(e,n){var r=this,i=c.active_canvas.getCanvasWindow(),s=null,o={event:n,callback:function(t,n,i){if(!t)return;if("Remove Slot"==t.content){var s=t.slot;return e.graph.beforeChange(),s.input?e.removeInput(s.slot):s.output&&e.removeOutput(s.slot),void e.graph.afterChange()}if("Disconnect Links"==t.content){s=t.slot;return e.graph.beforeChange(),s.output?e.disconnectOutput(s.slot):s.input&&e.disconnectInput(s.slot),void e.graph.afterChange()}if("Rename Slot"==t.content){var o=(s=t.slot).input?e.getInputInfo(s.slot):e.getOutputInfo(s.slot),a=r.createDialog("<span class='name'>Name</span><input autofocus type='text'/><button>OK</button>",n),l=a.querySelector("input");l&&o&&(l.value=o.label||"");var c=function(){e.graph.beforeChange(),l.value&&(o&&(o.label=l.value),r.setDirty(!0)),a.close(),e.graph.afterChange()};a.querySelector("button").addEventListener("click",c),l.addEventListener("keydown",(function(e){if(a.is_modified=!0,27==e.keyCode)a.close();else if(13==e.keyCode)c();else if(13!=e.keyCode&&"textarea"!=e.target.localName)return;e.preventDefault(),e.stopPropagation()})),l.focus()}},extra:e};e&&(o.title=e.type);var a=null;if(e&&(a=e.getSlotInPosition(n.canvasX,n.canvasY),c.active_node=e),a){if(s=[],e.getSlotMenuOptions)s=e.getSlotMenuOptions(a);else{a&&a.output&&a.output.links&&a.output.links.length&&s.push({content:"Disconnect Links",slot:a});var l=a.input||a.output;l.removable&&s.push(l.locked?"Cannot remove":{content:"Remove Slot",slot:a}),l.nameLocked||s.push({content:"Rename Slot",slot:a})}o.title=(a.input?a.input.type:a.output.type)||"*",a.input&&a.input.type==t.ACTION&&(o.title="Action"),a.output&&a.output.type==t.EVENT&&(o.title="Event")}else if(e)s=this.getNodeMenuOptions(e);else{s=this.getCanvasMenuOptions();var u=this.graph.getGroupOnPos(n.canvasX,n.canvasY);u&&s.push(null,{content:"Edit Group",has_submenu:!0,submenu:{title:"Group",extra:u,options:this.getGroupMenuOptions(u)}})}if(s)new t.ContextMenu(s,o,i)},"undefined"!=typeof window&&window.CanvasRenderingContext2D&&!window.CanvasRenderingContext2D.prototype.roundRect&&(window.CanvasRenderingContext2D.prototype.roundRect=function(e,t,n,r,i,s){var o=0,a=0,l=0,c=0;if(0!==i){if(void 0===s&&(s=i),null!=i&&i.constructor===Array)if(1==i.length)o=a=l=c=i[0];else if(2==i.length)o=c=i[0],a=l=i[1];else{if(4!=i.length)return;o=i[0],a=i[1],l=i[2],c=i[3]}else o=i||0,a=i||0,l=s||0,c=s||0;this.moveTo(e+o,t),this.lineTo(e+n-a,t),this.quadraticCurveTo(e+n,t,e+n,t+a),this.lineTo(e+n,t+r-c),this.quadraticCurveTo(e+n,t+r,e+n-c,t+r),this.lineTo(e+c,t+r),this.quadraticCurveTo(e,t+r,e,t+r-l),this.lineTo(e,t+l),this.quadraticCurveTo(e,t,e+o,t)}else this.rect(e,t,n,r)}),t.compareObjects=function(e,t){for(var n in e)if(e[n]!=t[n])return!1;return!0},t.distance=v,t.colorToString=function(e){return"rgba("+Math.round(255*e[0]).toFixed()+","+Math.round(255*e[1]).toFixed()+","+Math.round(255*e[2]).toFixed()+","+(4==e.length?e[3].toFixed(2):"1.0")+")"},t.isInsideRectangle=y,t.growBounding=function(e,t,n){t<e[0]?e[0]=t:t>e[2]&&(e[2]=t),n<e[1]?e[1]=n:n>e[3]&&(e[3]=n)},t.isInsideBounding=function(e,t){return!(e[0]<t[0][0]||e[1]<t[0][1]||e[0]>t[1][0]||e[1]>t[1][1])},t.overlapBounding=b,t.hex2num=function(e){"#"==e.charAt(0)&&(e=e.slice(1)),e=e.toUpperCase();for(var t,n,r="0123456789ABCDEF",i=new Array(3),s=0,o=0;o<6;o+=2)t=r.indexOf(e.charAt(o)),n=r.indexOf(e.charAt(o+1)),i[s]=16*t+n,s++;return i},t.num2hex=function(e){for(var t,n,r="0123456789ABCDEF",i="#",s=0;s<3;s++)t=e[s]/16,n=e[s]%16,i+=r.charAt(t)+r.charAt(n);return i},_.prototype.addItem=function(e,n,r){var i=this;r=r||{};var s=document.createElement("div");s.className="litemenu-entry submenu";var o=!1;function a(e){var t=this.value,n=!0;(i.current_submenu&&i.current_submenu.close(e),r.callback)&&(!0===r.callback.call(this,t,r,e,i,r.node)&&(n=!1));if(t){if(t.callback&&!r.ignore_item_callbacks&&!0!==t.disabled)!0===t.callback.call(this,t,r,e,i,r.extra)&&(n=!1);if(t.submenu){if(!t.submenu.options)throw"ContextMenu submenu needs options";new i.constructor(t.submenu.options,{callback:t.submenu.callback,event:e,parentMenu:i,ignore_item_callbacks:t.submenu.ignore_item_callbacks,title:t.submenu.title,extra:t.submenu.extra,autoopen:r.autoopen});n=!1}}n&&!i.lock&&i.close()}return null===n?s.classList.add("separator"):(s.innerHTML=n&&n.title?n.title:e,s.value=n,n&&(n.disabled&&(o=!0,s.classList.add("disabled")),(n.submenu||n.has_submenu)&&s.classList.add("has_submenu")),"function"==typeof n?(s.dataset.value=e,s.onclick_callback=n):s.dataset.value=n,n.className&&(s.className+=" "+n.className)),this.root.appendChild(s),o||s.addEventListener("click",a),r.autoopen&&t.pointerListenerAdd(s,"enter",(function(e){var t=this.value;if(!t||!t.has_submenu)return;a.call(this,e)})),s},_.prototype.close=function(e,n){this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.parentMenu&&!n&&(this.parentMenu.lock=!1,this.parentMenu.current_submenu=null,void 0===e?this.parentMenu.close():e&&!_.isCursorOverElement(e,this.parentMenu.root)&&_.trigger(this.parentMenu.root,t.pointerevents_method+"leave",e)),this.current_submenu&&this.current_submenu.close(e,!0),this.root.closing_timer&&clearTimeout(this.root.closing_timer)},_.trigger=function(e,t,n,r){var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,!0,!0,n),i.srcElement=r,e.dispatchEvent?e.dispatchEvent(i):e.__events&&e.__events.dispatchEvent(i),i},_.prototype.getTopMenu=function(){return this.options.parentMenu?this.options.parentMenu.getTopMenu():this},_.prototype.getFirstEvent=function(){return this.options.parentMenu?this.options.parentMenu.getFirstEvent():this.options.event},_.isCursorOverElement=function(e,t){var n=e.clientX,r=e.clientY,i=t.getBoundingClientRect();return!!i&&(r>i.top&&r<i.top+i.height&&n>i.left&&n<i.left+i.width)},t.ContextMenu=_,t.closeAllContextMenus=function(e){var t=(e=e||window).document.querySelectorAll(".litecontextmenu");if(t.length){for(var n=[],r=0;r<t.length;r++)n.push(t[r]);for(r=0;r<n.length;r++)n[r].close?n[r].close():n[r].parentNode&&n[r].parentNode.removeChild(n[r])}},t.extendClass=function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);if(t.prototype)for(var n in t.prototype)t.prototype.hasOwnProperty(n)&&(e.prototype.hasOwnProperty(n)||(t.prototype.__lookupGetter__(n)?e.prototype.__defineGetter__(n,t.prototype.__lookupGetter__(n)):e.prototype[n]=t.prototype[n],t.prototype.__lookupSetter__(n)&&e.prototype.__defineSetter__(n,t.prototype.__lookupSetter__(n))))},x.sampleCurve=function(e,t){if(t){for(var n=0;n<t.length-1;++n){var r=t[n],i=t[n+1];if(!(i[0]<e)){var s=i[0]-r[0];if(Math.abs(s)<1e-5)return r[1];var o=(e-r[0])/s;return r[1]*(1-o)+i[1]*o}}return 0}},x.prototype.draw=function(e,t,n,r,i,s){var o=this.points;if(o){this.size=t;var a=t[0]-2*this.margin,l=t[1]-2*this.margin;i=i||"#666",e.save(),e.translate(this.margin,this.margin),r&&(e.fillStyle="#111",e.fillRect(0,0,a,l),e.fillStyle="#222",e.fillRect(.5*a,0,1,l),e.strokeStyle="#333",e.strokeRect(0,0,a,l)),e.strokeStyle=i,s&&(e.globalAlpha=.5),e.beginPath();for(var c=0;c<o.length;++c){var u=o[c];e.lineTo(u[0]*a,(1-u[1])*l)}if(e.stroke(),e.globalAlpha=1,!s)for(c=0;c<o.length;++c){u=o[c];e.fillStyle=this.selected==c?"#FFF":this.nearest==c?"#DDD":"#AAA",e.beginPath(),e.arc(u[0]*a,(1-u[1])*l,2,0,2*Math.PI),e.fill()}e.restore()}},x.prototype.onMouseDown=function(e,t){var n=this.points;if(n&&!(e[1]<0)){var r=this.size[0]-2*this.margin,i=this.size[1]-2*this.margin,s=e[0]-this.margin,o=e[1]-this.margin,a=[s,o],l=30/t.ds.scale;if(this.selected=this.getCloserPoint(a,l),-1==this.selected){var c=[s/r,1-o/i];n.push(c),n.sort((function(e,t){return e[0]-t[0]})),this.selected=n.indexOf(c),this.must_update=!0}return-1!=this.selected||void 0}},x.prototype.onMouseMove=function(e,t){var n=this.points;if(n){var r=this.selected;if(!(r<0)){var i=(e[0]-this.margin)/(this.size[0]-2*this.margin),s=(e[1]-this.margin)/(this.size[1]-2*this.margin),o=[e[0]-this.margin,e[1]-this.margin],a=30/t.ds.scale;this._nearest=this.getCloserPoint(o,a);var l=n[r];if(l){var c=0==r||r==n.length-1;if(!c&&(e[0]<-10||e[0]>this.size[0]+10||e[1]<-10||e[1]>this.size[1]+10))return n.splice(r,1),void(this.selected=-1);l[0]=c?0==r?0:1:Math.clamp(i,0,1),l[1]=1-Math.clamp(s,0,1),n.sort((function(e,t){return e[0]-t[0]})),this.selected=n.indexOf(l),this.must_update=!0}}}},x.prototype.onMouseUp=function(e,t){return this.selected=-1,!1},x.prototype.getCloserPoint=function(e,t){var n=this.points;if(!n)return-1;t=t||30;for(var r=this.size[0]-2*this.margin,i=this.size[1]-2*this.margin,s=n.length,o=[0,0],a=1e6,l=-1,c=0;c<s;++c){var u=n[c];o[0]=u[0]*r,o[1]=(1-u[1])*i,o[0]<e[0]&&c;var h=vec2.distance(e,o);h>a||h>t||(l=c,a=h)}return l},t.CurveEditor=x,t.getParameterNames=function(e){return(e+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1)[0].replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)},t.pointerListenerAdd=function(e,n,r,i=!1){if(e&&e.addEventListener&&n&&"function"==typeof r){var s=t.pointerevents_method,o=n;if("pointer"==s&&!window.PointerEvent)switch(console.warn("sMethod=='pointer' && !window.PointerEvent"),console.log("Converting pointer["+o+"] : down move up cancel enter TO touchstart touchmove touchend, etc .."),o){case"down":s="touch",o="start";break;case"move":case"cancel":s="touch";break;case"up":s="touch",o="end";break;case"enter":console.log("debug: Should I send a move event?");break;default:console.warn("PointerEvent not available in this browser ? The event "+o+" would not be called")}switch(o){case"down":case"up":case"move":case"over":case"out":case"enter":e.addEventListener(s+o,r,i);case"leave":case"cancel":case"gotpointercapture":case"lostpointercapture":if("mouse"!=s)return e.addEventListener(s+o,r,i);default:return e.addEventListener(o,r,i)}}},t.pointerListenerRemove=function(e,n,r,i=!1){if(e&&e.removeEventListener&&n&&"function"==typeof r)switch(n){case"down":case"up":case"move":case"over":case"out":case"enter":"pointer"!=t.pointerevents_method&&"mouse"!=t.pointerevents_method||e.removeEventListener(t.pointerevents_method+n,r,i);case"leave":case"cancel":case"gotpointercapture":case"lostpointercapture":if("pointer"==t.pointerevents_method)return e.removeEventListener(t.pointerevents_method+n,r,i);default:return e.removeEventListener(n,r,i)}},Math.clamp=function(e,t,n){return t>e?t:n<e?n:e},"undefined"==typeof window||window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)})}(this),t.LiteGraph=this.LiteGraph,function(e){var t=e.LiteGraph;function n(){this.size=[140,80],this.properties={enabled:!0},this.enabled=!0,this.subgraph=new t.LGraph,this.subgraph._subgraph_node=this,this.subgraph._is_subgraph=!0,this.subgraph.onTrigger=this.onSubgraphTrigger.bind(this),this.subgraph.onInputAdded=this.onSubgraphNewInput.bind(this),this.subgraph.onInputRenamed=this.onSubgraphRenamedInput.bind(this),this.subgraph.onInputTypeChanged=this.onSubgraphTypeChangeInput.bind(this),this.subgraph.onInputRemoved=this.onSubgraphRemovedInput.bind(this),this.subgraph.onOutputAdded=this.onSubgraphNewOutput.bind(this),this.subgraph.onOutputRenamed=this.onSubgraphRenamedOutput.bind(this),this.subgraph.onOutputTypeChanged=this.onSubgraphTypeChangeOutput.bind(this),this.subgraph.onOutputRemoved=this.onSubgraphRemovedOutput.bind(this)}function r(){this.addOutput("","number"),this.name_in_graph="",this.properties={name:"",type:"number",value:0};var e=this;this.name_widget=this.addWidget("text","Name",this.properties.name,(function(t){t&&e.setProperty("name",t)})),this.type_widget=this.addWidget("text","Type",this.properties.type,(function(t){e.setProperty("type",t)})),this.value_widget=this.addWidget("number","Value",this.properties.value,(function(t){e.setProperty("value",t)})),this.widgets_up=!0,this.size=[180,90]}function i(){this.addInput("",""),this.name_in_graph="",this.properties={name:"",type:""};this.name_widget=this.addWidget("text","Name",this.properties.name,"name"),this.type_widget=this.addWidget("text","Type",this.properties.type,"type"),this.widgets_up=!0,this.size=[180,60]}n.title="Subgraph",n.desc="Graph inside a node",n.title_color="#334",n.prototype.onGetInputs=function(){return[["enabled","boolean"]]},n.prototype.onDblClick=function(e,t,n){var r=this;setTimeout((function(){n.openSubgraph(r.subgraph)}),10)},n.prototype.onAction=function(e,t){this.subgraph.onAction(e,t)},n.prototype.onExecute=function(){if(this.enabled=this.getInputOrProperty("enabled"),this.enabled){if(this.inputs)for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=this.getInputData(e);this.subgraph.setInputData(t.name,n)}if(this.subgraph.runStep(),this.outputs)for(e=0;e<this.outputs.length;e++){var r=this.outputs[e];n=this.subgraph.getOutputData(r.name);this.setOutputData(e,n)}}},n.prototype.sendEventToAllNodes=function(e,t,n){this.enabled&&this.subgraph.sendEventToAllNodes(e,t,n)},n.prototype.onDrawBackground=function(e,n,r,i){if(this.flags.collapsed)return;var s=this.size[1]-t.NODE_TITLE_HEIGHT+.5,o=t.isInsideRectangle(i[0],i[1],this.pos[0],this.pos[1]+s,this.size[0],t.NODE_TITLE_HEIGHT);let a=t.isInsideRectangle(i[0],i[1],this.pos[0],this.pos[1]+s,this.size[0]/2,t.NODE_TITLE_HEIGHT);e.fillStyle=o?"#555":"#222",e.beginPath(),this._shape==t.BOX_SHAPE?a?e.rect(0,s,this.size[0]/2+1,t.NODE_TITLE_HEIGHT):e.rect(this.size[0]/2,s,this.size[0]/2+1,t.NODE_TITLE_HEIGHT):a?e.roundRect(0,s,this.size[0]/2+1,t.NODE_TITLE_HEIGHT,[0,0,8,8]):e.roundRect(this.size[0]/2,s,this.size[0]/2+1,t.NODE_TITLE_HEIGHT,[0,0,8,8]),o?e.fill():e.fillRect(0,s,this.size[0]+1,t.NODE_TITLE_HEIGHT),e.textAlign="center",e.font="24px Arial",e.fillStyle=o?"#DDD":"#999",e.fillText("+",.25*this.size[0],s+24),e.fillText("+",.75*this.size[0],s+24)},n.prototype.onMouseDown=function(e,n,r){var i=this.size[1]-t.NODE_TITLE_HEIGHT+.5;console.log(0),n[1]>i&&(n[0]<this.size[0]/2?(console.log(1),r.showSubgraphPropertiesDialog(this)):(console.log(2),r.showSubgraphPropertiesDialogRight(this)))},n.prototype.computeSize=function(){var e=this.inputs?this.inputs.length:0,n=this.outputs?this.outputs.length:0;return[200,Math.max(e,n)*t.NODE_SLOT_HEIGHT+t.NODE_TITLE_HEIGHT]},n.prototype.onSubgraphTrigger=function(e,t){var n=this.findOutputSlot(e);-1!=n&&this.triggerSlot(n)},n.prototype.onSubgraphNewInput=function(e,t){-1==this.findInputSlot(e)&&this.addInput(e,t)},n.prototype.onSubgraphRenamedInput=function(e,t){var n=this.findInputSlot(e);-1!=n&&(this.getInputInfo(n).name=t)},n.prototype.onSubgraphTypeChangeInput=function(e,t){var n=this.findInputSlot(e);-1!=n&&(this.getInputInfo(n).type=t)},n.prototype.onSubgraphRemovedInput=function(e){var t=this.findInputSlot(e);-1!=t&&this.removeInput(t)},n.prototype.onSubgraphNewOutput=function(e,t){-1==this.findOutputSlot(e)&&this.addOutput(e,t)},n.prototype.onSubgraphRenamedOutput=function(e,t){var n=this.findOutputSlot(e);-1!=n&&(this.getOutputInfo(n).name=t)},n.prototype.onSubgraphTypeChangeOutput=function(e,t){var n=this.findOutputSlot(e);-1!=n&&(this.getOutputInfo(n).type=t)},n.prototype.onSubgraphRemovedOutput=function(e){var t=this.findInputSlot(e);-1!=t&&this.removeOutput(t)},n.prototype.getExtraMenuOptions=function(e){var t=this;return[{content:"Open",callback:function(){e.openSubgraph(t.subgraph)}}]},n.prototype.onResize=function(e){e[1]+=20},n.prototype.serialize=function(){var e=t.LGraphNode.prototype.serialize.call(this);return e.subgraph=this.subgraph.serialize(),e},n.prototype.clone=function(){var e=t.createNode(this.type),n=this.serialize();return delete n.id,delete n.inputs,delete n.outputs,e.configure(n),e},n.prototype.buildFromNodes=function(e){for(var t={},n=0,r=0;r<e.length;++r){t[(i=e[r]).id]=i,n=Math.min(i.pos[0],n),Math.max(i.pos[0],n)}for(r=0;r<e.length;++r){var i;if((i=e[r]).inputs)for(var s=0;s<i.inputs.length;++s){var o=i.inputs[s];if(o&&o.link)(c=i.graph.links[o.link])&&(t[c.origin_id]||this.subgraph.addInput(o.name,c.type))}if(i.outputs)for(s=0;s<i.outputs.length;++s){var a=i.outputs[s];if(a&&a.links&&a.links.length)for(var l=0;l<a.links.length;++l){var c;if((c=i.graph.links[a.links[l]])&&!t[c.target_id]){!0;break}}}}},t.Subgraph=n,t.registerNodeType("graph/subgraph",n),r.title="Input",r.desc="Input of the graph",r.prototype.onConfigure=function(){this.updateType()},r.prototype.updateType=function(){var e=this.properties.type;this.type_widget.value=e,this.outputs[0].type!=e&&(t.isValidConnection(this.outputs[0].type,e)||this.disconnectOutput(0),this.outputs[0].type=e),"number"==e?(this.value_widget.type="number",this.value_widget.value=0):"boolean"==e?(this.value_widget.type="toggle",this.value_widget.value=!0):"string"==e?(this.value_widget.type="text",this.value_widget.value=""):(this.value_widget.type=null,this.value_widget.value=null),this.properties.value=this.value_widget.value,this.graph&&this.name_in_graph&&this.graph.changeInputType(this.name_in_graph,e)},r.prototype.onPropertyChanged=function(e,t){if("name"==e){if(""==t||t==this.name_in_graph||"enabled"==t)return!1;this.graph&&(this.name_in_graph?this.graph.renameInput(this.name_in_graph,t):this.graph.addInput(t,this.properties.type)),this.name_widget.value=t,this.name_in_graph=t}else"type"==e&&this.updateType()},r.prototype.getTitle=function(){return this.flags.collapsed?this.properties.name:this.title},r.prototype.onAction=function(e,n){this.properties.type==t.EVENT&&this.triggerSlot(0,n)},r.prototype.onExecute=function(){var e=this.properties.name,t=this.graph.inputs[e];t?this.setOutputData(0,void 0!==t.value?t.value:this.properties.value):this.setOutputData(0,this.properties.value)},r.prototype.onRemoved=function(){this.name_in_graph&&this.graph.removeInput(this.name_in_graph)},t.GraphInput=r,t.registerNodeType("graph/input",r),i.title="Output",i.desc="Output of the graph",i.prototype.onPropertyChanged=function(e,t){if("name"==e){if(""==t||t==this.name_in_graph||"enabled"==t)return!1;this.graph&&(this.name_in_graph?this.graph.renameOutput(this.name_in_graph,t):this.graph.addOutput(t,this.properties.type)),this.name_widget.value=t,this.name_in_graph=t}else"type"==e&&this.updateType()},i.prototype.updateType=function(){var e=this.properties.type;this.type_widget&&(this.type_widget.value=e),this.inputs[0].type!=e&&("action"!=e&&"event"!=e||(e=t.EVENT),t.isValidConnection(this.inputs[0].type,e)||this.disconnectInput(0),this.inputs[0].type=e),this.graph&&this.name_in_graph&&this.graph.changeOutputType(this.name_in_graph,e)},i.prototype.onExecute=function(){this._value=this.getInputData(0),this.graph.setOutputData(this.properties.name,this._value)},i.prototype.onAction=function(e,n){this.properties.type==t.ACTION&&this.graph.trigger(this.properties.name,n)},i.prototype.onRemoved=function(){this.name_in_graph&&this.graph.removeOutput(this.name_in_graph)},i.prototype.getTitle=function(){return this.flags.collapsed?this.properties.name:this.title},t.GraphOutput=i,t.registerNodeType("graph/output",i)}(this)},"+YAm":(e,t,n)=>{"use strict";var r=n("m6HD"),i=n("oayG"),s=n("GnR7"),o=n("s0VS").exec,a=n("VcyG"),l=/^\.\.\.\s+(\w+)\s+(.+)/,c="win32"===r.platform?"p4.exe":"p4";function u(e,t,n){"function"==typeof t&&(n=t,t=void 0);var r=function(e){e=e||{};var t={stdin:[],args:[],files:[]};return Object.keys(e).map((function(n){var r=a[n];r&&("unary"!==r.category&&(e[n]||{}).constructor!==r.type||("stdin"===r.category?(t.stdin.push(r.cmd+e[n]),t.args.indexOf("-i")<0&&t.args.push("-i")):r.cmd?(t.args.push(r.cmd),"mixed"===r.category&&t.args.push(e[n])):t.files=t.files.concat(e[n])))})),t}(t),i=function(e){var t={cwd:!0,env:!0,encoding:!0,shell:!0,timeout:!0,maxBuffer:!0,killSignal:!0,uid:!0,gid:!0};return e=e||{},Object.keys(e).reduce((function(n,r){return t[r]&&(n[r]=e[r]),n}),{})}(t),s=[c,e,r.args.join(" "),r.files.join(" ")],l=o(s.join(" "),i,(function(e,t,r){return e?n(e):r?n(new Error(r)):n(null,t)}));r.stdin.length>0&&(r.stdin.forEach((function(e){l.stdin.write(e+"\n")})),l.stdin.emit("end"))}function h(e){return e.split("\n").reduce((function(e,t){var n,r,i;return(n=l.exec(t))&&(r=n[1],i=n[2],e[r]=i),e}),{})}function d(){}d.prototype.changelist={create:function(e,t){"function"==typeof e&&(t=e,e=void 0),u("change",{_change:"new",description:e.description||"<saved by node-perforce>"},(function(e,n){if(e)return t(e);var r=n.match(/([0-9]+)/g);return r.length>0?t(null,parseInt(r[0],10)):t(new Error("Unknown error"))}))},edit:function(e,t){return t=t||function(){},e&&e.changelist?e.description?void u("change",{_change:e.changelist.toString(),description:e.description},(function(e){return e?t(e):t()})):t():t(new Error("Missing parameter/argument"))},delete:function(e,t){if(t=t||function(){},!e||!e.changelist)return t(new Error("Missing parameter/argument"));u("change",{_delete:e.changelist},(function(e){return e?t(e):t()}))},view:function(e,t){if(!e||!e.changelist)return t(new Error("Missing parameter/argument"));u("change",{_output:e.changelist},(function(e,n){if(e)return t(e);n=n.replace(/(\t)+#(.)*/g,(function(e){return"@@@"+e.substring(3)}));var r={};return n.replace(/#(.)*\n/g,"").split(s.EOL+s.EOL).forEach((function(e){var t=i(e.split(":")[0].toLowerCase()).trim().camelize().s;t&&(r[t]=i(e).between(":").trim().s)})),r.files?r.files=r.files.split("\n").map((function(e){return{file:(e=e.replace(/\t*/g,"").split("@@@"))[0],action:e[1]}})):r.files=[],t(null,r)}))},submit:function(e,t){if(!e||!e.changelist)return t(new Error("Missing parameter/argument"));u("submit",e,(function(e,n){if(e)return t(e)}))}},d.prototype.info=function(e,t){"function"==typeof e&&(t=e,e=void 0),u("info",e,(function(e,n){if(e)return t(e);var r={};i(n).lines().forEach((function(e){if(e){var t=i(e.split(":")[0].toLowerCase()).camelize().s;r[t]=i(e).between(":").trim().s}})),t(null,r)}))},d.prototype.opened=function(e,t){"function"==typeof e&&(t=e,e=void 0),u("-ztag opened",e,(function(e,n){var r;if(e)return t(e);r=n.trim().split(/\r\n\r\n|\n\n/).reduce((function(e,t){return e.push(h(t)),e}),[]),t(null,r)}))},d.prototype.fstat=function(e,t){"function"==typeof e&&(t=e,e=void 0),u("fstat",e,(function(e,n){var r;if(e)return t(e);r=n.trim().split(/\r\n\r\n|\n\n/).reduce((function(e,t){return e.push(h(t)),e}),[]),t(null,r)}))},d.prototype.changes=function(e,t){"function"==typeof e&&(t=e,e=void 0),u("-ztag changes",e,(function(e,n){var r;if(e)return t(e);r=n.trim().split(/\r\n\r\n|\n\n(?=\.\.\.)/).reduce((function(e,t){return e.push(h(t)),e}),[]),t(null,r)}))},d.prototype.user=function(e,t){"function"==typeof e&&(t=e,e=void 0),u("-ztag user",e,(function(e,n){var r;if(e)return t(e);r=h(n.trim()),t(null,r)}))},d.prototype.users=function(e,t){"function"==typeof e&&(t=e,e=void 0),u("-ztag users",e,(function(e,n){var r;if(e)return t(e);r=n.trim().split(/\r\n\r\n|\n\n(?=\.\.\.)/).reduce((function(e,t){return e.push(h(t)),e}),[]),t(null,r)}))};["add","delete","edit","revert","sync","diff","reconcile","reopen","resolved","shelve","unshelve","client","resolve","submit"].forEach((function(e){d.prototype[e]=function(t,n){u(e,t,n)}})),e.exports=new d},VcyG:e=>{"use strict";e.exports={_change:{cmd:"Change:",type:String,category:"stdin"},description:{cmd:"Description:",type:String,category:"stdin"},acceptmerged:{cmd:"-am",category:"unary"},delete:{cmd:"-d",category:"unary"},changelist:{cmd:"-c",type:Number,category:"mixed"},shelved:{cmd:"-s",type:Number,category:"mixed"},stream:{cmd:"-S",type:String,category:"mixed"},filetype:{cmd:"-t",type:String,category:"mixed"},_delete:{cmd:"-d",type:String,category:"mixed"},_output:{cmd:"-o",type:String,category:"mixed"},force:{cmd:"-f",category:"unary"},switch:{cmd:"-s",category:"unary"},unchanged:{cmd:"-a",category:"unary"},files:{type:Array,category:"mixed"},max:{cmd:"-m",type:Number,category:"mixed"},client:{cmd:"-c",type:String,category:"mixed"},long:{cmd:"-l",category:"unary"},trunk:{cmd:"-L",category:"unary"},status:{cmd:"-s",type:String,category:"mixed"},time:{cmd:"-t",category:"unary"},user:{cmd:"-u",type:String,category:"mixed"},custom:{cmd:" ",type:String,category:"mixed"}}},FMeR:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,s){for(var o,a,l=i(e),c=1;c<arguments.length;c++){for(var u in o=Object(arguments[c]))n.call(o,u)&&(l[u]=o[u]);if(t){a=t(o);for(var h=0;h<a.length;h++)r.call(o,a[h])&&(l[a[h]]=o[a[h]])}}return l}},"+vUH":(e,t,n)=>{var r=n("R+q8");e.exports=p,e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,o=0,a="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],p=n.index;if(a+=e.slice(o,p),o=p+h.length,d)a+=d[1];else{var f=e[o],m=n[2],g=n[3],v=n[4],y=n[5],b=n[6],_=n[7];a&&(r.push(a),a="");var x=null!=m&&null!=f&&f!==m,w="+"===b||"*"===b,S="?"===b||"*"===b,T=n[2]||u,E=v||y;r.push({name:g||s++,prefix:m||"",delimiter:T,optional:S,repeat:w,partial:x,asterisk:!!_,pattern:E?c(E):_?".*":"[^"+l(T)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var s="",a=t||{},l=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!=typeof u){var h,d=a[u.name];if(null==d){if(u.optional){u.partial&&(s+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(h=l(d[p]),!n[c].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");s+=(0===p?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!n[c].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');s+=u.prefix+h}}else s+=u}return s}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,s=!1!==n.end,o="",a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)o+=l(c);else{var d=l(c.prefix),p="(?:"+c.pattern+")";t.push(c),c.repeat&&(p+="(?:"+d+p+")*"),o+=p=c.optional?c.partial?d+"("+p+")?":"(?:"+d+"("+p+"))?":d+"("+p+")"}}var f=l(n.delimiter||"/"),m=o.slice(-f.length)===f;return i||(o=(m?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=s?"$":i&&m?"":"(?="+f+"|$)",u(new RegExp("^"+o,h(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(s(e,n),t,n)}(e,t,n)}},"R+q8":e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},VXBr:(e,t,n)=>{"use strict";var r=n("m6HD"),i="win32"===r.platform,s=n("UOyM");function o(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];i&&"."!==i&&(".."===i?n.length&&".."!==n[n.length-1]?n.pop():t&&n.push(".."):n.push(i))}return n}function a(e){for(var t=e.length-1,n=0;n<=t&&!e[n];n++);for(var r=t;r>=0&&!e[r];r--);return 0===n&&r===t?e:n>r?[]:e.slice(n,r+1)}var l=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,c=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,u={};function h(e){var t=l.exec(e),n=(t[1]||"")+(t[2]||""),r=t[3]||"",i=c.exec(r);return[n,i[1],i[2],i[3]]}function d(e){var t=l.exec(e),n=t[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!t[2],tail:t[3]}}function p(e){return"\\\\"+e.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}u.resolve=function(){for(var e="",t="",n=!1,i=arguments.length-1;i>=-1;i--){var a;if(i>=0?a=arguments[i]:e?(a=r.env["="+e])&&a.substr(0,3).toLowerCase()===e.toLowerCase()+"\\"||(a=e+"\\"):a=r.cwd(),!s.isString(a))throw new TypeError("Arguments to path.resolve must be strings");if(a){var l=d(a),c=l.device,u=l.isUnc,h=l.isAbsolute,f=l.tail;if((!c||!e||c.toLowerCase()===e.toLowerCase())&&(e||(e=c),n||(t=f+"\\"+t,n=h),e&&n))break}}return u&&(e=p(e)),e+(n?"\\":"")+(t=o(t.split(/[\\\/]+/),!n).join("\\"))||"."},u.normalize=function(e){var t=d(e),n=t.device,r=t.isUnc,i=t.isAbsolute,s=t.tail,a=/[\\\/]$/.test(s);return(s=o(s.split(/[\\\/]+/),!i).join("\\"))||i||(s="."),s&&a&&(s+="\\"),r&&(n=p(n)),n+(i?"\\":"")+s},u.isAbsolute=function(e){return d(e).isAbsolute},u.join=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(!s.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&e.push(n)}var r=e.join("\\");return/^[\\\/]{2}[^\\\/]/.test(e[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),u.normalize(r)},u.relative=function(e,t){e=u.resolve(e),t=u.resolve(t);for(var n=e.toLowerCase(),r=t.toLowerCase(),i=a(t.split("\\")),s=a(n.split("\\")),o=a(r.split("\\")),l=Math.min(s.length,o.length),c=l,h=0;h<l;h++)if(s[h]!==o[h]){c=h;break}if(0==c)return t;var d=[];for(h=c;h<s.length;h++)d.push("..");return(d=d.concat(i.slice(c))).join("\\")},u._makeLong=function(e){if(!s.isString(e))return e;if(!e)return"";var t=u.resolve(e);return/^[a-zA-Z]\:\\/.test(t)?"\\\\?\\"+t:/^\\\\[^?.]/.test(t)?"\\\\?\\UNC\\"+t.substring(2):e},u.dirname=function(e){var t=h(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},u.basename=function(e,t){var n=h(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},u.extname=function(e){return h(e)[3]},u.format=function(e){if(!s.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!s.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);var n=e.dir,r=e.base||"";return n?n[n.length-1]===u.sep?n+r:n+u.sep+r:r},u.parse=function(e){if(!s.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=h(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},u.sep="\\",u.delimiter=";";var f=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,m={};function g(e){return f.exec(e).slice(1)}m.resolve=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var i=n>=0?arguments[n]:r.cwd();if(!s.isString(i))throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,t="/"===i[0])}return(t?"/":"")+(e=o(e.split("/"),!t).join("/"))||"."},m.normalize=function(e){var t=m.isAbsolute(e),n=e&&"/"===e[e.length-1];return(e=o(e.split("/"),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},m.isAbsolute=function(e){return"/"===e.charAt(0)},m.join=function(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(!s.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(e+=e?"/"+n:n)}return m.normalize(e)},m.relative=function(e,t){e=m.resolve(e).substr(1),t=m.resolve(t).substr(1);for(var n=a(e.split("/")),r=a(t.split("/")),i=Math.min(n.length,r.length),s=i,o=0;o<i;o++)if(n[o]!==r[o]){s=o;break}var l=[];for(o=s;o<n.length;o++)l.push("..");return(l=l.concat(r.slice(s))).join("/")},m._makeLong=function(e){return e},m.dirname=function(e){var t=g(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},m.basename=function(e,t){var n=g(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},m.extname=function(e){return g(e)[3]},m.format=function(e){if(!s.isObject(e))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof e);var t=e.root||"";if(!s.isString(t))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof e.root);return(e.dir?e.dir+m.sep:"")+(e.base||"")},m.parse=function(e){if(!s.isString(e))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof e);var t=g(e);if(!t||4!==t.length)throw new TypeError("Invalid path '"+e+"'");return t[1]=t[1]||"",t[2]=t[2]||"",t[3]=t[3]||"",{root:t[0],dir:t[0]+t[1].slice(0,-1),base:t[2],ext:t[3],name:t[2].slice(0,t[2].length-t[3].length)}},m.sep="/",m.delimiter=":",e.exports=i?u:m,e.exports.posix=m,e.exports.win32=u},m6HD:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var a,l=[],c=!1,u=-1;function h(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&d())}function d(){if(!c){var e=o(h);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},qoQM:(e,t,n)=>{"use strict";var r=n("GSM+");function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},bg8x:(e,t,n)=>{e.exports=n("qoQM")()},"GSM+":e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},uVZz:(e,t,n)=>{"use strict";var r=n("ynia"),i=n("FMeR"),s=n("lbaC");function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var a=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(m,e)||!p.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);v[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,T=60107,E=60108,M=60114,A=60109,C=60110,k=60112,P=60113,R=60120,L=60115,O=60116,N=60121,I=60128,D=60129,F=60130,z=60131;if("function"==typeof Symbol&&Symbol.for){var U=Symbol.for;w=U("react.element"),S=U("react.portal"),T=U("react.fragment"),E=U("react.strict_mode"),M=U("react.profiler"),A=U("react.provider"),C=U("react.context"),k=U("react.forward_ref"),P=U("react.suspense"),R=U("react.suspense_list"),L=U("react.memo"),O=U("react.lazy"),N=U("react.block"),U("react.scope"),I=U("react.opaque.id"),D=U("react.debug_trace_mode"),F=U("react.offscreen"),z=U("react.legacy_hidden")}var B,V="function"==typeof Symbol&&Symbol.iterator;function G(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=V&&e[V]||e["@@iterator"])?e:null}function Z(e){if(void 0===B)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var H=!1;function j(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=a);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Z(e):""}function W(e){switch(e.tag){case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 22:return e=j(e.type._render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case T:return"Fragment";case S:return"Portal";case M:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case L:return q(e.type);case N:return q(e._render);case O:t=e._payload,e=e._init;try{return q(e(t))}catch(e){}}return null}function K(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function se(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ce(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,ve=(ge=function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Te(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Me(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Ce=null,ke=null;function Pe(e){if(e=ri(e)){if("function"!=typeof Ae)throw Error(o(280));var t=e.stateNode;t&&(t=si(t),Ae(e.stateNode,e.type,t))}}function Re(e){Ce?ke?ke.push(e):ke=[e]:Ce=e}function Le(){if(Ce){var e=Ce,t=ke;if(ke=Ce=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Oe(e,t){return e(t)}function Ne(e,t,n,r,i){return e(t,n,r,i)}function Ie(){}var De=Oe,Fe=!1,ze=!1;function Ue(){null===Ce&&null===ke||(Ie(),Le())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(h)try{var Ge={};Object.defineProperty(Ge,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Ge,Ge),window.removeEventListener("test",Ge,Ge)}catch(ge){Ve=!1}function Ze(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var He=!1,je=null,We=!1,qe=null,Ke={onError:function(e){He=!0,je=e}};function Xe(e,t,n,r,i,s,o,a,l){He=!1,je=null,Ze.apply(Ke,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ye(e)!==e)throw Error(o(188))}function Qe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return $e(i),e;if(s===r)return $e(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,st=!1,ot=[],at=null,lt=null,ct=null,ut=new Map,ht=new Map,dt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ft(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function mt(e,t){switch(e){case"focusin":case"focusout":at=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":ut.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function gt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e=ft(t,n,r,i,s),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function vt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){s.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function _t(){for(st=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==at&&yt(at)&&(at=null),null!==lt&&yt(lt)&&(lt=null),null!==ct&&yt(ct)&&(ct=null),ut.forEach(bt),ht.forEach(bt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,st||(st=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,_t)))}function wt(e){function t(t){return xt(t,e)}if(0<ot.length){xt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==at&&xt(at,e),null!==lt&&xt(lt,e),null!==ct&&xt(ct,e),ut.forEach(t),ht.forEach(t),n=0;n<dt.length;n++)(r=dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<dt.length&&null===(n=dt[0]).blockedOn;)vt(n),null===n.blockedOn&&dt.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tt={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Et={},Mt={};function At(e){if(Et[e])return Et[e];if(!Tt[e])return e;var t,n=Tt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Mt)return Et[e]=n[t];return e}h&&(Mt=document.createElement("div").style,"AnimationEvent"in window||(delete Tt.animationend.animation,delete Tt.animationiteration.animation,delete Tt.animationstart.animation),"TransitionEvent"in window||delete Tt.transitionend.transition);var Ct=At("animationend"),kt=At("animationiteration"),Pt=At("animationstart"),Rt=At("transitionend"),Lt=new Map,Ot=new Map,Nt=["abort","abort",Ct,"animationEnd",kt,"animationIteration",Pt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function It(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Lt.set(r,i),c(i,[r])}}(0,s.unstable_now)();var Dt=8;function Ft(e){if(0!=(1&e))return Dt=15,1;if(0!=(2&e))return Dt=14,2;if(0!=(4&e))return Dt=13,4;var t=24&e;return 0!==t?(Dt=12,t):0!=(32&e)?(Dt=11,32):0!==(t=192&e)?(Dt=10,t):0!=(256&e)?(Dt=9,256):0!==(t=3584&e)?(Dt=8,t):0!=(4096&e)?(Dt=7,4096):0!==(t=4186112&e)?(Dt=6,t):0!==(t=62914560&e)?(Dt=5,t):67108864&e?(Dt=4,67108864):0!=(134217728&e)?(Dt=3,134217728):0!==(t=805306368&e)?(Dt=2,t):0!=(1073741824&e)?(Dt=1,1073741824):(Dt=8,e)}function zt(e,t){var n=e.pendingLanes;if(0===n)return Dt=0;var r=0,i=0,s=e.expiredLanes,o=e.suspendedLanes,a=e.pingedLanes;if(0!==s)r=s,i=Dt=15;else if(0!==(s=134217727&n)){var l=s&~o;0!==l?(r=Ft(l),i=Dt):0!==(a&=s)&&(r=Ft(a),i=Dt)}else 0!==(s=n&~o)?(r=Ft(s),i=Dt):0!==a&&(r=Ft(a),i=Dt);if(0===r)return 0;if(r=n&((0>(r=31-Ht(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(Ft(t),i<=Dt)return t;Dt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Ht(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Bt(10,t):e;case 10:return 0===(e=Vt(192&~t))?Bt(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function Gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Ht(t)]=n}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(jt(e)/Wt|0)|0},jt=Math.log,Wt=Math.LN2;var qt=s.unstable_UserBlockingPriority,Kt=s.unstable_runWithPriority,Xt=!0;function Yt(e,t,n,r){Fe||Ie();var i=$t,s=Fe;Fe=!0;try{Ne(i,e,t,n,r)}finally{(Fe=s)||Ue()}}function Jt(e,t,n,r){Kt(qt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Xt)if((i=0==(4&t))&&0<ot.length&&-1<pt.indexOf(e))e=ft(null,e,t,n,r),ot.push(e);else{var s=Qt(e,t,n,r);if(null===s)i&&mt(e,r);else{if(i){if(-1<pt.indexOf(e))return e=ft(s,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return at=gt(at,e,t,n,r,i),!0;case"dragenter":return lt=gt(lt,e,t,n,r,i),!0;case"mouseover":return ct=gt(ct,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ut.set(s,gt(ut.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ht.set(s,gt(ht.get(s)||null,e,t,n,r,i)),!0}return!1}(s,e,t,n,r))return;mt(e,r)}Ir(e,t,r,null,n)}}}function Qt(e,t,n,r){var i=Me(r);if(null!==(i=ni(i))){var s=Ye(i);if(null===s)i=null;else{var o=s.tag;if(13===o){if(null!==(i=Je(s)))return i;i=null}else if(3===o){if(s.stateNode.hydrate)return 3===s.tag?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Ir(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function sn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function an(){return!1}function ln(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,un,hn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=ln(dn),fn=i({},dn,{view:0,detail:0}),mn=ln(fn),gn=i({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hn&&(hn&&"mousemove"===e.type?(cn=e.screenX-hn.screenX,un=e.screenY-hn.screenY):un=cn=0,hn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=ln(gn),yn=ln(i({},gn,{dataTransfer:0})),bn=ln(i({},fn,{relatedTarget:0})),_n=ln(i({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=i({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=ln(xn),Sn=ln(i({},dn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mn[e])&&!!t[e]}function Cn(){return An}var kn=i({},fn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=sn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?sn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?sn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=ln(kn),Rn=ln(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=ln(i({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=ln(i({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=ln(Nn),Dn=[9,13,27,32],Fn=h&&"CompositionEvent"in window,zn=null;h&&"documentMode"in document&&(zn=document.documentMode);var Un=h&&"TextEvent"in window&&!zn,Bn=h&&(!Fn||zn&&8<zn&&11>=zn),Vn=String.fromCharCode(32),Gn=!1;function Zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Kn(e,t,n,r){Re(r),0<(t=Fr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function Jn(e){kr(e,0)}function $n(e){if(J(ii(e)))return e}function Qn(e,t){if("change"===e)return t}var er=!1;if(h){var tr;if(h){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"==typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Xn&&(Xn.detachEvent("onpropertychange",sr),Yn=Xn=null)}function sr(e){if("value"===e.propertyName&&$n(Yn)){var t=[];if(Kn(t,Yn,e,Me(e)),e=Jn,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,(Xn=t).attachEvent("onpropertychange",sr)):"focusout"===e&&ir()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Yn)}function lr(e,t){if("click"===e)return $n(t)}function cr(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},hr=Object.prototype.hasOwnProperty;function dr(e,t){if(ur(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!hr.call(t,n[r])||!ur(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=h&&"documentMode"in document&&11>=document.documentMode,br=null,_r=null,xr=null,wr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==br||br!==$(r)||("selectionStart"in(r=br)&&vr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&dr(xr,r)||(xr=r,0<(r=Fr(_r,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}It("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),It("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),It(Nt,2);for(var Tr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Tr.length;Er++)Ot.set(Tr[Er],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ar=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Xe.apply(this,arguments),He){if(!He)throw Error(o(198));var u=je;He=!1,je=null,We||(We=!0,qe=u)}}(r,t,void 0,e),e.currentTarget=null}function kr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Cr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Cr(i,a,c),s=l}}}if(We)throw e=qe,We=!1,qe=null,e}function Pr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Nr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Lr(e){e[Rr]||(e[Rr]=!0,a.forEach((function(t){Ar.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=n;if("selectionchange"===e&&9!==n.nodeType&&(s=n.ownerDocument),null!==r&&!t&&Ar.has(e)){if("scroll"!==e)return;i|=2,s=r}var o=oi(s),a=e+"__"+(t?"capture":"bubble");o.has(a)||(t&&(i|=4),Nr(s,e,i,t),o.add(a))}function Nr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Jt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ir(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=ni(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}!function(e,t,n){if(ze)return e(t,n);ze=!0;try{De(e,t,n)}finally{ze=!1,Ue()}}((function(){var r=s,i=Me(n),o=[];e:{var a=Lt.get(e);if(void 0!==a){var l=pn,c=e;switch(e){case"keypress":if(0===sn(n))break e;case"keydown":case"keyup":l=Pn;break;case"focusin":c="focus",l=bn;break;case"focusout":c="blur",l=bn;break;case"beforeblur":case"afterblur":l=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ln;break;case Ct:case kt:case Pt:l=_n;break;case Rt:l=On;break;case"scroll":l=mn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Rn}var u=0!=(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Be(f,d))&&u.push(Dr(f,m,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(h=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=vn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Rn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:ii(l),p=null==c?a:ii(c),(a=new u(m,f+"leave",l,n,i)).target=h,a.relatedTarget=p,m=null,ni(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=zr(p))f++;for(p=0,m=d;m;m=zr(m))p++;for(;0<f-p;)u=zr(u),f--;for(;0<p-f;)d=zr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=zr(u),d=zr(d)}u=null}else u=null;null!==l&&Ur(o,a,l,u,!1),null!==c&&null!==h&&Ur(o,h,c,u,!0)}if("select"===(l=(a=r?ii(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Qn;else if(qn(a))if(er)g=cr;else{g=ar;var v=or}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=lr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ie(a,"number",a.value)),v=r?ii(r):window,e){case"focusin":(qn(v)||"true"===v.contentEditable)&&(br=v,_r=r,xr=null);break;case"focusout":xr=_r=br=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Sr(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Sr(o,n,i)}var y;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jn?Zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==b?"onCompositionEnd"===b&&jn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,jn=!0)),0<(v=Fr(r,b)).length&&(b=new Sn(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Un?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Gn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Gn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Fn&&Zn(e,t)?(e=rn(),nn=tn=en=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}kr(o,t)}))}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Be(e,n))&&r.unshift(Dr(e,s,i)),null!=(s=Be(e,t))&&r.push(Dr(e,s,i))),e=e.return}return r}function zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Be(n,s))&&o.unshift(Dr(n,l,a)):i||null!=(l=Be(n,s))&&o.push(Dr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Br(){}var Vr=null,Gr=null;function Zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var jr="function"==typeof setTimeout?setTimeout:void 0,Wr="function"==typeof clearTimeout?clearTimeout:void 0;function qr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Kr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Xr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Jr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Jr,Qr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Xr(e);null!==e;){if(n=e[$r])return n;e=Xr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[$r]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function si(e){return e[Qr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ai=[],li=-1;function ci(e){return{current:e}}function ui(e){0>li||(e.current=ai[li],ai[li]=null,li--)}function hi(e,t){li++,ai[li]=e.current,e.current=t}var di={},pi=ci(di),fi=ci(!1),mi=di;function gi(e,t){var n=e.type.contextTypes;if(!n)return di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vi(e){return null!=(e=e.childContextTypes)}function yi(){ui(fi),ui(pi)}function bi(e,t,n){if(pi.current!==di)throw Error(o(168));hi(pi,t),hi(fi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in e))throw Error(o(108,q(t)||"Unknown",s));return i({},n,r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||di,mi=pi.current,hi(pi,e),hi(fi,fi.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,ui(fi),ui(pi),hi(pi,e)):ui(fi),hi(fi,n)}var Si=null,Ti=null,Ei=s.unstable_runWithPriority,Mi=s.unstable_scheduleCallback,Ai=s.unstable_cancelCallback,Ci=s.unstable_shouldYield,ki=s.unstable_requestPaint,Pi=s.unstable_now,Ri=s.unstable_getCurrentPriorityLevel,Li=s.unstable_ImmediatePriority,Oi=s.unstable_UserBlockingPriority,Ni=s.unstable_NormalPriority,Ii=s.unstable_LowPriority,Di=s.unstable_IdlePriority,Fi={},zi=void 0!==ki?ki:function(){},Ui=null,Bi=null,Vi=!1,Gi=Pi(),Zi=1e4>Gi?Pi:function(){return Pi()-Gi};function Hi(){switch(Ri()){case Li:return 99;case Oi:return 98;case Ni:return 97;case Ii:return 96;case Di:return 95;default:throw Error(o(332))}}function ji(e){switch(e){case 99:return Li;case 98:return Oi;case 97:return Ni;case 96:return Ii;case 95:return Di;default:throw Error(o(332))}}function Wi(e,t){return e=ji(e),Ei(e,t)}function qi(e,t,n){return e=ji(e),Mi(e,t,n)}function Ki(){if(null!==Bi){var e=Bi;Bi=null,Ai(e)}Xi()}function Xi(){if(!Vi&&null!==Ui){Vi=!0;var e=0;try{var t=Ui;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(t){throw null!==Ui&&(Ui=Ui.slice(e+1)),Mi(Li,Ki),t}finally{Vi=!1}}}var Yi=x.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=ci(null),Qi=null,es=null,ts=null;function ns(){ts=es=Qi=null}function rs(e){var t=$i.current;ui($i),e.type._context._currentValue=t}function is(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ss(e,t){Qi=e,ts=es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function os(e,t){if(ts!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(ts=e,t=1073741823),t={context:e,observedBits:t,next:null},null===es){if(null===Qi)throw Error(o(308));es=t,Qi.dependencies={lanes:0,firstContext:t,responders:null}}else es=es.next=t;return e._currentValue}var as=!1;function ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function cs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hs(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ds(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ps(e,t,n,r){var s=e.updateQueue;as=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(null!==l){s.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?o=u:a.next=u,a=c;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=c)}}if(null!==o){for(d=s.baseState,a=0,h=u=c=null;;){l=o.lane;var p=o.eventTime;if((r&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(l=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,l);break e}d=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(l="function"==typeof(f=m.payload)?f.call(p,d,l):f))break e;d=i({},d,l);break e;case 2:as=!0}}null!==o.callback&&(e.flags|=32,null===(l=s.effects)?s.effects=[o]:l.push(o))}else p={eventTime:p,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,a|=l;if(null===(o=o.next)){if(null===(l=s.shared.pending))break;o=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}null===h&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,Va|=a,e.lanes=a,e.memoizedState=d}}function fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(o(191,i));i.call(r)}}}var ms=(new r.Component).refs;function gs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var vs={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dl(),i=pl(e),s=us(r,i);s.payload=t,null!=n&&(s.callback=n),hs(e,s),fl(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dl(),i=pl(e),s=us(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),hs(e,s),fl(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dl(),r=pl(e),i=us(n,r);i.tag=2,null!=t&&(i.callback=t),hs(e,i),fl(e,r,n)}};function ys(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!dr(n,r)||!dr(i,s))}function bs(e,t,n){var r=!1,i=di,s=t.contextType;return"object"==typeof s&&null!==s?s=os(s):(i=vi(t)?mi:pi.current,s=(r=null!=(r=t.contextTypes))?gi(e,i):di),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function _s(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vs.enqueueReplaceState(t,t.state,null)}function xs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ms,ls(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=os(s):(s=vi(t)?mi:pi.current,i.context=gi(e,s)),ps(e,n,i,r),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(gs(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&vs.enqueueReplaceState(i,i.state,null),ps(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}var ws=Array.isArray;function Ss(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ms&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ts(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Es(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wl(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Yl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ss(e,t,n),r.return=e,r):((r=ql(n.type,n.key,n.props,null,e.mode,r)).ref=Ss(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Kl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Yl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=ql(t.type,t.key,t.props,null,e.mode,n)).ref=Ss(e,null,t),n.return=e,n;case S:return(t=Jl(t,e.mode,n)).return=e,t}if(ws(t)||G(t))return(t=Kl(t,e.mode,n,null)).return=e,t;Ts(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===T?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null}if(ws(n)||G(n))return null!==i?null:h(e,t,n,r,null);Ts(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===T?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ws(r)||G(r))return h(t,e=e.get(n)||null,r,i,null);Ts(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return c}for(h=r(i,h);m<a.length;m++)null!==(g=f(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),c}function g(i,a,l,c){var u=G(l);if("function"!=typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===h?u=b:h.sibling=b,h=b,m=v}if(y.done)return n(i,m),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),u}return function(e,r,s,l){var c="object"==typeof s&&null!==s&&s.type===T&&null===s.key;c&&(s=s.props.children);var u="object"==typeof s&&null!==s;if(u)switch(s.$$typeof){case w:e:{for(u=s.key,c=r;null!==c;){if(c.key===u){if(7===c.tag){if(s.type===T){n(e,c.sibling),(r=i(c,s.props.children)).return=e,e=r;break e}}else if(c.elementType===s.type){n(e,c.sibling),(r=i(c,s.props)).ref=Ss(e,c,s),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}s.type===T?((r=Kl(s.props.children,e.mode,l,s.key)).return=e,e=r):((l=ql(s.type,s.key,s.props,null,e.mode,l)).ref=Ss(e,r,s),l.return=e,e=l)}return a(e);case S:e:{for(c=s.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===s.containerInfo&&r.stateNode.implementation===s.implementation){n(e,r.sibling),(r=i(r,s.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jl(s,e.mode,l)).return=e,e=r}return a(e)}if("string"==typeof s||"number"==typeof s)return s=""+s,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,s)).return=e,e=r):(n(e,r),(r=Yl(s,e.mode,l)).return=e,e=r),a(e);if(ws(s))return m(e,r,s,l);if(G(s))return g(e,r,s,l);if(u&&Ts(e,s),void 0===s&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,q(e.type)||"Component"))}return n(e,r)}}var Ms=Es(!0),As=Es(!1),Cs={},ks=ci(Cs),Ps=ci(Cs),Rs=ci(Cs);function Ls(e){if(e===Cs)throw Error(o(174));return e}function Os(e,t){switch(hi(Rs,t),hi(Ps,e),hi(ks,Cs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ui(ks),hi(ks,t)}function Ns(){ui(ks),ui(Ps),ui(Rs)}function Is(e){Ls(Rs.current);var t=Ls(ks.current),n=fe(t,e.type);t!==n&&(hi(Ps,e),hi(ks,n))}function Ds(e){Ps.current===e&&(ui(ks),ui(Ps))}var Fs=ci(0);function zs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Us=null,Bs=null,Vs=!1;function Gs(e,t){var n=Hl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Zs(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Hs(e){if(Vs){var t=Bs;if(t){var n=t;if(!Zs(e,t)){if(!(t=Kr(n.nextSibling))||!Zs(e,t))return e.flags=-1025&e.flags|2,Vs=!1,void(Us=e);Gs(Us,n)}Us=e,Bs=Kr(t.firstChild)}else e.flags=-1025&e.flags|2,Vs=!1,Us=e}}function js(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Us=e}function Ws(e){if(e!==Us)return!1;if(!Vs)return js(e),Vs=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Hr(t,e.memoizedProps))for(t=Bs;t;)Gs(e,t),t=Kr(t.nextSibling);if(js(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Bs=Kr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Bs=null}}else Bs=Us?Kr(e.stateNode.nextSibling):null;return!0}function qs(){Bs=Us=null,Vs=!1}var Ks=[];function Xs(){for(var e=0;e<Ks.length;e++)Ks[e]._workInProgressVersionPrimary=null;Ks.length=0}var Ys=x.ReactCurrentDispatcher,Js=x.ReactCurrentBatchConfig,$s=0,Qs=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function so(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,s){if($s=s,Qs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ys.current=null===e||null===e.memoizedState?Oo:No,e=n(r,i),ro){s=0;do{if(ro=!1,!(25>s))throw Error(o(301));s+=1,to=eo=null,t.updateQueue=null,Ys.current=Io,e=n(r,i)}while(ro)}if(Ys.current=Lo,t=null!==eo&&null!==eo.next,$s=0,to=eo=Qs=null,no=!1,t)throw Error(o(300));return e}function ao(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Qs.memoizedState=to=e:to=to.next=e,to}function lo(){if(null===eo){var e=Qs.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Qs.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Qs.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"==typeof t?t(e):t}function uo(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=a=s=null,c=i;do{var u=c.lane;if(($s&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=h,s=r):l=l.next=h,Qs.lanes|=u,Va|=u}c=c.next}while(null!==c&&c!==i);null===l?s=r:l.next=a,ur(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ho(e){var t=lo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ur(s,t.memoizedState)||(Fo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function po(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($s&e)===e)&&(t._workInProgressVersionPrimary=r,Ks.push(t))),e)return n(t._source);throw Ks.push(t),Error(o(350))}function fo(e,t,n,r){var i=Oa;if(null===i)throw Error(o(349));var s=t._getVersion,a=s(t._source),l=Ys.current,c=l.useState((function(){return po(i,t,n)})),u=c[1],h=c[0];c=to;var d=e.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var g=Qs;return e.memoizedState={refs:p,source:t,subscribe:r},l.useEffect((function(){p.getSnapshot=n,p.setSnapshot=u;var e=s(t._source);if(!ur(a,e)){e=n(t._source),ur(h,e)||(u(e),e=pl(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var l=31-Ht(o),c=1<<l;r[l]|=e,o&=~c}}}),[n,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=pl(g);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),ur(f,n)&&ur(m,t)&&ur(d,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:h}).dispatch=u=Ro.bind(null,Qs,e),c.queue=e,c.baseQueue=null,h=po(i,t,n),c.memoizedState=c.baseState=h),h}function mo(e,t,n){return fo(lo(),e,t,n)}function go(e){var t=ao();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Qs,e),[t.memoizedState,e]}function vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qs.updateQueue)?(t={lastEffect:null},Qs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},ao().memoizedState=e}function bo(){return lo().memoizedState}function _o(e,t,n,r){var i=ao();Qs.flags|=e,i.memoizedState=vo(1|t,n,void 0,void 0===r?null:r)}function xo(e,t,n,r){var i=lo();r=void 0===r?null:r;var s=void 0;if(null!==eo){var o=eo.memoizedState;if(s=o.destroy,null!==r&&so(r,o.deps))return void vo(t,n,s,r)}Qs.flags|=e,i.memoizedState=vo(1|t,n,s,r)}function wo(e,t){return _o(516,4,e,t)}function So(e,t){return xo(516,4,e,t)}function To(e,t){return xo(4,2,e,t)}function Eo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Mo(e,t,n){return n=null!=n?n.concat([e]):null,xo(4,2,Eo.bind(null,t,e),n)}function Ao(){}function Co(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&so(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ko(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&so(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Po(e,t){var n=Hi();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Js.transition;Js.transition=1;try{e(!1),t()}finally{Js.transition=n}}))}function Ro(e,t,n){var r=dl(),i=pl(e),s={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?s.next=s:(s.next=o.next,o.next=s),t.pending=s,o=e.alternate,e===Qs||null!==o&&o===Qs)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=o(a,n);if(s.eagerReducer=o,s.eagerState=l,ur(l,a))return}catch(e){}fl(e,i,r)}}var Lo={readContext:os,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:os,useCallback:function(e,t){return ao().memoizedState=[e,void 0===t?null:t],e},useContext:os,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,_o(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=ao();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ao();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Qs,e),[r.memoizedState,e]},useRef:yo,useState:go,useDebugValue:Ao,useDeferredValue:function(e){var t=go(e),n=t[0],r=t[1];return wo((function(){var t=Js.transition;Js.transition=1;try{r(e)}finally{Js.transition=t}}),[e]),n},useTransition:function(){var e=go(!1),t=e[0];return yo(e=Po.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=ao();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},fo(r,e,t,n)},useOpaqueIdentifier:function(){if(Vs){var e=!1,t=function(e){return{$$typeof:I,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=go(t)[1];return 0==(2&Qs.mode)&&(Qs.flags|=516,vo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return go(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},No={readContext:os,useCallback:Co,useContext:os,useEffect:So,useImperativeHandle:Mo,useLayoutEffect:To,useMemo:ko,useReducer:uo,useRef:bo,useState:function(){return uo(co)},useDebugValue:Ao,useDeferredValue:function(e){var t=uo(co),n=t[0],r=t[1];return So((function(){var t=Js.transition;Js.transition=1;try{r(e)}finally{Js.transition=t}}),[e]),n},useTransition:function(){var e=uo(co)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return uo(co)[0]},unstable_isNewReconciler:!1},Io={readContext:os,useCallback:Co,useContext:os,useEffect:So,useImperativeHandle:Mo,useLayoutEffect:To,useMemo:ko,useReducer:ho,useRef:bo,useState:function(){return ho(co)},useDebugValue:Ao,useDeferredValue:function(e){var t=ho(co),n=t[0],r=t[1];return So((function(){var t=Js.transition;Js.transition=1;try{r(e)}finally{Js.transition=t}}),[e]),n},useTransition:function(){var e=ho(co)[0];return[bo().current,e]},useMutableSource:mo,useOpaqueIdentifier:function(){return ho(co)[0]},unstable_isNewReconciler:!1},Do=x.ReactCurrentOwner,Fo=!1;function zo(e,t,n,r){t.child=null===e?As(t,null,n,r):Ms(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var s=t.ref;return ss(t,i),r=oo(e,t,n,r,s,i),null===e||Fo?(t.flags|=1,zo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function Bo(e,t,n,r,i,s){if(null===e){var o=n.type;return"function"!=typeof o||jl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ql(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,s))}return o=e.child,0==(i&s)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:dr)(i,r)&&e.ref===t.ref)?sa(e,t,s):(t.flags|=1,(e=Wl(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,s){if(null!==e&&dr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0==(s&i))return t.lanes=e.lanes,sa(e,t,s);0!=(16384&e.flags)&&(Fo=!0)}return Ho(e,t,n,r,s)}function Go(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},wl(t,n);else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wl(t,e),null;t.memoizedState={baseLanes:0},wl(t,null!==s?s.baseLanes:n)}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,wl(t,r);return zo(e,t,i,n),t.child}function Zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ho(e,t,n,r,i){var s=vi(n)?mi:pi.current;return s=gi(t,s),ss(t,i),n=oo(e,t,n,r,s,i),null===e||Fo?(t.flags|=1,zo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,sa(e,t,i))}function jo(e,t,n,r,i){if(vi(n)){var s=!0;xi(t)}else s=!1;if(ss(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bs(t,n,r),xs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"==typeof c&&null!==c?c=os(c):c=gi(t,c=vi(n)?mi:pi.current);var u=n.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;h||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==c)&&_s(t,o,r,c),as=!1;var d=t.memoizedState;o.state=d,ps(t,r,o,i),l=t.memoizedState,a!==r||d!==l||fi.current||as?("function"==typeof u&&(gs(t,n,u,r),l=t.memoizedState),(a=as||ys(t,n,a,r,d,l,c))?(h||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,cs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Ji(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"==typeof(l=n.contextType)&&null!==l?l=os(l):l=gi(t,l=vi(n)?mi:pi.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==h||d!==l)&&_s(t,o,r,l),as=!1,d=t.memoizedState,o.state=d,ps(t,r,o,i);var f=t.memoizedState;a!==h||d!==f||fi.current||as?("function"==typeof p&&(gs(t,n,p,r),f=t.memoizedState),(c=as||ys(t,n,c,r,d,f,l))?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,s,i)}function Wo(e,t,n,r,i,s){Zo(e,t);var o=0!=(64&t.flags);if(!r&&!o)return i&&wi(t,n,!1),sa(e,t,s);r=t.stateNode,Do.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ms(t,e.child,null,s),t.child=Ms(t,null,a,s)):zo(e,t,a,s),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function qo(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Os(e,t.containerInfo)}var Ko,Xo,Yo,Jo={dehydrated:null,retryLane:0};function $o(e,t,n){var r,i=t.pendingProps,s=Fs.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(s|=1),hi(Fs,1&s),null===e?(void 0!==i.fallback&&Hs(t),e=i.children,s=i.fallback,o?(e=Qo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Qo(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=Xl({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ta(e,t,i.children,i.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?{baseLanes:n}:{baseLanes:s.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=ea(e,t,i.children,n),t.memoizedState=null,n))}function Qo(e,t,n,r){var i=e.mode,s=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==s?(s.childLanes=0,s.pendingProps=t):s=Xl(t,i,0,null),n=Kl(n,i,r,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function ea(e,t,n,r){var i=e.child;return e=i.sibling,n=Wl(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ta(e,t,n,r,i){var s=t.mode,o=e.child;e=o.sibling;var a={mode:"hidden",children:n};return 0==(2&s)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=a,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Wl(o,a),null!==e?r=Wl(e,r):(r=Kl(r,s,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function na(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),is(e.return,t)}function ra(e,t,n,r,i,s){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=s)}function ia(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(zo(e,t,r.children,n),0!=(2&(r=Fs.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&na(e,n);else if(19===e.tag)na(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(hi(Fs,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===zs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ra(t,!1,i,n,s,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===zs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ra(t,!0,n,null,s,t.lastEffect);break;case"together":ra(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function sa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Va|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Wl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function oa(e,t){if(!Vs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aa(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vi(t.type)&&yi(),null;case 3:return Ns(),ui(fi),ui(pi),Xs(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ws(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ds(t);var s=Ls(Rs.current);if(n=t.type,null!==e&&null!=t.stateNode)Xo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ls(ks.current),Ws(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[$r]=t,r[Qr]=a,n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(e=0;e<Mr.length;e++)Pr(Mr[e],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":ee(r,a),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Pr("invalid",r);break;case"textarea":le(r,a),Pr("invalid",r)}for(var c in Te(n,a),e=null,a)a.hasOwnProperty(c)&&(s=a[c],"children"===c?"string"==typeof s?r.textContent!==s&&(e=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(e=["children",""+s]):l.hasOwnProperty(c)&&null!=s&&"onScroll"===c&&Pr("scroll",r));switch(n){case"input":Y(r),re(r,a,!0);break;case"textarea":Y(r),ue(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=Br)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===s.nodeType?s:s.ownerDocument,e===he&&(e=pe(n)),e===he?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[$r]=t,e[Qr]=r,Ko(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Pr("cancel",e),Pr("close",e),s=r;break;case"iframe":case"object":case"embed":Pr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Mr.length;s++)Pr(Mr[s],e);s=r;break;case"source":Pr("error",e),s=r;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),s=r;break;case"details":Pr("toggle",e),s=r;break;case"input":ee(e,r),s=Q(e,r),Pr("invalid",e);break;case"option":s=se(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=i({},r,{value:void 0}),Pr("invalid",e);break;case"textarea":le(e,r),s=ae(e,r),Pr("invalid",e);break;default:s=r}Te(n,s);var u=s;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?we(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&ve(e,h):"children"===a?"string"==typeof h?("textarea"!==n||""!==h)&&ye(e,h):"number"==typeof h&&ye(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Pr("scroll",e):null!=h&&_(e,a,h,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),ue(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?oe(e,!!r.multiple,a,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=Br)}Zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));n=Ls(Rs.current),Ls(ks.current),Ws(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return ui(Fs),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ws(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Fs.current)?0===za&&(za=3):(0!==za&&3!==za||(za=4),null===Oa||0==(134217727&Va)&&0==(134217727&Ga)||yl(Oa,Ia))),(r||n)&&(t.flags|=4),null);case 4:return Ns(),null===e&&Lr(t.stateNode.containerInfo),null;case 10:return rs(t),null;case 19:if(ui(Fs),null===(r=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(c=r.rendering))if(a)oa(r,!1);else{if(0!==za||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=zs(e))){for(t.flags|=64,oa(r,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return hi(Fs,1&Fs.current|2),t.child}e=e.sibling}null!==r.tail&&Zi()>Wa&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=zs(c))){if(t.flags|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),oa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Vs)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Zi()-r.renderingStartTime>Wa&&1073741824!==n&&(t.flags|=64,a=!0,oa(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Zi(),n.sibling=null,t=Fs.current,hi(Fs,a?1&t|2:1&t),n):null;case 23:case 24:return Sl(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function la(e){switch(e.tag){case 1:vi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ns(),ui(fi),ui(pi),Xs(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ds(e),null;case 13:return ui(Fs),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ui(Fs),null;case 4:return Ns(),null;case 10:return rs(e),null;case 23:case 24:return Sl(),null;default:return null}}function ca(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function ua(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Ko=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Xo=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ls(ks.current);var o,a=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),a=[];break;case"option":s=se(e,s),r=se(e,r),a=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":s=ae(e,s),r=ae(e,r),a=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(e.onclick=Br)}for(h in Te(n,r),n=null,s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&null!=s[h])if("style"===h){var c=s[h];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in r){var u=r[h];if(c=null!=s?s[h]:void 0,r.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(h,n)),n=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Pr("scroll",e),a||c===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===I?u.toString():(a=a||[]).push(h,u))}n&&(a=a||[]).push("style",n);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ha="function"==typeof WeakMap?WeakMap:Map;function da(e,t,n){(n=us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ya||(Ya=!0,Ja=r),ua(0,t)},n}function pa(e,t,n){(n=us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return ua(0,t),r(i)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===$a?$a=new Set([this]):$a.add(this),ua(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var fa="function"==typeof WeakSet?WeakSet:Set;function ma(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Bl(e,t)}else t.current=null}function ga(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&qr(t.stateNode.containerInfo))}throw Error(o(163))}function va(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Fl(n,e),Dl(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fs(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}fs(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function ya(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=xe("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ba(e,t){if(Ti&&"function"==typeof Ti.onCommitFiberUnmount)try{Ti.onCommitFiberUnmount(Si,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Fl(t,n);else{r=t;try{i()}catch(e){Bl(r,e)}}n=n.next}while(n!==e)}break;case 1:if(ma(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Bl(t,e)}break;case 5:ma(t);break;case 4:Ea(e,t)}}function _a(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function xa(e){return 5===e.tag||3===e.tag||4===e.tag}function wa(e){e:{for(var t=e.return;null!==t;){if(xa(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xa(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Sa(e,n,t):Ta(e,n,t)}function Sa(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Br));else if(4!==r&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function Ta(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ta(e,t,n),e=e.sibling;null!==e;)Ta(e,t,n),e=e.sibling}function Ea(e,t){for(var n,r,i=t,s=!1;;){if(!s){s=i.return;e:for(;;){if(null===s)throw Error(o(160));switch(n=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===i.tag||6===i.tag){e:for(var a=e,l=i,c=l;;)if(ba(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(a=n,l=i.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ba(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(s=!1)}i.sibling.return=i.return,i=i.sibling}}function Ma(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,null!==s){for(n[Qr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<s.length;i+=2){var a=s[i],l=s[i+1];"style"===a?we(n,l):"dangerouslySetInnerHTML"===a?ve(n,l):"children"===a?ye(n,l):_(n,a,l,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(s=r.value)?oe(n,!!r.multiple,s,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(ja=Zi(),ya(t.child,!0)),void Aa(t);case 19:return void Aa(t);case 23:case 24:return void ya(t,null!==t.memoizedState)}throw Error(o(163))}function Aa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new fa),t.forEach((function(t){var r=Gl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ca(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var ka=Math.ceil,Pa=x.ReactCurrentDispatcher,Ra=x.ReactCurrentOwner,La=0,Oa=null,Na=null,Ia=0,Da=0,Fa=ci(0),za=0,Ua=null,Ba=0,Va=0,Ga=0,Za=0,Ha=null,ja=0,Wa=1/0;function qa(){Wa=Zi()+500}var Ka,Xa=null,Ya=!1,Ja=null,$a=null,Qa=!1,el=null,tl=90,nl=[],rl=[],il=null,sl=0,ol=null,al=-1,ll=0,cl=0,ul=null,hl=!1;function dl(){return 0!=(48&La)?Zi():-1!==al?al:al=Zi()}function pl(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Hi()?1:2;if(0===ll&&(ll=Ba),0!==Yi.transition){0!==cl&&(cl=null!==Ha?Ha.pendingLanes:0),e=ll;var t=4186112&~cl;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Hi(),0!=(4&La)&&98===e?e=Bt(12,ll):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ll),e}function fl(e,t,n){if(50<sl)throw sl=0,ol=null,Error(o(185));if(null===(e=ml(e,t)))return null;Zt(e,t,n),e===Oa&&(Ga|=t,4===za&&yl(e,Ia));var r=Hi();1===t?0!=(8&La)&&0==(48&La)?bl(e):(gl(e,n),0===La&&(qa(),Ki())):(0==(4&La)||98!==r&&99!==r||(null===il?il=new Set([e]):il.add(e)),gl(e,n)),Ha=e}function ml(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gl(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Ht(a),c=1<<l,u=s[l];if(-1===u){if(0==(c&r)||0!=(c&i)){u=t,Ft(c);var h=Dt;s[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);a&=~c}if(r=zt(e,e===Oa?Ia:0),t=Dt,0===r)null!==n&&(n!==Fi&&Ai(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ai(n)}15===t?(n=bl.bind(null,e),null===Ui?(Ui=[n],Bi=Mi(Li,Xi)):Ui.push(n),n=Fi):14===t?n=qi(99,bl.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=qi(n,vl.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function vl(e){if(al=-1,cl=ll=0,0!=(48&La))throw Error(o(327));var t=e.callbackNode;if(Il()&&e.callbackNode!==t)return null;var n=zt(e,e===Oa?Ia:0);if(0===n)return null;var r=n,i=La;La|=16;var s=Ml();for(Oa===e&&Ia===r||(qa(),Tl(e,r));;)try{kl();break}catch(t){El(e,t)}if(ns(),Pa.current=s,La=i,null!==Na?r=0:(Oa=null,Ia=0,r=za),0!=(Ba&Ga))Tl(e,0);else if(0!==r){if(2===r&&(La|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(n=Ut(e))&&(r=Al(e,n))),1===r)throw t=Ua,Tl(e,0),yl(e,n),gl(e,Zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ll(e);break;case 3:if(yl(e,n),(62914560&n)===n&&10<(r=ja+500-Zi())){if(0!==zt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){dl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jr(Ll.bind(null,e),r);break}Ll(e);break;case 4:if(yl(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Ht(n);s=1<<a,(a=r[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ka(n/1960))-n)){e.timeoutHandle=jr(Ll.bind(null,e),n);break}Ll(e);break;default:throw Error(o(329))}}return gl(e,Zi()),e.callbackNode===t?vl.bind(null,e):null}function yl(e,t){for(t&=~Za,t&=~Ga,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function bl(e){if(0!=(48&La))throw Error(o(327));if(Il(),e===Oa&&0!=(e.expiredLanes&Ia)){var t=Ia,n=Al(e,t);0!=(Ba&Ga)&&(n=Al(e,t=zt(e,t)))}else n=Al(e,t=zt(e,0));if(0!==e.tag&&2===n&&(La|=64,e.hydrate&&(e.hydrate=!1,qr(e.containerInfo)),0!==(t=Ut(e))&&(n=Al(e,t))),1===n)throw n=Ua,Tl(e,0),yl(e,t),gl(e,Zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ll(e),gl(e,Zi()),null}function _l(e,t){var n=La;La|=1;try{return e(t)}finally{0===(La=n)&&(qa(),Ki())}}function xl(e,t){var n=La;La&=-2,La|=8;try{return e(t)}finally{0===(La=n)&&(qa(),Ki())}}function wl(e,t){hi(Fa,Da),Da|=t,Ba|=t}function Sl(){Da=Fa.current,ui(Fa)}function Tl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Na)for(n=Na.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&yi();break;case 3:Ns(),ui(fi),ui(pi),Xs();break;case 5:Ds(r);break;case 4:Ns();break;case 13:case 19:ui(Fs);break;case 10:rs(r);break;case 23:case 24:Sl()}n=n.return}Oa=e,Na=Wl(e.current,null),Ia=Da=Ba=t,za=0,Ua=null,Za=Ga=Va=0}function El(e,t){for(;;){var n=Na;try{if(ns(),Ys.current=Lo,no){for(var r=Qs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if($s=0,to=eo=Qs=null,ro=!1,Ra.current=null,null===n||null===n.return){za=1,Ua=t,Na=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Ia,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&Fs.current),d=o;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var g=d.updateQueue;if(null===g){var v=new Set;v.add(c),d.updateQueue=v}else g.add(c);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=us(-1,1);y.tag=2,hs(a,y)}a.lanes|=1;break e}l=void 0,a=t;var b=s.pingCache;if(null===b?(b=s.pingCache=new ha,l=new Set,b.set(c,l)):void 0===(l=b.get(c))&&(l=new Set,b.set(c,l)),!l.has(a)){l.add(a);var _=Vl.bind(null,s,c,a);c.then(_,_)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((q(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==za&&(za=2),l=ca(l,a),d=o;do{switch(d.tag){case 3:s=l,d.flags|=4096,t&=-t,d.lanes|=t,ds(d,da(0,s,t));break e;case 1:s=l;var x=d.type,w=d.stateNode;if(0==(64&d.flags)&&("function"==typeof x.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===$a||!$a.has(w)))){d.flags|=4096,t&=-t,d.lanes|=t,ds(d,pa(d,s,t));break e}}d=d.return}while(null!==d)}Rl(n)}catch(e){t=e,Na===n&&null!==n&&(Na=n=n.return);continue}break}}function Ml(){var e=Pa.current;return Pa.current=Lo,null===e?Lo:e}function Al(e,t){var n=La;La|=16;var r=Ml();for(Oa===e&&Ia===t||Tl(e,t);;)try{Cl();break}catch(t){El(e,t)}if(ns(),La=n,Pa.current=r,null!==Na)throw Error(o(261));return Oa=null,Ia=0,za}function Cl(){for(;null!==Na;)Pl(Na)}function kl(){for(;null!==Na&&!Ci();)Pl(Na)}function Pl(e){var t=Ka(e.alternate,e,Da);e.memoizedProps=e.pendingProps,null===t?Rl(e):Na=t,Ra.current=null}function Rl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=aa(n,t,Da)))return void(Na=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Da)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=la(t)))return n.flags&=2047,void(Na=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Na=t);Na=t=e}while(null!==t);0===za&&(za=5)}function Ll(e){var t=Hi();return Wi(99,Ol.bind(null,e,t)),null}function Ol(e,t){do{Il()}while(null!==el);if(0!=(48&La))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,s=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<s;){var c=31-Ht(s),u=1<<c;i[c]=0,a[c]=-1,l[c]=-1,s&=~u}if(null!==il&&0==(24&r)&&il.has(e)&&il.delete(e),e===Oa&&(Na=Oa=null,Ia=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=La,La|=32,Ra.current=null,Vr=Xt,vr(a=gr())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,s=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(e){l=null;break e}var h=0,d=-1,p=-1,f=0,m=0,g=a,v=null;t:for(;;){for(var y;g!==l||0!==s&&3!==g.nodeType||(d=h+s),g!==c||0!==u&&3!==g.nodeType||(p=h+u),3===g.nodeType&&(h+=g.nodeValue.length),null!==(y=g.firstChild);)v=g,g=y;for(;;){if(g===a)break t;if(v===l&&++f===s&&(d=h),v===c&&++m===u&&(p=h),null!==(y=g.nextSibling))break;v=(g=v).parentNode}g=y}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Gr={focusedElem:a,selectionRange:l},Xt=!1,ul=null,hl=!1,Xa=r;do{try{Nl()}catch(e){if(null===Xa)throw Error(o(330));Bl(Xa,e),Xa=Xa.nextEffect}}while(null!==Xa);ul=null,Xa=r;do{try{for(a=e;null!==Xa;){var b=Xa.flags;if(16&b&&ye(Xa.stateNode,""),128&b){var _=Xa.alternate;if(null!==_){var x=_.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&b){case 2:wa(Xa),Xa.flags&=-3;break;case 6:wa(Xa),Xa.flags&=-3,Ma(Xa.alternate,Xa);break;case 1024:Xa.flags&=-1025;break;case 1028:Xa.flags&=-1025,Ma(Xa.alternate,Xa);break;case 4:Ma(Xa.alternate,Xa);break;case 8:Ea(a,l=Xa);var w=l.alternate;_a(l),null!==w&&_a(w)}Xa=Xa.nextEffect}}catch(e){if(null===Xa)throw Error(o(330));Bl(Xa,e),Xa=Xa.nextEffect}}while(null!==Xa);if(x=Gr,_=gr(),b=x.focusedElem,a=x.selectionRange,_!==b&&b&&b.ownerDocument&&mr(b.ownerDocument.documentElement,b)){null!==a&&vr(b)&&(_=a.start,void 0===(x=a.end)&&(x=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(x,b.value.length)):(x=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(x=x.getSelection(),l=b.textContent.length,w=Math.min(a.start,l),a=void 0===a.end?w:Math.min(a.end,l),!x.extend&&w>a&&(l=a,a=w,w=l),l=fr(b,w),s=fr(b,a),l&&s&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==s.node||x.focusOffset!==s.offset)&&((_=_.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),w>a?(x.addRange(_),x.extend(s.node,s.offset)):(_.setEnd(s.node,s.offset),x.addRange(_))))),_=[];for(x=b;x=x.parentNode;)1===x.nodeType&&_.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<_.length;b++)(x=_[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Xt=!!Vr,Gr=Vr=null,e.current=n,Xa=r;do{try{for(b=e;null!==Xa;){var S=Xa.flags;if(36&S&&va(b,Xa.alternate,Xa),128&S){_=void 0;var T=Xa.ref;if(null!==T){var E=Xa.stateNode;Xa.tag,_=E,"function"==typeof T?T(_):T.current=_}}Xa=Xa.nextEffect}}catch(e){if(null===Xa)throw Error(o(330));Bl(Xa,e),Xa=Xa.nextEffect}}while(null!==Xa);Xa=null,zi(),La=i}else e.current=n;if(Qa)Qa=!1,el=e,tl=t;else for(Xa=r;null!==Xa;)t=Xa.nextEffect,Xa.nextEffect=null,8&Xa.flags&&((S=Xa).sibling=null,S.stateNode=null),Xa=t;if(0===(r=e.pendingLanes)&&($a=null),1===r?e===ol?sl++:(sl=0,ol=e):sl=0,n=n.stateNode,Ti&&"function"==typeof Ti.onCommitFiberRoot)try{Ti.onCommitFiberRoot(Si,n,void 0,64==(64&n.current.flags))}catch(e){}if(gl(e,Zi()),Ya)throw Ya=!1,e=Ja,Ja=null,e;return 0!=(8&La)||Ki(),null}function Nl(){for(;null!==Xa;){var e=Xa.alternate;hl||null===ul||(0!=(8&Xa.flags)?et(Xa,ul)&&(hl=!0):13===Xa.tag&&Ca(e,Xa)&&et(Xa,ul)&&(hl=!0));var t=Xa.flags;0!=(256&t)&&ga(e,Xa),0==(512&t)||Qa||(Qa=!0,qi(97,(function(){return Il(),null}))),Xa=Xa.nextEffect}}function Il(){if(90!==tl){var e=97<tl?97:tl;return tl=90,Wi(e,zl)}return!1}function Dl(e,t){nl.push(t,e),Qa||(Qa=!0,qi(97,(function(){return Il(),null})))}function Fl(e,t){rl.push(t,e),Qa||(Qa=!0,qi(97,(function(){return Il(),null})))}function zl(){if(null===el)return!1;var e=el;if(el=null,0!=(48&La))throw Error(o(331));var t=La;La|=32;var n=rl;rl=[];for(var r=0;r<n.length;r+=2){var i=n[r],s=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===s)throw Error(o(330));Bl(s,e)}}for(n=nl,nl=[],r=0;r<n.length;r+=2){i=n[r],s=n[r+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===s)throw Error(o(330));Bl(s,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return La=t,Ki(),!0}function Ul(e,t,n){hs(e,t=da(0,t=ca(n,t),1)),t=dl(),null!==(e=ml(e,1))&&(Zt(e,1,t),gl(e,t))}function Bl(e,t){if(3===e.tag)Ul(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Ul(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===$a||!$a.has(r))){var i=pa(n,e=ca(t,e),1);if(hs(n,i),i=dl(),null!==(n=ml(n,1)))Zt(n,1,i),gl(n,i);else if("function"==typeof r.componentDidCatch&&(null===$a||!$a.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Vl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=dl(),e.pingedLanes|=e.suspendedLanes&n,Oa===e&&(Ia&n)===n&&(4===za||3===za&&(62914560&Ia)===Ia&&500>Zi()-ja?Tl(e,0):Za|=n),gl(e,t)}function Gl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Hi()?1:2:(0===ll&&(ll=Ba),0===(t=Vt(62914560&~ll))&&(t=4194304))),n=dl(),null!==(e=ml(e,t))&&(Zt(e,t,n),gl(e,n))}function Zl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Hl(e,t,n,r){return new Zl(e,t,n,r)}function jl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wl(e,t){var n=e.alternate;return null===n?((n=Hl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ql(e,t,n,r,i,s){var a=2;if(r=e,"function"==typeof e)jl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case T:return Kl(n.children,i,s,t);case D:a=8,i|=16;break;case E:a=8,i|=1;break;case M:return(e=Hl(12,n,t,8|i)).elementType=M,e.type=M,e.lanes=s,e;case P:return(e=Hl(13,n,t,i)).type=P,e.elementType=P,e.lanes=s,e;case R:return(e=Hl(19,n,t,i)).elementType=R,e.lanes=s,e;case F:return Xl(n,i,s,t);case z:return(e=Hl(24,n,t,i)).elementType=z,e.lanes=s,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case A:a=10;break e;case C:a=9;break e;case k:a=11;break e;case L:a=14;break e;case O:a=16,r=null;break e;case N:a=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Hl(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Kl(e,t,n,r){return(e=Hl(7,e,r,t)).lanes=n,e}function Xl(e,t,n,r){return(e=Hl(23,e,r,t)).elementType=F,e.lanes=n,e}function Yl(e,t,n){return(e=Hl(6,e,null,t)).lanes=n,e}function Jl(e,t,n){return(t=Hl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $l(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Gt(0),this.expirationTimes=Gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.mutableSourceEagerHydrationData=null}function Ql(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,s=dl(),a=pl(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(vi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===n.tag){var c=n.type;if(vi(c)){n=_i(n,c,l);break e}}n=l}else n=di;return null===t.context?t.context=n:t.pendingContext=n,(t=us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),hs(i,t),fl(i,a,s),a}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new $l(e,t,null!=n&&!0===n.hydrate),t=Hl(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ls(t),e[ei]=n.current,Lr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function sc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s._internalRoot;if("function"==typeof i){var a=i;i=function(){var e=tc(o);a.call(e)}}ec(t,o,e,i)}else{if(s=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=s._internalRoot,"function"==typeof i){var l=i;i=function(){var e=tc(o);l.call(e)}}xl((function(){ec(t,o,e,i)}))}return tc(o)}function ac(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!sc(t))throw Error(o(200));return Ql(e,t,null,n)}Ka=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||fi.current)Fo=!0;else{if(0==(n&r)){switch(Fo=!1,t.tag){case 3:qo(t),qs();break;case 5:Is(t);break;case 1:vi(t.type)&&xi(t);break;case 4:Os(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;hi($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?$o(e,t,n):(hi(Fs,1&Fs.current),null!==(t=sa(e,t,n))?t.sibling:null);hi(Fs,1&Fs.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return ia(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),hi(Fs,Fs.current),r)break;return null;case 23:case 24:return t.lanes=0,Go(e,t,n)}return sa(e,t,n)}Fo=0!=(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=gi(t,pi.current),ss(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vi(r)){var s=!0;xi(t)}else s=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ls(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&gs(t,r,a,e),i.updater=vs,t.stateNode=i,i._reactInternals=t,xs(t,r,e,n),t=Wo(null,t,r,!0,s,n)}else t.tag=0,zo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"==typeof e)return jl(e)?1:0;if(null!=e){if((e=e.$$typeof)===k)return 11;if(e===L)return 14}return 2}(i),e=Ji(i,e),s){case 0:t=Ho(null,t,i,e,n);break e;case 1:t=jo(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Bo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(qo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,cs(e,t),ps(t,r,null,n),(r=t.memoizedState.element)===i)qs(),t=sa(e,t,n);else{if((s=(i=t.stateNode).hydrate)&&(Bs=Kr(t.stateNode.containerInfo.firstChild),Us=t,s=Vs=!0),s){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(s=e[i])._workInProgressVersionPrimary=e[i+1],Ks.push(s);for(n=As(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else zo(e,t,r,n),qs();t=t.child}return t;case 5:return Is(t),null===e&&Hs(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,Hr(r,i)?a=null:null!==s&&Hr(r,s)&&(t.flags|=16),Zo(e,t),zo(e,t,a,n),t.child;case 6:return null===e&&Hs(t),null;case 13:return $o(e,t,n);case 4:return Os(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ms(t,null,r,n):zo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return zo(e,t,t.pendingProps,n),t.child;case 8:case 12:return zo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value;var l=t.type._context;if(hi($i,l._currentValue),l._currentValue=s,null!==a)if(l=a.value,0===(s=ur(l,s)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,s):1073741823))){if(a.children===i.children&&!fi.current){t=sa(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&s)){1===l.tag&&((u=us(-1,n&-n)).tag=2,hs(l,u)),l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),is(l.return,n),c.lanes|=n;break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}zo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(s=t.pendingProps).children,ss(t,n),r=r(i=os(i,s.unstable_observedBits)),t.flags|=1,zo(e,t,r,n),t.child;case 14:return s=Ji(i=t.type,t.pendingProps),Bo(e,t,i,s=Ji(i.type,s),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,vi(r)?(e=!0,xi(t)):e=!1,ss(t,n),bs(t,r,i),xs(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return ia(e,t,n);case 23:case 24:return Go(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(fl(e,4,dl()),rc(e,4))},nt=function(e){13===e.tag&&(fl(e,67108864,dl()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=dl(),n=pl(e);fl(e,n,t),rc(e,n)}},it=function(e,t){return t()},Ae=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=si(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=_l,Ne=function(e,t,n,r,i){var s=La;La|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(La=s)&&(qa(),Ki())}},Ie=function(){0==(49&La)&&(function(){if(null!==il){var e=il;il=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gl(e,Zi())}))}Ki()}(),Il())},De=function(e,t){var n=La;La|=2;try{return e(t)}finally{0===(La=n)&&(qa(),Ki())}};var lc={Events:[ri,ii,si,Re,Le,Il,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},uc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Si=hc.inject(uc),Ti=hc}catch(ge){}}t.createPortal=ac,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=La;if(0!=(48&n))return e(t);La|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{La=n,Ki()}},t.render=function(e,t,n){if(!sc(t))throw Error(o(200));return oc(null,e,t,!1,n)}},"7wdh":(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n("uVZz")},"/Arh":e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,r="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){if(e.constructor!==o.constructor)return!1;var a,l,c,u;if(Array.isArray(e)){if((a=e.length)!=o.length)return!1;for(l=a;0!=l--;)if(!s(e[l],o[l]))return!1;return!0}if(n&&e instanceof Map&&o instanceof Map){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!s(l.value[1],o.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&o instanceof Set){if(e.size!==o.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(o)){if((a=e.length)!=o.length)return!1;for(l=a;0!=l--;)if(e[l]!==o[l])return!1;return!0}if(e.constructor===RegExp)return e.source===o.source&&e.flags===o.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===o.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===o.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(o).length)return!1;for(l=a;0!=l--;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!s(e[c[l]],o[c[l]]))return!1;return!0}return e!=e&&o!=o}e.exports=function(e,t){try{return s(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},Xj2B:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return x(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||x(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===s},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===a},t.isStrictMode=function(e){return x(e)===o},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===h||e===a||e===o||e===p||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===_||e.$$typeof===v)},t.typeOf=x},O6jy:(e,t,n)=>{"use strict";e.exports=n("Xj2B")},vpSu:(e,t,n)=>{"use strict";n.d(t,{LX:()=>S});var r=n("m290"),i=n("ynia"),s=n("bg8x"),o=n.n(s),a=n("3tQP"),l=n("XvIh"),c=n("H+Tk"),u=n("+vUH"),h=n.n(u),d=(n("O6jy"),n("D1ci")),p=(n("lf1J"),1073741823),f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};function m(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var g=i.createContext||function(e,t){var n,s,a="__create-react-context-"+function(){var e="__global_unique_id__";return f[e]=(f[e]||0)+1}()+"__",l=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=m(t.props.value),t}(0,r.Z)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((s=r)===(o=i)?0!==s||1/s==1/o:s!=s&&o!=o)?n=0:(n="function"==typeof t?t(r,i):p,0!==(n|=0)&&this.emitter.set(e.value,n))}var s,o},i.render=function(){return this.props.children},n}(i.Component);l.childContextTypes=((n={})[a]=o().object.isRequired,n);var c=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,r.Z)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?p:t},i.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?p:e},i.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},i.getValue=function(){return this.context[a]?this.context[a].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return c.contextTypes=((s={})[a]=o().object,s),{Provider:l,Consumer:c}},v=function(e){var t=g();return t.displayName=e,t},y=v("Router-History"),b=v("Router"),_=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}(0,r.Z)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return i.createElement(b.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(y.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);i.Component;i.Component;var x={},w=0;function S(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,s=void 0!==i&&i,o=n.strict,a=void 0!==o&&o,l=n.sensitive,c=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=x[n]||(x[n]={});if(r[e])return r[e];var i=[],s={regexp:h()(e,i,t),keys:i};return w<1e4&&(r[e]=s,w++),s}(n,{end:s,strict:a,sensitive:c}),i=r.regexp,o=r.keys,l=i.exec(e);if(!l)return null;var u=l[0],d=l.slice(1),p=e===u;return s&&!p?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:p,params:o.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}i.Component;function T(e){return"/"===e.charAt(0)?e:"/"+e}function E(e,t){if(!e)return t;var n=T(e);return 0!==t.pathname.indexOf(n)?t:(0,c.Z)({},t,{pathname:t.pathname.substr(n.length)})}function M(e){return"string"==typeof e?e:(0,a.Ep)(e)}function A(e){return function(){(0,l.Z)(!1)}}function C(){}i.Component;i.Component;i.useContext},ls5I:(e,t,n)=>{"use strict";Object.defineProperty(t,"Am",{enumerable:!0,get:function(){return s.toast}});var r,i=(r=n("vssq"))&&r.__esModule?r:{default:r},s=n("c4tK")},vssq:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("ynia")),o=c(n("bg8x")),a=c(n("ffKe")),l=n("c4tK");function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(y(i={},"top-right","fly left"),y(i,"top-center","fly down"),y(i,"top-left","fly right"),y(i,"bottom-right","fly left"),y(i,"bottom-center","fly up"),y(i,"bottom-left","fly right"),i),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,e);var t,n,r,i=f(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y(g(e=i.call.apply(i,[this].concat(n))),"state",{toasts:[]}),y(g(e),"onClose",(function(t){var n=e.state.toasts.find((function(e){return e.id===t}));n&&(l.store.remove(n),n.onClose&&n.onClose())})),y(g(e),"updateToasts",(function(){e.setState({toasts:l.store.data})})),e}return t=o,(n=[{key:"componentDidMount",value:function(){l.store.subscribe(this.updateToasts)}},{key:"componentDidUpdate",value:function(){this.props.maxToasts&&this.state.toasts.length>this.props.maxToasts&&this.onClose(this.state.toasts[0].id)}},{key:"componentWillUnmount",value:function(){l.store.unsubscribe(this.updateToasts)}},{key:"render",value:function(){var e=this,t=this.props,n=t.animation,r=t.position,i=t.className,o=this.state.toasts;return o.length?s.default.createElement("div",{className:"ui-alerts ".concat(r," ").concat(i)},o.map((function(t){var i=t.id,o=t.type,l=void 0===o?"info":o,c=t.title,u=void 0===c?"":c,h=t.description,d=void 0===h?"":h,p=t.icon,f=t.time,m=t.size,g=t.color,v=t.list,y=t.onClick,_=t.onDismiss,x=t.animation;return s.default.createElement(a.default,{key:i,toastId:i,type:l,title:u,description:d,icon:p,size:m,color:g,list:v,openAnimation:x||n||"pulse",closeAnimation:b[r],time:f,onClick:y,onClose:e.onClose,onDismiss:_})}))):null}}])&&d(t.prototype,n),r&&d(t,r),o}(s.Component);y(_,"propTypes",{position:o.default.oneOf(["top-right","top-center","top-left","bottom-right","bottom-center","bottom-left"]),animation:o.default.string,className:o.default.string,maxToasts:o.default.number}),y(_,"defaultProps",{position:"top-right",animation:null,className:"",maxToasts:null});var x=_;t.default=x},ffKe:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n("ynia")),i=l(n("bg8x")),s=n("jjuz"),o=l(n("Y3QO")),a=["type","title","description","onClose","onDismiss","icon"];function l(e){return e&&e.__esModule?e:{default:e}}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var h={info:"announcement",success:"checkmark",error:"remove",warning:"warning circle"};function d(e){var t,n,i,o=e.type,l=e.title,d=e.description,p=e.onClose,f=e.onDismiss,m=e.icon,g=u(e,a),v=m||h[o];return r.default.createElement(s.Message,c({},(i=!0,(n=o)in(t={})?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t),{onDismiss:function(e){e.stopPropagation(),f(),p()},header:l,content:d,icon:v,floating:!0},g))}d.propTypes={type:i.default.oneOf(["info","success","error","warning"]).isRequired,title:i.default.string.isRequired,description:i.default.oneOfType([i.default.arrayOf(i.default.string),i.default.string,i.default.node]).isRequired,icon:i.default.oneOfType([i.default.bool,i.default.string]),onDismiss:i.default.func,onClose:i.default.func},d.defaultProps={onDismiss:function(){},onClose:function(){},icon:void 0};var p=(0,o.default)(d);t.default=p},uHoQ:(e,t)=>{"use strict";function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"subscribers",[]),r(this,"items",[])}var t,i,s;return t=e,(i=[{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"unsubscribe",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t!==e?t:void 0}))}},{key:"notify",value:function(){this.subscribers.forEach((function(e){return e()}))}},{key:"add",value:function(e){this.items.push(e),this.notify()}},{key:"remove",value:function(e){this.items=this.items.filter((function(t){return t!==e?t:void 0})),this.notify()}},{key:"data",get:function(){return this.items}}])&&n(t.prototype,i),s&&n(t,s),e}();t.default=i},c4tK:(e,t,n)=>{"use strict";var r;function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0,t.toast=function(e,t,n,r){a+=1,o.add(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:a,onClose:t,onClick:n,onDismiss:r},e))};var o=new(((r=n("uHoQ"))&&r.__esModule?r:{default:r}).default);t.store=o;var a=0},Y3QO:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,t);var n,r,o=(n=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(r){var i=m(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return p(this,e)});function l(){var e;u(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(f(e=o.call.apply(o,[this].concat(n))),"state",{visible:!1,time:500,animation:e.props.openAnimation}),g(f(e),"onClose",(function(){e.setState((function(t){return{visible:!t.visible,animation:e.props.closeAnimation,time:v}}),(function(){setTimeout((function(){e.timerId&&clearTimeout(e.timerId),e.props.onClose(e.props.toastId)}),v)}))})),e}return function(e,t,n){t&&h(e.prototype,t);n&&h(e,n)}(l,[{key:"componentDidMount",value:function(){this.props.time&&(this.timerId=setTimeout(this.onClose,this.props.time)),this.setState({visible:!0})}},{key:"render",value:function(){var t=this.props,n=(t.toastId,t.openAnimation,t.closeAnimation,t.time,t.onClose,function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,a)),r=this.state,o=r.time,l=r.visible,u=r.animation;return i.default.createElement(s.Transition,{animation:u,duration:o,visible:l},i.default.createElement("div",{style:{marginBottom:"1em"},role:"presentation"},i.default.createElement(e,c({},n,{onClose:this.onClose}))))}}]),l}(i.default.Component);return g(t,"propTypes",{toastId:o.default.number.isRequired,onClose:o.default.func.isRequired,openAnimation:o.default.string.isRequired,closeAnimation:o.default.string.isRequired,time:o.default.number}),g(t,"defaultProps",{time:2e3}),t};var i=l(n("ynia")),s=n("jjuz"),o=l(n("bg8x")),a=["toastId","openAnimation","closeAnimation","time","onClose"];function l(e){return e&&e.__esModule?e:{default:e}}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=1e3},"0Tj2":(e,t,n)=>{"use strict";var r=n("FMeR"),i=60103,s=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,a=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),s=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),o=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,r(b,g.prototype),b.isPureReactComponent=!0;var _={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!w.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:i,type:e,key:o,ref:a,props:s,_owner:_.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case s:l=!0}}if(l)return o=o(l=e),e=""===r?"."+M(l,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),A(o,t,n,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=r+M(a=e[c],c);l+=A(a,t,n,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,n,u=r+M(a,c++),o);else if("object"===a)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function k(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var P={current:null};function R(){var e=P.current;if(null===e)throw Error(p(321));return e}var L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error(p(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var s=r({},e.props),o=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)x.call(t,u)&&!w.hasOwnProperty(u)&&(s[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)s.children=n;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];s.children=c}return{$$typeof:i,type:e.type,key:o,ref:a,props:s,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},ynia:(e,t,n)=>{"use strict";e.exports=n("0Tj2")},"b2X+":(e,t,n)=>{"use strict";t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isImmutable,n=void 0===t?s.default:t,a=e.ignore,u=o.default.bind(null,n,a);return function(e){var t=e.getState,n=t(),s=u(n),o=void 0;return function(e){return function(a){n=t(),o=s.detectMutations(),s=u(n),(0,r.default)(!o.wasMutated,l,(o.path||[]).join("."));var h=e(a);return n=t(),o=s.detectMutations(),s=u(n),o.wasMutated&&(0,r.default)(!o.wasMutated,c,(o.path||[]).join("."),(0,i.default)(a)),h}}}};var r=a(n("GIbF")),i=a(n("7koP")),s=a(n("zEtG")),o=a(n("3JHD"));function a(e){return e&&e.__esModule?e:{default:e}}var l=["A state mutation was detected between dispatches, in the path `%s`.","This may cause incorrect behavior.","(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)"].join(" "),c=["A state mutation was detected inside a dispatch, in the path: `%s`.","Take a look at the reducer(s) handling the action %s.","(http://redux.js.org/docs/Troubleshooting.html#never-mutate-reducer-arguments)"].join(" ")},zEtG:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){return"object"!==(void 0===e?"undefined":n(e))||null==e}},"3JHD":(e,t)=>{"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s={value:r};if(!e(r))for(var o in s.children={},r){var a=i.concat(o);t.length&&-1!==t.indexOf(a.join("."))||(s.children[o]=n(e,t,r[o],a))}return s}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments[2],i=arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=n?n.value:void 0,l=a===i;if(s&&!l&&!Number.isNaN(i))return{wasMutated:!0,path:o};if(e(a)||e(i))return{wasMutated:!1};var c={};Object.keys(n.children).forEach((function(e){c[e]=!0})),Object.keys(i).forEach((function(e){c[e]=!0}));for(var u=Object.keys(c),h=0;h<u.length;h++){var d=u[h],p=o.concat(d);if(!t.length||-1===t.indexOf(p.join("."))){var f=r(e,t,n.children[d],i[d],l,p);if(f.wasMutated)return f}}return{wasMutated:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){var s=n(e,t,i);return{detectMutations:function(){return r(e,t,s,i)}}}},jANQ:function(e,t){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function r(e,t,n){r.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function i(e,t){i.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function s(e,t){s.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function o(e,t,n){o.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function a(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function l(e){var t=void 0===e?"undefined":k(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function c(e,t,n,u,h,d,p){p=p||[];var f=(h=h||[]).slice(0);if(void 0!==d){if(u){if("function"==typeof u&&u(f,d))return;if("object"===(void 0===u?"undefined":k(u))){if(u.prefilter&&u.prefilter(f,d))return;if(u.normalize){var m=u.normalize(f,d,e,t);m&&(e=m[0],t=m[1])}}}f.push(d)}"regexp"===l(e)&&"regexp"===l(t)&&(e=e.toString(),t=t.toString());var g=void 0===e?"undefined":k(e),v=void 0===t?"undefined":k(t),y="undefined"!==g||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(d),b="undefined"!==v||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(d);if(!y&&b)n(new i(f,t));else if(!b&&y)n(new s(f,e));else if(l(e)!==l(t))n(new r(f,e,t));else if("date"===l(e)&&e-t!=0)n(new r(f,e,t));else if("object"===g&&null!==e&&null!==t)if(p.filter((function(t){return t.lhs===e})).length)e!==t&&n(new r(f,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var _;for(e.length,_=0;_<e.length;_++)_>=t.length?n(new o(f,_,new s(void 0,e[_]))):c(e[_],t[_],n,u,f,_,p);for(;_<t.length;)n(new o(f,_,new i(void 0,t[_++])))}else{var x=Object.keys(e),w=Object.keys(t);x.forEach((function(r,i){var s=w.indexOf(r);s>=0?(c(e[r],t[r],n,u,f,r,p),w=a(w,s)):c(e[r],void 0,n,u,f,r,p)})),w.forEach((function(e){c(void 0,t[e],n,u,f,e,p)}))}p.length=p.length-1}else e!==t&&("number"===g&&isNaN(e)&&isNaN(t)||n(new r(f,e,t)))}function u(e,t,n,r){return r=r||[],c(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],s=n.path.length-1;for(r=0;r<s;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e=a(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function d(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,s=n.path?n.path.length-1:0;++i<s;)void 0===r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":h(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],s=n.path.length-1;for(r=0;r<s;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=a(e,t)}return e}function f(e,t,n){if(e&&t&&n&&n.kind){var r,i,s=e;for(i=n.path.length-1,r=0;r<i;r++)void 0===s[n.path[r]]&&(s[n.path[r]]={}),s=s[n.path[r]];switch(n.kind){case"A":p(s[n.path[r]],n.index,n.item);break;case"D":case"E":s[n.path[r]]=n.lhs;break;case"N":delete s[n.path[r]]}}}function m(e,t,n){e&&t&&c(e,t,(function(r){n&&!n(e,t,r)||d(e,t,r)}))}function g(e){return"color: "+L[e].color+"; font-weight: bold"}function v(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,s=e.index,o=e.item;switch(t){case"E":return[n.join("."),r,"→",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+s+"]",o];default:return[]}}function y(e,t,n,r){var i=u(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=v(e);n.log.apply(n,["%c "+L[t].text,g(t)].concat(P(r)))})):n.log("—— no diff ——");try{n.groupEnd()}catch(e){n.log("—— diff end —— ")}}function b(e,t,n,r){switch(void 0===e?"undefined":k(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,P(n)):e[r];case"function":return e(t);default:return e}}function _(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var s=["action"];return s.push("%c"+String(e.type)),t&&s.push("%c@ "+r),n&&s.push("%c(in "+i.toFixed(2)+" ms)"),s.join(" ")}}function x(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,s=void 0===i?_(t):i,o=t.collapsed,a=t.colors,l=t.level,c=t.diff,u=void 0===t.titleFormatter;e.forEach((function(i,h){var d=i.started,p=i.startedTime,f=i.action,m=i.prevState,g=i.error,v=i.took,_=i.nextState,x=e[h+1];x&&(_=x.prevState,v=x.started-d);var w=r(f),S="function"==typeof o?o((function(){return _}),f,i):o,T=A(p),E=a.title?"color: "+a.title(w)+";":"",M=["color: gray; font-weight: lighter;"];M.push(E),t.timestamp&&M.push("color: gray; font-weight: lighter;"),t.duration&&M.push("color: gray; font-weight: lighter;");var C=s(w,T,v);try{S?a.title&&u?n.groupCollapsed.apply(n,["%c "+C].concat(M)):n.groupCollapsed(C):a.title&&u?n.group.apply(n,["%c "+C].concat(M)):n.group(C)}catch(e){n.log(C)}var k=b(l,w,[m],"prevState"),P=b(l,w,[w],"action"),R=b(l,w,[g,m],"error"),L=b(l,w,[_],"nextState");if(k)if(a.prevState){var O="color: "+a.prevState(m)+"; font-weight: bold";n[k]("%c prev state",O,m)}else n[k]("prev state",m);if(P)if(a.action){var N="color: "+a.action(w)+"; font-weight: bold";n[P]("%c action    ",N,w)}else n[P]("action    ",w);if(g&&R)if(a.error){var I="color: "+a.error(g,m)+"; font-weight: bold;";n[R]("%c error     ",I,g)}else n[R]("error     ",g);if(L)if(a.nextState){var D="color: "+a.nextState(_)+"; font-weight: bold";n[L]("%c next state",D,_)}else n[L]("next state",_);c&&y(m,_,n,S);try{n.groupEnd()}catch(e){n.log("—— log end ——")}}))}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},O,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,s=t.predicate,o=t.logErrors,a=t.diffPredicate;if(void 0===n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var l=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof s&&!s(n,c))return e(c);var u={};l.push(u),u.started=C.now(),u.startedTime=new Date,u.prevState=r(n()),u.action=c;var h=void 0;if(o)try{h=e(c)}catch(e){u.error=i(e)}else h=e(c);u.took=C.now()-u.started,u.nextState=r(n());var d=t.diff&&"function"==typeof a?a(n,c):t.diff;if(x(l,Object.assign({},t,{diff:d})),l.length=0,u.error)throw u.error;return h}}}}var S,T,E=function(e,t){return new Array(t+1).join(e)},M=function(e,t){return E("0",t-e.toString().length)+e},A=function(e){return M(e.getHours(),2)+":"+M(e.getMinutes(),2)+":"+M(e.getSeconds(),2)+"."+M(e.getMilliseconds(),3)},C="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},R=[];S="object"===k({})?{}:"undefined"!=typeof window?window:{},(T=S.DeepDiff)&&R.push((function(){void 0!==T&&S.DeepDiff===u&&(S.DeepDiff=T,T=void 0)})),t(r,n),t(i,n),t(s,n),t(o,n),Object.defineProperties(u,{diff:{value:u,enumerable:!0},observableDiff:{value:c,enumerable:!0},applyDiff:{value:m,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:f,enumerable:!0},isConflict:{value:function(){return void 0!==T},enumerable:!0},noConflict:{value:function(){return R&&(R.forEach((function(e){e()})),R=null),u},enumerable:!0}});var L={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},O={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?w()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=O,e.createLogger=w,e.logger=N,e.default=N,Object.defineProperty(e,"__esModule",{value:!0})}(t)},M2zF:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});n("soe2"),n("gYyb"),n("r6z/"),n("tfoZ"),n("ZPWF"),n("Iweo"),n("+IZh"),n("y1fr");var r=n("3XQs"),i=n("m6HD"),s=["name","type","cancelType","latest","debounce","throttle","validate","transform","process","processOptions","warnTimeout"],o=["dispatchReturn","dispatchMultiple","successType","failType"],a="undefined"==typeof window&&i&&i.env?"production":"",l={warnTimeout:6e4,latest:!1,debounce:0,throttle:0};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=u(e,s);if(t.length)throw new Error("unknown or misspelled option(s): ".concat(t));var n=e.name,i=e.type,c=e.cancelType,p=e.warnTimeout,f=void 0===p?l.warnTimeout:p,m=e.latest,g=void 0===m?l.latest:m,v=e.debounce,y=void 0===v?l.debounce:v,b=e.throttle,_=void 0===b?l.throttle:b,x=e.validate,w=e.transform,S=e.process,T=e.processOptions,E=void 0===T?{}:T;if(!i)throw new Error("type is required, use '*' to match all actions");if("undefined"===i)throw new Error('type is a string "undefined", check the logicOptions type field for a stringified undefined value');if(x&&w)throw new Error("logic cannot define both the validate and transform hooks they are aliases");if(void 0!==E.warnTimeout)throw new Error("warnTimeout is a top level createLogic option, not a processOptions option");var M=u(E,o);if(M.length)throw new Error("unknown or misspelled processOption(s): ".concat(M));"production"!==a&&void 0!==E.dispatchMultiple&&0!==f&&console.error("warning: in logic for type(s): ".concat((0,r.fb)(i)," - dispatchMultiple is always true in next version. For non-ending logic, set warnTimeout to 0"));var A=S?S.length:0;switch(A){case 0:case 1:d(E,"dispatchReturn",!0);break;case 2:"production"===a||E.dispatchMultiple||0===f||console.error("warning: in logic for type(s): ".concat((0,r.fb)(i)," - single-dispatch mode is deprecated, call done when finished dispatching. For non-ending logic, set warnTimeout: 0"));break;default:d(E,"dispatchMultiple",!0)}return{name:h(n),type:h(i),cancelType:h(c),latest:g,debounce:y,throttle:_,validate:x,transform:w,process:S,processOptions:E,warnTimeout:f}}function u(e,t){return Object.keys(e).filter((function(e){return-1===t.indexOf(e)}))}function h(e){return Array.isArray(e)?e.map((function(e){return h(e)})):"function"==typeof e?e.toString():e}function d(e,t,n){void 0===e[t]&&(e[t]=n)}},h5yL:(e,t,n)=>{"use strict";n.d(t,{Z:()=>It});n("vIIG"),n("soe2"),n("gYyb"),n("8Rbz"),n("tfoZ"),n("ZPWF"),n("Iweo"),n("EgfB"),n("r6z/"),n("FLPt"),n("QXY0"),n("tqF4"),n("OB0K"),n("+IZh"),n("+IFi"),n("yHjf"),n("MNqA"),n("KYkv");var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e){return"function"==typeof e}var o=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;o=e},get useDeprecatedSynchronousErrorHandling(){return o}};function l(e){setTimeout((function(){throw e}),0)}var c={closed:!0,next:function(e){},error:function(e){if(a.useDeprecatedSynchronousErrorHandling)throw e;l(e)},complete:function(){}},u=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function h(e){return null!==e&&"object"==typeof e}var d=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),p=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,o=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var l=0;l<r.length;++l){r[l].remove(this)}if(s(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(e){t=e instanceof d?f(e.errors):[e]}}if(u(a)){l=-1;for(var c=a.length;++l<c;){var p=a[l];if(h(p))try{p.unsubscribe()}catch(e){t=t||[],e instanceof d?t=t.concat(f(e.errors)):t.push(e)}}}if(t)throw new d(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function f(e){return e.reduce((function(e,t){return e.concat(t instanceof d?t.errors:t)}),[])}var m=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),g=function(e){function t(n,r,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=c;break;case 1:if(!n){s.destination=c;break}if("object"==typeof n){n instanceof t?(s.syncErrorThrowable=n.syncErrorThrowable,s.destination=n,n.add(s)):(s.syncErrorThrowable=!0,s.destination=new v(s,n));break}default:s.syncErrorThrowable=!0,s.destination=new v(s,n,r,i)}return s}return i(t,e),t.prototype[m]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(p),v=function(e){function t(t,n,r,i){var o,a=e.call(this)||this;a._parentSubscriber=t;var l=a;return s(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==c&&(s((l=Object.create(n)).unsubscribe)&&a.add(l.unsubscribe.bind(l)),l.unsubscribe=a.unsubscribe.bind(a))),a._context=l,a._next=o,a._error=r,a._complete=i,a}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):l(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;l(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw e;l(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(l(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(g);var y=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function b(e){return e}function _(e){return 0===e.length?b:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var x=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof g)return e;if(e[m])return e[m]()}return e||t||n?new g(e,t,n):new g(c)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof g?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=w(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[y]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:_(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=w(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function w(e){if(e||(e=a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var S=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),T=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(p),E=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return i(t,e),t}(g),M=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[m]=function(){return new E(this)},t.prototype.lift=function(e){var t=new A(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new S;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new S;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new S;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new S;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new S;return this.hasError?(e.error(this.thrownError),p.EMPTY):this.isStopped?(e.complete(),p.EMPTY):(this.observers.push(e),new T(this,e))},t.prototype.asObservable=function(){var e=new x;return e.source=this,e},t.create=function(e,t){return new A(e,t)},t}(x),A=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):p.EMPTY},t}(M),C=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new S;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(M);function k(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new P(e,t,n))}}var P=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new R(e,this.accumulator,this.seed,this.hasSeed))},e}(),R=function(e){function t(t,n,r,i){var s=e.call(this,t)||this;return s.accumulator=n,s._seed=r,s.hasSeed=i,s.index=0,s}return i(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(g);function L(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new O(e,t))}}var O=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new N(e,this.predicate,this.inclusive))},e}(),N=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.inclusive=r,i.index=0,i}return i(t,e),t.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(g);function I(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new D(e,t))}}var D=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new F(e,this.project,this.thisArg))},e}(),F=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(g),z=(n("Sdr3"),n("Fc4Q"),1),U=function(){return Promise.resolve()}(),B={};function V(e){return e in B&&(delete B[e],!0)}var G=function(e){var t=z++;return B[t]=!0,U.then((function(){return V(t)&&e()})),t},Z=function(e){V(e)},H=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return i(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(p)),j=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return i(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=G(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(Z(n),t.scheduled=void 0)},t}(H),W=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),q=function(e){function t(n,r){void 0===r&&(r=W.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(W),K=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(q))(j);function X(e){return e&&"function"==typeof e.schedule}var Y=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function J(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var $=J(),Q=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ee(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var te=function(e){if(e&&"function"==typeof e[y])return r=e,function(e){var t=r[y]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Q(e))return Y(e);if(ee(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,l),e};if(e&&"function"==typeof e[$])return t=e,function(e){for(var n=t[$]();;){var r=void 0;try{r=n.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=h(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function ne(e,t){return new x((function(n){var r=new p,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function re(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[y]}(e))return function(e,t){return new x((function(n){var r=new p;return r.add(t.schedule((function(){var i=e[y]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(ee(e))return function(e,t){return new x((function(n){var r=new p;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Q(e))return ne(e,t);if(function(e){return e&&"function"==typeof e[$]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new x((function(n){var r,i=new p;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[$](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function ie(e,t){return t?re(e,t):e instanceof x?e:new x(te(e))}var se=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(g),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(g);function ae(e,t){if(!t.closed){if(e instanceof x)return e.subscribe(t);var n;try{n=te(e)(t)}catch(e){t.error(e)}return n}}function le(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(le((function(n,r){return ie(e(n,r)).pipe(I((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new ce(e,n))})}var ce=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new ue(e,this.project,this.concurrent))},e}(),ue=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new se(this),n=this.destination;n.add(t);var r=ae(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(oe);function he(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),le(b,e)}function de(e,t){return t?ne(e,t):new x(Y(e))}function pe(){return function(e){return e.lift(new fe(e))}}var fe=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new me(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),me=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(g),ge=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new p).add(this.source.subscribe(new ye(this.getSubject(),this))),e.closed&&(this._connection=null,e=p.EMPTY)),e},t.prototype.refCount=function(){return pe()(this)},t}(x),ve=function(){var e=ge.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),ye=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(E);var be=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();function _e(){return new M}function xe(){return function(e){return pe()((t=_e,function(e){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof n)return e.lift(new be(r,n));var i=Object.create(e,ve);return i.source=e,i.subjectFactory=r,i})(e));var t,n}}function we(e,t){return function(n){return n.lift(new Se(e,t))}}var Se=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Te(e,this.predicate,this.thisArg))},e}(),Te=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(g);function Ee(){}function Me(e,t,n){return function(r){return r.lift(new Ae(e,t,n))}}var Ae=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new Ce(e,this.nextOrObserver,this.error,this.complete))},e}(),Ce=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._tapNext=Ee,o._tapError=Ee,o._tapComplete=Ee,o._tapError=r||Ee,o._tapComplete=i||Ee,s(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Ee,o._tapError=n.error||Ee,o._tapComplete=n.complete||Ee),o}return i(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(g),ke=new q(H);var Pe=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new Re(e,this.dueTime,this.scheduler))},e}(),Re=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return i(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Le,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(g);function Le(e){e.debouncedNext()}var Oe={leading:!0,trailing:!1};function Ne(e,t,n){return void 0===t&&(t=ke),void 0===n&&(n=Oe),function(r){return r.lift(new Ie(e,t,n.leading,n.trailing))}}var Ie=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new De(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),De=function(e){function t(t,n,r,i,s){var o=e.call(this,t)||this;return o.duration=n,o.scheduler=r,o.leading=i,o.trailing=s,o._hasTrailingValue=!1,o._trailingValue=null,o}return i(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(Fe,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(g);function Fe(e){e.subscriber.clearThrottle()}function ze(e){return function(t){return t.lift(new Ue(e))}}var Ue=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new Be(e),r=ae(this.notifier,new se(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),Be=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return i(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(oe),Ve=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),Ge=new x((function(e){return e.complete()}));function Ze(e){return e?function(e){return new x((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Ge}function He(e){return function(t){return 0===e?Ze():t.lift(new je(e))}}var je=function(){function e(e){if(this.total=e,this.total<0)throw new Ve}return e.prototype.call=function(e,t){return t.subscribe(new We(e,this.total))},e}(),We=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return i(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(g),qe=n("3XQs");function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e){var t=e.deps,n=e.cancelled$,r=e.ctx,i=e.getState,s=e.action,o=e.action$;return Xe(Xe({},t),{},{cancelled$:n,ctx:r,getState:i,action:s,action$:o})}function $e(e,t){return new x(t?function(n){return t.schedule(Qe,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function Qe(e){var t=e.error;e.subscriber.error(t)}function et(e){var t=e.depObj,n=e.dispatch,r=e.dispatch$,i=e.dispatchReturn,s=e.done,o=e.name,a=e.processFn;try{var l=a(t,n,s);i&&(void 0===l?r.complete():n(l))}catch(e){console.error("unhandled exception in logic named: ".concat(o),e),n($e(e))}}function tt(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}function nt(e){return!!e&&(e instanceof x||"function"==typeof e.lift&&"function"==typeof e.subscribe)}function rt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return X(n)?(e.pop(),ne(e,n)):de(e)}function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function lt(e){return function(e){if(Array.isArray(e))return ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ut="UNHANDLED_LOGIC_ERROR";function ht(e){var t=e.action,n=e.cancel$,r=e.cancelled$,i=e.logic,s=e.monitor$,o=e.store,a=i.name,l=i.processOptions,c=l.dispatchMultiple,u=l.successType,h=l.failType,d=[he(),n?ze(n):null,Me((function(e){var t=(0,qe.jl)(e)?(0,qe.AI)(e):u?m(u,e,!1):e;t&&f(t)}),(function(e){if((0,qe.jl)(e)){return f((0,qe.AI)(e))}if(h){var t=m(h,e,!0);return t?f(t):void 0}if(e instanceof Error){return f(e.type?e:{type:ut,payload:e,error:!0})}var n=at(e);if(e&&("object"===n||"function"===n))return f(e);f({type:ut,payload:e,error:!0})}))].filter(qe.RF),p=new M;function f(e){return s.next({action:t,dispAction:e,op:"dispatch"}),o.dispatch(e)}function m(e,t,n){if("function"==typeof e)return e(t);var r={type:e,payload:t};return n&&(r.error=!0),r}p.pipe.apply(p,lt(d)).subscribe({error:function(){s.next({action:t,name:a,op:"end"}),r.complete(),r.unsubscribe()},complete:function(){s.next({action:t,name:a,op:"end"}),r.complete(),r.unsubscribe()}});var g={allowMore:!1};function v(e){return st(st({},g),e)}return{dispatch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=v(t),r=n.allowMore;return void 0!==e&&p.next(nt(e)?e:tt(e)?ie(e):e instanceof Error?$e(e):rt(e)),c||r||p.complete(),e},dispatch$:p,done:function(){p.complete()}}}function dt(e){return!u(e)&&e-parseFloat(e)+1>=0}function pt(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}var ft=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new mt(e,this.defaultValue))},e}(),mt=function(e){function t(t,n){var r=e.call(this,t)||this;return r.defaultValue=n,r.isEmpty=!0,r}return i(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(g),gt=n("m6HD"),vt="undefined"==typeof window&&gt&&gt.env?"production":"";function yt(e){var t=e.action,n=e.cancel$,r=e.monitor$,i=e.logic,s=i.name,o=!1;var a=(new M).pipe(He(1));return n&&(n.subscribe(a),a.subscribe((function(){o?r.next({action:t,name:s,op:"dispCancelled"}):r.next({action:t,name:s,op:"cancelled"})}))),function(e){var t=e.logic,n=e.cancelled$,r=t.name,i=t.warnTimeout;"production"!==vt&&i&&function(e,t,n){void 0===e&&(e=0);var r=-1;return dt(t)?r=Number(t)<1?1:Number(t):X(t)&&(n=t),X(n)||(n=ke),new x((function(t){var i=dt(e)?e:+e-n.now();return n.schedule(pt,i,{index:0,period:r,subscriber:t})}))}(i).pipe(ze(n.pipe((s=!0,void 0===s&&(s=null),function(e){return e.lift(new ft(s))}))),Me((function(){console.error("warning: logic (".concat(r,") is still running after ").concat(i/1e3,"s, forget to call done()? For non-ending logic, set warnTimeout: 0"))}))).subscribe();var s}({logic:i,cancelled$:a}),{cancelled$:a,setInterceptComplete:function(){o=!0}}}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){xt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return St(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tt(e){var t,n=e.action,r=e.logic,i=e.store,s=e.deps,o=e.cancel$,a=e.monitor$,l=e.action$,c=i.getState,u=r.name,h=r.process,d=r.processOptions.dispatchReturn,p=r.validate||r.transform;a.next({action:n,name:u,op:"begin"});var f=[o?ze(o):null,He(1)].filter(qe.RF),m=(t=x.create((function(e){var t=yt({action:n,cancel$:o,monitor$:a,logic:r}),f=t.cancelled$,m=t.setInterceptComplete,g=ht({action:n,cancel$:o,cancelled$:f,logic:r,monitor$:a,store:i}),v=g.dispatch,y=g.dispatch$,b=g.done,_=Je({deps:s,cancelled$:f,ctx:{},getState:c,action:n,action$:l});var x={useDispatch:"auto"};function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;T(!0,e,t)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;T(!1,e,t)}function T(t,r,i){var s=t&&h,o=function(e){return _t(_t({},x),e)}(i);!function(e,t){return!!e&&("auto"===t?e.type!==n.type:t)}(r,o.useDispatch)?(r?a.next({action:n,nextAction:r,name:u,shouldProcess:t,op:"next"}):(a.next({action:n,name:u,shouldProcess:t,op:"filtered"}),m()),function(e,t){e&&t.next(e);m(),t.complete()}(r,e)):(a.next({action:n,dispAction:r,name:u,shouldProcess:t,op:"nextDisp"}),m(),v((0,qe.Pj)(r),{allowMore:!0}),e.complete()),s?(_.action=r||n,et({depObj:_,dispatch:v,done:b,processFn:h,dispatchReturn:d,dispatch$:y,name:u})):y.complete()}p(_,w,S)}))).pipe.apply(t,wt(f));return m}function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Mt(e){return function(e){if(Array.isArray(e))return At(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ct(e,t,n,r){var i=e.name,s=e.type,o=e.cancelType,a=e.latest,l=e.debounce,c=e.throttle,u=e.process,h=e.processOptions.dispatchReturn,d=t.getState,p=[].concat(s&&a?s:[]).concat(o||[]);return function(o){var a,f,m=o.pipe(xe()),g=p.length?m.pipe(we((function(e){return kt(p,e.type)}))):null,v=e.validate||e.transform?le((function(i){return Tt({action:i,logic:e,store:t,deps:n,cancel$:g,monitor$:r,action$:m})})):Me((function(s){r.next({action:s,name:i,op:"begin"}),r.next({action:s,nextAction:s,name:i,shouldProcess:!0,op:"next"});var o=yt({action:s,cancel$:g,monitor$:r,logic:e}),a=o.cancelled$,l=o.setInterceptComplete,c=ht({action:s,cancel$:g,cancelled$:a,logic:e,monitor$:r,store:t}),p=c.dispatch,f=c.dispatch$,v=c.done,y=Je({deps:n,cancelled$:a,ctx:{},getState:d,action:s,action$:m});K.schedule((function(){l(),et({depObj:y,dispatch:p,dispatch$:f,dispatchReturn:h,done:v,name:i,processFn:u})}))})),y=[we((function(e){return kt(s,e.type)})),l?(a=l,void 0===f&&(f=ke),function(e){return e.lift(new Pe(a,f))}):null,c?Ne(c):null,v].filter(qe.RF),b=m.pipe.apply(m,Mt(y));return"*"===s?b:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return X(i)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof x?e[0]:he(n)(de(e,r))}(m.pipe(we((function(e){return!kt(s,e.type)}))),b)}}function kt(e,t){return!!e&&("symbol"===Et(e)?e===t:"string"==typeof e?e===t||"*"===e:Array.isArray(e)?e.some((function(e){return kt(e,t)})):e.test(t))}function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt="init";function It(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Array.isArray(e))throw new Error("createLogicMiddleware needs to be called with an array of logic items");var n=Ft(e);if(n.length)throw new Error("duplicate logic, indexes: ".concat(n));var r,i,s,o,a=new M,l=new M,c=new C({op:Nt});l.pipe(k((function(e,t){var n=e.pending||0;switch(t.op){case"top":case"begin":n+=1;break;case"end":case"bottom":case"nextDisp":case"filtered":case"dispatchError":case"cancelled":n-=1}return Lt(Lt({},t),{},{pending:n})}),{pending:0})).subscribe(c);var u=0,h=e;function d(n){if(r&&r!==n)throw new Error("cannot assign logicMiddleware instance to multiple stores, create separate instance for each");return r=n,function(n){var c=Dt(e,r,i=n,o,a,t,u,l),h=c.action$,d=c.sub,p=c.logicCount;return s=h,o=d,u=p,function(e){return l.next({action:e,op:"top"}),a.next(e),e}}}return d.monitor$=l,d.whenComplete=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe.RF;return c.pipe(L((function(e){return e.pending})),I((function(){}))).toPromise().then(e)},d.addDeps=function(e){if("object"!==Pt(e))throw new Error("addDeps should be called with an object");Object.keys(e).forEach((function(n){var r=t[n],i=e[n];if(void 0!==r&&r!==i)throw new Error("addDeps cannot override an existing dep value: ".concat(n));t[n]=i}))},d.addLogic=function(e){if(!e.length)return{logicCount:u};var n=h.concat(e),a=Ft(n);if(a.length)throw new Error("duplicate logic, indexes: ".concat(a));var c=Dt(e,r,i,o,s,t,u,l),d=c.action$,p=c.sub,f=c.logicCount;return s=d,o=p,u=f,h=n,{logicCount:f}},d.mergeNewLogic=function(e){var t=Ft(e);if(t.length)throw new Error("duplicate logic, indexes: ".concat(t));var n=e.filter((function(e){return-1===h.indexOf(e)}));return d.addLogic(n)},d.replaceLogic=function(e){var n=Ft(e);if(n.length)throw new Error("duplicate logic, indexes: ".concat(n));var c=Dt(e,r,i,o,a,t,0,l),d=c.action$,p=c.sub,f=c.logicCount;return s=d,o=p,u=f,h=e,{logicCount:f}},d}function Dt(e,t,n,r,i,s,o,a){if(!t||!n)throw new Error("store is not defined");r&&r.unsubscribe();var l=e.map((function(e,n){var r=function(e,t){if(e.name)return e;return Lt(Lt({},e),{},{name:"L(".concat((0,qe.fb)(e.type),")-").concat(t)})}(e,n+o);return Ct(r,t,s,a)})).reduce((function(e,t){return t(e)}),i),c=l.subscribe((function(e){try{n(e)}catch(n){console.error("error in mw dispatch or next call, probably in middlware/reducer/render fn:",n);var t=n&&n.message?n.message:n;a.next({action:e,err:t,op:"nextError"})}a.next({nextAction:e,op:"bottom"})}));return{action$:l,sub:c,logicCount:o+e.length}}function Ft(e){return e.reduce((function(t,n,r){return e.some((function(e,t){return r!==t&&n===e}))&&t.push(r),t}),[])}},"3XQs":(e,t,n)=>{"use strict";n.d(t,{AI:()=>a,Pj:()=>s,RF:()=>r,fb:()=>i,jl:()=>o});n("Iweo"),n("+IZh"),n("y1fr");function r(e){return e}function i(e){return Array.isArray(e)?e.map((function(e){return e.toString()})):e.toString()}function s(e){return e?{__interceptAction:e}:e}function o(e){return e&&e.__interceptAction}function a(e){return e.__interceptAction}},Fqr5:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.d(t,{md:()=>f,UY:()=>d,MT:()=>h});var a="function"==typeof Symbol&&Symbol.observable||"@@observable",l=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function u(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function h(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(o(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(o(1));return n(h)(e,t)}if("function"!=typeof e)throw new Error(o(2));var i=e,s=t,l=[],d=l,p=!1;function f(){d===l&&(d=l.slice())}function m(){if(p)throw new Error(o(3));return s}function g(e){if("function"!=typeof e)throw new Error(o(4));if(p)throw new Error(o(5));var t=!0;return f(),d.push(e),function(){if(t){if(p)throw new Error(o(6));t=!1,f();var n=d.indexOf(e);d.splice(n,1),l=null}}}function v(e){if(!u(e))throw new Error(o(7));if(void 0===e.type)throw new Error(o(8));if(p)throw new Error(o(9));try{p=!0,s=i(s,e)}finally{p=!1}for(var t=l=d,n=0;n<t.length;n++){(0,t[n])()}return e}function y(e){if("function"!=typeof e)throw new Error(o(10));i=e,v({type:c.REPLACE})}function b(){var e,t=g;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(o(11));function n(){e.next&&e.next(m())}return n(),{unsubscribe:t(n)}}})[a]=function(){return this},e}return v({type:c.INIT}),(r={dispatch:v,subscribe:g,getState:m,replaceReducer:y})[a]=b,r}function d(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var s,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:c.INIT}))throw new Error(o(12));if(void 0===n(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))}))}(n)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var r=!1,i={},l=0;l<a.length;l++){var c=a[l],u=n[c],h=e[c],d=u(h,t);if(void 0===d){t&&t.type;throw new Error(o(14))}i[c]=d,r=r||d!==h}return(r=r||a.length!==Object.keys(e).length)?i:e}}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(o(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=p.apply(void 0,a)(n.dispatch),s(s({},n),{},{dispatch:r})}}}},"+Bnq":(e,t)=>{"use strict";var n,r,i,s;if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,h=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(h,0),e}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(h,0))},r=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var f=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,g=null,v=-1,y=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,x=_.port2;_.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+y;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(e){throw x.postMessage(null),e}}else m=!1},n=function(e){g=e,m||(m=!0,x.postMessage(null))},r=function(e,n){v=d((function(){e(t.unstable_now())}),n)},i=function(){p(v),v=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function S(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var s=2*(r+1)-1,o=e[s],a=s+1,l=e[a];if(void 0!==o&&0>E(o,n))void 0!==l&&0>E(l,o)?(e[r]=l,e[a]=n,r=a):(e[r]=o,e[s]=n,r=s);else{if(!(void 0!==l&&0>E(l,n)))break e;e[r]=l,e[a]=n,r=a}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var M=[],A=[],C=1,k=null,P=3,R=!1,L=!1,O=!1;function N(e){for(var t=S(A);null!==t;){if(null===t.callback)T(A);else{if(!(t.startTime<=e))break;T(A),t.sortIndex=t.expirationTime,w(M,t)}t=S(A)}}function I(e){if(O=!1,N(e),!L)if(null!==S(M))L=!0,n(D);else{var t=S(A);null!==t&&r(I,t.startTime-e)}}function D(e,n){L=!1,O&&(O=!1,i()),R=!0;var s=P;try{for(N(n),k=S(M);null!==k&&(!(k.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=k.callback;if("function"==typeof o){k.callback=null,P=k.priorityLevel;var a=o(k.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?k.callback=a:k===S(M)&&T(M),N(n)}else T(M);k=S(M)}if(null!==k)var l=!0;else{var c=S(A);null!==c&&r(I,c.startTime-n),l=!1}return l}finally{k=null,P=s,R=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||R||(L=!0,n(D))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return S(M)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,s,o){var a=t.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:C++,callback:s,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>a?(e.sortIndex=o,w(A,e),null===S(M)&&e===S(A)&&(O?i():O=!0,r(I,o-a))):(e.sortIndex=l,w(M,e),L||R||(L=!0,n(D))),e},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},lbaC:(e,t,n)=>{"use strict";e.exports=n("+Bnq")},Ufck:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n("H+Tk"),i=n("m290"),s=n("iGFm"),o=n("/lYH"),a=n.n(o),l=n("KJe+"),c=n("eGir"),u=n("paW0"),h=n.n(u),d=n("ynia"),p=n("lDzk"),f=n("Kz5q"),m=n("TY8g"),g=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).contentRef=d.createRef(),t.triggerRef=d.createRef(),t.latestDocumentMouseDownEvent=null,t.handleDocumentMouseDown=function(e){t.latestDocumentMouseDownEvent=e},t.handleDocumentClick=function(e){var n=t.props.closeOnDocumentClick,r=t.latestDocumentMouseDownEvent;t.latestDocumentMouseDownEvent=null,!t.contentRef.current||(0,p.Z)(t.triggerRef.current,e)||r&&(0,p.Z)(t.contentRef.current,r)||(0,p.Z)(t.contentRef.current,e)||n&&t.close(e)},t.handleEscape=function(e){t.props.closeOnEscape&&h().getCode(e)===h().Escape&&t.close(e)},t.handlePortalMouseLeave=function(e){var n=t.props,r=n.closeOnPortalMouseLeave,i=n.mouseLeaveDelay;r&&e.target===t.contentRef.current&&(t.mouseLeaveTimer=t.closeWithTimeout(e,i))},t.handlePortalMouseEnter=function(){t.props.closeOnPortalMouseLeave&&clearTimeout(t.mouseLeaveTimer)},t.handleTriggerBlur=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerBlur,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];s.Z.apply(void 0,[r,"props.onBlur",e].concat(a));var c=e.relatedTarget||document.activeElement,u=(0,s.Z)(t.contentRef.current,"contains",c);i&&!u&&t.close(e)},t.handleTriggerClick=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerClick,o=n.openOnTriggerClick,a=t.state.open,l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];s.Z.apply(void 0,[r,"props.onClick",e].concat(c)),a&&i?t.close(e):!a&&o&&t.open(e)},t.handleTriggerFocus=function(e){for(var n=t.props,r=n.trigger,i=n.openOnTriggerFocus,o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];s.Z.apply(void 0,[r,"props.onFocus",e].concat(a)),i&&t.open(e)},t.handleTriggerMouseLeave=function(e){clearTimeout(t.mouseEnterTimer);for(var n=t.props,r=n.trigger,i=n.closeOnTriggerMouseLeave,o=n.mouseLeaveDelay,a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];s.Z.apply(void 0,[r,"props.onMouseLeave",e].concat(l)),i&&(t.mouseLeaveTimer=t.closeWithTimeout(e,o))},t.handleTriggerMouseEnter=function(e){clearTimeout(t.mouseLeaveTimer);for(var n=t.props,r=n.trigger,i=n.mouseEnterDelay,o=n.openOnTriggerMouseEnter,a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];s.Z.apply(void 0,[r,"props.onMouseEnter",e].concat(l)),o&&(t.mouseEnterTimer=t.openWithTimeout(e,i))},t.open=function(e){(0,s.Z)(t.props,"onOpen",e,(0,r.Z)({},t.props,{open:!0})),t.setState({open:!0})},t.openWithTimeout=function(e,n){var i=(0,r.Z)({},e);return setTimeout((function(){return t.open(i)}),n||0)},t.close=function(e){t.setState({open:!1}),(0,s.Z)(t.props,"onClose",e,(0,r.Z)({},t.props,{open:!1}))},t.closeWithTimeout=function(e,n){var i=(0,r.Z)({},e);return setTimeout((function(){return t.close(i)}),n||0)},t.handleMount=function(){(0,s.Z)(t.props,"onMount",null,t.props)},t.handleUnmount=function(){(0,s.Z)(t.props,"onUnmount",null,t.props)},t.handleTriggerRef=function(e){t.triggerRef.current=e,(0,l.n)(t.props.triggerRef,e)},t}(0,i.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)},n.render=function(){var e=this.props,t=e.children,n=e.eventPool,r=e.mountNode,i=e.trigger,s=this.state.open;return d.createElement(d.Fragment,null,s&&d.createElement(d.Fragment,null,d.createElement(m.Z,{innerRef:this.contentRef,mountNode:r,onMount:this.handleMount,onUnmount:this.handleUnmount},t),d.createElement(a(),{name:"mouseleave",on:this.handlePortalMouseLeave,pool:n,target:this.contentRef}),d.createElement(a(),{name:"mouseenter",on:this.handlePortalMouseEnter,pool:n,target:this.contentRef}),d.createElement(a(),{name:"mousedown",on:this.handleDocumentMouseDown,pool:n}),d.createElement(a(),{name:"click",on:this.handleDocumentClick,pool:n}),d.createElement(a(),{name:"keydown",on:this.handleEscape,pool:n})),i&&d.createElement(c.R,{innerRef:this.handleTriggerRef},d.cloneElement(i,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))},t}(f.Z);g.handledProps=["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"],g.propTypes={},g.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0},g.autoControlledProps=["open"],g.Inner=m.Z;const v=g},TY8g:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("m290"),i=n("iGFm"),s=n("KJe+"),o=n("eGir"),a=n("ynia"),l=n("7wdh"),c=n("jZHH"),u=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRef=function(e){(0,s.n)(t.props.innerRef,e)},t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){(0,i.Z)(this.props,"onMount",null,this.props)},n.componentWillUnmount=function(){(0,i.Z)(this.props,"onUnmount",null,this.props)},n.render=function(){if(!(0,c.Z)())return null;var e=this.props,t=e.children,n=e.mountNode,r=void 0===n?document.body:n;return(0,l.createPortal)(a.createElement(o.R,{innerRef:this.handleRef},t),r)},t}(a.Component);u.handledProps=["children","innerRef","mountNode","onMount","onUnmount"],u.propTypes={};const h=u},"0ViD":(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("H+Tk"),i=n("ynia"),s=n("uXJ5"),o=n("3GrG");function a(e){var t=e.slider,n=e.toggle,l=e.type,c=(0,s.Z)(a,e),u=!(t||n)||void 0;return i.createElement(o.Z,(0,r.Z)({},c,{type:l,radio:u,slider:t,toggle:n}))}a.handledProps=["slider","toggle","type"],a.propTypes={},a.defaultProps={type:"radio"};const l=a},"f0+Q":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("H+Tk"),i=n("ynia"),s=n("scvP");function o(e){return i.createElement(s.Z,(0,r.Z)({},e,{selection:!0}))}o.handledProps=["options"],o.propTypes={},o.Divider=s.Z.Divider,o.Header=s.Z.Header,o.Item=s.Z.Item,o.Menu=s.Z.Menu;const a=o},"8c5/":(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("H+Tk"),i=n("m290"),s=n("iGFm"),o=n("7PNb"),a=n("eGir"),l=n("ynia"),c=n("uXJ5"),u=n("ZbAl"),h=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).ref=(0,l.createRef)(),t.focus=function(){return t.ref.current.focus()},t.handleChange=function(e){var n=(0,o.Z)(e,"target.value");(0,s.Z)(t.props,"onChange",e,(0,r.Z)({},t.props,{value:n}))},t.handleInput=function(e){var n=(0,o.Z)(e,"target.value");(0,s.Z)(t.props,"onInput",e,(0,r.Z)({},t.props,{value:n}))},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.rows,i=e.value,s=(0,c.Z)(t,this.props),o=(0,u.Z)(t,this.props);return l.createElement(a.R,{innerRef:this.ref},l.createElement(o,(0,r.Z)({},s,{onChange:this.handleChange,onInput:this.handleInput,rows:n,value:i})))},t}(l.Component);h.handledProps=["as","onChange","onInput","rows","value"],h.propTypes={},h.defaultProps={as:"textarea",rows:3};const d=h},wi9p:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n("H+Tk"),i=n("m290"),s=n("iGFm"),o=n("Ql6E"),a=n("ynia"),l=n("xShN"),c=n("uXJ5"),u=n("ZbAl"),h=n("7yIm"),d=n("U0DR"),p=n("4sVK"),f=n("enhD"),m=n("fEDD"),g=n("+1VN"),v=n("1Ajs"),y=n("JQQo"),b=n("RWbT"),_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleSubmit=function(e){var n=t.props.action;"string"!=typeof n&&(0,s.Z)(e,"preventDefault");for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];s.Z.apply(void 0,[t.props,"onSubmit",e,t.props].concat(i))},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.action,i=e.children,s=e.className,h=e.error,d=e.inverted,p=e.loading,f=e.reply,m=e.size,g=e.success,v=e.unstackable,y=e.warning,b=e.widths,_=(0,o.Z)("ui",m,(0,l.lG)(h,"error"),(0,l.lG)(d,"inverted"),(0,l.lG)(p,"loading"),(0,l.lG)(f,"reply"),(0,l.lG)(g,"success"),(0,l.lG)(v,"unstackable"),(0,l.lG)(y,"warning"),(0,l.H0)(b,null,!0),"form",s),x=(0,c.Z)(t,this.props),w=(0,u.Z)(t,this.props);return a.createElement(w,(0,r.Z)({},x,{action:n,className:_,onSubmit:this.handleSubmit}),i)},t}(a.Component);_.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],_.propTypes={},_.defaultProps={as:"form"},_.Field=f.Z,_.Button=h.Z,_.Checkbox=d.Z,_.Dropdown=p.Z,_.Group=m.Z,_.Input=g.Z,_.Radio=v.Z,_.Select=y.Z,_.TextArea=b.Z;const x=_},"7yIm":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("ynia"),s=n("uXJ5"),o=n("ZbAl"),a=n("WUUJ"),l=n("enhD");function c(e){var t=e.control,n=(0,s.Z)(c,e),a=(0,o.Z)(c,e);return i.createElement(a,(0,r.Z)({},n,{control:t}))}c.handledProps=["as","control"],c.propTypes={},c.defaultProps={as:l.Z,control:a.Z};const u=c},U0DR:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("ynia"),s=n("uXJ5"),o=n("ZbAl"),a=n("3GrG"),l=n("enhD");function c(e){var t=e.control,n=(0,s.Z)(c,e),a=(0,o.Z)(c,e);return i.createElement(a,(0,r.Z)({},n,{control:t}))}c.handledProps=["as","control"],c.propTypes={},c.defaultProps={as:l.Z,control:a.Z};const u=c},"4sVK":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("ynia"),s=n("uXJ5"),o=n("ZbAl"),a=n("scvP"),l=n("enhD");function c(e){var t=e.control,n=(0,s.Z)(c,e),a=(0,o.Z)(c,e);return i.createElement(a,(0,r.Z)({},n,{control:t}))}c.handledProps=["as","control"],c.propTypes={},c.defaultProps={as:l.Z,control:a.Z};const u=c},enhD:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n("H+Tk"),i=n("syBy"),s=n("7PNb"),o=n("Ql6E"),a=n("ynia"),l=n("xShN"),c=n("uXJ5"),u=n("ZbAl"),h=n("aRJ7"),d=n("EVih"),p=n("sfx3"),f=n("3GrG"),m=n("0ViD");function g(e){var t=e.children,n=e.className,v=e.content,y=e.control,b=e.disabled,_=e.error,x=e.inline,w=e.label,S=e.required,T=e.type,E=e.width,M=e.id,A=(0,o.Z)((0,l.lG)(b,"disabled"),(0,l.lG)(_,"error"),(0,l.lG)(x,"inline"),(0,l.lG)(S,"required"),(0,l.H0)(E,"wide"),"field",n),C=(0,c.Z)(g,e),k=(0,u.Z)(g,e),P=(0,s.Z)(_,"pointing","above"),R=p.Z.create(_,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:P,id:M?M+"-error-message":void 0,role:"alert","aria-atomic":!0}}),L=("below"===P||"right"===P)&&R,O=("above"===P||"left"===P)&&R;if((0,i.Z)(y))return(0,i.Z)(w)?a.createElement(k,(0,r.Z)({},C,{className:A,id:M}),h.kK(t)?v:t):a.createElement(k,(0,r.Z)({},C,{className:A,id:M}),L,(0,d.i9)(w,{autoGenerateKey:!1}),O);var N={"aria-describedby":M&&_?M+"-error-message":null,"aria-invalid":!!_||void 0},I=(0,r.Z)({},C,{content:v,children:t,disabled:b,required:S,type:T,id:M});return"input"!==y||"checkbox"!==T&&"radio"!==T?y===f.Z||y===m.Z?a.createElement(k,{className:A},L,(0,a.createElement)(y,(0,r.Z)({},N,I,{label:w})),O):a.createElement(k,{className:A},(0,d.i9)(w,{defaultProps:{htmlFor:M},autoGenerateKey:!1}),L,(0,a.createElement)(y,(0,r.Z)({},N,I)),O):a.createElement(k,{className:A},a.createElement("label",null,L,(0,a.createElement)(y,(0,r.Z)({},N,I))," ",w,O))}g.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],g.propTypes={};const v=g},fEDD:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl");function c(e){var t=e.children,n=e.className,u=e.grouped,h=e.inline,d=e.unstackable,p=e.widths,f=(0,i.Z)((0,o.lG)(u,"grouped"),(0,o.lG)(h,"inline"),(0,o.lG)(d,"unstackable"),(0,o.H0)(p,null,!0),"fields",n),m=(0,a.Z)(c,e),g=(0,l.Z)(c,e);return s.createElement(g,(0,r.Z)({},m,{className:f}),t)}c.handledProps=["as","children","className","grouped","inline","unstackable","widths"],c.propTypes={};const u=c},"+1VN":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("ynia"),s=n("uXJ5"),o=n("ZbAl"),a=n("a49q"),l=n("enhD");function c(e){var t=e.control,n=(0,s.Z)(c,e),a=(0,o.Z)(c,e);return i.createElement(a,(0,r.Z)({},n,{control:t}))}c.handledProps=["as","control"],c.propTypes={},c.defaultProps={as:l.Z,control:a.Z};const u=c},"1Ajs":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("ynia"),s=n("uXJ5"),o=n("ZbAl"),a=n("0ViD"),l=n("enhD");function c(e){var t=e.control,n=(0,s.Z)(c,e),a=(0,o.Z)(c,e);return i.createElement(a,(0,r.Z)({},n,{control:t}))}c.handledProps=["as","control"],c.propTypes={},c.defaultProps={as:l.Z,control:a.Z};const u=c},JQQo:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("ynia"),s=n("uXJ5"),o=n("ZbAl"),a=n("f0+Q"),l=n("enhD");function c(e){var t=e.control,n=e.options,a=(0,s.Z)(c,e),l=(0,o.Z)(c,e);return i.createElement(l,(0,r.Z)({},a,{control:t,options:n}))}c.handledProps=["as","control","options"],c.propTypes={},c.defaultProps={as:l.Z,control:a.Z};const u=c},RWbT:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("ynia"),s=n("uXJ5"),o=n("ZbAl"),a=n("8c5/"),l=n("enhD");function c(e){var t=e.control,n=(0,s.Z)(c,e),a=(0,o.Z)(c,e);return i.createElement(a,(0,r.Z)({},n,{control:t}))}c.handledProps=["as","control"],c.propTypes={},c.defaultProps={as:l.Z,control:a.Z};const u=c},fbB6:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("NBfC"),u=n("iBv2");function h(e){var t=e.celled,n=e.centered,c=e.children,u=e.className,d=e.columns,p=e.container,f=e.divided,m=e.doubling,g=e.inverted,v=e.padded,y=e.relaxed,b=e.reversed,_=e.stackable,x=e.stretched,w=e.textAlign,S=e.verticalAlign,T=(0,i.Z)("ui",(0,o.lG)(n,"centered"),(0,o.lG)(p,"container"),(0,o.lG)(m,"doubling"),(0,o.lG)(g,"inverted"),(0,o.lG)(_,"stackable"),(0,o.lG)(x,"stretched"),(0,o.sU)(t,"celled"),(0,o.sU)(f,"divided"),(0,o.sU)(v,"padded"),(0,o.sU)(y,"relaxed"),(0,o.MR)(b,"reversed"),(0,o.X4)(w),(0,o.Ok)(S),(0,o.H0)(d,"column",!0),"grid",u),E=(0,a.Z)(h,e),M=(0,l.Z)(h,e);return s.createElement(M,(0,r.Z)({},E,{className:T}),c)}h.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],h.Column=c.Z,h.Row=u.Z,h.propTypes={};const d=h},NBfC:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.computer,h=e.color,d=e.floated,p=e.largeScreen,f=e.mobile,m=e.only,g=e.stretched,v=e.tablet,y=e.textAlign,b=e.verticalAlign,_=e.widescreen,x=e.width,w=(0,i.Z)(h,(0,o.lG)(g,"stretched"),(0,o.MR)(m,"only"),(0,o.X4)(y),(0,o.cD)(d,"floated"),(0,o.Ok)(b),(0,o.H0)(c,"wide computer"),(0,o.H0)(p,"wide large screen"),(0,o.H0)(f,"wide mobile"),(0,o.H0)(v,"wide tablet"),(0,o.H0)(_,"wide widescreen"),(0,o.H0)(x,"wide"),"column",n),S=(0,a.Z)(u,e),T=(0,l.Z)(u,e);return s.createElement(T,(0,r.Z)({},S,{className:w}),t)}u.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{children:e}}));const h=u},iBv2:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl");function c(e){var t=e.centered,n=e.children,u=e.className,h=e.color,d=e.columns,p=e.divided,f=e.only,m=e.reversed,g=e.stretched,v=e.textAlign,y=e.verticalAlign,b=(0,i.Z)(h,(0,o.lG)(t,"centered"),(0,o.lG)(p,"divided"),(0,o.lG)(g,"stretched"),(0,o.MR)(f,"only"),(0,o.MR)(m,"reversed"),(0,o.X4)(v),(0,o.Ok)(y),(0,o.H0)(d,"column",!0),"row",u),_=(0,a.Z)(c,e),x=(0,l.Z)(c,e);return s.createElement(x,(0,r.Z)({},_,{className:b}),n)}c.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],c.propTypes={};const u=c},l9XU:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n("H+Tk"),i=n("m290"),s=n("hR+M"),o=n("iGFm"),a=n("Ql6E"),l=n("ynia"),c=n("xShN"),u=n("uXJ5"),h=n("ZbAl"),d=n("aRJ7"),p=n("Kz5q"),f=n("EVih"),m=n("Cx4+"),g=n("9QdV"),v=n("cu7Q"),y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){var i=r.index;t.setState({activeIndex:i}),(0,o.Z)(e,"onClick",n,r),(0,o.Z)(t.props,"onItemClick",n,r)}}},t}(0,i.Z)(t,e);var n=t.prototype;return n.renderItems=function(){var e=this,t=this.props.items,n=this.state.activeIndex;return(0,s.Z)(t,(function(t,r){return g.Z.create(t,{defaultProps:{active:parseInt(n,10)===r,index:r},overrideProps:e.handleItemOverrides})}))},n.render=function(){var e=this.props,n=e.attached,i=e.borderless,s=e.children,o=e.className,p=e.color,f=e.compact,m=e.fixed,g=e.floated,v=e.fluid,y=e.icon,b=e.inverted,_=e.pagination,x=e.pointing,w=e.secondary,S=e.size,T=e.stackable,E=e.tabular,M=e.text,A=e.vertical,C=e.widths,k=(0,a.Z)("ui",p,S,(0,c.lG)(i,"borderless"),(0,c.lG)(f,"compact"),(0,c.lG)(v,"fluid"),(0,c.lG)(b,"inverted"),(0,c.lG)(_,"pagination"),(0,c.lG)(x,"pointing"),(0,c.lG)(w,"secondary"),(0,c.lG)(T,"stackable"),(0,c.lG)(M,"text"),(0,c.lG)(A,"vertical"),(0,c.sU)(n,"attached"),(0,c.sU)(g,"floated"),(0,c.sU)(y,"icon"),(0,c.sU)(E,"tabular"),(0,c.cD)(m,"fixed"),(0,c.H0)(C,"item"),o,"menu"),P=(0,u.Z)(t,this.props),R=(0,h.Z)(t,this.props);return l.createElement(R,(0,r.Z)({},P,{className:k}),d.kK(s)?this.renderItems():s)},t}(p.Z);y.handledProps=["activeIndex","as","attached","borderless","children","className","color","compact","defaultActiveIndex","fixed","floated","fluid","icon","inverted","items","onItemClick","pagination","pointing","secondary","size","stackable","tabular","text","vertical","widths"],y.propTypes={},y.autoControlledProps=["activeIndex"],y.Header=m.Z,y.Item=g.Z,y.Menu=v.Z,y.create=(0,f.u5)(y,(function(e){return{items:e}}));const b=y},"Cx4+":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7");function c(e){var t=e.children,n=e.className,u=e.content,h=(0,i.Z)("header",n),d=(0,o.Z)(c,e),p=(0,a.Z)(c,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?u:t)}c.handledProps=["as","children","className","content"],c.propTypes={};const u=c},"9QdV":(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n("H+Tk"),i=n("m290"),s=n("N+zd"),o=n("iGFm"),a=n("Ql6E"),l=n("ynia"),c=n("xShN"),u=n("ZbAl"),h=n("uXJ5"),d=n("aRJ7"),p=n("EVih"),f=n("35Nk"),m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||(0,o.Z)(t.props,"onClick",e,t.props)},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.children,o=e.className,p=e.color,m=e.content,g=e.disabled,v=e.fitted,y=e.header,b=e.icon,_=e.link,x=e.name,w=e.onClick,S=e.position,T=(0,a.Z)(p,S,(0,c.lG)(n,"active"),(0,c.lG)(g,"disabled"),(0,c.lG)(!0===b||b&&!(x||m),"icon"),(0,c.lG)(y,"header"),(0,c.lG)(_,"link"),(0,c.sU)(v,"fitted"),"item",o),E=(0,u.Z)(t,this.props,(function(){if(w)return"a"})),M=(0,h.Z)(t,this.props);return d.kK(i)?l.createElement(E,(0,r.Z)({},M,{className:T,onClick:this.handleClick}),f.Z.create(b,{autoGenerateKey:!1}),d.kK(m)?(0,s.Z)(x):m):l.createElement(E,(0,r.Z)({},M,{className:T,onClick:this.handleClick}),i)},t}(l.Component);m.handledProps=["active","as","children","className","color","content","disabled","fitted","header","icon","index","link","name","onClick","position"],m.propTypes={},m.create=(0,p.u5)(m,(function(e){return{content:e,name:e}}))},cu7Q:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7");function c(e){var t=e.children,n=e.className,u=e.content,h=e.position,d=(0,i.Z)(h,"menu",n),p=(0,o.Z)(c,e),f=(0,a.Z)(c,e);return s.createElement(f,(0,r.Z)({},p,{className:d}),l.kK(t)?u:t)}c.handledProps=["as","children","className","content","position"],c.propTypes={};const u=c},g3Zx:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n("H+Tk"),i=n("m290"),s=n("syBy"),o=n("Ql6E"),a=n("ynia"),l=n("xShN"),c=n("uXJ5"),u=n("ZbAl"),h=n("aRJ7"),d=n("EVih"),p=n("35Nk"),f=n("TvzP"),m=n("nu+r"),g=n("f1ut"),v=n("QXrj"),y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleDismiss=function(e){var n=t.props.onDismiss;n&&n(e,t.props)},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.attached,i=e.children,v=e.className,y=e.color,b=e.compact,_=e.content,x=e.error,w=e.floating,S=e.header,T=e.hidden,E=e.icon,M=e.info,A=e.list,C=e.negative,k=e.onDismiss,P=e.positive,R=e.size,L=e.success,O=e.visible,N=e.warning,I=(0,o.Z)("ui",y,R,(0,l.lG)(b,"compact"),(0,l.lG)(x,"error"),(0,l.lG)(w,"floating"),(0,l.lG)(T,"hidden"),(0,l.lG)(E,"icon"),(0,l.lG)(M,"info"),(0,l.lG)(C,"negative"),(0,l.lG)(P,"positive"),(0,l.lG)(L,"success"),(0,l.lG)(O,"visible"),(0,l.lG)(N,"warning"),(0,l.sU)(n,"attached"),"message",v),D=k&&a.createElement(p.Z,{name:"close",onClick:this.handleDismiss}),F=(0,c.Z)(t,this.props),z=(0,u.Z)(t,this.props);return h.kK(i)?a.createElement(z,(0,r.Z)({},F,{className:I}),D,p.Z.create(E,{autoGenerateKey:!1}),(!(0,s.Z)(S)||!(0,s.Z)(_)||!(0,s.Z)(A))&&a.createElement(f.Z,null,m.Z.create(S,{autoGenerateKey:!1}),g.Z.create(A,{autoGenerateKey:!1}),(0,d.BU)(_,{autoGenerateKey:!1}))):a.createElement(z,(0,r.Z)({},F,{className:I}),D,i)},t}(a.Component);y.handledProps=["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"],y.propTypes={},y.Content=f.Z,y.Header=m.Z,y.List=g.Z,y.Item=v.Z},TvzP:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7");function c(e){var t=e.children,n=e.className,u=e.content,h=(0,i.Z)("content",n),d=(0,o.Z)(c,e),p=(0,a.Z)(c,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?u:t)}c.handledProps=["as","children","className","content"],c.propTypes={};const u=c},"nu+r":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)("header",n),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{content:e}}));const h=u},QXrj:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)("content",n),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.defaultProps={as:"li"},u.create=(0,c.u5)(u,(function(e){return{content:e}}));const h=u},f1ut:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n("H+Tk"),i=n("hR+M"),s=n("Ql6E"),o=n("ynia"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7"),u=n("EVih"),h=n("QXrj");function d(e){var t=e.children,n=e.className,u=e.items,p=(0,s.Z)("list",n),f=(0,a.Z)(d,e),m=(0,l.Z)(d,e);return o.createElement(m,(0,r.Z)({},f,{className:p}),c.kK(t)?(0,i.Z)(u,h.Z.create):t)}d.handledProps=["as","children","className","items"],d.propTypes={},d.defaultProps={as:"ul"},d.create=(0,u.u5)(d,(function(e){return{items:e}}));const p=d},c9HL:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n("H+Tk"),i=n("hR+M"),s=n("Ql6E"),o=n("ynia"),a=n("xShN"),l=n("uXJ5"),c=n("ZbAl"),u=n("aRJ7"),h=n("bXQf"),d=n("Nnjl"),p=n("FaoA"),f=n("Jo3q"),m=n("OH8T"),g=n("/YOV");function v(e){var t=e.attached,n=e.basic,d=e.celled,m=e.children,y=e.className,b=e.collapsing,_=e.color,x=e.columns,w=e.compact,S=e.definition,T=e.fixed,E=e.footerRow,M=e.headerRow,A=e.headerRows,C=e.inverted,k=e.padded,P=e.renderBodyRow,R=e.selectable,L=e.singleLine,O=e.size,N=e.sortable,I=e.stackable,D=e.striped,F=e.structured,z=e.tableData,U=e.textAlign,B=e.unstackable,V=e.verticalAlign,G=(0,s.Z)("ui",_,O,(0,a.lG)(d,"celled"),(0,a.lG)(b,"collapsing"),(0,a.lG)(S,"definition"),(0,a.lG)(T,"fixed"),(0,a.lG)(C,"inverted"),(0,a.lG)(R,"selectable"),(0,a.lG)(L,"single line"),(0,a.lG)(N,"sortable"),(0,a.lG)(I,"stackable"),(0,a.lG)(D,"striped"),(0,a.lG)(F,"structured"),(0,a.lG)(B,"unstackable"),(0,a.sU)(t,"attached"),(0,a.sU)(n,"basic"),(0,a.sU)(w,"compact"),(0,a.sU)(k,"padded"),(0,a.X4)(U),(0,a.Ok)(V),(0,a.H0)(x,"column"),"table",y),Z=(0,l.Z)(v,e),H=(0,c.Z)(v,e);if(!u.kK(m))return o.createElement(H,(0,r.Z)({},Z,{className:G}),m);var j={defaultProps:{cellAs:"th"}},W=(M||A)&&o.createElement(f.Z,null,g.Z.create(M,j),(0,i.Z)(A,(function(e){return g.Z.create(e,j)})));return o.createElement(H,(0,r.Z)({},Z,{className:G}),W,o.createElement(h.Z,null,P&&(0,i.Z)(z,(function(e,t){return g.Z.create(P(e,t))}))),E&&o.createElement(p.Z,null,g.Z.create(E)))}v.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],v.defaultProps={as:"table"},v.propTypes={},v.Body=h.Z,v.Cell=d.Z,v.Footer=p.Z,v.Header=f.Z,v.HeaderCell=m.Z,v.Row=g.Z;const y=v},bXQf:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl");function l(e){var t=e.children,n=e.className,c=(0,i.Z)(n),u=(0,o.Z)(l,e),h=(0,a.Z)(l,e);return s.createElement(h,(0,r.Z)({},u,{className:c}),t)}l.handledProps=["as","children","className"],l.defaultProps={as:"tbody"},l.propTypes={};const c=l},Nnjl:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7"),u=n("EVih"),h=n("35Nk");function d(e){var t=e.active,n=e.children,u=e.className,p=e.collapsing,f=e.content,m=e.disabled,g=e.error,v=e.icon,y=e.negative,b=e.positive,_=e.selectable,x=e.singleLine,w=e.textAlign,S=e.verticalAlign,T=e.warning,E=e.width,M=(0,i.Z)((0,o.lG)(t,"active"),(0,o.lG)(p,"collapsing"),(0,o.lG)(m,"disabled"),(0,o.lG)(g,"error"),(0,o.lG)(y,"negative"),(0,o.lG)(b,"positive"),(0,o.lG)(_,"selectable"),(0,o.lG)(x,"single line"),(0,o.lG)(T,"warning"),(0,o.X4)(w),(0,o.Ok)(S),(0,o.H0)(E,"wide"),u),A=(0,a.Z)(d,e),C=(0,l.Z)(d,e);return c.kK(n)?s.createElement(C,(0,r.Z)({},A,{className:M}),h.Z.create(v),f):s.createElement(C,(0,r.Z)({},A,{className:M}),n)}d.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],d.defaultProps={as:"td"},d.propTypes={},d.create=(0,u.u5)(d,(function(e){return{content:e}}));const p=d},FaoA:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("H+Tk"),i=n("ynia"),s=n("uXJ5"),o=n("Jo3q");function a(e){var t=e.as,n=(0,s.Z)(a,e);return i.createElement(o.Z,(0,r.Z)({},n,{as:t}))}a.handledProps=["as"],a.propTypes={},a.defaultProps={as:"tfoot"};const l=a},Jo3q:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.content,d=e.fullWidth,p=(0,i.Z)((0,o.lG)(d,"full-width"),n),f=(0,a.Z)(u,e),m=(0,l.Z)(u,e);return s.createElement(m,(0,r.Z)({},f,{className:p}),c.kK(t)?h:t)}u.handledProps=["as","children","className","content","fullWidth"],u.defaultProps={as:"thead"},u.propTypes={};const h=u},OH8T:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("Nnjl");function c(e){var t=e.as,n=e.className,u=e.sorted,h=(0,i.Z)((0,o.cD)(u,"sorted"),n),d=(0,a.Z)(c,e);return s.createElement(l.Z,(0,r.Z)({},d,{as:t,className:h}))}c.handledProps=["as","className","sorted"],c.propTypes={},c.defaultProps={as:"th"};const u=c},"/YOV":(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n("H+Tk"),i=n("hR+M"),s=n("Ql6E"),o=n("ynia"),a=n("xShN"),l=n("uXJ5"),c=n("ZbAl"),u=n("aRJ7"),h=n("EVih"),d=n("Nnjl");function p(e){var t=e.active,n=e.cellAs,h=e.cells,f=e.children,m=e.className,g=e.disabled,v=e.error,y=e.negative,b=e.positive,_=e.textAlign,x=e.verticalAlign,w=e.warning,S=(0,s.Z)((0,a.lG)(t,"active"),(0,a.lG)(g,"disabled"),(0,a.lG)(v,"error"),(0,a.lG)(y,"negative"),(0,a.lG)(b,"positive"),(0,a.lG)(w,"warning"),(0,a.X4)(_),(0,a.Ok)(x),m),T=(0,l.Z)(p,e),E=(0,c.Z)(p,e);return u.kK(f)?o.createElement(E,(0,r.Z)({},T,{className:S}),(0,i.Z)(h,(function(e){return d.Z.create(e,{defaultProps:{as:n}})}))):o.createElement(E,(0,r.Z)({},T,{className:S}),f)}p.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],p.defaultProps={as:"tr",cellAs:"td"},p.propTypes={},p.create=(0,h.u5)(p,(function(e){return{cells:e}}));const f=p},WUUJ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n("H+Tk"),i=n("m290"),s=n("iGFm"),o=n("syBy"),a=n("eGir"),l=n("Ql6E"),c=n("ynia"),u=n("aRJ7"),h=n("xShN"),d=n("uXJ5"),p=n("ZbAl"),f=n("EVih"),m=n("35Nk"),g=n("sfx3"),v=n("Dqsk"),y=n("zT60"),b=n("K03a"),_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).ref=(0,c.createRef)(),t.computeElementType=function(){var e=t.props,n=e.attached,r=e.label;if(!(0,o.Z)(n)||!(0,o.Z)(r))return"div"},t.computeTabIndex=function(e){var n=t.props,r=n.disabled,i=n.tabIndex;return(0,o.Z)(i)?r?-1:"div"===e?0:void 0:i},t.focus=function(){return(0,s.Z)(t.ref.current,"focus")},t.handleClick=function(e){t.props.disabled?e.preventDefault():(0,s.Z)(t.props,"onClick",e,t.props)},t.hasIconClass=function(){var e=t.props,n=e.labelPosition,r=e.children,i=e.content,s=e.icon;return!0===s||s&&(n||u.kK(r)&&(0,o.Z)(i))},t}(0,i.Z)(t,e);var n=t.prototype;return n.computeButtonAriaRole=function(e){var t=this.props.role;return(0,o.Z)(t)?"button"!==e?"button":void 0:t},n.render=function(){var e=this.props,n=e.active,i=e.animated,s=e.attached,f=e.basic,v=e.children,y=e.circular,b=e.className,_=e.color,x=e.compact,w=e.content,S=e.disabled,T=e.floated,E=e.fluid,M=e.icon,A=e.inverted,C=e.label,k=e.labelPosition,P=e.loading,R=e.negative,L=e.positive,O=e.primary,N=e.secondary,I=e.size,D=e.toggle,F=e.type,z=(0,l.Z)(_,I,(0,h.lG)(n,"active"),(0,h.lG)(f,"basic"),(0,h.lG)(y,"circular"),(0,h.lG)(x,"compact"),(0,h.lG)(E,"fluid"),(0,h.lG)(this.hasIconClass(),"icon"),(0,h.lG)(A,"inverted"),(0,h.lG)(P,"loading"),(0,h.lG)(R,"negative"),(0,h.lG)(L,"positive"),(0,h.lG)(O,"primary"),(0,h.lG)(N,"secondary"),(0,h.lG)(D,"toggle"),(0,h.sU)(i,"animated"),(0,h.sU)(s,"attached")),U=(0,l.Z)((0,h.sU)(k||!!C,"labeled")),B=(0,l.Z)((0,h.lG)(S,"disabled"),(0,h.cD)(T,"floated")),V=(0,d.Z)(t,this.props),G=(0,p.Z)(t,this.props,this.computeElementType),Z=this.computeTabIndex(G);if(!(0,o.Z)(C)){var H=(0,l.Z)("ui",z,"button",b),j=(0,l.Z)("ui",U,"button",b,B),W=g.Z.create(C,{defaultProps:{basic:!0,pointing:"left"===k?"right":"left"},autoGenerateKey:!1});return c.createElement(G,(0,r.Z)({},V,{className:j,onClick:this.handleClick}),"left"===k&&W,c.createElement(a.R,{innerRef:this.ref},c.createElement("button",{className:H,"aria-pressed":D?!!n:void 0,disabled:S,type:F,tabIndex:Z},m.Z.create(M,{autoGenerateKey:!1})," ",w)),("right"===k||!k)&&W)}var q=(0,l.Z)("ui",z,B,U,"button",b),K=!u.kK(v),X=this.computeButtonAriaRole(G);return c.createElement(a.R,{innerRef:this.ref},c.createElement(G,(0,r.Z)({},V,{className:q,"aria-pressed":D?!!n:void 0,disabled:S&&"button"===G||void 0,onClick:this.handleClick,role:X,type:F,tabIndex:Z}),K&&v,!K&&m.Z.create(M,{autoGenerateKey:!1}),!K&&w))},t}(c.Component);_.handledProps=["active","animated","as","attached","basic","children","circular","className","color","compact","content","disabled","floated","fluid","icon","inverted","label","labelPosition","loading","negative","onClick","positive","primary","role","secondary","size","tabIndex","toggle","type"],_.propTypes={},_.defaultProps={as:"button"},_.Content=v.Z,_.Group=y.Z,_.Or=b.Z,_.create=(0,f.u5)(_,(function(e){return{content:e}}));const x=_},Dqsk:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.content,d=e.hidden,p=e.visible,f=(0,i.Z)((0,o.lG)(p,"visible"),(0,o.lG)(d,"hidden"),"content",n),m=(0,a.Z)(u,e),g=(0,l.Z)(u,e);return s.createElement(g,(0,r.Z)({},m,{className:f}),c.kK(t)?h:t)}u.handledProps=["as","children","className","content","hidden","visible"],u.propTypes={};const h=u},zT60:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n("H+Tk"),i=n("hR+M"),s=n("syBy"),o=n("Ql6E"),a=n("ynia"),l=n("xShN"),c=n("uXJ5"),u=n("ZbAl"),h=n("aRJ7"),d=n("WUUJ");function p(e){var t=e.attached,n=e.basic,f=e.buttons,m=e.children,g=e.className,v=e.color,y=e.compact,b=e.content,_=e.floated,x=e.fluid,w=e.icon,S=e.inverted,T=e.labeled,E=e.negative,M=e.positive,A=e.primary,C=e.secondary,k=e.size,P=e.toggle,R=e.vertical,L=e.widths,O=(0,o.Z)("ui",v,k,(0,l.lG)(n,"basic"),(0,l.lG)(y,"compact"),(0,l.lG)(x,"fluid"),(0,l.lG)(w,"icon"),(0,l.lG)(S,"inverted"),(0,l.lG)(T,"labeled"),(0,l.lG)(E,"negative"),(0,l.lG)(M,"positive"),(0,l.lG)(A,"primary"),(0,l.lG)(C,"secondary"),(0,l.lG)(P,"toggle"),(0,l.lG)(R,"vertical"),(0,l.sU)(t,"attached"),(0,l.cD)(_,"floated"),(0,l.H0)(L),"buttons",g),N=(0,c.Z)(p,e),I=(0,u.Z)(p,e);return(0,s.Z)(f)?a.createElement(I,(0,r.Z)({},N,{className:O}),h.kK(m)?b:m):a.createElement(I,(0,r.Z)({},N,{className:O}),(0,i.Z)(f,(function(e){return d.Z.create(e)})))}p.handledProps=["as","attached","basic","buttons","children","className","color","compact","content","floated","fluid","icon","inverted","labeled","negative","positive","primary","secondary","size","toggle","vertical","widths"],p.propTypes={};const f=p},K03a:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl");function l(e){var t=e.className,n=e.text,c=(0,i.Z)("or",t),u=(0,o.Z)(l,e),h=(0,a.Z)(l,e);return s.createElement(h,(0,r.Z)({},u,{className:c,"data-text":n}))}l.handledProps=["as","className","text"],l.propTypes={};const c=l},"Uh+m":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.content,d=e.fluid,p=e.text,f=e.textAlign,m=(0,i.Z)("ui",(0,o.lG)(p,"text"),(0,o.lG)(d,"fluid"),(0,o.X4)(f),"container",n),g=(0,a.Z)(u,e),v=(0,l.Z)(u,e);return s.createElement(v,(0,r.Z)({},g,{className:m}),c.kK(t)?h:t)}u.handledProps=["as","children","className","content","fluid","text","textAlign"],u.propTypes={};const h=u},"/d6T":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.clearing,d=e.content,p=e.fitted,f=e.hidden,m=e.horizontal,g=e.inverted,v=e.section,y=e.vertical,b=(0,i.Z)("ui",(0,o.lG)(h,"clearing"),(0,o.lG)(p,"fitted"),(0,o.lG)(f,"hidden"),(0,o.lG)(m,"horizontal"),(0,o.lG)(g,"inverted"),(0,o.lG)(v,"section"),(0,o.lG)(y,"vertical"),"divider",n),_=(0,a.Z)(u,e),x=(0,l.Z)(u,e);return s.createElement(x,(0,r.Z)({},_,{className:b}),c.kK(t)?d:t)}u.handledProps=["as","children","className","clearing","content","fitted","hidden","horizontal","inverted","section","vertical"],u.propTypes={};const h=u},lcYd:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("m290"),s=n("Ql6E"),o=n("ynia"),a=n("uXJ5"),l=n("ZbAl"),c=n("EVih"),u=function(e){function t(){return e.apply(this,arguments)||this}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.className,i=e.name,c=(0,s.Z)(i,"flag",n),u=(0,a.Z)(t,this.props),h=(0,l.Z)(t,this.props);return o.createElement(h,(0,r.Z)({},u,{className:c}))},t}(o.PureComponent);u.handledProps=["as","className","name"],u.propTypes={},u.defaultProps={as:"i"},u.create=(0,c.u5)(u,(function(e){return{name:e}}));const h=u},"21rH":(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7"),u=n("35Nk"),h=n("kveA"),d=n("S8ik"),p=n("THR5");function f(e){var t=e.attached,n=e.block,m=e.children,g=e.className,v=e.color,y=e.content,b=e.disabled,_=e.dividing,x=e.floated,w=e.icon,S=e.image,T=e.inverted,E=e.size,M=e.sub,A=e.subheader,C=e.textAlign,k=(0,i.Z)("ui",v,E,(0,o.lG)(n,"block"),(0,o.lG)(b,"disabled"),(0,o.lG)(_,"dividing"),(0,o.cD)(x,"floated"),(0,o.lG)(!0===w,"icon"),(0,o.lG)(!0===S,"image"),(0,o.lG)(T,"inverted"),(0,o.lG)(M,"sub"),(0,o.sU)(t,"attached"),(0,o.X4)(C),"header",g),P=(0,a.Z)(f,e),R=(0,l.Z)(f,e);if(!c.kK(m))return s.createElement(R,(0,r.Z)({},P,{className:k}),m);var L=u.Z.create(w,{autoGenerateKey:!1}),O=h.Z.create(S,{autoGenerateKey:!1}),N=d.Z.create(A,{autoGenerateKey:!1});return L||O?s.createElement(R,(0,r.Z)({},P,{className:k}),L||O,(y||N)&&s.createElement(p.Z,null,y,N)):s.createElement(R,(0,r.Z)({},P,{className:k}),y,N)}f.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],f.propTypes={},f.Content=p.Z,f.Subheader=d.Z;const m=f},THR5:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7");function c(e){var t=e.children,n=e.className,u=e.content,h=(0,i.Z)("content",n),d=(0,o.Z)(c,e),p=(0,a.Z)(c,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?u:t)}c.handledProps=["as","children","className","content"],c.propTypes={};const u=c},S8ik:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)("sub header",n),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{content:e}}));const h=u},"35Nk":(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n("H+Tk"),i=n("m290"),s=n("iGFm"),o=n("syBy"),a=n("Ql6E"),l=n("ynia"),c=n("xShN"),u=n("uXJ5"),h=n("ZbAl"),d=n("EVih"),p=n("GT6m"),f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled?e.preventDefault():(0,s.Z)(t.props,"onClick",e,t.props)},t}(0,i.Z)(t,e);var n=t.prototype;return n.getIconAriaOptions=function(){var e={},t=this.props,n=t["aria-label"],r=t["aria-hidden"];return(0,o.Z)(n)?e["aria-hidden"]="true":e["aria-label"]=n,(0,o.Z)(r)||(e["aria-hidden"]=r),e},n.render=function(){var e=this.props,n=e.bordered,i=e.circular,s=e.className,o=e.color,d=e.corner,p=e.disabled,f=e.fitted,m=e.flipped,g=e.inverted,v=e.link,y=e.loading,b=e.name,_=e.rotated,x=e.size,w=(0,a.Z)(o,b,x,(0,c.lG)(n,"bordered"),(0,c.lG)(i,"circular"),(0,c.lG)(p,"disabled"),(0,c.lG)(f,"fitted"),(0,c.lG)(g,"inverted"),(0,c.lG)(v,"link"),(0,c.lG)(y,"loading"),(0,c.sU)(d,"corner"),(0,c.cD)(m,"flipped"),(0,c.cD)(_,"rotated"),"icon",s),S=(0,u.Z)(t,this.props),T=(0,h.Z)(t,this.props),E=this.getIconAriaOptions();return l.createElement(T,(0,r.Z)({},S,E,{className:w,onClick:this.handleClick}))},t}(l.PureComponent);f.handledProps=["aria-hidden","aria-label","as","bordered","circular","className","color","corner","disabled","fitted","flipped","inverted","link","loading","name","rotated","size"],f.propTypes={},f.defaultProps={as:"i"},f.Group=p.Z,f.create=(0,d.u5)(f,(function(e){return{name:e}}));const m=f},GT6m:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7");function c(e){var t=e.children,n=e.className,u=e.content,h=e.size,d=(0,i.Z)(h,"icons",n),p=(0,o.Z)(c,e),f=(0,a.Z)(c,e);return s.createElement(f,(0,r.Z)({},p,{className:d}),l.kK(t)?u:t)}c.handledProps=["as","children","className","content","size"],c.propTypes={},c.defaultProps={as:"i"};const u=c},kveA:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n("H+Tk"),i=n("syBy"),s=n("Ql6E"),o=n("ynia"),a=n("xShN"),l=n("uXJ5"),c=n("wogc"),u=n("ZbAl"),h=n("aRJ7"),d=n("EVih"),p=n("vIwQ"),f=n("sfx3"),m=n("gL7d");function g(e){var t=e.avatar,n=e.bordered,d=e.centered,m=e.children,v=e.circular,y=e.className,b=e.content,_=e.dimmer,x=e.disabled,w=e.floated,S=e.fluid,T=e.hidden,E=e.href,M=e.inline,A=e.label,C=e.rounded,k=e.size,P=e.spaced,R=e.verticalAlign,L=e.wrapped,O=e.ui,N=(0,s.Z)((0,a.lG)(O,"ui"),k,(0,a.lG)(t,"avatar"),(0,a.lG)(n,"bordered"),(0,a.lG)(v,"circular"),(0,a.lG)(d,"centered"),(0,a.lG)(x,"disabled"),(0,a.lG)(S,"fluid"),(0,a.lG)(T,"hidden"),(0,a.lG)(M,"inline"),(0,a.lG)(C,"rounded"),(0,a.sU)(P,"spaced"),(0,a.cD)(w,"floated"),(0,a.Ok)(R,"aligned"),"image",y),I=(0,l.Z)(g,e),D=(0,c.vR)(I,{htmlProps:c.K2}),F=D[0],z=D[1],U=(0,u.Z)(g,e,(function(){if(!((0,i.Z)(_)&&(0,i.Z)(A)&&(0,i.Z)(L)&&h.kK(m)))return"div"}));return h.kK(m)?h.kK(b)?"img"===U?o.createElement(U,(0,r.Z)({},z,F,{className:N})):o.createElement(U,(0,r.Z)({},z,{className:N,href:E}),p.Z.create(_,{autoGenerateKey:!1}),f.Z.create(A,{autoGenerateKey:!1}),o.createElement("img",F)):o.createElement(U,(0,r.Z)({},I,{className:N}),b):o.createElement(U,(0,r.Z)({},I,{className:N}),m)}g.handledProps=["as","avatar","bordered","centered","children","circular","className","content","dimmer","disabled","floated","fluid","hidden","href","inline","label","rounded","size","spaced","ui","verticalAlign","wrapped"],g.Group=m.Z,g.propTypes={},g.defaultProps={as:"img",ui:!0},g.create=(0,d.u5)(g,(function(e){return{src:e}}));const v=g},gL7d:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7");function c(e){var t=e.children,n=e.className,u=e.content,h=e.size,d=(0,i.Z)("ui",h,n,"images"),p=(0,o.Z)(c,e),f=(0,a.Z)(c,e);return s.createElement(f,(0,r.Z)({},p,{className:d}),l.kK(t)?u:t)}c.handledProps=["as","children","className","content","size"],c.propTypes={};const u=c},a49q:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n("H+Tk"),i=n("m290"),s=n("Li4J"),o=n("hR+M"),a=n("iGFm"),l=n("7PNb"),c=n("syBy"),u=n("KJe+"),h=n("Ql6E"),d=n("ynia"),p=n("uXJ5"),f=n("wogc"),m=n("xShN"),g=n("ZbAl"),v=n("aRJ7"),y=n("EVih"),b=n("WUUJ"),_=n("35Nk"),x=n("sfx3"),w=function(e){function t(){for(var n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(n=e.call.apply(e,[this].concat(s))||this).inputRef=(0,d.createRef)(),n.computeIcon=function(){var e=n.props,t=e.loading,r=e.icon;return(0,c.Z)(r)?t?"spinner":void 0:r},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return(0,c.Z)(r)?t?-1:void 0:r},n.focus=function(){return n.inputRef.current.focus()},n.select=function(){return n.inputRef.current.select()},n.handleChange=function(e){var t=(0,l.Z)(e,"target.value");(0,a.Z)(n.props,"onChange",e,(0,r.Z)({},n.props,{value:t}))},n.handleChildOverrides=function(e,t){return(0,r.Z)({},t,e.props,{ref:function(t){(0,u.n)(e.ref,t),n.inputRef.current=t}})},n.partitionProps=function(){var e=n.props,i=e.disabled,s=e.type,o=n.computeTabIndex(),a=(0,p.Z)(t,n.props),l=(0,f.vR)(a),c=l[0],u=l[1];return[(0,r.Z)({},c,{disabled:i,type:s,tabIndex:o,onChange:n.handleChange,ref:n.inputRef}),u]},n}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,n=this.props,i=n.action,a=n.actionPosition,l=n.children,c=n.className,u=n.disabled,p=n.error,f=n.fluid,w=n.focus,S=n.icon,T=n.iconPosition,E=n.input,M=n.inverted,A=n.label,C=n.labelPosition,k=n.loading,P=n.size,R=n.transparent,L=n.type,O=(0,h.Z)("ui",P,(0,m.lG)(u,"disabled"),(0,m.lG)(p,"error"),(0,m.lG)(f,"fluid"),(0,m.lG)(w,"focus"),(0,m.lG)(M,"inverted"),(0,m.lG)(k,"loading"),(0,m.lG)(R,"transparent"),(0,m.cD)(a,"action")||(0,m.lG)(i,"action"),(0,m.cD)(T,"icon")||(0,m.lG)(S||k,"icon"),(0,m.cD)(C,"labeled")||(0,m.lG)(A,"labeled"),"input",c),N=(0,g.Z)(t,this.props),I=this.partitionProps(),D=I[0],F=I[1];if(!v.kK(l)){var z=(0,o.Z)(d.Children.toArray(l),(function(t){return"input"!==t.type?t:(0,d.cloneElement)(t,e.handleChildOverrides(t,D))}));return d.createElement(N,(0,r.Z)({},F,{className:O}),z)}var U=b.Z.create(i,{autoGenerateKey:!1}),B=x.Z.create(A,{defaultProps:{className:(0,h.Z)("label",(0,s.Z)(C,"corner")&&C)},autoGenerateKey:!1});return d.createElement(N,(0,r.Z)({},F,{className:O}),"left"===a&&U,"right"!==C&&B,(0,y.MO)(E||L,{defaultProps:D,autoGenerateKey:!1}),_.Z.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==a&&U,"right"===C&&B)},t}(d.Component);w.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],w.propTypes={},w.defaultProps={type:"text"},w.create=(0,y.u5)(w,(function(e){return{type:e}}));const S=w},sfx3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n("H+Tk"),i=n("m290"),s=n("b0ud"),o=n("iGFm"),a=n("Ql6E"),l=n("ynia"),c=n("xShN"),u=n("uXJ5"),h=n("ZbAl"),d=n("aRJ7"),p=n("EVih"),f=n("35Nk"),m=n("kveA"),g=n("8u6/"),v=n("R1J4"),y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t.handleIconOverrides=function(e){return{onClick:function(n){(0,o.Z)(e,"onClick",n),(0,o.Z)(t.props,"onRemove",n,t.props)}}},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.attached,o=e.basic,p=e.children,v=e.circular,y=e.className,b=e.color,_=e.content,x=e.corner,w=e.detail,S=e.empty,T=e.floating,E=e.horizontal,M=e.icon,A=e.image,C=e.onRemove,k=e.pointing,P=e.prompt,R=e.removeIcon,L=e.ribbon,O=e.size,N=e.tag,I=(!0===k?"pointing":("left"===k||"right"===k)&&k+" pointing")||("above"===k||"below"===k)&&"pointing "+k,D=(0,a.Z)("ui",b,I,O,(0,c.lG)(n,"active"),(0,c.lG)(o,"basic"),(0,c.lG)(v,"circular"),(0,c.lG)(S,"empty"),(0,c.lG)(T,"floating"),(0,c.lG)(E,"horizontal"),(0,c.lG)(!0===A,"image"),(0,c.lG)(P,"prompt"),(0,c.lG)(N,"tag"),(0,c.sU)(x,"corner"),(0,c.sU)(L,"ribbon"),(0,c.cD)(i,"attached"),"label",y),F=(0,u.Z)(t,this.props),z=(0,h.Z)(t,this.props);if(!d.kK(p))return l.createElement(z,(0,r.Z)({},F,{className:D,onClick:this.handleClick}),p);var U=(0,s.Z)(R)?"delete":R;return l.createElement(z,(0,r.Z)({className:D,onClick:this.handleClick},F),f.Z.create(M,{autoGenerateKey:!1}),"boolean"!=typeof A&&m.Z.create(A,{autoGenerateKey:!1}),_,g.Z.create(w,{autoGenerateKey:!1}),C&&f.Z.create(U,{autoGenerateKey:!1,overrideProps:this.handleIconOverrides}))},t}(l.Component);y.handledProps=["active","as","attached","basic","children","circular","className","color","content","corner","detail","empty","floating","horizontal","icon","image","onClick","onRemove","pointing","prompt","removeIcon","ribbon","size","tag"],y.propTypes={},y.Detail=g.Z,y.Group=v.Z,y.create=(0,p.u5)(y,(function(e){return{content:e}}))},"8u6/":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)("detail",n),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{content:e}}));const h=u},R1J4:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.circular,h=e.className,d=e.color,p=e.content,f=e.size,m=e.tag,g=(0,i.Z)("ui",d,f,(0,o.lG)(n,"circular"),(0,o.lG)(m,"tag"),"labels",h),v=(0,a.Z)(u,e),y=(0,l.Z)(u,e);return s.createElement(y,(0,r.Z)({},v,{className:g}),c.kK(t)?p:t)}u.handledProps=["as","children","circular","className","color","content","size","tag"],u.propTypes={};const h=u},hML2:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n("H+Tk"),i=n("m290"),s=n("hR+M"),o=n("iGFm"),a=n("Ql6E"),l=n("ynia"),c=n("xShN"),u=n("uXJ5"),h=n("ZbAl"),d=n("aRJ7"),p=n("ygs6"),f=n("ytuU"),m=n("VGhj"),g=n("FGSh"),v=n("6I0D"),y=n("TtpQ"),b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){(0,o.Z)(e,"onClick",n,r),(0,o.Z)(t.props,"onItemClick",n,r)}}},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,n=this.props,i=n.animated,o=n.bulleted,p=n.celled,f=n.children,m=n.className,g=n.content,y=n.divided,b=n.floated,_=n.horizontal,x=n.inverted,w=n.items,S=n.link,T=n.ordered,E=n.relaxed,M=n.selection,A=n.size,C=n.verticalAlign,k=(0,a.Z)("ui",A,(0,c.lG)(i,"animated"),(0,c.lG)(o,"bulleted"),(0,c.lG)(p,"celled"),(0,c.lG)(y,"divided"),(0,c.lG)(_,"horizontal"),(0,c.lG)(x,"inverted"),(0,c.lG)(S,"link"),(0,c.lG)(T,"ordered"),(0,c.lG)(M,"selection"),(0,c.sU)(E,"relaxed"),(0,c.cD)(b,"floated"),(0,c.Ok)(C),"list",m),P=(0,u.Z)(t,this.props),R=(0,h.Z)(t,this.props);return d.kK(f)?d.kK(g)?l.createElement(R,(0,r.Z)({role:"list",className:k},P),(0,s.Z)(w,(function(t){return v.Z.create(t,{overrideProps:e.handleItemOverrides})}))):l.createElement(R,(0,r.Z)({role:"list",className:k},P),g):l.createElement(R,(0,r.Z)({role:"list",className:k},P),f)},t}(l.Component);b.handledProps=["animated","as","bulleted","celled","children","className","content","divided","floated","horizontal","inverted","items","link","onItemClick","ordered","relaxed","selection","size","verticalAlign"],b.propTypes={},b.Content=p.Z,b.Description=f.Z,b.Header=m.Z,b.Icon=g.Z,b.Item=v.Z,b.List=y.Z;const _=b},ygs6:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7"),u=n("EVih"),h=n("ytuU"),d=n("VGhj");function p(e){var t=e.children,n=e.className,u=e.content,f=e.description,m=e.floated,g=e.header,v=e.verticalAlign,y=(0,i.Z)((0,o.cD)(m,"floated"),(0,o.Ok)(v),"content",n),b=(0,a.Z)(p,e),_=(0,l.Z)(p,e);return c.kK(t)?s.createElement(_,(0,r.Z)({},b,{className:y}),d.Z.create(g),h.Z.create(f),u):s.createElement(_,(0,r.Z)({},b,{className:y}),t)}p.handledProps=["as","children","className","content","description","floated","header","verticalAlign"],p.propTypes={},p.create=(0,u.u5)(p,(function(e){return{content:e}}));const f=p},ytuU:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)(n,"description"),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{content:e}}));const h=u},VGhj:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)("header",n),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{content:e}}));const h=u},FGSh:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("EVih"),c=n("35Nk");function u(e){var t=e.className,n=e.verticalAlign,l=(0,i.Z)((0,o.Ok)(n),t),h=(0,a.Z)(u,e);return s.createElement(c.Z,(0,r.Z)({},h,{className:l}))}u.handledProps=["className","verticalAlign"],u.propTypes={},u.create=(0,l.u5)(u,(function(e){return{name:e}}));const h=u},"6I0D":(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n("H+Tk"),i=n("m290"),s=n("2FZd"),o=n("iGFm"),a=n("Ql6E"),l=n("ynia"),c=n("ZbAl"),u=n("xShN"),h=n("uXJ5"),d=n("aRJ7"),p=n("EVih"),f=n("kveA"),m=n("ygs6"),g=n("ytuU"),v=n("VGhj"),y=n("FGSh"),b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||(0,o.Z)(t.props,"onClick",e,t.props)},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.children,o=e.className,p=e.content,b=e.description,_=e.disabled,x=e.header,w=e.icon,S=e.image,T=e.value,E=(0,c.Z)(t,this.props),M=(0,a.Z)((0,u.lG)(n,"active"),(0,u.lG)(_,"disabled"),(0,u.lG)("li"!==E,"item"),o),A=(0,h.Z)(t,this.props),C="li"===E?{value:T}:{"data-value":T};if(!d.kK(i))return l.createElement(E,(0,r.Z)({},C,{role:"listitem",className:M,onClick:this.handleClick},A),i);var k=y.Z.create(w,{autoGenerateKey:!1}),P=f.Z.create(S,{autoGenerateKey:!1});if(!(0,l.isValidElement)(p)&&(0,s.Z)(p))return l.createElement(E,(0,r.Z)({},C,{role:"listitem",className:M,onClick:this.handleClick},A),k||P,m.Z.create(p,{autoGenerateKey:!1,defaultProps:{header:x,description:b}}));var R=v.Z.create(x,{autoGenerateKey:!1}),L=g.Z.create(b,{autoGenerateKey:!1});return k||P?l.createElement(E,(0,r.Z)({},C,{role:"listitem",className:M,onClick:this.handleClick},A),k||P,(p||R||L)&&l.createElement(m.Z,null,R,L,p)):l.createElement(E,(0,r.Z)({},C,{role:"listitem",className:M,onClick:this.handleClick},A),R,L,p)},t}(l.Component);b.handledProps=["active","as","children","className","content","description","disabled","header","icon","image","onClick","value"],b.propTypes={},b.create=(0,p.u5)(b,(function(e){return{content:e}}));const _=b},TtpQ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("xShN"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.content,d=(0,o.Z)(u,e),p=(0,a.Z)(u,e),f=(0,i.Z)((0,l.lG)("ul"!==p&&"ol"!==p,"list"),n);return s.createElement(p,(0,r.Z)({},d,{className:f}),c.kK(t)?h:t)}u.handledProps=["as","children","className","content"],u.propTypes={};const h=u},OcRK:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.active,n=e.children,h=e.className,d=e.content,p=e.disabled,f=e.indeterminate,m=e.inline,g=e.inverted,v=e.size,y=(0,i.Z)("ui",v,(0,o.lG)(t,"active"),(0,o.lG)(p,"disabled"),(0,o.lG)(f,"indeterminate"),(0,o.lG)(g,"inverted"),(0,o.lG)(n||d,"text"),(0,o.sU)(m,"inline"),"loader",h),b=(0,a.Z)(u,e),_=(0,l.Z)(u,e);return s.createElement(_,(0,r.Z)({},b,{className:y}),c.kK(n)?d:n)}u.handledProps=["active","as","children","className","content","disabled","indeterminate","inline","inverted","size"],u.propTypes={};const h=u},"5+SC":(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7"),u=n("HH4G"),h=n("zSPs");function d(e){var t=e.attached,n=e.basic,u=e.children,h=e.circular,p=e.className,f=e.clearing,m=e.color,g=e.compact,v=e.content,y=e.disabled,b=e.floated,_=e.inverted,x=e.loading,w=e.placeholder,S=e.padded,T=e.piled,E=e.raised,M=e.secondary,A=e.size,C=e.stacked,k=e.tertiary,P=e.textAlign,R=e.vertical,L=(0,i.Z)("ui",m,A,(0,o.lG)(n,"basic"),(0,o.lG)(h,"circular"),(0,o.lG)(f,"clearing"),(0,o.lG)(g,"compact"),(0,o.lG)(y,"disabled"),(0,o.lG)(_,"inverted"),(0,o.lG)(x,"loading"),(0,o.lG)(w,"placeholder"),(0,o.lG)(T,"piled"),(0,o.lG)(E,"raised"),(0,o.lG)(M,"secondary"),(0,o.lG)(C,"stacked"),(0,o.lG)(k,"tertiary"),(0,o.lG)(R,"vertical"),(0,o.sU)(t,"attached"),(0,o.sU)(S,"padded"),(0,o.X4)(P),(0,o.cD)(b,"floated"),"segment",p),O=(0,a.Z)(d,e),N=(0,l.Z)(d,e);return s.createElement(N,(0,r.Z)({},O,{className:L}),c.kK(u)?v:u)}d.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],d.Group=u.Z,d.Inline=h.Z,d.propTypes={};const p=d},HH4G:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.compact,d=e.content,p=e.horizontal,f=e.piled,m=e.raised,g=e.size,v=e.stacked,y=(0,i.Z)("ui",g,(0,o.lG)(h,"compact"),(0,o.lG)(p,"horizontal"),(0,o.lG)(f,"piled"),(0,o.lG)(m,"raised"),(0,o.lG)(v,"stacked"),"segments",n),b=(0,a.Z)(u,e),_=(0,l.Z)(u,e);return s.createElement(_,(0,r.Z)({},b,{className:y}),c.kK(t)?d:t)}u.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],u.propTypes={};const h=u},zSPs:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7");function c(e){var t=e.children,n=e.className,u=e.content,h=(0,i.Z)("inline",n),d=(0,o.Z)(c,e),p=(0,a.Z)(c,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?u:t)}c.handledProps=["as","children","className","content"],c.propTypes={};const u=c},jjuz:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Accordion:()=>Mn,AccordionAccordion:()=>Tn,AccordionContent:()=>xn,AccordionPanel:()=>Sn,AccordionTitle:()=>bn,Advertisement:()=>zi,Breadcrumb:()=>je,BreadcrumbDivider:()=>Ge,BreadcrumbSection:()=>Ze,Button:()=>p.Z,ButtonContent:()=>bt.Z,ButtonGroup:()=>_t.Z,ButtonOr:()=>xt.Z,Card:()=>Ui.Z,CardContent:()=>Bi.Z,CardDescription:()=>Vi.Z,CardGroup:()=>Gi.Z,CardHeader:()=>Zi.Z,CardMeta:()=>Hi.Z,Checkbox:()=>An.Z,Comment:()=>ls,CommentAction:()=>Wi,CommentActions:()=>Ki,CommentAuthor:()=>Yi,CommentAvatar:()=>$i,CommentContent:()=>es,CommentGroup:()=>ns,CommentMetadata:()=>is,CommentText:()=>os,Confirm:()=>g,Container:()=>wt.Z,Dimmer:()=>Cn.Z,DimmerDimmable:()=>kn.Z,DimmerInner:()=>Pn.Z,Divider:()=>St.Z,Dropdown:()=>Rn.Z,DropdownDivider:()=>Ln.Z,DropdownHeader:()=>On.Z,DropdownItem:()=>Nn.Z,DropdownMenu:()=>In.Z,DropdownSearchInput:()=>Dn.Z,DropdownText:()=>Fn.Z,Embed:()=>zn,Feed:()=>Cs,FeedContent:()=>ws,FeedDate:()=>us,FeedEvent:()=>Ms,FeedExtra:()=>ds,FeedLabel:()=>Ts,FeedLike:()=>fs,FeedMeta:()=>gs,FeedSummary:()=>_s,FeedUser:()=>ys,Flag:()=>Tt.Z,Form:()=>We.Z,FormButton:()=>qe.Z,FormCheckbox:()=>Ke.Z,FormDropdown:()=>Xe.Z,FormField:()=>Ye.Z,FormGroup:()=>Je.Z,FormInput:()=>$e.Z,FormRadio:()=>Qe.Z,FormSelect:()=>et.Z,FormTextArea:()=>tt.Z,Grid:()=>nt.Z,GridColumn:()=>rt.Z,GridRow:()=>it.Z,Header:()=>Et.Z,HeaderContent:()=>Mt.Z,HeaderSubheader:()=>At.Z,Icon:()=>Be.Z,IconGroup:()=>Ct.Z,Image:()=>kt.Z,ImageGroup:()=>Pt.Z,Input:()=>Rt.Z,Item:()=>Hs,ItemContent:()=>zs,ItemDescription:()=>Ls,ItemExtra:()=>Ns,ItemGroup:()=>Bs,ItemHeader:()=>Ps,ItemImage:()=>Gs,ItemMeta:()=>Ds,Label:()=>Lt.Z,LabelDetail:()=>Ot.Z,LabelGroup:()=>Nt.Z,List:()=>It.Z,ListContent:()=>Dt.Z,ListDescription:()=>Ft.Z,ListHeader:()=>zt.Z,ListIcon:()=>Ut.Z,ListItem:()=>Bt.Z,ListList:()=>Vt.Z,Loader:()=>Gt.Z,Menu:()=>N.Z,MenuHeader:()=>st.Z,MenuItem:()=>z.Z,MenuMenu:()=>ot.Z,Message:()=>at.Z,MessageContent:()=>lt.Z,MessageHeader:()=>ct.Z,MessageItem:()=>ut.Z,MessageList:()=>ht.Z,Modal:()=>f.Z,ModalActions:()=>Un.Z,ModalContent:()=>Bn.Z,ModalDescription:()=>Vn.Z,ModalDimmer:()=>Gn.Z,ModalHeader:()=>Zn.Z,Pagination:()=>V,PaginationItem:()=>B,Placeholder:()=>$t,PlaceholderHeader:()=>Ht,PlaceholderImage:()=>Wt,PlaceholderLine:()=>Kt,PlaceholderParagraph:()=>Yt,Popup:()=>Hn.Z,PopupContent:()=>jn.Z,PopupHeader:()=>Wn.Z,Portal:()=>G.Z,PortalInner:()=>Z.Z,Progress:()=>qn.Z,Radio:()=>H.Z,Rail:()=>en,Rating:()=>tr,RatingIcon:()=>er,Ref:()=>r.R,Reveal:()=>sn,RevealContent:()=>nn,Search:()=>ki,SearchCategory:()=>Si,SearchResult:()=>Ei,SearchResults:()=>Ai,Segment:()=>on.Z,SegmentGroup:()=>an.Z,SegmentInline:()=>ln.Z,Select:()=>j.Z,Sidebar:()=>Pi.Z,SidebarPushable:()=>Ri.Z,SidebarPusher:()=>Li.Z,Statistic:()=>$s,StatisticGroup:()=>Ws,StatisticLabel:()=>Ks,StatisticValue:()=>Ys,Step:()=>yn,StepContent:()=>fn,StepDescription:()=>un,StepGroup:()=>gn,StepTitle:()=>dn,Sticky:()=>Ni,Tab:()=>Ii.Z,TabPane:()=>Di.Z,Table:()=>dt.Z,TableBody:()=>pt.Z,TableCell:()=>ft.Z,TableFooter:()=>mt.Z,TableHeader:()=>gt.Z,TableHeaderCell:()=>vt.Z,TableRow:()=>yt.Z,TextArea:()=>W.Z,Transition:()=>Oe,TransitionGroup:()=>we,TransitionablePortal:()=>Ne,Visibility:()=>ze});var r=n("eGir"),i=n("H+Tk"),s=n("m290"),o=Object.prototype.hasOwnProperty;const a=function(e,t){return null!=e&&o.call(e,t)};var l=n("6H+C");const c=function(e,t){return null!=e&&(0,l.Z)(e,t,a)};var u=n("iGFm"),h=n("ynia"),d=n("uXJ5"),p=n("WUUJ"),f=n("SdTq"),m=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleCancel=function(e){(0,u.Z)(t.props,"onCancel",e,t.props)},t.handleCancelOverrides=function(e){return{onClick:function(n,r){(0,u.Z)(e,"onClick",n,r),t.handleCancel(n)}}},t.handleConfirmOverrides=function(e){return{onClick:function(n,r){(0,u.Z)(e,"onClick",n,r),(0,u.Z)(t.props,"onConfirm",n,t.props)}}},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.cancelButton,r=e.confirmButton,s=e.content,o=e.header,a=e.open,l=e.size,u=(0,d.Z)(t,this.props),m={};return c(this.props,"open")&&(m.open=a),h.createElement(f.Z,(0,i.Z)({},u,m,{size:l,onClose:this.handleCancel}),f.Z.Header.create(o,{autoGenerateKey:!1}),f.Z.Content.create(s,{autoGenerateKey:!1}),h.createElement(f.Z.Actions,null,p.Z.create(n,{autoGenerateKey:!1,overrideProps:this.handleCancelOverrides}),p.Z.create(r,{autoGenerateKey:!1,defaultProps:{primary:!0},overrideProps:this.handleConfirmOverrides})))},t}(h.Component);m.handledProps=["cancelButton","confirmButton","content","header","onCancel","onConfirm","open","size"],m.propTypes={},m.defaultProps={cancelButton:"Cancel",confirmButton:"OK",content:"Are you sure?",size:"small"};const g=m;var v=n("hR+M"),y=n("syBy"),b=function(e){return{active:!1,type:"ellipsisItem",value:e}},_=function(e){return{active:!1,type:"prevItem",value:Math.max(1,e-1)}},x=function(e,t){return{active:!1,type:"nextItem",value:Math.min(e+1,t)}},w=function(e){return{active:!1,type:"lastItem",value:e}},S=Math.ceil,T=Math.max;const E=function(e,t,n,r){for(var i=-1,s=T(S((t-e)/(n||1)),0),o=Array(s);s--;)o[r?s:++i]=e,e+=n;return o};var M=n("MG3Q"),A=n("tbiB");const C=function(e){return function(t,n,r){return r&&"number"!=typeof r&&(0,M.Z)(t,n,r)&&(n=r=void 0),t=(0,A.Z)(t),void 0===n?(n=t,t=0):n=(0,A.Z)(n),r=void 0===r?t<n?1:-1:(0,A.Z)(r),E(t,n,r,e)}}();var k=function(e,t,n){var r=t-1;return(r!==e+1?b:n)(r)},P=function(e,t,n){var r=e+1;return(r!==t-1?b:n)(r)},R=function(e,t,n){return(0,v.Z)(C(e,t+1),n)};const L=function(e){var t,n,r,i={activePage:+(t=e).activePage,boundaryRange:+t.boundaryRange,hideEllipsis:!!t.hideEllipsis,siblingRange:+t.siblingRange,totalPages:+t.totalPages},s=i.activePage,o=i.totalPages,a=function(e){return function(t){return{active:e===t,type:"pageItem",value:t}}}(s),l=(r=(n=i).boundaryRange,1+(n.hideEllipsis?0:2)+2*n.siblingRange+2*r>=n.totalPages?R(1,o,a):function(e,t){var n=e.activePage,r=e.boundaryRange,i=e.hideEllipsis,s=e.siblingRange,o=e.totalPages,a=i?0:1,l=r,c=R(1,l,t),u=o+1-r,h=R(u,o,t),d=Math.min(Math.max(n-s,l+a+1),u-a-2*s-1),p=d+2*s,f=R(d,p,t);return[].concat(c,[!i&&k(l,d,t)],f,[!i&&P(p,u,t)],h).filter(Boolean)}(i,a));return[{active:!1,type:"firstItem",value:1},_(s)].concat(l,[x(s,o),w(o)])};var O=n("Kz5q"),N=n("l9XU"),I=n("paW0"),D=n.n(I),F=n("EVih"),z=n("9QdV"),U=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){(0,u.Z)(t.props,"onClick",e,t.props)},t.handleKeyDown=function(e){(0,u.Z)(t.props,"onKeyDown",e,t.props),D().getCode(e)===D().Enter&&(0,u.Z)(t.props,"onClick",e,t.props)},t.handleOverrides=function(){return{onClick:t.handleClick,onKeyDown:t.handleKeyDown}},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=e.type,r=this.props.disabled||"ellipsisItem"===n;return z.Z.create(this.props,{defaultProps:{active:t,"aria-current":t,"aria-disabled":r,disabled:r,onClick:this.handleClick,onKeyDown:this.handleKeyDown,tabIndex:r?-1:0},overrideProps:this.handleOverrides})},t}(h.Component);U.handledProps=["active","disabled","onClick","onKeyDown","type"],U.propTypes={},U.create=(0,F.u5)(U,(function(e){return{content:e}}));const B=U;var V=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).handleItemClick=function(e,n){var r=n.value;+t.state.activePage!=+r&&(t.setState({activePage:r}),(0,u.Z)(t.props,"onPageChange",e,(0,i.Z)({},t.props,{activePage:r})))},t.handleItemOverrides=function(e,n,r){return function(i){return{active:e,type:n,key:n+"-"+r,onClick:function(e,n){(0,u.Z)(i,"onClick",e,n),"ellipsisItem"!==n.type&&t.handleItemClick(e,n)}}}},t}(0,s.Z)(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{activePage:1}},n.render=function(){var e=this,n=this.props,r=n["aria-label"],s=n.boundaryRange,o=n.disabled,a=n.ellipsisItem,l=n.siblingRange,c=n.totalPages,u=this.state.activePage,p=L({activePage:u,boundaryRange:s,hideEllipsis:(0,y.Z)(a),siblingRange:l,totalPages:c}),f=(0,d.Z)(t,this.props);return h.createElement(N.Z,(0,i.Z)({},f,{"aria-label":r,pagination:!0,role:"navigation"}),(0,v.Z)(p,(function(t){var n=t.active,r=t.type,i=t.value;return B.create(e.props[r],{defaultProps:{content:i,disabled:o,value:i},overrideProps:e.handleItemOverrides(n,r,i)})})))},t}(O.Z);V.handledProps=["activePage","aria-label","boundaryRange","defaultActivePage","disabled","ellipsisItem","firstItem","lastItem","nextItem","onPageChange","pageItem","prevItem","siblingRange","totalPages"],V.propTypes={},V.autoControlledProps=["activePage"],V.defaultProps={"aria-label":"Pagination Navigation",boundaryRange:1,ellipsisItem:"...",firstItem:{"aria-label":"First item",content:"«"},lastItem:{"aria-label":"Last item",content:"»"},nextItem:{"aria-label":"Next item",content:"⟩"},pageItem:{},prevItem:{"aria-label":"Previous item",content:"⟨"},siblingRange:1},V.Item=B;var G=n("Ufck"),Z=n("TY8g"),H=n("0ViD"),j=n("f0+Q"),W=n("8c5/"),q=n("b0ud"),K=n("Li4J"),X=n("7PNb"),Y=n("Ql6E");const J=function(e,t){return"number"==typeof e||"string"==typeof e?e:e[t]};var $=n("Yjeb"),Q=n("ItLR"),ee=n("7lg8"),te=n("Ok/i"),ne=([].concat((0,ee.Z)(te.k),(0,ee.Z)(te.k).map(Number),(0,Q.Z)(te.k)),["browse","browse right","drop","fade","fade up","fade down","fade left","fade right","fly up","fly down","fly left","fly right","horizontal flip","vertical flip","scale","slide up","slide down","slide left","slide right","swing up","swing down","swing left","swing right","zoom"]),re=([].concat(ne,["jiggle","flash","shake","pulse","tada","bounce","glow"]),(0,$.Z)([].concat(["american sign language interpreting","assistive listening systems","audio description","blind","braille","closed captioning","closed captioning outline","deaf","low vision","phone volume","question circle","question circle outline","sign language","tty","universal access","wheelchair"],["angle double down","angle double left","angle double right","angle double up","angle down","angle left","angle right","angle up","arrow alternate circle down","arrow alternate circle down outline","arrow alternate circle left","arrow alternate circle left outline","arrow alternate circle right","arrow alternate circle right outline","arrow alternate circle up","arrow alternate circle up outline","arrow circle down","arrow circle left","arrow circle right","arrow circle up","arrow down","arrow left","arrow right","arrow up","arrows alternate","arrows alternate horizontal","arrows alternate vertical","caret down","caret left","caret right","caret square down","caret square down outline","caret square left","caret square left outline","caret square right","caret square right outline","caret square up","caret square up outline","caret up","cart arrow down","chart line","chevron circle down","chevron circle left","chevron circle right","chevron circle up","chevron down","chevron left","chevron right","chevron up","cloud download","cloud upload","download","exchange","expand arrows alternate","external alternate","external square alternate","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","history","level down alternate","level up alternate","location arrow","long arrow alternate down","long arrow alternate left","long arrow alternate right","long arrow alternate up","mouse pointer","play","random","recycle","redo","redo alternate","reply","reply all","retweet","share","share square","share square outline","sign-in","sign-out","sign-in alternate","sign-out alternate","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","sync","sync alternate","text height","text width","undo","undo alternate","upload","zoom-in","zoom-out"],["audio description","backward","circle","circle outline","closed captioning","closed captioning outline","compress","eject","expand","expand arrows alternate","fast backward","fast forward","file audio","file audio outline","file video","file video outline","film","forward","headphones","microphone","microphone slash","music","pause","pause circle","pause circle outline","phone volume","play","play circle","play circle outline","podcast","random","redo","redo alternate","rss","rss square","step backward","step forward","stop","stop circle","stop circle outline","sync","sync alternate","undo","undo alternate","video","volume down","volume off","volume up"],["address book","address book outline","address card","address card outline","archive","balance scale","birthday cake","book","briefcase","building","building outline","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","certificate","chart area","chart bar","chart bar outline","chart line","chart pie","clipboard","clipboard outline","coffee","columns","compass","compass outline","copy","copy outline","copyright","copyright outline","cut","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","eraser","fax","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","globe","industry","paperclip","paste","pen square","pencil alternate","percent","phone","phone square","phone volume","registered","registered outline","save","save outline","sitemap","sticky note","sticky note outline","suitcase","table","tag","tags","tasks","thumbtack","trademark"],["chess","chess bishop","chess board","chess king","chess knight","chess pawn","chess queen","chess rook","square full"],["archive","barcode","bath","bug","code","code branch","coffee","file","file outline","file alternate","file alternate outline","file code","file code outline","filter","fire extinguisher","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","microchip","qrcode","shield alternate","sitemap","terminal","user secret","window close","window close outline","window maximize","window maximize outline","window minimize","window minimize outline","window restore","window restore outline"],["address book","address book outline","address card","address card outline","american sign language interpreting","assistive listening systems","at","bell","bell outline","bell slash","bell slash outline","bullhorn","comment","comment outline","comment alternate","comment alternate outline","comments","comments outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","fax","inbox","language","microphone","microphone slash","mobile","mobile alternate","paper plane","paper plane outline","phone","phone square","phone volume","rss","rss square","tty","wifi"],["desktop","download","hdd","hdd outline","headphones","keyboard","keyboard outline","laptop","microchip","mobile","mobile alternate","plug","power off","print","save","save outline","server","tablet","tablet alternate","tv","upload"],["dollar sign","euro sign","lira sign","money bill alternate","money bill alternate outline","pound sign","ruble sign","rupee sign","shekel sign","won sign","yen sign"],["bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","clock","clock outline","hourglass","hourglass outline","hourglass end","hourglass half","hourglass start","stopwatch"],["adjust","clone","clone outline","copy","copy outline","crop","crosshairs","cut","edit","edit outline","eraser","eye","eye dropper","eye slash","eye slash outline","object group","object group outline","object ungroup","object ungroup outline","paint brush","paste","pencil alternate","save","save outline","tint"],["align center","align justify","align left","align right","bold","clipboard","clipboard outline","clone","clone outline","columns","copy","copy outline","cut","edit","edit outline","eraser","file","file outline","file alternate","file alternate outline","font","heading","i cursor","indent","italic","linkify","list","list alternate","list alternate outline","list ol","list ul","outdent","paper plane","paper plane outline","paperclip","paragraph","paste","pencil alternate","print","quote left","quote right","redo","redo alternate","reply","reply all","share","strikethrough","subscript","superscript","sync","sync alternate","table","tasks","text height","text width","th","th large","th list","trash","trash alternate","trash alternate outline","underline","undo","undo alternate","unlink"],["archive","clone","clone outline","copy","copy outline","cut","file","file outline","file alternate","file alternate outline","file archive","file archive outline","file audio","file audio outline","file code","file code outline","file excel","file excel outline","file image","file image outline","file pdf","file pdf outline","file powerpoint","file powerpoint outline","file video","file video outline","file word","file word outline","folder","folder outline","folder open","folder open outline","paste","save","save outline","sticky note","sticky note outline"],["genderless","mars","mars double","mars stroke","mars stroke horizontal","mars stroke vertical","mercury","neuter","transgender","transgender alternate","venus","venus double","venus mars"],["hand lizard","hand lizard outline","hand paper","hand paper outline","hand peace","hand peace outline","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","hand rock","hand rock outline","hand scissors","hand scissors outline","hand spock","hand spock outline","handshake","handshake outline","thumbs down","thumbs down outline","thumbs up","thumbs up outline"],["ambulance","h square","heart","heart outline","heartbeat","hospital","hospital outline","medkit","plus square","plus square outline","stethoscope","user md","wheelchair"],["adjust","bolt","camera","camera retro","clone","clone outline","compress","expand","eye","eye dropper","eye slash","eye slash outline","file image","file image outline","film","id badge","id badge outline","id card","id card outline","image","image outline","images","images outline","sliders horizontal","tint"],["ban","barcode","bars","beer","bell","bell outline","bell slash","bell slash outline","bug","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","certificate","check","check circle","check circle outline","check square","check square outline","circle","circle outline","clipboard","clipboard outline","clone","clone outline","cloud","cloud download","cloud upload","coffee","cog","cogs","copy","copy outline","cut","database","dot circle","dot circle outline","download","edit","edit outline","ellipsis horizontal","ellipsis vertical","envelope","envelope outline","envelope open","envelope open outline","eraser","exclamation","exclamation circle","exclamation triangle","external alternate","external square alternate","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","filter","flag","flag outline","flag checkered","folder","folder outline","folder open","folder open outline","frown","frown outline","hashtag","heart","heart outline","history","home","i cursor","info","info circle","language","magic","meh","meh outline","microphone","microphone slash","minus","minus circle","minus square","minus square outline","paste","pencil alternate","plus","plus circle","plus square","plus square outline","qrcode","question","question circle","question circle outline","quote left","quote right","redo","redo alternate","reply","reply all","rss","rss square","save","save outline","search","search minus","search plus","share","share alternate","share alternate square","share square","share square outline","shield alternate","sign-in","sign-out","signal","sitemap","sliders horizontal","smile","smile outline","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","star","star outline","star half","star half outline","sync","sync alternate","thumbs down","thumbs down outline","thumbs up","thumbs up outline","times","times circle","times circle outline","toggle off","toggle on","trash","trash alternate","trash alternate outline","trophy","undo","undo alternate","upload","user","user outline","user circle","user circle outline","wifi"],["box","boxes","clipboard check","clipboard list","dolly","dolly flatbed","pallet","shipping fast","truck","warehouse"],["ambulance","anchor","balance scale","bath","bed","beer","bell","bell outline","bell slash","bell slash outline","bicycle","binoculars","birthday cake","blind","bomb","book","bookmark","bookmark outline","briefcase","building","building outline","car","coffee","crosshairs","dollar sign","eye","eye slash","eye slash outline","fighter jet","fire","fire extinguisher","flag","flag outline","flag checkered","flask","gamepad","gavel","gift","glass martini","globe","graduation cap","h square","heart","heart outline","heartbeat","home","hospital","hospital outline","image","image outline","images","images outline","industry","info","info circle","key","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","location arrow","low vision","magnet","male","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","money bill alternate","money bill alternate outline","motorcycle","music","newspaper","newspaper outline","paw","phone","phone square","phone volume","plane","plug","plus","plus square","plus square outline","print","recycle","road","rocket","search","search minus","search plus","ship","shopping bag","shopping basket","shopping cart","shower","street view","subway","suitcase","tag","tags","taxi","thumbtack","ticket alternate","tint","train","tree","trophy","truck","tty","umbrella","university","utensil spoon","utensils","wheelchair","wifi","wrench"],["ambulance","band aid","dna","first aid","heart","heart outline","heartbeat","hospital","hospital outline","hospital symbol","pills","plus","stethoscope","syringe","thermometer","user md","weight"],["ambulance","anchor","archive","balance scale","bath","bed","beer","bell","bell outline","bicycle","binoculars","birthday cake","bomb","book","bookmark","bookmark outline","briefcase","bug","building","building outline","bullhorn","bullseye","bus","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","camera","camera retro","car","clipboard","clipboard outline","cloud","coffee","cog","cogs","compass","compass outline","copy","copy outline","cube","cubes","cut","envelope","envelope outline","envelope open","envelope open outline","eraser","eye","eye dropper","fax","fighter jet","file","file outline","file alternate","file alternate outline","film","fire","fire extinguisher","flag","flag outline","flag checkered","flask","futbol","futbol outline","gamepad","gavel","gem","gem outline","gift","glass martini","globe","graduation cap","hdd","hdd outline","headphones","heart","heart outline","home","hospital","hospital outline","hourglass","hourglass outline","image","image outline","images","images outline","industry","key","keyboard","keyboard outline","laptop","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","lock","lock open","magic","magnet","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","microchip","microphone","mobile","mobile alternate","money bill alternate","money bill alternate outline","moon","moon outline","motorcycle","newspaper","newspaper outline","paint brush","paper plane","paper plane outline","paperclip","paste","paw","pencil alternate","phone","plane","plug","print","puzzle piece","road","rocket","save","save outline","search","shield alternate","shopping bag","shopping basket","shopping cart","shower","snowflake","snowflake outline","space shuttle","star","star outline","sticky note","sticky note outline","stopwatch","subway","suitcase","sun","sun outline","tablet","tablet alternate","tachometer alternate","tag","tags","taxi","thumbtack","ticket alternate","train","trash","trash alternate","trash alternate outline","tree","trophy","truck","tv","umbrella","university","unlock","unlock alternate","utensil spoon","utensils","wheelchair","wrench"],["bell","bell outline","bookmark","bookmark outline","bullhorn","camera","camera retro","cart arrow down","cart plus","certificate","credit card","credit card outline","gem","gem outline","gift","handshake","handshake outline","heart","heart outline","key","shopping bag","shopping basket","shopping cart","star","star outline","tag","tags","thumbs down","thumbs down outline","thumbs up","thumbs up outline","trophy"],["bookmark","bookmark outline","calendar","calendar outline","certificate","circle","circle outline","cloud","comment","comment outline","file","file outline","folder","folder outline","heart","heart outline","map marker","play","square","square outline","star","star outline"],["asterisk","certificate","circle notch","cog","compass","compass outline","crosshairs","life ring","life ring outline","snowflake","snowflake outline","spinner","sun","sun outline","sync"],["baseball ball","basketball ball","bowling ball","football ball","futbol","futbol outline","golf ball","hockey puck","quidditch","table tennis","volleyball ball"],["ban","battery empty","battery full","battery half","battery quarter","battery three quarters","bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","cart arrow down","cart plus","exclamation","exclamation circle","exclamation triangle","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","info","info circle","lock","lock open","minus","minus circle","minus square","minus square outline","plus","plus circle","plus square","plus square outline","question","question circle","question circle outline","shield alternate","shopping cart","sign in alternate","sign out alternate","thermometer empty","thermometer full","thermometer half","thermometer quarter","thermometer three quarters","thumbs down","thumbs down outline","thumbs up","thumbs up outline","toggle off","toggle on","unlock","unlock alternate"],["address book","address book outline","address card","address card outline","bed","blind","child","female","frown","frown outline","id badge","id badge outline","id card","id card outline","male","meh","meh outline","power off","smile","smile outline","street view","user","user outline","user circle","user circle outline","user md","user plus","user secret","user times","users","wheelchair"],["ambulance","bicycle","bus","car","fighter jet","motorcycle","paper plane","paper plane outline","plane","rocket","ship","shopping cart","space shuttle","subway","taxi","train","truck","wheelchair"],["archive","book","bookmark","bookmark outline","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","eraser","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","newspaper","newspaper outline","paper plane","paper plane outline","paperclip","paragraph","pen square","pencil alternate","quote left","quote right","sticky note","sticky note outline","thumbtack"],["500px","accessible","accusoft","adn","adversal","affiliatetheme","algolia","amazon","amazon pay","amilia","android","angellist","angrycreative","angular","app store","app store ios","apper","apple","apple pay","asymmetrik","audible","autoprefixer","avianex","aviato","aws","bandcamp","behance","behance square","bimobject","bitbucket","bitcoin","bity","black tie","blackberry","blogger","blogger b","bluetooth","bluetooth b","btc","buromobelexperte","buysellads","cc amazon pay","cc amex","cc apple pay","cc diners club","cc discover","cc jcb","cc mastercard","cc paypal","cc stripe","cc visa","centercode","chrome","cloudscale","cloudsmith","cloudversify","codepen","codiepie","connectdevelop","contao","cpanel","creative commons","css3","css3 alternate","cuttlefish","d and d","dashcube","delicious","deploydog","deskpro","deviantart","digg","digital ocean","discord","discourse","dochub","docker","draft2digital","dribbble","dribbble square","dropbox","drupal","dyalog","earlybirds","edge","elementor","ember","empire","envira","erlang","ethereum","etsy","expeditedssl","facebook","facebook f","facebook messenger","facebook square","firefox","first order","firstdraft","flickr","flipboard","fly","font awesome","font awesome alternate","font awesome flag","fonticons","fonticons fi","fort awesome","fort awesome alternate","forumbee","foursquare","free code camp","freebsd","get pocket","gg","gg circle","git","git square","github","github alternate","github square","gitkraken","gitlab","gitter","glide","glide g","gofore","goodreads","goodreads g","google","google drive","google play","google plus","google plus g","google plus square","google wallet","gratipay","grav","gripfire","grunt","gulp","hacker news","hacker news square","hips","hire a helper","hooli","hotjar","houzz","html5","hubspot","imdb","instagram","internet explorer","ioxhost","itunes","itunes note","jenkins","joget","joomla","js","js square","jsfiddle","keycdn","kickstarter","kickstarter k","korvue","laravel","lastfm","lastfm square","leanpub","less","linechat","linkedin","linkedin alternate","linode","linux","lyft","magento","maxcdn","medapps","medium","medium m","medrt","meetup","microsoft","mix","mixcloud","mizuni","modx","monero","napster","nintendo switch","node","node js","npm","ns8","nutritionix","odnoklassniki","odnoklassniki square","opencart","openid","opera","optin monster","osi","page4","pagelines","palfed","patreon","paypal","periscope","phabricator","phoenix framework","php","pied piper","pied piper alternate","pied piper pp","pinterest","pinterest p","pinterest square","playstation","product hunt","pushed","python","qq","quinscape","quora","ravelry","react","rebel","redriver","reddit","reddit alien","reddit square","rendact","renren","replyd","resolving","rocketchat","rockrms","safari","sass","schlix","scribd","searchengin","sellcast","sellsy","servicestack","shirtsinbulk","simplybuilt","sistrix","skyatlas","skype","slack","slack hash","slideshare","snapchat","snapchat ghost","snapchat square","soundcloud","speakap","spotify","stack exchange","stack overflow","staylinked","steam","steam square","steam symbol","sticker mule","strava","stripe","stripe s","studiovinari","stumbleupon","stumbleupon circle","superpowers","supple","telegram","telegram plane","tencent weibo","themeisle","trello","tripadvisor","tumblr","tumblr square","twitch","twitter","twitter square","typo3","uber","uikit","uniregistry","untappd","usb","ussunnah","vaadin","viacoin","viadeo","viadeo square","viber","vimeo","vimeo square","vimeo v","vine","vk","vnv","vuejs","wechat","weibo","weixin","whatsapp","whatsapp square","whmcs","wikipedia w","windows","wordpress","wordpress simple","wpbeginner","wpexplorer","wpforms","xbox","xing","xing square","y combinator","yahoo","yandex","yandex international","yelp","yoast","youtube","youtube square"]))),ie=(0,$.Z)([].concat(re,["chess rock","ordered list","unordered list","user doctor","shield","puzzle","add circle","add square","add to calendar","add to cart","add user","add","alarm mute","alarm","ald","als","announcement","area chart","area graph","arrow down cart","asexual","asl interpreting","asl","assistive listening devices","attach","attention","balance","bar","bathtub","battery four","battery high","battery low","battery one","battery three","battery two","battery zero","birthday","block layout","bluetooth alternative","broken chain","browser","call square","call","cancel","cart","cc","chain","chat","checked calendar","checkmark","circle notched","close","cny","cocktail","commenting","computer","configure","content","deafness","delete calendar","delete","detective","discussions","doctor","dollar","dont","drivers license","dropdown","emergency","envira gallery","erase","eur","euro","eyedropper","factory","favorite","feed","female homosexual","file text","file text outline","find","first aid","fork","game","gay","gbp","google plus circle","google plus official","grab","graduation","grid layout","group","h","hand victory","handicap","hard of hearing","header","help circle","help","heterosexual","hide","hotel","hourglass four","hourglass full","hourglass one","hourglass three","hourglass two","idea","ils","in cart","inr","intergender","intersex","jpy","krw","lab","law","legal","lesbian","lightning","like","line graph","linkedin square","linkify","lira","list layout","magnify","mail forward","mail outline","mail square","mail","male homosexual","man","marker","mars alternate","mars horizontal","mars vertical","microsoft edge","military","ms edge","mute","new pied piper","non binary transgender","numbered list","options","other gender horizontal","other gender vertical","other gender","payment","paypal card","pencil square","photo","picture","pie chart","pie graph","pied piper hat","pin","plus cart","point","pointing down","pointing left","pointing right","pointing up","pound","power cord","power","privacy","r circle","rain","record","refresh","remove circle","remove from calendar","remove user","remove","repeat","rmb","rouble","rub","ruble","rupee","s15","selected radio","send","setting","settings","shekel","sheqel","shipping","shop","shuffle","shutdown","sidebar","signing","signup","sliders","soccer","sort alphabet ascending","sort alphabet descending","sort ascending","sort content ascending","sort content descending","sort descending","sort numeric ascending","sort numeric descending","sound","spy","stripe card","student","talk","target","teletype","television","text cursor","text telephone","theme","thermometer","thumb tack","time","tm","toggle down","toggle left","toggle right","toggle up","translate","travel","treatment","triangle down","triangle left","triangle right","triangle up","try","unhide","unlinkify","unmute","usd","user cancel","user close","user delete","user x","vcard","video camera","video play","volume control phone","wait","warning circle","warning sign","warning","wi-fi","winner","wizard","woman","won","wordpress beginner","wordpress forms","world","write square","x","yen","zip","zoom in","zoom out","zoom","bitbucket square","checkmark box","circle thin","cloud download","cloud upload","compose","conversation","credit card alternative","currency","dashboard","diamond","disk","exchange","external share","external square","external","facebook official","food","hourglass zero","level down","level up","log out","meanpath","money","move","pencil","protect","radio","remove bookmark","resize horizontal","resize vertical","sign in","sign out","spoon","star half empty","star half full","ticket","times rectangle","write","youtube play"])),se=((0,$.Z)([].concat(ie,["left dropdown"])),n("xShN")),oe=n("610m"),ae=n("LYef"),le=n("cKw+"),ce=n("vy2h");const ue=function(e,t){var n={};return t=(0,ce.Z)(t,3),(0,le.Z)(e,(function(e,r,i){(0,ae.Z)(n,r,t(e,r,i))})),n};var he=n("ZbAl"),de=n("SdmQ");const pe=function(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(r,o,n(o),e)}return r};var fe=n("EFuN");const me=function(e,t,n,r){return(0,fe.Z)(e,(function(e,i,s){t(r,e,n(e),s)})),r};var ge=n("ogfy");const ve=function(e,t){return function(n,r){var i=(0,ge.Z)(n)?pe:me,s=t?t():{};return i(n,e,(0,ce.Z)(r,2),s)}}((function(e,t,n){(0,ae.Z)(e,n,t)}));var ye=function(e){return ve((0,de.Z)(h.Children.toArray(e),h.isValidElement),"key")},be=function(e,t,n){return c(n,e)?n[e]:t[e]},_e=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n={},r=function(e,t){var n={},r=[];return(0,oe.Z)((0,ee.Z)(e),(function(e){c(t,e)?r.length&&(n[e]=r,r=[]):r.push(e)})),[n,r]}(e,t),i=r[0],s=r[1];return(0,oe.Z)((0,ee.Z)(t),(function(r){c(i,r)&&(0,oe.Z)(i[r],(function(r){n[r]=be(r,e,t)})),n[r]=be(r,e,t)})),(0,oe.Z)(s,(function(r){n[r]=be(r,e,t)})),n};function xe(e,t,n){void 0===n&&(n={});var r=e.key,i=n,s=i.animation,o=i.directional,a=i.duration,l=i.transitionOnMount,c=void 0!==l&&l,u=i.visible,d=void 0===u||u;return h.createElement(Oe,{animation:s,directional:o,duration:a,key:r,onHide:t,reactKey:r,transitionOnMount:c,visible:d},e)}xe.handledProps=[];var we=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).state={handleOnHide:function(e,n){var r=n.reactKey;t.setState((function(e){var t=(0,i.Z)({},e.children);return delete t[r],{children:t}}))}},t}return(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.animation,r=e.duration,i=e.directional,s=t.children;if(void 0===s)return{children:ue(ye(e.children),(function(e){return xe(e,t.handleOnHide,{animation:n,duration:r,directional:i})}))};var o=ye(e.children),a=_e(s,o);return(0,oe.Z)(a,(function(e,l){var u=c(s,l),d=c(o,l),p=s[l],f=!(0,X.Z)(p,"props.visible");if(!d||u&&!f)if(d||!u||f){var m=p.props,g=m.visible,v=m.transitionOnMount;a[l]=xe(e,t.handleOnHide,{animation:n,duration:r,directional:i,transitionOnMount:v,visible:g})}else a[l]=h.cloneElement(p,{visible:!1});else a[l]=xe(e,t.handleOnHide,{animation:n,duration:r,directional:i,transitionOnMount:!0})})),{children:a}},t.prototype.render=function(){var e=this.state.children,n=(0,he.Z)(t,this.props),r=(0,d.Z)(t,this.props);return h.createElement(n,r,(0,Q.Z)(e))},t}(h.Component);we.handledProps=["animation","as","children","directional","duration"],we.propTypes={},we.defaultProps={as:h.Fragment,animation:"fade",duration:500};var Se,Te,Ee="INITIAL",Me="ENTERED",Ae="ENTERING",Ce="EXITED",ke="EXITING",Pe="UNMOUNTED";var Re=((Se={}).ENTERED="show",Se.EXITED="hide",Se),Le=((Te={}).ENTERING="show",Te.EXITING="hide",Te),Oe=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).state={status:Ee},t.handleStart=function(e){var n=t.props.duration,r=Re[e],i=J(n,r);t.timeoutId=setTimeout((function(){return t.setState({status:e})}),i)},t.updateStatus=function(e){if(e.status!==t.state.status&&(clearTimeout(t.timeoutId),t.state.nextStatus&&t.handleStart(t.state.nextStatus)),!e.animating&&t.state.animating&&(0,u.Z)(t.props,"onStart",null,(0,i.Z)({},t.props,{status:t.state.status})),e.animating&&!t.state.animating){var n=t.state.status===Me?"onShow":"onHide";(0,u.Z)(t.props,"onComplete",null,(0,i.Z)({},t.props,{status:t.state.status})),(0,u.Z)(t.props,n,null,(0,i.Z)({},t.props,{status:t.state.status}))}},t.computeClasses=function(){var e=t.props,n=e.animation,r=e.directional,i=e.children,s=t.state,o=s.animating,a=s.status,l=(0,X.Z)(i,"props.className");return((0,y.Z)(r)?(0,K.Z)(ne,n):r)?(0,Y.Z)(n,l,(0,se.lG)(o,"animating"),(0,se.lG)(a===Ae,"in"),(0,se.lG)(a===ke,"out"),(0,se.lG)(a===Ce,"hidden"),(0,se.lG)(a!==Ce,"visible"),"transition"):(0,Y.Z)(n,l,(0,se.lG)(o,"animating transition"))},t.computeStyle=function(){var e=t.props,n=e.children,r=e.duration,s=t.state.status,o=(0,X.Z)(n,"props.style"),a=Le[s],l=a&&J(r,a)+"ms";return(0,i.Z)({},o,{animationDuration:l})},t}(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return function(e){var t=e.mountOnShow,n=e.status,r=e.transitionOnMount,i=e.visible,s=e.unmountOnHide;if(i){if(n===Ee)return r?{animating:!0,status:Ae,nextStatus:Me}:{animating:!1,status:Me,nextStatus:void 0};if(n===Pe)return{animating:!0,status:Ae,nextStatus:Me};if(n===Ce||n===ke)return{animating:!0,status:Ae,nextStatus:Me};if(n===Ae)return{};if(n===Me)return{animating:!1,status:Me,nextStatus:void 0}}if(n===Ee)return t||s?{animating:!1,status:Pe,nextStatus:void 0}:{animating:!1,status:Ce,nextStatus:void 0};if(n===Me||n===Ae)return{animating:!0,status:ke,nextStatus:s?Pe:Ce};if(n===ke)return{};if(n===Ce)return{animating:!1,status:Ce,nextStatus:void 0};if(n===Pe)return{animating:!1,status:Pe,nextStatus:void 0};throw new Error("Transition:computeStatuses(): an unexpected status transition: { visible: "+i+", status: "+n+" }")}({mountOnShow:e.mountOnShow,status:t.status,transitionOnMount:e.transitionOnMount,visible:e.visible,unmountOnHide:e.unmountOnHide})};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus({})},n.componentDidUpdate=function(e,t){this.updateStatus(t)},n.componentWillUnmount=function(){clearTimeout(this.timeoutId)},n.render=function(){var e=this.props.children;return this.state.status===Pe?null:(0,h.cloneElement)(e,{className:this.computeClasses(),style:this.computeStyle()})},t}(h.Component);Oe.INITIAL=Ee,Oe.ENTERED=Me,Oe.ENTERING=Ae,Oe.EXITED=Ce,Oe.EXITING=ke,Oe.UNMOUNTED=Pe,Oe.Group=we,Oe.handledProps=["animation","children","directional","duration","mountOnShow","onComplete","onHide","onShow","onStart","reactKey","transitionOnMount","unmountOnHide","visible"],Oe.propTypes={},Oe.defaultProps={animation:"fade",duration:500,visible:!0,mountOnShow:!0,transitionOnMount:!1,unmountOnHide:!1};var Ne=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).state={},t.handlePortalClose=function(){t.setState({portalOpen:-1})},t.handlePortalOpen=function(){t.setState({portalOpen:!0})},t.handleTransitionHide=function(e,n){var r=t.state.portalOpen;t.setState({transitionVisible:!1}),(0,u.Z)(t.props,"onClose",null,(0,i.Z)({},n,{portalOpen:!1,transitionVisible:!1})),(0,u.Z)(t.props,"onHide",null,(0,i.Z)({},n,{portalOpen:r,transitionVisible:!1}))},t.handleTransitionStart=function(e,n){var r=t.state.portalOpen,s=n.status===Ae;(0,u.Z)(t.props,"onStart",null,(0,i.Z)({},n,{portalOpen:r,transitionVisible:s})),s&&(t.setState({transitionVisible:s}),(0,u.Z)(t.props,"onOpen",null,(0,i.Z)({},n,{transitionVisible:s,portalOpen:!0})))},t}return(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){return-1===t.portalOpen?{portalOpen:!1}:(0,q.Z)(e.open)?null:{portalOpen:e.open}},t.prototype.render=function(){var e=this.props,n=e.children,r=e.transition,s=this.state,o=s.portalOpen,a=s.transitionVisible,l=o||a,c=(0,d.Z)(t,this.props);return h.createElement(G.Z,(0,i.Z)({},c,{open:l,onOpen:this.handlePortalOpen,onClose:this.handlePortalClose}),h.createElement(Oe,(0,i.Z)({},r,{transitionOnMount:!0,onStart:this.handleTransitionStart,onHide:this.handleTransitionHide,visible:o}),n))},t}(h.Component);Ne.handledProps=["children","onClose","onHide","onOpen","onStart","open","transition"],Ne.propTypes={},Ne.defaultProps={transition:{animation:"scale",duration:400}};var Ie=n("PVtX"),De=n("jZHH"),Fe=n("GfR4");var ze=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).calculations={bottomPassed:!1,bottomVisible:!1,fits:!1,passing:!1,offScreen:!1,onScreen:!1,topPassed:!1,topVisible:!1},t.firedCallbacks=[],t.ref=(0,h.createRef)(),t.fire=function(e,n,r){var i=e.callback,s=e.name;void 0===r&&(r=!1);var o=t.props,a=o.continuous,l=o.once,c=t.calculations[n]!==r,u=a||t.calculations[n]!==t.oldCalculations[n];c&&u&&t.execute(i,s),l||(t.firedCallbacks=(0,Ie.Z)(t.firedCallbacks,s))},t.handleUpdate=function(){t.ticking||(t.ticking=!0,t.frameId=requestAnimationFrame(t.update))},t.update=function(){if(t.mounted){t.ticking=!1,t.oldCalculations=t.calculations,t.calculations=t.computeCalculations(),t.pageYOffset=t.getPageYOffset();var e=t.props,n=e.onBottomPassed,r=e.onBottomPassedReverse,s=e.onBottomVisible,o=e.onBottomVisibleReverse,a=e.onPassing,l=e.onPassingReverse,c=e.onTopPassed,h=e.onTopPassedReverse,d=e.onTopVisible,p=e.onTopVisibleReverse,f=e.onOffScreen,m=e.onOnScreen,g=e.updateOn,v={bottomPassed:{callback:n,name:"onBottomPassed"},bottomVisible:{callback:s,name:"onBottomVisible"},passing:{callback:a,name:"onPassing"},offScreen:{callback:f,name:"onOffScreen"},onScreen:{callback:m,name:"onOnScreen"},topPassed:{callback:c,name:"onTopPassed"},topVisible:{callback:d,name:"onTopVisible"}},y={bottomPassed:{callback:r,name:"onBottomPassedReverse"},bottomVisible:{callback:o,name:"onBottomVisibleReverse"},passing:{callback:l,name:"onPassingReverse"},topPassed:{callback:h,name:"onTopPassedReverse"},topVisible:{callback:p,name:"onTopVisibleReverse"}};(0,u.Z)(t.props,"onUpdate",null,(0,i.Z)({},t.props,{calculations:t.calculations})),t.fireOnPassed(),(0,oe.Z)(y,(function(e,n){return t.fire(e,n,!0)})),(0,oe.Z)(v,(function(e,n){return t.fire(e,n)})),"repaint"===g&&t.handleUpdate()}},t}(0,s.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){if(this.mounted=!0,(0,De.Z)()){var e=this.props,t=e.context,n=e.fireOnMount,r=e.updateOn;this.pageYOffset=this.getPageYOffset(),this.attachHandlers(t,r),n&&this.update()}},n.componentDidUpdate=function(e){(e.continuous!==this.props.continuous||e.once!==this.props.once||e.updateOn!==this.props.updateOn)&&(this.firedCallbacks=[]),e.context===this.props.context&&e.updateOn===this.props.updateOn||(this.unattachHandlers(e.context),this.attachHandlers(this.props.context,this.props.updateOn))},n.componentWillUnmount=function(){var e=this.props.context;this.unattachHandlers(e),this.mounted=!1},n.attachHandlers=function(e,t){"events"!==t?this.handleUpdate():e&&(Fe.Z.sub("resize",this.handleUpdate,{target:e}),Fe.Z.sub("scroll",this.handleUpdate,{target:e}))},n.unattachHandlers=function(e){e&&(Fe.Z.unsub("resize",this.handleUpdate,{target:e}),Fe.Z.unsub("scroll",this.handleUpdate,{target:e})),this.frameId&&cancelAnimationFrame(this.frameId)},n.execute=function(e,t){var n=this.props.continuous;e&&(!n&&(0,K.Z)(this.firedCallbacks,t)||(e(null,(0,i.Z)({},this.props,{calculations:this.calculations})),this.firedCallbacks.push(t)))},n.fireOnPassed=function(){var e=this,t=this.calculations,n=t.percentagePassed,r=t.pixelsPassed,i=this.props.onPassed;(0,oe.Z)(i,(function(t,i){var s=Number(i);if(s&&r>=s)e.execute(t,i);else{var o=(""+i).match(/^(\d+)%$/);if(o){var a=Number(o[1])/100;n>=a&&e.execute(t,i)}}}))},n.computeCalculations=function(){var e,t=this.props.offset,n=this.ref.current.getBoundingClientRect(),r=n.bottom,i=n.height,s=n.top,o=n.width,a="number"==typeof(e=t)||"string"==typeof e?[e,e]:e,l=a[0],c=a[1],u=this.getPageYOffset()>this.pageYOffset?"down":"up",h=s<l,d=r<c,p=d?0:Math.max(-1*s,0),f=p/i,m=r>=c&&r<=window.innerHeight,g=s>=l&&s<=window.innerHeight,v=(g||h)&&!d;return{bottomPassed:d,bottomVisible:m,direction:u,fits:g&&m,height:i,passing:h&&!d,percentagePassed:f,pixelsPassed:p,offScreen:!v,onScreen:v,topPassed:h,topVisible:g,width:o}},n.getPageYOffset=function(){var e=this.props.context;return e?e===window?window.pageYOffset:e.scrollTop:0},n.render=function(){var e=this.props.children,n=(0,he.Z)(t,this.props),i=(0,d.Z)(t,this.props);return h.createElement(r.R,{innerRef:this.ref},h.createElement(n,i,e))},t}(h.Component);ze.handledProps=["as","children","context","continuous","fireOnMount","offset","onBottomPassed","onBottomPassedReverse","onBottomVisible","onBottomVisibleReverse","onOffScreen","onOnScreen","onPassed","onPassing","onPassingReverse","onTopPassed","onTopPassedReverse","onTopVisible","onTopVisibleReverse","onUpdate","once","updateOn"],ze.propTypes={},ze.defaultProps={context:(0,De.Z)()?window:null,continuous:!1,offset:[0,0],once:!0,updateOn:"events"};var Ue=n("aRJ7"),Be=n("35Nk");function Ve(e){var t=e.children,n=e.className,r=e.content,s=e.icon,o=(0,Y.Z)("divider",n),a=(0,d.Z)(Ve,e),l=(0,he.Z)(Ve,e);return(0,y.Z)(s)?(0,y.Z)(r)?h.createElement(l,(0,i.Z)({},a,{className:o}),Ue.kK(t)?"/":t):h.createElement(l,(0,i.Z)({},a,{className:o}),r):Be.Z.create(s,{defaultProps:(0,i.Z)({},a,{className:o}),autoGenerateKey:!1})}Ve.handledProps=["as","children","className","content","icon"],Ve.propTypes={},Ve.create=(0,F.u5)(Ve,(function(e){return{icon:e}}));const Ge=Ve;var Ze=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).computeElementType=function(){var e=t.props,n=e.link,r=e.onClick;if(n||r)return"a"},t.handleClick=function(e){return(0,u.Z)(t.props,"onClick",e,t.props)},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,s=e.className,o=e.content,a=e.href,l=(0,Y.Z)((0,se.lG)(n,"active"),"section",s),c=(0,d.Z)(t,this.props),u=(0,he.Z)(t,this.props,this.computeElementType);return h.createElement(u,(0,i.Z)({},c,{className:l,href:a,onClick:this.handleClick}),Ue.kK(r)?o:r)},t}(h.Component);function He(e){var t=e.children,n=e.className,r=e.divider,s=e.icon,o=e.sections,a=e.size,l=(0,Y.Z)("ui",a,"breadcrumb",n),c=(0,d.Z)(He,e),u=(0,he.Z)(He,e);if(!Ue.kK(t))return h.createElement(u,(0,i.Z)({},c,{className:l}),t);var p=[];return(0,oe.Z)(o,(function(e,t){var n=Ze.create(e);if(p.push(n),t!==o.length-1){var i=n.key+"_divider"||0;p.push(Ge.create({content:r,icon:s,key:i}))}})),h.createElement(u,(0,i.Z)({},c,{className:l}),p)}Ze.handledProps=["active","as","children","className","content","href","link","onClick"],Ze.propTypes={},Ze.create=(0,F.u5)(Ze,(function(e){return{content:e,link:!0}})),He.handledProps=["as","children","className","divider","icon","sections","size"],He.propTypes={},He.Divider=Ge,He.Section=Ze;const je=He;var We=n("wi9p"),qe=n("7yIm"),Ke=n("U0DR"),Xe=n("4sVK"),Ye=n("enhD"),Je=n("fEDD"),$e=n("+1VN"),Qe=n("1Ajs"),et=n("JQQo"),tt=n("RWbT"),nt=n("fbB6"),rt=n("NBfC"),it=n("iBv2"),st=n("Cx4+"),ot=n("cu7Q"),at=n("g3Zx"),lt=n("TvzP"),ct=n("nu+r"),ut=n("QXrj"),ht=n("f1ut"),dt=n("c9HL"),pt=n("bXQf"),ft=n("Nnjl"),mt=n("FaoA"),gt=n("Jo3q"),vt=n("OH8T"),yt=n("/YOV"),bt=n("Dqsk"),_t=n("zT60"),xt=n("K03a"),wt=n("Uh+m"),St=n("/d6T"),Tt=n("lcYd"),Et=n("21rH"),Mt=n("THR5"),At=n("S8ik"),Ct=n("GT6m"),kt=n("kveA"),Pt=n("gL7d"),Rt=n("a49q"),Lt=n("sfx3"),Ot=n("8u6/"),Nt=n("R1J4"),It=n("hML2"),Dt=n("ygs6"),Ft=n("ytuU"),zt=n("VGhj"),Ut=n("FGSh"),Bt=n("6I0D"),Vt=n("TtpQ"),Gt=n("OcRK");function Zt(e){var t=e.children,n=e.className,r=e.content,s=e.image,o=(0,Y.Z)((0,se.lG)(s,"image"),"header",n),a=(0,d.Z)(Zt,e),l=(0,he.Z)(Zt,e);return h.createElement(l,(0,i.Z)({},a,{className:o}),Ue.kK(t)?r:t)}Zt.handledProps=["as","children","className","content","image"],Zt.propTypes={};const Ht=Zt;function jt(e){var t=e.className,n=e.square,r=e.rectangular,s=(0,Y.Z)((0,se.lG)(n,"square"),(0,se.lG)(r,"rectangular"),"image",t),o=(0,d.Z)(jt,e),a=(0,he.Z)(jt,e);return h.createElement(a,(0,i.Z)({},o,{className:s}))}jt.handledProps=["as","className","rectangular","square"],jt.propTypes={};const Wt=jt;function qt(e){var t=e.className,n=e.length,r=(0,Y.Z)("line",n,t),s=(0,d.Z)(qt,e),o=(0,he.Z)(qt,e);return h.createElement(o,(0,i.Z)({},s,{className:r}))}qt.handledProps=["as","className","length"],qt.propTypes={};const Kt=qt;function Xt(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("paragraph",n),o=(0,d.Z)(Xt,e),a=(0,he.Z)(Xt,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}Xt.handledProps=["as","children","className","content"],Xt.propTypes={};const Yt=Xt;function Jt(e){var t=e.children,n=e.className,r=e.content,s=e.fluid,o=e.inverted,a=(0,Y.Z)("ui",(0,se.lG)(s,"fluid"),(0,se.lG)(o,"inverted"),"placeholder",n),l=(0,d.Z)(Jt,e),c=(0,he.Z)(Jt,e);return h.createElement(c,(0,i.Z)({},l,{className:a}),Ue.kK(t)?r:t)}Jt.handledProps=["as","children","className","content","fluid","inverted"],Jt.propTypes={},Jt.Header=Ht,Jt.Image=Wt,Jt.Line=Kt,Jt.Paragraph=Yt;const $t=Jt;function Qt(e){var t=e.attached,n=e.children,r=e.className,s=e.close,o=e.content,a=e.dividing,l=e.internal,c=e.position,u=e.size,p=(0,Y.Z)("ui",c,u,(0,se.lG)(t,"attached"),(0,se.lG)(a,"dividing"),(0,se.lG)(l,"internal"),(0,se.sU)(s,"close"),"rail",r),f=(0,d.Z)(Qt,e),m=(0,he.Z)(Qt,e);return h.createElement(m,(0,i.Z)({},f,{className:p}),Ue.kK(n)?o:n)}Qt.handledProps=["as","attached","children","className","close","content","dividing","internal","position","size"],Qt.propTypes={};const en=Qt;function tn(e){var t=e.children,n=e.className,r=e.content,s=e.hidden,o=e.visible,a=(0,Y.Z)("ui",(0,se.lG)(s,"hidden"),(0,se.lG)(o,"visible"),"content",n),l=(0,d.Z)(tn,e),c=(0,he.Z)(tn,e);return h.createElement(c,(0,i.Z)({},l,{className:a}),Ue.kK(t)?r:t)}tn.handledProps=["as","children","className","content","hidden","visible"],tn.propTypes={};const nn=tn;function rn(e){var t=e.active,n=e.animated,r=e.children,s=e.className,o=e.content,a=e.disabled,l=e.instant,c=(0,Y.Z)("ui",n,(0,se.lG)(t,"active"),(0,se.lG)(a,"disabled"),(0,se.lG)(l,"instant"),"reveal",s),u=(0,d.Z)(rn,e),p=(0,he.Z)(rn,e);return h.createElement(p,(0,i.Z)({},u,{className:c}),Ue.kK(r)?o:r)}rn.handledProps=["active","animated","as","children","className","content","disabled","instant"],rn.propTypes={},rn.Content=nn;const sn=rn;var on=n("5+SC"),an=n("HH4G"),ln=n("zSPs");function cn(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("description",n),o=(0,d.Z)(cn,e),a=(0,he.Z)(cn,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}cn.handledProps=["as","children","className","content"],cn.propTypes={},cn.create=(0,F.u5)(cn,(function(e){return{content:e}}));const un=cn;function hn(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("title",n),o=(0,d.Z)(hn,e),a=(0,he.Z)(hn,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}hn.handledProps=["as","children","className","content"],hn.propTypes={},hn.create=(0,F.u5)(hn,(function(e){return{content:e}}));const dn=hn;function pn(e){var t=e.children,n=e.className,r=e.content,s=e.description,o=e.title,a=(0,Y.Z)("content",n),l=(0,d.Z)(pn,e),c=(0,he.Z)(pn,e);return Ue.kK(t)?Ue.kK(r)?h.createElement(c,(0,i.Z)({},l,{className:a}),dn.create(o,{autoGenerateKey:!1}),un.create(s,{autoGenerateKey:!1})):h.createElement(c,(0,i.Z)({},l,{className:a}),r):h.createElement(c,(0,i.Z)({},l,{className:a}),t)}pn.handledProps=["as","children","className","content","description","title"],pn.propTypes={},pn.create=(0,F.u5)(pn,(function(e){return{content:e}}));const fn=pn;function mn(e){var t=e.attached,n=e.children,r=e.className,s=e.content,o=e.fluid,a=e.items,l=e.ordered,c=e.size,u=e.stackable,p=e.unstackable,f=e.vertical,m=e.widths,g=(0,Y.Z)("ui",c,(0,se.lG)(o,"fluid"),(0,se.lG)(l,"ordered"),(0,se.lG)(p,"unstackable"),(0,se.lG)(f,"vertical"),(0,se.sU)(t,"attached"),(0,se.cD)(u,"stackable"),(0,se.H0)(m),"steps",r),y=(0,d.Z)(mn,e),b=(0,he.Z)(mn,e);return Ue.kK(n)?Ue.kK(s)?h.createElement(b,(0,i.Z)({},y,{className:g}),(0,v.Z)(a,(function(e){return yn.create(e)}))):h.createElement(b,(0,i.Z)({},y,{className:g}),s):h.createElement(b,(0,i.Z)({},y,{className:g}),n)}mn.handledProps=["as","attached","children","className","content","fluid","items","ordered","size","stackable","unstackable","vertical","widths"],mn.propTypes={};const gn=mn;var vn=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).computeElementType=function(){if(t.props.onClick)return"a"},t.handleClick=function(e){t.props.disabled||(0,u.Z)(t.props,"onClick",e,t.props)},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,s=e.className,o=e.completed,a=e.content,l=e.description,c=e.disabled,u=e.href,p=e.icon,f=e.link,m=e.title,g=(0,Y.Z)((0,se.lG)(n,"active"),(0,se.lG)(o,"completed"),(0,se.lG)(c,"disabled"),(0,se.lG)(f,"link"),"step",s),v=(0,d.Z)(t,this.props),y=(0,he.Z)(t,this.props,this.computeElementType);return Ue.kK(r)?Ue.kK(a)?h.createElement(y,(0,i.Z)({},v,{className:g,href:u,onClick:this.handleClick}),Be.Z.create(p,{autoGenerateKey:!1}),fn.create({description:l,title:m},{autoGenerateKey:!1})):h.createElement(y,(0,i.Z)({},v,{className:g,href:u,onClick:this.handleClick}),a):h.createElement(y,(0,i.Z)({},v,{className:g,href:u,onClick:this.handleClick}),r)},t}(h.Component);vn.handledProps=["active","as","children","className","completed","content","description","disabled","href","icon","link","onClick","ordered","title"],vn.propTypes={},vn.Content=fn,vn.Description=un,vn.Group=gn,vn.Title=dn,vn.create=(0,F.u5)(vn,(function(e){return{content:e}}));const yn=vn;var bn=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){return(0,u.Z)(t.props,"onClick",e,t.props)},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.children,s=e.className,o=e.content,a=e.icon,l=(0,Y.Z)((0,se.lG)(n,"active"),"title",s),c=(0,d.Z)(t,this.props),u=(0,he.Z)(t,this.props),p=(0,y.Z)(a)?"dropdown":a;return Ue.kK(r)?h.createElement(u,(0,i.Z)({},c,{className:l,onClick:this.handleClick}),Be.Z.create(p,{autoGenerateKey:!1}),o):h.createElement(u,(0,i.Z)({},c,{className:l,onClick:this.handleClick}),r)},t}(h.Component);function _n(e){var t=e.active,n=e.children,r=e.className,s=e.content,o=(0,Y.Z)("content",(0,se.lG)(t,"active"),r),a=(0,d.Z)(_n,e),l=(0,he.Z)(_n,e);return h.createElement(l,(0,i.Z)({},a,{className:o}),Ue.kK(n)?s:n)}bn.handledProps=["active","as","children","className","content","icon","index","onClick"],bn.propTypes={},bn.create=(0,F.u5)(bn,(function(e){return{content:e}})),_n.handledProps=["active","as","children","className","content"],_n.propTypes={},_n.create=(0,F.u5)(_n,(function(e){return{content:e}}));const xn=_n;var wn=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleTitleOverrides=function(e){return{onClick:function(n,r){(0,u.Z)(e,"onClick",n,r),(0,u.Z)(t.props,"onTitleClick",n,r)}}},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=e.content,r=e.index,i=e.title;return h.createElement(h.Fragment,null,bn.create(i,{autoGenerateKey:!1,defaultProps:{active:t,index:r},overrideProps:this.handleTitleOverrides}),xn.create(n,{autoGenerateKey:!1,defaultProps:{active:t}}))},t}(h.Component);wn.handledProps=["active","content","index","onTitleClick","title"],wn.propTypes={},wn.create=(0,F.u5)(wn,null);const Sn=wn;var Tn=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).computeNewIndex=function(e){var n=t.props.exclusive,r=t.state.activeIndex;return n?e===r?-1:e:(0,K.Z)(r,e)?(0,Ie.Z)(r,e):[].concat(r,[e])},t.handleTitleClick=function(e,n){var r=n.index;t.setState({activeIndex:t.computeNewIndex(r)}),(0,u.Z)(t.props,"onTitleClick",e,n)},t.isIndexActive=function(e){var n=t.props.exclusive,r=t.state.activeIndex;return n?r===e:(0,K.Z)(r,e)},t}(0,s.Z)(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(e){return{activeIndex:e.exclusive?-1:[]}},n.componentDidMount=function(){0},n.componentDidUpdate=function(){0},n.render=function(){var e=this,n=this.props,r=n.className,s=n.children,o=n.panels,a=(0,Y.Z)("accordion",r),l=(0,d.Z)(t,this.props),c=(0,he.Z)(t,this.props);return h.createElement(c,(0,i.Z)({},l,{className:a}),Ue.kK(s)?(0,v.Z)(o,(function(t,n){return Sn.create(t,{defaultProps:{active:e.isIndexActive(n),index:n,onTitleClick:e.handleTitleClick}})})):s)},t}(O.Z);function En(e){var t=e.className,n=e.fluid,r=e.inverted,s=e.styled,o=(0,Y.Z)("ui",(0,se.lG)(n,"fluid"),(0,se.lG)(r,"inverted"),(0,se.lG)(s,"styled"),t),a=(0,d.Z)(En,e);return h.createElement(Tn,(0,i.Z)({},a,{className:o}))}Tn.handledProps=["activeIndex","as","children","className","defaultActiveIndex","exclusive","onTitleClick","panels"],Tn.propTypes={},Tn.defaultProps={exclusive:!0},Tn.autoControlledProps=["activeIndex"],Tn.create=(0,F.u5)(Tn,(function(e){return{content:e}})),En.handledProps=["className","fluid","inverted","styled"],En.propTypes={},En.Accordion=Tn,En.Content=xn,En.Panel=Sn,En.Title=bn;const Mn=En;var An=n("3GrG"),Cn=n("vIwQ"),kn=n("CukA"),Pn=n("wDxM"),Rn=n("scvP"),Ln=n("h1MN"),On=n("5gOd"),Nn=n("VsRH"),In=n("3RWJ"),Dn=n("W1O1"),Fn=n("y7kI"),zn=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick,r=t.state.active;n&&n(e,(0,i.Z)({},t.props,{active:!0})),r||t.setState({active:!0})},t}(0,s.Z)(t,e);var n=t.prototype;return n.getSrc=function(){var e=this.props,t=e.autoplay,n=void 0===t||t,r=e.brandedUI,i=void 0!==r&&r,s=e.color,o=void 0===s?"#444444":s,a=e.hd,l=void 0===a||a,c=e.id,u=e.source,h=e.url;return"youtube"===u?["//www.youtube.com/embed/"+c,"?autohide=true","&amp;autoplay="+n,"&amp;color="+encodeURIComponent(o),"&amp;hq="+l,"&amp;jsapi=false","&amp;modestbranding="+i,"&amp;rel="+(i?0:1)].join(""):"vimeo"===u?["//player.vimeo.com/video/"+c,"?api=false","&amp;autoplay="+n,"&amp;byline=false","&amp;color="+encodeURIComponent(o),"&amp;portrait=false","&amp;title=false"].join(""):h},n.render=function(){var e=this.props,n=e.aspectRatio,r=e.className,s=e.icon,o=e.placeholder,a=this.state.active,l=(0,Y.Z)("ui",n,(0,se.lG)(a,"active"),"embed",r),c=(0,d.Z)(t,this.props),u=(0,he.Z)(t,this.props),p=void 0!==s?s:"video play";return h.createElement(u,(0,i.Z)({},c,{className:l,onClick:this.handleClick}),Be.Z.create(p,{autoGenerateKey:!1}),o&&h.createElement("img",{className:"placeholder",src:o}),this.renderEmbed())},n.renderEmbed=function(){var e=this.props,t=e.children,n=e.content,r=e.iframe,i=e.source;return this.state.active?Ue.kK(t)?Ue.kK(n)?h.createElement("div",{className:"embed"},(0,F.PI)(Ue.kK(r)?this.getSrc():r,{defaultProps:{allowFullScreen:!1,frameBorder:0,height:"100%",scrolling:"no",src:this.getSrc(),title:"Embedded content from "+i+".",width:"100%"},autoGenerateKey:!1})):h.createElement("div",{className:"embed"},n):h.createElement("div",{className:"embed"},t):null},t}(O.Z);zn.handledProps=["active","as","aspectRatio","autoplay","brandedUI","children","className","color","content","defaultActive","hd","icon","id","iframe","onClick","placeholder","source","url"],zn.propTypes={},zn.autoControlledProps=["active"];var Un=n("VKwM"),Bn=n("VJtu"),Vn=n("bjJY"),Gn=n("84uS"),Zn=n("WXA6"),Hn=n("9EQt"),jn=n("1+qn"),Wn=n("0CiP"),qn=n("+2B3"),Kn=n("iXuf"),Xn=n("chsa"),Yn=n("Z8k3"),Jn=4294967295,$n=Math.min;const Qn=function(e,t){if((e=(0,Yn.Z)(e))<1||e>9007199254740991)return[];var n=Jn,r=$n(e,Jn);t=(0,Xn.Z)(t),e-=Jn;for(var i=(0,Kn.Z)(r,t);++n<e;)t(n);return i};var er=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){(0,u.Z)(t.props,"onClick",e,t.props)},t.handleKeyUp=function(e){switch((0,u.Z)(t.props,"onKeyUp",e,t.props),D().getCode(e)){case D().Enter:case D().Spacebar:e.preventDefault(),(0,u.Z)(t.props,"onClick",e,t.props)}},t.handleMouseEnter=function(e){(0,u.Z)(t.props,"onMouseEnter",e,t.props)},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.className,s=e.selected,o=(0,Y.Z)((0,se.lG)(n,"active"),(0,se.lG)(s,"selected"),"icon",r),a=(0,d.Z)(t,this.props),l=(0,he.Z)(t,this.props);return h.createElement(l,(0,i.Z)({},a,{className:o,onClick:this.handleClick,onKeyUp:this.handleKeyUp,onMouseEnter:this.handleMouseEnter,role:"radio"}))},t}(h.Component);er.handledProps=["active","as","className","index","onClick","onKeyUp","onMouseEnter","selected"],er.propTypes={},er.defaultProps={as:"i"};var tr=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).handleIconClick=function(e,n){var r=n.index,s=t.props,o=s.clearable,a=s.disabled,l=s.maxRating,c=s.onRate,u=t.state.rating;if(!a){var h=r+1;"auto"===o&&1===l?h=+!u:!0===o&&h===u&&(h=0),t.setState({rating:h,isSelecting:!1}),c&&c(e,(0,i.Z)({},t.props,{rating:h}))}},t.handleIconMouseEnter=function(e,n){var r=n.index;t.props.disabled||t.setState({selectedIndex:r,isSelecting:!0})},t.handleMouseLeave=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];u.Z.apply(void 0,[t.props,"onMouseLeave"].concat(n)),t.props.disabled||t.setState({selectedIndex:-1,isSelecting:!1})},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this,n=this.props,r=n.className,s=n.disabled,o=n.icon,a=n.maxRating,l=n.size,c=this.state,u=c.rating,p=c.selectedIndex,f=c.isSelecting,m=(0,Y.Z)("ui",o,l,(0,se.lG)(s,"disabled"),(0,se.lG)(f&&!s&&p>=0,"selected"),"rating",r),g=(0,d.Z)(t,this.props),v=(0,he.Z)(t,this.props);return h.createElement(v,(0,i.Z)({},g,{className:m,role:"radiogroup",onMouseLeave:this.handleMouseLeave,tabIndex:s?0:-1}),Qn(a,(function(t){return h.createElement(er,{tabIndex:s?-1:0,active:u>=t+1,"aria-checked":u===t+1,"aria-posinset":t+1,"aria-setsize":a,index:t,key:t,onClick:e.handleIconClick,onMouseEnter:e.handleIconMouseEnter,selected:p>=t&&f})})))},t}(O.Z);tr.handledProps=["as","className","clearable","defaultRating","disabled","icon","maxRating","onRate","rating","size"],tr.propTypes={},tr.autoControlledProps=["rating"],tr.defaultProps={clearable:"auto",maxRating:1},tr.Icon=er;var nr=n("D1ci"),rr=n("QYiU"),ir=n("eboQ"),sr=n("b24R"),or=n("QG8a");const ar=or.Z&&new or.Z;const lr=ar?function(e,t){return ar.set(e,t),e}:sr.Z;var cr=n("jaNM"),ur=Object.create;const hr=function(){function e(){}return function(t){if(!(0,cr.Z)(t))return{};if(ur)return ur(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const dr=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=hr(e.prototype),r=e.apply(n,t);return(0,cr.Z)(r)?r:n}};var pr=n("tcvG");const fr=function(e,t,n){var r=1&t,i=dr(e);return function t(){var s=this&&this!==pr.Z&&this instanceof t?i:e;return s.apply(r?n:this,arguments)}};var mr=n("XULC"),gr=Math.max;const vr=function(e,t,n,r){for(var i=-1,s=e.length,o=n.length,a=-1,l=t.length,c=gr(s-o,0),u=Array(l+c),h=!r;++a<l;)u[a]=t[a];for(;++i<o;)(h||i<s)&&(u[n[i]]=e[i]);for(;c--;)u[a++]=e[i++];return u};var yr=Math.max;const br=function(e,t,n,r){for(var i=-1,s=e.length,o=-1,a=n.length,l=-1,c=t.length,u=yr(s-a,0),h=Array(u+c),d=!r;++i<u;)h[i]=e[i];for(var p=i;++l<c;)h[p+l]=t[l];for(;++o<a;)(d||i<s)&&(h[p+n[o]]=e[i++]);return h};const _r=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};const xr=function(){};function wr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}wr.prototype=hr(xr.prototype),wr.prototype.constructor=wr;const Sr=wr;var Tr=n("wzju");const Er=ar?function(e){return ar.get(e)}:Tr.Z;const Mr={};var Ar=Object.prototype.hasOwnProperty;const Cr=function(e){for(var t=e.name+"",n=Mr[t],r=Ar.call(Mr,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t};function kr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}kr.prototype=hr(xr.prototype),kr.prototype.constructor=kr;const Pr=kr;var Rr=n("2Nik");const Lr=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};const Or=function(e){if(e instanceof Sr)return e.clone();var t=new Pr(e.__wrapped__,e.__chain__);return t.__actions__=Lr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t};var Nr=Object.prototype.hasOwnProperty;function Ir(e){if((0,Rr.Z)(e)&&!(0,ge.Z)(e)&&!(e instanceof Sr)){if(e instanceof Pr)return e;if(Nr.call(e,"__wrapped__"))return Or(e)}return new Pr(e)}Ir.prototype=xr.prototype,Ir.prototype.constructor=Ir;const Dr=Ir;const Fr=function(e){var t=Cr(e),n=Dr[t];if("function"!=typeof n||!(t in Sr.prototype))return!1;if(e===n)return!0;var r=Er(n);return!!r&&e===r[0]};const zr=(0,n("ORNN").Z)(lr);var Ur=/\{\n\/\* \[wrapped with (.+)\] \*/,Br=/,? & /;const Vr=function(e){var t=e.match(Ur);return t?t[1].split(Br):[]};var Gr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;const Zr=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Gr,"{\n/* [wrapped with "+t+"] */\n")};var Hr=n("+AB3"),jr=n("o/qU"),Wr=n("YLbS"),qr=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];const Kr=function(e,t){return(0,jr.Z)(qr,(function(n){var r="_."+n[0];t&n[1]&&!(0,Wr.Z)(e,r)&&e.push(r)})),e.sort()};const Xr=function(e,t,n){var r=t+"";return(0,Hr.Z)(e,Zr(r,Kr(Vr(r),n)))};const Yr=function(e,t,n,r,i,s,o,a,l,c){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var h=[e,t,i,u?s:void 0,u?o:void 0,u?void 0:s,u?void 0:o,a,l,c],d=n.apply(void 0,h);return Fr(e)&&zr(d,h),d.placeholder=r,Xr(d,e,t)};const Jr=function(e){return e.placeholder};var $r=n("z5B3"),Qr=Math.min;const ei=function(e,t){for(var n=e.length,r=Qr(t.length,n),i=Lr(e);r--;){var s=t[r];e[r]=(0,$r.Z)(s,n)?i[s]:void 0}return e};var ti="__lodash_placeholder__";const ni=function(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var o=e[n];o!==t&&o!==ti||(e[n]=ti,s[i++]=n)}return s};const ri=function e(t,n,r,i,s,o,a,l,c,u){var h=128&n,d=1&n,p=2&n,f=24&n,m=512&n,g=p?void 0:dr(t);return function v(){for(var y=arguments.length,b=Array(y),_=y;_--;)b[_]=arguments[_];if(f)var x=Jr(v),w=_r(b,x);if(i&&(b=vr(b,i,s,f)),o&&(b=br(b,o,a,f)),y-=w,f&&y<u){var S=ni(b,x);return Yr(t,n,e,v.placeholder,r,b,S,l,c,u-y)}var T=d?r:this,E=p?T[t]:t;return y=b.length,l?b=ei(b,l):m&&y>1&&b.reverse(),h&&c<y&&(b.length=c),this&&this!==pr.Z&&this instanceof v&&(E=g||dr(E)),E.apply(T,b)}};const ii=function(e,t,n){var r=dr(e);return function i(){for(var s=arguments.length,o=Array(s),a=s,l=Jr(i);a--;)o[a]=arguments[a];var c=s<3&&o[0]!==l&&o[s-1]!==l?[]:ni(o,l);if((s-=c.length)<n)return Yr(e,t,ri,i.placeholder,void 0,o,c,void 0,void 0,n-s);var u=this&&this!==pr.Z&&this instanceof i?r:e;return(0,mr.Z)(u,this,o)}};const si=function(e,t,n,r){var i=1&t,s=dr(e);return function t(){for(var o=-1,a=arguments.length,l=-1,c=r.length,u=Array(c+a),h=this&&this!==pr.Z&&this instanceof t?s:e;++l<c;)u[l]=r[l];for(;a--;)u[l++]=arguments[++o];return(0,mr.Z)(h,i?n:this,u)}};var oi="__lodash_placeholder__",ai=128,li=Math.min;const ci=function(e,t){var n=e[1],r=t[1],i=n|r,s=i<131,o=r==ai&&8==n||r==ai&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var a=t[3];if(a){var l=e[3];e[3]=l?vr(l,a,t[4]):a,e[4]=l?ni(e[3],oi):t[4]}return(a=t[5])&&(l=e[5],e[5]=l?br(l,a,t[6]):a,e[6]=l?ni(e[5],oi):t[6]),(a=t[7])&&(e[7]=a),r&ai&&(e[8]=null==e[8]?t[8]:li(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e};var ui=Math.max;const hi=function(e,t,n,r,i,s,o,a){var l=2&t;if(!l&&"function"!=typeof e)throw new TypeError("Expected a function");var c=r?r.length:0;if(c||(t&=-97,r=i=void 0),o=void 0===o?o:ui((0,Yn.Z)(o),0),a=void 0===a?a:(0,Yn.Z)(a),c-=i?i.length:0,64&t){var u=r,h=i;r=i=void 0}var d=l?void 0:Er(e),p=[e,t,n,r,i,u,h,s,o,a];if(d&&ci(p,d),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],!(a=p[9]=void 0===p[9]?l?0:e.length:ui(p[9]-c,0))&&24&t&&(t&=-25),t&&1!=t)f=8==t||16==t?ii(e,t,a):32!=t&&33!=t||i.length?ri.apply(void 0,p):si(e,t,n,r);else var f=fr(e,t,n);return Xr((d?lr:zr)(f,p),e,t)};var di=(0,ir.Z)((function(e,t){var n=ni(t,Jr(di));return hi(e,64,void 0,t,n)}));di.placeholder={};const pi=di;var fi=n("M9TG"),mi=n("Nwlo"),gi=n("2FZd"),vi=n("/iLt"),yi=n.n(vi),bi=n("wogc");function _i(e){var t=e.categoryContent,n=e.resultsContent;return h.createElement(h.Fragment,null,h.createElement("div",{className:"name"},t),h.createElement("div",{className:"results"},n))}_i.handledProps=["categoryContent","resultsContent"],_i.propTypes={};const xi=_i;function wi(e){var t=e.active,n=e.children,r=e.className,s=e.content,o=e.layoutRenderer,a=e.renderer,l=(0,Y.Z)((0,se.lG)(t,"active"),"category",r),c=(0,d.Z)(wi,e),u=(0,he.Z)(wi,e),p=a(e),f=Ue.kK(n)?s:n;return h.createElement(u,(0,i.Z)({},c,{className:l}),o({categoryContent:p,resultsContent:f}))}wi.handledProps=["active","as","children","className","content","layoutRenderer","name","renderer","results"],wi.defaultProps={layoutRenderer:xi,renderer:function(e){return e.name}},wi.propTypes={};const Si=wi;var Ti=function(e){var t=e.image,n=e.price,r=e.title,i=e.description;return[t&&h.createElement("div",{key:"image",className:"image"},(0,F.Ff)(t,{autoGenerateKey:!1})),h.createElement("div",{key:"content",className:"content"},n&&h.createElement("div",{className:"price"},n),r&&h.createElement("div",{className:"title"},r),i&&h.createElement("div",{className:"description"},i))]};Ti.handledProps=[];var Ei=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return(0,s.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,r=e.className,s=e.renderer,o=(0,Y.Z)((0,se.lG)(n,"active"),"result",r),a=(0,d.Z)(t,this.props),l=(0,he.Z)(t,this.props);return h.createElement(l,(0,i.Z)({},a,{className:o,onClick:this.handleClick}),s(this.props))},t}(h.Component);function Mi(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("results transition",n),o=(0,d.Z)(Mi,e),a=(0,he.Z)(Mi,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}Ei.handledProps=["active","as","className","content","description","id","image","onClick","price","renderer","title"],Ei.propTypes={},Ei.defaultProps={renderer:Ti},Mi.handledProps=["as","children","className","content"],Mi.propTypes={};const Ai=Mi;var Ci=function(e){var t=e.input;return(0,q.Z)(t)?(0,i.Z)({},e,{input:{className:"prompt"}}):(0,gi.Z)(t)?(0,i.Z)({},e,{input:(0,i.Z)({},t,{className:(0,Y.Z)(t.className,"prompt")})}):e},ki=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).handleResultSelect=function(e,n){(0,u.Z)(t.props,"onResultSelect",e,(0,i.Z)({},t.props,{result:n}))},t.handleSelectionChange=function(e){var n=t.getSelectedResult();(0,u.Z)(t.props,"onSelectionChange",e,(0,i.Z)({},t.props,{result:n}))},t.closeOnEscape=function(e){D().getCode(e)===D().Escape&&(e.preventDefault(),t.close())},t.moveSelectionOnKeyDown=function(e){switch(D().getCode(e)){case D().ArrowDown:e.preventDefault(),t.moveSelectionBy(e,1);break;case D().ArrowUp:e.preventDefault(),t.moveSelectionBy(e,-1)}},t.selectItemOnEnter=function(e){if(D().getCode(e)===D().Enter){var n=t.getSelectedResult();n&&(e.preventDefault(),t.setValue(n.title),t.handleResultSelect(e,n),t.close())}},t.closeOnDocumentClick=function(e){t.close()},t.handleMouseDown=function(e){t.isMouseDown=!0,(0,u.Z)(t.props,"onMouseDown",e,t.props),Fe.Z.sub("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,Fe.Z.unsub("mouseup",t.handleDocumentMouseUp)},t.handleInputClick=function(e){e.nativeEvent.stopImmediatePropagation(),t.tryOpen()},t.handleItemClick=function(e,n){var r=n.id,i=t.getSelectedResult(r);e.nativeEvent.stopImmediatePropagation(),t.setValue(i.title),t.handleResultSelect(e,i),t.close()},t.handleItemMouseDown=function(e){e.preventDefault()},t.handleFocus=function(e){(0,u.Z)(t.props,"onFocus",e,t.props),t.setState({focus:!0})},t.handleBlur=function(e){(0,u.Z)(t.props,"onBlur",e,t.props),t.setState({focus:!1})},t.handleSearchChange=function(e){e.stopPropagation();var n=t.props.minCharacters,r=t.state.open,s=e.target.value;(0,u.Z)(t.props,"onSearchChange",e,(0,i.Z)({},t.props,{value:s})),s.length<n?t.close():r||t.tryOpen(s),t.setValue(s)},t.getFlattenedResults=function(){var e=t.props,n=e.category,r=e.results;return n?(0,mi.Z)(r,(function(e,t){return e.concat(t.results)}),[]):r},t.getSelectedResult=function(e){void 0===e&&(e=t.state.selectedIndex);var n=t.getFlattenedResults();return(0,X.Z)(n,e)},t.setValue=function(e){var n=t.props.selectFirstResult;t.setState({value:e,selectedIndex:n?0:-1})},t.moveSelectionBy=function(e,n){var r=t.state.selectedIndex,i=t.getFlattenedResults().length-1,s=r+n;s>i?s=0:s<0&&(s=i),t.setState({selectedIndex:s}),t.scrollSelectedItemIntoView(),t.handleSelectionChange(e)},t.scrollSelectedItemIntoView=function(){if((0,De.Z)()){var e=document.querySelector(".ui.search.active.visible .results.visible");if(e){var t=e.querySelector(".result.active");if(t){var n=t.offsetTop<e.scrollTop,r=t.offsetTop+t.clientHeight>e.scrollTop+e.clientHeight;n?e.scrollTop=t.offsetTop:r&&(e.scrollTop=t.offsetTop+t.clientHeight-e.clientHeight)}}}},t.tryOpen=function(e){void 0===e&&(e=t.state.value);var n=t.props.minCharacters;e.length<n||t.open()},t.open=function(){t.setState({open:!0})},t.close=function(){t.setState({open:!1})},t.renderSearchInput=function(e){var n=t.props,r=n.icon,s=n.input,o=n.placeholder,a=t.state.value;return Rt.Z.create(s,{autoGenerateKey:!1,defaultProps:(0,i.Z)({},e,{autoComplete:"off",icon:r,onChange:t.handleSearchChange,onClick:t.handleInputClick,tabIndex:"0",value:a,placeholder:o}),overrideProps:Ci})},t.renderNoResults=function(){var e=t.props,n=e.noResultsDescription,r=e.noResultsMessage;return h.createElement("div",{className:"message empty"},h.createElement("div",{className:"header"},r),n&&h.createElement("div",{className:"description"},n))},t.renderResult=function(e,n,r,s){var o=e.childKey,a=(0,nr.Z)(e,["childKey"]);void 0===s&&(s=0);var l=t.props.resultRenderer,c=t.state.selectedIndex,u=n+s;return h.createElement(Ei,(0,i.Z)({key:null!=o?o:a.id||a.title,active:c===u,onClick:t.handleItemClick,onMouseDown:t.handleItemMouseDown,renderer:l},a,{id:u}))},t.renderResults=function(){var e=t.props.results;return(0,v.Z)(e,t.renderResult)},t.renderCategories=function(){var e=t.props,n=e.categoryLayoutRenderer,r=e.categoryRenderer,s=e.results,o=t.state.selectedIndex,a=0;return(0,v.Z)(s,(function(e){var s=e.childKey,l=(0,nr.Z)(e,["childKey"]),c=(0,i.Z)({key:null!=s?s:l.name,active:(0,fi.Z)(o,a,a+l.results.length),layoutRenderer:n,renderer:r},l),u=pi(t.renderResult,a);return a+=l.results.length,h.createElement(Si,c,l.results.map(u))}))},t.renderMenuContent=function(){var e=t.props,n=e.category,r=e.showNoResults,i=e.results;return(0,rr.Z)(i)?r?t.renderNoResults():null:n?t.renderCategories():t.renderResults()},t.renderResultsMenu=function(){var e=t.state.open?"visible":"",n=t.renderMenuContent();if(n)return h.createElement(Ai,{className:e},n)},t}(0,s.Z)(t,e),t.getAutoControlledStateFromProps=function(e,t){if(void 0!==t.prevValue&&yi()(t.prevValue,t.value))return{prevValue:t.value};var n=e.selectFirstResult?0:-1;return{prevValue:t.value,selectedIndex:n}};var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!yi()(e,this.props)||!yi()(t,this.state)},n.componentDidUpdate=function(e,t){!t.focus&&this.state.focus?(this.isMouseDown||this.tryOpen(),this.state.open&&Fe.Z.sub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.focus&&!this.state.focus&&(this.isMouseDown||this.close(),Fe.Z.unsub("keydown",[this.moveSelectionOnKeyDown,this.selectItemOnEnter])),!t.open&&this.state.open?(this.open(),Fe.Z.sub("click",this.closeOnDocumentClick),Fe.Z.sub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])):t.open&&!this.state.open&&(this.close(),Fe.Z.unsub("click",this.closeOnDocumentClick),Fe.Z.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter]))},n.componentWillUnmount=function(){Fe.Z.unsub("click",this.closeOnDocumentClick),Fe.Z.unsub("keydown",[this.closeOnEscape,this.moveSelectionOnKeyDown,this.selectItemOnEnter])},n.render=function(){var e=this.state,n=e.searchClasses,r=e.focus,s=e.open,o=this.props,a=o.aligned,l=o.category,c=o.className,u=o.fluid,p=o.loading,f=o.size,m=(0,Y.Z)("ui",s&&"active visible",f,n,(0,se.lG)(l,"category"),(0,se.lG)(r,"focus"),(0,se.lG)(u,"fluid"),(0,se.lG)(p,"loading"),(0,se.cD)(a,"aligned"),"search",c),g=(0,d.Z)(t,this.props),v=(0,he.Z)(t,this.props),y=(0,bi.vR)(g,{htmlProps:bi._l}),b=y[0],_=y[1];return h.createElement(v,(0,i.Z)({},_,{className:m,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown}),this.renderSearchInput(b),this.renderResultsMenu())},t}(O.Z);ki.handledProps=["aligned","as","category","categoryLayoutRenderer","categoryRenderer","className","defaultOpen","defaultValue","fluid","icon","input","loading","minCharacters","noResultsDescription","noResultsMessage","onBlur","onFocus","onMouseDown","onResultSelect","onSearchChange","onSelectionChange","open","placeholder","resultRenderer","results","selectFirstResult","showNoResults","size","value"],ki.propTypes={},ki.defaultProps={icon:"search",input:"text",minCharacters:1,noResultsMessage:"No results found.",showNoResults:!0},ki.autoControlledProps=["open","value"],ki.Category=Si,ki.Result=Ei,ki.Results=Ai;var Pi=n("BUbn"),Ri=n("SZCj"),Li=n("6qAj"),Oi=n("KJe+"),Ni=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={active:!0,sticky:!1},t.stickyRef=(0,h.createRef)(),t.triggerRef=(0,h.createRef)(),t.addListeners=function(e){var n=(0,Oi.I)(e)?e.current:e;n&&(Fe.Z.sub("resize",t.handleUpdate,{target:n}),Fe.Z.sub("scroll",t.handleUpdate,{target:n}))},t.removeListeners=function(e){var n=(0,Oi.I)(e)?e.current:e;n&&(Fe.Z.unsub("resize",t.handleUpdate,{target:n}),Fe.Z.unsub("scroll",t.handleUpdate,{target:n}))},t.update=function(e){var n=t.state.pushing;if(t.ticking=!1,t.assignRects(),n)return t.didReachStartingPoint()?t.stickToContextTop(e):t.didTouchScreenBottom()?t.stickToScreenBottom(e):t.stickToContextBottom(e);if(t.isOversized()){if(t.contextRect.top>0)return t.stickToContextTop(e);if(t.contextRect.bottom<window.innerHeight)return t.stickToContextBottom(e)}return t.didTouchScreenTop()?t.didReachContextBottom()?t.stickToContextBottom(e):t.stickToScreenTop(e):t.stickToContextTop(e)},t.handleUpdate=function(e){t.ticking||(t.ticking=!0,t.frameId=requestAnimationFrame((function(){return t.update(e)})))},t.assignRects=function(){var e=t.props.context,n=(0,Oi.I)(e)?e.current:e||document.body;t.triggerRect=t.triggerRef.current.getBoundingClientRect(),t.contextRect=n.getBoundingClientRect(),t.stickyRect=t.stickyRef.current.getBoundingClientRect()},t.didReachContextBottom=function(){var e=t.props.offset;return t.stickyRect.height+e>=t.contextRect.bottom},t.didReachStartingPoint=function(){return t.stickyRect.top<=t.triggerRect.top},t.didTouchScreenTop=function(){return t.triggerRect.top<t.props.offset},t.didTouchScreenBottom=function(){var e=t.props.bottomOffset;return t.contextRect.bottom+e>window.innerHeight},t.isOversized=function(){return t.stickyRect.height>window.innerHeight},t.pushing=function(e){t.props.pushing&&t.setState({pushing:e})},t.stick=function(e,n){t.setState({bound:n,sticky:!0}),(0,u.Z)(t.props,"onStick",e,t.props)},t.unstick=function(e,n){t.setState({bound:n,sticky:!1}),(0,u.Z)(t.props,"onUnstick",e,t.props)},t.stickToContextBottom=function(e){(0,u.Z)(t.props,"onBottom",e,t.props),t.stick(e,!0),t.pushing(!0)},t.stickToContextTop=function(e){(0,u.Z)(t.props,"onTop",e,t.props),t.unstick(e,!1),t.pushing(!1)},t.stickToScreenBottom=function(e){var n=t.props.bottomOffset;t.stick(e,!1),t.setState({bottom:n,top:null})},t.stickToScreenTop=function(e){var n=t.props.offset;t.stick(e,!1),t.setState({top:n,bottom:null})},t}(0,s.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){(0,De.Z)()&&(this.state.active&&(this.handleUpdate(),this.addListeners(this.props.scrollContext)))},t.getDerivedStateFromProps=function(e,t){return t.active===e.active||e.active?{active:e.active}:{active:e.active,sticky:!1}},n.componentDidUpdate=function(e,t){if(t.active!==this.state.active)return this.state.active?(this.handleUpdate(),void this.addListeners(this.props.scrollContext)):void this.removeListeners(e.scrollContext);e.scrollContext!==this.props.scrollContext&&(this.removeListeners(e.scrollContext),this.addListeners(this.props.scrollContext))},n.componentWillUnmount=function(){(0,De.Z)()&&(this.state.active&&(this.removeListeners(this.props.scrollContext),cancelAnimationFrame(this.frameId)))},n.computeStyle=function(){var e=this.props.styleElement,t=this.state,n=t.bottom,r=t.bound,s=t.sticky,o=t.top;return s?(0,i.Z)({bottom:r?0:n,top:r?void 0:o,width:this.triggerRect.width},e):e},n.render=function(){var e=this.props,n=e.children,r=e.className,s=this.state,o=s.bottom,a=s.bound,l=s.sticky,c=(0,d.Z)(t,this.props),u=(0,he.Z)(t,this.props),p=(0,Y.Z)(l&&"ui",l&&"stuck-container",l&&(a?"bound-container":"fixed-container"),r),f=(0,Y.Z)("ui",l&&(a?"bound bottom":"fixed"),l&&!a&&(null===o?"top":"bottom"),"sticky"),m=l&&this.stickyRect?{height:this.stickyRect.height}:{};return h.createElement(u,(0,i.Z)({},c,{className:p}),h.createElement("div",{ref:this.triggerRef,style:m}),h.createElement("div",{className:f,ref:this.stickyRef,style:this.computeStyle()},n))},t}(h.Component);Ni.handledProps=["active","as","bottomOffset","children","className","context","offset","onBottom","onStick","onTop","onUnstick","pushing","scrollContext","styleElement"],Ni.propTypes={},Ni.defaultProps={active:!0,bottomOffset:0,offset:0,scrollContext:(0,De.Z)()?window:null};var Ii=n("vrEI"),Di=n("7Nnq");function Fi(e){var t=e.centered,n=e.children,r=e.className,s=e.content,o=e.test,a=e.unit,l=(0,Y.Z)("ui",a,(0,se.lG)(t,"centered"),(0,se.lG)(o,"test"),"ad",r),c=(0,d.Z)(Fi,e),u=(0,he.Z)(Fi,e);return h.createElement(u,(0,i.Z)({},c,{className:l,"data-text":o}),Ue.kK(n)?s:n)}Fi.handledProps=["as","centered","children","className","content","test","unit"],Fi.propTypes={};const zi=Fi;var Ui=n("ajfJ"),Bi=n("KK6n"),Vi=n("kRN1"),Gi=n("ycV5"),Zi=n("x9vA"),Hi=n("+0xv");function ji(e){var t=e.active,n=e.className,r=e.children,s=e.content,o=(0,Y.Z)((0,se.lG)(t,"active"),n),a=(0,d.Z)(ji,e),l=(0,he.Z)(ji,e);return h.createElement(l,(0,i.Z)({},a,{className:o}),Ue.kK(r)?s:r)}ji.handledProps=["active","as","children","className","content"],ji.defaultProps={as:"a"},ji.propTypes={};const Wi=ji;function qi(e){var t=e.className,n=e.children,r=e.content,s=(0,Y.Z)("actions",t),o=(0,d.Z)(qi,e),a=(0,he.Z)(qi,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(n)?r:n)}qi.handledProps=["as","children","className","content"],qi.propTypes={};const Ki=qi;function Xi(e){var t=e.className,n=e.children,r=e.content,s=(0,Y.Z)("author",t),o=(0,d.Z)(Xi,e),a=(0,he.Z)(Xi,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(n)?r:n)}Xi.handledProps=["as","children","className","content"],Xi.propTypes={};const Yi=Xi;function Ji(e){var t=e.className,n=e.src,r=(0,Y.Z)("avatar",t),s=(0,d.Z)(Ji,e),o=(0,bi.vR)(s,{htmlProps:bi.K2}),a=o[0],l=o[1],c=(0,he.Z)(Ji,e);return h.createElement(c,(0,i.Z)({},l,{className:r}),(0,F.Ff)(n,{autoGenerateKey:!1,defaultProps:a}))}Ji.handledProps=["as","className","src"],Ji.propTypes={};const $i=Ji;function Qi(e){var t=e.className,n=e.children,r=e.content,s=(0,Y.Z)(t,"content"),o=(0,d.Z)(Qi,e),a=(0,he.Z)(Qi,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(n)?r:n)}Qi.handledProps=["as","children","className","content"],Qi.propTypes={};const es=Qi;function ts(e){var t=e.className,n=e.children,r=e.collapsed,s=e.content,o=e.minimal,a=e.size,l=e.threaded,c=(0,Y.Z)("ui",a,(0,se.lG)(r,"collapsed"),(0,se.lG)(o,"minimal"),(0,se.lG)(l,"threaded"),"comments",t),u=(0,d.Z)(ts,e),p=(0,he.Z)(ts,e);return h.createElement(p,(0,i.Z)({},u,{className:c}),Ue.kK(n)?s:n)}ts.handledProps=["as","children","className","collapsed","content","minimal","size","threaded"],ts.propTypes={};const ns=ts;function rs(e){var t=e.className,n=e.children,r=e.content,s=(0,Y.Z)("metadata",t),o=(0,d.Z)(rs,e),a=(0,he.Z)(rs,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(n)?r:n)}rs.handledProps=["as","children","className","content"],rs.propTypes={};const is=rs;function ss(e){var t=e.className,n=e.children,r=e.content,s=(0,Y.Z)(t,"text"),o=(0,d.Z)(ss,e),a=(0,he.Z)(ss,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(n)?r:n)}ss.handledProps=["as","children","className","content"],ss.propTypes={};const os=ss;function as(e){var t=e.className,n=e.children,r=e.collapsed,s=e.content,o=(0,Y.Z)((0,se.lG)(r,"collapsed"),"comment",t),a=(0,d.Z)(as,e),l=(0,he.Z)(as,e);return h.createElement(l,(0,i.Z)({},a,{className:o}),Ue.kK(n)?s:n)}as.handledProps=["as","children","className","collapsed","content"],as.propTypes={},as.Author=Yi,as.Action=Wi,as.Actions=Ki,as.Avatar=$i,as.Content=es,as.Group=ns,as.Metadata=is,as.Text=os;const ls=as;function cs(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("date",n),o=(0,d.Z)(cs,e),a=(0,he.Z)(cs,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}cs.handledProps=["as","children","className","content"],cs.propTypes={};const us=cs;function hs(e){var t=e.children,n=e.className,r=e.content,s=e.images,o=e.text,a=(0,Y.Z)((0,se.lG)(s,"images"),(0,se.lG)(r||o,"text"),"extra",n),l=(0,d.Z)(hs,e),c=(0,he.Z)(hs,e);if(!Ue.kK(t))return h.createElement(c,(0,i.Z)({},l,{className:a}),t);var u=(0,v.Z)(s,(function(e,t){var n=[t,e].join("-");return(0,F.Ff)(e,{key:n})}));return h.createElement(c,(0,i.Z)({},l,{className:a}),r,u)}hs.handledProps=["as","children","className","content","images","text"],hs.propTypes={};const ds=hs;function ps(e){var t=e.children,n=e.className,r=e.content,s=e.icon,o=(0,Y.Z)("like",n),a=(0,d.Z)(ps,e),l=(0,he.Z)(ps,e);return Ue.kK(t)?h.createElement(l,(0,i.Z)({},a,{className:o}),Be.Z.create(s,{autoGenerateKey:!1}),r):h.createElement(l,(0,i.Z)({},a,{className:o}),t)}ps.handledProps=["as","children","className","content","icon"],ps.defaultProps={as:"a"},ps.propTypes={};const fs=ps;function ms(e){var t=e.children,n=e.className,r=e.content,s=e.like,o=(0,Y.Z)("meta",n),a=(0,d.Z)(ms,e),l=(0,he.Z)(ms,e);return Ue.kK(t)?h.createElement(l,(0,i.Z)({},a,{className:o}),(0,F.Go)(fs,(function(e){return{content:e}}),s,{autoGenerateKey:!1}),r):h.createElement(l,(0,i.Z)({},a,{className:o}),t)}ms.handledProps=["as","children","className","content","like"],ms.propTypes={};const gs=ms;function vs(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("user",n),o=(0,d.Z)(vs,e),a=(0,he.Z)(vs,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}vs.handledProps=["as","children","className","content"],vs.propTypes={},vs.defaultProps={as:"a"};const ys=vs;function bs(e){var t=e.children,n=e.className,r=e.content,s=e.date,o=e.user,a=(0,Y.Z)("summary",n),l=(0,d.Z)(bs,e),c=(0,he.Z)(bs,e);return Ue.kK(t)?h.createElement(c,(0,i.Z)({},l,{className:a}),(0,F.Go)(ys,(function(e){return{content:e}}),o,{autoGenerateKey:!1}),r&&" ",r,r&&" ",(0,F.Go)(us,(function(e){return{content:e}}),s,{autoGenerateKey:!1})):h.createElement(c,(0,i.Z)({},l,{className:a}),t)}bs.handledProps=["as","children","className","content","date","user"],bs.propTypes={};const _s=bs;function xs(e){var t=e.children,n=e.className,r=e.content,s=e.extraImages,o=e.extraText,a=e.date,l=e.meta,c=e.summary,u=(0,Y.Z)("content",n),p=(0,d.Z)(xs,e),f=(0,he.Z)(xs,e);return Ue.kK(t)?h.createElement(f,(0,i.Z)({},p,{className:u}),(0,F.Go)(us,(function(e){return{content:e}}),a,{autoGenerateKey:!1}),(0,F.Go)(_s,(function(e){return{content:e}}),c,{autoGenerateKey:!1}),r,(0,F.Go)(ds,(function(e){return{text:!0,content:e}}),o,{autoGenerateKey:!1}),(0,F.Go)(ds,(function(e){return{images:e}}),s,{autoGenerateKey:!1}),(0,F.Go)(gs,(function(e){return{content:e}}),l,{autoGenerateKey:!1})):h.createElement(f,(0,i.Z)({},p,{className:u}),t)}xs.handledProps=["as","children","className","content","date","extraImages","extraText","meta","summary"],xs.propTypes={};const ws=xs;function Ss(e){var t=e.children,n=e.className,r=e.content,s=e.icon,o=e.image,a=(0,Y.Z)("label",n),l=(0,d.Z)(Ss,e),c=(0,he.Z)(Ss,e);return Ue.kK(t)?h.createElement(c,(0,i.Z)({},l,{className:a}),r,Be.Z.create(s,{autoGenerateKey:!1}),(0,F.Ff)(o)):h.createElement(c,(0,i.Z)({},l,{className:a}),t)}Ss.handledProps=["as","children","className","content","icon","image"],Ss.propTypes={};const Ts=Ss;function Es(e){var t=e.content,n=e.children,r=e.className,s=e.date,o=e.extraImages,a=e.extraText,l=e.image,c=e.icon,u=e.meta,p=e.summary,f=(0,Y.Z)("event",r),m=(0,d.Z)(Es,e),g=(0,he.Z)(Es,e),v=t||s||o||a||u||p,y={content:t,date:s,extraImages:o,extraText:a,meta:u,summary:p};return h.createElement(g,(0,i.Z)({},m,{className:f}),(0,F.Go)(Ts,(function(e){return{icon:e}}),c,{autoGenerateKey:!1}),(0,F.Go)(Ts,(function(e){return{image:e}}),l,{autoGenerateKey:!1}),v&&h.createElement(ws,y),n)}Es.handledProps=["as","children","className","content","date","extraImages","extraText","icon","image","meta","summary"],Es.propTypes={};const Ms=Es;function As(e){var t=e.children,n=e.className,r=e.events,s=e.size,o=(0,Y.Z)("ui",s,"feed",n),a=(0,d.Z)(As,e),l=(0,he.Z)(As,e);if(!Ue.kK(t))return h.createElement(l,(0,i.Z)({},a,{className:o}),t);var c=(0,v.Z)(r,(function(e){var t=e.childKey,n=e.date,r=e.meta,s=e.summary,o=(0,nr.Z)(e,["childKey","date","meta","summary"]),a=null!=t?t:[n,r,s].join("-");return h.createElement(Ms,(0,i.Z)({date:n,key:a,meta:r,summary:s},o))}));return h.createElement(l,(0,i.Z)({},a,{className:o}),c)}As.handledProps=["as","children","className","events","size"],As.propTypes={},As.Content=ws,As.Date=us,As.Event=Ms,As.Extra=ds,As.Label=Ts,As.Like=fs,As.Meta=gs,As.Summary=_s,As.User=ys;const Cs=As;function ks(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("header",n),o=(0,d.Z)(ks,e),a=(0,he.Z)(ks,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}ks.handledProps=["as","children","className","content"],ks.propTypes={},ks.create=(0,F.u5)(ks,(function(e){return{content:e}}));const Ps=ks;function Rs(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("description",n),o=(0,d.Z)(Rs,e),a=(0,he.Z)(Rs,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}Rs.handledProps=["as","children","className","content"],Rs.propTypes={},Rs.create=(0,F.u5)(Rs,(function(e){return{content:e}}));const Ls=Rs;function Os(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("extra",n),o=(0,d.Z)(Os,e),a=(0,he.Z)(Os,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}Os.handledProps=["as","children","className","content"],Os.propTypes={},Os.create=(0,F.u5)(Os,(function(e){return{content:e}}));const Ns=Os;function Is(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("meta",n),o=(0,d.Z)(Is,e),a=(0,he.Z)(Is,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}Is.handledProps=["as","children","className","content"],Is.propTypes={},Is.create=(0,F.u5)(Is,(function(e){return{content:e}}));const Ds=Is;function Fs(e){var t=e.children,n=e.className,r=e.content,s=e.description,o=e.extra,a=e.header,l=e.meta,c=e.verticalAlign,u=(0,Y.Z)((0,se.Ok)(c),"content",n),p=(0,d.Z)(Fs,e),f=(0,he.Z)(Fs,e);return Ue.kK(t)?h.createElement(f,(0,i.Z)({},p,{className:u}),Ps.create(a,{autoGenerateKey:!1}),Ds.create(l,{autoGenerateKey:!1}),Ls.create(s,{autoGenerateKey:!1}),Ns.create(o,{autoGenerateKey:!1}),r):h.createElement(f,(0,i.Z)({},p,{className:u}),t)}Fs.handledProps=["as","children","className","content","description","extra","header","meta","verticalAlign"],Fs.propTypes={};const zs=Fs;function Us(e){var t=e.children,n=e.className,r=e.content,s=e.divided,o=e.items,a=e.link,l=e.relaxed,c=e.unstackable,u=(0,Y.Z)("ui",(0,se.lG)(s,"divided"),(0,se.lG)(a,"link"),(0,se.lG)(c,"unstackable"),(0,se.sU)(l,"relaxed"),"items",n),p=(0,d.Z)(Us,e),f=(0,he.Z)(Us,e);if(!Ue.kK(t))return h.createElement(f,(0,i.Z)({},p,{className:u}),t);if(!Ue.kK(r))return h.createElement(f,(0,i.Z)({},p,{className:u}),r);var m=(0,v.Z)(o,(function(e){var t=e.childKey,n=(0,nr.Z)(e,["childKey"]),r=null!=t?t:[n.content,n.description,n.header,n.meta].join("-");return h.createElement(Hs,(0,i.Z)({},n,{key:r}))}));return h.createElement(f,(0,i.Z)({},p,{className:u}),m)}Us.handledProps=["as","children","className","content","divided","items","link","relaxed","unstackable"],Us.propTypes={};const Bs=Us;function Vs(e){var t=e.size,n=(0,d.Z)(Vs,e);return h.createElement(kt.Z,(0,i.Z)({},n,{size:t,ui:!!t,wrapped:!0}))}Vs.handledProps=["size"],Vs.propTypes={},Vs.create=(0,F.u5)(Vs,(function(e){return{src:e}}));const Gs=Vs;function Zs(e){var t=e.children,n=e.className,r=e.content,s=e.description,o=e.extra,a=e.header,l=e.image,c=e.meta,u=(0,Y.Z)("item",n),p=(0,d.Z)(Zs,e),f=(0,he.Z)(Zs,e);return Ue.kK(t)?h.createElement(f,(0,i.Z)({},p,{className:u}),Gs.create(l,{autoGenerateKey:!1}),h.createElement(zs,{content:r,description:s,extra:o,header:a,meta:c})):h.createElement(f,(0,i.Z)({},p,{className:u}),t)}Zs.handledProps=["as","children","className","content","description","extra","header","image","meta"],Zs.Content=zs,Zs.Description=Ls,Zs.Extra=Ns,Zs.Group=Bs,Zs.Header=Ps,Zs.Image=Gs,Zs.Meta=Ds,Zs.propTypes={};const Hs=Zs;function js(e){var t=e.children,n=e.className,r=e.color,s=e.content,o=e.horizontal,a=e.inverted,l=e.items,c=e.size,u=e.widths,p=(0,Y.Z)("ui",r,c,(0,se.lG)(o,"horizontal"),(0,se.lG)(a,"inverted"),(0,se.H0)(u),"statistics",n),f=(0,d.Z)(js,e),m=(0,he.Z)(js,e);return Ue.kK(t)?Ue.kK(s)?h.createElement(m,(0,i.Z)({},f,{className:p}),(0,v.Z)(l,(function(e){return $s.create(e)}))):h.createElement(m,(0,i.Z)({},f,{className:p}),s):h.createElement(m,(0,i.Z)({},f,{className:p}),t)}js.handledProps=["as","children","className","color","content","horizontal","inverted","items","size","widths"],js.propTypes={};const Ws=js;function qs(e){var t=e.children,n=e.className,r=e.content,s=(0,Y.Z)("label",n),o=(0,d.Z)(qs,e),a=(0,he.Z)(qs,e);return h.createElement(a,(0,i.Z)({},o,{className:s}),Ue.kK(t)?r:t)}qs.handledProps=["as","children","className","content"],qs.propTypes={},qs.create=(0,F.u5)(qs,(function(e){return{content:e}}));const Ks=qs;function Xs(e){var t=e.children,n=e.className,r=e.content,s=e.text,o=(0,Y.Z)((0,se.lG)(s,"text"),"value",n),a=(0,d.Z)(Xs,e),l=(0,he.Z)(Xs,e);return h.createElement(l,(0,i.Z)({},a,{className:o}),Ue.kK(t)?r:t)}Xs.handledProps=["as","children","className","content","text"],Xs.propTypes={},Xs.create=(0,F.u5)(Xs,(function(e){return{content:e}}));const Ys=Xs;function Js(e){var t=e.children,n=e.className,r=e.color,s=e.content,o=e.floated,a=e.horizontal,l=e.inverted,c=e.label,u=e.size,p=e.text,f=e.value,m=(0,Y.Z)("ui",r,u,(0,se.cD)(o,"floated"),(0,se.lG)(a,"horizontal"),(0,se.lG)(l,"inverted"),"statistic",n),g=(0,d.Z)(Js,e),v=(0,he.Z)(Js,e);return Ue.kK(t)?Ue.kK(s)?h.createElement(v,(0,i.Z)({},g,{className:m}),Ys.create(f,{defaultProps:{text:p},autoGenerateKey:!1}),Ks.create(c,{autoGenerateKey:!1})):h.createElement(v,(0,i.Z)({},g,{className:m}),s):h.createElement(v,(0,i.Z)({},g,{className:m}),t)}Js.handledProps=["as","children","className","color","content","floated","horizontal","inverted","label","size","text","value"],Js.propTypes={},Js.Group=Ws,Js.Label=Ks,Js.Value=Ys,Js.create=(0,F.u5)(Js,(function(e){return{content:e}}));const $s=Js},Kz5q:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("ngY+"),s=n("m290"),o=n("b0ud"),a=n("iGFm"),l=n("ynia"),c=function(e,t,n,r){void 0===r&&(r=!1);var i,s=t[e];if(void 0!==s)return s;if(r){var o=t[(i=e,"default"+(i[0].toUpperCase()+i.slice(1)))];if(void 0!==o)return o;if(n){var a=n[e];if(void 0!==a)return a}}return"checked"!==e&&("value"===e?t.multiple?[]:"":void 0)},u=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];var l=(t=e.call.apply(e,[this].concat(s))||this).constructor,u=l.autoControlledProps,h=l.getAutoControlledStateFromProps,d=(0,a.Z)((0,i.Z)(t),"getInitialAutoControlledState",t.props)||{},p=u.reduce((function(e,n){return e[n]=c(n,t.props,d,!0),e}),{});return t.state=(0,r.Z)({},d,p,{autoControlledProps:u,getAutoControlledStateFromProps:h}),t}return(0,s.Z)(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.autoControlledProps,i=t.getAutoControlledStateFromProps,s=n.reduce((function(t,n){return!(0,o.Z)(e[n])&&(t[n]=e[n]),t}),{});if(i){var a=i(e,(0,r.Z)({},t,s),t);return(0,r.Z)({},s,a)}return s},t.getAutoControlledStateFromProps=function(){return null},t}(l.Component)},aRJ7:(e,t,n)=>{"use strict";n.d(t,{kK:()=>o,tQ:()=>s});var r=n("kv6W"),i=n("ynia"),s=function(e,t){return(0,r.Z)(i.Children.toArray(e),{type:t})},o=function(e){return null==e||Array.isArray(e)&&0===e.length}},xShN:(e,t,n)=>{"use strict";n.d(t,{H0:()=>u,MR:()=>a,Ok:()=>c,X4:()=>l,cD:()=>s,lG:()=>i,sU:()=>o});var r=n("Ok/i"),i=function(e,t){return e&&t},s=function(e,t){return e&&!0!==e&&e+" "+t},o=function(e,t){return e&&(!0===e?t:e+" "+t)},a=function(e,t){return e&&!0!==e?e.replace("large screen","large-screen").replace(/ vertically/g,"-vertically").split(" ").map((function(e){return e.replace("-"," ")+" "+t})).join(" "):null},l=function(e){return"justified"===e?"justified":s(e,"aligned")},c=function(e){return s(e,"aligned")},u=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=!1),n&&"equal"===e)return"equal width";var i=typeof e;return"string"!==i&&"number"!==i||!t?(0,r.u)(e):(0,r.u)(e)+" "+t}},lDzk:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("M9TG"),i=n("NtZ7"),s=n("iGFm"),o=n("syBy"),a=n("kv6W");const l=function(e,t){if((0,a.Z)([t,e],o.Z))return!1;if(t.target&&((0,s.Z)(t.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return(0,s.Z)(t.target,"removeAttribute","data-suir-click-target"),e.contains(t.target);var n=t.clientX,l=t.clientY;if((0,a.Z)([n,l],o.Z))return!1;var c=e.getClientRects();if(!(e.offsetWidth&&e.offsetHeight&&c&&c.length))return!1;var u=(0,i.Z)(c),h=u.top,d=u.bottom,p=u.left,f=u.right;return!(0,a.Z)([h,d,p,f],o.Z)&&((0,r.Z)(l,h,d+.001)&&(0,r.Z)(n,p,f+.001))}},GfR4:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("/lYH");const i=r.instance},EVih:(e,t,n)=>{"use strict";n.d(t,{BU:()=>x,DE:()=>g,Ff:()=>y,Go:()=>f,MO:()=>b,PI:()=>v,i9:()=>_,u5:()=>m});var r=n("H+Tk"),i=n("Yjeb"),s=n("ogfy"),o=n("2FZd"),a=n("W+Pi"),l=n("xFAa"),c=n("CruI"),u=n("+BPJ"),h=n("syBy"),d=n("Ql6E"),p=n("ynia");function f(e,t,n,f){if(void 0===f&&(f={}),"function"!=typeof e&&"string"!=typeof e)throw new Error("createShorthand() Component must be a string or function.");if((0,h.Z)(n)||(0,u.Z)(n))return null;var m=(0,c.Z)(n),g=(0,l.Z)(n),v=(0,a.Z)(n),y=p.isValidElement(n),b=(0,o.Z)(n),_=m||g||(0,s.Z)(n);if(!(v||y||b||_))return null;var x=f.defaultProps,w=void 0===x?{}:x,S=y&&n.props||b&&n||_&&t(n),T=f.overrideProps,E=void 0===T?{}:T;E=(0,a.Z)(E)?E((0,r.Z)({},w,S)):E;var M=(0,r.Z)({},w,S,E);if(w.className||E.className||S.className){var A=(0,d.Z)(w.className,E.className,S.className);M.className=(0,i.Z)(A.split(" ")).join(" ")}if((w.style||E.style||S.style)&&(M.style=(0,r.Z)({},w.style,S.style,E.style)),(0,h.Z)(M.key)){var C=M.childKey,k=f.autoGenerateKey,P=void 0===k||k;(0,h.Z)(C)?P&&(m||g)&&(M.key=n):(M.key="function"==typeof C?C(M):C,delete M.childKey)}return y?p.cloneElement(n,M):"function"==typeof M.children?M.children(e,(0,r.Z)({},M,{children:void 0})):_||b?p.createElement(e,M):v?n(e,M,M.children):void 0}function m(e,t){if("function"!=typeof e&&"string"!=typeof e)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return f(e,t,n,r)}}var g=m("div",(function(e){return{children:e}})),v=m("iframe",(function(e){return{src:e}})),y=m("img",(function(e){return{src:e}})),b=m("input",(function(e){return{type:e}})),_=m("label",(function(e){return{children:e}})),x=m("p",(function(e){return{children:e}}))},ZbAl:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t,n){var r=e.defaultProps,i=void 0===r?{}:r;if(t.as&&t.as!==i.as)return t.as;if(n){var s=n();if(s)return s}return t.href?"a":i.as||"div"}},uXJ5:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){var n=e.handledProps,r=void 0===n?[]:n;return Object.keys(t).reduce((function(e,n){return"childKey"===n||-1===r.indexOf(n)&&(e[n]=t[n]),e}),{})}},wogc:(e,t,n)=>{"use strict";n.d(t,{K2:()=>a,_l:()=>s,vR:()=>l});var r=n("Li4J"),i=n("610m"),s=["selected","defaultValue","defaultChecked","accept","autoCapitalize","autoComplete","autoCorrect","autoFocus","checked","disabled","form","id","inputMode","lang","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","readOnly","required","step","title","type","value"],o=[].concat(s,["onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onClick","onContextMenu","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]),a=["alt","height","src","srcSet","width","loading"],l=function(e,t){void 0===t&&(t={});var n=t,s=n.htmlProps,a=void 0===s?o:s,l=n.includeAria,c=void 0===l||l,u={},h={};return(0,i.Z)(e,(function(e,t){var n=c&&(/^aria-.*$/.test(t)||"role"===t);((0,r.Z)(a,t)||n?u:h)[t]=e})),[u,h]}},jZHH:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("syBy"),i="object"==typeof document&&null!==document,s="object"==typeof window&&null!==window&&window.self===window;const o=function e(){return(0,r.Z)(e.override)?i&&s:e.override}},"Ok/i":(e,t,n)=>{"use strict";n.d(t,{k:()=>r,u:()=>i});var r={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};function i(e){var t=typeof e;return"string"===t||"number"===t?r[e]||e:""}},"3GrG":(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n("H+Tk"),i=n("m290"),s=n("ukBZ"),o=n("iGFm"),a=n("syBy"),l=n("eGir"),c=n("Ql6E"),u=n("ynia"),h=n("xShN"),d=n("uXJ5"),p=n("ZbAl"),f=n("wogc"),m=n("EVih"),g=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(t=e.call.apply(e,[this].concat(i))||this).inputRef=(0,u.createRef)(),t.labelRef=(0,u.createRef)(),t.canToggle=function(){var e=t.props,n=e.disabled,r=e.radio,i=e.readOnly,s=t.state.checked;return!(n||i||r&&s)},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return(0,a.Z)(r)?n?-1:0:r},t.handleClick=function(e){var n=t.props.id,i=t.state,s=i.checked,l=i.indeterminate,c=(0,o.Z)(t.inputRef.current,"contains",e.target),u=(0,o.Z)(t.labelRef.current,"contains",e.target),h=!u&&!c,d=!(0,a.Z)(n);u&&d||(0,o.Z)(t.props,"onClick",e,(0,r.Z)({},t.props,{checked:!s,indeterminate:!!l})),t.isClickFromMouse&&(t.isClickFromMouse=!1,u&&!d&&t.handleChange(e),h&&t.handleChange(e),u&&d&&e.stopPropagation())},t.handleChange=function(e){var n=t.state.checked;t.canToggle()&&((0,o.Z)(t.props,"onChange",e,(0,r.Z)({},t.props,{checked:!n,indeterminate:!1})),t.setState({checked:!n,indeterminate:!1}))},t.handleMouseDown=function(e){var n=t.state,i=n.checked,s=n.indeterminate;(0,o.Z)(t.props,"onMouseDown",e,(0,r.Z)({},t.props,{checked:!!i,indeterminate:!!s})),e.defaultPrevented||(0,o.Z)(t.inputRef.current,"focus"),e.preventDefault()},t.handleMouseUp=function(e){var n=t.state,i=n.checked,s=n.indeterminate;t.isClickFromMouse=!0,(0,o.Z)(t.props,"onMouseUp",e,(0,r.Z)({},t.props,{checked:!!i,indeterminate:!!s}))},t.setIndeterminate=function(){var e=t.state.indeterminate;(0,s.Z)(t.inputRef,"current.indeterminate",!!e)},t}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setIndeterminate()},n.componentDidUpdate=function(){this.setIndeterminate()},n.render=function(){var e=this.props,n=e.className,i=e.disabled,s=e.label,o=e.id,g=e.name,v=e.radio,y=e.readOnly,b=e.slider,_=e.toggle,x=e.type,w=e.value,S=this.state,T=S.checked,E=S.indeterminate,M=(0,c.Z)("ui",(0,h.lG)(T,"checked"),(0,h.lG)(i,"disabled"),(0,h.lG)(E,"indeterminate"),(0,h.lG)((0,a.Z)(s),"fitted"),(0,h.lG)(v,"radio"),(0,h.lG)(y,"read-only"),(0,h.lG)(b,"slider"),(0,h.lG)(_,"toggle"),"checkbox",n),A=(0,d.Z)(t,this.props),C=(0,p.Z)(t,this.props),k=(0,f.vR)(A,{htmlProps:f._l}),P=k[0],R=k[1],L=(0,m.i9)(s,{defaultProps:{htmlFor:o},autoGenerateKey:!1})||u.createElement("label",{htmlFor:o});return u.createElement(C,(0,r.Z)({},R,{className:M,onClick:this.handleClick,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),u.createElement(l.R,{innerRef:this.inputRef},u.createElement("input",(0,r.Z)({},P,{checked:T,className:"hidden",disabled:i,id:o,name:g,readOnly:!0,tabIndex:this.computeTabIndex(),type:x,value:w}))),u.createElement(l.R,{innerRef:this.labelRef},L))},t}(n("Kz5q").Z);g.handledProps=["as","checked","className","defaultChecked","defaultIndeterminate","disabled","fitted","id","indeterminate","label","name","onChange","onClick","onMouseDown","onMouseUp","radio","readOnly","slider","tabIndex","toggle","type","value"],g.propTypes={},g.defaultProps={type:"checkbox"},g.autoControlledProps=["checked","indeterminate"]},vIwQ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("H+Tk"),i=n("m290"),s=n("ynia"),o=n("jZHH"),a=n("uXJ5"),l=n("EVih"),c=n("Ufck"),u=n("CukA"),h=n("wDxM"),d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePortalMount=function(){(0,o.Z)()&&(document.body.classList.add("dimmed"),document.body.classList.add("dimmable"))},t.handlePortalUnmount=function(){(0,o.Z)()&&(document.body.classList.remove("dimmed"),document.body.classList.remove("dimmable"))},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.page,o=(0,a.Z)(t,this.props);return i?s.createElement(c.Z,{closeOnEscape:!1,closeOnDocumentClick:!1,onMount:this.handlePortalMount,onUnmount:this.handlePortalUnmount,open:n,openOnTriggerClick:!1},s.createElement(h.Z,(0,r.Z)({},o,{active:n,page:i}))):s.createElement(h.Z,(0,r.Z)({},o,{active:n,page:i}))},t}(s.Component);d.handledProps=["active","page"],d.propTypes={},d.Dimmable=u.Z,d.Inner=h.Z,d.create=(0,l.u5)(d,(function(e){return{content:e}}))},CukA:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.blurring,n=e.className,h=e.children,d=e.content,p=e.dimmed,f=(0,i.Z)((0,o.lG)(t,"blurring"),(0,o.lG)(p,"dimmed"),"dimmable",n),m=(0,a.Z)(u,e),g=(0,l.Z)(u,e);return s.createElement(g,(0,r.Z)({},m,{className:f}),c.kK(h)?d:h)}u.handledProps=["as","blurring","children","className","content","dimmed"],u.propTypes={};const h=u},wDxM:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n("H+Tk"),i=n("m290"),s=n("iGFm"),o=n("eGir"),a=n("Ql6E"),l=n("ynia"),c=n("lDzk"),u=n("xShN"),h=n("uXJ5"),d=n("ZbAl"),p=n("aRJ7"),f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).containerRef=(0,l.createRef)(),t.contentRef=(0,l.createRef)(),t.handleClick=function(e){var n=t.contentRef.current;(0,s.Z)(t.props,"onClick",e,t.props),n&&n!==e.target&&(0,c.Z)(n,e)||(0,s.Z)(t.props,"onClickOutside",e,t.props)},t}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.active;this.toggleStyles(e)},n.componentDidUpdate=function(e){var t=this.props.active;e.active!==t&&this.toggleStyles(t)},n.toggleStyles=function(e){var t=this.containerRef.current;t&&t.style&&(e?t.style.setProperty("display","flex","important"):t.style.removeProperty("display"))},n.render=function(){var e=this.props,n=e.active,i=e.children,s=e.className,c=e.content,f=e.disabled,m=e.inverted,g=e.page,v=e.simple,y=e.verticalAlign,b=(0,a.Z)("ui",(0,u.lG)(n,"active transition visible"),(0,u.lG)(f,"disabled"),(0,u.lG)(m,"inverted"),(0,u.lG)(g,"page"),(0,u.lG)(v,"simple"),(0,u.Ok)(y),"dimmer",s),_=(0,h.Z)(t,this.props),x=(0,d.Z)(t,this.props),w=p.kK(i)?c:i;return l.createElement(o.R,{innerRef:this.containerRef},l.createElement(x,(0,r.Z)({},_,{className:b,onClick:this.handleClick}),w&&l.createElement("div",{className:"content",ref:this.contentRef},w)))},t}(l.Component);f.handledProps=["active","as","children","className","content","disabled","inverted","onClick","onClickOutside","page","simple","verticalAlign"],f.propTypes={}},scvP:(e,t,n)=>{"use strict";n.d(t,{Z:()=>We});var r=n("H+Tk"),i=n("m290"),s=n("Li4J");const o=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i};var a=n("hR+M");const l=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0};var c=n("EFuN");const u=function(e,t){var n=!0;return(0,c.Z)(e,(function(e,r,i){return n=!!t(e,r,i)})),n};var h=n("vy2h"),d=n("ogfy"),p=n("MG3Q");const f=function(e,t,n){var r=(0,d.Z)(e)?l:u;return n&&(0,p.Z)(e,t,n)&&(t=void 0),r(e,(0,h.Z)(t,3))};var m=n("PVtX"),g=n("MMSv"),v=n("7lg8");const y=function(e){return function(t,n,r){var i=Object(t);if(!(0,g.Z)(t)){var s=(0,h.Z)(n,3);t=(0,v.Z)(t),n=function(e){return s(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[s?t[o]:o]:void 0}};var b=n("JeBL"),_=n("Z8k3"),x=Math.max;const w=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:(0,_.Z)(n);return i<0&&(i=x(r+i,0)),(0,b.Z)(e,(0,h.Z)(t,3),i)};const S=y(w);var T=n("YWoN");const E=function(e,t,n){var r=null==e?0:e.length;return r?(t=r-(t=n||void 0===t?1:(0,_.Z)(t)),(0,T.Z)(e,0,t<0?0:t)):[]};var M=n("QYiU"),A=n("2P11"),C=n("oNsh"),k=n("CruI");const P=(0,n("QQR6").Z)("length");var R=n("d9xN"),L="[\\ud800-\\udfff]",O="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",N="\\ud83c[\\udffb-\\udfff]",I="[^\\ud800-\\udfff]",D="(?:\\ud83c[\\udde6-\\uddff]){2}",F="[\\ud800-\\udbff][\\udc00-\\udfff]",z="(?:"+O+"|"+N+")"+"?",U="[\\ufe0e\\ufe0f]?",B=U+z+("(?:\\u200d(?:"+[I,D,F].join("|")+")"+U+z+")*"),V="(?:"+[I+O+"?",O,D,F,L].join("|")+")",G=RegExp(N+"(?="+N+")|"+V+B,"g");const Z=function(e){for(var t=G.lastIndex=0;G.test(e);)++t;return t};const H=function(e){return(0,R.Z)(e)?Z(e):P(e)};const j=function(e){if(null==e)return 0;if((0,g.Z)(e))return(0,k.Z)(e)?H(e):e.length;var t=(0,C.Z)(e);return"[object Map]"==t||"[object Set]"==t?e.size:(0,A.Z)(e).length};var W=n("UBMP"),q=n("zLIZ"),K=n("eboQ"),X=n("FcBF");const Y=(0,K.Z)((function(e,t){return(0,X.Z)(e)?(0,W.Z)(e,(0,q.Z)(t,1,X.Z,!0)):[]}));var J=n("LOr/");const $=(0,K.Z)((function(e){return(0,J.Z)((0,q.Z)(e,1,X.Z,!0))}));var Q=n("7PNb"),ee=n("wzju"),te=n("b0ud"),ne=n("iGFm"),re=n("TyFl");const ie=function(e,t){return(0,re.Z)(e,t)};var se=n("W+Pi"),oe=n("XomA"),ae=n("syBy"),le=n("/lYH"),ce=n.n(le),ue=n("eGir"),he=n("Ql6E"),de=n("paW0"),pe=n.n(de),fe=n("ynia"),me=n("/iLt"),ge=n.n(me),ve=n("lDzk"),ye=n("aRJ7"),be=n("xShN"),_e=n("uXJ5"),xe=n("ZbAl"),we=n("Kz5q"),Se=n("35Nk"),Te=n("sfx3"),Ee=n("lcYd"),Me=n("kveA"),Ae=n("h1MN"),Ce=n("VsRH"),ke=n("5gOd"),Pe=n("3RWJ"),Re=n("W1O1"),Le=n("y7kI"),Oe=n("kv6W"),Ne=n("ud8q"),Ie=/[\\^$.*+?()[\]{}|]/g,De=RegExp(Ie.source);const Fe=function(e){return(e=(0,Ne.Z)(e))&&De.test(e)?e.replace(Ie,"\\$&"):e};var ze=n("auUP"),Ue=n("SdmQ");function Be(e){var t=e.additionLabel,n=e.additionPosition,r=e.allowAdditions,i=e.deburr,o=e.multiple,a=e.options,l=e.search,c=e.searchQuery,u=e.value,h=a;if(o&&(h=(0,Ue.Z)(h,(function(e){return!(0,s.Z)(u,e.value)}))),l&&c)if((0,se.Z)(l))h=l(h,c);else{var d=i?(0,ze.Z)(c):c,p=new RegExp(Fe(d),"i");h=(0,Ue.Z)(h,(function(e){return p.test(i?(0,ze.Z)(e.text):e.text)}))}if(r&&l&&c&&!(0,Oe.Z)(h,{text:c})){var f={key:"addition",text:[fe.isValidElement(t)?fe.cloneElement(t,{key:"addition-label"}):t||"",fe.createElement("b",{key:"addition-query"},c)],value:c,className:"addition","data-additional":!0};"top"===n?h.unshift(f):h.push(f)}return h}Be.handledProps=[];var Ve=n("Nwlo");function Ge(e){var t,n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,o=e.deburr,a=e.multiple,l=e.options,c=e.search,u=e.searchQuery,h=e.selectedIndex,d=e.value,p=Be({value:d,options:l,searchQuery:u,additionLabel:n,additionPosition:r,allowAdditions:i,deburr:o,multiple:a,search:c}),f=(0,Ve.Z)(p,(function(e,t,n){return t.disabled||e.push(n),e}),[]);if(!h||h<0){var m=f[0];t=a?m:w(p,["value",d])||f[0]}else if(a)t=S(f,(function(e){return e>=h})),h>=p.length-1&&(t=f[f.length-1]);else{var g=w(p,["value",d]);t=(0,s.Z)(f,g)?g:void 0}return(!t||t<0)&&(t=f[0]),t}var Ze=function(e,t){return(0,ae.Z)(e)?t:e},He=function(e){return e?e.map((function(e){return(0,oe.Z)(e,["key","value"])})):e};function je(e){var t=e.flag,n=e.image,r=e.text;return(0,se.Z)(r)?r:{content:fe.createElement(fe.Fragment,null,Ee.Z.create(t),Me.Z.create(n),r)}}var We=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(t=e.call.apply(e,[this].concat(i))||this).searchRef=(0,fe.createRef)(),t.sizerRef=(0,fe.createRef)(),t.ref=(0,fe.createRef)(),t.handleChange=function(e,n){(0,ne.Z)(t.props,"onChange",e,(0,r.Z)({},t.props,{value:n}))},t.closeOnChange=function(e){var n=t.props,r=n.closeOnChange,i=n.multiple;((0,te.Z)(r)?!i:r)&&t.close(e,ee.Z)},t.closeOnEscape=function(e){t.props.closeOnEscape&&pe().getCode(e)===pe().Escape&&(e.preventDefault(),t.close(e))},t.moveSelectionOnKeyDown=function(e){var n,r=t.props,i=r.multiple,s=r.selectOnNavigation;if(t.state.open){var o=((n={})[pe().ArrowDown]=1,n[pe().ArrowUp]=-1,n)[pe().getCode(e)];if(void 0!==o){e.preventDefault();var a=t.getSelectedIndexAfterMove(o);!i&&s&&t.makeSelectedItemActive(e,a),t.setState({selectedIndex:a})}}},t.openOnSpace=function(e){var n,r,i,s=t.state.focus&&!t.state.open&&pe().getCode(e)===pe().Spacebar,o="INPUT"!==(null==(n=e.target)?void 0:n.tagName)&&"TEXTAREA"!==(null==(r=e.target)?void 0:r.tagName)&&!0!==(null==(i=e.target)?void 0:i.isContentEditable);s&&(o&&e.preventDefault(),t.open(e))},t.openOnArrow=function(e){var n=t.state,r=n.focus,i=n.open;if(r&&!i){var s=pe().getCode(e);s!==pe().ArrowDown&&s!==pe().ArrowUp||(e.preventDefault(),t.open(e))}},t.makeSelectedItemActive=function(e,n){var i=t.state,s=i.open,o=i.value,a=t.props.multiple,l=t.getSelectedItem(n),c=(0,Q.Z)(l,"value"),u=(0,Q.Z)(l,"disabled");if((0,ae.Z)(c)||!s||u)return o;var h=a?$(o,[c]):c;return(a?!!Y(h,o).length:h!==o)&&(t.setState({value:h}),t.handleChange(e,h),l["data-additional"]&&(0,ne.Z)(t.props,"onAddItem",e,(0,r.Z)({},t.props,{value:c}))),o},t.selectItemOnEnter=function(e){var n=t.props.search,r=t.state,i=r.open,s=r.selectedIndex;if(i&&(pe().getCode(e)===pe().Enter||!n&&pe().getCode(e)===pe().Spacebar)){e.preventDefault();var o=j(Be({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search}));if(!n||0!==o){var a=t.makeSelectedItemActive(e,s);t.setState({selectedIndex:Ge({additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search,selectedIndex:s,value:a,options:t.props.options,searchQuery:""})}),t.closeOnChange(e),t.clearSearchQuery(),n&&(0,ne.Z)(t.searchRef.current,"focus")}}},t.removeItemOnBackspace=function(e){var n=t.props,r=n.multiple,i=n.search,s=t.state,o=s.searchQuery,a=s.value;if(pe().getCode(e)===pe().Backspace&&!o&&i&&r&&!(0,M.Z)(a)){e.preventDefault();var l=E(a);t.setState({value:l}),t.handleChange(e,l)}},t.closeOnDocumentClick=function(e){t.props.closeOnBlur&&(t.ref.current&&(0,ve.Z)(t.ref.current,e)||t.close())},t.handleMouseDown=function(e){t.isMouseDown=!0,(0,ne.Z)(t.props,"onMouseDown",e,t.props),document.addEventListener("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,document.removeEventListener("mouseup",t.handleDocumentMouseUp)},t.handleClick=function(e){var n=t.props,r=n.minCharacters,i=n.search,s=t.state,o=s.open,a=s.searchQuery;if((0,ne.Z)(t.props,"onClick",e,t.props),e.stopPropagation(),!i)return t.toggle(e);o?(0,ne.Z)(t.searchRef.current,"focus"):a.length>=r||1===r?t.open(e):(0,ne.Z)(t.searchRef.current,"focus")},t.handleIconClick=function(e){var n=t.props.clearable,r=t.hasValue();(0,ne.Z)(t.props,"onClick",e,t.props),e.stopPropagation(),n&&r?t.clearValue(e):t.toggle(e)},t.handleItemClick=function(e,n){var i=t.props,s=i.multiple,o=i.search,a=t.state.value,l=n.value;if(e.stopPropagation(),(s||n.disabled)&&e.nativeEvent.stopImmediatePropagation(),!n.disabled){var c=n["data-additional"],u=s?$(t.state.value,[l]):l;(s?!!Y(u,a).length:u!==a)&&(t.setState({value:u}),t.handleChange(e,u)),t.clearSearchQuery(),o?(0,ne.Z)(t.searchRef.current,"focus"):(0,ne.Z)(t.ref.current,"focus"),t.closeOnChange(e),c&&(0,ne.Z)(t.props,"onAddItem",e,(0,r.Z)({},t.props,{value:l}))}},t.handleFocus=function(e){t.state.focus||((0,ne.Z)(t.props,"onFocus",e,t.props),t.setState({focus:!0}))},t.handleBlur=function(e){var n=(0,Q.Z)(e,"currentTarget");if(!n||!n.contains(document.activeElement)){var r=t.props,i=r.closeOnBlur,s=r.multiple,o=r.selectOnBlur;t.isMouseDown||((0,ne.Z)(t.props,"onBlur",e,t.props),o&&!s&&(t.makeSelectedItemActive(e,t.state.selectedIndex),i&&t.close()),t.setState({focus:!1}),t.clearSearchQuery())}},t.handleSearchChange=function(e,n){var i=n.value;e.stopPropagation();var s=t.props.minCharacters,o=t.state.open,a=i;(0,ne.Z)(t.props,"onSearchChange",e,(0,r.Z)({},t.props,{searchQuery:a})),t.setState({searchQuery:a,selectedIndex:0}),!o&&a.length>=s?t.open():o&&1!==s&&a.length<s&&t.close()},t.handleKeyDown=function(e){t.moveSelectionOnKeyDown(e),t.openOnArrow(e),t.openOnSpace(e),t.selectItemOnEnter(e),(0,ne.Z)(t.props,"onKeyDown",e)},t.getSelectedItem=function(e){var n=Be({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});return(0,Q.Z)(n,"["+e+"]")},t.getItemByValue=function(e){var n=t.props.options;return S(n,{value:e})},t.getDropdownAriaOptions=function(){var e=t.props,n=e.loading,r=e.disabled,i=e.search,s=e.multiple,o={role:i?"combobox":"listbox","aria-busy":n,"aria-disabled":r,"aria-expanded":!!t.state.open};return"listbox"===o.role&&(o["aria-multiselectable"]=s),o},t.clearSearchQuery=function(){var e=t.state.searchQuery;void 0!==e&&""!==e&&t.setState({searchQuery:""})},t.handleLabelClick=function(e,n){e.stopPropagation(),t.setState({selectedLabel:n.value}),(0,ne.Z)(t.props,"onLabelClick",e,n)},t.handleLabelRemove=function(e,n){e.stopPropagation();var r=t.state.value,i=(0,m.Z)(r,n.value);t.setState({value:i}),t.handleChange(e,i)},t.getSelectedIndexAfterMove=function(e,n){void 0===n&&(n=t.state.selectedIndex);var r=Be({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(void 0!==r&&!f(r,"disabled")){var i=r.length-1,s=n+e;return!t.props.wrapSelection&&(s>i||s<0)?s=n:s>i?s=0:s<0&&(s=i),r[s].disabled?t.getSelectedIndexAfterMove(e,s):s}},t.handleIconOverrides=function(e){var n=t.props.clearable;return{className:(0,he.Z)(n&&t.hasValue()&&"clear",e.className),onClick:function(n){(0,ne.Z)(e,"onClick",n,e),t.handleIconClick(n)}}},t.clearValue=function(e){var n=t.props.multiple?[]:"";t.setState({value:n}),t.handleChange(e,n)},t.computeSearchInputTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return(0,ae.Z)(r)?n?-1:0:r},t.computeSearchInputWidth=function(){var e=t.state.searchQuery;if(t.sizerRef.current&&e){t.sizerRef.current.style.display="inline",t.sizerRef.current.textContent=e;var n=Math.ceil(t.sizerRef.current.getBoundingClientRect().width);return t.sizerRef.current.style.removeProperty("display"),n}},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.search,i=e.tabIndex;if(!r)return n?-1:(0,ae.Z)(i)?0:i},t.handleSearchInputOverrides=function(e){return{onChange:function(n,r){(0,ne.Z)(e,"onChange",n,r),t.handleSearchChange(n,r)}}},t.hasValue=function(){var e=t.props.multiple,n=t.state.value;return e?!(0,M.Z)(n):!(0,ae.Z)(n)&&""!==n},t.scrollSelectedItemIntoView=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=e.querySelector(".item.selected");if(n){var r=n.offsetTop<e.scrollTop,i=n.offsetTop+n.clientHeight>e.scrollTop+e.clientHeight;r?e.scrollTop=n.offsetTop:i&&(e.scrollTop=n.offsetTop+n.clientHeight-e.clientHeight)}}}},t.setOpenDirection=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=t.ref.current.getBoundingClientRect(),r=e.clientHeight,i=document.documentElement.clientHeight-n.top-n.height-r,s=n.top-r,o=i<0&&s>i;!o!=!t.state.upward&&t.setState({upward:o})}}},t.open=function(e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var r=t.props,i=r.disabled,s=r.search;i||(s&&(0,ne.Z)(t.searchRef.current,"focus"),(0,ne.Z)(t.props,"onOpen",e,t.props),n&&t.setState({open:!0}),t.scrollSelectedItemIntoView())},t.close=function(e,n){void 0===n&&(n=t.handleClose),t.state.open&&((0,ne.Z)(t.props,"onClose",e,t.props),t.setState({open:!1},n))},t.handleClose=function(){var e=document.activeElement===t.searchRef.current;!e&&t.ref.current&&t.ref.current.blur();var n=document.activeElement===t.ref.current,r=e||n;t.setState({focus:r})},t.toggle=function(e){return t.state.open?t.close(e):t.open(e)},t.renderText=function(){var e,n=t.props,r=n.multiple,i=n.placeholder,s=n.search,o=n.text,a=t.state,l=a.searchQuery,c=a.selectedIndex,u=a.value,h=a.open,d=t.hasValue(),p=(0,he.Z)(i&&!d&&"default","text",s&&l&&"filtered"),f=i;return o?f=o:h&&!r?e=t.getSelectedItem(c):d&&(e=t.getItemByValue(u)),Le.Z.create(e?je(e):f,{defaultProps:{className:p}})},t.renderSearchInput=function(){var e=t.props,n=e.search,r=e.searchInput,i=t.state.searchQuery;return n&&fe.createElement(ue.R,{innerRef:t.searchRef},Re.Z.create(r,{defaultProps:{style:{width:t.computeSearchInputWidth()},tabIndex:t.computeSearchInputTabIndex(),value:i},overrideProps:t.handleSearchInputOverrides}))},t.renderSearchSizer=function(){var e=t.props,n=e.search,r=e.multiple;return n&&r&&fe.createElement("span",{className:"sizer",ref:t.sizerRef})},t.renderLabels=function(){var e=t.props,n=e.multiple,r=e.renderLabel,i=t.state,s=i.selectedLabel,l=i.value;if(n&&!(0,M.Z)(l)){var c=(0,a.Z)(l,t.getItemByValue);return(0,a.Z)(o(c),(function(e,n){var i={active:e.value===s,as:"a",key:Ze(e.key,e.value),onClick:t.handleLabelClick,onRemove:t.handleLabelRemove,value:e.value};return Te.Z.create(r(e,n,i),{defaultProps:i})}))}},t.renderOptions=function(){var e=t.props,n=e.lazyLoad,i=e.multiple,o=e.search,l=e.noResultsMessage,c=t.state,u=c.open,h=c.selectedIndex,d=c.value;if(n&&!u)return null;var p=Be({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(null!==l&&o&&(0,M.Z)(p))return fe.createElement("div",{className:"message"},l);var f=i?function(e){return(0,s.Z)(d,e)}:function(e){return e===d};return(0,a.Z)(p,(function(e,n){return Ce.Z.create((0,r.Z)({active:f(e.value),selected:h===n},e,{key:Ze(e.key,e.value),style:(0,r.Z)({},e.style,{pointerEvents:"all"})}),{generateKey:!1,overrideProps:function(e){return{onClick:function(n,r){null==e.onClick||e.onClick(n,r),t.handleItemClick(n,r)}}}})}))},t.renderMenu=function(){var e=t.props,n=e.children,i=e.direction,s=e.header,o=t.state.open,a=t.getDropdownMenuAriaOptions();if(!ye.kK(n)){var l=fe.Children.only(n),c=(0,he.Z)(i,(0,be.lG)(o,"visible"),l.props.className);return(0,fe.cloneElement)(l,(0,r.Z)({className:c},a))}return fe.createElement(Pe.Z,(0,r.Z)({},a,{direction:i,open:o}),ke.Z.create(s,{autoGenerateKey:!1}),t.renderOptions())},t}(0,i.Z)(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{focus:!1,searchQuery:""}},t.getAutoControlledStateFromProps=function(e,t,n){var r={__options:e.options,__value:t.value};return(!ge()(n.__value,t.value)||!ie(He(e.options),He(n.__options)))&&(r.selectedIndex=Ge({additionLabel:e.additionLabel,additionPosition:e.additionPosition,allowAdditions:e.allowAdditions,deburr:e.deburr,multiple:e.multiple,search:e.search,selectedIndex:t.selectedIndex,value:t.value,options:e.options,searchQuery:t.searchQuery})),r},n.componentDidMount=function(){this.state.open&&this.open(null,!1)},n.shouldComponentUpdate=function(e,t){return!ge()(e,this.props)||!ge()(t,this.state)},n.componentDidUpdate=function(e,t){var n=this.props,r=n.closeOnBlur,i=n.minCharacters,s=n.openOnFocus,o=n.search;if(!t.focus&&this.state.focus){if(!this.isMouseDown){var a=!o||o&&1===i&&!this.state.open;s&&a&&this.open()}}else t.focus&&!this.state.focus&&!this.isMouseDown&&r&&this.close();!t.open&&this.state.open?(this.setOpenDirection(),this.scrollSelectedItemIntoView()):t.open&&this.state.open,t.selectedIndex!==this.state.selectedIndex&&this.scrollSelectedItemIntoView()},n.getDropdownMenuAriaOptions=function(){var e=this.props,t=e.search,n=e.multiple,r={};return t&&(r["aria-multiselectable"]=n,r.role="listbox"),r},n.render=function(){var e=this.props,n=e.basic,i=e.button,s=e.className,o=e.compact,a=e.disabled,l=e.error,c=e.fluid,u=e.floating,h=e.icon,d=e.inline,p=e.item,f=e.labeled,m=e.loading,g=e.multiple,v=e.pointing,y=e.search,b=e.selection,_=e.scrolling,x=e.simple,w=e.trigger,S=this.state,T=S.focus,E=S.open,M=S.upward,A=(0,he.Z)("ui",(0,be.lG)(E,"active visible"),(0,be.lG)(a,"disabled"),(0,be.lG)(l,"error"),(0,be.lG)(m,"loading"),(0,be.lG)(n,"basic"),(0,be.lG)(i,"button"),(0,be.lG)(o,"compact"),(0,be.lG)(c,"fluid"),(0,be.lG)(u,"floating"),(0,be.lG)(d,"inline"),(0,be.lG)(f,"labeled"),(0,be.lG)(p,"item"),(0,be.lG)(g,"multiple"),(0,be.lG)(y,"search"),(0,be.lG)(b,"selection"),(0,be.lG)(x,"simple"),(0,be.lG)(_,"scrolling"),(0,be.lG)(M,"upward"),(0,be.sU)(v,"pointing"),"dropdown",s),C=(0,_e.Z)(t,this.props),k=(0,xe.Z)(t,this.props),P=this.getDropdownAriaOptions(k,this.props);return fe.createElement(ue.R,{innerRef:this.ref},fe.createElement(k,(0,r.Z)({},C,P,{className:A,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onChange:this.handleChange,tabIndex:this.computeTabIndex()}),this.renderLabels(),this.renderSearchInput(),this.renderSearchSizer(),w||this.renderText(),Se.Z.create(h,{overrideProps:this.handleIconOverrides,autoGenerateKey:!1}),this.renderMenu(),E&&fe.createElement(ce(),{name:"keydown",on:this.closeOnEscape}),E&&fe.createElement(ce(),{name:"click",on:this.closeOnDocumentClick}),T&&fe.createElement(ce(),{name:"keydown",on:this.removeItemOnBackspace})))},t}(we.Z);We.handledProps=["additionLabel","additionPosition","allowAdditions","as","basic","button","children","className","clearable","closeOnBlur","closeOnChange","closeOnEscape","compact","deburr","defaultOpen","defaultSearchQuery","defaultSelectedLabel","defaultUpward","defaultValue","direction","disabled","error","floating","fluid","header","icon","inline","item","labeled","lazyLoad","loading","minCharacters","multiple","noResultsMessage","onAddItem","onBlur","onChange","onClick","onClose","onFocus","onLabelClick","onMouseDown","onOpen","onSearchChange","open","openOnFocus","options","placeholder","pointing","renderLabel","scrolling","search","searchInput","searchQuery","selectOnBlur","selectOnNavigation","selectedLabel","selection","simple","tabIndex","text","trigger","upward","value","wrapSelection"],We.propTypes={},We.defaultProps={additionLabel:"Add ",additionPosition:"top",closeOnBlur:!0,closeOnEscape:!0,deburr:!1,icon:"dropdown",minCharacters:1,noResultsMessage:"No results found.",openOnFocus:!0,renderLabel:je,searchInput:"text",selectOnBlur:!0,selectOnNavigation:!0,wrapSelection:!0},We.autoControlledProps=["open","searchQuery","selectedLabel","value","upward"],We.Divider=Ae.Z,We.Header=ke.Z,We.Item=Ce.Z,We.Menu=Pe.Z,We.SearchInput=Re.Z,We.Text=Le.Z},h1MN:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl");function l(e){var t=e.className,n=(0,i.Z)("divider",t),c=(0,o.Z)(l,e),u=(0,a.Z)(l,e);return s.createElement(u,(0,r.Z)({},c,{className:n}))}l.handledProps=["as","className"],l.propTypes={};const c=l},"5gOd":(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih"),u=n("35Nk");function h(e){var t=e.children,n=e.className,c=e.content,d=e.icon,p=(0,i.Z)("header",n),f=(0,o.Z)(h,e),m=(0,a.Z)(h,e);return l.kK(t)?s.createElement(m,(0,r.Z)({},f,{className:p}),u.Z.create(d,{autoGenerateKey:!1}),c):s.createElement(m,(0,r.Z)({},f,{className:p}),t)}h.handledProps=["as","children","className","content","icon"],h.propTypes={},h.create=(0,c.u5)(h,(function(e){return{content:e}}));const d=h},VsRH:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n("H+Tk"),i=n("m290"),s=n("syBy"),o=n("iGFm"),a=n("Ql6E"),l=n("ynia"),c=n("xShN"),u=n("aRJ7"),h=n("uXJ5"),d=n("ZbAl"),p=n("EVih"),f=n("lcYd"),m=n("35Nk"),g=n("kveA"),v=n("sfx3"),y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){(0,o.Z)(t.props,"onClick",e,t.props)},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.children,o=e.className,y=e.content,b=e.disabled,_=e.description,x=e.flag,w=e.icon,S=e.image,T=e.label,E=e.selected,M=e.text,A=(0,a.Z)((0,c.lG)(n,"active"),(0,c.lG)(b,"disabled"),(0,c.lG)(E,"selected"),"item",o),C=(0,s.Z)(w)?u.tQ(i,"DropdownMenu")&&"dropdown":w,k=(0,h.Z)(t,this.props),P=(0,d.Z)(t,this.props),R={role:"option","aria-disabled":b,"aria-checked":n,"aria-selected":E};if(!u.kK(i))return l.createElement(P,(0,r.Z)({},k,R,{className:A,onClick:this.handleClick}),i);var L=f.Z.create(x,{autoGenerateKey:!1}),O=m.Z.create(C,{autoGenerateKey:!1}),N=g.Z.create(S,{autoGenerateKey:!1}),I=v.Z.create(T,{autoGenerateKey:!1}),D=(0,p.Go)("span",(function(e){return{children:e}}),_,{defaultProps:{className:"description"},autoGenerateKey:!1}),F=(0,p.Go)("span",(function(e){return{children:e}}),u.kK(y)?M:y,{defaultProps:{className:"text"},autoGenerateKey:!1});return l.createElement(P,(0,r.Z)({},k,R,{className:A,onClick:this.handleClick}),N,O,L,I,D,F)},t}(l.Component);y.handledProps=["active","as","children","className","content","description","disabled","flag","icon","image","label","onClick","selected","text","value"],y.propTypes={},y.create=(0,p.u5)(y,(function(e){return e}));const b=y},"3RWJ":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.content,d=e.direction,p=e.open,f=e.scrolling,m=(0,i.Z)(d,(0,o.lG)(p,"visible"),(0,o.lG)(f,"scrolling"),"menu transition",n),g=(0,a.Z)(u,e),v=(0,l.Z)(u,e);return s.createElement(v,(0,r.Z)({},g,{className:m}),c.kK(t)?h:t)}u.handledProps=["as","children","className","content","direction","open","scrolling"],u.propTypes={};const h=u},W1O1:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("H+Tk"),i=n("m290"),s=n("iGFm"),o=n("7PNb"),a=n("Ql6E"),l=n("ynia"),c=n("uXJ5"),u=n("EVih"),h=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).handleChange=function(e){var n=(0,o.Z)(e,"target.value");(0,s.Z)(t.props,"onChange",e,(0,r.Z)({},t.props,{value:n}))},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.autoComplete,i=e.className,s=e.tabIndex,o=e.type,u=e.value,h=(0,a.Z)("search",i),d=(0,c.Z)(t,this.props);return l.createElement("input",(0,r.Z)({},d,{"aria-autocomplete":"list",autoComplete:n,className:h,onChange:this.handleChange,tabIndex:s,type:o,value:u}))},t}(l.Component);h.handledProps=["as","autoComplete","className","tabIndex","type","value"],h.propTypes={},h.defaultProps={autoComplete:"off",type:"text"},h.create=(0,u.u5)(h,(function(e){return{type:e}}));const d=h},y7kI:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)("divider",n),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({"aria-atomic":!0,"aria-live":"polite",role:"alert"},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{content:e}}));const h=u},SdTq:(e,t,n)=>{"use strict";n.d(t,{Z:()=>I});var r=n("H+Tk"),i=n("m290"),s=n("2FZd"),o=n("XomA"),a=n("Li4J"),l=n("Nwlo"),c=n("QYiU"),u=n("iGFm"),h=n("eGir"),d=n("Ql6E"),p=n("ynia"),f=n("/iLt"),m=n.n(f),g=n("jZHH"),v=n("lDzk"),y=n("GfR4"),b=n("xShN"),_=n("ZbAl"),x=n("aRJ7"),w=n("uXJ5"),S=n("Kz5q"),T=n("35Nk"),E=n("Ufck"),M=n("VKwM"),A=n("VJtu"),C=n("bjJY"),k=n("84uS"),P=n("WXA6"),R=function(e){var t=e.height+0,n=e.height+0,r=window.innerHeight;return r/2+-n/2+t+50<r},L=function(e,t,n){var r=t&&e?-n.height/2:0;return{marginLeft:-n.width/2,marginTop:r}},O=function(){return!window.ActiveXObject&&"ActiveXObject"in window},N=function(e){function t(){for(var n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(n=e.call.apply(e,[this].concat(s))||this).legacy=(0,g.Z)()&&O(),n.ref=(0,p.createRef)(),n.dimmerRef=(0,p.createRef)(),n.latestDocumentMouseDownEvent=null,n.getMountNode=function(){return(0,g.Z)()?n.props.mountNode||document.body:null},n.handleActionsOverrides=function(e){return{onActionClick:function(t,r){(0,u.Z)(e,"onActionClick",t,r),(0,u.Z)(n.props,"onActionClick",t,n.props),n.handleClose(t)}}},n.handleClose=function(e){n.setState({open:!1}),(0,u.Z)(n.props,"onClose",e,(0,r.Z)({},n.props,{open:!1}))},n.handleDocumentMouseDown=function(e){n.latestDocumentMouseDownEvent=e},n.handleDocumentClick=function(e){var t=n.props.closeOnDimmerClick,i=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!t||(0,v.Z)(n.ref.current,i)||(0,v.Z)(n.ref.current,e)||(n.setState({open:!1}),(0,u.Z)(n.props,"onClose",e,(0,r.Z)({},n.props,{open:!1})))},n.handleIconOverrides=function(e){return{onClick:function(t){(0,u.Z)(e,"onClick",t),n.handleClose(t)}}},n.handleOpen=function(e){(0,u.Z)(n.props,"onOpen",e,(0,r.Z)({},n.props,{open:!0})),n.setState({open:!0})},n.handlePortalMount=function(e){var t=n.props.eventPool;n.setState({scrolling:!1}),n.setPositionAndClassNames(),y.Z.sub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),y.Z.sub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),(0,u.Z)(n.props,"onMount",e,n.props)},n.handlePortalUnmount=function(e){var t=n.props.eventPool;cancelAnimationFrame(n.animationRequestId),y.Z.unsub("mousedown",n.handleDocumentMouseDown,{pool:t,target:n.dimmerRef.current}),y.Z.unsub("click",n.handleDocumentClick,{pool:t,target:n.dimmerRef.current}),(0,u.Z)(n.props,"onUnmount",e,n.props)},n.setPositionAndClassNames=function(){var e,t=n.props.centered,r={};if(n.ref.current){var i=n.ref.current.getBoundingClientRect(),s=R(i);e=!s;var o=n.legacy?L(s,t,i):{};m()(n.state.legacyStyles,o)||(r.legacyStyles=o),n.state.scrolling!==e&&(r.scrolling=e)}(0,c.Z)(r)||n.setState(r),n.animationRequestId=requestAnimationFrame(n.setPositionAndClassNames)},n.renderContent=function(e){var i=n.props,s=i.actions,o=i.basic,a=i.children,l=i.className,c=i.closeIcon,u=i.content,f=i.header,m=i.size,g=i.style,v=n.state,y=v.legacyStyles,w=v.scrolling,S=(0,d.Z)("ui",m,(0,b.lG)(o,"basic"),(0,b.lG)(n.legacy,"legacy"),(0,b.lG)(w,"scrolling"),"modal transition visible active",l),E=(0,_.Z)(t,n.props),C=!0===c?"close":c,k=T.Z.create(C,{overrideProps:n.handleIconOverrides});return p.createElement(h.R,{innerRef:n.ref},p.createElement(E,(0,r.Z)({},e,{className:S,style:(0,r.Z)({},y,g)}),k,x.kK(a)?p.createElement(p.Fragment,null,P.Z.create(f,{autoGenerateKey:!1}),A.Z.create(u,{autoGenerateKey:!1}),M.Z.create(s,{overrideProps:n.handleActionsOverrides})):a))},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.handlePortalUnmount()},n.render=function(){var e=this.props,n=e.centered,i=e.closeOnDocumentClick,c=e.dimmer,u=e.eventPool,d=e.trigger,f=this.state,m=f.open,v=f.scrolling,y=this.getMountNode();if(!(0,g.Z)())return(0,p.isValidElement)(d)?d:null;var b=(0,w.Z)(t,this.props),_=E.Z.handledProps,x=(0,l.Z)(b,(function(e,t,n){return(0,a.Z)(_,n)||(e[n]=t),e}),{}),S=(0,o.Z)(b,_);return p.createElement(E.Z,(0,r.Z)({closeOnDocumentClick:i},S,{trigger:d,eventPool:u,mountNode:y,open:m,onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount}),p.createElement(h.R,{innerRef:this.dimmerRef},k.Z.create((0,s.Z)(c)?c:{},{autoGenerateKey:!1,defaultProps:{blurring:"blurring"===c,inverted:"inverted"===c},overrideProps:{children:this.renderContent(x),centered:n,mountNode:y,scrolling:v}})))},t}(S.Z);N.handledProps=["actions","as","basic","centered","children","className","closeIcon","closeOnDimmerClick","closeOnDocumentClick","content","defaultOpen","dimmer","eventPool","header","mountNode","onActionClick","onClose","onMount","onOpen","onUnmount","open","size","style","trigger"],N.propTypes={},N.defaultProps={centered:!0,dimmer:!0,closeOnDimmerClick:!0,closeOnDocumentClick:!1,eventPool:"Modal"},N.autoControlledProps=["open"],N.Actions=M.Z,N.Content=A.Z,N.Description=C.Z,N.Dimmer=k.Z,N.Header=P.Z;const I=N},VKwM:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n("H+Tk"),i=n("m290"),s=n("hR+M"),o=n("iGFm"),a=n("Ql6E"),l=n("ynia"),c=n("uXJ5"),u=n("ZbAl"),h=n("aRJ7"),d=n("EVih"),p=n("WUUJ"),f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleButtonOverrides=function(e){return{onClick:function(n,r){(0,o.Z)(e,"onClick",n,r),(0,o.Z)(t.props,"onActionClick",n,r)}}},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this,n=this.props,i=n.actions,o=n.children,d=n.className,f=n.content,m=(0,a.Z)("actions",d),g=(0,c.Z)(t,this.props),v=(0,u.Z)(t,this.props);return h.kK(o)?h.kK(f)?l.createElement(v,(0,r.Z)({},g,{className:m}),(0,s.Z)(i,(function(t){return p.Z.create(t,{overrideProps:e.handleButtonOverrides})}))):l.createElement(v,(0,r.Z)({},g,{className:m}),f):l.createElement(v,(0,r.Z)({},g,{className:m}),o)},t}(l.Component);f.handledProps=["actions","as","children","className","content","onActionClick"],f.propTypes={},f.create=(0,d.u5)(f,(function(e){return{actions:e}}))},VJtu:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7"),u=n("EVih");function h(e){var t=e.children,n=e.className,u=e.content,d=e.image,p=e.scrolling,f=(0,i.Z)(n,(0,o.lG)(d,"image"),(0,o.lG)(p,"scrolling"),"content"),m=(0,a.Z)(h,e),g=(0,l.Z)(h,e);return s.createElement(g,(0,r.Z)({},m,{className:f}),c.kK(t)?u:t)}h.handledProps=["as","children","className","content","image","scrolling"],h.propTypes={},h.create=(0,u.u5)(h,(function(e){return{content:e}}));const d=h},bjJY:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7");function c(e){var t=e.children,n=e.className,u=e.content,h=(0,i.Z)("description",n),d=(0,o.Z)(c,e),p=(0,a.Z)(c,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?u:t)}c.handledProps=["as","children","className","content"],c.propTypes={};const u=c},"84uS":(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n("H+Tk"),i=n("eGir"),s=n("Ql6E"),o=n("ynia"),a=n("xShN"),l=n("uXJ5"),c=n("ZbAl"),u=n("KJe+");const h=(0,n("jZHH").Z)()?o.useLayoutEffect:o.useEffect;var d=/\s+/;var p=new Map,f=function(e,t){var n=function(e){var t=[];return e?(e.forEach((function(e){"string"==typeof e.current&&e.current.split(d).forEach((function(e){t.push(e)}))})),t.filter((function(e,t,n){return e.length>0&&n.indexOf(e)===t}))):[]}(t),r=function(e,t){return[t.filter((function(t){return-1===e.indexOf(t)})),e.filter((function(e){return-1===t.indexOf(e)}))]}(p.get(e)||[],n),i=r[0],s=r[1];e&&(i.forEach((function(t){return e.classList.add(t)})),s.forEach((function(t){return e.classList.remove(t)}))),p.set(e,n)},m=new function(){var e=this;this.add=function(t,n){if(e.nodes.has(t)){e.nodes.get(t).add(n)}else{var r=new Set;r.add(n),e.nodes.set(t,r)}},this.del=function(t,n){if(e.nodes.has(t)){var r=e.nodes.get(t);1!==r.size?r.delete(n):e.nodes.delete(t)}},this.emit=function(t,n){n(t,e.nodes.get(t))},this.nodes=new Map};var g=n("aRJ7"),v=n("EVih");function y(e){var t=e.blurring,n=e.children,d=e.className,p=e.centered,v=e.content,b=e.inverted,_=e.mountNode,x=e.scrolling,w=o.useRef(),S=(0,s.Z)("ui",(0,a.lG)(b,"inverted"),(0,a.lG)(!p,"top aligned"),"page modals dimmer transition visible active",d),T=(0,s.Z)("dimmable dimmed",(0,a.lG)(t,"blurring"),(0,a.lG)(x,"scrolling")),E=(0,l.Z)(y,e),M=(0,c.Z)(y,e);return function(e,t){var n=o.useRef(),r=o.useRef(!1);h((function(){if(n.current=t,r.current){var i=(0,u.I)(e)?e.current:e;m.emit(i,f)}r.current=!0}),[t]),h((function(){var t=(0,u.I)(e)?e.current:e;return m.add(t,n),m.emit(t,f),function(){m.del(t,n),m.emit(t,f)}}),[e])}(_,T),o.useEffect((function(){w.current&&w.current.style&&w.current.style.setProperty("display","flex","important")}),[]),o.createElement(i.R,{innerRef:w},o.createElement(M,(0,r.Z)({},E,{className:S}),g.kK(n)?v:n))}y.handledProps=["as","blurring","centered","children","className","content","inverted","mountNode","scrolling"],y.propTypes={},y.create=(0,v.u5)(y,(function(e){return{content:e}}));const b=y},WXA6:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)("header",n),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{content:e}}));const h=u},"9EQt":(e,t,n)=>{"use strict";n.d(t,{Z:()=>gt});var r=n("H+Tk"),i=n("m290"),s=n("syBy"),o=n("b0ud"),a=n("iGFm"),l=n("2Nik"),c=n("2FZd");const u=function(e){return(0,l.Z)(e)&&1===e.nodeType&&!(0,c.Z)(e)};var h=n("ogfy"),d=n("XomA"),p=n("Li4J"),f=n("Nwlo"),m=n("/lYH"),g=n.n(m),v=n("Ql6E"),y=n("ynia"),b=y.createContext();y.createContext();var _=function(e,t){if("function"==typeof e)return function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}}(e,t);null!=e&&(e.current=t)},x=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},w="undefined"!=typeof window&&window.document&&window.document.createElement?y.useLayoutEffect:y.useEffect,S=n("7wdh");function T(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function E(e){return e instanceof T(e).Element||e instanceof Element}function M(e){return e instanceof T(e).HTMLElement||e instanceof HTMLElement}function A(e){return"undefined"!=typeof ShadowRoot&&(e instanceof T(e).ShadowRoot||e instanceof ShadowRoot)}var C=Math.max,k=Math.min,P=Math.round;function R(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function L(){return!/^((?!chrome|android).)*safari/i.test(R())}function O(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,s=1;t&&M(e)&&(i=e.offsetWidth>0&&P(r.width)/e.offsetWidth||1,s=e.offsetHeight>0&&P(r.height)/e.offsetHeight||1);var o=(E(e)?T(e):window).visualViewport,a=!L()&&n,l=(r.left+(a&&o?o.offsetLeft:0))/i,c=(r.top+(a&&o?o.offsetTop:0))/s,u=r.width/i,h=r.height/s;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function N(e){var t=T(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function I(e){return e?(e.nodeName||"").toLowerCase():null}function D(e){return((E(e)?e.ownerDocument:e.document)||window.document).documentElement}function F(e){return O(D(e)).left+N(e).scrollLeft}function z(e){return T(e).getComputedStyle(e)}function U(e){var t=z(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function B(e,t,n){void 0===n&&(n=!1);var r,i,s=M(t),o=M(t)&&function(e){var t=e.getBoundingClientRect(),n=P(t.width)/e.offsetWidth||1,r=P(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=D(t),l=O(e,o,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(s||!s&&!n)&&(("body"!==I(t)||U(a))&&(c=(r=t)!==T(r)&&M(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:N(r)),M(t)?((u=O(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=F(a))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function V(e){var t=O(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function G(e){return"html"===I(e)?e:e.assignedSlot||e.parentNode||(A(e)?e.host:null)||D(e)}function Z(e){return["html","body","#document"].indexOf(I(e))>=0?e.ownerDocument.body:M(e)&&U(e)?e:Z(G(e))}function H(e,t){var n;void 0===t&&(t=[]);var r=Z(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),s=T(r),o=i?[s].concat(s.visualViewport||[],U(r)?r:[]):r,a=t.concat(o);return i?a:a.concat(H(G(o)))}function j(e){return["table","td","th"].indexOf(I(e))>=0}function W(e){return M(e)&&"fixed"!==z(e).position?e.offsetParent:null}function q(e){for(var t=T(e),n=W(e);n&&j(n)&&"static"===z(n).position;)n=W(n);return n&&("html"===I(n)||"body"===I(n)&&"static"===z(n).position)?t:n||function(e){var t=/firefox/i.test(R());if(/Trident/i.test(R())&&M(e)&&"fixed"===z(e).position)return null;var n=G(e);for(A(n)&&(n=n.host);M(n)&&["html","body"].indexOf(I(n))<0;){var r=z(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}var K="top",X="bottom",Y="right",J="left",$="auto",Q=[K,X,Y,J],ee="start",te="end",ne="viewport",re="popper",ie=Q.reduce((function(e,t){return e.concat([t+"-"+ee,t+"-"+te])}),[]),se=[].concat(Q,[$]).reduce((function(e,t){return e.concat([t,t+"-"+ee,t+"-"+te])}),[]),oe=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function ae(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var le={placement:"bottom",modifiers:[],strategy:"absolute"};function ce(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function ue(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,s=void 0===i?le:i;return function(e,t,n){void 0===n&&(n=s);var i,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},le,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:a,setOptions:function(n){var i="function"==typeof n?n(a.options):n;h(),a.options=Object.assign({},s,a.options,i),a.scrollParents={reference:E(e)?H(e):e.contextElement?H(e.contextElement):[],popper:H(t)};var o=function(e){var t=ae(e);return oe.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=o.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var s=i({state:a,name:t,instance:u,options:r}),o=function(){};l.push(s||o)}})),u.update()},forceUpdate:function(){if(!c){var e=a.elements,t=e.reference,n=e.popper;if(ce(t,n)){a.rects={reference:B(t,q(n),"fixed"===a.options.strategy),popper:V(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],s=i.fn,o=i.options,l=void 0===o?{}:o,h=i.name;"function"==typeof s&&(a=s({state:a,options:l,name:h,instance:u})||a)}else a.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){u.forceUpdate(),e(a)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(i())}))}))),o}),destroy:function(){h(),c=!0}};if(!ce(e,t))return u;function h(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var he={passive:!0};function de(e){return e.split("-")[0]}function pe(e){return e.split("-")[1]}function fe(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function me(e){var t,n=e.reference,r=e.element,i=e.placement,s=i?de(i):null,o=i?pe(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(s){case K:t={x:a,y:n.y-r.height};break;case X:t={x:a,y:n.y+n.height};break;case Y:t={x:n.x+n.width,y:l};break;case J:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=s?fe(s):null;if(null!=c){var u="y"===c?"height":"width";switch(o){case ee:t[c]=t[c]-(n[u]/2-r[u]/2);break;case te:t[c]=t[c]+(n[u]/2-r[u]/2)}}return t}var ge={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ve(e){var t,n=e.popper,r=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,d=o.x,p=void 0===d?0:d,f=o.y,m=void 0===f?0:f,g="function"==typeof u?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),b=J,_=K,x=window;if(c){var w=q(n),S="clientHeight",E="clientWidth";if(w===T(n)&&"static"!==z(w=D(n)).position&&"absolute"===a&&(S="scrollHeight",E="scrollWidth"),i===K||(i===J||i===Y)&&s===te)_=X,m-=(h&&w===x&&x.visualViewport?x.visualViewport.height:w[S])-r.height,m*=l?1:-1;if(i===J||(i===K||i===X)&&s===te)b=Y,p-=(h&&w===x&&x.visualViewport?x.visualViewport.width:w[E])-r.width,p*=l?1:-1}var M,A=Object.assign({position:a},c&&ge),C=!0===u?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:P(t*r)/r||0,y:P(n*r)/r||0}}({x:p,y:m}):{x:p,y:m};return p=C.x,m=C.y,l?Object.assign({},A,((M={})[_]=y?"0":"",M[b]=v?"0":"",M.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",M)):Object.assign({},A,((t={})[_]=y?m+"px":"",t[b]=v?p+"px":"",t.transform="",t))}const ye={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,s=void 0===i?[0,0]:i,o=se.reduce((function(e,n){return e[n]=function(e,t,n){var r=de(e),i=[J,K].indexOf(r)>=0?-1:1,s="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[J,Y].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,s),e}),{}),a=o[t.placement],l=a.x,c=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}};var be={left:"right",right:"left",bottom:"top",top:"bottom"};function _e(e){return e.replace(/left|right|bottom|top/g,(function(e){return be[e]}))}var xe={start:"end",end:"start"};function we(e){return e.replace(/start|end/g,(function(e){return xe[e]}))}function Se(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&A(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Te(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ee(e,t,n){return t===ne?Te(function(e,t){var n=T(e),r=D(e),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=L();(c||!c&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+F(e),y:l}}(e,n)):E(t)?function(e,t){var n=O(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Te(function(e){var t,n=D(e),r=N(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=C(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=C(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+F(e),l=-r.scrollTop;return"rtl"===z(i||n).direction&&(a+=C(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}(D(e)))}function Me(e,t,n,r){var i="clippingParents"===t?function(e){var t=H(G(e)),n=["absolute","fixed"].indexOf(z(e).position)>=0&&M(e)?q(e):e;return E(n)?t.filter((function(e){return E(e)&&Se(e,n)&&"body"!==I(e)})):[]}(e):[].concat(t),s=[].concat(i,[n]),o=s[0],a=s.reduce((function(t,n){var i=Ee(e,n,r);return t.top=C(i.top,t.top),t.right=k(i.right,t.right),t.bottom=k(i.bottom,t.bottom),t.left=C(i.left,t.left),t}),Ee(e,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ae(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Ce(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ke(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,s=n.strategy,o=void 0===s?e.strategy:s,a=n.boundary,l=void 0===a?"clippingParents":a,c=n.rootBoundary,u=void 0===c?ne:c,h=n.elementContext,d=void 0===h?re:h,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=Ae("number"!=typeof g?g:Ce(g,Q)),y=d===re?"reference":re,b=e.rects.popper,_=e.elements[f?y:d],x=Me(E(_)?_:_.contextElement||D(e.elements.popper),l,u,o),w=O(e.elements.reference),S=me({reference:w,element:b,strategy:"absolute",placement:i}),T=Te(Object.assign({},b,S)),M=d===re?T:w,A={top:x.top-M.top+v.top,bottom:M.bottom-x.bottom+v.bottom,left:x.left-M.left+v.left,right:M.right-x.right+v.right},C=e.modifiersData.offset;if(d===re&&C){var k=C[i];Object.keys(A).forEach((function(e){var t=[Y,X].indexOf(e)>=0?1:-1,n=[K,X].indexOf(e)>=0?"y":"x";A[e]+=k[n]*t}))}return A}function Pe(e,t,n){return C(e,k(t,n))}const Re={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0!==o&&o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=ke(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=de(t.placement),y=pe(t.placement),b=!y,_=fe(v),x="x"===_?"y":"x",w=t.modifiersData.popperOffsets,S=t.rects.reference,T=t.rects.popper,E="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,M="number"==typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(w){if(s){var R,L="y"===_?K:J,O="y"===_?X:Y,N="y"===_?"height":"width",I=w[_],D=I+g[L],F=I-g[O],z=p?-T[N]/2:0,U=y===ee?S[N]:T[N],B=y===ee?-T[N]:-S[N],G=t.elements.arrow,Z=p&&G?V(G):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},j=H[L],W=H[O],$=Pe(0,S[N],Z[N]),Q=b?S[N]/2-z-$-j-M.mainAxis:U-$-j-M.mainAxis,te=b?-S[N]/2+z+$+W+M.mainAxis:B+$+W+M.mainAxis,ne=t.elements.arrow&&q(t.elements.arrow),re=ne?"y"===_?ne.clientTop||0:ne.clientLeft||0:0,ie=null!=(R=null==A?void 0:A[_])?R:0,se=I+te-ie,oe=Pe(p?k(D,I+Q-ie-re):D,I,p?C(F,se):F);w[_]=oe,P[_]=oe-I}if(a){var ae,le="x"===_?K:J,ce="x"===_?X:Y,ue=w[x],he="y"===x?"height":"width",me=ue+g[le],ge=ue-g[ce],ve=-1!==[K,J].indexOf(v),ye=null!=(ae=null==A?void 0:A[x])?ae:0,be=ve?me:ue-S[he]-T[he]-ye+M.altAxis,_e=ve?ue+S[he]+T[he]-ye-M.altAxis:ge,xe=p&&ve?function(e,t,n){var r=Pe(e,t,n);return r>n?n:r}(be,ue,_e):Pe(p?be:me,ue,p?_e:ge);w[x]=xe,P[x]=xe-ue}t.modifiersData[r]=P}},requiresIfExists:["offset"]};const Le={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=de(n.placement),l=fe(a),c=[J,Y].indexOf(a)>=0?"height":"width";if(s&&o){var u=function(e,t){return Ae("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Ce(e,Q))}(i.padding,n),h=V(s),d="y"===l?K:J,p="y"===l?X:Y,f=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],g=q(s),v=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=f/2-m/2,b=u[d],_=v-h[c]-u[p],x=v/2-h[c]/2+y,w=Pe(b,x,_),S=l;n.modifiersData[r]=((t={})[S]=w,t.centerOffset=w-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&Se(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Oe(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Ne(e){return[K,Y,X,J].some((function(t){return e[t]>=0}))}var Ie=ue({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,s=void 0===i||i,o=r.resize,a=void 0===o||o,l=T(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach((function(e){e.addEventListener("scroll",n.update,he)})),a&&l.addEventListener("resize",n.update,he),function(){s&&c.forEach((function(e){e.removeEventListener("scroll",n.update,he)})),a&&l.removeEventListener("resize",n.update,he)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=me({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,l=void 0===a||a,c={placement:de(t.placement),variation:pe(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ve(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ve(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];M(i)&&I(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});M(r)&&I(r)&&(Object.assign(r.style,s),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},ye,{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,s=void 0===i||i,o=n.altAxis,a=void 0===o||o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=t.options.placement,v=de(g),y=l||(v===g||!f?[_e(g)]:function(e){if(de(e)===$)return[];var t=_e(e);return[we(e),t,we(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat(de(n)===$?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?se:l,u=pe(r),h=u?a?ie:ie.filter((function(e){return pe(e)===u})):Q,d=h.filter((function(e){return c.indexOf(e)>=0}));0===d.length&&(d=h);var p=d.reduce((function(t,n){return t[n]=ke(e,{placement:n,boundary:i,rootBoundary:s,padding:o})[de(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),_=t.rects.reference,x=t.rects.popper,w=new Map,S=!0,T=b[0],E=0;E<b.length;E++){var M=b[E],A=de(M),C=pe(M)===ee,k=[K,X].indexOf(A)>=0,P=k?"width":"height",R=ke(t,{placement:M,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),L=k?C?Y:J:C?X:K;_[P]>x[P]&&(L=_e(L));var O=_e(L),N=[];if(s&&N.push(R[A]<=0),a&&N.push(R[L]<=0,R[O]<=0),N.every((function(e){return e}))){T=M,S=!1;break}w.set(M,N)}if(S)for(var I=function(e){var t=b.find((function(t){var n=w.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return T=t,"break"},D=f?3:1;D>0;D--){if("break"===I(D))break}t.placement!==T&&(t.modifiersData[r]._skip=!0,t.placement=T,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},Re,Le,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=ke(t,{elementContext:"reference"}),a=ke(t,{altBoundary:!0}),l=Oe(o,r),c=Oe(a,i,s),u=Ne(l),h=Ne(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}}]}),De=n("/Arh"),Fe=n.n(De),ze=[],Ue=function(){},Be=function(){return Promise.resolve(null)},Ve=[];function Ge(e){var t=e.placement,n=void 0===t?"bottom":t,r=e.strategy,i=void 0===r?"absolute":r,s=e.modifiers,o=void 0===s?Ve:s,a=e.referenceElement,l=e.onFirstUpdate,c=e.innerRef,u=e.children,h=y.useContext(b),d=y.useState(null),p=d[0],f=d[1],m=y.useState(null),g=m[0],v=m[1];y.useEffect((function(){_(c,p)}),[c,p]);var T,E=y.useMemo((function(){return{placement:n,strategy:i,onFirstUpdate:l,modifiers:[].concat(o,[{name:"arrow",enabled:null!=g,options:{element:g}}])}}),[n,i,l,o,g]),M=function(e,t,n){void 0===n&&(n={});var r=y.useRef(null),i={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||ze},s=y.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=s[0],a=s[1],l=y.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);S.flushSync((function(){a({styles:x(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:x(n.map((function(e){return[e,t.attributes[e]]})))})}))},requires:["computeStyles"]}}),[]),c=y.useMemo((function(){var e={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[l,{name:"applyStyles",enabled:!1}])};return Fe()(r.current,e)?r.current||e:(r.current=e,e)}),[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,l]),u=y.useRef();return w((function(){u.current&&u.current.setOptions(c)}),[c]),w((function(){if(null!=e&&null!=t){var r=(n.createPopper||Ie)(e,t,c);return u.current=r,function(){r.destroy(),u.current=null}}}),[e,t,n.createPopper]),{state:u.current?u.current.state:null,styles:o.styles,attributes:o.attributes,update:u.current?u.current.update:null,forceUpdate:u.current?u.current.forceUpdate:null}}(a||h,p,E),A=M.state,C=M.styles,k=M.forceUpdate,P=M.update,R=y.useMemo((function(){return{ref:f,style:C.popper,placement:A?A.placement:n,hasPopperEscaped:A&&A.modifiersData.hide?A.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:A&&A.modifiersData.hide?A.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:C.arrow,ref:v},forceUpdate:k||Ue,update:P||Be}}),[f,v,n,A,C,P,k]);return(T=u,Array.isArray(T)?T[0]:T)(R)}var Ze=n("/iLt"),He=n.n(Ze),je=n("GfR4"),We=n("xShN"),qe=n("ZbAl"),Ke=n("aRJ7"),Xe=n("EVih"),Ye=n("uXJ5"),Je=n("Ufck"),$e=n("QNqF"),Qe=n("cKw+");const et=function(e,t,n,r){return(0,Qe.Z)(e,(function(e,i,s){t(r,n(e),i,s)})),r};const tt=function(e,t){return function(n,r){return et(n,e,t(r),{})}};var nt=n("b24R"),rt=Object.prototype.toString;const it=tt((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=rt.call(t)),e[t]=n}),(0,$e.Z)(nt.Z));var st=n("7lg8"),ot={"top center":"top","top left":"top-start","top right":"top-end","bottom center":"bottom","bottom left":"bottom-start","bottom right":"bottom-end","right center":"right","left center":"left"},at=((0,st.Z)(ot),it(ot)),lt=n("LbeA"),ct=n("A40A"),ut=n("KJe+"),ht=function(){function e(e){this.ref=e}return e.prototype.getBoundingClientRect=function(){return(0,a.Z)(this.ref.current,"getBoundingClientRect")||{}},(0,lt.Z)(e,[{key:"clientWidth",get:function(){return this.getBoundingClientRect().width}},{key:"clientHeight",get:function(){return this.getBoundingClientRect().height}},{key:"parentNode",get:function(){return this.ref.current?this.ref.current.parentNode:void 0}}]),e}(),dt=(0,ct.Z)((function(e){return new ht((0,ut.I)(e)?e:{current:e})}));const pt=dt;var ft=n("1+qn"),mt=n("0CiP"),gt=function(e){function t(){for(var n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(n=e.call.apply(e,[this].concat(s))||this).state={},n.open=!1,n.zIndexWasSynced=!1,n.triggerRef=y.createRef(),n.elementRef=y.createRef(),n.getPortalProps=function(){var e={},t=n.props,r=t.on,i=t.hoverable,s=(0,h.Z)(r)?r:[r];return i&&(e.closeOnPortalMouseLeave=!0,e.mouseLeaveDelay=300),(0,p.Z)(s,"hover")&&(e.openOnTriggerClick=!1,e.closeOnTriggerClick=!1,e.openOnTriggerMouseEnter=!0,e.closeOnTriggerMouseLeave=!0,e.mouseLeaveDelay=70,e.mouseEnterDelay=50),(0,p.Z)(s,"click")&&(e.openOnTriggerClick=!0,e.closeOnTriggerClick=!0,e.closeOnDocumentClick=!0),(0,p.Z)(s,"focus")&&(e.openOnTriggerFocus=!0,e.closeOnTriggerBlur=!0),e},n.hideOnScroll=function(e){u(e.target)&&n.elementRef.current.contains(e.target)||(n.setState({closed:!0}),je.Z.unsub("scroll",n.hideOnScroll,{target:window}),n.timeoutId=setTimeout((function(){n.setState({closed:!1})}),50),n.handleClose(e))},n.handleClose=function(e){(0,a.Z)(n.props,"onClose",e,(0,r.Z)({},n.props,{open:!1}))},n.handleOpen=function(e){(0,a.Z)(n.props,"onOpen",e,(0,r.Z)({},n.props,{open:!0}))},n.handlePortalMount=function(e){(0,a.Z)(n.props,"onMount",e,n.props)},n.handlePortalUnmount=function(e){n.positionUpdate=null,(0,a.Z)(n.props,"onUnmount",e,n.props)},n.renderContent=function(e){var i=e.placement,s=e.ref,o=e.update,a=e.style,l=n.props,c=l.basic,u=l.children,h=l.className,d=l.content,p=l.hideOnScroll,f=l.flowing,m=l.header,b=l.inverted,_=l.popper,x=l.size,w=l.style,S=l.wide,T=n.state.contentRestProps;n.positionUpdate=o;var E=(0,v.Z)("ui",at[i],x,(0,We.sU)(S,"wide"),(0,We.lG)(c,"basic"),(0,We.lG)(f,"flowing"),(0,We.lG)(b,"inverted"),"popup transition visible",h),M=(0,qe.Z)(t,n.props),A=(0,r.Z)({left:"auto",right:"auto",position:"initial"},w),C=y.createElement(M,(0,r.Z)({},T,{className:E,style:A,ref:n.elementRef}),Ke.kK(u)?y.createElement(y.Fragment,null,mt.Z.create(m,{autoGenerateKey:!1}),ft.Z.create(d,{autoGenerateKey:!1})):u,p&&y.createElement(g(),{on:n.hideOnScroll,name:"scroll",target:"window"}));return(0,Xe.DE)(_||{},{overrideProps:{children:C,ref:s,style:(0,r.Z)({display:"flex"},a)}})},n}(0,i.Z)(t,e),t.getDerivedStateFromProps=function(e,n){if(n.closed||n.disabled)return{};var r=(0,Ye.Z)(t,e);return{contentRestProps:(0,f.Z)(r,(function(e,t,n){return(0,p.Z)(Je.Z.handledProps,n)||(e[n]=t),e}),{}),portalRestProps:(0,d.Z)(r,Je.Z.handledProps)}};var n=t.prototype;return n.componentDidUpdate=function(e){He()(this.props.popperDependencies,e.popperDependencies)||this.handleUpdate()},n.componentWillUnmount=function(){clearTimeout(this.timeoutId)},n.handleUpdate=function(){this.positionUpdate&&this.positionUpdate()},n.render=function(){var e=this,t=this.props,n=t.context,i=t.disabled,a=t.eventsEnabled,l=t.offset,c=t.pinned,u=t.popper,h=t.popperModifiers,d=t.position,p=t.positionFixed,f=t.trigger,m=this.state,g=m.closed,v=m.portalRestProps;if(g||i)return f;var b=[{name:"arrow",enabled:!1},{name:"eventListeners",options:{scroll:!!a,resize:!!a}},{name:"flip",enabled:!c},{name:"preventOverflow",enabled:!!l},{name:"offset",enabled:!!l,options:{offset:l}}].concat(h,[{name:"syncZIndex",enabled:!0,phase:"beforeRead",fn:function(t){var n,r=t.state;if(!e.zIndexWasSynced){var i=null==u||null==(n=u.style)?void 0:n.zIndex;(0,o.Z)(i)&&(r.elements.popper.style.zIndex=window.getComputedStyle(r.elements.popper.firstChild).zIndex),e.zIndexWasSynced=!0}},effect:function(){return function(){e.zIndexWasSynced=!1}}}]),_=pt((0,s.Z)(n)?this.triggerRef:n),x=(0,r.Z)({},this.getPortalProps(),v);return y.createElement(Je.Z,(0,r.Z)({},x,{onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount,trigger:f,triggerRef:this.triggerRef}),y.createElement(Ge,{modifiers:b,placement:ot[d],strategy:p?"fixed":null,referenceElement:_},this.renderContent))},t}(y.Component);gt.handledProps=["as","basic","children","className","content","context","disabled","eventsEnabled","flowing","header","hideOnScroll","hoverable","inverted","offset","on","onClose","onMount","onOpen","onUnmount","pinned","popper","popperDependencies","popperModifiers","position","positionFixed","size","style","trigger","wide"],gt.propTypes={},gt.defaultProps={disabled:!1,eventsEnabled:!0,on:["click","hover"],pinned:!1,popperModifiers:[],position:"top left"},gt.Content=ft.Z,gt.Header=mt.Z},"1+qn":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)("content",n),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{children:e}}))},"0CiP":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7"),c=n("EVih");function u(e){var t=e.children,n=e.className,c=e.content,h=(0,i.Z)("header",n),d=(0,o.Z)(u,e),p=(0,a.Z)(u,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(t)?c:t)}u.handledProps=["as","children","className","content"],u.propTypes={},u.create=(0,c.u5)(u,(function(e){return{children:e}}))},"+2B3":(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n("H+Tk"),i=n("m290"),s=n("tcvG"),o=n("Z8k3"),a=n("Q1Uy"),l=n("ud8q"),c=s.Z.isFinite,u=Math.min;const h=function(e){var t=Math[e];return function(e,n){if(e=(0,a.Z)(e),(n=null==n?0:u((0,o.Z)(n),292))&&c(e)){var r=((0,l.Z)(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return+((r=((0,l.Z)(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}("round");const d=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e};const p=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=(0,a.Z)(n))==n?n:0),void 0!==t&&(t=(t=(0,a.Z)(t))==t?t:0),d((0,a.Z)(e),t,n)};var f=n("b0ud"),m=n("Ql6E"),g=n("ynia"),v=n("aRJ7"),y=n("EVih"),b=n("xShN"),_=n("uXJ5"),x=n("ZbAl"),w=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).calculatePercent=function(){var e=t.props,n=e.percent,r=e.total,i=e.value;return(0,f.Z)(n)?(0,f.Z)(r)||(0,f.Z)(i)?void 0:i/r*100:n},t.computeValueText=function(e){var n=t.props,r=n.progress,i=n.total,s=n.value;return"value"===r?s:"ratio"===r?s+"/"+i:e+"%"},t.getPercent=function(){var e=t.props,n=e.precision,r=e.progress,i=e.total,s=e.value,o=p(t.calculatePercent(),0,100);return(0,f.Z)(i)||(0,f.Z)(s)||"value"!==r?"value"===r?s:(0,f.Z)(n)?o:h(o,n):s/i*100},t.isAutoSuccess=function(){var e=t.props,n=e.autoSuccess,r=e.percent,i=e.total,s=e.value;return n&&(r>=100||s>=i)},t.renderLabel=function(){var e=t.props,n=e.children,r=e.content,i=e.label;return v.kK(n)?v.kK(r)?(0,y.DE)(i,{autoGenerateKey:!1,defaultProps:{className:"label"}}):g.createElement("div",{className:"label"},r):g.createElement("div",{className:"label"},n)},t.renderProgress=function(e){var n=t.props,r=n.precision;if(n.progress||!(0,f.Z)(r))return g.createElement("div",{className:"progress"},t.computeValueText(e))},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.attached,s=e.className,o=e.color,a=e.disabled,l=e.error,c=e.indicating,u=e.inverted,h=e.size,d=e.success,p=e.warning,f=(0,m.Z)("ui",o,h,(0,b.lG)(n||c,"active"),(0,b.lG)(a,"disabled"),(0,b.lG)(l,"error"),(0,b.lG)(c,"indicating"),(0,b.lG)(u,"inverted"),(0,b.lG)(d||this.isAutoSuccess(),"success"),(0,b.lG)(p,"warning"),(0,b.cD)(i,"attached"),"progress",s),v=(0,_.Z)(t,this.props),y=(0,x.Z)(t,this.props),w=this.getPercent()||0;return g.createElement(y,(0,r.Z)({},v,{className:f,"data-percent":Math.floor(w)}),g.createElement("div",{className:"bar",style:{width:w+"%"}},this.renderProgress(w)),this.renderLabel())},t}(g.Component);w.handledProps=["active","as","attached","autoSuccess","children","className","color","content","disabled","error","indicating","inverted","label","percent","precision","progress","size","success","total","value","warning"],w.propTypes={};const S=w},BUbn:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n("H+Tk"),i=n("m290"),s=n("iGFm"),o=n("ynia"),a=function(e,t){return!!e&&!!e[t]},l=function(){function e(e){return function(e){var t=e.capture,n=e.listener,r=e.type,i=e.target,s=e.targetRef,l=o.useRef(n);l.current=n;var c=o.useCallback((function(e){return l.current(e)}),[]),u=o.useRef(void 0);o.useEffect((function(){var e=void 0===s?i:s.current,n=function(e){var t,n,r;if(e)return"object"==typeof e.window&&e.window===e?e.event:null!=(t=null==(n=e.ownerDocument)||null==(r=n.defaultView)?void 0:r.event)?t:void 0}(window),o=function(e){e!==n?c(e):n=void 0};return a(e,"addEventListener")&&e.addEventListener(r,o,t),u.current=setTimeout((function(){n=void 0}),1),function(){clearTimeout(u.current),n=void 0,a(e,"removeEventListener")&&e.removeEventListener(r,o,t)}}),[t,c,i,s,r])}(e),null}return e.defaultProps={capture:!1},e}(),c={current:"undefined"==typeof document?null:document},u=("undefined"==typeof window||window,n("KJe+")),h=n("eGir"),d=n("Ql6E"),p=n("lDzk"),f=n("xShN"),m=n("uXJ5"),g=n("ZbAl"),v=n("aRJ7"),y=n("SZCj"),b=n("6qAj"),_=function(e){function t(n){var i;return(i=e.call(this,n)||this).ref=(0,o.createRef)(),i.handleAnimationStart=function(){var e=i.props.visible?"onVisible":"onHide";clearTimeout(i.animationTimer),i.animationTimer=setTimeout(i.handleAnimationEnd,t.animationDuration),i.skipNextCallback?i.skipNextCallback=!1:(0,s.Z)(i.props,e,null,i.props)},i.handleAnimationEnd=function(){var e=i.props.visible?"onShow":"onHidden";i.setState({animationTick:0}),(0,s.Z)(i.props,e,null,i.props)},i.handleDocumentClick=function(e){(0,p.Z)(i.ref.current,e)||(i.skipNextCallback=!0,(0,s.Z)(i.props,"onHide",e,(0,r.Z)({},i.props,{visible:!1})))},i.state={animationTick:0,visible:n.visible},i}(0,i.Z)(t,e),t.getDerivedStateFromProps=function(e,t){var n=!!e.visible==!!t.visible?0:1;return{animationTick:t.animationTick+n,visible:e.visible}};var n=t.prototype;return n.componentDidUpdate=function(e,t){this.state.animationTick>t.animationTick&&this.handleAnimationStart()},n.componentWillUnmount=function(){clearTimeout(this.animationTimer)},n.render=function(){var e=this.props,n=e.animation,i=e.className,s=e.children,a=e.content,c=e.direction,p=e.target,y=e.visible,b=e.width,_=this.state.animationTick,x=(0,d.Z)("ui",n,c,b,(0,f.lG)(_>0,"animating"),(0,f.lG)(y,"visible"),"sidebar",i),w=(0,m.Z)(t,this.props),S=(0,g.Z)(t,this.props),T=(0,u.I)(p)?{targetRef:p}:{target:p};return o.createElement(o.Fragment,null,o.createElement(h.R,{innerRef:this.ref},o.createElement(S,(0,r.Z)({},w,{className:x}),v.kK(s)?a:s)),y&&o.createElement(l,(0,r.Z)({listener:this.handleDocumentClick,type:"click"},T)))},t}(o.Component);_.handledProps=["animation","as","children","className","content","direction","onHidden","onHide","onShow","onVisible","target","visible","width"],_.propTypes={},_.defaultProps={direction:"left",target:c,visible:!1},_.animationDuration=500,_.autoControlledProps=["visible"],_.Pushable=y.Z,_.Pusher=b.Z;const x=_},SZCj:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("uXJ5"),a=n("ZbAl"),l=n("aRJ7");function c(e){var t=e.className,n=e.children,u=e.content,h=(0,i.Z)("pushable",t),d=(0,o.Z)(c,e),p=(0,a.Z)(c,e);return s.createElement(p,(0,r.Z)({},d,{className:h}),l.kK(n)?u:n)}c.handledProps=["as","children","className","content"],c.propTypes={};const u=c},"6qAj":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.className,n=e.dimmed,h=e.children,d=e.content,p=(0,i.Z)("pusher",(0,o.lG)(n,"dimmed"),t),f=(0,a.Z)(u,e),m=(0,l.Z)(u,e);return s.createElement(m,(0,r.Z)({},f,{className:p}),c.kK(h)?d:h)}u.handledProps=["as","children","className","content","dimmed"],u.propTypes={};const h=u},vrEI:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n("D1ci"),i=n("H+Tk"),s=n("m290"),o=n("hR+M"),a=n("7PNb"),l=n("iGFm"),c=n("ynia"),u=n("uXJ5"),h=n("ZbAl"),d=n("Kz5q"),p=n("fbB6"),f=n("NBfC"),m=n("l9XU"),g=n("7Nnq"),v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).handleItemClick=function(e,n){var r=n.index;(0,l.Z)(t.props,"onTabChange",e,(0,i.Z)({},t.props,{activeIndex:r})),t.setState({activeIndex:r})},t}(0,s.Z)(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{activeIndex:0}},n.renderItems=function(){var e=this.props,t=e.panes,n=e.renderActiveOnly,r=this.state.activeIndex;return n?(0,l.Z)((0,a.Z)(t,"["+r+"]"),"render",this.props):(0,o.Z)(t,(function(e,t){var n=e.pane;return g.Z.create(n,{overrideProps:{active:t===r}})}))},n.renderMenu=function(){var e=this.props,t=e.menu,n=e.panes,r=e.menuPosition,i=this.state.activeIndex;return!0===t.tabular&&"right"===r&&(t.tabular="right"),m.Z.create(t,{autoGenerateKey:!1,overrideProps:{items:(0,o.Z)(n,"menuItem"),onItemClick:this.handleItemClick,activeIndex:i}})},n.renderVertical=function(e){var t=this.props,n=t.grid,i=t.menuPosition,s=n.paneWidth,o=n.tabWidth,a=(0,r.Z)(n,["paneWidth","tabWidth"]),l=i||"right"===e.props.tabular&&"right"||"left";return c.createElement(p.Z,a,"left"===l&&f.Z.create({width:o,children:e},{autoGenerateKey:!1}),f.Z.create({width:s,children:this.renderItems(),stretched:!0},{autoGenerateKey:!1}),"right"===l&&f.Z.create({width:o,children:e},{autoGenerateKey:!1}))},n.render=function(){var e=this.renderMenu(),n=(0,u.Z)(t,this.props),r=(0,h.Z)(t,this.props);return e.props.vertical?c.createElement(r,n,this.renderVertical(e)):c.createElement(r,n,"bottom"!==e.props.attached&&e,this.renderItems(),"bottom"===e.props.attached&&e)},t}(d.Z);v.handledProps=["activeIndex","as","defaultActiveIndex","grid","menu","menuPosition","onTabChange","panes","renderActiveOnly"],v.propTypes={},v.autoControlledProps=["activeIndex"],v.defaultProps={grid:{paneWidth:12,tabWidth:4},menu:{attached:!0,tabular:!0},renderActiveOnly:!0},v.Pane=g.Z;const y=v},"7Nnq":(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7"),u=n("EVih"),h=n("5+SC");function d(e){var t=e.active,n=e.children,u=e.className,p=e.content,f=e.loading,m=(0,i.Z)((0,o.lG)(t,"active"),(0,o.lG)(f,"loading"),"tab",u),g=(0,a.Z)(d,e),v=(0,l.Z)(d,e),y={};return v===h.Z&&(y.attached="bottom"),s.createElement(v,(0,r.Z)({},y,g,{className:m}),c.kK(n)?p:n)}d.handledProps=["active","as","children","className","content","loading"],d.defaultProps={as:h.Z,active:!0},d.propTypes={},d.create=(0,u.u5)(d,(function(e){return{content:e}}));const p=d},ajfJ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n("H+Tk"),i=n("m290"),s=n("Ql6E"),o=n("ynia"),a=n("xShN"),l=n("uXJ5"),c=n("ZbAl"),u=n("aRJ7"),h=n("kveA"),d=n("KK6n"),p=n("kRN1"),f=n("ycV5"),m=n("x9vA"),g=n("+0xv"),v=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return(0,i.Z)(t,e),t.prototype.render=function(){var e=this.props,n=e.centered,i=e.children,p=e.className,f=e.color,m=e.content,g=e.description,v=e.extra,y=e.fluid,b=e.header,_=e.href,x=e.image,w=e.link,S=e.meta,T=e.onClick,E=e.raised,M=(0,s.Z)("ui",f,(0,a.lG)(n,"centered"),(0,a.lG)(y,"fluid"),(0,a.lG)(w,"link"),(0,a.lG)(E,"raised"),"card",p),A=(0,l.Z)(t,this.props),C=(0,c.Z)(t,this.props,(function(){if(T)return"a"}));return u.kK(i)?u.kK(m)?o.createElement(C,(0,r.Z)({},A,{className:M,href:_,onClick:this.handleClick}),h.Z.create(x,{autoGenerateKey:!1,defaultProps:{ui:!1,wrapped:!0}}),(g||b||S)&&o.createElement(d.Z,{description:g,header:b,meta:S}),v&&o.createElement(d.Z,{extra:!0},v)):o.createElement(C,(0,r.Z)({},A,{className:M,href:_,onClick:this.handleClick}),m):o.createElement(C,(0,r.Z)({},A,{className:M,href:_,onClick:this.handleClick}),i)},t}(o.Component);v.handledProps=["as","centered","children","className","color","content","description","extra","fluid","header","href","image","link","meta","onClick","raised"],v.propTypes={},v.Content=d.Z,v.Description=p.Z,v.Group=f.Z,v.Header=m.Z,v.Meta=g.Z},KK6n:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7"),u=n("EVih"),h=n("kRN1"),d=n("x9vA"),p=n("+0xv");function f(e){var t=e.children,n=e.className,m=e.content,g=e.description,v=e.extra,y=e.header,b=e.meta,_=e.textAlign,x=(0,i.Z)((0,o.lG)(v,"extra"),(0,o.X4)(_),"content",n),w=(0,a.Z)(f,e),S=(0,l.Z)(f,e);return c.kK(t)?c.kK(m)?s.createElement(S,(0,r.Z)({},w,{className:x}),(0,u.Go)(d.Z,(function(e){return{content:e}}),y,{autoGenerateKey:!1}),(0,u.Go)(p.Z,(function(e){return{content:e}}),b,{autoGenerateKey:!1}),(0,u.Go)(h.Z,(function(e){return{content:e}}),g,{autoGenerateKey:!1})):s.createElement(S,(0,r.Z)({},w,{className:x}),m):s.createElement(S,(0,r.Z)({},w,{className:x}),t)}f.handledProps=["as","children","className","content","description","extra","header","meta","textAlign"],f.propTypes={};const m=f},kRN1:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.content,d=e.textAlign,p=(0,i.Z)((0,o.X4)(d),"description",n),f=(0,a.Z)(u,e),m=(0,l.Z)(u,e);return s.createElement(m,(0,r.Z)({},f,{className:p}),c.kK(t)?h:t)}u.handledProps=["as","children","className","content","textAlign"],u.propTypes={};const h=u},ycV5:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n("H+Tk"),i=n("hR+M"),s=n("Ql6E"),o=n("ynia"),a=n("xShN"),l=n("uXJ5"),c=n("ZbAl"),u=n("aRJ7"),h=n("ajfJ");function d(e){var t=e.centered,n=e.children,p=e.className,f=e.content,m=e.doubling,g=e.items,v=e.itemsPerRow,y=e.stackable,b=e.textAlign,_=(0,s.Z)("ui",(0,a.lG)(t,"centered"),(0,a.lG)(m,"doubling"),(0,a.lG)(y,"stackable"),(0,a.X4)(b),(0,a.H0)(v),"cards",p),x=(0,l.Z)(d,e),w=(0,c.Z)(d,e);if(!u.kK(n))return o.createElement(w,(0,r.Z)({},x,{className:_}),n);if(!u.kK(f))return o.createElement(w,(0,r.Z)({},x,{className:_}),f);var S=(0,i.Z)(g,(function(e){var t,n=null!=(t=e.key)?t:[e.header,e.description].join("-");return o.createElement(h.Z,(0,r.Z)({key:n},e))}));return o.createElement(w,(0,r.Z)({},x,{className:_}),S)}d.handledProps=["as","centered","children","className","content","doubling","items","itemsPerRow","stackable","textAlign"],d.propTypes={};const p=d},x9vA:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.content,d=e.textAlign,p=(0,i.Z)((0,o.X4)(d),"header",n),f=(0,a.Z)(u,e),m=(0,l.Z)(u,e);return s.createElement(m,(0,r.Z)({},f,{className:p}),c.kK(t)?h:t)}u.handledProps=["as","children","className","content","textAlign"],u.propTypes={};const h=u},"+0xv":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("H+Tk"),i=n("Ql6E"),s=n("ynia"),o=n("xShN"),a=n("uXJ5"),l=n("ZbAl"),c=n("aRJ7");function u(e){var t=e.children,n=e.className,h=e.content,d=e.textAlign,p=(0,i.Z)((0,o.X4)(d),"meta",n),f=(0,a.Z)(u,e),m=(0,l.Z)(u,e);return s.createElement(m,(0,r.Z)({},f,{className:p}),c.kK(t)?h:t)}u.handledProps=["as","children","className","content","textAlign"],u.propTypes={};const h=u},"/iLt":e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<s.length;l++){var c=s[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(i=n?n.call(r,u,h,c):void 0)||void 0===i&&u!==h)return!1}return!0}},oayG:function(e,t){var n;(function(){"use strict";var r={},i={Á:"A",Ă:"A",Ắ:"A",Ặ:"A",Ằ:"A",Ẳ:"A",Ẵ:"A",Ǎ:"A",Â:"A",Ấ:"A",Ậ:"A",Ầ:"A",Ẩ:"A",Ẫ:"A",Ä:"A",Ǟ:"A",Ȧ:"A",Ǡ:"A",Ạ:"A",Ȁ:"A",À:"A",Ả:"A",Ȃ:"A",Ā:"A",Ą:"A",Å:"A",Ǻ:"A",Ḁ:"A",Ⱥ:"A",Ã:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY",Ḃ:"B",Ḅ:"B",Ɓ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ć:"C",Č:"C",Ç:"C",Ḉ:"C",Ĉ:"C",Ċ:"C",Ƈ:"C",Ȼ:"C",Ď:"D",Ḑ:"D",Ḓ:"D",Ḋ:"D",Ḍ:"D",Ɗ:"D",Ḏ:"D",ǲ:"D",ǅ:"D",Đ:"D",Ƌ:"D",Ǳ:"DZ",Ǆ:"DZ",É:"E",Ĕ:"E",Ě:"E",Ȩ:"E",Ḝ:"E",Ê:"E",Ế:"E",Ệ:"E",Ề:"E",Ể:"E",Ễ:"E",Ḙ:"E",Ë:"E",Ė:"E",Ẹ:"E",Ȅ:"E",È:"E",Ẻ:"E",Ȇ:"E",Ē:"E",Ḗ:"E",Ḕ:"E",Ę:"E",Ɇ:"E",Ẽ:"E",Ḛ:"E",Ꝫ:"ET",Ḟ:"F",Ƒ:"F",Ǵ:"G",Ğ:"G",Ǧ:"G",Ģ:"G",Ĝ:"G",Ġ:"G",Ɠ:"G",Ḡ:"G",Ǥ:"G",Ḫ:"H",Ȟ:"H",Ḩ:"H",Ĥ:"H",Ⱨ:"H",Ḧ:"H",Ḣ:"H",Ḥ:"H",Ħ:"H",Í:"I",Ĭ:"I",Ǐ:"I",Î:"I",Ï:"I",Ḯ:"I",İ:"I",Ị:"I",Ȉ:"I",Ì:"I",Ỉ:"I",Ȋ:"I",Ī:"I",Į:"I",Ɨ:"I",Ĩ:"I",Ḭ:"I",Ꝺ:"D",Ꝼ:"F",Ᵹ:"G",Ꞃ:"R",Ꞅ:"S",Ꞇ:"T",Ꝭ:"IS",Ĵ:"J",Ɉ:"J",Ḱ:"K",Ǩ:"K",Ķ:"K",Ⱪ:"K",Ꝃ:"K",Ḳ:"K",Ƙ:"K",Ḵ:"K",Ꝁ:"K",Ꝅ:"K",Ĺ:"L",Ƚ:"L",Ľ:"L",Ļ:"L",Ḽ:"L",Ḷ:"L",Ḹ:"L",Ⱡ:"L",Ꝉ:"L",Ḻ:"L",Ŀ:"L",Ɫ:"L",ǈ:"L",Ł:"L",Ǉ:"LJ",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ń:"N",Ň:"N",Ņ:"N",Ṋ:"N",Ṅ:"N",Ṇ:"N",Ǹ:"N",Ɲ:"N",Ṉ:"N",Ƞ:"N",ǋ:"N",Ñ:"N",Ǌ:"NJ",Ó:"O",Ŏ:"O",Ǒ:"O",Ô:"O",Ố:"O",Ộ:"O",Ồ:"O",Ổ:"O",Ỗ:"O",Ö:"O",Ȫ:"O",Ȯ:"O",Ȱ:"O",Ọ:"O",Ő:"O",Ȍ:"O",Ò:"O",Ỏ:"O",Ơ:"O",Ớ:"O",Ợ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ȏ:"O",Ꝋ:"O",Ꝍ:"O",Ō:"O",Ṓ:"O",Ṑ:"O",Ɵ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Õ:"O",Ṍ:"O",Ṏ:"O",Ȭ:"O",Ƣ:"OI",Ꝏ:"OO",Ɛ:"E",Ɔ:"O",Ȣ:"OU",Ṕ:"P",Ṗ:"P",Ꝓ:"P",Ƥ:"P",Ꝕ:"P",Ᵽ:"P",Ꝑ:"P",Ꝙ:"Q",Ꝗ:"Q",Ŕ:"R",Ř:"R",Ŗ:"R",Ṙ:"R",Ṛ:"R",Ṝ:"R",Ȑ:"R",Ȓ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꜿ:"C",Ǝ:"E",Ś:"S",Ṥ:"S",Š:"S",Ṧ:"S",Ş:"S",Ŝ:"S",Ș:"S",Ṡ:"S",Ṣ:"S",Ṩ:"S",ẞ:"SS",Ť:"T",Ţ:"T",Ṱ:"T",Ț:"T",Ⱦ:"T",Ṫ:"T",Ṭ:"T",Ƭ:"T",Ṯ:"T",Ʈ:"T",Ŧ:"T",Ɐ:"A",Ꞁ:"L",Ɯ:"M",Ʌ:"V",Ꜩ:"TZ",Ú:"U",Ŭ:"U",Ǔ:"U",Û:"U",Ṷ:"U",Ü:"U",Ǘ:"U",Ǚ:"U",Ǜ:"U",Ǖ:"U",Ṳ:"U",Ụ:"U",Ű:"U",Ȕ:"U",Ù:"U",Ủ:"U",Ư:"U",Ứ:"U",Ự:"U",Ừ:"U",Ử:"U",Ữ:"U",Ȗ:"U",Ū:"U",Ṻ:"U",Ų:"U",Ů:"U",Ũ:"U",Ṹ:"U",Ṵ:"U",Ꝟ:"V",Ṿ:"V",Ʋ:"V",Ṽ:"V",Ꝡ:"VY",Ẃ:"W",Ŵ:"W",Ẅ:"W",Ẇ:"W",Ẉ:"W",Ẁ:"W",Ⱳ:"W",Ẍ:"X",Ẋ:"X",Ý:"Y",Ŷ:"Y",Ÿ:"Y",Ẏ:"Y",Ỵ:"Y",Ỳ:"Y",Ƴ:"Y",Ỷ:"Y",Ỿ:"Y",Ȳ:"Y",Ɏ:"Y",Ỹ:"Y",Ź:"Z",Ž:"Z",Ẑ:"Z",Ⱬ:"Z",Ż:"Z",Ẓ:"Z",Ȥ:"Z",Ẕ:"Z",Ƶ:"Z",Ĳ:"IJ",Œ:"OE",ᴀ:"A",ᴁ:"AE",ʙ:"B",ᴃ:"B",ᴄ:"C",ᴅ:"D",ᴇ:"E",ꜰ:"F",ɢ:"G",ʛ:"G",ʜ:"H",ɪ:"I",ʁ:"R",ᴊ:"J",ᴋ:"K",ʟ:"L",ᴌ:"L",ᴍ:"M",ɴ:"N",ᴏ:"O",ɶ:"OE",ᴐ:"O",ᴕ:"OU",ᴘ:"P",ʀ:"R",ᴎ:"N",ᴙ:"R",ꜱ:"S",ᴛ:"T",ⱻ:"E",ᴚ:"R",ᴜ:"U",ᴠ:"V",ᴡ:"W",ʏ:"Y",ᴢ:"Z",á:"a",ă:"a",ắ:"a",ặ:"a",ằ:"a",ẳ:"a",ẵ:"a",ǎ:"a",â:"a",ấ:"a",ậ:"a",ầ:"a",ẩ:"a",ẫ:"a",ä:"a",ǟ:"a",ȧ:"a",ǡ:"a",ạ:"a",ȁ:"a",à:"a",ả:"a",ȃ:"a",ā:"a",ą:"a",ᶏ:"a",ẚ:"a",å:"a",ǻ:"a",ḁ:"a",ⱥ:"a",ã:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay",ḃ:"b",ḅ:"b",ɓ:"b",ḇ:"b",ᵬ:"b",ᶀ:"b",ƀ:"b",ƃ:"b",ɵ:"o",ć:"c",č:"c",ç:"c",ḉ:"c",ĉ:"c",ɕ:"c",ċ:"c",ƈ:"c",ȼ:"c",ď:"d",ḑ:"d",ḓ:"d",ȡ:"d",ḋ:"d",ḍ:"d",ɗ:"d",ᶑ:"d",ḏ:"d",ᵭ:"d",ᶁ:"d",đ:"d",ɖ:"d",ƌ:"d",ı:"i",ȷ:"j",ɟ:"j",ʄ:"j",ǳ:"dz",ǆ:"dz",é:"e",ĕ:"e",ě:"e",ȩ:"e",ḝ:"e",ê:"e",ế:"e",ệ:"e",ề:"e",ể:"e",ễ:"e",ḙ:"e",ë:"e",ė:"e",ẹ:"e",ȅ:"e",è:"e",ẻ:"e",ȇ:"e",ē:"e",ḗ:"e",ḕ:"e",ⱸ:"e",ę:"e",ᶒ:"e",ɇ:"e",ẽ:"e",ḛ:"e",ꝫ:"et",ḟ:"f",ƒ:"f",ᵮ:"f",ᶂ:"f",ǵ:"g",ğ:"g",ǧ:"g",ģ:"g",ĝ:"g",ġ:"g",ɠ:"g",ḡ:"g",ᶃ:"g",ǥ:"g",ḫ:"h",ȟ:"h",ḩ:"h",ĥ:"h",ⱨ:"h",ḧ:"h",ḣ:"h",ḥ:"h",ɦ:"h",ẖ:"h",ħ:"h",ƕ:"hv",í:"i",ĭ:"i",ǐ:"i",î:"i",ï:"i",ḯ:"i",ị:"i",ȉ:"i",ì:"i",ỉ:"i",ȋ:"i",ī:"i",į:"i",ᶖ:"i",ɨ:"i",ĩ:"i",ḭ:"i",ꝺ:"d",ꝼ:"f",ᵹ:"g",ꞃ:"r",ꞅ:"s",ꞇ:"t",ꝭ:"is",ǰ:"j",ĵ:"j",ʝ:"j",ɉ:"j",ḱ:"k",ǩ:"k",ķ:"k",ⱪ:"k",ꝃ:"k",ḳ:"k",ƙ:"k",ḵ:"k",ᶄ:"k",ꝁ:"k",ꝅ:"k",ĺ:"l",ƚ:"l",ɬ:"l",ľ:"l",ļ:"l",ḽ:"l",ȴ:"l",ḷ:"l",ḹ:"l",ⱡ:"l",ꝉ:"l",ḻ:"l",ŀ:"l",ɫ:"l",ᶅ:"l",ɭ:"l",ł:"l",ǉ:"lj",ſ:"s",ẜ:"s",ẛ:"s",ẝ:"s",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ᵯ:"m",ᶆ:"m",ń:"n",ň:"n",ņ:"n",ṋ:"n",ȵ:"n",ṅ:"n",ṇ:"n",ǹ:"n",ɲ:"n",ṉ:"n",ƞ:"n",ᵰ:"n",ᶇ:"n",ɳ:"n",ñ:"n",ǌ:"nj",ó:"o",ŏ:"o",ǒ:"o",ô:"o",ố:"o",ộ:"o",ồ:"o",ổ:"o",ỗ:"o",ö:"o",ȫ:"o",ȯ:"o",ȱ:"o",ọ:"o",ő:"o",ȍ:"o",ò:"o",ỏ:"o",ơ:"o",ớ:"o",ợ:"o",ờ:"o",ở:"o",ỡ:"o",ȏ:"o",ꝋ:"o",ꝍ:"o",ⱺ:"o",ō:"o",ṓ:"o",ṑ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",õ:"o",ṍ:"o",ṏ:"o",ȭ:"o",ƣ:"oi",ꝏ:"oo",ɛ:"e",ᶓ:"e",ɔ:"o",ᶗ:"o",ȣ:"ou",ṕ:"p",ṗ:"p",ꝓ:"p",ƥ:"p",ᵱ:"p",ᶈ:"p",ꝕ:"p",ᵽ:"p",ꝑ:"p",ꝙ:"q",ʠ:"q",ɋ:"q",ꝗ:"q",ŕ:"r",ř:"r",ŗ:"r",ṙ:"r",ṛ:"r",ṝ:"r",ȑ:"r",ɾ:"r",ᵳ:"r",ȓ:"r",ṟ:"r",ɼ:"r",ᵲ:"r",ᶉ:"r",ɍ:"r",ɽ:"r",ↄ:"c",ꜿ:"c",ɘ:"e",ɿ:"r",ś:"s",ṥ:"s",š:"s",ṧ:"s",ş:"s",ŝ:"s",ș:"s",ṡ:"s",ṣ:"s",ṩ:"s",ʂ:"s",ᵴ:"s",ᶊ:"s",ȿ:"s",ɡ:"g",ß:"ss",ᴑ:"o",ᴓ:"o",ᴝ:"u",ť:"t",ţ:"t",ṱ:"t",ț:"t",ȶ:"t",ẗ:"t",ⱦ:"t",ṫ:"t",ṭ:"t",ƭ:"t",ṯ:"t",ᵵ:"t",ƫ:"t",ʈ:"t",ŧ:"t",ᵺ:"th",ɐ:"a",ᴂ:"ae",ǝ:"e",ᵷ:"g",ɥ:"h",ʮ:"h",ʯ:"h",ᴉ:"i",ʞ:"k",ꞁ:"l",ɯ:"m",ɰ:"m",ᴔ:"oe",ɹ:"r",ɻ:"r",ɺ:"r",ⱹ:"r",ʇ:"t",ʌ:"v",ʍ:"w",ʎ:"y",ꜩ:"tz",ú:"u",ŭ:"u",ǔ:"u",û:"u",ṷ:"u",ü:"u",ǘ:"u",ǚ:"u",ǜ:"u",ǖ:"u",ṳ:"u",ụ:"u",ű:"u",ȕ:"u",ù:"u",ủ:"u",ư:"u",ứ:"u",ự:"u",ừ:"u",ử:"u",ữ:"u",ȗ:"u",ū:"u",ṻ:"u",ų:"u",ᶙ:"u",ů:"u",ũ:"u",ṹ:"u",ṵ:"u",ᵫ:"ue",ꝸ:"um",ⱴ:"v",ꝟ:"v",ṿ:"v",ʋ:"v",ᶌ:"v",ⱱ:"v",ṽ:"v",ꝡ:"vy",ẃ:"w",ŵ:"w",ẅ:"w",ẇ:"w",ẉ:"w",ẁ:"w",ⱳ:"w",ẘ:"w",ẍ:"x",ẋ:"x",ᶍ:"x",ý:"y",ŷ:"y",ÿ:"y",ẏ:"y",ỵ:"y",ỳ:"y",ƴ:"y",ỷ:"y",ỿ:"y",ȳ:"y",ẙ:"y",ɏ:"y",ỹ:"y",ź:"z",ž:"z",ẑ:"z",ʑ:"z",ⱬ:"z",ż:"z",ẓ:"z",ȥ:"z",ẕ:"z",ᵶ:"z",ᶎ:"z",ʐ:"z",ƶ:"z",ɀ:"z",ﬀ:"ff",ﬃ:"ffi",ﬄ:"ffl",ﬁ:"fi",ﬂ:"fl",ĳ:"ij",œ:"oe",ﬆ:"st",ₐ:"a",ₑ:"e",ᵢ:"i",ⱼ:"j",ₒ:"o",ᵣ:"r",ᵤ:"u",ᵥ:"v",ₓ:"x"};function s(e,t){e.s=null!=t?"string"==typeof t?t:t.toString():t,e.orig=t,null!=t?e.__defineGetter__?e.__defineGetter__("length",(function(){return e.s.length})):e.length=t.length:e.length=-1}function o(e){s(this,e)}var a=String.prototype,l=o.prototype={between:function(e,t){var n=this.s,r=n.indexOf(e),i=n.indexOf(t,r+e.length);return-1==i&&null!=t?new this.constructor(""):-1==i&&null==t?new this.constructor(n.substring(r+e.length)):new this.constructor(n.slice(r+e.length,i))},camelize:function(){var e=this.trim().s.replace(/(\-|_|\s)+(.)?/g,(function(e,t,n){return n?n.toUpperCase():""}));return new this.constructor(e)},capitalize:function(){return new this.constructor(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(e){return this.s.charAt(e)},chompLeft:function(e){var t=this.s;return 0===t.indexOf(e)?(t=t.slice(e.length),new this.constructor(t)):this},chompRight:function(e){if(this.endsWith(e)){var t=this.s;return t=t.slice(0,t.length-e.length),new this.constructor(t)}return this},collapseWhitespace:function(){var e=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new this.constructor(e)},contains:function(e){return this.s.indexOf(e)>=0},count:function(e){for(var t=0,n=this.s.indexOf(e);n>=0;)t+=1,n=this.s.indexOf(e,n+1);return t},dasherize:function(){var e=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new this.constructor(e)},latinise:function(){var e=this.replace(/[^A-Za-z0-9\[\] ]/g,(function(e){return i[e]||e}));return new this.constructor(e)},decodeHtmlEntities:function(){var e=this.s;return e=e.replace(/&#(\d+);?/g,(function(e,t){return String.fromCharCode(t)})).replace(/&#[xX]([A-Fa-f0-9]+);?/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})).replace(/&([^;\W]+;?)/g,(function(e,t){var n=t.replace(/;$/,""),i=r[t]||t.match(/;$/)&&r[n];return"number"==typeof i?String.fromCharCode(i):"string"==typeof i?i:e})),new this.constructor(e)},endsWith:function(){for(var e=Array.prototype.slice.call(arguments,0),t=0;t<e.length;++t){var n=this.s.length-e[t].length;if(n>=0&&this.s.indexOf(e[t],n)===n)return!0}return!1},escapeHTML:function(){return new this.constructor(this.s.replace(/[&<>"']/g,(function(e){return"&"+m[e]+";"})))},ensureLeft:function(e){var t=this.s;return 0===t.indexOf(e)?this:new this.constructor(e+t)},ensureRight:function(e){var t=this.s;return this.endsWith(e)?this:new this.constructor(t+e)},humanize:function(){if(null===this.s||void 0===this.s)return new this.constructor("");var e=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new this.constructor(e)},isAlpha:function(){return!/[^a-z\xDF-\xFF]|^$/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xDF-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s||/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(e){if(e>=0){var t=this.s.substr(0,e);return new this.constructor(t)}return this.right(-e)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(e,t){if(null==t&&(t=" "),this.s.length>=e)return new this.constructor(this.s);e-=this.s.length;var n=Array(Math.ceil(e/2)+1).join(t),r=Array(Math.floor(e/2)+1).join(t);return new this.constructor(n+this.s+r)},padLeft:function(e,t){return null==t&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(Array(e-this.s.length+1).join(t)+this.s)},padRight:function(e,t){return null==t&&(t=" "),this.s.length>=e?new this.constructor(this.s):new this.constructor(this.s+Array(e-this.s.length+1).join(t))},parseCSV:function(e,t,n,r){e=e||",",n=n||"\\",void 0===t&&(t='"');var i=0,s=[],o=[],a=this.s.length,l=!1,c=!1,u=this,h=function(e){return u.s.charAt(e)};if(void 0!==r)var d=[];for(t||(l=!0);i<a;){var p=h(i);switch(p){case n:if(l&&(n!==t||h(i+1)===t)){i+=1,s.push(h(i));break}if(n!==t)break;case t:l=!l;break;case e:c&&(l=!1,c=!1),l&&t?s.push(p):(o.push(s.join("")),s.length=0);break;case r:c?(l=!1,c=!1,o.push(s.join("")),d.push(o),o=[],s.length=0):l?s.push(p):d&&(o.push(s.join("")),d.push(o),o=[],s.length=0);break;case" ":l&&s.push(p);break;default:l?s.push(p):p!==t&&(s.push(p),l=!0,c=!0)}i+=1}return o.push(s.join("")),d?(d.push(o),d):o},replaceAll:function(e,t){var n=this.s.split(e).join(t);return new this.constructor(n)},strip:function(){for(var e=this.s,t=0,n=arguments.length;t<n;t++)e=e.split(arguments[t]).join("");return new this.constructor(e)},right:function(e){if(e>=0){var t=this.s.substr(this.s.length-e,e);return new this.constructor(t)}return this.left(-e)},setValue:function(e){return s(this,e),this},slugify:function(){var e=new o(new o(this.s).latinise().s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===e.charAt(0)&&(e=e.substr(1)),new this.constructor(e)},startsWith:function(){for(var e=Array.prototype.slice.call(arguments,0),t=0;t<e.length;++t)if(0===this.s.lastIndexOf(e[t],0))return!0;return!1},stripPunctuation:function(){return new this.constructor(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var e=this.s,t=arguments.length>0?arguments:[""];return p(t,(function(t){e=e.replace(RegExp("</?"+t+"[^<>]*>","gi"),"")})),new this.constructor(e)},template:function(e,t,n){var r=this.s,i=(t=t||d.TMPL_OPEN,n=n||d.TMPL_CLOSE,t.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$")),s=n.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),o=new RegExp(i+"(.+?)"+s,"g");return(r.match(o)||[]).forEach((function(i){var s=i.substring(t.length,i.length-n.length).trim(),o=void 0===e[s]?"":e[s];r=r.replace(i,o)})),new this.constructor(r)},times:function(e){return new this.constructor(new Array(e+1).join(this.s))},toBoolean:function(){if("string"==typeof this.orig){var e=this.s.toLowerCase();return"true"===e||"yes"===e||"on"===e||"1"===e}return!0===this.orig||1===this.orig},toFloat:function(e){var t=parseFloat(this.s);return e?parseFloat(t.toFixed(e)):t},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var e;return e=void 0===a.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new this.constructor(e)},trimLeft:function(){var e;return e=a.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new this.constructor(e)},trimRight:function(){var e;return e=a.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new this.constructor(e)},truncate:function(e,t){var n=this.s;if(e=~~e,t=t||"...",n.length<=e)return new this.constructor(n);var r=n.slice(0,e+1).replace(/.(?=\W*\w*$)/g,(function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "}));return((r=r.slice(r.length-2).match(/\w\w/)?r.replace(/\s*\S+$/,""):new o(r.slice(0,r.length-1)).trimRight().s)+t).length>n.length?new o(n):new o(n.slice(0,r.length)+t)},toCSV:function(){var e=",",t='"',n="\\",r=!0,i=!1,s=[];function a(e){return null!==e&&""!==e}if("object"==typeof arguments[0]?(e=arguments[0].delimiter||e,e=arguments[0].separator||e,t=arguments[0].qualifier||t,r=!!arguments[0].encloseNumbers,n=arguments[0].escape||n,i=!!arguments[0].keys):"string"==typeof arguments[0]&&(e=arguments[0]),"string"==typeof arguments[1]&&(t=arguments[1]),null===arguments[1]&&(t=null),this.orig instanceof Array)s=this.orig;else for(var l in this.orig)this.orig.hasOwnProperty(l)&&(i?s.push(l):s.push(this.orig[l]));for(var c=n+t,u=[],h=0;h<s.length;++h){var d=a(t);if("number"==typeof s[h]&&(d&=r),d&&u.push(t),null!==s[h]&&void 0!==s[h]){var p=new o(s[h]).replaceAll(t,c).s;u.push(p)}else u.push("");d&&u.push(t),e&&u.push(e)}return u.length=u.length-1,new this.constructor(u.join(""))},toString:function(){return this.s},underscore:function(){var e=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new o(this.s.charAt(0)).isUpper()&&(e="_"+e),new this.constructor(e)},unescapeHTML:function(){return new this.constructor(this.s.replace(/\&([^;]+);/g,(function(e,t){var n;return t in f?f[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e})))},valueOf:function(){return this.s.valueOf()},wrapHTML:function(e,t){var n=this.s,r=null==e?"span":e,i="";if("object"==typeof t)for(var s in t)i+=" "+s+'="'+new this.constructor(t[s]).escapeHTML()+'"';return n="".concat("<",r,i,">",this,"</",r,">"),new this.constructor(n)}},c=[];var u=function(){for(var e=function(){var e=[];if(Object.getOwnPropertyNames)return(e=Object.getOwnPropertyNames(a)).splice(e.indexOf("valueOf"),1),e.splice(e.indexOf("toString"),1),e;var t={};for(var n in String.prototype)t[n]=n;for(var n in Object.prototype)delete t[n];for(var n in t)e.push(n);return e}(),t={},n=0;n<e.length;++n){var r=e[n],i=a[r];try{var s=typeof i.apply("teststring",[]);t[r]=s}catch(e){}}return t}();for(var h in u)!function(e){var t=a[e];"function"==typeof t&&(l[e]||("string"===u[e]?l[e]=function(){return new this.constructor(t.apply(this,arguments))}:l[e]=t))}(h);function d(e){return new o(e)}function p(e,t){var n,r=[];for(n=0;n<e.length;n++)r.push(e[n]),t&&t.call(e,e[n],n);return r}l.repeat=l.times,l.include=l.contains,l.toInteger=l.toInt,l.toBool=l.toBoolean,l.decodeHTMLEntities=l.decodeHtmlEntities,l.constructor=o,d.extendPrototype=function(){for(var e in l)!function(e){var t=l[e];a.hasOwnProperty(e)||(c.push(e),a[e]=function(){return String.prototype.s=this,t.apply(this,arguments)})}(e)},d.restorePrototype=function(){for(var e=0;e<c.length;++e)delete String.prototype[c[e]];c.length=0},d.VERSION="2.2.0",d.TMPL_OPEN="{{",d.TMPL_CLOSE="}}",d.ENTITIES=r,void 0!==e.exports?e.exports=d:void 0===(n=function(){return d}.apply(t,[]))||(e.exports=n);var f={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},m={};for(var g in f)m[f[g]]=g;r={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}).call(this)},"0Yvd":e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],u=s[c]||0,h="".concat(c," ").concat(u);s[c]=u+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var f=i(p,r);r.byIndex=a,t.splice(a,0,{identifier:h,updater:f,references:1})}o.push(h)}return o}function i(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=r(e,i),c=0;c<s.length;c++){var u=n(s[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=l}}},TId8:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},zKo0:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},Ass9:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},"9Hkc":e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},jzgE:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},i803:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},"4Uwy":e=>{"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},tmCz:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},UOyM:(e,t,n)=>{var r=n("m6HD"),i=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,s=r.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),l=r[n];n<s;l=r[++n])m(l)||!_(l)?o+=" "+l:o+=" "+a(l);return o},t.deprecate=function(e,n){if(y({}.process))return function(){return t.deprecate(e,n).apply(this,arguments)};if(!0===r.noDeprecation)return e;var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?console.trace(n):console.error(n),i=!0}return e.apply(this,arguments)}};var s,o={};function a(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),u(r,e,r.depth)}function l(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function c(e,t){return e}function u(e,n,r){if(e.customInspect&&n&&S(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return v(i)||(i=u(e,i,r)),i}var s=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,n);if(s)return s;var o=Object.keys(n),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),w(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return h(n);if(0===o.length){if(S(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(x(n))return e.stylize(Date.prototype.toString.call(n),"date");if(w(n))return h(n)}var c,_="",T=!1,E=["{","}"];(p(n)&&(T=!0,E=["[","]"]),S(n))&&(_=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(_=" "+RegExp.prototype.toString.call(n)),x(n)&&(_=" "+Date.prototype.toUTCString.call(n)),w(n)&&(_=" "+h(n)),0!==o.length||T&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=T?function(e,t,n,r,i){for(var s=[],o=0,a=t.length;o<a;++o)C(t,String(o))?s.push(d(e,t,n,r,String(o),!0)):s.push("");return i.forEach((function(i){i.match(/^\d+$/)||s.push(d(e,t,n,r,i,!0))})),s}(e,n,r,a,o):o.map((function(t){return d(e,n,r,a,t,T)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,_,E)):E[0]+_+E[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,s){var o,a,l;if((l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),C(r,i)||(o="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=m(n)?u(e,l.value,null):u(e,l.value,n-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),y(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===T(e)}function _(e){return"object"==typeof e&&null!==e}function x(e){return _(e)&&"[object Date]"===T(e)}function w(e){return _(e)&&("[object Error]"===T(e)||e instanceof Error)}function S(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(y(s)&&(s=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!o[e])if(new RegExp("\\b"+e+"\\b","i").test(s)){var n=r.pid;o[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else o[e]=function(){};return o[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=b,t.isObject=_,t.isDate=x,t.isError=w,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("tmCz");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n("4Uwy"),t._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}},Kk0H:(e,t,n)=>{"use strict";n.r(t),n.d(t,{defMatFS:()=>i,defMatVS:()=>r,lwiColoredMatFS:()=>l,lwiColoredMatVS:()=>a,lwiMatFS:()=>o,lwiMatVS:()=>s});const r="precision highp float;\r\nuniform mat4 modelViewMatrix;\r\nuniform mat4 projectionMatrix;\r\n\r\nattribute vec3 position;\r\nattribute vec4 color;\r\nattribute float size;\r\nattribute vec3 offset;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n    vColor = color;\r\n    vec4 viewPos = modelViewMatrix * vec4(offset, 1.0) + vec4(position * size, 0.0);\r\n    gl_Position = projectionMatrix * viewPos;\r\n}\r\n",i="precision highp float;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n    gl_FragColor = vColor;\r\n}\r\n",s="precision highp float;\r\n\r\nuniform mat4 modelMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 modelViewMatrix;\r\n\r\nattribute vec3 position;\r\nattribute vec3 normal;\r\nattribute vec2 uv;\r\n\r\n/*\r\n\r\nstruct LwiInstance {\r\n    float4 dynData[2]: META;\r\n    float3x4 worldMatr: TRANSFORM0;\r\n    float3x4 worldMatrPrev: TRANSFORM1;\r\n};\r\n\r\nwebgl doesn't support non-squared matrices or arrays in attributes (!)\r\n\r\n*/\r\n\r\nattribute vec4 a_dynData_0;\r\nattribute vec4 a_dynData_1;\r\n\r\nattribute vec4 a_worldMat_0;\r\nattribute vec4 a_worldMat_1;\r\nattribute vec4 a_worldMat_2;\r\n\r\nattribute vec4 a_worldMatPrev_0;\r\nattribute vec4 a_worldMatPrev_1;\r\nattribute vec4 a_worldMatPrev_2;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() \r\n{\r\n    vec4 zero = vec4(position, 1.0);\r\n    \r\n    vec4 pos;\r\n    pos.x = dot(a_worldMat_0, zero);\r\n    pos.y = dot(a_worldMat_1, zero);\r\n    pos.z = dot(a_worldMat_2, zero);\r\n    pos.w = 1.0;\r\n\r\n    vec4 viewPos = viewMatrix * pos;\r\n    gl_Position = projectionMatrix * viewPos;\r\n\r\n    vec3 lightDir;\r\n    lightDir = normalize(vec3(1.0, -4.0, 0.0));\r\n\r\n    float NdL;\r\n    NdL = max(0.0, dot(normal, lightDir) * 0.5);\r\n    vColor = vec4(vec3(NdL), 0.0) + vec4(0.5, 0.5, 0.5, 1.0);\r\n}\r\n",o="precision highp float;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() \r\n{\r\n    gl_FragColor = vColor;\r\n}\r\n",a="precision highp float;\r\n\r\nuniform mat4 modelMatrix;\r\nuniform mat4 viewMatrix;\r\nuniform mat4 projectionMatrix;\r\nuniform mat4 modelViewMatrix;\r\n\r\nattribute vec3 position;\r\nattribute vec3 normal;\r\nattribute vec2 uv;\r\n\r\n/*\r\n\r\nstruct LwiInstance {\r\n    float4 dynData[2]: META;\r\n    float3x4 worldMatr: TRANSFORM0;\r\n    float3x4 worldMatrPrev: TRANSFORM1;\r\n};\r\n\r\nwebgl doesn't support non-squared matrices or arrays in attributes (!)\r\n\r\n*/\r\n\r\nattribute vec4 a_dynData_0;\r\nattribute vec4 a_dynData_1;\r\n\r\nattribute vec4 a_worldMat_0;\r\nattribute vec4 a_worldMat_1;\r\nattribute vec4 a_worldMat_2;\r\n\r\nattribute vec4 a_worldMatPrev_0;\r\nattribute vec4 a_worldMatPrev_1;\r\nattribute vec4 a_worldMatPrev_2;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() \r\n{\r\n    vec4 zero = vec4(position, 1.0);\r\n    \r\n    vec4 pos;\r\n    pos.x = dot(a_worldMat_0, zero);\r\n    pos.y = dot(a_worldMat_1, zero);\r\n    pos.z = dot(a_worldMat_2, zero);\r\n    pos.w = 1.0;\r\n\r\n    vec4 viewPos = viewMatrix * pos;\r\n    gl_Position = projectionMatrix * viewPos;\r\n\r\n    vec3 lightDir;\r\n    lightDir = normalize(vec3(1.0, 4.0, 1.0));\r\n\r\n    float NdL;\r\n    NdL = max(0.0, dot(normal, lightDir) * 0.75);\r\n    vColor = vec4(vec3(NdL), 0.0) + vec4(0.25, 0.25, 0.25, 1.0) * a_dynData_0;\r\n}\r\n",l="precision highp float;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() \r\n{\r\n    gl_FragColor = vColor;\r\n}\r\n"},"/lOe":(e,t,n)=>{"use strict";var r=n("0Yvd"),i=n.n(r),s=n("9Hkc"),o=n.n(s),a=n("TId8"),l=n.n(a),c=n("Ass9"),u=n.n(c),h=n("zKo0"),d=n.n(h),p=n("jzgE"),f=n.n(p),m=n("6ow8"),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d();i()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals},zwOj:(e,t,n)=>{"use strict";var r=n("0Yvd"),i=n.n(r),s=n("9Hkc"),o=n.n(s),a=n("TId8"),l=n.n(a),c=n("Ass9"),u=n.n(c),h=n("zKo0"),d=n.n(h),p=n("jzgE"),f=n.n(p),m=n("eX6A"),g={};g.styleTagTransform=f(),g.setAttributes=u(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d();i()(m.Z,g),m.Z&&m.Z.locals&&m.Z.locals},"/ig4":(e,t,n)=>{"use strict";n.r(t),n.d(t,{clear:()=>m,clearAll:()=>u,clearBit:()=>l,clearFlags:()=>v,equal:()=>h,flag:()=>r,isEmpty:()=>y,isEqual:()=>d,isNotEqaul:()=>p,set:()=>f,setAll:()=>c,setBit:()=>a,setFlags:()=>g,testAll:()=>s,testAny:()=>o,testBit:()=>i,totalBits:()=>b,totalSet:()=>_});var r=e=>1<<e,i=(e,t)=>0!=(e&r(t)),s=(e,t)=>(e&t)==t,o=(e,t)=>0!=(e&t),a=(e,t,n=!0)=>n?e|=r(t):l(e,t),l=(e,t)=>e&~r(t),c=(e,t,n=!0)=>n?e|=t:e&=~t,u=(e,t)=>e&~t,h=(e,t)=>{t},d=(e,t)=>e==t,p=(e,t)=>e!=t,f=(e,t)=>{t},m=e=>{0},g=(e,t)=>e|t,v=(e,t)=>e&~t,y=e=>0==e,b=e=>32,_=e=>{for(var t=0,n=b(e);n;--n)t+=1&e,e>>=1;return t}},SSye:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n("/ig4")},cOQ3:(e,t,n)=>{"use strict";n.d(t,{$V:()=>s,Ft:()=>o,HD:()=>l,Kn:()=>u,TP:()=>m,Xq:()=>i,c2:()=>f,hj:()=>c,hu:()=>p,jn:()=>a,kJ:()=>h,vZ:()=>d});let r=e=>{const t=typeof e;if("object"===t){if(!e)return"null";{if(e instanceof Array)return"array";if(e instanceof Object)return t;const n=Object.prototype.toString.call(e);if("[object Window]"===n)return"object";if("[object Array]"===n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"===n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}}else if("function"===t&&void 0===e.call)return"object";return t},i=e=>void 0!==e,s=e=>null!=e,o=e=>null===e,a=e=>"boolean"==typeof e,l=e=>"string"==typeof e,c=e=>"number"==typeof e,u=e=>{const t=r(e);return"object"===t||"array"===t||"function"===t},h=e=>"array"===r(e),d=(e,t)=>JSON.stringify(e)===JSON.stringify(t);const p=console.assert.bind(console),f=console.log.bind(console);function m(e,t){let n=0;for(const r in e)if(!1===t(e[r],r,n++))break}},"sg/z":(e,t,n)=>{"use strict";n.d(t,{s:()=>a,x:()=>o});var r=n("cOQ3"),i=n("HK/f"),s=n("/Hc9");async function o(e,t={},n=null){let o,a;(0,r.HD)(e.source)?(o=e,a=await(0,s.J)(o,t)):a=e;const l=`createFXSLDocument(${a.uri})`;console.time(l);const c=new i.I,u=await c.parse(a,n);return console.timeEnd(l),u}async function a(e,t,n,r={}){let o=null;if(e){const n=Object.keys(t.root.scope.types),{flags:i,includeResolver:a}=r;o=await(0,s.J)(e,{flags:i,knownTypes:n,includeResolver:a})}return(new i.I).extend(o,t,n)}},"/Hc9":(e,t,n)=>{"use strict";n.d(t,{J:()=>x});var r=n("Y0AG"),i=n("SSye"),s=n("cOQ3"),o=n("DIkA"),a=n("sesj"),l=n("5ZRz");class c{constructor(e,t=null){this.root=t,this.nodes=[],this.optimized=e,this.nodesCountStack=[]}get lastNode(){return this.nodes[this.nodes.length-1]}finishTree(){this.root=this.nodes.pop()||null}addToken({name:e,value:t,loc:n}){this.addNode({name:e,value:t,loc:n,children:null,parent:null})}reduceByRule(e,t=r.Vc.k_Default){let n=0,i=this.nodesCountStack,o=e.right.length,a=this.nodes,l=this.optimized?1:0;for(;o;)n+=i.pop(),o--;if(t===r.Vc.k_Skip&&n>l||0===n)a.length-=n,i.push(0);else if(t===r.Vc.k_Default&&n>l||t===r.Vc.k_Necessary){(0,s.hu)(n>0);let t=a.pop();n--;const r={name:e.left,children:null,parent:null,value:"",loc:{...t.loc}};for(this.addLink(r,t);n;)(0,s.hu)(a.length>0),this.addLink(r,a.pop()),n--;a.push(r),i.push(1)}else i.push(n)}addNode(e){this.nodes.push(e),this.nodesCountStack.push(1)}$pop(e=null){let t=this.nodesCountStack.pop();for(;t;){let n=this.nodes.pop();e&&(0,l.xV)(e,n.loc),t--}}addLink(e,t){e.children=e.children||[],(0,l.xV)(e.loc,t.loc),e.children.push(t),t.parent=e}clone(){return new c(this.optimized,this.cloneNode(this.root))}cloneNode({name:e,value:t,children:n}){const r={name:e,value:t,children:null,parent:null};return n&&n.forEach((e=>this.addLink(r,this.cloneNode(e)))),r}toString(){return this.root?this.toStringNode(this.root):""}toStringNode(e,t=""){let n=t+"{\n",r=t,i="  ";if(t+=i,e.value)n+=t+'name : "'+e.name+'",\n',n+=t+'value : "'+e.value+'"\n';else{n+=t+'name : "'+e.name+'"\n',n+=t+"children : [";let s=e.children;if(s){n+="\n",t+=i;for(let e=s.length-1;e>=0;e--)n+=this.toStringNode(s[e],t),n+=",\n";n=n.slice(0,n.length-2),n+="\n",n+=r+i+"]\n"}else n+=" ]\n"}return n+=r+"}",n}toHTMLString(e,t=""){let n=t+"{\n",r=t,i="  ";if(t+=i,(e=e||this.root).value)n+=t+'<b style="color: #458383;">name</b>: "'+e.name+'",\n',n+=t+'<b style="color: #458383;">value</b>: "'+e.value+'",\n',n+=t+'<b style="color: #458383;">line</b>: "'+e.loc.start.line+'" - "'+e.loc.end.line+'"\n',n+=t+'<b style="color: #458383;">column</b>: "'+e.loc.start.column+'" - "'+e.loc.end.column+'"\n';else{let s;if(n+=t+'<i style="color: #8A2BE2;">name</i>: "'+e.name+'"\n',n+=t+'<b style="color: #458383;">line</b>: "'+e.loc.start.line+'" - "'+e.loc.end.line+'"\n',n+=t+'<b style="color: #458383;">column</b>: "'+e.loc.start.column+'" - "'+e.loc.end.column+'"\n',n+=t+'<i style="color: #8A2BE2;">children</i>: [',e.children){for(n+="\n",t+=i,s=e.children.length-1;s>=0;s--)n+=this.toHTMLString(e.children[s],t),n+=",\n";n=n.slice(0,n.length-2),n+="\n",n+=r+i+"]\n"}else n+=" ]\n"}return n+=r+"}",n}}var u,h,d=n("yMDx"),p=n("0mZ+");!function(e){e[e.SyntaxUnknownError=2051]="SyntaxUnknownError",e[e.SyntaxUnexpectedEOF=2052]="SyntaxUnexpectedEOF",e[e.SyntaxRecoverableStateNotFound=2053]="SyntaxRecoverableStateNotFound",e[e.GeneralParsingLimitIsReached=2054]="GeneralParsingLimitIsReached"}(u||(u={})),function(e){e[e.MacroUnknownWarning=3e3]="MacroUnknownWarning",e[e.ReserveWordUsing=3001]="ReserveWordUsing"}(h||(h={}));class f extends p.g{constructor(){super("Parsing diagnostics","P")}resolveFilename(e,t,n){return n.file}resolveRange(e,t,n){if(e===o.D.k_Warning&&t===h.MacroUnknownWarning)return n.loc;switch(t){case u.SyntaxUnknownError:case u.SyntaxUnexpectedEOF:return n.token.loc}return null}resolvePosition(e,t,n){return console.assert(t!=u.SyntaxUnknownError),{line:n.line,column:0,file:null}}diagnosticMessages(){return{[u.SyntaxUnknownError]:"Syntax error during parsing. Token: '{token.value}'\n{token.loc.start.file}:{token.loc.start.line}:{token.loc.start.column}.",[u.SyntaxUnexpectedEOF]:"Syntax error. Unexpected EOF.",[u.GeneralParsingLimitIsReached]:"Parsing limit is reached.",[u.SyntaxRecoverableStateNotFound]:"Recoverable state not found."}}resolveDescription(e,t,n){let r=this.diagnosticMessages();if((0,s.$V)(r[e]))return super.resolveDescription(e,t,n);let{file:i,loc:a,...l}=n;return t==o.D.k_Warning?`${h[e]}: ${JSON.stringify(l)}`:`${u[e]}: ${JSON.stringify(l)}`}}function m(e){return{...e,loc:{start:{...e.loc.start},end:{...e.loc.end}}}}class g{constructor(e){(0,s.hu)(e.parser,"parser engine is not defined"),this.init(e)}init({parser:e,knownTypes:t=new Set,ruleFunctions:n=new Map}){this.parser=e,this.knownTypes=t,this.ruleFunctions=n}get uri(){return this.lexer.document.uri}get diagnosticReport(){let e=this.lexer.getDiagnosticReport(),t=this.diag.resolve();return p.g.mergeReports([e,t])}get root(){return this.tree.root}async parse(e,t=r.NB.k_Optimize){const n=i.Z.testAll(t,r.NB.k_DeveloperMode),s=i.Z.testAll(t,r.NB.k_Optimize);return this.diag=new f,this.tree=new c(s),this.stack=[0],this.setTextDocument(e),this.token=await this.readToken(),this.token.name===d.FI?r.fG.k_Ok:(await this.run({developerMode:n,allowErrorRecoverty:!0}),this.diag.hasErrors()?(console.error("parsing was ended with errors."),r.fG.k_Error):r.fG.k_Ok)}setTextDocument(e){this.lexer=new a.h({engine:this.parser.lexerEngine,knownTypes:this.knownTypes}),this.lexer.setTextDocument(e)}async readToken(){return this.lexer.getNextToken()}emitWarning(e,t){this.diag.warning(e,{token:t})}emitError(e,t){this.diag.error(e,{token:t})}emitCritical(e,t=null){this.diag.critical(e,{token:t})}async restoreState(e,t,n,i,o){for(;;){let a=-1;for(let t=n.length-1;t>=0;--t){const o=e[n[t]][d.pn];if((0,s.Xq)(o)&&o.type===r.WQ.k_Shift&&e[o.stateIndex][i.name]){a=t;break}}if(-1!==a){const e=n[a];let r=n.length-1-a;for(;0!=r;)t.$pop(o.loc),n.pop(),r--;return e}if((0,l.xV)(o.loc,i.loc),i.value===d.FI)break;const c=await this.readToken();Object.keys(c).forEach((e=>i[e]=c[e]))}return-1}operationAdditionalAction(e,t){const n=this.parser.findFunctionByState(e,t);return(0,s.Ft)(n)?r.WQ.k_Ok:((0,s.hu)(!!this.ruleFunctions.has(n)),this.ruleFunctions.get(n)())}async run({developerMode:e=!1,allowErrorRecoverty:t=!0}){const{syntaxTable:n}=this.parser,{stack:i,tree:o}=this,a={index:-1,name:null,value:null};let l=a;let c=0;try{e:for(;;){e&&(c>64e5&&this.emitCritical(u.GeneralParsingLimitIsReached),c++);let h=i[i.length-1],p=n[h][this.token.name];if(t){if(!p){const e=/^[_a-zA-Z][_a-zA-Z0-9]{0,30}$/,t=this.token.name!==d.rl&&e.test(this.token.value)&&n[h][d.rl];if(l.index===this.token.index){this.token=await this.readToken(),this.token.index,l=a;continue}this.token.name===d.FI?this.emitError(u.SyntaxUnexpectedEOF,this.token):t||this.emitError(u.SyntaxUnknownError,this.token),l=m(this.token),this.token=t?{...m(this.token),name:d.rl}:{...m(this.token),name:d.pn}}p=n[h][this.token.name];const e=this.token.name===d.pn;if(!p||e&&p.type===r.WQ.k_Shift){let e=m(l);for(;e.name===d.we;)e=await this.readToken(),e.index;h=await this.restoreState(n,o,i,e,this.token),-1===h&&this.emitCritical(u.SyntaxRecoverableStateNotFound),p=n[h][this.token.name],i.push(p.stateIndex),o.addToken(this.token),this.token=e;continue}}if((0,s.Xq)(p))switch(p.type){case r.WQ.k_Success:break e;case r.WQ.k_Shift:{const e=p.stateIndex;i.push(e),o.addToken(this.token);const t=this.operationAdditionalAction(e,this.token.name);t===r.WQ.k_Error?this.emitCritical(u.SyntaxUnknownError,this.token):t===r.WQ.k_Ok&&(this.token=await this.readToken(),this.token.index)}break;case r.WQ.k_Reduce:{const e=p.rule.right.length;i.length-=e;const t=n[i[i.length-1]][p.rule.left].stateIndex;i.push(t),o.reduceByRule(p.rule,this.parser.getRuleCreationMode(p.rule.left));this.operationAdditionalAction(t,p.rule.left)===r.WQ.k_Error&&this.emitCritical(u.SyntaxUnknownError,this.token)}}else(0,s.hu)(!t,"unexpected end, something went wrong :/"),this.emitCritical(u.SyntaxUnknownError,this.token)}o.finishTree()}catch(e){if(!(e instanceof p.V))throw e}}}var v=n("4ELN"),y=n("BCBV");const b=["half2","half3","half4","float2","float3","float4","float2x2","float2x3","float2x4","float3x2","float3x3","float3x4","float4x2","float4x3","float4x4","int2","int3","int4","uint2","uint3","uint4","bool2","bool3","bool4","auto"];class _ extends g{constructor({parser:e=(0,y.DU)(),knownTypes:t=new Set,...n}={}){super({parser:e,knownTypes:new Set([...b,...t]),...n})}get includes(){return this.preprocessor.includeMap}get unreachableCode(){return this.preprocessor.unreachableCodeList}get macros(){return[...this.preprocessor.macros]}get unresolvedMacros(){return this.preprocessor.unresolvedMacros}get uri(){return this.preprocessor.uri}get diagnosticReport(){let e=this.preprocessor.getDiagnosticReport(),t=this.diag.resolve();return p.g.mergeReports([e,t])}init(e){super.init(e);const{knownTypes:t}=this,{includeResolver:n,defines:r}=e;this.preprocessor=new v.Av(this.parser.lexerEngine,{knownTypes:t,includeResolver:n,defines:r}),this.ruleFunctions.set("addType",this._addType.bind(this)),this.ruleFunctions.set("addTypeDef",this._addTypeDef.bind(this)),this.ruleFunctions.set("print",this._print.bind(this))}_addType(){const e=this.tree.lastNode.value;return this.knownTypes.add(e),r.WQ.k_Ok}_addTypeDef(){const e=this.tree.lastNode.children[0].value;return this.knownTypes.add(e),r.WQ.k_Ok}_print(){const e=this.tree.lastNode;return console.log(e),r.WQ.k_Ok}setTextDocument(e){this.preprocessor.setTextDocument(e)}async readToken(){const e=await this.preprocessor.readToken(),t=this.preprocessor.macroLocation();return t&&(e.loc=t),e}}async function x(e,t={}){const{flags:n,knownTypes:r,includeResolver:i,defines:s}=t,o=new _({knownTypes:new Set([...r||[]]),includeResolver:i,defines:s});return await o.parse(e,n),o}},"7Nqm":(e,t,n)=>{"use strict";n.d(t,{N:()=>o,Z:()=>a});var r=n("cOQ3"),i=n("Jm+q"),s=n("/Hc9");async function o(e,t={}){let n=e,o=e;if((0,r.HD)(n.source)){let{flags:e,includeResolver:r}=t;o=await(0,s.J)(n,{flags:e,includeResolver:r})}const a=`createSLDocument(${o.uri})`;console.time(a);const l=new i.L,c=await l.parse(o);return console.timeEnd(a),c}async function a(e,t,n,r={}){let o=null;if(e){let n=Object.keys(t.root.scope.types),{flags:i,includeResolver:a}=r;o=await(0,s.J)(e,{flags:i,knownTypes:n,includeResolver:a})}return(new i.L).extend(o,t,n)}},BCBV:(e,t,n)=>{"use strict";n.d(t,{kG:()=>b,DU:()=>y});var r=n("cOQ3"),i=n("Y0AG"),s=n("SSye"),o=n("yMDx");class a{constructor(e,t,n){this.rule=e,this.pos=t,this.index=0,this.expectedSymbols=new Set,n&&n.forEach((e=>this.addExpected(e)))}isEqual(e,t=i.TI.k_LR0){if(t===i.TI.k_LR0)return this.rule===e.rule&&this.pos===e.pos;if(t===i.TI.k_LR1){if(this.rule!==e.rule||this.pos!==e.pos||this.expectedSymbols.size!==e.expectedSymbols.size)return!1;for(const t of this.expectedSymbols)if(!e.isExpected(t))return!1;return!0}return!1}isParentItem(e){return this.rule===e.rule&&this.pos===e.pos+1}isChildItem(e){return this.rule===e.rule&&this.pos===e.pos-1}symbolName(){const e=this.rule.right;return this.pos===e.length?o.CC:e[this.pos]}isExpected(e){return this.expectedSymbols.has(e)}addExpected(e){return!this.isExpected(e)&&(this.expectedSymbols.add(e),!0)}toString(e=null){const{left:t,right:n}=this.rule;let r=`${t} -> `;if(r+=n.map((t=>a.decodeSymbol(t,e))).map(((e,t)=>t===this.pos?`. ${e}`:`${e}`)).join(" "),this.pos===n.length&&(r+=" . "),this.expectedSymbols){const t=Array.from(this.expectedSymbols).map((t=>a.decodeSymbol(t,e)));t.length&&(r+=", "+t.join(" "))}return r}static decodeSymbol(e,t){return t&&t.get(e)&&e!==t.get(e)?`'${t.get(e)}'`:e}}var l=n("sesj");class c{constructor(){this.nextStates={},this.index=0,this.items=[],this.numBaseItems=0,this.numOtherItems=0}eachItem(e){for(let t=0;t<this.items.length;++t)e(this.items[t],t)}eachBaseItem(e){for(let t=0;t<this.numBaseItems;++t)e(this.items[t],t)}isExpected(e){return!!this.items.find((t=>t.isExpected(e)))}hasItem(e,t){return this.items.find((n=>n.isEqual(e,t)))||null}hasParentItem(e){return this.items.find((t=>t.isParentItem(e)))||null}hasChildItem(e){return this.items.find((t=>t.isChildItem(e)))||null}hasRule(e,t){for(let n=0;n<this.numBaseItems;++n){const r=this.items[n];if(r.rule===e&&r.pos===t)return!0}return!1}isEmpty(){return!this.items.length}isEqual(e,t){if(this.numBaseItems!==e.numBaseItems)return!1;for(let n=0;n<this.numBaseItems;++n){const r=this.items[n];let i=!1;for(let n=0;n<e.numBaseItems;++n){const s=e.items[n];if(r.isEqual(s,t)){i=!0;break}}if(!i)return!1}return!0}push(e){0===this.items.length||e.pos>0?((0,r.hu)(0===this.numOtherItems),this.numBaseItems++):this.numOtherItems++,this.items.push(e)}tryPush_LR0(e,t){const n=this.items.find((n=>n.rule===e&&n.pos===t));if(n)return!1;const r=new a(e,t);return this.push(r),!0}tryPush_LR(e,t,n){const r=this.items.find((n=>n.rule===e&&n.pos===t));if(r)return r.addExpected(n);const i=new a(e,t,[n]);return this.push(i),!0}addNextState(e,t){return!this.nextStates[e]&&(this.nextStates[e]=t,!0)}deleteNotBase(){this.items.length=this.numBaseItems}toString(e=!0,t=null){const n=e?this.items.slice(0,this.numBaseItems):this.items;return`State ${this.index}:\n`+n.map((e=>`\t\t${e.toString(t)}\n`)).join()}}var u,h=n("0mZ+");!function(e){e[e.GrammarAddOperation=2001]="GrammarAddOperation",e[e.GrammarAddStateLink=2002]="GrammarAddStateLink",e[e.GrammarUnexpectedSymbol=2003]="GrammarUnexpectedSymbol",e[e.GrammarInvalidAdditionalFuncName=2004]="GrammarInvalidAdditionalFuncName",e[e.GrammarInvalidKeyword=2005]="GrammarInvalidKeyword"}(u||(u={}));class d extends h.g{constructor(){super("Grammar diagnostics","G")}resolveFilename(e,t,n){return n.file}resolveRange(e,t,n){return null}resolvePosition(e,t,n){return{line:n.line,column:0,file:null}}diagnosticMessages(){return{[u.GrammarAddOperation]:'Grammar not LALR(1)! Cannot to generate syntax table. Add operation error.\nConflict in state with index: {stateIndex}. With grammar symbol: "{grammarSymbol}"\nOld operation: {oldOperation}\nNew operation: {newOperation}\nFor more info init parser in debug-mode and see syntax table and list of states.\n\n{stateDesc}',[u.GrammarAddStateLink]:'Grammar not LALR(1)! Cannot to generate syntax table. Add state link error.\nConflict in state with index: {stateIndex}. With grammar symbol: "{grammarSymbol}"\nOld next state: {oldNextStateIndex}\nNew next state: {newNextStateIndex}\nFor more info init parser in debug-mode and see syntax table and list of states.',[u.GrammarUnexpectedSymbol]:"Grammar error. Can`t generate rules from grammar\nUnexpected symbol: {unexpectedSymbol}\nExpected: {expectedSymbol}",[u.GrammarInvalidAdditionalFuncName]:"Grammar error. Empty additional function name.",[u.GrammarInvalidKeyword]:"Grammar error. Bad keyword: {badKeyword}\nAll keyword must be define in lexer rule block."}}}class p{constructor({grammar:e,flags:t=i.eo.k_Default,type:n=i.TI.k_LALR}){this._syntaxTable=null,this._productions=null,this._baseItems=null,this._states=null,this._additionalFuncInfoList=null,this._adidtionalFunctByStateDMap=null,this._ruleCreationModeMap=null,this._firstTerminalsCache=null,this._closureForItemsCache=null,this._expectedExtensionDMap=null,this._diag=new d,this.init({grammar:e,flags:t,type:n})}get syntaxTable(){return this._syntaxTable}findFunctionByState(e,t){const n=this._adidtionalFunctByStateDMap;return!(0,r.Ft)(n)&&(0,r.Xq)(n[e])&&(0,r.Xq)(n[e][t])?n[e][t]:null}getRuleCreationMode(e){return this._ruleCreationModeMap[e]}getGrammarSymbols(){return this._grammarSymbols}init({grammar:e,flags:t=i.eo.k_Default,type:n=i.TI.k_LALR}){this.lexerEngine=new l.f,this.generateRules(e,t),this.buildSyntaxTable(n),this.generateFunctionByStateMap(),s.Z.testAll(t,i.eo.k_Debug)||this.clearMem()}printStates(e=!0){if(!(0,r.Xq)(this._states))return void console.warn("It`s impossible to print states. You must init parser in debug-mode");const t="\n"+this.statesToString(e);console.log(t)}printState(e,t=!0){if((0,r.Xq)(this._states)){var n=this._states[e];(0,r.Xq)(n)?console.log(`\n${n.toString(t,this.getGrammarSymbols())}`):console.log("Can not print stete with index: "+e.toString())}else console.log("It`s impossible to print states. You must init parser in debug-mode.")}critical(e,t){this._diag.critical(e,t)}grammarError(e,t){let n="grammar";switch(e){case u.GrammarAddOperation:{const{stateIndex:r,grammarSymbol:i,oldOperation:s,newOperation:o}=t;this.critical(e,{file:n,line:0,stateIndex:r,grammarSymbol:i,oldOperation:p.operationToString(s),newOperation:p.operationToString(o),stateDesc:this._states[r].toString()})}break;case u.GrammarAddStateLink:{const{stateIndex:r,grammarSymbol:i,oldNextStateIndex:s,newNextStateIndex:o}=t;this.critical(e,{file:n,line:0,stateIndex:r,grammarSymbol:i,oldNextStateIndex:s,newNextStateIndex:o})}break;case u.GrammarUnexpectedSymbol:{const{grammarLine:r,expectedSymbol:i,unexpectedSymbol:s}=t;this.critical(e,{file:n,line:r,expectedSymbol:i,unexpectedSymbol:s})}break;case u.GrammarInvalidAdditionalFuncName:{const{grammarLine:r}=t;this.critical(e,{file:n,line:r})}break;case u.GrammarInvalidKeyword:{const{grammarLine:r,badKeyword:i}=t;this.critical(e,{file:n,line:r,badKeyword:i})}break;default:throw"invalid case!!!!"}}clearMem(){delete this._states,delete this._productions,delete this._baseItems,delete this._firstTerminalsCache,delete this._closureForItemsCache,delete this._expectedExtensionDMap}hasState(e,t){return this._states.find((n=>n.isEqual(e,t)))||null}nonTerminals(){return Object.keys(this._productions)}rules(e){const t=this._productions[e];return t?Object.keys(t).map((e=>t[e])):null}ruleCreationMode(e){return this._ruleCreationModeMap[e]}symbols(){return[...this._grammarSymbols.keys()]}isTerminal(e){return!this._productions[e]}pushState(e){e.index=this._states.length,this._states.push(e)}pushBaseItem(e){e.index=this._baseItems.length,this._baseItems.push(e)}tryAddState(e,t){let n=this.hasState(e,t);return(0,r.Ft)(n)?(t===i.TI.k_LR0&&e.eachItem((e=>this.pushBaseItem(e))),this.pushState(e),this.closure(e,t),e):n}hasEmptyRule(e){return!this.isTerminal(e)&&!!this.rules(e).find((e=>0===e.right.length))}pushInSyntaxTable(e,t,n,i){e[t]=e[t]||{},(0,r.Xq)(e[t][n])&&this.grammarError(u.GrammarAddOperation,{stateIndex:t,grammarSymbol:this.convertGrammarSymbol(n),oldOperation:this._syntaxTable[t][n],newOperation:i}),e[t][n]=i}addStateLink(e,t,n){e.addNextState(n,t)||this.grammarError(u.GrammarAddStateLink,{stateIndex:e.index,oldNextStateIndex:e.nextStates[n]||null,newNextStateIndex:t.index,grammarSymbol:this.convertGrammarSymbol(n)})}firstTerminals(e){if(this.isTerminal(e))return null;if((0,r.Xq)(this._firstTerminalsCache[e]))return this._firstTerminalsCache[e];const t=this.rules(e),n=this._firstTerminalsCache[e]=new Set;if(this.hasEmptyRule(e)&&n.add(o.r8),(0,r.Ft)(t))return n;for(let i=0;i<t.length;++i){const s=t[i].right;let a=!1;for(let t=0;t<s.length;t++){if(s[t]===e){if(n.has(o.r8))continue;a=!0;break}const i=this.firstTerminals(s[t]);if((0,r.Ft)(i))n.add(s[t]);else for(const e of i)n.add(e);if(!this.hasEmptyRule(s[t])){a=!0;break}}a||n.add(o.r8)}return n}firstTerminalsForSet(e,t){const n=new Set;for(let t=0;t<e.length;t++){const i=this.firstTerminals(e[t]);if((0,r.Ft)(i))return n.add(e[t]),n;let s=!1;for(const e of i)e!==o.r8?n.add(e):s=!0;if(!s)return n}return(0,r.Ft)(t)||t.forEach((e=>n.add(e))),n}generateRules(e,t){let n,a,l=e.split(/\r?\n/),c=!1;this._productions={},this._additionalFuncInfoList=[],this._ruleCreationModeMap={},this._grammarSymbols=new Map([["END_SYMBOL",o.FI]]);let h=0,d=0;const p=s.Z.testAll(t,i.eo.k_ForceAppendAll),f=s.Z.testAll(t,i.eo.k_AllowExposeMode),m=s.Z.testAll(t,i.eo.k_AllowAddMode),g=s.Z.testAll(t,i.eo.k_AllowSkipMode);let v,y=this._ruleCreationModeMap,b=0;for(h=0;h<l.length;h++)if(""!==l[h]&&"\r"!==l[h]&&(n=l[h].trim().split(/\s* \s*/),n[0][0]!=o.D3))if(c){if((3===n.length||4===n.length&&""===n[3])&&('"'===n[2][0]||"'"===n[2][0])&&n[2].length>3){n[2][0]!==n[2][n[2].length-1]&&this.grammarError(u.GrammarUnexpectedSymbol,{unexpectedSymbol:n[2][n[2].length-1],expectedSymbol:n[2][0],grammarLine:h}),n[2]=n[2].slice(1,n[2].length-1);var _=n[2][0];v="_"===_||_>="a"&&_<="z"||_>="A"&&_<="Z"?this.lexerEngine.addKeyword(n[2],n[0]):this.lexerEngine.addPunctuator(n[2],n[0]),this._grammarSymbols.set(v,n[2])}}else if(n[0]!==o.ul){for((0,r.Xq)(this._productions[n[0]])||(this._productions[n[0]]={}),a={left:n[0],right:[],index:0},this._grammarSymbols.set(n[0],n[0]),p||f&&!(0,r.Xq)(y[n[0]])?y[n[0]]=i.Vc.k_Default:m&&!(0,r.Xq)(y[n[0]])?y[n[0]]=i.Vc.k_Expose:g&&!(0,r.Xq)(y[n[0]])&&(y[n[0]]=i.Vc.k_Skip),d=2;d<n.length;d++)if(""!==n[d])if(n[d]!==o.qn)if(n[d]!==o.PB)if(n[d]!==o.jL)if(n[d]!==o.qq)"'"===n[d][0]||'"'===n[d][0]?(3!==n[d].length&&this.grammarError(u.GrammarInvalidKeyword,{badKeyword:n[d],grammarLine:h}),n[d][0]!==n[d][2]&&this.grammarError(u.GrammarUnexpectedSymbol,{unexpectedSymbol:n[d][2],expectedSymbol:n[d][0],grammarLine:h}),v=this.lexerEngine.addPunctuator(n[d][1]),a.right.push(v),this._grammarSymbols.set(v,n[d][1])):(a.right.push(n[d]),this._grammarSymbols.set(n[d],n[d]));else{n[d+1]&&0!==n[d+1].length||this.grammarError(u.GrammarInvalidAdditionalFuncName,{grammarLine:h});const e={name:n[d+1],position:a.right.length,rule:a};this._additionalFuncInfoList.push(e),d++}else f&&!p&&(y[n[0]]=i.Vc.k_Expose);else g&&!p&&(y[n[0]]=i.Vc.k_Skip);else m&&(y[n[0]]=i.Vc.k_Necessary);a.index=b,this._productions[n[0]][a.index]=a,b++,(0,r.hu)(1!=b||(0,r.Xq)(this._productions[o.ao][0]))}else c=!0}generateFunctionByStateMap(){const e=this._states,t=this._additionalFuncInfoList,n=this._adidtionalFunctByStateDMap={};for(let r=0;r<t.length;r++){const i=t[r],s=i.rule,o=i.position,a=s.right[o-1];for(let t=0;t<e.length;t++)e[t].hasRule(s,o)&&(n[e[t].index]=n[e[t].index]||{},n[e[t].index][a]=i.name)}}generateFirstState_LR0(){const e=new c,t=this._productions[o.ao][0],n=new a(t,0);this.pushBaseItem(n),e.push(n),this.closure_LR0(e),this.pushState(e)}generateFirstState_LR(){const e=new c,t=this._productions[o.ao][0];e.push(new a(t,0,[o.FI])),this.closure_LR(e),this.pushState(e)}closure(e,t){t===i.TI.k_LR0?this.closure_LR0(e):this.closure_LR(e)}closure_LR0(e){e.eachItem((t=>{const n=t.symbolName();n===o.CC||this.isTerminal(n)||this.rules(n).forEach((t=>e.tryPush_LR0(t,0)))}))}closure_LR(e){let t;do{t=!1,e.eachItem((n=>{const r=n.symbolName();if(r!==o.CC&&!this.isTerminal(r)){const i=n.rule.right.slice(n.pos+1),s=this.firstTerminalsForSet(i,n.expectedSymbols);this.rules(r).forEach((n=>{s.forEach((r=>{e.tryPush_LR(n,0,r)&&(t=!0)}))}))}}))}while(t)}static nextState_LR0(e,t){const n=new c;return e.eachItem((e=>{e.symbolName()===t&&n.push(new a(e.rule,e.pos+1))})),n}static nextState_LR(e,t){const n=new c;return e.eachItem((e=>{if(e.symbolName()===t){const t=Array.from(e.expectedSymbols);n.push(new a(e.rule,e.pos+1,t))}})),n}deleteNotBaseItems(){this._states.forEach((e=>e.deleteNotBase()))}closureForItem({rule:e,pos:t}){const n=e.index+"_"+t;let i=this._closureForItemsCache[n];return(0,r.Xq)(i)||(i=new c,i.push(new a(e,t,[o.jx])),this.closure_LR(i),this._closureForItemsCache[n]=i),i}addLinkExpected(e,t){let n=this._expectedExtensionDMap,r=e.index;n[r]=n[r]||{},n[r][t.index]=!0}determineExpected(e,t){const n=e.nextStates[t]||null;(0,r.Ft)(n)||e.eachBaseItem((e=>{const t=this.closureForItem(e);n.eachBaseItem((n=>{const r=t.hasChildItem(n);r&&r.expectedSymbols.forEach((t=>{t===o.jx?this.addLinkExpected(e,n):n.addExpected(t)}))}))}))}generateLinksExpected(){const e=this._states,t=this.symbols();e.forEach((e=>t.forEach((t=>this.determineExpected(e,t)))))}expandExpected(){const e=this._baseItems,t=e.map((e=>!0)),n=this._expectedExtensionDMap;let i;e[0].addExpected(o.FI),t[0]=!0;do{i=!1,e.forEach((s=>{if(t[s.index]&&(0,r.$V)(n[s.index])){let r=Object.keys(n[s.index]).map((e=>Number(e)));s.expectedSymbols.forEach((n=>{r.forEach((r=>{e[r].addExpected(n)&&(t[r]=!0,i=!0)}))}))}t[s.index]=!1}))}while(i)}generateStates(e){e===i.TI.k_LR0?this.generateStates_LR0():e===i.TI.k_LR1?this.generateStates_LR():e===i.TI.k_LALR&&this.generateStates_LALR()}generateStates_LR0(){this.generateFirstState_LR0();const e=this._states,t=this.symbols();for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<t.length;e++){const n=t[e];let s=p.nextState_LR0(r,n);s.isEmpty()||(s=this.tryAddState(s,i.TI.k_LR0),this.addStateLink(r,s,n))}}}generateStates_LR(){this._firstTerminalsCache={},this.generateFirstState_LR();const e=this._states,t=this.symbols();for(let n=0;n<e.length;n++){const r=e[n];for(let e=0;e<t.length;e++){let n=t[e],s=p.nextState_LR(r,n);s.isEmpty()||(s=this.tryAddState(s,i.TI.k_LR1),this.addStateLink(r,s,n))}}}generateStates_LALR(){this._baseItems=[],this._expectedExtensionDMap={},this._closureForItemsCache={},this._firstTerminalsCache={},this.generateStates_LR0(),this.deleteNotBaseItems(),this.generateLinksExpected(),this.expandExpected(),this._states.forEach((e=>this.closure_LR(e)))}addReducing(e,t,n){t.eachItem((r=>{if(r.symbolName()===o.CC)if(r.rule.left===o.ao)this.pushInSyntaxTable(e,t.index,o.FI,{type:i.WQ.k_Success});else for(const i of r.expectedSymbols)this.pushInSyntaxTable(e,t.index,i,n[r.rule.index])}))}addShift(e,t,n){const r=t.nextStates,i=Object.keys(r);for(let s=0;s<i.length;s++){const o=r[i[s]];this.pushInSyntaxTable(e,t.index,i[s],n[o.index])}}buildSyntaxTable(e){this._states=[],this._syntaxTable={};const t=this._states,n=this._syntaxTable;this.generateStates(e);const r={},s={};t.forEach((e=>{s[e.index]={type:i.WQ.k_Shift,stateIndex:e.index}}));this.nonTerminals().forEach((e=>{this.rules(e).forEach((e=>{r[e.index]={type:i.WQ.k_Reduce,rule:e}}))})),t.forEach((e=>{this.addReducing(n,e,r),this.addShift(n,e,s)}))}statesToString(e=!0){if(!this._states)return"";let t="";for(let n=0;n<this._states.length;n++)t+=this._states[n].toString(e,this._grammarSymbols),t+=" ";return t}static operationToString(e){let t="";switch(e.type){case i.WQ.k_Shift:t="SHIFT to state "+e.stateIndex.toString();break;case i.WQ.k_Reduce:t="REDUCE by rule { "+p.ruleToString(e.rule)+" }";break;case i.WQ.k_Success:t="SUCCESS"}return t}static ruleToString(e){let t;return t=e.left+" : "+e.right.join(" "),t}convertGrammarSymbol(e){return this.isTerminal(e)?this.lexerEngine.getTerminalValueByName(e):e}}p.$parserEngine=null,p.$parserParams=null;const f="S : Program\r\nProgram : --add\r\nProgram : Decls\r\n\r\nDecls : Decl --expose\r\nDecls : Decls Decl\r\n\r\nDecl : ';'\r\nDecl : TypeDecl\r\nDecl : VariableDecl\r\nDecl : VarStructDecl\r\nDecl : FunctionDecl\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    Decl : TechniqueDecl\r\n#endif\r\nDecl : Technique11Decl\r\nDecl : UseDecl\r\n#if FX_PART\r\n    Decl : ImportDecl\r\n    Decl : ProvideDecl\r\n#endif\r\nDecl : CbufferDecl\r\nDecl : TbufferDecl\r\nDecl : ERROR\r\n\r\n#if FX_PART\r\n    Decl : PartFxDecl\r\n    ImportDecl : T_KW_IMPORT String ';'\r\n    ProvideDecl : T_KW_PROVIDE ComplexNameOpt ';'\r\n# ProvideDecl : T_KW_PROVIDE ComplexNameOpt T_KW_AS ComplexNameOpt ';'\r\n#endif \r\n\r\nUseDecl : T_KW_USE Mode\r\nMode : T_KW_STRICT\r\n\r\nUsages : Usage --expose\r\nUsages : Usages Usage\r\nUsage : T_KW_STATIC --add\r\nUsage : T_KW_NOINTERPOLATION\r\nUsage : T_KW_CENTROID\r\nUsage : T_KW_NOPERSPECTIVE\r\nUsage : T_KW_UNIFORM\r\nUsage : T_KW_EXTERN\r\nUsage : T_KW_VOLATILE\r\nUsage : T_KW_INLINE\r\nUsage : T_KW_UNSIGNED\r\nUsage : T_KW_PRECISE\r\nUsage : ConstUsage\r\n\r\nConstUsages : ConstUsage --expose\r\nConstUsages : ConstUsages ConstUsage\r\nConstUsage : T_KW_CONST\r\nConstUsage : T_KW_ROW_MAJOR\r\nConstUsage : T_KW_COLUMN_MAJOR\r\n\r\nUsageType : Type --add\r\nUsageType : Usages Type\r\n\r\nUsageStructDecl : StructDecl --add\r\nUsageStructDecl : Usages StructDecl\r\n\r\nTypeDecl : T_KW_TYPEDEF ConstType TypeDefs --F addTypeDef ';' --add\r\nTypeDecl : T_KW_TYPEDEF ConstStructDecl TypeDefs --F addTypeDef ';'\r\nTypeDecl : StructDecl ';'\r\nTypeDefs : VariableDim\r\nTypeDefs : VariableDim ',' TypeDefs\r\n\r\nType : BaseType --add\r\nType : Struct\r\nType : TypeId\r\nType : T_KW_STRUCT TypeId\r\n\r\nConstType : Type --add\r\nConstType : ConstUsages Type\r\nConstTypeDim : ConstType --expose\r\nConstTypeDim : ConstTypeDim '[' ConstantExpr ']'\r\n\r\nBaseType : T_KW_VOID --add\r\nBaseType : ScalarType\r\nBaseType : VectorType\r\nBaseType : MatrixType\r\nBaseType : ObjectType\r\n\r\nScalarType : T_KW_BOOL --add\r\nScalarType : T_KW_INT\r\n# ScalarType : T_KW_UNSIGNED T_KW_INT\r\nScalarType : T_KW_UINT\r\nScalarType : T_KW_HALF\r\nScalarType : T_KW_FLOAT\r\nScalarType : T_KW_DOUBLE\r\n\r\nVectorType : T_KW_VECTOR --add\r\nVectorType : T_KW_VECTOR '<' ScalarType ',' AddExpr '>'\r\n\r\nMatrixType : T_KW_MATRIX --add\r\nMatrixType : T_KW_MATRIX '<' ScalarType ',' ConstantExpr ',' AddExpr '>'\r\n\r\nObjectType : T_KW_STRING --add\r\nObjectType : T_KW_TEXTURE\r\nObjectType : T_KW_TEXTURE1D\r\nObjectType : T_KW_TEXTURE2D\r\nObjectType : T_KW_TEXTURE2D '<' Type '>'\r\n#if FX_PART\r\n    ObjectType : T_KW_TRIMESH '<' Type '>'\r\n#endif\r\nObjectType : T_KW_TEXTURE2DARRAY\r\nObjectType : T_KW_TEXTURE3D\r\nObjectType : T_KW_TEXTURE3D '<' Type '>'\r\nObjectType : T_KW_TEXTURECUBE\r\nObjectType : T_KW_TEXTURECUBEARRAY\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    # ObjectType : T_KW_SAMPLER\r\n    # ObjectType : T_KW_SAMPLER1D\r\n    # ObjectType : T_KW_SAMPLER2D\r\n    # ObjectType : T_KW_SAMPLER3D\r\n    # ObjectType : T_KW_SAMPLERCUBE\r\n    # ObjectType : T_KW_STATEBLOCK\r\n#endif\r\nObjectType : T_KW_SAMPLER_STATE\r\nObjectType : T_KW_SAMPLER_COMPARISON_STATE\r\nObjectType : T_KW_DEPTH_STENCIL_STATE\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    # ObjectType : T_KW_PIXELSHADER\r\n    # ObjectType : T_KW_VERTEXSHADER\r\n    # ObjectType : T_KW_PIXELFRAGMENT\r\n    # ObjectType : T_KW_VERTEXFRAGMENT\r\n#endif\r\nObjectType : T_KW_RWTEXTURE1D '<' Type '>'\r\nObjectType : T_KW_RWTEXTURE2D '<' Type '>'\r\nObjectType : T_KW_RWTEXTURE3D '<' Type '>'\r\nObjectType : T_KW_BUFFER '<' Type '>'\r\nObjectType : T_KW_RWBUFFER '<' Type '>'\r\nObjectType : T_KW_RWSTRUCTUREDBUFFER '<' Type '>'\r\nObjectType : T_KW_STRUCTUREDBUFFER '<' Type '>'\r\nObjectType : T_KW_APPENDSTRUCTUREDBUFFER '<' Type '>'\r\n\r\nStruct : T_KW_STRUCT '{' '}' --add\r\nStruct : T_KW_STRUCT '{' StructDecls '}'\r\nStructDecl : T_KW_STRUCT Id --F addType '{' '}' --add\r\nStructDecl : T_KW_STRUCT Id --F addType '{' UseDecl StructDecls '}'\r\nStructDecl : T_KW_STRUCT Id --F addType '{' StructDecls '}'\r\n\r\nConstStructDecl : StructDecl\r\nConstStructDecl : ConstUsages StructDecl\r\n\r\nStructDecls : VariableDecl --expose \r\nStructDecls : VarStructDecl --expose \r\nStructDecls : VariableDecl StructDecls\r\nStructDecls : VarStructDecl StructDecls\r\n\r\nSemantic : ':' Id --add\r\nSemantic : ':' T_KW_REGISTER '(' Register ')'\r\nSemantics : Semantic\r\nSemantics : Semantics Semantic\r\nSemanticsOpt :\r\nSemanticsOpt : Semantics\r\n\r\nRegister : Id\r\nRegister : Target ',' Id\r\n\r\nAnnotation : AnnotationBegin AnnotationEnd  --add\r\nAnnotation : AnnotationBegin AnnotationDecls AnnotationEnd\r\nAnnotationOpt :\r\nAnnotationOpt : Annotation\r\nAnnotationBegin : '<'\r\nAnnotationDecls : VariableDecl\r\nAnnotationDecls : VariableDecl AnnotationDecls\r\nAnnotationEnd : '>'\r\n\r\nInitializer : '=' AssignmentExpr --add\r\nInitializer : '=' ERROR --add\r\nInitializer : '=' '{' InitExprs '}'\r\nInitializer : '=' '{' InitExprs ',' '}'\r\nInitializer : StateBlock\r\n\r\nVariableDecl : UsageType Variables ';' --add\r\nVariableDecl : UsageType Variables ERROR --add\r\nVarStructDecl : UsageStructDecl Variables ';' --add\r\n\r\nVariables : Variable --expose\r\nVariables : Variables ',' Variable\r\n# Variables : Variables ERROR Variable\r\nVariables : Variables ',' ERROR\r\nVariable : VariableDim SemanticsOpt AnnotationOpt Initializer --add\r\nVariable : VariableDim SemanticsOpt AnnotationOpt --add\r\nVariableDim : NonTypeId --add\r\nVariableDim : VariableDim '[' ConstantExpr ']'\r\n\r\n\r\nFunctionDecl : Attributes FunctionDef ';' --add\r\nFunctionDecl : FunctionDef ';' --add\r\nFunctionDecl : Attributes FunctionDef AnnotationOpt StmtBlock\r\nFunctionDecl : FunctionDef AnnotationOpt StmtBlock\r\n\r\n# TODO: remove it;\r\nFunctionDecl : Attributes FunctionDef AnnotationOpt ERROR\r\nFunctionDecl : FunctionDef AnnotationOpt ERROR\r\n\r\nFunctionDef : UsageType NonTypeId ParamList SemanticsOpt\r\n\r\nAttribute : '[' Id '(' ArgumentsOpt ')' ']'\r\nAttribute : '[' Id ']'\r\nAttributes : Attribute --expose\r\nAttributes : Attributes Attribute\r\nAttributesOpt : --expose\r\nAttributesOpt : Attributes\r\n\r\nParamList : '(' ')'\r\nParamList : '(' T_KW_VOID ')'\r\nParamList : '(' ParameterDecls ')'\r\n\r\nParameterDecls : ParameterDecl --expose\r\nParameterDecls : ParameterDecls ',' ParameterDecl\r\nParameterDecls : ParameterDecls ERROR ParameterDecl\r\nParameterDecls : ParameterDecls ',' ERROR\r\nParameterDecls : ERROR\r\nParameterDecl : ParamUsageType Variable\r\n\r\nParamUsageType : Type --add\r\nParamUsageType : ParamUsages Type\r\n\r\nParamUsages : ParamUsage --expose\r\nParamUsages : ParamUsages ParamUsage\r\nParamUsage : T_KW_IN --add\r\nParamUsage : T_KW_OUT\r\nParamUsage : T_KW_INOUT\r\nParamUsage : T_KW_UNIFORM\r\nParamUsage : ConstUsage\r\n\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    TechniqueDecl : T_KW_TECHNIQUE ComplexNameOpt SemanticsOpt AnnotationOpt TechniqueBody --add\r\n    TechniqueBody : '{' '}'  --add\r\n    TechniqueBody : '{' PassDecls '}'\r\n#endif \r\n\r\nTechnique11Decl : T_KW_TECHNIQUE11 ComplexNameOpt SemanticsOpt AnnotationOpt Technique11Body --add\r\nTechnique11Body : '{' '}'  --add\r\nTechnique11Body : '{' Pass11Decls '}'\r\n\r\nCbufferDecl : T_KW_CBUFFER IdOpt SemanticsOpt AnnotationOpt '{' StructDecls '}' ';' --add\r\nCbufferDecl : T_KW_CBUFFER IdOpt SemanticsOpt AnnotationOpt '{' '}' ';' --add\r\nTbufferDecl : T_KW_TBUFFER IdOpt SemanticsOpt AnnotationOpt '{' StructDecls '}' ';' --add\r\nTbufferDecl : T_KW_TBUFFER IdOpt SemanticsOpt AnnotationOpt '{' '}' ';' --add\r\n\r\nComplexNameOpt : ComplexName --add\r\nComplexName : Id --expose\r\nComplexName : ComplexName '.' Id\r\n\r\n#if PRESETS_EX\r\n    PresetDecl : T_KW_PRESET Id AnnotationOpt PassStateBlock --add\r\n#endif\r\n\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    PassDecls : PassDecl --expose\r\n    PassDecls : PassDecls PassDecl\r\n    PassDecl : T_KW_PASS IdOpt AnnotationOpt PassStateBlock --add\r\n    #if PRESETS_EX\r\n    PassDecl : PresetDecl\r\n    #endif\r\n    PassDecl : ';'\r\n#endif\r\n\r\nPass11Decls : Pass11Decl --expose\r\nPass11Decls : Pass11Decls Pass11Decl\r\nPass11Decl : T_KW_PASS IdOpt AnnotationOpt StmtBlock --add\r\nPass11Decl : ';'\r\n\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    PassStateBlock : '{' '}' --add\r\n    PassStateBlock : '{' PassStates '}'\r\n    PassStates : PassState --expose\r\n    PassStates : PassStates PassState\r\n\r\n    PassState : Id StateIndex '=' PassStateExpr ';' --add\r\n#endif\r\n\r\n# todo: move all particles declarations to separate grammar!\r\n#if FX_PART\r\n    PartFxDecl : T_KW_FXPART ComplexNameOpt SemanticsOpt AnnotationOpt PartFxBody --add\r\n\r\n    PartFxBody : '{' '}' \r\n    PartFxBody : '{' PartFxProperties '}'\r\n\r\n    PartFxProperties : PartFxProperty --expose\r\n    PartFxProperties : PartFxProperties PartFxProperty\r\n    PartFxProperty : PassState\r\n    PartFxProperty : PassDecl\r\n#endif // FX_PART\r\n\r\nStateBlock : '{' '}' --add\r\nStateBlock : '{' States '}'\r\nStateBlock : '{' StateBlockItems '}'\r\nStateBlockItems : StateBlock  --expose\r\nStateBlockItems : StateBlock ',' StateBlockItems\r\nState : Id StateIndex '=' StateExpr ';' --add\r\nStates : State --expose\r\nStates : States State\r\n\r\nStateIndex :\r\nStateIndex : '[' Uint ']'\r\n\r\nStmtBlock : '{' '}' --add\r\nStmtBlock : '{' Stmts '}'  \r\n\r\nStmts : Stmt --expose\r\nStmts : Stmts Stmt\r\n\r\n# SimpleStmt : ERROR ';' \r\n# SimpleStmt : ';' --add\r\n\r\nSimpleStmt : Expr ';'\r\nSimpleStmt : Expr ERROR\r\nSimpleStmt : T_KW_RETURN ';'\r\nSimpleStmt : T_KW_RETURN Expr ';'\r\nSimpleStmt : T_KW_RETURN ERROR ';'\r\nSimpleStmt : T_KW_DO Stmt T_KW_WHILE '(' Expr ')' ';'\r\nSimpleStmt : T_KW_DO Stmt T_KW_WHILE '(' ERROR ')' ';'\r\nSimpleStmt : StmtBlock\r\nSimpleStmt : T_KW_DISCARD ';'\r\nSimpleStmt : TypeDecl\r\nSimpleStmt : VariableDecl --add\r\nSimpleStmt : VarStructDecl\r\nSimpleStmt : T_KW_BREAK ';'\r\nSimpleStmt : T_KW_BREAK ERROR\r\nSimpleStmt : T_KW_CONTINUE ';'\r\nSimpleStmt : T_KW_CONTINUE ERROR\r\n\r\n#if FX_PART\r\n    SimpleStmt : T_KW_SPAWN '(' Expr ')' NonTypeId '(' ArgumentsOpt ')' ';'\r\n    SimpleStmt : T_KW_DRAW NonTypeId '(' ArgumentsOpt ')' ';'\r\n#endif\r\n\r\n\r\nNonIfStmt : SimpleStmt --add\r\nNonIfStmt : ';'\r\nNonIfStmt : WhileStmt NonIfStmt\r\nNonIfStmt : ForStmt NonIfStmt\r\n\r\nStmt : SimpleStmt --add\r\nStmt : UseDecl\r\nStmt : WhileStmt Stmt\r\nStmt : ForStmt Stmt\r\nStmt : IfStmt Stmt\r\nStmt : IfStmt NonIfStmt T_KW_ELSE Stmt\r\nStmt : ERROR\r\nStmt : ';'\r\n\r\nIfStmt : AttributesOpt T_KW_IF '(' Expr ')' --expose\r\nIfStmt : AttributesOpt T_KW_IF '(' ERROR ')' --expose\r\n\r\nWhileStmt : T_KW_WHILE '(' Expr ')' --expose\r\nWhileStmt : T_KW_WHILE '(' ERROR ')' --expose\r\n\r\nForStmt : AttributesOpt For '(' ForInit ForCond ForStep ')' --expose\r\nForStmt : AttributesOpt For ERROR --expose\r\n\r\nFor : T_KW_FOR\r\n\r\nForInit : ';' --add\r\nForInit : Expr ';'\r\nForInit : VariableDecl\r\nForInit : ERROR ';'\r\n\r\nForCond : ';' --add\r\nForCond : Expr ';'\r\nForCond : ERROR ';'\r\n\r\nForStep : --add\r\nForStep : Expr\r\nForStep : ERROR\r\n\r\nDwordExpr : Dword\r\nDwordExpr : Dword '|' DwordExpr\r\n\r\nDwordExprSeq : DwordExpr --expose\r\nDwordExprSeq : DwordExpr ',' DwordExprSeq\r\n\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    PassStateExpr : DwordExpr --add\r\n    PassStateExpr : ComplexExpr\r\n    PassStateExpr : String\r\n    PassStateExpr : '{' DwordExprSeq '}'\r\n#endif\r\n\r\nStateExpr : DwordExpr --add\r\nStateExpr : ComplexExpr\r\nStateExpr : '{' InitExprs '}'\r\nStateExpr : '{' InitExprs ',' '}'\r\nStateExpr : '<' RelationalExpr '>'\r\n\r\nSimpleExpr : T_KW_TRUE\r\nSimpleExpr : T_KW_FALSE\r\nSimpleExpr : Uint\r\nSimpleExpr : Float\r\nSimpleExpr : String\r\nSimpleExpr : NonTypeId\r\n\r\nComplexExpr : '(' Expr ')'\r\nComplexExpr : TypeId '(' ArgumentsOpt ')'\r\nComplexExpr : BaseType '(' ArgumentsOpt ')' \r\nComplexExpr : NonTypeId '(' ArgumentsOpt ')'\r\nComplexExpr : PostfixPointExpr '(' ArgumentsOpt ')'\r\nComplexExpr : ObjectExpr\r\n\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    ObjectExpr : T_KW_COMPILE NonTypeId '(' ArgumentsOpt ')'\r\n    ObjectExpr : T_KW_COMPILE_FRAGMENT Target NonTypeId '(' ArgumentsOpt ')'\r\n#endif\r\n\r\nObjectExpr : T_KW_COMPILE_SHADER '(' ArgumentsOpt ')'\r\n\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    # ObjectExpr : T_KW_SAMPLER_STATE StateBlock\r\n    # ObjectExpr : T_KW_STATEBLOCK_STATE StateBlocStateBlockk\r\n#endif\r\n\r\nPrimaryExpr : ComplexExpr\r\nPrimaryExpr : SimpleExpr\r\nPostfixExpr : PrimaryExpr\r\nPostfixExpr : PostfixExpr '[' Expr ']'\r\nPostfixExpr : PostfixExpr '[' ERROR ']'\r\nPostfixExpr : PostfixExpr '.' Id\r\nPostfixExpr : PostfixExpr T_OP_INC\r\nPostfixExpr : PostfixExpr T_OP_DEC\r\n\r\nPostfixPointExpr : PostfixExpr '.' Id\r\n\r\nUnaryExpr : PostfixExpr\r\nUnaryExpr : T_OP_INC UnaryExpr\r\nUnaryExpr : T_OP_DEC UnaryExpr\r\n# UnaryExpr : T_OP_INC ERROR\r\n# UnaryExpr : T_OP_DEC ERROR\r\nUnaryExpr : '!' CastExpr\r\nUnaryExpr : '~' CastExpr\r\n# UnaryExpr : '!' ERROR\r\nUnaryExpr : '-' CastExpr\r\nUnaryExpr : '+' CastExpr\r\n\r\nCastExpr : UnaryExpr\r\nCastExpr : '(' ConstTypeDim ')' CastExpr\r\nCastExpr : '(' ERROR ')' CastExpr\r\n\r\nMulExpr : CastExpr\r\nMulExpr : MulExpr '*' CastExpr\r\nMulExpr : MulExpr '/' CastExpr\r\nMulExpr : MulExpr '%' CastExpr\r\n\r\nMulExpr : ERROR '*' CastExpr\r\nMulExpr : ERROR '/' CastExpr\r\nMulExpr : ERROR '%' CastExpr\r\nMulExpr : MulExpr '*' ERROR\r\nMulExpr : MulExpr '/' ERROR\r\nMulExpr : MulExpr '%' ERROR\r\n# MulExpr : ERROR '*' ERROR\r\n# MulExpr : ERROR '/' ERROR\r\n# MulExpr : ERROR '%' ERROR\r\n\r\nAddExpr : MulExpr\r\nAddExpr : AddExpr '+' MulExpr\r\nAddExpr : AddExpr '-' MulExpr\r\n\r\nAddExpr : AddExpr '+' ERROR\r\nAddExpr : AddExpr '-' ERROR\r\n\r\nShiftExpr : AddExpr\r\nShiftExpr : ShiftExpr T_OP_SL AddExpr\r\nShiftExpr : ShiftExpr T_OP_SR AddExpr\r\n\r\nShiftExpr : ShiftExpr T_OP_SR ERROR\r\nShiftExpr : ShiftExpr T_OP_SL ERROR\r\n\r\nRelationalExpr : ShiftExpr\r\nRelationalExpr : RelationalExpr '<' ShiftExpr\r\nRelationalExpr : RelationalExpr '>' ShiftExpr\r\nRelationalExpr : RelationalExpr T_OP_LE ShiftExpr\r\nRelationalExpr : RelationalExpr T_OP_GE ShiftExpr\r\n\r\nRelationalExpr : ERROR '<' ShiftExpr\r\nRelationalExpr : RelationalExpr '<' ERROR\r\nRelationalExpr : ERROR '<' ERROR\r\n\r\nRelationalExpr : RelationalExpr '>' ERROR\r\nRelationalExpr : ERROR '>' ShiftExpr\r\nRelationalExpr : ERROR '>' ERROR\r\n\r\nRelationalExpr : RelationalExpr T_OP_LE ERROR\r\nRelationalExpr : ERROR T_OP_LE ShiftExpr\r\nRelationalExpr : ERROR T_OP_LE ERROR\r\n\r\nRelationalExpr : RelationalExpr T_OP_GE ERROR\r\nRelationalExpr : ERROR T_OP_GE ShiftExpr\r\nRelationalExpr : ERROR T_OP_GE ERROR\r\n\r\nEqualityExpr : RelationalExpr\r\nEqualityExpr : EqualityExpr T_OP_EQ RelationalExpr\r\nEqualityExpr : EqualityExpr T_OP_NE RelationalExpr\r\nEqualityExpr : ERROR T_OP_EQ RelationalExpr\r\nEqualityExpr : EqualityExpr T_OP_NE ERROR\r\nEqualityExpr : ERROR T_OP_NE ERROR\r\n\r\nAndExpr : EqualityExpr\r\nAndExpr : AndExpr '&' EqualityExpr\r\nAndExpr : ERROR '&' EqualityExpr\r\nAndExpr : AndExpr '&' ERROR\r\n\r\nExclusiveOrExpr : AndExpr\r\nExclusiveOrExpr : ExclusiveOrExpr '^' AndExpr\r\nExclusiveOrExpr : ERROR '^' AndExpr\r\nExclusiveOrExpr : ExclusiveOrExpr '^' ERROR\r\n\r\nInclusiveOrExpr : ExclusiveOrExpr\r\nInclusiveOrExpr : InclusiveOrExpr '|' ExclusiveOrExpr\r\nInclusiveOrExpr : ERROR '|' ExclusiveOrExpr\r\nInclusiveOrExpr : InclusiveOrExpr '|' ERROR\r\n\r\nLogicalAndExpr : InclusiveOrExpr\r\nLogicalAndExpr : LogicalAndExpr T_OP_AND InclusiveOrExpr\r\nLogicalAndExpr : ERROR T_OP_AND InclusiveOrExpr\r\nLogicalAndExpr : LogicalAndExpr T_OP_AND ERROR\r\n\r\nLogicalOrExpr : LogicalAndExpr\r\nLogicalOrExpr : LogicalOrExpr T_OP_OR LogicalAndExpr\r\nLogicalOrExpr : ERROR T_OP_OR LogicalAndExpr\r\nLogicalOrExpr : LogicalOrExpr T_OP_OR ERROR\r\n\r\nConditionalExpr : LogicalOrExpr\r\nConditionalExpr : LogicalOrExpr '?' AssignmentExpr ':' ConditionalExpr\r\nConditionalExpr : ERROR '?' AssignmentExpr ':' ConditionalExpr\r\nConditionalExpr : LogicalOrExpr '?' ERROR ':' ConditionalExpr\r\nConditionalExpr : LogicalOrExpr '?' AssignmentExpr ':' ERROR\r\nConditionalExpr : LogicalOrExpr '?' ERROR ':' ERROR\r\nConditionalExpr : ERROR '?' ERROR ':' ERROR\r\nConditionalExpr : ERROR '?' ERROR ':' ConditionalExpr\r\n\r\nAssignmentExpr : ConditionalExpr\r\nAssignmentExpr : CastExpr '=' AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_ME AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_DE AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_RE AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_AE AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_SE AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_BORE AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_BANDE AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_XORE AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_SRE AssignmentExpr\r\nAssignmentExpr : CastExpr T_OP_SLE AssignmentExpr\r\n\r\nArguments : AssignmentExpr --expose\r\nArguments : Arguments ',' AssignmentExpr\r\nArguments : Arguments ERROR AssignmentExpr\r\nArguments : Arguments ',' ERROR\r\nArgumentsOpt : --expose\r\nArgumentsOpt : Arguments\r\n\r\nInitExpr : AssignmentExpr --add\r\nInitExpr : '{' InitExprs '}'\r\nInitExpr : '{' InitExprs ',' '}'\r\nInitExprs : InitExpr --expose\r\nInitExprs : InitExprs ',' InitExpr\r\n\r\nConstantExpr : AssignmentExpr\r\nExpr : AssignmentExpr\r\nExpr : Expr ',' AssignmentExpr\r\nExpr : Expr ',' ERROR\r\nExpr : ERROR ',' ERROR\r\nExpr : ERROR ',' AssignmentExpr\r\n\r\nDword : Uint\r\nDword : '-' Uint\r\nDword : Float\r\nDword : '-' Float\r\nDword : DwordId\r\nDword : Uint DwordId\r\nDwordId : Id\r\nDwordId : T_KW_TRUE\r\nDwordId : T_KW_FALSE\r\nDwordId : T_KW_TEXTURE\r\n\r\nId : TypeId\r\nId : NonTypeId\r\nIdOpt :\r\nIdOpt : Id\r\n\r\nTarget : NonTypeId\r\n\r\nUint : T_UINT\r\nFloat : T_FLOAT\r\n\r\nStrings : String\r\nStrings : Strings String\r\nString : T_STRING\r\n\r\nTypeId : T_TYPE_ID\r\nNonTypeId : T_NON_TYPE_ID\r\n\r\nLineTerminator : T_LINE_TERMINATOR\r\n\r\nAsmDecl : T_KW_DECL '{'\r\nAsm : T_KW_ASM '{'\r\nAsmFragment : T_KW_ASM_FRAGMENT '{'\r\n\r\n--LEXER--\r\n\r\nT_KW_UNSIGNED : \"unsigned\"\r\nT_KW_PRECISE : \"precise\"\r\nT_KW_STATIC : \"static\"\r\nT_KW_NOINTERPOLATION : \"nointerpolation\"\r\nT_KW_CENTROID : \"centroid\"\r\nT_KW_NOPERSPECTIVE : \"noperspective\"\r\nT_KW_UNIFORM : \"uniform\"\r\nT_KW_EXTERN : \"extern\"\r\nT_KW_VOLATILE : \"volatile\"\r\nT_KW_INLINE : \"inline\"\r\nT_KW_CONST : \"const\"\r\nT_KW_ROW_MAJOR : \"row_major\"\r\nT_KW_COLUMN_MAJOR : \"column_major\"\r\nT_KW_TYPEDEF : \"typedef\"\r\nT_KW_STRUCT : \"struct\"\r\nT_KW_VOID : \"void\"\r\nT_KW_BOOL : \"bool\"\r\nT_KW_INT : \"int\"\r\nT_KW_UINT : \"uint\"\r\nT_KW_HALF : \"half\"\r\nT_KW_FLOAT : \"float\"\r\nT_KW_DOUBLE : \"double\"\r\nT_KW_VECTOR : \"vector\"\r\nT_KW_MATRIX : \"matrix\"\r\nT_KW_STRING : \"string\"\r\nT_KW_TEXTURE : \"Texture\"\r\nT_KW_TEXTURE1D : \"Texture1D\"\r\nT_KW_TEXTURE2D : \"Texture2D\"\r\nT_KW_TEXTURE2DARRAY : \"Texture2DArray\"\r\nT_KW_TEXTURE3D : \"Texture3D\"\r\nT_KW_TEXTURECUBE : \"TextureCube\"\r\nT_KW_TEXTURECUBEARRAY : \"TextureCubeArray\"\r\nT_KW_CBUFFER : \"cbuffer\"\r\nT_KW_TBUFFER : \"tbuffer\"\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    # T_KW_SAMPLER : \"sampler\"\r\n    # T_KW_SAMPLER1D : \"sampler1D\"\r\n    # T_KW_SAMPLER2D : \"sampler2D\"\r\n    # T_KW_SAMPLER3D : \"sampler3D\"\r\n    # T_KW_SAMPLERCUBE : \"samplerCUBE\"\r\n    # T_KW_STATEBLOCK : \"stateblock\"\r\n    # T_KW_STATEBLOCK_STATE : \"stateblock_state\"\r\n#endif\r\nT_KW_SAMPLER_STATE : \"SamplerState\"\r\nT_KW_SAMPLER_COMPARISON_STATE : \"SamplerComparisonState\"\r\nT_KW_DEPTH_STENCIL_STATE : \"DepthStencilState\"\r\nT_KW_BLEND_STATE : \"BlendState\"\r\nT_KW_RASTERIZER_STATE : \"RasterizerState\"\r\nT_KW_BUFFER : \"Buffer\"\r\nT_KW_RWTEXTURE1D : \"RWTexture1D\"\r\nT_KW_RWTEXTURE2D : \"RWTexture2D\"\r\nT_KW_RWTEXTURE3D : \"RWTexture3D\"\r\nT_KW_RWBUFFER : \"RWBuffer\"\r\nT_KW_STRUCTUREDBUFFER : \"StructuredBuffer\"\r\nT_KW_RWSTRUCTUREDBUFFER : \"RWStructuredBuffer\"\r\nT_KW_APPENDSTRUCTUREDBUFFER : \"AppendStructuredBuffer\"\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    # T_KW_PIXELSHADER : \"pixelshader\"\r\n    # T_KW_VERTEXSHADER : \"vertexshader\"\r\n    # T_KW_PIXELFRAGMENT : \"pixelfragment\"\r\n    # T_KW_VERTEXFRAGMENT : \"vertexfragment\"\r\n#endif\r\nT_KW_REGISTER : \"register\"\r\nT_KW_IN : \"in\"\r\nT_KW_OUT : \"out\"\r\nT_KW_INOUT : \"inout\"\r\nT_KW_TECHNIQUE : \"technique\"\r\nT_KW_TECHNIQUE11 : \"technique11\"\r\n#if PRESETS_EX\r\n    T_KW_PRESET : \"preset\"\r\n#endif\r\n#if FX_PART\r\n    T_KW_FXPART : \"partFx\"\r\n    T_KW_TRIMESH : \"TriMesh\"\r\n#endif\r\nT_KW_PASS : \"pass\"\r\nT_KW_RETURN : \"return\"\r\nT_KW_DO : \"do\"\r\nT_KW_DISCARD : \"discard\"\r\nT_KW_WHILE : \"while\"\r\nT_KW_IF : \"if\"\r\nT_KW_ELSE : \"else\"\r\nT_KW_FOR : \"for\"\r\nT_KW_TRUE : \"true\"\r\nT_KW_FALSE : \"false\"\r\n#if TECHNIQUE9_DEPRECATED_SUPPORT\r\n    T_KW_COMPILE : \"compile\"\r\n    T_KW_COMPILE_SHADER : \"CompileShader\"\r\n#endif\r\nT_KW_COMPILE_FRAGMENT : \"compile_fragment\"\r\nT_KW_DECL : \"decl\"\r\nT_KW_ASM : \"asm\"\r\nT_KW_ASM_FRAGMENT : \"asm_fragment\"\r\nT_KW_USE : \"use\"\r\nT_KW_STRICT : \"strict\"\r\n#id FX_PART\r\n    T_KW_IMPORT : \"import\"\r\n    T_KW_PROVIDE : \"provide\"\r\n#endif\r\nT_KW_SWITCH : \"switch\"\r\nT_KW_CASE : \"case\"\r\nT_KW_DEFAULT : \"default\"\r\nT_KW_BREAK : \"break\"\r\n#if FX_PART\r\n    T_KW_SPAWN : \"spawn\"\r\n    T_KW_DRAW : \"draw\"\r\n#endif\r\nT_KW_CONTINUE : \"continue\"\r\n# T_KW_AS : \"as\"\r\nT_OP_INC : \"++\"\r\nT_OP_DEC : \"--\"\r\nT_OP_LE : \">=\"\r\nT_OP_GE : \"<=\"\r\nT_OP_EQ : \"==\"\r\nT_OP_NE : \"!=\"\r\nT_OP_AND : \"&&\"\r\nT_OP_OR : \"||\"\r\nT_OP_ME : \"*=\"\r\nT_OP_DE : \"/=\"\r\nT_OP_RE : \"%=\"\r\nT_OP_AE : \"+=\"\r\nT_OP_SE : \"-=\"\r\nT_OP_SR : \">>\"\r\nT_OP_SL : \"<<\"\r\nT_OP_BORE : \"|=\"\r\nT_OP_BANDE : \"&=\"\r\nT_OP_XORE : \"^=\"\r\nT_OP_SRE : \">>=\"\r\nT_OP_SLE : \"<<=\"\r\n";class m extends p{init({grammar:e=f,type:t=i.TI.k_LALR,flags:n=i.eo.k_Default}){super.init({grammar:e,type:t,flags:n})}}let g=null,v=null;function y(){return v||b(),v}function b(e={grammar:f}){(0,r.vZ)(g,e)||(g=e,v=new m(e))}},E5ji:(e,t,n)=>{"use strict";n.d(t,{X:()=>i});var r=n("Cx6u");async function i(e,t,n=null){return{uri:e=r.m.make(e),source:t,offset:n}}},bVKE:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e=new Uint8Array(256)){let t=0,n=[],r={set:function(i){function s(e,t,n){return o(e),o(t),o(n),r}function o(n){return new DataView(e.buffer,e.byteOffset).setFloat32(t,n,!0),t+=4,console.assert(t<e.byteLength),r}return n.push({name:i,offset:t}),{float4:function(e,t,n,i){return s(e,t,n),o(i),r},float3:s,float2:function(e,t){return o(e),o(t),r},float:o,int:function(n){return new DataView(e.buffer,e.byteOffset).setInt32(t,n,!0),t+=4,console.assert(t<e.byteLength),r},raw:function(n){for(let r of n)e[t]=r,t++;return console.assert(t<e.byteLength),r}}},finish:function(){let r={};return n.forEach(((n,i,s)=>{let o=(i<s.length-1?s[i+1].offset:t)-n.offset,a=new Uint8Array(e.buffer,e.byteOffset+n.offset,o);r[n.name]=a})),r}};return r}},q04y:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var r=n("vIQR");function i(e,t){if(!e)return;const n=n=>{n&&(t(n,e),i(n,t))};switch(e.instructionType){case r.rO.k_ReturnStmt:n(e.expr);break;case r.rO.k_DeclStmt:e.declList.forEach((e=>n(e)));break;case r.rO.k_ExprStmt:n(e.expr);break;case r.rO.k_IfStmt:n(e.cond),n(e.conseq),n(e.contrary);break;case r.rO.k_StmtBlock:e.stmtList.forEach((e=>n(e)));break;case r.rO.k_ForStmt:n(e.init),n(e.cond),n(e.body),n(e.step);break;case r.rO.k_WhileStmt:n(e.cond),n(e.body);break;case r.rO.k_ArithmeticExpr:case r.rO.k_AssignmentExpr:case r.rO.k_BitwiseExpr:n(e.left),n(e.right);break;case r.rO.k_CastExpr:n(e.expr);break;case r.rO.k_CompileExpr:e.args.forEach((e=>n(e)));break;case r.rO.k_CompileShader11Expr:n(e.func),e.args.forEach((e=>n(e)));break;case r.rO.k_ComplexExpr:n(e.expr);break;case r.rO.k_ConditionalExpr:n(e.left),n(e.right),n(e.condition);break;case r.rO.k_ConstructorCallExpr:case r.rO.k_FunctionCallExpr:e.args.forEach((e=>n(e)));break;case r.rO.k_IdExpr:n(e.id);break;case r.rO.k_InitExpr:e.args.forEach((e=>n(e)));break;case r.rO.k_StateBlockExpr:console.assert(!1,"not implemented");break;case r.rO.k_IntExpr:case r.rO.k_FloatExpr:case r.rO.k_BoolExpr:case r.rO.k_StringExpr:case r.rO.k_NullExpr:break;case r.rO.k_LogicalExpr:n(e.left),n(e.right);break;case r.rO.k_PostfixArithmeticExpr:n(e.expr);break;case r.rO.k_PostfixIndexExpr:n(e.element),n(e.index);break;case r.rO.k_PostfixPointExpr:n(e.element),n(e.postfix);break;case r.rO.k_RelationalExpr:n(e.left),n(e.right);break;case r.rO.k_SamplerStateBlockExpr:e.params.forEach((e=>n(e))),n(e.texture);break;case r.rO.k_UnaryExpr:n(e.expr);break;case r.rO.k_ComplexType:e.fields.forEach((e=>n(e)));break;case r.rO.k_FunctionDef:n(e.returnType),n(e.id),e.params.forEach((e=>n(e)));break;case r.rO.k_FunctionDecl:n(e.def),n(e.impl);break;case r.rO.k_VariableDecl:n(e.type),n(e.initExpr),n(e.id);break;case r.rO.k_VariableType:n(e.subType);break;case r.rO.k_Id:case r.rO.k_SystemFunctionDecl:case r.rO.k_SystemType:case r.rO.k_BreakStmt:case r.rO.k_SpawnStmt:break;default:console.error("unsupported instruction type found")}}},"Jm+q":(e,t,n)=>{"use strict";n.d(t,{L:()=>Pe,_:()=>ke});var r=n("cOQ3"),i=n("jeW/"),s=n("AW2x"),o=n("Y4FD"),a=n("HS1/"),l=n("vIQR"),c=n("0mZ+"),u=n("z3nI"),h=n("DIkA");class d extends c.g{constructor(){super("Analyzer Diagnostics","A")}resolveFilename(e,t,n){return n.file.toString()}resolveRange(e,t,n){return n.loc}diagnosticMessages(){return{[i.g.InvalidReturnStmtEmpty]:"Invalid return statement. Expression with '*type*' type expected.",[i.g.InvalidReturnStmtVoid]:"Invalid return statement. Expression with 'void' type expected.",[i.g.FunctionRedefinition]:"Function redefinition. Function with name '{info.funcName}' already declared.",[i.g.InvalidFuncDefenitionReturnType]:"Invalid function defenition return type. Function with the same name '{info.funcName}' but another type already declared.",[i.g.InvalidFunctionReturnStmtNotFound]:"Return statement expected.",[i.g.InvalidVariableInitializing]:"Invalid variable initializing.",[i.g.InvalidComplexNotFunction]:({info:e})=>`Function definition for "${e.funcName}(${e.args.join(", ")})" has not been found.`}}resolveDescription(e,t,n){let o=this.diagnosticMessages();if((0,r.$V)(o[e]))return super.resolveDescription(e,t,n);let{file:a,loc:l,...c}=n;return t==h.D.k_Warning?`${s.S[e]}: ${JSON.stringify(c)}`:`${i.g[e]}: ${JSON.stringify(c)}`}}var p=n("q04y"),f=n("W5eQ"),m=n("hbjL");class g extends m.v{constructor({decls:e,...t}){super({instrType:l.rO.k_Annotation,...t}),this.decls=e}}var v=n("+tx1"),y=n("eck/"),b=n("rs/O"),_=n("BrFC");class x extends _.b{constructor({left:e,right:t,operator:n,...r}){super({instrType:l.rO.k_BitwiseExpr,...r}),this.left=m.v.$withParent(e,this),this.right=m.v.$withParent(t,this),this.operator=n}toCode(){return`${this.left.toCode()} ${this.operator} ${this.right.toCode()}`}isConst(){return this.left.isConst()&&this.right.isConst()}}var w=n("d+t4"),S=n("pGoc");class T extends S.W{constructor({operator:e="break",...t}){super({instrType:l.rO.k_BreakStmt,...t}),this._operator=e}get operator(){return this._operator}toCode(){return console.assert("break"==this.operator),this.operator+";"}}var E=n("KHnE"),M=n("0xZW");class A extends M._{constructor({id:e,type:t,...n}){super({instrType:l.rO.k_CbufferDecl,...n}),this._id=m.v.$withParent(e,this),this._type=m.v.$withParent(t,this)}get id(){return this._id}get name(){return this.id.name}get type(){return this._type}}class C extends _.b{constructor({operand:e,args:t=null,...n}){super({instrType:l.rO.k_CompileExpr,...n}),this._operand=e,this._args=t}get function(){return this._operand}get args(){return this._args}}class k extends _.b{constructor({ver:e,func:t,args:n,...r}){super({instrType:l.rO.k_CompileShader11Expr,...r}),this.func=m.v.$withNoParent(t),this.ver=e,this.args=(n||[]).map((e=>m.v.$withParent(e,this)))}}class P extends _.b{constructor({expr:e,...t}){super({instrType:l.rO.k_ComplexExpr,type:e.type,...t}),this._expr=m.v.$withParent(e,this)}get expr(){return this._expr}toCode(){return"("+this.expr.toCode()+")"}isConst(){return this.expr.isConst()}}class R extends m.v{constructor({name:e=null,fields:t,aligment:n=1,...i}){super({instrType:l.rO.k_ComplexType,...i}),this._name=e,this._fields={},this._aligment=n,this.addFields(t.filter((e=>!(0,r.Ft)(e))).map((e=>m.v.$withParent(e,this))))}get writable(){return!0}get readable(){return!0}get name(){return this._name}get size(){return this.calculatePaddings(!1)}get aligment(){return this._aligment}get baseType(){return this}get arrayElementType(){return null}get typeDecl(){return this.parent}get length(){return 0}get fields(){return Object.values(this._fields)}get methods(){return[]}toString(){return this.name||f.V5.hash(this)}toDeclString(){for(var e="struct "+this._name+"{",t=0;t<this.fields.length;t++)e+="\t"+this.fields[t].toCode()+";\n";return e+="}"}toCode(){return this._name}isArray(){return!1}isNotBaseArray(){return!1}isComplex(){return!0}addField(e){this._fields[e.name]=e}addFields(e){for(var t=0;t<e.length;t++)this.addField(e[t]);this.calculatePaddings()}hasFieldWithSematics(e){return!!this.getFieldBySemantics(e)}getField(e){return this._fields[e]||null}getMethod(e,t){return null}getFieldBySemantics(e){for(let t in this._fields){let n=this._fields[t];if(e==n.semantic)return n}return null}hasFieldWithoutSemantics(){for(let e in this._fields){let t=this._fields[e],n=t.semantic;if(null==n||""==n)return!0;if(t.type.hasFieldWithoutSemantics())return!0}return!1}hasAllUniqueSemantics(){let e={};for(let t in this._fields){let n=this._fields[t],i=n.semantic;if((0,r.$V)(e[i]))return!1;if(e[i]=n,n.type.isComplex()&&!n.type.hasAllUniqueSemantics())return!1}return!0}calculatePaddings(e=!0){const t=this._aligment;let n=0,i=(e,t)=>e+(t-1)&~(t-1);for(let s=0;s<this.fields.length;s++){const o=this.fields[s].type,a=o.size;if(a===f.NQ.UNDEFINE_SIZE)return(0,r.hu)(!1,"cannot calc padding"),f.NQ.UNDEFINE_SIZE;let l=i(n,t);i(n+a,t)>l&&(n=l),e&&o.$overwritePadding(n,t),n+=a}return i(n,t)}}var L=n("IsZF"),O=n("RIdR"),N=n("YZc1"),I=n("ubxH"),D=n("OsKO");class F extends S.W{constructor({init:e=null,cond:t=null,step:n=null,body:r=null,...i}){super({instrType:l.rO.k_ForStmt,...i}),this._init=m.v.$withParent(e,this),this._cond=m.v.$withParent(t,this),this._step=m.v.$withParent(n,this),this._body=m.v.$withParent(r,this)}get init(){return this._init}get cond(){return this._cond}get step(){return this._step}get body(){return this._body}toCode(){var e="for(";return e+=this._init.toCode()+";",e+=this._cond.toCode()+";",e+=this._step.toCode()+")",e+=this._body.toCode()}}var z=n("y57x"),U=n("BLpd"),B=n("O1LO"),V=n("kBTl"),G=n("Muaz"),Z=n("AAir"),H=n("A0ZU");class j extends _.b{constructor({type:e,args:t=[],...n}){super({instrType:l.rO.k_InitExpr,type:e,...n}),this._args=t.map((e=>m.v.$withParent(e,this)))}get args(){return this._args}isArray(){return this.type.isNotBaseArray()}toCode(){let e="";(0,r.Ft)(this.type)||(e+=this.type.toCode()),e+="(";for(let t=0;t<this.args.length;t++)e+=this.args[t].toCode(),t!==this.args.length-1&&(e+=",");return e+=")",e}isConst(){let e=this.args;for(let t=0;t<e.length;t++)if(!e[t].isConst())return!1;return!0}optimizeForVariableType(e){if(e.isNotBaseArray()&&e.scope.type<=l.SR.k_Global||e.isArray()&&this.args.length>1){if(e.length===f.NQ.UNDEFINE_LENGTH||e.isNotBaseArray()&&this.args.length!==e.length||!e.isNotBaseArray()&&this.args.length!==e.baseType.length)return!1;let t=e.arrayElementType;for(let e=0;e<this.args.length;e++){let n=this.args[e];if(n.instructionType===l.rO.k_InitExpr){if(!n.optimizeForVariableType(t))return!1}else if(!f.V5.equals(n.type,t))return!1}return this._type=e.baseType,!0}{let t=this.args[0];if(1===this.args.length&&t.instructionType!==l.rO.k_InitExpr)return!(!f.V5.equals(t.type,H.T_INT)&&!f.V5.equals(t.type,H.T_UINT)||!f.V5.equals(e,H.T_INT)&&!f.V5.equals(e,H.T_UINT))||!!f.V5.equals(t.type,e);if(1===this.args.length)return!1;let n=this.args,r=e.fields.map((e=>e.name));for(let t=0;t<n.length;t++){let i=e.getField(r[t]).type;if(!n[t].optimizeForVariableType(i))return!1}return this._type=e.baseType,!0}}}var W=n("pjXG"),q=n("s0og"),K=n("Oxvu");class X extends _.b{constructor({scope:e,...t}){super({instrType:l.rO.k_NullExpr,type:H.T_NULL,scope:e,...t})}get value(){return null}toString(){return"NULL"}toCode(){return this.toString()}isConst(){return!0}}var Y=n("Z/0D");class J extends _.b{constructor({expr:e,operator:t,...n}){super({instrType:l.rO.k_PostfixArithmeticExpr,type:e.type,...n}),this._operator=t,this._expr=m.v.$withParent(e,this)}get expr(){return this._expr}get operator(){return this._operator}toCode(){var e="";return e+=this.expr.toCode(),e+=this.operator}isConst(){return this.expr.isConst()}}class $ extends _.b{constructor({element:e,index:t,...n}){super({instrType:l.rO.k_PostfixIndexExpr,type:e.type.arrayElementType,...n}),this.element=m.v.$withParent(e,this),this.index=m.v.$withParent(t,this)}toCode(){return`${this.element.toCode()}[${this.index.toCode()}]`}isConst(){return this.element.isConst()&&this.index.isConst()}}var Q=n("++2t");class ee extends M._{constructor({props:e,id:t=null,...n}){super({instrType:l.rO.k_PresetDecl,...n}),this._id=m.v.$withParent(t,this),this._props=e.map((e=>m.v.$withParent(e,this)))}get id(){return this._id}get name(){return(0,r.Ft)(this._id)?null:this._id.name}get props(){return this._props}toCode(){return`${this.id} = {\n${this.props.map((e=>e.toCode())).join(";\n")}\n}`}}class te extends m.v{constructor({id:e,args:t,...n}){super({instrType:l.rO.k_PresetProperty,...n}),this.id=m.v.$withParent(e,this),this.args=t.map((e=>m.v.$withParent(e,this)))}resolveDeclaration(){return this.scope.findVariable(this.id.name)}toCode(){return`${this.id} = { ${this.args.map((e=>e.toCode())).join(",")} }`}}class ne extends m.v{constructor({moduleName:e,...t}){super({instrType:l.rO.k_Provide,...t}),this._value=e}get moduleName(){return this._value}toString(){return this._value}toCode(){return this._value}}class re extends m.v{constructor(e){super({instrType:l.rO.k_ProxyType,...e}),this._host=null}get host(){return this._host}get writable(){return!this.isResolved()||this.host.writable}get readable(){return!this.isResolved()||this.host.writable}get name(){return this.isResolved()?this.host.name:"auto"}get size(){return this.isResolved()?this.host.size:f.NQ.UNDEFINE_SIZE}get baseType(){return this.host}get arrayElementType(){return this.isResolved()?this.host.arrayElementType:null}get typeDecl(){return this.parent}get length(){return this.isResolved()?this.host.length:f.NQ.UNDEFINE_LENGTH}get fields(){return this.isResolved()?this.host.fields:[]}get methods(){return[]}isResolved(){return!(0,r.Ft)(this.host)}resolve(e){this._host=e}toString(){return this.isResolved()?this.host.toString():this.name}toDeclString(){return this.isResolved()?this.host.toDeclString():null}toCode(){return this.isResolved()?this.host.toCode():this.name}isArray(){return!!this.isResolved()&&this.host.isArray()}isNotBaseArray(){return!!this.isResolved()&&this.host.isNotBaseArray()}isComplex(){return!!this.isResolved()&&this.host.isComplex()}hasFieldWithSematics(e){return!!this.isResolved()&&this.host.hasFieldWithSematics(e)}getField(e){return this.isResolved()?this.host.getField(e):null}getMethod(e,t){return this.isResolved()?this.host.getMethod(e,t):null}getFieldBySemantics(e){return this.isResolved()?this.host.getFieldBySemantics(e):null}hasFieldWithoutSemantics(){return!!this.isResolved()&&this.host.hasFieldWithoutSemantics()}hasAllUniqueSemantics(){return!!this.isResolved()&&this.host.hasAllUniqueSemantics()}}var ie=n("2i/b"),se=n("UL2e");class oe extends S.W{constructor({...e}){super({instrType:l.rO.k_SemicolonStmt,...e})}toCode(){return";"}}class ae extends _.b{constructor({type:e,blocks:t=null,props:n=null,...r}){super({instrType:l.rO.k_StateBlockExpr,type:e,...r}),this.props=n,this.blocks=t}toCode(){return console.error("not implemeted"),null}isConst(){return!0}}var le=n("fc3/"),ce=n("6EL/");class ue extends _.b{constructor({value:e,scope:t,...n}){super({instrType:l.rO.k_StringExpr,type:ce.L.wrapAsConst(H.T_STRING,H.SCOPE),scope:t,...n}),this._value=e}get value(){return this._value}toString(){return this._value}toCode(){return this._value}isConst(){return!0}}class he extends M._{constructor({name:e,passes:t,presets:n,...r}){super({instrType:l.rO.k_Technique11Decl,...r}),this._name=e,this.passes=t?.map((e=>m.v.$withParent(e,this)))}get name(){return this._name}isValid(){return!0}}var de=n("dmHP");class pe extends M._{constructor({type:e,...t}){super({instrType:l.rO.k_TypeDecl,...t}),this.type=m.v.$withParent(e,this),(0,r.hu)((0,r.Xq)(this.type))}get name(){return this.type.name}toCode(){return this.type.toDeclString()+";"}}class fe extends M._{constructor({type:e,alias:t,...n}){super({instrType:l.rO.k_TypedefDecl,...n}),this.type=m.v.$withNoParent(e),this.alias=t,(0,r.hu)((0,r.Xq)(this.type))}get name(){return this.type?.name}toCode(){return`typedef ${this.type.toDeclString()} ${this.alias};`}}class me extends _.b{constructor({expr:e,operator:t,...n}){super({instrType:l.rO.k_UnaryExpr,type:"!"===t?ce.L.wrapAsConst(H.T_BOOL,H.SCOPE):e.type,...n}),this._expr=m.v.$withParent(e,this),this._operator=t}get operator(){return this._operator}get expr(){return this._expr}toCode(){var e="";return e+=this.operator,e+=this.expr.toCode()}isConst(){return this.expr.isConst()}}var ge=n("k9uP");class ve extends S.W{constructor({cond:e,body:t,operator:n,...r}){super({instrType:l.rO.k_WhileStmt,...r}),this._cond=m.v.$withParent(e,this),this._body=m.v.$withParent(t,this),this._operator=n}get cond(){return this.cond}get body(){return this._body}get operator(){return this._operator}toCode(){var e="";return"while"===this.operator?(e+="while(",e+=this.cond.toCode(),e+=")",e+=this.body.toCode()):(e+="do",e+=this.body.toCode(),e+="while(",e+=this.cond.toCode(),e+=");"),e}}var ye=n("zHDc"),be=n("BeyE");e=n.hmd(e);const _e=e=>e?e.type:null,xe=e=>{if(!e)return null;const t=e.getField?e:e.type;if(f.V5.equals(t,H.T_NULL))return/^.*$/;if(H.isIntBasedType(t)||H.isUintBasedType(t)||H.isBoolBasedType(t)){const e=`${t.length>1?t.length:""}`;return new RegExp(`^int${e}$|^uint${e}$|^bool${e}$|^float${e}$`,"g")}return t};function we(e,t){if(e.subType&&e.subType.instructionType===l.rO.k_ProxyType){const n=e.subType;n.isResolved()||n.resolve(t)}}function Se(e,t){let n=a.m.UNDEF;switch(e){case o.H.ALPHABLENDENABLE:case o.H.ALPHATESTENABLE:return console.warn("ALPHABLENDENABLE/ALPHATESTENABLE not supported in WebGL."),a.m.UNDEF;case o.H.BLENDENABLE:case o.H.CULLFACEENABLE:case o.H.ZENABLE:case o.H.ZWRITEENABLE:case o.H.DITHERENABLE:case o.H.SCISSORTESTENABLE:case o.H.STENCILTESTENABLE:case o.H.POLYGONOFFSETFILLENABLE:switch(t){case"TRUE":n=a.m.TRUE;break;case"FALSE":n=a.m.FALSE;break;default:return console.warn("Unsupported render state ALPHABLENDENABLE/ZENABLE/ZWRITEENABLE/DITHERENABLE value used: "+t+"."),n}break;case o.H.CULLFACE:switch(t){case"FRONT":n=a.m.FRONT;break;case"BACK":n=a.m.BACK;break;case"FRONT_AND_BACK":n=a.m.FRONT_AND_BACK;break;default:return console.warn("Unsupported render state CULLFACE value used: "+t+"."),n}break;case o.H.FRONTFACE:switch(t){case"CW":n=a.m.CW;break;case"CCW":n=a.m.CCW;break;default:return console.warn("Unsupported render state FRONTFACE value used: "+t+"."),n}break;case o.H.SRCBLEND:case o.H.DESTBLEND:case o.H.SRCBLENDALPHA:case o.H.DESTBLENDALPHA:case o.H.SRCBLENDCOLOR:case o.H.DESTBLENDCOLOR:case o.H.BLENDFUNC:case o.H.BLENDFUNCSEPARATE:switch(t){case"ZERO":n=a.m.ZERO;break;case"ONE":n=a.m.ONE;break;case"SRCCOLOR":n=a.m.SRCCOLOR;break;case"INVSRCCOLOR":n=a.m.INVSRCCOLOR;break;case"SRCALPHA":n=a.m.SRCALPHA;break;case"INVSRCALPHA":n=a.m.INVSRCALPHA;break;case"DESTALPHA":n=a.m.DESTALPHA;break;case"INVDESTALPHA":n=a.m.INVDESTALPHA;break;case"DESTCOLOR":n=a.m.DESTCOLOR;break;case"INVDESTCOLOR":n=a.m.INVDESTCOLOR;break;case"SRCALPHASAT":n=a.m.SRCALPHASAT;break;default:return console.warn("Unsupported render state SRCBLEND/DESTBLEND value used: "+t+"."),n}break;case o.H.BLENDEQUATION:case o.H.BLENDEQUATIONSEPARATE:case o.H.BLENDEQUATIONCOLOR:case o.H.BLENDEQUATIONALPHA:switch(t){case"FUNCADD":case"ADD":n=a.m.FUNCADD;break;case"FUNCSUBTRACT":case"SUBTRACT":n=a.m.FUNCSUBTRACT;break;case"FUNCREVERSESUBTRACT":case"REVERSESUBTRACT":n=a.m.FUNCREVERSESUBTRACT;break;default:return console.warn("Unsupported render state BLENDEQUATION/BLENDEQUATIONSEPARATE value used: "+t+"."),n}break;case o.H.ZFUNC:switch(t){case"NEVER":n=a.m.NEVER;break;case"LESS":n=a.m.LESS;break;case"EQUAL":n=a.m.EQUAL;break;case"LESSEQUAL":n=a.m.LESSEQUAL;break;case"GREATER":n=a.m.GREATER;break;case"NOTEQUAL":n=a.m.NOTEQUAL;break;case"GREATEREQUAL":n=a.m.GREATEREQUAL;break;case"ALWAYS":n=a.m.ALWAYS;break;default:return console.warn("Unsupported render state ZFUNC value used: "+t+"."),n}break;case o.H.PRIMITIVETOPOLOGY:switch(t){case"TRIANGLELIST":n=a.m.TRIANGLELIST;break;case"LINELIST":n=a.m.LINELIST;break;default:return console.warn("Unsupported render state ZFUNC value used: "+t+"."),n}}return n}function Te(e,t,n){H.findType(n.name)&&e.error(n.sourceNode,i.g.SystemTypeRedefinition,{typeName:n.name}),t.addType(n.type)||e.error(n.sourceNode,i.g.TypeRedefinition,{typeName:n.name})}function Ee(e,t,n){if(-1!==n.indexOf(t.instructionID))return e.error(t.sourceNode,i.g.InvalidFunctionRecursionNotAllowed,{funcName:t.name}),!1;let o=!1;n=[...n,t.instructionID];return(0,p.N)(t.impl,(t=>{if(t.instructionType===l.rO.k_FunctionCallExpr){let a=t.decl;if(a.instructionType===l.rO.k_SystemFunctionDecl)return;if(a=a.scope.findFunctionInScope(a),(0,r.Ft)(a.impl))return void(a.attrs.find((e=>"extern"===e.name))?e.warn(t.sourceNode,s.S.ExternCall):e.error(t.sourceNode,i.g.InvalidFunctionImplementationNotFound,{funcName:a.name}));o=o||Ee(e,a,n)}})),!o}function Me(e,t){const n=t.globalScope;let i=!1;return(0,r.TP)(n.functions,(t=>{t.forEach((t=>{i=i||!Ee(e,t,[])}))})),!i}function Ae(e){return!!function(e){const t=e.returnType;if(f.V5.equals(t,H.T_VOID))return!0;if(t.isComplex()){if(t.hasFieldWithoutSemantics(),!t.hasAllUniqueSemantics())return!1}else{if(!f.V5.equals(t,H.T_FLOAT4))return!1;if("POSITION"!==e.semantic)return!1}return!0}(e)&&!!function(e){let t=e.params,n=!1,i=!1,s=!1;for(let e=0;e<t.length;e++){let o=t[e];if(!o.type.isUniform())if(s){if(n)return!1;if(i){if((0,r.Ft)(o.semantic))return!1;if(o.type.isComplex()&&(o.type.hasFieldWithoutSemantics()||!o.type.hasAllUniqueSemantics()))return!1}}else{if((0,r.Ft)(o.semantic)){if(H.isBase(o.type)||o.type.hasFieldWithoutSemantics()||!o.type.hasAllUniqueSemantics())return!1;n=!0}else if(!(0,r.Ft)(o.semantic)){if(o.type.isComplex()&&(o.type.hasFieldWithoutSemantics()||!o.type.hasAllUniqueSemantics()))return!1;i=!0}s=!0}}return!0}(e)}function Ce(e){return!!function(e){let t=e.returnType;if(f.V5.equals(t,H.T_VOID))return!0;if(!H.isBase(t))return!1;if(!f.V5.equals(t,H.T_FLOAT4))return!1;e.semantic;return!0}(e)&&!!function(e){let t=e.params,n=!1,r=!1,i=!1;for(let e=0;e<t.length;e++){let s=t[e];if(!s.type.isUniform())if(i){if(n)return!1;if(r&&(s.semantic,s.type.isComplex()&&(s.type.hasFieldWithoutSemantics()||!s.type.hasAllUniqueSemantics())))return!1}else{if(""===s.semantic){if(H.isBase(s.type)||s.type.hasFieldWithoutSemantics()||!s.type.hasAllUniqueSemantics())return!1;n=!0}else if(""!==s.semantic){if(s.type.isComplex()&&(s.type.hasFieldWithoutSemantics()||!s.type.hasAllUniqueSemantics()))return!1;r=!0}i=!0}}return!0}(e)}class ke{constructor(e,t){this.diagnostics=new d,this.uri=e,this.moduleName=null,this.haveCurrentFunctionReturnOccur=!1,this.expressions=t||{}}beginCbuffer(){this.cbuffer=!0}endCbuffer(){this.cbuffer=!1}beginFunc(){this.func=!0,this.haveCurrentFunctionReturnOccur=!1,this.funcDef=null}endFunc(){this.func=!1}beginPass(){this.renderStates=null}endPass(){this.renderStates=null}error(e,t,n={}){let r=this.resolveNodeSourceLocation(e),i=this.uri;this.diagnostics.error(t,{file:i,loc:r,info:n})}critical(e,t,n={}){let r=this.resolveNodeSourceLocation(e),i=this.uri;this.diagnostics.critical(t,{file:i,loc:r,info:n})}warn(e,t,n={}){let r=this.resolveNodeSourceLocation(e),i=this.uri;this.diagnostics.warning(t,{file:i,loc:r,info:n})}resolveNodeSourceLocation(e){return(0,r.$V)(e)?(0,r.Xq)(e.loc)?e.loc:this.resolveNodeSourceLocation(e.children[e.children.length-1]):null}}class Pe{analyzeUseDecl(e,t,n){t.currentScope.strictMode=!0}analyzeComplexName(e){const t=e.children;let n="";for(let e=t.length-1;e>=0;e--)n+=t[e].value;return n}analyzeProvideDecl(t,n,s){const o=s.children,a=n.currentScope;if(3===o.length){let n=this.analyzeComplexName(o[1]);return(0,r.Ft)(t.moduleName)||console.warn(`Context module overriding detected '${t.moduleName}' => '${e}'`),t.moduleName=n,(0,r.hu)("T_KW_PROVIDE"===o[2].name),new ne({sourceNode:s,moduleName:n,scope:a})}return t.error(s,i.g.UnsupportedProvideAs),null}analyzeInitExprChildren(e,t,n,s,o,a=null){const c=t.currentScope;if(1===s.length){const r=this.analyzeExpr(e,t,s[0]);if(!r)return null;return Pe.checkTwoOperandExprTypes(e,"=",o,r.type,n,r.sourceNode,a||n,{isInitializing:!0})?r:null}if(o.isNotBaseArray()&&o.scope.type<=l.SR.k_Global||o.isArray()){const a=[],u=(s.length-1)/2;if(o.length===f.NQ.UNDEFINE_LENGTH||o.isNotBaseArray()&&u!==o.length||!o.isNotBaseArray()&&u!==o.baseType.length)return e.error(n,i.g.InvalidVariableInitializingEx,{tooltip:`attemp to init an array with invalid number of arguments. expected: ${o.length}, given: ${u}`}),null;const h=o.arrayElementType;for(let n=s.length-2;n>=1;n--)if("InitExpr"===s[n].name){const i=this.analyzeInitExpr(e,t,s[n],h);if((0,r.Ft)(i))return null;a.push(i)}return(0,r.hu)(o.instructionType===l.rO.k_VariableType),new j({scope:c,sourceNode:n,args:a,type:o})}if(o.isComplex()){const i=(s.length-1)/2,a=o.fields.map((e=>e.name)),u=[];if(i!==a.length)return null;for(let n=s.length-2;n>=1;n--)if("InitExpr"===s[n].name){const i=o.getField(a[n]).type,l=this.analyzeInitExpr(e,t,s[n],i);if((0,r.Ft)(l))return null;u.push(l)}return(0,r.hu)(o.instructionType===l.rO.k_VariableType),new j({scope:c,sourceNode:n,args:u,type:o})}{if(1!==(s.length-1)/2)return null;const n=s[s.length-2];let r=null;return r="InitExpr"===n.name?this.analyzeInitExpr(e,t,n,o):this.analyzeExpr(e,t,s[s.length-2]),f.V5.equals(o,r.type)?r:null}}analyzeInitExpr(e,t,n,r){return this.analyzeInitExprChildren(e,t,n,n.children,r)}analyzeSamplerStateDecl(e,t,n){return null}analyzeVariableDecl(e,t,n){const i=n.children,s=(t.currentScope,this.analyzeUsageType(e,t,i[i.length-1])),o=[];if((0,r.Ft)(s))return null;for(let n=i.length-2;n>=1;n--)"Variable"===i[n].name&&o.push(this.analyzeVariable(e,t,i[n],s));return o}analyzeUsageType(e,t,n){const i=n.children,s=t.currentScope;let o=null,a=[];for(let n=i.length-1;n>=0;n--)if("Type"===i[n].name){if(o=this.analyzeType(e,t,i[n]),(0,r.Ft)(o))return null}else"Usage"===i[n].name&&a.push(this.analyzeUsage(i[n]));const l=a.includes("in"),c=a.includes("out"),u=a.includes("inout"),h=a.includes("const"),d=a.includes("uniform"),p=a.includes("unsigned"),f=a.includes("static");let m=[];return u||l&&c?m.push("inout"):(l&&m.push("in"),c?m.push("out"):(h&&m.push("const"),d&&m.push("uniform"))),f&&m.push("static"),p&&!H.isIntBasedType(o)&&console.error("invalid unsigned usage"),new ce.L({scope:s,sourceNode:n,type:o,usages:m})}analyzeType(e,t,n){const s=n.children,o=t.currentScope;let a=null;switch(n.name){case"T_TYPE_ID":if("auto"===n.value){a=new re({scope:o});break}a=o.findType(n.value),(0,r.Ft)(a)&&e.error(n,i.g.InvalidTypeNameNotType,{typeName:n.value});break;case"Struct":a=this.analyzeStruct(e,t,n);break;case"T_KW_VOID":a=H.T_VOID;break;case"ScalarType":case"ObjectType":{let c=s[s.length-1].value;if(1!==s.length){(0,r.hu)("<"===s[s.length-2].value&&">"===s[0].value);const u=c,h=s.slice(1,-2).reverse().filter(((e,t)=>t%2==0)).map((n=>this.analyzeType(e,t,n))),d=o.findTypeTemplate(c);if((0,r.Ft)(d))return e.error(n,i.g.InvalidTypeNameTemplateNotFound,{tplName:u,args:h.map((e=>e.toCode()))}),null;if(-1!==["Buffer","RWBuffer","RWStructuredBuffer","AppendStructuredBuffer","RWTexture1D","RWTexture2D","RWTexture3D","Texture1D","Texture2D","Texture3D","Texture2DArray","TextureCubeArray"].indexOf(d.name)&&o.type!=l.SR.k_Global)return e.error(n,i.g.InvalidTypeScope,{typeName:d.name,tooltip:"only global scope allowed"}),null;if(c=d.typeName(h),a=o.findType(c),(0,r.Ft)(a)){if(a=d.produceType(o,h),(0,r.Ft)(a))return e.error(n,i.g.CannotProduceType,{typeName:c}),null;o.addType(a)}}else a=o.findType(c);if((0,r.Ft)(a))return e.error(n,i.g.InvalidTypeNameNotType,{typeName:c}),null}break;case"VectorType":case"MatrixType":e.error(n,i.g.InvalidTypeVectorMatrix);break;case"BaseType":case"Type":return this.analyzeType(e,t,s[0])}return a}analyzeUsage(e){e=e.children[0];return(0,r.hu)(-1!==["uniform","const","in","out","inout","static","unsigned","precise","inline"].indexOf(e.value),e.value),e.value}analyzeCbufferDecl(e,t,n){const r=n.children,o=t.currentScope;let a=null,l="",c=null;e.beginCbuffer();let u=r.length-2;if("T_NON_TYPE_ID"===r[u].name&&(c=new G.x({scope:o,sourceNode:r[u],name:r[u].value}),u--),"Semantic"===r[u].name){l=this.analyzeSemantic(r[u]);const t=l.match(/^register\(([utbs]{1})([\d]+)\)$/);if(t){"b"!==t[1]&&e.warn(r[u],s.S.InvalidCbufferRegister)}u--}"Annotation"===r[u].name&&(a=this.analyzeAnnotation(e,t,r[u]),u--),u--;let h=[];for(let n=u;n>=2;n--)switch(r[n].name){case"VariableDecl":h=h.concat(this.analyzeVariableDecl(e,t,r[n]));break;case"VarStructDecl":h=h.concat(this.analyzeVarStructDecl(e,t,r[n]));break;default:e.error(r[n],i.g.UnknownInstruction,{})}e.endCbuffer();const d=H.T_FLOAT4.size,p=c.name,f=new R({scope:o,sourceNode:n,name:p,fields:h,aligment:d});o.addType(f)||e.error(n,i.g.TypeRedefinition,{typeName:p});const m=new A({id:c,type:f,sourceNode:n,semantic:l,annotation:a,scope:o});o.addCbuffer(m)||e.error(n,i.g.CbufferRedefinition,{typeName:p});return m}analyzeVariable(e,t,n,s){const o=n.children,a=t.currentScope;let c=null,u=null,h="",d=0;e.func?(e.funcDef||(d|=ge.K.k_Argument),d|=ge.K.k_Local):(a.type!==l.SR.k_Struct&&(d|=ge.K.k_Global),e.cbuffer&&(d|=ge.K.k_Cbuffer));let p=null,f=null,m=null,g=o[o.length-1];for(;;){let i=g.children;if(1===i.length){const e=i[0].value;p=new G.x({scope:a,sourceNode:n,name:e});break}(0,r.hu)(4==i.length),(0,r.Ft)(f)||(s=new ce.L({scope:a,sourceNode:s.sourceNode,type:s,arrayIndex:f})),f=this.analyzeExpr(e,t,i[i.length-3]),g=i[i.length-1]}m=new ce.L({scope:a,sourceNode:s.sourceNode,type:s,arrayIndex:f});const v=e=>"="==e.children[e.children.length-1]?.value;for(let r=o.length-2;r>=0;r--)if("Annotation"===o[r].name)c=this.analyzeAnnotation(e,t,o[r]);else if("Semantic"===o[r].name)h=this.analyzeSemantic(o[r]);else if("Initializer"===o[r].name){switch(u=v(o[r])?this.analyzeInitializer(e,t,o[r],m,n):this.analyzeStateBlock(e,t,o[r].children[0],m),m.name){case"BlendState":case"SamplerState":case"SamplerComparisonState":case"DepthStencilState":case"RasterizerState":console.assert(!v(o[r])),console.assert(!m.isNotBaseArray()||m.length==u.blocks.length);break;default:console.assert(v(o[r]))}u||e.error(n,i.g.InvalidVariableInitializing,{varName:p.name})}const y=new ge.D({sourceNode:n,scope:a,type:m,init:u,id:p,semantic:h,annotation:c,usageFlags:d});(0,r.hu)(a.type!=l.SR.k_System),H.hasVariable(y.name)&&e.error(n,i.g.SystemVariableRedefinition,{varName:y.name});if(!a.addVariable(y))switch(a.type){case l.SR.k_Global:case l.SR.k_Default:e.error(n,i.g.VariableRedefinition,{varName:y.name});break;case l.SR.k_Struct:e.error(n,i.g.InvalidNewFieldForStructName,{fieldName:y.name});break;case l.SR.k_Annotation:e.error(n,i.g.InvalidNewAnnotationVar,{varName:y.name})}return y}analyzeAnnotationDecls(e,t,n){const r=n.children;let i=[];for(let n=r.length-1;n>=0;n--)switch(r[n].name){case"AnnotationDecls":i.push(...this.analyzeAnnotationDecls(e,t,r[n]));break;case"VariableDecl":i.push(...this.analyzeVariableDecl(e,t,r[n]))}return i}analyzeAnnotation(e,t,n){const r=new ye.F$(H.SCOPE),i=r.currentScope;r.push(l.SR.k_Annotation);const s=[...n.children.filter((e=>"AnnotationDecls"==e.name)).map((t=>this.analyzeAnnotationDecls(e,r,t))).flat(),...n.children.filter((e=>"VariableDecl"==e.name)).map((t=>this.analyzeVariableDecl(e,r,t))).flat()];return r.pop(),s&&s.length?new g({scope:i,sourceNode:n,decls:s}):null}analyzeSemantic(e){return e.children.slice(0,-1).reverse().map((e=>e.value)).join("")}analyzeInitializer(e,t,n,r,i=null){const s=n.children;return"="==s[s.length-1]?.value?(console.assert("T_PUNCTUATOR_61"===s[s.length-1].name),this.analyzeInitExprChildren(e,t,n,s.slice(0,-1),r,i)):(console.assert(!1,"not valid branch"),null)}analyzeExpr(e,t,n){const r=n.name;switch(r){case"ObjectExpr":return this.analyzeObjectExpr(e,t,n);case"ComplexExpr":return this.analyzeComplexExpr(e,t,n);case"PostfixExpr":return this.analyzePostfixExpr(e,t,n);case"UnaryExpr":return this.analyzeUnaryExpr(e,t,n);case"CastExpr":return this.analyzeCastExpr(e,t,n);case"ConditionalExpr":return this.analyzeConditionalExpr(e,t,n);case"MulExpr":case"AddExpr":return this.analyzeArithmeticExpr(e,t,n);case"RelationalExpr":case"EqualityExpr":return this.analyzeRelationExpr(e,t,n);case"LogicalAndExpr":case"LogicalOrExpr":return this.analyzeLogicalExpr(e,t,n);case"AssignmentExpr":return this.analyzeAssignmentExpr(e,t,n);case"AndExpr":case"ShiftExpr":case"InclusiveOrExpr":case"ExclusiveOrExpr":return this.analyzeBitwiseExpr(e,t,n);case"T_NON_TYPE_ID":return this.analyzeIdExpr(e,t,n);case"T_STRING":case"T_UINT":case"T_FLOAT":case"T_KW_TRUE":case"T_KW_FALSE":return this.analyzeSimpleExpr(e,t,n);default:e.error(n,i.g.UnsupportedExpr,{exprName:r})}return null}analyzeObjectExpr(e,t,n){switch(n.children[n.children.length-1].name){case"T_KW_COMPILE":return this.analyzeCompileExpr(e,t,n);case"T_KW_COMPILE_SHADER":return this.analyzeCompileShader11(e,t,n)}return null}analyzeCompileShader11(e,t,n){const i=n.children,s=t.currentScope,o=i[1],a=i[3].value,l=o.children[o.children.length-1].value,c=[];for(let n=o.children.length-3;n>0;n--)","!==o.children[n].value&&c.push(this.analyzeExpr(e,t,o.children[n]));const u=t.globalScope.functions[l][0],h=a.substring(0,2),d={vs:H.T_VERTEX_SHADER,ps:H.T_PIXEL_SHADER,gs:H.T_GEOMETRY_SHADER,cs:H.T_COMPUTE_SHADER}[h];return(0,r.hu)((0,r.Xq)(d),`unknown shader type '${h} (${a})' has been used`),new k({scope:s,sourceNode:n,ver:a,args:c,func:u,type:d})}analyzeCompileExpr(e,t,n,s){const o=n.children,a=o[o.length-2].value,l=t.currentScope;let c=null,u=null,h=null;if(o.length>4){c=[];for(let n=o.length-4;n>0;n--)","!==o[n].value&&c.push(this.analyzeExpr(e,t,o[n]))}h=c?c.map(_e):null;let d=null;if(s){for(let e of s)if(h=c?c.map(_e):null,u=null,h=e.args||h,u=e.ret||u,d=t.globalScope.findFunction(a,h),d){if(e.ret&&!f.V5.equals(e.ret,d.def.returnType))continue;break}}else d=t.globalScope.findFunction(a,h);if((0,r.Ft)(d))return e.error(n,i.g.InvalidCompileNotFunction,{funcName:a}),null;if(u&&!f.V5.equals(d.def.returnType,u))return e.error(n,i.g.InvalidCompileFunctionNotValid,{funcName:a,funcType:u.toCode(),tooltip:`Return type mismatch: expected '${u.toCode()}' a is a '${d.def.returnType.toCode()}' `}),null;let p=ce.L.wrap(d.def.returnType,l);return new C({args:c,scope:l,type:p,operand:d,sourceNode:n})}analyzeComplexExpr(e,t,n){const r=n.children;switch(r[r.length-1].name){case"PostfixPointExpr":case"T_NON_TYPE_ID":return this.analyzeFunctionCallExpr(e,t,n);case"BaseType":case"T_TYPE_ID":return this.analyzeConstructorCallExpr(e,t,n);default:return this.analyzeSimpleComplexExpr(e,t,n)}}analyzeCallee(e,t,n){const r=n.children;return this.analyzeExpr(e,t,r[r.length-1])}createTracePseudoDeclaration(e,t,n){const r=t.globalScope,i=[new b.o({scope:r,name:"extern",args:null})],s=ce.L.wrap(H.T_VOID,r),o=new G.x({scope:r,name:"trace"}),a=n.map(((e,t)=>{const n=ce.L.wrapAsConst(e.type.baseType,r),i=new G.x({scope:r,name:`p${t}`}),s=ge.K.k_Argument|ge.K.k_Local;return new ge.D({scope:r,type:n,id:i,usageFlags:s})})),l=new B.Y({scope:r,returnType:s,id:o,paramList:a}),c=new U.s({scope:r,def:l,impl:null,attrs:i});return r.addFunction(c),c}analyzeFunctionCallExpr(e,t,n){const o=n.children,a=t.currentScope,c=t.globalScope,u=o[o.length-1].name;let h=null,d=null,p=null,m=[];switch(u){case"T_NON_TYPE_ID":if(h=o[o.length-1].value,o.length>3)for(let n=o.length-3;n>0;n--)if(","!==o[n].value){const r=this.analyzeExpr(e,t,o[n]);m.push(r)}m.every((e=>e?.type!=xe(e)));d=c.findFunction(h,m.map((e=>e?.type||null))),d||(d=c.findFunction(h,m.map(xe))),(0,r.Ft)(d)&&"trace"===h&&(d=this.createTracePseudoDeclaration(e,t,m));break;case"PostfixPointExpr":if(p=this.analyzeCallee(e,t,o[o.length-1]),h=o[o.length-1].children[0].value,o.length>3)for(let n=o.length-3;n>0;n--)if(","!==o[n].value){const r=this.analyzeExpr(e,t,o[n]);m.push(r)}d=p.type.getMethod(h,m.map(xe))}if((0,r.Ft)(d))return e.error(n,i.g.InvalidComplexNotFunction,{funcName:h,args:m.map((e=>f.V5.signature(e?.type)))}),null;if(!(0,r.Xq)(d))return e.error(n,i.g.CannotChooseFunction,{funcName:h}),null;if(m.includes(null))return null;if(d.def.params.filter((e=>!e.initExpr)).length>m.length)return e.error(n,i.g.UnsupportedExpr,{funcName:h}),null;if(m.forEach(((t,n)=>{const r=d.def.params[n],i=m[n];f.V5.equals(r.type,i.type)||e.warn(i.sourceNode,s.S.ImplicitTypeConversion,{info:`${i.type.toCode()} => ${r.type.toCode()}`})})),d.instructionType!==l.rO.k_FunctionDecl&&d.instructionType!==l.rO.k_SystemFunctionDecl)return console.error("@undefined_behavior"),null;const g=d.def.params;for(let t=0;t<m.length;t++)if(!(0,r.Ft)(m[t]))if(g[t].type.usages.includes("out")){const n=f.th.unwind(m[t]);(0,r.Ft)(n)&&e.error(m[t].sourceNode,i.g.InvalidExprIsNotLValue),m[t].type.writable||e.error(m[t].sourceNode,i.g.InvalidTypeForWriting)}else if(g[t].type.usages.includes("inout")){const n=f.th.unwind(m[t]);(0,r.Ft)(n)&&e.error(m[t].sourceNode,i.g.InvalidExprIsNotLValue),m[t].type.writable||e.error(m[t].sourceNode,i.g.InvalidTypeForWriting),m[t].type.readable||e.error(m[t].sourceNode,i.g.InvalidTypeForReading)}else m[t].type.readable||e.error(m[t].sourceNode,i.g.InvalidTypeForReading);{const e=ce.L.wrap(d.def.returnType,a);return new z.L({scope:a,type:e,decl:d,args:m,sourceNode:n,callee:p})}}analyzeConstructorCallExpr(e,t,n){const s=n.children,o=t.currentScope,a=this.analyzeType(e,t,s[s.length-1]);if((0,r.Ft)(a))return e.error(n,i.g.InvalidComplexNotType),null;let l=null;if(s.length>3){let n=null;l=[];for(let r=s.length-3;r>0;r--)","!==s[r].value&&(n=this.analyzeExpr(e,t,s[r]),l.push(n))}const c=function(e,t){return new ce.L({type:e,scope:null})}(a);if((0,r.Ft)(c))return e.error(n,i.g.InvalidComplexNotConstructor,{typeName:String(a)}),null;if(!(0,r.Ft)(l))for(let t=0;t<l.length;t++)l[t]&&l[t].type.readable||e.error(n,i.g.InvalidTypeForReading);return new O.f({scope:o,sourceNode:n,ctor:c,args:l})}analyzeSimpleComplexExpr(e,t,n){const i=n.children,s=t.currentScope;let o=this.analyzeExpr(e,t,i[1]);return(0,r.Ft)(o)?null:new P({scope:s,sourceNode:n,expr:o})}analyzePostfixExpr(e,t,n){const r=n.children;switch(r[r.length-2].value){case"[":return this.analyzePostfixIndex(e,t,n);case".":return this.analyzePostfixPoint(e,t,n);case"++":case"--":return this.analyzePostfixArithmetic(e,t,n)}return null}analyzePostfixIndex(e,t,n){const s=n.children,o=t.currentScope,a=this.analyzeExpr(e,t,s[s.length-1]);if((0,r.Ft)(a))return null;const l=a.type;if(!l.isArray())return e.error(n,i.g.InvalidPostfixNotArray,{typeName:String(l)}),null;const c=this.analyzeExpr(e,t,s[s.length-3]),u=c.type;return f.V5.equals(u,H.T_INT)||f.V5.equals(u,H.T_UINT)?new $({scope:o,sourceNode:n,element:a,index:c}):(e.error(n,i.g.InvalidPostfixNotIntIndex,{typeName:String(u)}),null)}static createFieldDecl(e,t){if(!e.getField(t))return null;const n=(e.subType||e).getField(t),{type:r}=n,i=new ce.L({scope:r.scope,sourceNode:r.sourceNode,type:r,readable:e.readable,writable:e.writable,padding:r.padding}),s=new G.x({scope:n.scope,name:n.id.name,sourceNode:n.id.sourceNode}),o=new ge.D({semantic:n.semantic,scope:n.scope,type:i,sourceNode:n.sourceNode,id:s,usageFlags:n.usageFlags});return m.v.$withParent(o,e)}analyzePostfixPointField(e,t,n,i){if((0,r.Ft)(i))return null;const s=t.currentScope,o=n.value,a=Pe.createFieldDecl(i,o);if((0,r.Ft)(a))return null;const l=new G.x({scope:s,sourceNode:n,name:o});return new V.M({scope:s,sourceNode:n,id:l,decl:a})}analyzePostfixPoint(e,t,n){const s=n.children,o=t.currentScope,a=this.analyzeExpr(e,t,s[s.length-1]);if((0,r.Ft)(a))return null;const l=this.analyzePostfixPointField(e,t,s[s.length-3],a.type);if((0,r.Ft)(l)){const t=s[s.length-3].value;return e.error(n,i.g.InvalidPostfixNotField,{typeName:String(a.type),fieldName:t}),null}return new Q.e({sourceNode:n,scope:o,element:a,postfix:l})}analyzePostfixArithmetic(e,t,n){const s=n.children,o=t.currentScope,a=s[0].value,l=this.analyzeExpr(e,t,s[1]),c=l.type,u=Pe.checkOneOperandExprType(e,n,a,c);return(0,r.Ft)(u)?(e.error(n,i.g.InvalidPostfixArithmetic,{operator:a,typeName:String(c)}),null):new J({scope:o,sourceNode:n,operator:a,expr:l})}analyzeUnaryExpr(e,t,n){const s=n.children,o=s[1].value,a=t.currentScope;let c=this.analyzeExpr(e,t,s[0]),u=Pe.checkOneOperandExprType(e,n,o,c.type);if((0,r.Ft)(u))return e.error(n,i.g.InvalidUnaryOperation,{operator:o,tyename:String(c.type)}),null;let h=null;if(("-"===o||"+"===o)&&f.NQ.isLiteral(c))switch(c.instructionType){case l.rO.k_IntExpr:{let e=c,{base:t,signed:r,heximal:i,exp:s}=e;r="-"===o||e.signed,t="-"===o?-t:t,h=new q.v({scope:a,sourceNode:n,base:t,exp:s,signed:r,heximal:i})}break;case l.rO.k_FloatExpr:h=new D.O({scope:a,sourceNode:n,value:Number(`${o}${c.value}`)})}return h||(h=new me({scope:a,sourceNode:n,expr:c,operator:o})),h}analyzeCastExpr(e,t,n){const s=n.children,o=t.currentScope,a=this.analyzeConstTypeDim(e,t,s[2]);H.isBase(a)||e.error(n,i.g.InvalidCastTypeNotBase,{typeName:String(a)});const l=this.analyzeExpr(e,t,s[0]);return(0,r.Ft)(l)?null:(l.type.readable||e.error(n,i.g.InvalidTypeForReading),new E.G({scope:o,sourceNode:n,sourceExpr:l,type:a}))}analyzeConditionalExpr(e,t,n){const s=n.children,o=t.currentScope,a=this.analyzeExpr(e,t,s[s.length-1]),l=this.analyzeExpr(e,t,s[s.length-3]),c=this.analyzeExpr(e,t,s[0]);if((0,r.Ft)(a))return e.error(s[s.length-1],i.g.InvalidConditionType,{typeName:"[unknown]"}),null;if((0,r.Ft)(l))return e.error(s[s.length-3],i.g.InvalidConditionType,{typeName:"[unknown]"}),null;if((0,r.Ft)(c))return e.error(s[0],i.g.InvalidConditionType,{typeName:"[unknown]"}),null;const u=a.type,h=l.type,d=c.type,p=H.T_BOOL;return f.V5.equals(u,p)?f.V5.equals(h,d)?(u.readable||e.error(a.sourceNode,i.g.InvalidTypeForReading,{tooltip:`${a.toCode()}`}),h.readable||e.error(l.sourceNode,i.g.InvalidTypeForReading,{tooltip:`${l.toCode()}`}),d.readable||e.error(c.sourceNode,i.g.InvalidTypeForReading,{tooltip:`${c.toCode()}`}),new L.x({scope:o,sourceNode:n,cond:a,left:l,right:c})):(e.error(h.sourceNode,i.g.InvalidConditonValueTypes,{leftTypeName:String(h),rightTypeName:String(d)}),null):(e.error(a.sourceNode,i.g.InvalidConditionType,{typeName:String(u)}),null)}analyzeArithmeticExpr(e,t,n){const s=n.children,o=t.currentScope,a=n.children[1].value,l=this.analyzeExpr(e,t,s[s.length-1]),c=this.analyzeExpr(e,t,s[0]);if(!l||!c)return e.error(n,i.g.InvalidArithmeticOperation,{operator:a,leftTypeName:"[unknown]",rightTypeName:"[unknown]"}),null;const u=l.type,h=c.type,d=Pe.checkTwoOperandExprTypes(e,a,u,h,l.sourceNode,c.sourceNode,n);return(0,r.Ft)(d)?(e.error(n,i.g.InvalidArithmeticOperation,{operator:a,leftTypeName:String(u),rightTypeName:String(h)}),null):new v.W({scope:o,sourceNode:n,left:l,right:c,operator:a,type:d})}analyzeRelationExpr(e,t,n){const s=n.children,o=t.currentScope,a=n.children[1].value,l=this.analyzeExpr(e,t,s[s.length-1]),c=this.analyzeExpr(e,t,s[0]),u=l&&l.type,h=c&&c.type,d=Pe.checkTwoOperandExprTypes(e,a,u,h,l&&l.sourceNode,c&&c.sourceNode,n);return(0,r.Ft)(d)?(e.error(n,i.g.InvalidRelationalOperation,{operator:a,leftTypeName:u?f.V5.signature(u):"[unknown]",rightTypeName:h?f.V5.signature(h):"[unknown]"}),null):l&&c?new ie.m({sourceNode:n,scope:o,left:l,right:c,operator:a}):null}analyzeLogicalExpr(e,t,n){const r=n.children,s=t.currentScope,o=n.children[1].value,a=this.analyzeExpr(e,t,r[r.length-1]),l=this.analyzeExpr(e,t,r[0]),c=a.type,u=l.type,h=H.T_BOOL;return f.V5.equals(c,h)?f.V5.equals(u,h)?(c.readable||e.error(n,i.g.InvalidTypeForReading),u.readable||e.error(n,i.g.InvalidTypeForReading),new K.u({scope:s,sourceNode:n,left:a,right:l,operator:o})):(e.error(u.sourceNode,i.g.InvalidLogicOperation,{operator:o,typeName:String(u)}),null):(e.error(c.sourceNode,i.g.InvalidLogicOperation,{operator:o,typeName:String(c)}),null)}analyzeBitwiseExpr(e,t,n){const s=n.children,o=t.currentScope,a=n.children[1].value,l=this.analyzeExpr(e,t,s[s.length-1]),c=this.analyzeExpr(e,t,s[0]);if(!l||!c)return null;const u=l.type,h=c.type,d=Pe.checkTwoOperandExprTypes(e,a,u,h,l.sourceNode,c.sourceNode,n);return(0,r.Ft)(d)?(e.error(n,i.g.InvalidBitwiseOperation,{operator:a,leftTypeName:String(u),rightTypeName:String(h)}),null):new x({scope:o,sourceNode:n,left:l,right:c,type:d,operator:a})}analyzeAssignmentExpr(e,t,n){const s=n.children,o=t.currentScope,a=s[1].value,l=this.analyzeExpr(e,t,s[s.length-1]);f.th.unwind(l)||e.error(n,i.g.InvalidLeftHandSideInAssignment,{operator:a});const c=this.analyzeExpr(e,t,s[0]);if((0,r.Ft)(l)||(0,r.Ft)(c))return null;const u=l.type,h=c.type;let d=null;return"="!==a?(d=Pe.checkTwoOperandExprTypes(e,a,u,h,l.sourceNode,c.sourceNode,n),(0,r.Ft)(d)&&e.error(n,i.g.InvalidArithmeticAssigmentOperation,{operator:a,leftTypeName:f.V5.signature(u),rightTypeName:f.V5.signature(h)})):d=h,d=Pe.checkTwoOperandExprTypes(e,"=",u,d,l.sourceNode,null,n),(0,r.Ft)(d)&&e.error(n,i.g.InvalidAssigmentOperation,{leftTypeName:f.V5.signature(u),rightTypeName:f.V5.signature(h)}),new y.a({scope:o,sourceNode:n,left:l,right:c,operator:a})}analyzeIdExpr(e,t,n){const s=t.currentScope,o=n.value,a=e.expressions[o];if(a)return a(e,t,n);if("NULL"===o)return new X({scope:s,sourceNode:n});const l=s.findVariable(o);if((0,r.Ft)(l))return e.error(n,i.g.UnknownVarName,{varName:o}),null;const c=new G.x({scope:s,sourceNode:n,name:o});return new V.M({scope:s,sourceNode:n,id:c,decl:l})}analyzeSimpleExpr(e,t,n){const r=n.name,i=n.value,s=t.currentScope;switch(r){case"T_UINT":{const{base:e,signed:t,heximal:r,exp:o}=(0,be.F2)(i);return new q.v({scope:s,sourceNode:n,base:e,exp:o,signed:t,heximal:r})}case"T_FLOAT":return new D.O({scope:s,sourceNode:n,value:Number(i)});case"T_STRING":return new ue({scope:s,sourceNode:n,value:i});case"T_KW_TRUE":return new w.O({scope:s,sourceNode:n,value:!0});case"T_KW_FALSE":return new w.O({scope:s,sourceNode:n,value:!1})}return null}analyzeConstTypeDim(e,t,n){const r=n.children;if(r.length>1)return e.error(n,i.g.InvalidCastTypeUsage),null;return this.analyzeType(e,t,r[0])}analyzeVarStructDecl(e,t,n){const r=n.children;let i=this.analyzeUsageStructDecl(e,t,r[r.length-1]),s=[];for(let n=r.length-2;n>=1;n--)"Variable"===r[n].name&&(s=s.concat(this.analyzeVariable(e,t,r[n],i)));return s}analyzeUsageStructDecl(e,t,n){const i=n.children,s=t.currentScope;let o=[],a=null;for(let n=i.length-1;n>=0;n--)if("StructDecl"===i[n].name){a=this.analyzeStructDecl(e,t,i[n]);Te(e,s,new pe({scope:s,sourceNode:i[n],type:a}))}else if("Usage"===i[n].name){const e=this.analyzeUsage(i[n]);o.push(e)}return(0,r.hu)(!(0,r.Ft)(a)),new ce.L({scope:s,sourceNode:n,usages:o,type:a})}analyzeStruct(e,t,n){const r=n.children,i=t.currentScope;let s=null;"T_NON_TYPE_ID"===r[r.length-2].name&&(s=r[r.length-2].value);let o=[];t.push(l.SR.k_Struct);for(let n=r.length-4;n>=1;n--)"VariableDecl"===r[n].name&&(o=o.concat(this.analyzeVariableDecl(e,t,r[n])));t.pop();let a=1;return e.cbuffer&&(a=H.T_FLOAT4.size),new R({scope:i,sourceNode:n,fields:o,name:s,aligment:a})}analyzeFunctionDecl(e,t,n){const s=n.children,o=t.currentScope,a=t.globalScope,c=s[0].value;let u=null,h=null;t.push(l.SR.k_Default);const d=[];for(;"Attribute"===s[s.length-1-d.length].name;)d.push(this.analyzeAttribute(e,t,s[s.length-1-d.length]));const p=this.analyzeFunctionDef(e,t,s[s.length-1-d.length]);if((0,r.Ft)(p))return e.error(n,i.g.UnknownInstruction,{}),t.pop(),null;let m=a.findFunction(p.name,p.params.map(_e));if(!(0,r.Xq)(m))return e.error(n,i.g.CannotChooseFunction,{funcName:p.name}),t.pop(),null;if(!(0,r.Ft)(m)&&m.impl)return e.error(n,i.g.FunctionRedefinition,{funcName:p.name}),t.pop(),null;if(!(0,r.Ft)(m)&&!f.V5.equals(m.def.returnType,p.returnType))return e.error(n,i.g.InvalidFuncDefenitionReturnType,{funcName:p.name}),t.pop(),null;(0,r.hu)(null===e.funcDef),e.funcDef=p,3===s.length&&(u=this.analyzeAnnotation(e,t,s[1])),";"!==c&&(h=this.analyzeStmtBlock(e,t,s[0])),t.pop();let g=f.V5.equals(p.returnType,H.T_VOID);if(!(0,r.Ft)(h)){let t=h.stmtList;for(let n=t.length-1;n>=0;--n)if(t[n].instructionType==l.rO.k_ReturnStmt){n!=t.length-1&&e.error(t[n+1].sourceNode,i.g.UnreachableCode);break}}return(0,r.hu)(o==a),m=new U.s({sourceNode:n,scope:o,def:p,impl:h,annotation:u,attrs:d}),a.addFunction(m)||e.error(n,i.g.FunctionRedifinition,{funcName:p.name}),g||e.haveCurrentFunctionReturnOccur||(0,r.Ft)(h)||e.error(n,i.g.InvalidFunctionReturnStmtNotFound,{funcName:p.name}),m}analyzeFunctionDef(e,t,n){const r=n.children,s=t.currentScope,o=r[r.length-2],a=o.value,l=r[r.length-1];let c=this.analyzeUsageType(e,t,l);if(!c)return e.error(l,i.g.InvalidFunctionReturnType,{funcName:a}),null;let u=new G.x({scope:s,name:a,sourceNode:o}),h=null;4===r.length&&(h=this.analyzeSemantic(r[0]));let d=this.analyzeParamList(e,t,r[r.length-3]);return new B.Y({scope:s,sourceNode:n,returnType:c,id:u,paramList:d,semantic:h})}analyzeParamList(e,t,n){const r=n.children;let i=[];for(let n=r.length-2;n>=1;n--)if("ParameterDecl"===r[n].name){let s=this.analyzeParameterDecl(e,t,r[n]);i.push(s)}return i}analyzeParameterDecl(e,t,n){const i=n.children,s=this.analyzeParamUsageType(e,t,i[1]);if((0,r.Ft)(s))return null;return this.analyzeVariable(e,t,i[0],s)}analyzeParamUsageType(e,t,n){const i=n.children,s=t.currentScope;let o=[],a=null;for(let n=i.length-1;n>=0;n--)if("Type"===i[n].name){if(a=this.analyzeType(e,t,i[n]),(0,r.Ft)(a))return null}else"ParamUsage"===i[n].name&&o.push(this.analyzeUsage(i[n]));return new ce.L({scope:s,sourceNode:n,type:a,usages:o})}analyzeStmtBlock(e,t,n){const i=n.children,s=t.currentScope;if(!i)return null;let o=[];for(let n=i.length-2;n>0;n--){let s=this.analyzeStmt(e,t,i[n]);(0,r.Ft)(s)||o.push(s)}return new le.O({sourceNode:n,scope:s,stmtList:o})}analyzeStmt(e,t,n){const r=n.children;let i,s=r.length;do{i=r[--s].name}while("Attribute"===i);switch(i){case"SimpleStmt":return this.analyzeSimpleStmt(e,t,r[0]);case"UseDecl":return this.analyzeUseDecl(e,t,r[0]),null;case"T_KW_WHILE":return this.analyzeWhileStmt(e,t,n);case"T_KW_FOR":return this.analyzeForStmt(e,t,n);case"T_KW_IF":return this.analyzeIfStmt(e,t,n)}return null}analyzeSimpleStmt(e,t,n){const r=t.currentScope,i=n.children;switch(i[i.length-1].name){case"T_KW_RETURN":return this.analyzeReturnStmt(e,t,n);case"T_KW_DO":return this.analyzeWhileStmt(e,t,n);case"StmtBlock":{t.push(l.SR.k_Default);let n=this.analyzeStmtBlock(e,t,i[0]);return t.pop(),n}case"T_KW_DISCARD":case"T_KW_BREAK":case"T_KW_CONTINUE":return this.analyzeBreakStmt(e,t,n);case"TypeDecl":case"VariableDecl":case"VarStructDecl":return this.analyzeDeclStmt(e,t,i[0]);default:return 2===i.length?this.analyzeExprStmt(e,t,n):new oe({sourceNode:n,scope:r})}}analyzeReturnStmt(e,t,n){const s=n.children,o=t.currentScope;(0,r.hu)(e.func);const a=e.funcDef.returnType;if(e.haveCurrentFunctionReturnOccur=!0,2===s.length&&we(a,H.T_VOID),f.V5.equals(a,H.T_VOID)&&3===s.length)return e.error(n,i.g.InvalidReturnStmtVoid),null;if(!f.V5.equals(a,H.T_VOID)&&2===s.length)return e.error(n,i.g.InvalidReturnStmtEmpty),null;let l=null;if(3===s.length){if(l=this.analyzeExpr(e,t,s[1]),(0,r.Ft)(l))return e.error(n,i.g.InvalidReturnStmtTypesNotEqual),null;if(we(a,l.type),we(l.type,a),!f.V5.equals(l.type,a))return e.error(n,i.g.InvalidReturnStmtTypesNotEqual),null}return new se.F({sourceNode:n,scope:o,expr:l})}analyzeBreakStmt(e,t,n){const i=n.children,s=t.currentScope,o=i[1].value;return"discard"===o&&(0,r.Ft)(e.funcDef),new T({sourceNode:n,scope:s,operator:o})}analyzeDeclStmt(e,t,n){n.children;const r=t.currentScope;let i=[];switch(n.name){case"TypeDecl":i.push(this.analyzeTypeDecl(e,t,n));break;case"VariableDecl":i=i.concat(this.analyzeVariableDecl(e,t,n));break;case"VarStructDecl":i=i.concat(this.analyzeVarStructDecl(e,t,n))}return new N.T({sourceNode:n,scope:r,declList:i})}analyzeExprStmt(e,t,n){const r=t.currentScope,i=n.children,s=this.analyzeExpr(e,t,i[1]);return new I.D({sourceNode:n,scope:r,expr:s})}analyzeWhileStmt(e,t,n){const r=t.currentScope,s=n.children,o="do"===s[s.length-1].value,a="NonIfStmt"===n.name,l=H.T_BOOL;let c=null,u=null,h=null,d="do";if(o){if(d="do",c=this.analyzeExpr(e,t,s[2]),u=c.type,!f.V5.equals(u,l))return e.error(n,i.g.InvalidDoWhileCondition,{typeName:String(u)}),null;h=this.analyzeStmt(e,t,s[0])}else{if(d="while",c=this.analyzeExpr(e,t,s[2]),u=c.type,!f.V5.equals(u,l))return e.error(n,i.g.InvalidWhileCondition,{typeName:String(u)}),null;h=a?this.analyzeNonIfStmt(e,t,s[0]):this.analyzeStmt(e,t,s[0])}return new ve({sourceNode:n,scope:r,cond:c,body:h,operator:d})}analyzeAttribute(e,t,n){const i=t.currentScope,s=n.children,o=s[s.length-2].value;let a=null;if(s.length>3){let n=null;a=[];for(let i=s.length-4;i>1;i--)","!==s[i].value&&(n=this.analyzeSimpleExpr(e,t,s[i]),(0,r.hu)(n.instructionType===l.rO.k_BoolExpr||n.instructionType===l.rO.k_FloatExpr||n.instructionType===l.rO.k_IntExpr),a.push(n))}return new b.o({scope:i,sourceNode:n,name:o,args:a})}analyzeIfStmt(e,t,n){const r=t.currentScope,o=n.children;let a=[];for(;"Attribute"===o[o.length-1-a.length].name;)a.push(this.analyzeAttribute(e,t,o[o.length-1-a.length]));const l=o.length-a.length==7,c=o[o.length-3-a.length],u=this.analyzeExpr(e,t,c);u&&f.V5.equals(xe(u.type),H.T_BOOL)?f.V5.equals(u.type,H.T_BOOL)||e.warn(c,s.S.ImplicitTypeConversion,{tooltip:`${u.type.name} => bool`}):e.error(c,i.g.InvalidIfCondition,{typeName:u?String(u.type):"[unknown]"});let h=null,d=null;return l?(h=this.analyzeNonIfStmt(e,t,o[2]),d=this.analyzeStmt(e,t,o[0])):h=this.analyzeNonIfStmt(e,t,o[0]),u?new Z.i({sourceNode:n,scope:r,cond:u,conseq:h,contrary:d,attrs:a}):null}analyzeNonIfStmt(e,t,n){const r=n.children;switch(r[r.length-1].name){case"SimpleStmt":return this.analyzeSimpleStmt(e,t,r[0]);case"T_KW_WHILE":return this.analyzeWhileStmt(e,t,n);case"T_KW_FOR":return this.analyzeForStmt(e,t,n)}return null}analyzeForStmt(e,t,n){const s=t.currentScope,o=n.children,a="NonIfStmt"===n.name;let c=null,u=null,h=null,d=null,p=[];for(;"Attribute"===o[o.length-1-p.length].name;)p.push(this.analyzeAttribute(e,t,o[o.length-1-p.length]));if("ERROR"===o[1].name)return null;t.push();const f=o[o.length-3-p.length],m=o[o.length-4-p.length];u=this.analyzeForInit(e,t,f),h=this.analyzeForCond(e,t,m),d=null;const g="T_PUNCTUATOR_59"==f.children[0].name;return(0,r.Ft)(u)&&!g?e.error(f,i.g.InvalidForInitEmptyIterator):(u.instructionType,l.rO.k_VariableDecl),(0,r.Ft)(h)?e.error(m,i.g.InvalidForConditionEmpty):(h.instructionType,l.rO.k_RelationalExpr),o.length===7+p.length&&(d=this.analyzeForStep(e,t,o[2]),(0,r.Ft)(d)&&e.error(o[2],i.g.InvalidForStepEmpty)),c=a?this.analyzeNonIfStmt(e,t,o[0]):this.analyzeStmt(e,t,o[0]),t.pop(),new F({sourceNode:n,scope:s,init:u,cond:h,step:d,body:c})}analyzeForInit(e,t,n){const r=n.children;switch(r[r.length-1].name){case"VariableDecl":return this.analyzeVariableDecl(e,t,r[0])[0]||null;case"Expr":case"AssignmentExpr":return this.analyzeExpr(e,t,r[1])}return null}analyzeForCond(e,t,n){const r=n.children;return 1===r.length?null:this.analyzeExpr(e,t,r[1])}analyzeForStep(e,t,n){const r=n.children;if(0==r.length)return null;return this.analyzeExpr(e,t,r[0])}analyzePresetProperty(e,t,n){const i=n.children,o=i[i.length-1],a=o.value,l=i[i.length-3],c=l.children[l.children.length-1],u=t.currentScope;if((0,r.Ft)(c.value)||(0,r.Ft)(a))return console.warn("Pass state is incorrect."),null;const h=u.findVariable(a);if((0,r.Ft)(h))return e.warn(n,s.S.PartFx_PresetPropertyHasNotBeenFound),null;const d=h.type,p=[];if("{"===c.value&&l.children.length>3)for(let n=l.children.length-2;n>=1;n-=2){const r=this.analyzeExpr(e,t,l.children[n]);f.V5.equals(r.type,d.arrayElementType)||e.warn(l.children[n],s.S.ImplicitTypeConversion,{tooltip:`${r.type.name} => ${d.arrayElementType.name}`}),p.push(r)}else"{"===c.value?p.push(this.analyzeExpr(e,t,l.children[1])):p.push(this.analyzeExpr(e,t,c));const m=new G.x({name:a,scope:u,sourceNode:o});return new te({scope:u,sourceNode:n,id:m,args:p})}analyzePresetStateBlock(e,t,n){const r=n.children;let i=[];for(let n=r.length-2;n>=1;n--)i.push(this.analyzePresetProperty(e,t,r[n]));return i}analyzePresetDecl(e,t,n){const r=n.children,i=t.currentScope;let s=null;for(let e=0;e<r.length;++e)if("T_NON_TYPE_ID"===r[e].name){let t=r[e].value;s=new G.x({sourceNode:r[e],scope:i,name:t})}const o=this.analyzePresetStateBlock(e,t,r[0]);return new ee({scope:i,sourceNode:n,id:s,props:o})}analyzeTechnique11Decl(e,t,n){const r=n.children,i=this.analyzeComplexName(r[r.length-2]),s=(r[r.length-2].children.length,t.currentScope);let o=null,a=null,l=null;for(let n=r.length-3;n>=0;n--)"Annotation"===r[n].name?o=this.analyzeAnnotation(e,t,r[n]):"Semantic"===r[n].name?a=this.analyzeSemantic(r[n]):[l]=this.analyzeTechnique11(e,t,r[n]);const c=new he({sourceNode:n,name:i,semantic:a,annotation:o,passes:l,scope:s,presets:null});return Pe.addTechnique11(e,t,c),c}analyzeTechniqueDecl(e,t,n){const r=n.children;e.warn(n,s.S.Deprecated);const i=this.analyzeComplexName(r[r.length-2]),o=(r[r.length-2].children.length,t.currentScope);let a=null,c=null,u=null,h=null,d=l.vj.k_BasicFx;for(let n=r.length-3;n>=0;n--)"Annotation"===r[n].name?a=this.analyzeAnnotation(e,t,r[n]):"Semantic"===r[n].name?c=this.analyzeSemantic(r[n]):[u,h]=this.analyzeTechnique(e,t,r[n]);const p=new de.L({sourceNode:n,name:i,techniqueType:d,semantic:c,annotation:a,passes:u,scope:o,presets:h});return Pe.addTechnique(e,t,p),p}analyzeTechnique(e,t,n){const i=n.children;let s=[],o=[];for(let n=i.length-2;n>=1;n--){if("PresetDecl"===i[n].children[0].name){let s=this.analyzePresetDecl(e,t,i[n].children[0]);(0,r.hu)(!(0,r.Ft)(s)),o.push(s);continue}let a=this.analyzePassDecl(e,t,i[n]);(0,r.hu)(!(0,r.Ft)(a)),s.push(a)}return[s,o]}analyzeTechnique11(e,t,n){const i=n.children;let s=[];for(let n=i.length-2;n>=1;n--){let o=this.analyzePass11Decl(e,t,i[n],0);(0,r.hu)(!(0,r.Ft)(o)),s.push(o)}return[s]}analyzePassDecl(e,t,n){const r=n.children,i=t.currentScope,s=this.analyzePassStateBlockForShaders(e,t,r[0]),o=this.analyzePassStateBlock(e,t,r[0]);let a=null;for(let e=0;e<r.length;++e)if("T_NON_TYPE_ID"===r[e].name){let t=r[e].value;a=new G.x({scope:i,name:t})}return new Y.f({scope:i,sourceNode:n,renderStates:o,id:a,pixelShader:s.pixel,vertexShader:s.vertex})}analyzePass11Decl(e,t,n,r=0){const i=n.children,s=t.currentScope;let o=null;for(let e=0;e<i.length;++e)if("T_NON_TYPE_ID"===i[e].name){let t=i[e].value;o=new G.x({scope:s,name:t,sourceNode:i[e]})}o||(o=new G.x({scope:s,name:`auto_pass_${r}`}));const a=this.analyzeStmtBlock(e,t,i[0]),l=ce.L.wrap(H.T_VOID,s),c=new B.Y({scope:s,id:o,returnType:l});return new U.s({scope:s,sourceNode:n,impl:a,def:c})}analyzePassStateBlockForShaders(e,t,n){const i=n.children;let s=null,o=null;const a=["vertexshader","pixelshader"];for(let n=i.length-2;n>=1;n--){let l=null;const c=i[n].children,u=c[c.length-1].value.toLowerCase();if(-1!==a.indexOf(u)&&(l=this.analyzePassStateForShader(e,t,i[n],u),!(0,r.Ft)(l)))switch(u){case"vertexshader":(0,r.hu)(null==o),o=l;break;case"pixelshader":(0,r.hu)(null==s),s=l;break;default:console.error("function is not suitable as shader entry point")}}return{vertex:o,pixel:s}}analyzePassStateForShader(e,t,n,s){(0,r.hu)("vertexshader"===s||"pixelshader"===s);const o=n.children,a=o[o.length-3],l=a.children[a.children.length-1],c=this.analyzeExpr(e,t,l);if(!c)return null;const u=c.function;return"vertexshader"===s?Ae(u.def)||e.error(n,i.g.FunctionIsNotCompatibleWithVertexShader,{funcDef:String(u)}):Ce(u.def)||e.error(n,i.g.FunctionIsNotCompatibleWithPixelShader,{funcDef:String(u)}),u}analyzeStateBlock(e,t,n,r){const i=n.children,s=t.currentScope;if(r.isNotBaseArray()){let o=[];for(let n=i.length-2;n>=1;n--)","!==i[n].value&&(o=[...o,this.analyzeStateBlock(e,t,i[n],r.subType)]);return new ae({scope:s,sourceNode:n,type:r,blocks:o})}{let o={};for(let n=i.length-2;n>=1;n--)o={...o,...this.analyzeState(e,t,i[n])};return new ae({scope:s,sourceNode:n,type:r,props:o})}}analyzeState(e,t,n){const i=n.children,s=i[i.length-1].value,o=i[i.length-3],a=o.children[o.children.length-1];if((0,r.Ft)(a.value))return console.warn("state is incorrect."),{};let l={};if("{"===a.value&&o.children.length>3){const e=new Array(Math.ceil((o.children.length-2)/2));for(let t=o.children.length-2,n=0;t>=1;t-=2,n++)e[n]=o.children[t].value;l[s]=e}else{let e="";e="{"===a.value?o.children[1].value:a.value,l[s]=e}return l}analyzePassStateBlock(e,t,n){const r=n.children;let i={};for(let n=r.length-2;n>=1;n--)i={...i,...this.analyzePassState(e,t,r[n])};return i}analyzePassState(e,t,n){const i=n.children,s=i[i.length-1].value.toUpperCase(),l=o.H[s];if(!(0,u.hj)(l))return{};const c=i[i.length-3],h=c.children[c.children.length-1];if((0,r.Ft)(h.value))return console.warn("Pass state is incorrect."),{};let d={};if("{"===h.value&&c.children.length>3){const e=new Array(Math.ceil((c.children.length-2)/2));for(let t=c.children.length-2,n=0;t>=1;t-=2,n++)e[n]=Se(l,c.children[t].value.toUpperCase());switch(l){case o.H.BLENDFUNC:if(2!==e.length)return console.warn("Pass state are incorrect."),{};d[o.H.SRCBLENDCOLOR]=e[0],d[o.H.SRCBLENDALPHA]=e[0],d[o.H.DESTBLENDCOLOR]=e[1],d[o.H.DESTBLENDALPHA]=e[1];break;case o.H.BLENDFUNCSEPARATE:if(4!==e.length)return console.warn("Pass state are incorrect."),{};d[o.H.SRCBLENDCOLOR]=e[0],d[o.H.SRCBLENDALPHA]=e[2],d[o.H.DESTBLENDCOLOR]=e[1],d[o.H.DESTBLENDALPHA]=e[3];break;case o.H.BLENDEQUATIONSEPARATE:if(2!==e.length)return console.warn("Pass state are incorrect."),{};d[o.H.BLENDEQUATIONCOLOR]=e[0],d[o.H.BLENDEQUATIONALPHA]=e[1];break;default:return console.warn("Pass state is incorrect."),{}}}else{let e="";e="{"===h.value?c.children[1].value.toUpperCase():h.value.toUpperCase();const t=Se(l,e);if(t!==a.m.UNDEF)switch(l){case o.H.SRCBLEND:d[o.H.SRCBLENDCOLOR]=t,d[o.H.SRCBLENDALPHA]=t;break;case o.H.DESTBLEND:d[o.H.DESTBLENDCOLOR]=t,d[o.H.DESTBLENDALPHA]=t;break;case o.H.BLENDEQUATION:d[o.H.BLENDEQUATIONCOLOR]=t,d[o.H.BLENDEQUATIONALPHA]=t;break;default:d[l]=t}}return d}analyzeImportDecl(e,t,n){const r=n.children,s=this.analyzeComplexName(r[r.length-2]);return e.error(n,i.g.ImportedComponentNotExists,{componentName:s}),null}analyzeStructDecl(e,t,n){const r=n.children,i=t.currentScope,s=r[r.length-2].value;t.push(l.SR.k_Struct);let o=[];for(let n=r.length-4;n>=1;n--)"VariableDecl"===r[n].name&&(o=o.concat(this.analyzeVariableDecl(e,t,r[n])));return t.pop(),new R({scope:i,sourceNode:n,name:s,fields:o})}analyzeTypedefDecl(e,t,n){const r=n.children,s=t.currentScope,o=r[1].children[0].value,a=this.analyzeConstTypeDim(e,t,r[2]),l=new fe({scope:s,sourceNode:n,type:a,alias:o});return function(e,t,n){H.findType(n.alias)&&e.error(n.sourceNode,i.g.SystemTypeRedefinition,{typeName:n.name}),t.addTypeAlias(n.type,n.alias)||e.error(n.sourceNode,i.g.TypeRedefinition,{typeName:n.alias})}(e,s,l),l}analyzeTypeDecl(e,t,n){const r=n.children,s=t.currentScope;let o=null;if(2===r.length)o=this.analyzeStructDecl(e,t,r[1]);else{if(4===r.length)return this.analyzeTypedefDecl(e,t,n);e.error(n,i.g.UnsupportedTypeDecl)}const a=new pe({scope:s,sourceNode:n,type:o});return Te(e,s,a),a}analyzeUnknDecl(e,t,n){switch(n.name){case"TechniqueDecl":return[this.analyzeTechniqueDecl(e,t,n)];case"Technique11Decl":return[this.analyzeTechnique11Decl(e,t,n)];case"UseDecl":return this.analyzeUseDecl(e,t,n),null;case"ImportDecl":return[this.analyzeImportDecl(e,t,n)];case"ProvideDecl":return[this.analyzeProvideDecl(e,t,n)];case"TypeDecl":return[this.analyzeTypeDecl(e,t,n)];case"VariableDecl":return this.analyzeVariableDecl(e,t,n);case"VarStructDecl":return this.analyzeVarStructDecl(e,t,n);case"FunctionDecl":(0,r.hu)(t.currentScope==t.globalScope);let o=null;return e.beginFunc(),o=this.analyzeFunctionDecl(e,t,n),e.endFunc(),[o];case"CbufferDecl":return[this.analyzeCbufferDecl(e,t,n)];case"SamplerStateDecl":return[this.analyzeSamplerStateDecl(e,t,n)];case"T_PUNCTUATOR_59":return e.warn(n,s.S.EmptySemicolon),null;default:e.error(n,i.g.UnknownInstruction,{name})}return null}analyzeGlobals(e,t,n){if((0,r.Ft)(n)||(0,r.Ft)(n.root))return null;const i=n.root.children;let s=[];if((0,r.Ft)(i))return[];for(let n=i.length-1;n>=0;n--)s.push(...this.analyzeUnknDecl(e,t,i[n])||[]);return s.filter((e=>!!e))}createContext(e,t){return new ke(e,t)}createProgram(e=null){let t=H.SCOPE;return(0,r.Ft)(e)||(t=e.root.scope),new ye.F$(t)}createProgramEx(e=null){return(0,r.Ft)(e)?this.createProgram():new ye.Jx(e.root.scope)}validate(e,t,n){Me(e,t),t.validate()}parse(e,t){const n=e.uri,r=this.createProgram(t),i=this.createContext(n);let s=null;try{s=this.analyzeGlobals(i,r,e)}catch(e){console.error(e)}const o=new W.N({scope:r.globalScope,instructions:s});this.validate(i,r,o);return{root:o,diagnosticReport:c.g.mergeReports([e.diagnosticReport,i.diagnostics.resolve()]),uri:n}}extend(e,t,n){let r=t.uri,i=this.createProgramEx(t),s=this.createContext(r,n),o=t.root.instructions,a=t.diagnosticReport;if(e){r=e.uri;try{o=o.concat(this.analyzeGlobals(s,i,e))}catch(e){console.error(e)}a=c.g.mergeReports([a,e.diagnosticReport,s.diagnostics.resolve()])}const l=new W.N({scope:i.globalScope,instructions:o});return this.validate(s,i,l),{root:l,diagnosticReport:a,uri:r}}static addTechnique11(e,t,n){let s=n.name;(0,r.Ft)(t.globalScope.findTechnique11(s))?t.globalScope.addTechnique11(n):e.error(n.sourceNode,i.g.TechniqueNameRedefinition,{techName:s})}static addTechnique(e,t,n){let s=n.name;(0,r.Ft)(t.globalScope.findTechnique(s))?t.globalScope.addTechnique(n):e.error(n.sourceNode,i.g.TechniqueNameRedefinition,{techName:s})}static checkTwoOperandExprTypes(e,t,n,o,a=null,l=null,c=null,{isInitializing:u=!1}={}){if(!n||!o)return null;a=a||n.sourceNode,l=l||o.sourceNode;const h=n.isComplex()||o.isComplex(),d=e=>{if(e>=1&&e<=4){let t=[H.T_BOOL,H.T_BOOL2,H.T_BOOL3,H.T_BOOL4];return ce.L.wrapAsConst(t[e-1],H.SCOPE)}return console.error("unsupported code branch"),null};if(n.isNotBaseArray()||o.isNotBaseArray())return null;if(Pe.isAssignmentOperator(t)?(n.writable||u||e.error(a,i.g.InvalidTypeForWriting),o.readable||e.error(l,i.g.InvalidTypeForReading),"="===t||n.readable||e.error(c,i.g.InvalidTypeForReading,{tooltip:"lvalue is not readable"})):(n.readable||e.error(a,i.g.InvalidTypeForReading),o.readable||e.error(l,i.g.InvalidTypeForReading)),h)return"="===t&&f.V5.equals(n,o)?n:Pe.isEqualityOperator(t)&&!n.isComplex()?d(1):null;let p=ce.L.wrap(n.baseType,H.SCOPE),m=ce.L.wrap(o.baseType,H.SCOPE);if(Pe.isBitwiseOperator(t)){switch(H.isIntBasedType(n)||H.isUintBasedType(n)||(H.isBoolBasedType(n)?e.warn(a,s.S.ImplicitTypeConversion,{tooltip:"bool => int"}):e.error(a,i.g.InvalidCastUnknownType,{tooltip:`${n.name} => int`}),p=ce.L.wrap(H.T_INT,H.SCOPE)),H.isIntBasedType(o)||H.isUintBasedType(o)||(H.isBoolBasedType(o)?e.warn(l,s.S.ImplicitTypeConversion,{tooltip:"bool => int"}):e.error(l,i.g.InvalidCastUnknownType,{tooltip:`${o.name} => int`}),m=ce.L.wrap(H.T_INT,H.SCOPE)),t){case"&":case"|":case"^":f.V5.equals(p,o)}return p}if(f.V5.equals(n,xe(o)))return f.V5.equals(n,o)||e.warn(c,s.S.ImplicitTypeConversion,{tooltip:`${n.name} [${t}] ${o.name}`}),Pe.isArithmeticalOperator(t)?!H.isMatrixType(n)||"/"!==t&&"/="!==t?p:null:Pe.isRelationalOperator(t)?H.isScalarType(n)||H.isVectorType(n)?d(n.length):null:Pe.isEqualityOperator(t)?d(n.length):"="===t?p:null;if(Pe.isArithmeticalOperator(t)){const a=H.isScalarType(n)?o.length:H.isScalarType(o)?n.length:Math.min(n.length,o.length),l=H.determMostPreciseBaseType(n,o),u=H.findType(`${l.name}${1===a?"":a}`);if(!u)return(0,r.hu)(!1,`cannot determ result type for "${n.toCode()} ${t} ${o.toCode()}"`),null;if(Pe.isAssignmentOperator(t)&&!f.V5.equals(n,u))return e.error(c,i.g.OperatorCannotBeUsedWithGivenLValue,{}),null;if((u.length<n.length||u.length<o.length)&&e.warn(c,s.S.ImplicitTypeTruncation,{tooltip:`${n.toCode()} ${t} ${o.toCode()} => ${u.toCode()}`}),f.V5.equals(H.determBaseType(n),H.determBaseType(o))||e.warn(c,s.S.ImplicitTypeConversion,{tooltip:`${n.toCode()} ${t} ${o.toCode()} => ${u.toCode()}`}),"*"===t||"*="===t){if(H.isMatrixType(n)&&H.isVectorType(o))return n.length===o.length?m:null;if(H.isMatrixType(o)&&H.isVectorType(n))return n.length===o.length?p:null}return u}if("="===t&&H.isScalarType(o)){if(H.determTypePrecision(n)>H.determTypePrecision(o))return e.warn(c,s.S.ImplicitTypeConversion,{tooltip:`${n.toCode()} ${t} ${o.toCode()} => ${n.toCode()}`}),n;if(H.isIntegerType(n)&&H.isIntegerType(o))return e.warn(c,s.S.ImplicitTypeConversion,{tooltip:`${n.toCode()} ${t} ${o.toCode()} => ${n.toCode()}`}),n}return null}static checkOneOperandExprType(e,t,n,r){const s=r.isComplex(),o=r.isNotBaseArray();if(s||o)return null;if(r.readable||e.error(t,i.g.InvalidTypeForReading),"++"===n||"--"===n)return r.writable||e.error(t,i.g.InvalidTypeForWriting),r;if("!"===n){const e=H.T_BOOL;return f.V5.equals(r,e)?e:null}return H.isBoolBasedType(r)?null:r.baseType}static isAssignmentOperator(e){return"+="===e||"-="===e||"*="===e||"/="===e||"%="===e||"="===e||"|="===e||"&="===e||">>="===e||"<<="===e||"^="===e}static isBitwiseOperator(e){return">>"===e||"<<"===e||"|"===e||"&"===e||"^"===e||"|="===e||"&="===e||">>="===e||"<<="===e||"^="===e}static isArithmeticalOperator(e){return"+"===e||"+="===e||"-"===e||"-="===e||"*"===e||"*="===e||"/"===e||"/="===e||"%"===e||"%="===e}static isRelationalOperator(e){return">"===e||">="===e||"<"===e||"<="===e}static isEqualityOperator(e){return"=="===e||"!="===e}}},"HK/f":(e,t,n)=>{"use strict";n.d(t,{I:()=>x,P:()=>_});var r=n("cOQ3"),i=n("W5eQ"),s=n("jeW/"),o=n("AW2x"),a=n("vIQR"),l=n("j3Uf"),c=n("Jm+q"),u=n("Muaz"),h=n("pGoc");class d extends h.W{constructor({name:e,args:t,...n}){super({instrType:a.rO.k_DrawStmt,...n}),this.name=e,this.args=t}toCode(){return`draw ${this.name};`}}var p=n("A0ZU"),f=n("dmHP");class m extends f.L{constructor({spawnRoutine:e,initRoutine:t,updateRoutine:n,particle:r,capacity:i=-1,...s}){super({instrType:a.rO.k_PartFxDecl,techniqueType:a.vj.k_PartFx,...s}),this.spawnRoutine=e,this.initRoutine=t,this.updateRoutine=n,this.particle=r,this.capacity=i}isValid(){if(!this.spawnRoutine)return console.error("no spawn routine found"),!1;if(!i.V5.equals(this.spawnRoutine.function.def.returnType,p.T_VOID)&&!this.initRoutine)return console.error("init routine must be defined if regular spawner is used"),!1;if(!this.updateRoutine)return console.error("no update routine found"),!1;const e=!!this.particle,t=this.passes&&this.passes.filter((e=>e.isValid())).length>0;return e&&t}}var g=n("Z/0D");class v extends g.f{constructor({sorting:e=!1,instanceCount:t=1,drawMode:n=l.t.k_Auto,prerenderRoutine:r,geometry:i,...s}){super({instrType:a.rO.k_PartFxPass,...s}),this.sorting=e,this.prerenderRoutine=r,this.geometry=i,this.instanceCount=t,this.drawMode=n}get particleInstance(){return(0,r.Ft)(this.prerenderRoutine)?null:this.prerenderRoutine.function.def.params[1].type.subType}isValid(){return!!this.particleInstance&&!!this.prerenderRoutine}}var y=n("sg/T");const b=e=>e?e.type:null;class _ extends c._{constructor(){super(...arguments),this.spawnStmts=[],this.drawStmts=[]}beginPartFxPass(){this.beginPass(),this.particleInstance=null}endPartFxPass(){this.particleInstance=null,this.endPass()}beginPartFx(){this.particleCore=null}endPartFx(){this.particleCore=null}}class x extends c.L{analyzeSpawnStmt(e,t,n){const r=n.children,i=t.currentScope,s=r.slice(-5,-4)[0].value,o=[];for(let n=r.length-7;n>=2;n--)if(","!==r[n].value){const i=this.analyzeExpr(e,t,r[n]);o.push(i)}const a=this.analyzeExpr(e,t,r.slice(-3,-2)[0]),l=new y.B({sourceNode:n,scope:i,name:s,args:o,count:a});return e.spawnStmts.push(l),l}analyzeDrawStmt(e,t,n){const r=n.children,i=t.currentScope,s=r[r.length-2].value,o=[];for(let n=r.length-4;n>=2;n--)if(","!==r[n].value){const i=this.analyzeExpr(e,t,r[n]);o.push(i)}const a=new d({sourceNode:n,scope:i,name:s,args:o}),l=e.funcDef;return e.drawStmts.push({instr:a,ctx:l}),a}analyzeSimpleStmt(e,t,n){const r=n.children;switch(r[r.length-1].name){case"T_KW_SPAWN":return this.analyzeSpawnStmt(e,t,n);case"T_KW_DRAW":return this.analyzeDrawStmt(e,t,n);default:return super.analyzeSimpleStmt(e,t,n)}}analyzePartFXPassDecl(e,t,n){e.beginPartFxPass();const a=n.children,c=t.currentScope,h=this.analyzePassStateBlockForShaders(e,t,a[0]),d=this.analyzePassStateBlock(e,t,a[0]);e.renderStates=d;const f=this.analyzePartFxStateBlock(e,t,a[0]);let m=!!(0,r.jn)(f.sorting)&&f.sorting;const g=f.prerenderRoutine||null,y=f.geometry||null,b=f.instanceCount||1;m&&g&&i.V5.equals(g.function.def.returnType,p.T_VOID)&&(e.warn(n,o.S.PartFx_SortingCannotBeApplied),e.warn(g.function.def.sourceNode,o.S.PartFx_SortingCannotBeApplied));let _=h.pixel,x=h.vertex;if(x){const t=["POSITION","POSITION0"];let r=!1,i=!1;for(const n of x.def.params)r=r||n.type.subType===e.particleInstance,i=i||!!t.find((e=>n.type.hasFieldWithSematics(e)));r||(e.error(n,s.g.PartFx_VertexShaderParametersMismatch,{tooltip:"vertex shader must have a valid material param which is compatible with prerender routine."}),x=_=null)}let w=null;for(let e=0;e<a.length;++e)if("T_NON_TYPE_ID"===a[e].name){let t=a[e].value;w=new u.x({sourceNode:a[e],scope:c,name:t})}let S=l.t.k_Auto;w&&e.drawStmts.find((e=>e.instr.name==w.name))&&(S=l.t.k_Manual);const T=new v({scope:c,sourceNode:n,id:w,sorting:m,geometry:y,instanceCount:b,prerenderRoutine:g,drawMode:S,renderStates:d,pixelShader:_,vertexShader:x});return e.endPartFxPass(),T}analyzePartFxStateBlock(e,t,n){const r=n.children;let i={};for(let n=r.length-2;n>=1;n--)i={...i,...this.analyzePartFXPassProperies(e,t,r[n])};return i}analyzePartFXPassProperies(e,t,n){const i=n.children,o=i[i.length-1].value.toUpperCase(),a=i[i.length-3],l=a.children[a.children.length-1];let c={};if((0,r.Ft)(l.value)||(0,r.Ft)(o))return console.warn("Pass state is incorrect."),c;if("{"===l.value&&a.children.length>3){const e=new Array(Math.ceil((a.children.length-2)/2));for(let t=a.children.length-2,n=0;t>=1;t-=2,n++)e[n]=a.children[t].value.toUpperCase();return console.warn("Pass fx state is incorrect."),c}{let n=null;switch(n="{"===l.value?a.children[1].value.toUpperCase():l.value.toUpperCase(),o){case"InstanceCount".toUpperCase():c.instanceCount=Number(n)||1;break;case"Geometry".toUpperCase():"T_STRING"==l.name?n=n.replace(/^"(.+)"$/,"$1"):console.assert("T_NON_TYPE_ID"===l.name),c.geometry=n.toLowerCase();break;case"Sorting".toUpperCase():(0,r.hu)("TRUE"==n||"FALSE"==n),c.sorting="TRUE"===n;break;case"PrerenderRoutine".toUpperCase():{let n=[{ret:p.T_VOID,args:[e.particleCore,null]},{ret:p.T_VOID,args:[e.particleCore,null,p.T_INT]},{ret:p.T_INT,args:[e.particleCore,null]},{ret:p.T_INT,args:[e.particleCore,null,p.T_INT]}],r=this.analyzeCompileExpr(e,t,l,n);if(!r)break;let i=r.function,o=i.def.params.map((e=>e.type));o.length<2&&(e.error(l,s.g.InvalidCompileFunctionNotValid,{funcName:i.name,tooltip:"'PrerenderRoutine' arguments' count mismatch."}),r=null),o[0].readable&&o[0].subType===e.particleCore&&!o[0].isNotBaseArray()&&(o[1].usages.includes("out")||o[1].usages.includes("inout"))&&o[1].writable&&!o[1].isNotBaseArray()||(e.error(l,s.g.InvalidCompileFunctionNotValid,{funcName:i.name,tooltip:"'PrerenderRoutine' arguments' type mismatch."}),r=null),e.particleInstance=o[1].subType,c.prerenderRoutine=r}}}return c}analyzePartFXBody(e,t,n){let a=[],l=null,c=null,u=null,h=null,d=null;const f=n.children;for(let n=f.length-2;n>0;n--)if("PassState"===f[n].name){let a=f[n];switch(a.children[3].value.toUpperCase()){case"Capacity".toUpperCase():{const e=a.children[1].children[0].value;(0,r.hu)((0,r.hj)(Number(e))),d=Number(e)||-1,d=64*Math.floor((d+63)/64);break}case"SpawnRoutine".toUpperCase():{let n=[{ret:p.T_INT,args:[]},{ret:p.T_VOID,args:[/.*/]},{ret:p.T_VOID,args:[]}],r=a.children[1].children[0];l=this.analyzeCompileExpr(e,t,r,n);const i=l.function.def.params;i.length>0&&(i[0].type.usages.includes("inout")||e.warn(i[0].type.sourceNode,o.S.PartFx_EmitterPersistentDataMustBeMarkedAsInout))}break;case"InitRoutine".toUpperCase():{let n=[{ret:p.T_VOID,args:[null,/u?int/]},{ret:p.T_VOID,args:[null,/u?int/,/u?int/]},{ret:p.T_VOID,args:[null]}],r=a.children[1].children[0];if(c=this.analyzeCompileExpr(e,t,r,n),!c)break;let i=c.function,o=i.def.params[0].type;(!o.usages.includes("out")&&!o.usages.includes("inout")||o.isNotBaseArray())&&(e.error(r,s.g.InvalidCompileFunctionNotValid,{funcName:i.name,tooltip:"'InitRoutine' arguments' type mismatch."}),c=null),h&&o.subType!==h&&(e.error(r,s.g.InvalidCompileFunctionNotValid,{funcName:i.name,tooltip:"'InitRoutine' arguments' type mismatch."}),u=null),h=o.subType}break;case"UpdateRoutine".toUpperCase():{let n=[{ret:p.T_BOOL,args:[null,p.T_INT]},{ret:p.T_BOOL,args:[null]}],r=a.children[1].children[0];if(u=this.analyzeCompileExpr(e,t,r,n),!u)break;const o=u.function,l=o.def,c=l.params;(c.length<1||c.length>2)&&(e.error(r,s.g.InvalidCompileFunctionNotValid,{funcName:o.name,tooltip:"'UpdateRoutine' arguments' type mismatch."}),u=null);let d=c[0].type;if((!d.usages.includes("out")&&!d.usages.includes("inout")||d.isNotBaseArray())&&(e.error(r,s.g.InvalidCompileFunctionNotValid,{funcName:o.name,tooltip:"'UpdateRoutine' arguments' type mismatch."}),u=null),h&&d.subType!==h&&(e.error(r,s.g.InvalidCompileFunctionNotValid,{funcName:o.name,tooltip:"'UpdateRoutine' arguments' type mismatch."}),u=null),i.V5.equals(l.returnType,p.T_BOOL)||(e.error(r,s.g.InvalidCompileFunctionNotValid,{funcName:o.name,tooltip:"'UpdateRoutine' return type mismatch. 'boolean' is expected."}),u=null),!u)break;h=d.subType}}}e.particleCore=h;const m=[];for(let n=f.length-2;n>0;n--)switch(f[n].name){case"PassDecl":{if("PresetDecl"===f[n].children[0].name){m.push(this.analyzePresetDecl(e,t,f[n].children[0]));break}let i=this.analyzePartFXPassDecl(e,t,f[n]);i.isValid()||e.warn(i.id&&i.id.sourceNode||f[n],o.S.IncompletePass,{techniqueName:i.name,tooltip:"The pass is not completed. Not all required parameters are specified."}),(0,r.hu)(!(0,r.Ft)(i)),a.push(i)}}return{passes:a,spawnRoutine:l,initRoutine:c,updateRoutine:u,particle:h,capacity:d,presets:m}}analyzePartFXDecl(e,t,n){const r=n.children,a=this.analyzeComplexName(r[r.length-2]),l=(r[r.length-2].children.length,t.currentScope);let c=null,u=null,h=null;e.beginPartFx();for(let n=r.length-3;n>=0;n--)switch(r[n].name){case"Annotation":c=this.analyzeAnnotation(e,t,r[n]);break;case"Semantic":u=this.analyzeSemantic(r[n]);break;case"PartFxBody":h=this.analyzePartFXBody(e,t,r[n])}for(const t of e.drawStmts){const{instr:n,ctx:r}=t;h.passes.find((e=>e.id.name==n.name))||e.warn(n.sourceNode,o.S.PartFx_RenderPassWasNotFound,{techniqueName:a,tooltip:`The technique doesn't have pass with name <${n.name}>`});const l=r.params[0].type;i.V5.equals(l,e.particleCore)&&l.readable||e.error(n.sourceNode,s.g.PartFx_DrawOpOnlyAllowedWithinUpdateRoutine,{tooltip:"Draw operator only allowed within update routine"})}e.endPartFx();const d=new m({sourceNode:n,name:a,semantic:u,annotation:c,scope:l,...h});return d.isValid()||e.warn(r[r.length-2],o.S.IncompleteTechnique,{techniqueName:d.name,tooltip:"The technique is not completed. Not all required parameters are specified."}),x.addTechnique(e,t,d),d}analyzeUnknDecl(e,t,n){return"PartFxDecl"===n.name?[this.analyzePartFXDecl(e,t,n)]:super.analyzeUnknDecl(e,t,n)}createContext(e){return new _(e)}validate(e,t,n){super.validate(e,t,n);const i=t.globalScope;if(!n.instructions)return;const o=n.instructions.filter((e=>e.instructionType===a.rO.k_PartFxDecl));for(const t of e.spawnStmts){const n=!1;if((0,r.hu)(!n,"unsupported"),!n){let n=null;for(const e of o){let r=[[/u?int/,/u?int/],[/u?int/],[]].map((n=>[e.particle,...n,...t.args.map(b)]));for(const e of r)if(n=i.findFunction(t.name,e),n)break;if(n)break}n||e.error(t.sourceNode,s.g.PartFx_InvalidSpawnStmtInitializerNotFound,{tooltip:"Invalid spawn statement. Effect initializer not found."})}}}}},zHDc:(e,t,n)=>{"use strict";n.d(t,{F$:()=>l,Jx:()=>c,sX:()=>a});var r=n("cOQ3"),i=n("vIQR"),s=n("z3nI"),o=n("W5eQ");class a{constructor(e){let t,n,r;if(e instanceof a){let s=e;({type:t=i.SR.k_Default,parent:r=null,strictMode:n=!1}=s),this.variables={...s.variables},this.types={...s.types},this.functions={...s.functions},this.techniques={...s.techniques},this.techniques11={...s.techniques11},this.typeTemplates={...s.typeTemplates},this.cbuffers={...s.cbuffers}}else{let s=e;({type:t=i.SR.k_Default,parent:r=null,strictMode:n=!1}=s),this.variables={},this.types={},this.functions={},this.techniques={},this.techniques11={},this.typeTemplates={},this.cbuffers={}}this.type=t,this.parent=r,this.strictMode=n}isStrict(){return this.filter((e=>e.strictMode))}findVariable(e){return this.filter((t=>t.variables[e]||null))}findTypeTemplate(e){return this.filter((t=>t.typeTemplates[e]||null))}findType(e){return this.filter((t=>t.types[e]||null))}findFunction(e,t=null){return this.filter((n=>o.fn.matchList(n.functions[e],t)))}findTechnique(e){return this.filter((t=>t.techniques[e]||null))}findTechnique11(e){return this.filter((t=>t.techniques11[e]||null))}findCbuffer(e){return this.filter((t=>t.cbuffers[e]||null))}findFunctionInScope(e){let t=o.fn.matchList(this.functions[e.name],e.def.params.map((e=>e?e.type:null)));return(0,r.hu)(void 0!==t),t}addVariable(e){let t=this.variables,n=e.name;return!this.variables[n]&&(t[n]=e,(0,r.hu)(e.scope===this),!0)}addTypeTemplate(e){return!(0,r.$V)(this.typeTemplates[e.name])&&(this.typeTemplates[e.name]=e,!0)}addType(e){return!this.types[e.name]&&(this.types[e.name]=e,console.assert(e.scope===this),!0)}addTypeAlias(e,t){let n=null,r=null;(0,s.HD)(e)?(n=e,r=this.findType(n)):(r=e,n=r.name);return!this.findType(t)&&(!!r&&(!!this.findType(n)&&(this.types[t]=r,!0)))}addFunction(e){(0,r.hu)(this.type<=i.SR.k_Global),(0,r.hu)(e.scope===this);let t=this.functions,n=e.name;t[n]=t[n]||[];const s=t[n];let o=this.findFunctionInScope(e);if(o){(0,r.hu)(!(0,r.Ft)(e.impl)),(0,r.hu)((0,r.Ft)(o.impl));let t=s.indexOf(o);s[t]=e}else s.push(e);return!0}addTechnique(e){return(0,r.hu)(this.type<=i.SR.k_Global),!this.techniques[e.name]&&(this.techniques[e.name]=e,(0,r.hu)(e.scope===this),!0)}addTechnique11(e){return(0,r.hu)(this.type<=i.SR.k_Global),!this.techniques11[e.name]&&(this.techniques11[e.name]=e,(0,r.hu)(e.scope===this),!0)}addCbuffer(e){return(0,r.hu)(this.type<=i.SR.k_Global),!this.cbuffers[e.name]&&(this.cbuffers[e.name]=e,(0,r.hu)(e.scope===this),!0)}filter(e){let t=this;for(;!(0,r.Ft)(t);){let n=e(t);if(!(0,r.Ft)(n))return n;t=t.parent}return null}}class l{constructor(e){if(!(0,r.Ft)(e)){let t=i.SR.k_Global;this.globalScope=new a({parent:e,type:t}),this.currentScope=this.globalScope}}validate(){(0,r.hu)(this.currentScope===this.globalScope)}push(e=i.SR.k_Default){(0,r.hu)(null!==this.currentScope),(0,r.hu)(e>=i.SR.k_Default);let t=this.currentScope,n=new a({parent:t,type:e});this.currentScope=n}pop(){(0,r.hu)(null!==this.currentScope),this.currentScope=this.currentScope.parent,(0,r.hu)(null!==this.currentScope)}}class c extends l{constructor(e){super(null),this.globalScope=new a(e),this.currentScope=this.globalScope}}},A0ZU:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SCOPE:()=>H,T_BLEND_STATE:()=>X,T_BOOL:()=>fe,T_BOOL2:()=>me,T_BOOL2X2:()=>ye,T_BOOL3:()=>ge,T_BOOL3X3:()=>be,T_BOOL4:()=>ve,T_BOOL4X4:()=>_e,T_COMPUTE_SHADER:()=>Ne,T_DEPTH_STENCIL_STATE:()=>Y,T_FLOAT:()=>J,T_FLOAT2:()=>$,T_FLOAT2X2:()=>se,T_FLOAT2X3:()=>oe,T_FLOAT2X4:()=>ae,T_FLOAT3:()=>Q,T_FLOAT3X2:()=>le,T_FLOAT3X3:()=>ce,T_FLOAT3X4:()=>ue,T_FLOAT4:()=>ee,T_FLOAT4X2:()=>he,T_FLOAT4X3:()=>de,T_FLOAT4X4:()=>pe,T_GEOMETRY_SHADER:()=>Ie,T_HALF:()=>te,T_HALF2:()=>ne,T_HALF3:()=>re,T_HALF4:()=>ie,T_INT:()=>xe,T_INT2:()=>we,T_INT2X2:()=>ke,T_INT3:()=>Se,T_INT3X3:()=>Pe,T_INT4:()=>Te,T_INT4X4:()=>Re,T_NULL:()=>q,T_PIXEL_SHADER:()=>Oe,T_SAMPLER_STATE:()=>K,T_STRING:()=>W,T_UINT:()=>Ee,T_UINT2:()=>Me,T_UINT3:()=>Ae,T_UINT4:()=>Ce,T_VERTEX_SHADER:()=>Le,T_VOID:()=>j,determBaseType:()=>De,determMostPreciseBaseType:()=>Be,determTypePrecision:()=>ze,findFunction:()=>B,findTechnique:()=>U,findType:()=>F,findVariable:()=>z,hasTechnique:()=>Z,hasType:()=>V,hasVariable:()=>G,isBase:()=>o.VC,isBlendState:()=>o.g5,isBoolBasedType:()=>o.a2,isBuffer:()=>o.zH,isDepthStencilState:()=>o.b8,isFloatBasedType:()=>o.v8,isFloatType:()=>o.QN,isHalfBasedType:()=>o.uO,isIntBasedType:()=>o.PV,isIntegerType:()=>o.YF,isMatrixType:()=>o.j4,isPipelineState:()=>o.tj,isRasterizerState:()=>o.$E,isSamplerState:()=>o.u2,isScalarType:()=>o.KA,isTexture:()=>o.DE,isUAV:()=>o.jZ,isUintBasedType:()=>o.Mf,isVectorType:()=>o.C1,resolveRegister:()=>o.vT,typePrecisionAsType:()=>Ue});var r=n("cOQ3"),i=n("zHDc"),s=n("vIQR"),o=n("BeyE");var a=n("6EL/"),l=n("W5eQ");const c=class{constructor(e){this.name=e}produceType(e,t){return null}typeName(e){return e&&e.length>0?`${this.name}<${e.map((e=>e.name)).join(", ")}>`:this.name}};var u=n("Muaz"),h=n("k9uP"),d=n("F8nM"),p=n("O1LO"),f=n("/VpG");const m=class extends c{constructor(){super("AppendStructuredBuffer")}produceType(e,t){if(1!==t.length)return null;const n=this.typeName(t),r=t[0],i=l.NQ.UNDEFINE_LENGTH,s=[];{const n=[];{const r=new a.L({type:t[0],scope:e}),i=new u.x({scope:e,name:"Append"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});n.push(o)}const r=new a.L({type:e.findType("void"),scope:e}),i=new u.x({scope:e,name:"Append"}),o=new p.Y({scope:e,returnType:r,id:i,paramList:n}),l=new d.h({scope:e,def:o,pixel:!1,vertex:!1});s.push(l)}return new f.F({scope:e,name:n,elementType:r,length:i,fields:[],size:-1,methods:s})}};const g=class extends c{constructor(){super("Buffer")}produceType(e,t){if(1!==t.length)return null;if(!(0,o.VC)(t[0]))return null;const n=this.typeName(t),r=t[0],i=l.NQ.UNDEFINE_LENGTH;return new f.F({scope:e,name:n,elementType:r,length:i,fields:[],size:-1,methods:[]})}};const v=class extends c{constructor(){super("RWBuffer")}produceType(e,t){if(1!==t.length)return null;if(!(0,o.VC)(t[0]))return null;const n=this.typeName(t),r=t[0],i=l.NQ.UNDEFINE_LENGTH;return new f.F({scope:e,name:n,elementType:r,length:i,fields:[],size:-1,methods:[]})}};const y=class extends c{constructor(){super("RWStructuredBuffer")}produceType(e,t){if(1!==t.length)return null;const n=this.typeName(t),r=t[0],i=l.NQ.UNDEFINE_LENGTH,s=[];{let t=new a.L({type:e.findType("uint"),scope:e}),n=new u.x({scope:e,name:"IncrementCounter"}),r=new p.Y({scope:e,returnType:t,id:n}),i=new d.h({scope:e,def:r,pixel:!1,vertex:!1});s.push(i)}{let t=new a.L({type:e.findType("uint"),scope:e}),n=new u.x({scope:e,name:"DecrementCounter"}),r=new p.Y({scope:e,returnType:t,id:n}),i=new d.h({scope:e,def:r,pixel:!1,vertex:!1});s.push(i)}return new f.F({scope:e,name:n,elementType:r,length:i,fields:[],size:-1,methods:s})}};class b extends c{constructor(){super(b.TYPE_NAME)}produceType(e,t){if(t.length>1)return null;const n=t.length>0?t[0]:e.findType("float4");if(!(0,o.VC)(n))return null;const r=this.typeName(t),i=n,s=l.NQ.UNDEFINE_LENGTH;return new f.F({scope:e,name:r,elementType:i,length:s,fields:[],size:-1,methods:[]})}}b.TYPE_NAME="RWTexture1D";const _=b;class x extends c{constructor(){super(x.TYPE_NAME)}produceType(e,t){if(t.length>1)return null;const n=t.length>0?t[0]:e.findType("float4");if(!(0,o.VC)(n))return null;const r=this.typeName(t),i=n,s=l.NQ.UNDEFINE_LENGTH;return new f.F({scope:e,name:r,elementType:i,length:s,fields:[],size:-1,methods:[]})}}x.TYPE_NAME="RWTexture2D";const w=x;const S=class extends c{constructor(){super("StructuredBuffer")}produceType(e,t){if(1!==t.length)return null;const n=this.typeName(t),r=t[0],i=l.NQ.UNDEFINE_LENGTH;return new f.F({scope:e,name:n,elementType:r,length:i,fields:[],size:-1,methods:[]})}};class T extends c{constructor(){super(T.TYPE_NAME)}produceType(e,t){if(t.length>1)return null;const n=t.length>0?t[0]:e.findType("float4");if(!(0,o.VC)(n))return null;const r=this.typeName(t),i=n,s=l.NQ.UNDEFINE_LENGTH,c=[];{const t=[];{let n=e.findType("SamplerState");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"samplerState"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float3");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"uv"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float2");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"dx"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float2");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"dy"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"SampleGrad"}),s=new p.Y({scope:e,returnType:r,id:i,paramList:t}),o=new d.h({scope:e,def:s,pixel:!0,vertex:!0});c.push(o)}return new f.F({scope:e,name:r,elementType:i,length:s,fields:[],size:-1,methods:c})}}T.TYPE_NAME="Texture2DArray";const E=T;class M extends c{constructor(){super(M.TYPE_NAME)}produceType(e,t){if(t.length>1)return null;const n=t.length>0?t[0]:e.findType("float4");if(!(0,o.VC)(n))return null;const r=this.typeName(t),i=n,s=l.NQ.UNDEFINE_LENGTH,c=[];{const t=[];{let n=e.findType("SamplerState");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"samplerState"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float2");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"uv"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"Sample"}),s=new p.Y({scope:e,returnType:r,id:i,paramList:t}),o=new d.h({scope:e,def:s,pixel:!0,vertex:!0});c.push(o)}{const t=[];{let n=e.findType("SamplerState");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"samplerState"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float2");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"uv"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}const r=`${n.isArray()?n.arrayElementType.name:n.name}4`;let i=new a.L({type:e.findType(r),scope:e}),s=new u.x({scope:e,name:"Gather"}),o=new p.Y({scope:e,returnType:i,id:s,paramList:t}),l=new d.h({scope:e,def:o,pixel:!0,vertex:!0});c.push(l)}{const t=[];{let n=e.findType("SamplerState");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"samplerState"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float2");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"uv"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"lod"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"SampleLevel"}),s=new p.Y({scope:e,returnType:r,id:i,paramList:t}),o=new d.h({scope:e,def:s,pixel:!0,vertex:!0});c.push(o)}{const t=[];{let n=e.findType("SamplerState");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"samplerState"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float2");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"uv"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float2");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"dx"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float2");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"dy"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"SampleGrad"}),s=new p.Y({scope:e,returnType:r,id:i,paramList:t}),o=new d.h({scope:e,def:s,pixel:!0,vertex:!0});c.push(o)}{const t=[];{let n=e.findType("uint");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"mipLevel"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("uint");const r=new a.L({type:n,scope:e,usages:["out"]}),i=new u.x({scope:e,name:"width"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("uint");const r=new a.L({type:n,scope:e,usages:["out"]}),i=new u.x({scope:e,name:"height"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let n=new a.L({type:e.findType("void"),scope:e}),r=new u.x({scope:e,name:"GetDimensions"}),i=new p.Y({scope:e,returnType:n,id:r,paramList:t}),s=new d.h({scope:e,def:i,pixel:!1,vertex:!1});c.push(s)}{const t=[];{let n=e.findType("int3");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"location"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let n=new a.L({type:i,scope:e}),r=new u.x({scope:e,name:"Load"}),s=new p.Y({scope:e,returnType:n,id:r,paramList:t}),o=new d.h({scope:e,def:s,pixel:!1,vertex:!1});c.push(o)}return new f.F({scope:e,name:r,elementType:i,length:s,fields:[],size:-1,methods:c})}}M.TYPE_NAME="Texture2D";const A=M;class C extends c{constructor(){super(C.TYPE_NAME)}produceType(e,t){if(t.length>1)return null;const n=t.length>0?t[0]:e.findType("float4");if(!(0,o.VC)(n))return null;const r=this.typeName(t),i=n,s=l.NQ.UNDEFINE_LENGTH,c=[];{const t=[];{let n=e.findType("SamplerState");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"samplerState"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float3");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"uv"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"Sample"}),s=new p.Y({scope:e,returnType:r,id:i,paramList:t}),o=new d.h({scope:e,def:s,pixel:!0,vertex:!0});c.push(o)}return new f.F({scope:e,name:r,elementType:i,length:s,fields:[],size:-1,methods:c})}}C.TYPE_NAME="Texture3D";const k=C;class P extends c{constructor(){super(P.TYPE_NAME)}produceType(e,t){if(t.length>1)return null;const n=t.length>0?t[0]:e.findType("float4");if(!(0,o.VC)(n))return null;const r=this.typeName(t),i=n,s=l.NQ.UNDEFINE_LENGTH;return new f.F({scope:e,name:r,elementType:i,length:s,fields:[],size:-1,methods:[]})}}P.TYPE_NAME="TextureCubeArray";const R=P;class L extends c{constructor(){super(L.TYPE_NAME)}produceType(e,t){if(t.length>1)return null;const n=t.length>0?t[0]:e.findType("float4");if(!(0,o.VC)(n))return null;const r=this.typeName(t),i=n,s=l.NQ.UNDEFINE_LENGTH,c=[];{const t=[];{let n=e.findType("SamplerState");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"samplerState"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float3");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"uv"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"Sample"}),s=new p.Y({scope:e,returnType:r,id:i,paramList:t}),o=new d.h({scope:e,def:s,pixel:!0,vertex:!0});c.push(o)}{const t=[];{let n=e.findType("SamplerState");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"samplerState"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float3");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"uv"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("float");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"lod"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"SampleLevel"}),s=new p.Y({scope:e,returnType:r,id:i,paramList:t}),o=new d.h({scope:e,def:s,pixel:!0,vertex:!0});c.push(o)}return new f.F({scope:e,name:r,elementType:i,length:s,fields:[],size:-1,methods:c})}}L.TYPE_NAME="TextureCube";const O=L;var N=n("s0og");const I=class extends c{constructor(){super("TriMesh")}produceType(e,t){if(1!==t.length)return null;const n=this.typeName(t),r=t[0],i=l.NQ.UNDEFINE_LENGTH,s=[];{const t=[];{let n=e.findType("uint");const r=new a.L({type:n,scope:e,usages:["out"]}),i=new u.x({scope:e,name:"vertCount"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{let n=e.findType("uint");const r=new a.L({type:n,scope:e,usages:["out"]}),i=new u.x({scope:e,name:"faceCount"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let n=new a.L({type:e.findType("void"),scope:e}),r=new u.x({scope:e,name:"GetDimensions"}),i=new p.Y({scope:e,returnType:n,id:r,paramList:t}),o=new d.h({scope:e,def:i,pixel:!1,vertex:!1});s.push(o)}{const t=[];{let n=e.findType("uint");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"vert"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let n=new a.L({type:r,scope:e}),i=new u.x({scope:e,name:"LoadVertex"}),o=new p.Y({scope:e,returnType:n,id:i,paramList:t}),l=new d.h({scope:e,def:o,pixel:!1,vertex:!1});s.push(l)}{const t=[];{let n=e.findType("uint");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"face"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}let n=new a.L({type:e.findType("uint3"),scope:e}),r=new u.x({scope:e,name:"LoadFace"}),i=new p.Y({scope:e,returnType:n,id:r,paramList:t}),o=new d.h({scope:e,def:i,pixel:!1,vertex:!1});s.push(o)}{const t=[];{let n=e.findType("uint");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"face"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{const{base:n,signed:r,heximal:i,exp:s}=(0,o.F2)("6u"),l=new N.v({scope:e,base:n,exp:s,signed:r,heximal:i}),c=e.findType("uint"),d=new a.L({type:c,scope:e,arrayIndex:l,usages:["out"]}),p=new u.x({scope:e,name:"adjacency"}),f=h.K.k_Argument|h.K.k_Local,m=new h.D({scope:e,type:d,id:p,usageFlags:f});t.push(m)}let n=new a.L({type:e.findType("void"),scope:e}),r=new u.x({scope:e,name:"LoadGSAdjacency"}),i=new p.Y({scope:e,returnType:n,id:r,paramList:t}),l=new d.h({scope:e,def:i,pixel:!1,vertex:!1});s.push(l)}{const t=[];{let n=e.findType("uint");const r=new a.L({type:n,scope:e}),i=new u.x({scope:e,name:"face"}),s=h.K.k_Argument|h.K.k_Local,o=new h.D({scope:e,type:r,id:i,usageFlags:s});t.push(o)}{const{base:n,signed:r,heximal:i,exp:s}=(0,o.F2)("3u"),l=new N.v({scope:e,base:n,exp:s,signed:r,heximal:i}),c=e.findType("uint"),d=new a.L({type:c,scope:e,arrayIndex:l,usages:["out"]}),p=new u.x({scope:e,name:"adjacency"}),f=h.K.k_Argument|h.K.k_Local,m=new h.D({scope:e,type:d,id:p,usageFlags:f});t.push(m)}let n=new a.L({type:e.findType("void"),scope:e}),r=new u.x({scope:e,name:"LoadFaceAdjacency"}),i=new p.Y({scope:e,returnType:n,id:r,paramList:t}),l=new d.h({scope:e,def:i,pixel:!1,vertex:!1});s.push(l)}return new f.F({scope:e,name:n,elementType:r,length:i,fields:[],size:-1,methods:s})}};const D=new i.sX({type:s.SR.k_System});!function(e){(0,o.$R)(e,"void",0),(0,o.$R)(e,"int",4),(0,o.$R)(e,"uint",4),(0,o.$R)(e,"bool",4),(0,o.$R)(e,"float",4),(0,o.$R)(e,"string",4),(0,o.$R)(e,"null_t",4),(0,o.zo)(e,"float","half"),console.assert(!1===o.z)}(D),function(e){const t=(0,o.ZY)("xy"),n=(0,o.ZY)("xyz"),r=(0,o.ZY)("xyzw"),i=(0,o.ZY)("rg"),s=(0,o.ZY)("rgb"),a=(0,o.ZY)("rgba"),l=(0,o.ZY)("st"),c=(0,o.ZY)("stp"),u=(0,o.ZY)("stpq");let h=(0,o.JP)(e,"float"),d=(0,o.JP)(e,"half"),p=(0,o.JP)(e,"int"),f=(0,o.JP)(e,"uint"),m=(0,o.JP)(e,"bool"),g=(0,o.$R)(e,"float2",-1,h,2),v=(0,o.$R)(e,"float3",-1,h,3),y=(0,o.$R)(e,"float4",-1,h,4);o.z||((0,o.zo)(e,"float2","half2"),(0,o.zo)(e,"float3","half3"),(0,o.zo)(e,"float4","half4"));let b=(0,o.$R)(e,"int2",-1,p,2),_=(0,o.$R)(e,"int3",-1,p,3),x=(0,o.$R)(e,"int4",-1,p,4),w=(0,o.$R)(e,"uint2",-1,f,2),S=(0,o.$R)(e,"uint3",-1,f,3),T=(0,o.$R)(e,"uint4",-1,f,4),E=(0,o.$R)(e,"bool2",-1,m,2),M=(0,o.$R)(e,"bool3",-1,m,3),A=(0,o.$R)(e,"bool4",-1,m,4);{let n=[];(0,o.Fu)(e,n,t,"float"),(0,o.Fu)(e,n,i,"float"),(0,o.Fu)(e,n,l,"float"),n.forEach((e=>g.addField(e)))}{let t=[];(0,o.Fu)(e,t,n,"float"),(0,o.Fu)(e,t,s,"float"),(0,o.Fu)(e,t,c,"float"),t.forEach((e=>v.addField(e)))}{let t=[];(0,o.Fu)(e,t,r,"float"),(0,o.Fu)(e,t,a,"float"),(0,o.Fu)(e,t,u,"float"),t.forEach((e=>y.addField(e)))}if(o.z){let h=(0,o.$R)(e,"half2",-1,d,2),p=(0,o.$R)(e,"half3",-1,d,3),f=(0,o.$R)(e,"half4",-1,d,4);{let n=[];(0,o.Fu)(e,n,t,"half"),(0,o.Fu)(e,n,i,"half"),(0,o.Fu)(e,n,l,"half"),n.forEach((e=>h.addField(e)))}{let t=[];(0,o.Fu)(e,t,n,"half"),(0,o.Fu)(e,t,s,"half"),(0,o.Fu)(e,t,c,"half"),t.forEach((e=>p.addField(e)))}{let t=[];(0,o.Fu)(e,t,r,"half"),(0,o.Fu)(e,t,a,"half"),(0,o.Fu)(e,t,u,"half"),t.forEach((e=>f.addField(e)))}}{let n=[];(0,o.Fu)(e,n,t,"int"),(0,o.Fu)(e,n,i,"int"),(0,o.Fu)(e,n,l,"int"),n.forEach((e=>b.addField(e)))}{let t=[];(0,o.Fu)(e,t,n,"int"),(0,o.Fu)(e,t,s,"int"),(0,o.Fu)(e,t,c,"int"),t.forEach((e=>_.addField(e)))}{let t=[];(0,o.Fu)(e,t,r,"int"),(0,o.Fu)(e,t,a,"int"),(0,o.Fu)(e,t,u,"int"),t.forEach((e=>x.addField(e)))}{let n=[];(0,o.Fu)(e,n,t,"uint"),(0,o.Fu)(e,n,i,"uint"),(0,o.Fu)(e,n,l,"uint"),n.forEach((e=>w.addField(e)))}{let t=[];(0,o.Fu)(e,t,n,"uint"),(0,o.Fu)(e,t,s,"uint"),(0,o.Fu)(e,t,c,"uint"),t.forEach((e=>S.addField(e)))}{let t=[];(0,o.Fu)(e,t,r,"uint"),(0,o.Fu)(e,t,a,"uint"),(0,o.Fu)(e,t,u,"uint"),t.forEach((e=>T.addField(e)))}{let n=[];(0,o.Fu)(e,n,t,"bool"),(0,o.Fu)(e,n,i,"bool"),(0,o.Fu)(e,n,l,"bool"),n.forEach((e=>E.addField(e)))}{let t=[];(0,o.Fu)(e,t,n,"bool"),(0,o.Fu)(e,t,s,"bool"),(0,o.Fu)(e,t,c,"bool"),t.forEach((e=>M.addField(e)))}{let t=[];(0,o.Fu)(e,t,r,"bool"),(0,o.Fu)(e,t,a,"bool"),(0,o.Fu)(e,t,u,"bool"),t.forEach((e=>A.addField(e)))}}(D),function(e){let t=(0,o.JP)(e,"float2"),n=(0,o.JP)(e,"float3"),r=(0,o.JP)(e,"float4"),i=(0,o.JP)(e,"int2"),s=(0,o.JP)(e,"int3"),a=(0,o.JP)(e,"int4"),l=((0,o.JP)(e,"uint2"),(0,o.JP)(e,"uint3"),(0,o.JP)(e,"uint4"),(0,o.JP)(e,"bool2")),c=(0,o.JP)(e,"bool3"),u=(0,o.JP)(e,"bool4");(0,o.$R)(e,"float2x2",-1,t,2),(0,o.$R)(e,"float2x3",-1,n,2),(0,o.$R)(e,"float2x4",-1,r,2),(0,o.$R)(e,"float3x2",-1,t,3),(0,o.$R)(e,"float3x3",-1,n,3),(0,o.$R)(e,"float3x4",-1,r,3),(0,o.$R)(e,"float4x2",-1,t,4),(0,o.$R)(e,"float4x3",-1,n,4),(0,o.$R)(e,"float4x4",-1,r,4),(0,o.$R)(e,"int2x2",-1,i,2),(0,o.$R)(e,"int2x3",-1,s,2),(0,o.$R)(e,"int2x4",-1,a,2),(0,o.$R)(e,"int3x2",-1,i,3),(0,o.$R)(e,"int3x3",-1,s,3),(0,o.$R)(e,"int3x4",-1,a,3),(0,o.$R)(e,"int4x2",-1,i,4),(0,o.$R)(e,"int4x3",-1,s,4),(0,o.$R)(e,"int4x4",-1,a,4),(0,o.$R)(e,"bool2x2",-1,l,2),(0,o.$R)(e,"bool2x3",-1,c,2),(0,o.$R)(e,"bool2x4",-1,u,2),(0,o.$R)(e,"bool3x2",-1,l,3),(0,o.$R)(e,"bool3x3",-1,c,3),(0,o.$R)(e,"bool3x4",-1,u,3),(0,o.$R)(e,"bool4x2",-1,l,4),(0,o.$R)(e,"bool4x3",-1,c,4),(0,o.$R)(e,"bool4x4",-1,u,4)}(D),function(e){(0,o.$R)(e,"SamplerState",4),(0,o.$R)(e,"SamplerComparisonState",4),(0,o.$R)(e,"DepthStencilState",4),(0,o.$R)(e,"BlendState",4),(0,o.$R)(e,"RasterizerState",4),(0,o.$R)(e,"VertexShader",4),(0,o.$R)(e,"PixelShader",4),(0,o.$R)(e,"ComputeShader",4),(0,o.$R)(e,"GeometryShader",4),(0,o.$R)(e,"HullShader",4),(0,o.$R)(e,"DomainShader",4),e.addTypeTemplate(new g),e.addTypeTemplate(new v),e.addTypeTemplate(new y),e.addTypeTemplate(new m),e.addTypeTemplate(new S),e.addTypeTemplate(new I),e.addTypeTemplate(new _),e.addTypeTemplate(new w),e.addTypeTemplate(new A),e.addTypeTemplate(new k),e.addTypeTemplate(new O),e.addTypeTemplate(new E),e.addTypeTemplate(new R);const t=e.findTypeTemplate(A.TYPE_NAME).produceType(e,[]);e.addType(t);const n=e.findTypeTemplate(O.TYPE_NAME).produceType(e,[]);e.addType(n);const r=e.findTypeTemplate(k.TYPE_NAME).produceType(e,[]);e.addType(r);const i=e.findTypeTemplate(E.TYPE_NAME).produceType(e,[]);e.addType(i);const s=e.findTypeTemplate(R.TYPE_NAME).produceType(e,[]);e.addType(s);const a=e.findTypeTemplate(_.TYPE_NAME).produceType(e,[]);e.addType(a);const l=e.findTypeTemplate(w.TYPE_NAME).produceType(e,[]);e.addType(l)}(D),function(e){(0,o.JK)(e,"dot","float",[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"mul",o.cP,[o.cP,o.cP],["float","int"]),(0,o.JK)(e,"mul",o.cP,[o.cP,"float"],["float2","float3","float4","float2x2","float3x3","float4x4"]),(0,o.JK)(e,"mul",o.cP,["float",o.cP],["float2","float3","float4","float2x2","float3x3","float4x4"]),(0,o.JK)(e,"mul","float4",["float4",o.cP],["float4x4","float4x3","float4x2"]),(0,o.JK)(e,"mul","float3",["float3",o.cP],["float3x4","float3x3","float3x2"]),(0,o.JK)(e,"mul","float2",["float2",o.cP],["float2x4","float2x3","float2x2"]),(0,o.JK)(e,"mul","float4",[o.cP,"float4"],["float4x4","float3x4","float2x4"]),(0,o.JK)(e,"mul","float3",[o.cP,"float3"],["float4x3","float3x3","float2x3"]),(0,o.JK)(e,"mul","float2",[o.cP,"float2"],["float4x2","float3x2","float2x2"]),(0,o.JK)(e,"mod","float",["float","float"],null),(0,o.JK)(e,"floor",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"round",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"ceil",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"abs",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"abs",o.cP,[o.cP],["int","int2","int3","int4"]),(0,o.JK)(e,"sign",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"sign",o.cP,[o.cP],["int","int2","int3","int4"]),(0,o.JK)(e,"normalize",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"length","float",[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"cross","float3",["float3","float3"],null),(0,o.JK)(e,"reflect",o.cP,[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"max",o.cP,[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"max",o.cP,[o.cP,o.cP],["int","int2","int3","int4"]),(0,o.JK)(e,"max",o.cP,[o.cP,o.cP],["uint","uint2","uint3","uint4"]),(0,o.JK)(e,"min",o.cP,[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"min",o.cP,[o.cP,o.cP],["int","int2","int3","int4"]),(0,o.JK)(e,"min",o.cP,[o.cP,o.cP],["uint","uint2","uint3","uint4"]),(0,o.JK)(e,"fmod",o.cP,[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"ldexp",o.cP,[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"reversebits",o.cP,[o.cP],["uint"]),(0,o.JK)(e,"clamp",o.cP,[o.cP,o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"clamp",o.cP,[o.cP,"float","float"],["float2","float3","float4"]),(0,o.JK)(e,"pow",o.cP,[o.cP,"float"],["float","float2","float3","float4"]),(0,o.JK)(e,"mod",o.cP,[o.cP,o.cP],["float2","float3","float4"]),(0,o.JK)(e,"mod",o.cP,[o.cP,"float"],["float2","float3","float4"]),(0,o.JK)(e,"exp",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"exp2",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"log",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"log2",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"inversesqrt",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"sqrt",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"not",o.cP,[o.cP],["bool2","bool3","bool4"]),(0,o.JK)(e,"distance","float",[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"lessThan","bool2",[o.cP,o.cP],["float2","int2","uint2"]),(0,o.JK)(e,"lessThan","bool3",[o.cP,o.cP],["float3","int3","uint3"]),(0,o.JK)(e,"lessThan","bool4",[o.cP,o.cP],["float4","int4","uint4"]),(0,o.JK)(e,"lessThanEqual","bool2",[o.cP,o.cP],["float2","int2","uint2"]),(0,o.JK)(e,"lessThanEqual","bool3",[o.cP,o.cP],["float3","int3","uint3"]),(0,o.JK)(e,"lessThanEqual","bool4",[o.cP,o.cP],["float4","int4","uint4"]),(0,o.JK)(e,"equal","bool2",[o.cP,o.cP],["float2","int2","uint2"]),(0,o.JK)(e,"equal","bool3",[o.cP,o.cP],["float3","int3","uint3"]),(0,o.JK)(e,"equal","bool4",[o.cP,o.cP],["float4","int4","uint4"]),(0,o.JK)(e,"equal",o.cP,[o.cP,o.cP],["bool2","bool3","bool4"]),(0,o.JK)(e,"notEqual","bool2",[o.cP,o.cP],["float2","int2","uint2"]),(0,o.JK)(e,"notEqual","bool3",[o.cP,o.cP],["float3","int3","uint3"]),(0,o.JK)(e,"notEqual","bool4",[o.cP,o.cP],["float4","int4","uint4"]),(0,o.JK)(e,"notEqual",o.cP,[o.cP,o.cP],["bool2","bool3","bool4"]),(0,o.JK)(e,"greaterThan","bool2",[o.cP,o.cP],["float2","int2","uint2"]),(0,o.JK)(e,"greaterThan","bool3",[o.cP,o.cP],["float3","int3","uint3"]),(0,o.JK)(e,"greaterThan","bool4",[o.cP,o.cP],["float4","int4","uint4"]),(0,o.JK)(e,"greaterThanEqual","bool2",[o.cP,o.cP],["float2","int2","uint2"]),(0,o.JK)(e,"greaterThanEqual","bool3",[o.cP,o.cP],["float3","int3","uint3"]),(0,o.JK)(e,"greaterThanEqual","bool4",[o.cP,o.cP],["float4","int4","uint4"]),(0,o.JK)(e,"radians",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"degrees",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"sin",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"cos",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"sincos","void",[o.cP,`out ${o.cP}`,`out ${o.cP}`],["float","float2","float3","float4"]),(0,o.JK)(e,"tan",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"asin",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"acos",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"atan",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"atan",o.cP,[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"atan2",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"atan2",o.cP,[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"dFdx",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"dFdy",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"width",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"fwidth",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"smoothstep",o.cP,[o.cP,o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"smoothstep",o.cP,["float","float",o.cP],["float2","float3","float4"]),(0,o.JK)(e,"step",o.cP,[o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"clip","void",[o.cP],["float","float2","float3","float4"],o.M0),(0,o.JK)(e,"frac",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"lerp",o.cP,[o.cP,o.cP,o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"lerp",o.cP,[o.cP,o.cP,"float"],["float2","float3","float4"]),(0,o.JK)(e,"saturate",o.cP,[o.cP],["float","float2","float3","float4"]),(0,o.JK)(e,"asfloat","float",[o.cP],["float","int","bool","uint"]),(0,o.JK)(e,"asfloat","float2",[o.cP],["float2","int2","bool2","uint2"]),(0,o.JK)(e,"asfloat","float3",[o.cP],["float3","int3","bool3","uint3"]),(0,o.JK)(e,"asfloat","float4",[o.cP],["float4","int4","bool4","uint4"]),(0,o.JK)(e,"asint","int",[o.cP],["float","int","bool","uint"]),(0,o.JK)(e,"asint","int2",[o.cP],["float2","int2","bool2","uint2"]),(0,o.JK)(e,"asint","int3",[o.cP],["float3","int3","bool3","uint3"]),(0,o.JK)(e,"asint","int4",[o.cP],["float4","int4","bool4","uint4"]),(0,o.JK)(e,"asuint","uint",[o.cP],["float","int","bool","uint"]),(0,o.JK)(e,"asuint","uint2",[o.cP],["float2","int2","bool2","uint2"]),(0,o.JK)(e,"asuint","uint3",[o.cP],["float3","int3","bool3","uint3"]),(0,o.JK)(e,"asuint","uint4",[o.cP],["float4","int4","bool4","uint4"]),(0,o.JK)(e,"InterlockedAdd",o.cP,[o.cP,o.cP,o.cP],["int"]),(0,o.JK)(e,"f16tof32","float",["uint"],null),(0,o.JK)(e,"f32tof16","uint",["float"],null),(0,o.JK)(e,"any","bool",[o.cP],["int","uint","float","bool"]),(0,o.JK)(e,"any","bool",[o.cP],["int2","uint2","float2","bool2","float2x2"]),(0,o.JK)(e,"any","bool",[o.cP],["int3","uint3","float3","bool3","float3x3"]),(0,o.JK)(e,"any","bool",[o.cP],["int4","uint4","float4","bool4","float4x4"]),(0,o.JK)(e,"all","bool",[o.cP],["int","uint","float","bool"]),(0,o.JK)(e,"all","bool",[o.cP],["int2","uint2","float2","bool2","float2x2"]),(0,o.JK)(e,"all","bool",[o.cP],["int3","uint3","float3","bool3","float3x3"]),(0,o.JK)(e,"all","bool",[o.cP],["int4","uint4","float4","bool4","float4x4"]),(0,o.JK)(e,"WaveGetLaneIndex","uint",[],["void"]),(0,o.JK)(e,"WaveActiveBallot","uint4",[o.cP],["bool"]),(0,o.JK)(e,"SetVertexShader","void",[o.cP],["VertexShader"],o.zW),(0,o.JK)(e,"SetPixelShader","void",[o.cP],["PixelShader"],o.zW),(0,o.JK)(e,"SetGeometryShader","void",[o.cP],["GeometryShader"],o.zW),(0,o.JK)(e,"SetDepthStencilState","void",[o.cP,"int"],["DepthStencilState"],o.zW),(0,o.JK)(e,"SetBlendState","void",[o.cP],["BlendState"],o.zW),(0,o.JK)(e,"SetRasterizerState","void",[o.cP],["RasterizerState"],o.zW)}(D);const F=e=>D.findType(e),z=e=>D.findVariable(e),U=e=>D.findTechnique(e),B=(e,t)=>D.findFunction(e,t),V=e=>!(0,r.Ft)(D.findType(e)),G=e=>!(0,r.Ft)(D.findVariable(e)),Z=e=>!(0,r.Ft)(D.findTechnique(e)),H=D,j=D.findType("void"),W=D.findType("string"),q=D.findType("null_t"),K=D.findType("SamplerState"),X=D.findType("BlendState"),Y=D.findType("DepthStencilState"),J=D.findType("float"),$=D.findType("float2"),Q=D.findType("float3"),ee=D.findType("float4"),te=D.findType("half"),ne=D.findType("half2"),re=D.findType("half3"),ie=D.findType("half4"),se=D.findType("float2x2"),oe=D.findType("float2x3"),ae=D.findType("float2x4"),le=D.findType("float3x2"),ce=D.findType("float3x3"),ue=D.findType("float3x4"),he=D.findType("float4x2"),de=D.findType("float4x3"),pe=D.findType("float4x4"),fe=D.findType("bool"),me=D.findType("bool2"),ge=D.findType("bool3"),ve=D.findType("bool4"),ye=D.findType("bool2x2"),be=D.findType("bool3x3"),_e=D.findType("bool4x4"),xe=D.findType("int"),we=D.findType("int2"),Se=D.findType("int3"),Te=D.findType("int4"),Ee=D.findType("uint"),Me=D.findType("uint2"),Ae=D.findType("uint3"),Ce=D.findType("uint4"),ke=D.findType("int2x2"),Pe=D.findType("int3x3"),Re=D.findType("int4x4"),Le=D.findType("VertexShader"),Oe=D.findType("PixelShader"),Ne=D.findType("ComputeShader"),Ie=D.findType("GeometryShader");function De(e){if((0,o.KA)(e))return e;if((0,o.C1)(e)||(0,o.j4)(e)){if((0,o.v8)(e))return J;if((0,o.PV)(e))return xe;if((0,o.Mf)(e))return Ee;if((0,o.uO)(e))return te;if((0,o.a2)(e))return fe}return(0,r.hu)(!1,`cannot determ base type of ${e.name}`),null}var Fe;function ze(e){return(0,o.v8)(e)?Fe.k_Float:(0,o.uO)(e)?Fe.k_Half:(0,o.PV)(e)?Fe.k_Int:(0,o.Mf)(e)?Fe.k_Uint:(0,o.a2)(e)?Fe.k_Bool:Fe.k_Unknown}function Ue(e){switch(e){case Fe.k_Float:return J;case Fe.k_Half:return te;case Fe.k_Int:return xe;case Fe.k_Uint:return Ee;case Fe.k_Bool:return fe}return null}function Be(e,t){(0,r.hu)((0,o.KA)(e)||(0,o.C1)(e)),(0,r.hu)((0,o.KA)(t)||(0,o.C1)(t));const n=Ue(Math.max(ze(e),ze(t)));return(0,r.hu)(null!==n,"cannot determ base type"),n}!function(e){e[e.k_Bool=0]="k_Bool",e[e.k_Uint=1]="k_Uint",e[e.k_Int=2]="k_Int",e[e.k_Half=3]="k_Half",e[e.k_Float=4]="k_Float",e[e.k_Unknown=NaN]="k_Unknown"}(Fe||(Fe={}))},zoki:(e,t,n)=>{"use strict";n.d(t,{fn:()=>r});var r,i=n("W5eQ"),s=n("cOQ3");!function(e){function t(e,t){return`${i.V5.signature(e.type,t)}${e.initExpr?"?":""}`}function n(e){return e.params.filter((e=>!e||!e.initExpr)).length}e.signature=function(e,n=!1){const{name:r,params:i}=e;return`${r}(${i.map((e=>t(e,n))).join(", ")})`},e.signatureEx=function(e,n=!1){const{name:r,returnType:s,params:o}=e;return`${i.V5.signature(s,n)} ${r}(${o.map((e=>t(e,n))).join(", ")})`},e.numArgsRequired=n,e.match=function(e,t,r=!1){return!(r||!(0,s.Ft)(t))||!(t.length>e.params.length||n(e)>t.length)&&t.every(((t,n)=>!r&&(0,s.Ft)(t)||!r&&(0,s.Ft)(e.params[n].type)||i.V5.equals(t,e.params[n].type,r)))},e.matchList=function(t,n,r=!1){if(!t)return null;const i=t.filter((t=>e.match(t.def,n,r)));return i.length>1?void 0:1===i.length?i[0]:null}}(r||(r={}))},W5eQ:(e,t,n)=>{"use strict";n.d(t,{th:()=>i,fn:()=>c.fn,NQ:()=>r,V5:()=>l,VD:()=>a});var r,i,s=n("cOQ3"),o=n("vIQR");!function(e){e.UNDEFINE_LENGTH=16777215,e.UNDEFINE_SIZE=16777215,e.UNDEFINE_PADDING=16777215,e.UNDEFINE_NAME="undef",e.isExpression=function(e){switch(e.instructionType){case o.rO.k_ConditionalExpr:case o.rO.k_ConstructorCallExpr:case o.rO.k_AssignmentExpr:case o.rO.k_ArithmeticExpr:case o.rO.k_BitwiseExpr:case o.rO.k_InitExpr:case o.rO.k_IdExpr:case o.rO.k_FunctionCallExpr:case o.rO.k_FloatExpr:case o.rO.k_IntExpr:case o.rO.k_BoolExpr:case o.rO.k_PostfixArithmeticExpr:case o.rO.k_PostfixIndexExpr:case o.rO.k_PostfixPointExpr:case o.rO.k_ComplexExpr:case o.rO.k_CastExpr:case o.rO.k_UnaryExpr:case o.rO.k_RelationalExpr:case o.rO.k_LogicalExpr:return!0}return!1},e.isStatement=function(e){switch(e.instructionType){case o.rO.k_Stmt:case o.rO.k_DeclStmt:case o.rO.k_ReturnStmt:case o.rO.k_IfStmt:case o.rO.k_StmtBlock:case o.rO.k_ExprStmt:case o.rO.k_WhileStmt:case o.rO.k_ForStmt:case o.rO.k_BreakStmt:case o.rO.k_SemicolonStmt:return!0}return!1},e.isLiteral=function(e){switch(e.instructionType){case o.rO.k_IntExpr:case o.rO.k_FloatExpr:case o.rO.k_BoolExpr:case o.rO.k_StringExpr:return!0}return!1}}(r||(r={})),function(e){function t(e){const n=function(e){if(!e)return 0;if(r.isLiteral(e))return e.value;if(e.instructionType===o.rO.k_CastExpr)return t(e.expr);if(e.instructionType===o.rO.k_IdExpr){const n=e;if(n.decl.isGlobal())return console.assert(n.decl.initExpr.instructionType!==o.rO.k_InitExpr),t(n.decl.initExpr)}return-1}(e);if(n>=0)return n;if(e.instructionType!==o.rO.k_ArithmeticExpr)return console.error(`expr "${e.toCode()}" could not be evaluated`),-1;const{left:i,right:s,operator:a}=e,l=t(i),c=t(s);if(l>=0&&c>=0)switch(a){case"*":return c*l;case"/":return c/l;case"+":return c+l;case"-":return c-l;default:console.error("unsupported operator")}return console.error(`expr "${e.toCode()}" could not be evaluated`),-1}e.unwind=function e(t){if((0,s.Ft)(t))return null;switch(t.instructionType){case o.rO.k_PostfixPointExpr:case o.rO.k_PostfixIndexExpr:return e(t.element);case o.rO.k_IdExpr:return t.decl;case o.rO.k_BitwiseExpr:case o.rO.k_ArithmeticExpr:return null;case o.rO.k_InitExpr:return(0,s.hu)(!1,"init expression doesn't support unwind operation"),null;case o.rO.k_AssignmentExpr:return e(t.left);case o.rO.k_CastExpr:case o.rO.k_UnaryExpr:case o.rO.k_RelationalExpr:case o.rO.k_ConstructorCallExpr:return null;case o.rO.k_ComplexExpr:return e(t.expr);case o.rO.k_IntExpr:case o.rO.k_FloatExpr:case o.rO.k_StringExpr:case o.rO.k_BoolExpr:case o.rO.k_FunctionCallExpr:return null;default:return(0,s.hu)(!1,"unsupported expr found"),null}},e.evalConst=t}(i||(i={}));var a,l,c=n("zoki"),u=n("z3nI");!function(e){function t(e){return e.isParameter()?((0,s.hu)(e.parent.instructionType===o.rO.k_FunctionDef),e.parent.params.indexOf(e)):(console.error("invalid call."),-1)}e.parameterIndex=t,e.parameterOffset=function(e){if(!e.isParameter())return console.error("invalid call."),0;let n=t(e),r=0;for(let t=0;t<n;++t)r+=e.parent.params[t].type.size;return r},e.fullName=function(e){if(e.isField()&&l.findParentVariableDecl(e.parent)){let t="";return e.parent.instructionType===o.rO.k_VariableType&&(t=l.resolveVariableDeclFullName(e.parent)),t+="."+e.name,t}return e.name}}(a||(a={})),function(e){function t(e){if((0,s.Ft)(e.parent))return!1;const n=e.parent.instructionType;return n===o.rO.k_VariableDecl||n===o.rO.k_VariableType&&t(e.parent)}function n(e){if((0,s.Ft)(e.parent))return!1;if(e.parent.instructionType===o.rO.k_VariableDecl){return e.parent.isField()}return!1}function i(e){if(!t(e))return null;return e.parent.instructionType===o.rO.k_VariableDecl?e.parent:i(e.parent)}function l(e){if(!t(e))return null;return e.parent.instructionType===o.rO.k_TypeDecl?e.parent:l(e.parent)}function c(e,t=!1){if(!(0,u.$V)(e))return(0,s.hu)(!t),"*";switch(e.instructionType){case o.rO.k_VariableType:return function(e,t){let n="";t&&e.usages.length>0&&(n=`${e.usages.join("_")}_`);let i="";e.isNotBaseArray()&&(i="[]",e.length!==r.UNDEFINE_LENGTH&&(i=`[${e.length}]`));let s=e.subType;for(;s.instructionType==o.rO.k_VariableType;)s=s.subType;return`${n}${c(s)}${i}`}(e,t);case o.rO.k_ComplexType:return`${e.name}${e.instructionID}`;case o.rO.k_ProxyType:return e.baseType?c(e.baseType):e.name;case o.rO.k_SystemType:return e.name;default:return(0,s.hu)(!1,"unsupported type"),null}}function h(e,t=!1){switch(e.instructionType){case o.rO.k_VariableType:return function(e,t){let n="";return(t?e.isArray():e.isNotBaseArray())&&(n="[]",e.length!==r.UNDEFINE_LENGTH&&(n=`[${e.length}]`)),`${h(e.subType)}${n}`}(e,t);case o.rO.k_ComplexType:return function(e,t){return`{${e.fields.map((e=>h(e.type,t))).join(";")}}`}(e,t);case o.rO.k_ProxyType:return e.baseType?h(e.baseType):e.name;case o.rO.k_SystemType:return e.name;default:return(0,s.hu)(!1,"unsupported type"),null}}function d(e,t,n=!1){if((0,s.Ft)(e)||(0,s.Ft)(t))return!1;if(e instanceof RegExp&&t instanceof RegExp)return(0,s.hu)(!1),!1;if(e instanceof RegExp){let r=e;return!!c(t,n).match(r)}if(t instanceof RegExp){let r=t;return!!c(e,n).match(r)}let i=e,o=t;return(!i.isArray()||!o.isArray()||i.length!==r.UNDEFINE_LENGTH&&o.length!==r.UNDEFINE_LENGTH||i.length===o.length)&&c(i,n)===c(o,n)}e.isInheritedFromVariableDecl=t,e.isTypeOfField=n,e.findParentContainer=function(e){if(!t(e)||!n(e))return null;let r=i(e).parent;return t(r)?i(r):null},e.findParentVariableDecl=i,e.findParentVariableDeclName=function(e){let t=i(e);return(0,s.Ft)(t)?null:t.name},e.finParentTypeDecl=l,e.finParentTypeDeclName=function(e){let t=l(e);return(0,s.Ft)(t)?null:t.name},e.resolveVariableDeclFullName=function(e){return t(e)?a.fullName(i(e)):(console.error("Not from variable decl"),null)},e.findMainVariable=function e(r){return t(r)?n(r)?e(r.parent.parent):i(r):null},e.signature=c,e.hash=h,e.compareRelaxed=function(e,t,n=!1){return h(e,n)===h(t,n)},e.compare=d,e.equals=function(e,t,n=!1){return d(e,t,n)},e.alignSize=function(e,t){if(e===r.UNDEFINE_SIZE)return e;const n=e%t;return 0!==n?e+t-n:e}}(l||(l={}))},"+tx1":(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var r=n("vIQR"),i=n("BrFC"),s=n("hbjL");class o extends i.b{constructor({left:e,right:t,operator:n,...i}){super({instrType:r.rO.k_ArithmeticExpr,...i}),this._leftOperand=s.v.$withParent(e,this),this._rightOperand=s.v.$withParent(t,this),this._operator=n}get left(){return this._leftOperand}get right(){return this._rightOperand}get operator(){return this._operator}toCode(){var e="";return e+=this._leftOperand.toCode(),e+=` ${this.operator} `,e+=this._rightOperand.toCode()}isConst(){return this.left.isConst()&&this.right.isConst()}}},"eck/":(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var r=n("vIQR"),i=n("BrFC"),s=n("hbjL");class o extends i.b{constructor({left:e,right:t,operator:n,...i}){super({instrType:r.rO.k_AssignmentExpr,type:e.type,...i}),this._leftValue=s.v.$withParent(e,this),this._rightValue=s.v.$withParent(t,this),this._operator=n}get left(){return this._leftValue}get right(){return this._rightValue}get operator(){return this._operator}toCode(){var e="";return e+=this.left.toCode(),e+=this.operator,e+=this.right.toCode()}}},"rs/O":(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n("vIQR"),i=n("hbjL");class s extends i.v{constructor({name:e,args:t=null,...n}){super({instrType:r.rO.k_Attribute,...n}),this.name=e,this.args=t}toCode(){return`[${this.name}${this.args.length>0?`(${this.args.map((e=>e.toCode())).join(", ")})`:""}]`}}},"d+t4":(e,t,n)=>{"use strict";n.d(t,{O:()=>a});var r=n("BrFC"),i=n("6EL/"),s=n("A0ZU"),o=n("vIQR");class a extends r.b{constructor({value:e,scope:t,...n}){super({instrType:o.rO.k_BoolExpr,type:i.L.wrapAsConst(s.T_BOOL,s.SCOPE),scope:t,...n}),this.value=e}toString(){return String(this.value)}toCode(){return this.value?"true":"false"}isConst(){return!0}}},KHnE:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});var r=n("W5eQ"),i=n("vIQR"),s=n("BrFC"),o=n("hbjL");class a extends s.b{constructor({sourceExpr:e,...t}){super({instrType:i.rO.k_CastExpr,...t}),this.expr=o.v.$withParent(e,this)}toCode(){return`(${this.type.toCode()})(${this.expr.toCode()})`}isUseless(){return r.V5.equals(this.type,this.expr.type)}isConst(){return this.expr.isConst()}}},IsZF:(e,t,n)=>{"use strict";n.d(t,{x:()=>a});var r=n("vIQR"),i=n("W5eQ"),s=n("BrFC"),o=n("hbjL");class a extends s.b{constructor({cond:e,left:t,right:n,...s}){super({instrType:r.rO.k_ConditionalExpr,type:t.type,...s}),console.assert(i.V5.equals(t.type,n.type)),this._cond=o.v.$withParent(e,this),this._leftValue=o.v.$withParent(t,this),this._rightValue=o.v.$withParent(n,this)}get condition(){return this._cond}get left(){return this._leftValue}get right(){return this._rightValue}toCode(){var e="(";return e+=this.condition.toCode(),e+="?",e+=this.left.toCode(),e+=":",e+=this.right.toCode(),e+=")"}isConst(){return this.condition.isConst()&&this.left.isConst()}}},RIdR:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var r=n("vIQR"),i=n("BrFC"),s=n("hbjL");class o extends i.b{constructor({ctor:e,args:t=null,...n}){super({instrType:r.rO.k_ConstructorCallExpr,type:e.subType,...n}),this._args=(t||[]).map((e=>s.v.$withParent(e,this))),this._ctor=s.v.$withParent(e,this)}get args(){return this._args}get ctor(){return this._ctor}toCode(){var e="";e+=this.ctor.toCode(),e+="(";for(var t=0;t<this.args.length;t++)e+=this.args[t].toCode(),t!==this.args.length-1&&(e+=",");return e+=")"}isConst(){for(var e=0;e<this.args.length;e++)if(!this.args[e].isConst())return!1;return!0}}},"0xZW":(e,t,n)=>{"use strict";n.d(t,{_:()=>s});var r=n("vIQR"),i=n("hbjL");class s extends i.v{constructor({semantic:e=null,annotation:t=null,...n}){super({instrType:r.rO.k_Decl,...n}),this._semantic=e,this._annotation=i.v.$withParent(t,this)}get semantic(){return this._semantic}get annotation(){return this._annotation}get name(){return null}get id(){return null}}},YZc1:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r=n("vIQR"),i=n("hbjL"),s=n("pGoc");class o extends s.W{constructor({declList:e=null,...t}){super({instrType:r.rO.k_DeclStmt,...t}),this._declList=(e||[]).map((e=>i.v.$withParent(e,this)))}get declList(){return this._declList}toCode(){for(var e="",t=this.declList,n=0;n<this.declList.length;n++)e+=t[n].toCode()+";\n";return e}}},BrFC:(e,t,n)=>{"use strict";n.d(t,{b:()=>a});var r=n("cOQ3"),i=n("vIQR"),s=n("hbjL");class o extends s.v{constructor({type:e,...t}){super({instrType:i.rO.k_Typed,...t}),this._type=s.v.$withNoParent(e),(0,r.Ft)(this._type)&&console.warn("Something goes wrong! Type is not specified!",this)}get type(){return this._type}}class a extends o{constructor({...e}){super({instrType:i.rO.k_Expr,...e}),this._evalResult=null}get type(){return super.type}isConst(){return!1}isConstExpr(){return!0}}},ubxH:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n("hbjL"),i=n("pGoc"),s=n("vIQR");class o extends i.W{constructor({expr:e,...t}){super({instrType:s.rO.k_ExprStmt,...t}),this._expr=r.v.$withParent(e,this)}get expr(){return this._expr}toCode(){return(this._expr?this._expr.toCode():"")+";"}}},OsKO:(e,t,n)=>{"use strict";n.d(t,{O:()=>a});var r=n("BrFC"),i=n("6EL/"),s=n("A0ZU"),o=n("vIQR");class a extends r.b{constructor({value:e,scope:t,...n}){super({instrType:o.rO.k_FloatExpr,type:i.L.wrapAsConst(s.T_FLOAT,s.SCOPE),scope:t,...n}),this.value=e}toString(){return String(this.value)}toCode(){return`${this.value}${this.value%1==0?".":""}`}isConst(){return!0}}},y57x:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n("vIQR"),i=n("BrFC"),s=n("hbjL");class o extends i.b{constructor({decl:e,args:t,callee:n,...i}){super({instrType:r.rO.k_FunctionCallExpr,...i}),this.callee=n,this.args=(t||[]).map((e=>s.v.$withParent(e,this))),this.decl=e}toCode(){const{callee:e,decl:{def:t},args:n}=this;return`${e?e.toCode()+".":""}${t.id.toCode()}(${n.map((e=>e.toCode())).join(",")})`}}},BLpd:(e,t,n)=>{"use strict";n.d(t,{s:()=>o});var r=n("vIQR"),i=n("0xZW"),s=n("hbjL");class o extends i._{constructor({def:e,impl:t=null,attrs:n=null,...i}){super({instrType:r.rO.k_FunctionDecl,...i}),this.def=s.v.$withParent(e,this),this.impl=s.v.$withParent(t,this),this.attrs=(n||[]).map((e=>s.v.$withParent(e,this)))}get name(){return this.def.name}get id(){return this.def.id}get semantic(){return this.def.semantic}toCode(){let e="";return e+=this.def.toCode(),this.impl?e+=this.impl.toCode():e+=";",e}}},O1LO:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n("0xZW"),i=n("hbjL"),s=n("vIQR"),o=n("W5eQ");class a extends r._{constructor({returnType:e,id:t,paramList:n=[],...r}){super({instrType:s.rO.k_FunctionDef,...r}),this.params=n.map((e=>i.v.$withParent(e,this))),this.returnType=i.v.$withParent(e,this),this._id=i.v.$withParent(t,this)}get id(){return this._id}get name(){return this._id.name}toString(){let e=o.V5.signature(this.returnType)+" "+this.name+"(";for(let t=0;t<this.params.length;t++)e+=o.V5.signature(this.params[t].type)+",";return e+=")",e}toCode(){const{_id:e,returnType:t,params:n}=this;return`${t.toCode()} ${e.toCode()}(${n.map((e=>e.toCode())).join(", ")})`}}},kBTl:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n("vIQR"),i=n("BrFC"),s=n("hbjL");class o extends i.b{constructor({id:e,decl:t,...n}){super({instrType:r.rO.k_IdExpr,type:t.type,...n}),this.id=s.v.$withParent(e,this),this.decl=t}get name(){return this.id.name}isConst(){return this.type.isConst()}toCode(){return this.decl.id.toCode()}}},Muaz:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n("vIQR"),i=n("hbjL");class s extends i.v{constructor({name:e,...t}){super({instrType:r.rO.k_Id,...t}),this.name=e}toString(){return this.name}toCode(){return this.name}}},AAir:(e,t,n)=>{"use strict";n.d(t,{i:()=>a});var r=n("cOQ3"),i=n("vIQR"),s=n("hbjL"),o=n("pGoc");class a extends o.W{constructor({cond:e,conseq:t,attrs:n=null,contrary:r=null,...o}){super({instrType:i.rO.k_IfStmt,...o}),this.cond=s.v.$withParent(e,this),this.conseq=s.v.$withParent(t,this),this.contrary=s.v.$withParent(r,this),this.attrs=(n||[]).map((e=>s.v.$withParent(e,this)))}toCode(){var e="";return(0,r.Ft)(this.contrary)?(e+="if(",e+=this.cond.toCode()+")",e+=this.conseq.toCode()):(e+="if(",e+=this.cond.toCode()+") ",e+=this.conseq.toCode(),e+="else ",e+=this.contrary.toCode()),e}}},hbjL:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});var r=n("cOQ3"),i=n("vIQR");class s{constructor({scope:e,instrType:t,sourceNode:n=null,visible:r=!0}){this._sourceNode=n,this._instructionType=t,this._instructionID=s.INSTRUCTION_COUNTER++,this._scope=e,this._parent=null,this._lastError=null}get parent(){return this._parent}get instructionType(){return console.assert(this._instructionType!=i.rO.k_Instruction,"Instruction type 'k_Instruction' is forbidden."),this._instructionType}get instructionName(){return i.rO[this.instructionType]}get instructionID(){return this._instructionID}get scope(){return(0,r.Ft)(this._scope)?(0,r.Ft)(this.parent)?null:this.parent.scope:this._scope}get sourceNode(){return this._sourceNode}toString(){return console.error("@pure_virtual"),null}toCode(){return console.error("@pure_virtual"),null}$withParent(e){return console.assert(null==this._parent,"parent redefenition detected!"),this.instructionType===i.rO.k_SystemType&&"float"===this.name&&this._parent,this._parent=e,this}$withNoParent(){return this}static $withParent(e,t){return(0,r.Ft)(e)?null:e.$withParent(t)}static $withNoParent(e){return(0,r.Ft)(e)?null:e.$withNoParent()}}s.INSTRUCTION_COUNTER=0},pjXG:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var r=n("vIQR"),i=n("hbjL");class s extends i.v{constructor({instructions:e=[],...t}){super({instrType:r.rO.k_Collector,...t}),this._instructions=e}get instructions(){return this._instructions}push(e){this._instructions.push(e)}toCode(){let e="";for(const t of this.instructions)if(t.instructionType===r.rO.k_VariableDecl)e+=t.toCode()+";\n";else e+=t.toCode()+"\n";return e}}},s0og:(e,t,n)=>{"use strict";n.d(t,{v:()=>a});var r=n("BrFC"),i=n("6EL/"),s=n("A0ZU"),o=n("vIQR");class a extends r.b{constructor({base:e,signed:t,exp:n,heximal:r=!1,scope:a,...l}){super({instrType:o.rO.k_IntExpr,type:i.L.wrapAsConst(t?s.T_INT:s.T_UINT,s.SCOPE),scope:a,...l}),this.base=e,this.exp=n,this.signed=t,this.heximal=r,t||(this.base>>>=0)}get value(){return this.base*Math.pow(10,this.exp)}toString(){return`${this.heximal?"0x":""}${this.base.toString(this.heximal?16:10).toUpperCase()}${0!==this.exp?`e${this.exp}`:""}${this.signed?"":"u"}`}toCode(){return this.toString()}isConst(){return!0}}},Oxvu:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var r=n("A0ZU"),i=n("vIQR"),s=n("BrFC"),o=n("hbjL");class a extends s.b{constructor({left:e,right:t,operator:n,...s}){super({instrType:i.rO.k_LogicalExpr,type:r.T_BOOL,...s}),this._leftOperand=o.v.$withParent(e,this),this._rightOperand=o.v.$withParent(t,this),this._operator=n}get operator(){return this._operator}get left(){return this._leftOperand}get right(){return this._rightOperand}toCode(){var e="";return e+=this.left.toCode(),e+=this.operator,e+=this.right.toCode()}isConst(){return this.left.isConst()&&this.right.isConst()}}},"Z/0D":(e,t,n)=>{"use strict";n.d(t,{f:()=>c});var r=n("cOQ3"),i=n("Y4FD"),s=n("HS1/"),o=n("vIQR"),a=n("0xZW"),l=n("hbjL");class c extends a._{constructor({id:e=null,vertexShader:t=null,pixelShader:n=null,renderStates:r={},...i}){super({instrType:o.rO.k_PassDecl,...i}),this._passStateMap={},c.clearRenderStateMap(this._passStateMap),c.copyRenderStateMap(r,this._passStateMap),this._vertexShader=l.v.$withNoParent(t),this._pixelShader=l.v.$withNoParent(n),this._id=e}get id(){return this._id}get name(){return(0,r.Ft)(this._id)?null:this._id.name}get vertexShader(){return this._vertexShader}get pixelShader(){return this._pixelShader}getState(e){return this._passStateMap[e]}get renderStates(){return this._passStateMap}static copyRenderStateMap(e,t){(0,r.Ft)(e)||Object.keys(i.H).filter((e=>(0,r.hj)(i.H[e]))).map((e=>i.H[e])).forEach((n=>{t[n]=e[n]||t[n]}))}static clearRenderStateMap(e){Object.keys(i.H).filter((e=>(0,r.hj)(i.H[e]))).map((e=>i.H[e])).forEach((t=>{e[t]=s.m.UNDEF}))}isValid(){return!0}}},"++2t":(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var r=n("vIQR"),i=n("BrFC"),s=n("hbjL");class o extends i.b{constructor({element:e,postfix:t,...n}){super({instrType:r.rO.k_PostfixPointExpr,type:t.type,...n}),this.element=s.v.$withParent(e,this),this.postfix=s.v.$withParent(t,this)}toCode(){return`${this.element.toCode()}.${this.postfix.toCode()}`}isConst(){return this.element.isConst()}}},"2i/b":(e,t,n)=>{"use strict";n.d(t,{m:()=>o});var r=n("BrFC"),i=n("A0ZU"),s=n("vIQR");class o extends r.b{constructor({left:e,right:t,operator:n,instrType:r,...o}){super({instrType:s.rO.k_RelationalExpr,type:i[`T_BOOL${e.type.length>1?e.type.length:""}`],...o}),this._leftOperand=e,this._rightOperand=t,this._operator=n}get left(){return this._leftOperand}get right(){return this._rightOperand}get operator(){return this._operator}toCode(){var e="";return e+=this.left.toCode(),e+=` ${this.operator} `,e+=this.right.toCode()}isConst(){return this.left.isConst()&&this.right.isConst()}}},UL2e:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});var r=n("vIQR"),i=n("hbjL"),s=n("pGoc");class o extends s.W{constructor({expr:e=null,...t}){super({instrType:r.rO.k_ReturnStmt,...t}),this._operator="return",this._expr=i.v.$withParent(e,this)}get operator(){return this._operator}get expr(){return this._expr}toCode(){return this.expr?"return "+this.expr.toCode()+";":"return;"}}},"fc3/":(e,t,n)=>{"use strict";n.d(t,{O:()=>o});var r=n("vIQR"),i=n("hbjL"),s=n("pGoc");class o extends s.W{constructor({stmtList:e,...t}){super({instrType:r.rO.k_StmtBlock,...t}),this._stmtList=e.map((e=>i.v.$withParent(e,this)))}get stmtList(){return this._stmtList}toCode(){for(var e="{\n",t=0;t<this.stmtList.length;t++)e+="\t"+this.stmtList[t].toCode()+"\n";return e+="}"}}},pGoc:(e,t,n)=>{"use strict";n.d(t,{W:()=>s});var r=n("vIQR"),i=n("hbjL");class s extends i.v{constructor({...e}){super({instrType:r.rO.k_Stmt,...e})}}},F8nM:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n("cOQ3"),i=n("vIQR"),s=n("BLpd");class o extends s.s{constructor({vertex:e=!0,pixel:t=!0,impl:n=null,...s}){super({instrType:i.rO.k_SystemFunctionDecl,impl:null,...s}),(0,r.hu)((0,r.Ft)(n)),this._bForVertex=e,this._bForPixel=t}checkVertexUsage(){return this._bForVertex}checkPixelUsage(){return this._bForPixel}$makeVertexCompatible(e){console.warn("@deprecated"),this._bForVertex=e}$makePixelCompatible(e){console.warn("@deprecated"),this._bForPixel=e}}},"/VpG":(e,t,n)=>{"use strict";n.d(t,{F:()=>a});var r=n("cOQ3"),i=n("W5eQ"),s=n("vIQR"),o=n("hbjL");class a extends o.v{constructor({name:e,size:t=0,elementType:n=null,length:r=1,fields:i=[],methods:a=[],writable:l=!0,readable:c=!0,...u}){super({instrType:s.rO.k_SystemType,...u}),this._name=e,this._size=t,this._elementType=o.v.$withNoParent(n),this._length=r,this._fields=[],this._methods=[],this._bIsWritable=l,this._bIsReadable=c,i.forEach((e=>this.addField(e))),a.forEach((e=>this.addMethod(e)))}get writable(){return this._bIsWritable}get readable(){return this._bIsReadable}get name(){return this._name}get size(){return this.isArray()?this.length===i.NQ.UNDEFINE_LENGTH?i.NQ.UNDEFINE_LENGTH:this.arrayElementType.size*this.length:this._size}get baseType(){return this}get arrayElementType(){return this._elementType}get typeDecl(){return this.parent}get length(){return this._length}get fields(){return this._fields}get methods(){return this._methods}toDeclString(){return console.warn("@pure_virtual"),""}isArray(){return!(0,r.Ft)(this.arrayElementType)}isNotBaseArray(){return!1}isComplex(){return!1}isContainPointer(){return!1}toString(){return this.name||i.V5.hash(this)}toCode(){return this._name}hasFieldWithSematics(e){return!1}hasAllUniqueSemantics(){return!1}hasFieldWithoutSemantics(){return!1}getField(e){return this._fields.find((t=>t.name===e))||null}getMethod(e,t){const n=this._methods.filter((t=>t.name===e));return i.fn.matchList(n,t)}getFieldBySemantics(e){return console.error("@undefined_behavior"),null}addField(e){console.assert(null===this.getField(e.name)),this._fields.push(o.v.$withParent(e,this))}addMethod(e){console.assert((0,r.Ft)(this.getMethod(e.name,e.def.params.map((e=>e.type))))),this._methods.push(o.v.$withParent(e,this))}}},dmHP:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n("vIQR"),i=n("0xZW"),s=n("hbjL");class o extends i._{constructor({name:e,techniqueType:t,passes:n,presets:i,...o}){super({instrType:r.rO.k_TechniqueDecl,...o}),this._name=e,this.passes=n?.map((e=>s.v.$withParent(e,this))),this.type=t,this.presets=i}get name(){return this._name}isValid(){return!0}}},k9uP:(e,t,n)=>{"use strict";n.d(t,{D:()=>l,K:()=>r});var r,i=n("cOQ3"),s=n("vIQR"),o=n("0xZW"),a=n("hbjL");!function(e){e[e.k_Local=1]="k_Local",e[e.k_Global=2]="k_Global",e[e.k_Argument=4]="k_Argument",e[e.k_Cbuffer=8]="k_Cbuffer"}(r||(r={}));class l extends o._{constructor({id:e,type:t,init:n=null,usageFlags:r=0,...o}){super({instrType:s.rO.k_VariableDecl,...o}),this._id=a.v.$withParent(e,this),this._type=a.v.$withNoParent(t),this._initExpr=a.v.$withParent(n,this),this._usageFlags=r,(0,i.hu)(!this.isParameter()||(0,i.Ft)(this.parent)||this.parent.instructionType==s.rO.k_FunctionDef),(0,i.hu)(this.isLocal()||!this.isLocal()),(0,i.hu)(!this.isParameter()||this.isLocal())}get usageFlags(){return this._usageFlags}get initExpr(){return this._initExpr}get type(){return this._type}get name(){return this._id.name}get id(){return this._id}isGlobal(){return!!(this._usageFlags&r.k_Global)}isLocal(){return!!(this._usageFlags&r.k_Local)}isParameter(){return!!(this._usageFlags&r.k_Argument)}isField(){if((0,i.Ft)(this.parent))return!1;const e=this.parent.instructionType;return e===s.rO.k_VariableType||e===s.rO.k_ComplexType||e===s.rO.k_SystemType}isConstant(){return!!(this._usageFlags&r.k_Cbuffer)||this.type.isUniform()}toCode(){var e="";(e=this.type.toCode(),e+=" "+this.id.toCode(),this.type.isNotBaseArray())&&(e+="["+this.type.length+"]");return(0,i.Ft)(this.initExpr)||this.type.isUniform()||(e+="="+this.initExpr.toCode()),e}}},"6EL/":(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var r=n("cOQ3"),i=n("W5eQ"),s=n("vIQR"),o=n("hbjL");class a extends o.v{constructor({type:e,usages:t=[],arrayIndex:n=null,writable:l=!0,readable:c=!0,padding:u=i.NQ.UNDEFINE_PADDING,...h}){super({instrType:s.rO.k_VariableType,...h}),e=o.v.$withNoParent(e),this._usageList=[];let d=e.instructionType;if(d===s.rO.k_ProxyType||d===s.rO.k_SystemType||d===s.rO.k_ComplexType)this._subType=e;else{let t=e;t.isNotBaseArray()?this._subType=e:(this._subType=t.subType,t.usages.forEach((e=>this.addUsage(e))))}(0,r.hu)((0,r.$V)(this._subType)),(0,r.hu)((0,r.$V)(this._usageList)),this._isWritable=l,this._isReadable=c,this._arrayIndexExpr=null,this._arrayElementType=null,this._padding=u,this._aligment=1,n&&(this._arrayElementType=o.v.$withParent(new a({readable:c,writable:l,scope:this.scope,type:this.subType,usages:this._usageList}),this),this._arrayIndexExpr=o.v.$withParent(n,this)),t.forEach((e=>this.addUsage(e)))}get name(){return this.baseType.name}get writable(){return!!this._isWritable&&(!this.isUniform()&&(!this.isConst()&&this.subType.writable))}get readable(){return!!this._isReadable&&(!this.usages.includes("out")&&this.subType.readable)}get methods(){return this.subType.methods}get aligment(){return this._aligment}get size(){if(!(0,r.Ft)(this._arrayElementType)){const e=i.V5.alignSize(this._arrayElementType.size,this.aligment),t=this.length;return t===i.NQ.UNDEFINE_LENGTH||e===i.NQ.UNDEFINE_SIZE?i.NQ.UNDEFINE_SIZE:e*t}return this.subType.size}get baseType(){return this.subType.baseType}get length(){if(!this.isNotBaseArray())return this.subType.length;if(this.isNotBaseArray()&&(0,r.Ft)(this._arrayElementType))return this.subType.length;const e=this._arrayIndexExpr;if(i.NQ.isLiteral(e))return Number(e.value);const t=i.th.evalConst(e);return t<0?i.NQ.UNDEFINE_LENGTH:t}get padding(){return this._padding}get arrayElementType(){return this.isArray()?this._arrayElementType||this.subType.arrayElementType:null}get usages(){let e=[...this._usageList],t=this.subType;for(;t&&t.instructionType===s.rO.k_VariableType;){const n=t;e=[...e,...n.usages],t=n.subType}return e}get subType(){return this._subType}get fields(){return this.subType.fields}toString(){return this.name||this.subType.toString()||i.V5.hash(this)}toCode(){let e="";if(!(0,r.Ft)(this._usageList))for(let t=0;t<this._usageList.length;t++)e+=this._usageList[t]+" ";return e+=this.subType.toCode(),e}toDeclString(){return this.subType.toDeclString()}isArray(){return!(0,r.Ft)(this._arrayElementType)||this.subType.isArray()}isNotBaseArray(){return!(0,r.Ft)(this._arrayElementType)||this.subType.isNotBaseArray()}isComplex(){return this.subType.isComplex()}isUniform(){return this.usages.includes("uniform")}isConst(){return this.usages.includes("const")}isUnsigned(){return this.usages.includes("unsigned")}isStatic(){return this.usages.includes("static")}$overwritePadding(e,t){this._padding=e,this._aligment=t}addUsage(e){this.usages.includes(e)||this._usageList.push(e)}hasFieldWithSematics(e){return this.subType.hasFieldWithSematics(e)}hasAllUniqueSemantics(){return this.subType.hasAllUniqueSemantics()}hasFieldWithoutSemantics(){return this.subType.hasFieldWithoutSemantics()}getField(e){return this.subType.getField(e)}getMethod(e,t){return this.subType.getMethod(e,t)}getFieldBySemantics(e){return this.subType.getFieldBySemantics(e)}static wrap(e,t){return new a({type:e,scope:t})}static wrapAsConst(e,t){return new a({type:e,scope:t,writable:!1,usages:["const"]})}}},"sg/T":(e,t,n)=>{"use strict";n.d(t,{B:()=>s});var r=n("vIQR"),i=n("pGoc");class s extends i.W{constructor({count:e,name:t,args:n,...i}){super({instrType:r.rO.k_SpawnStmt,...i}),this.count=e,this.args=n,this.name=t}toCode(){return`spawn(${this.count}) ${this.name}(${this.args.map((e=>e.toCode())).join(", ")});`}}},BeyE:(e,t,n)=>{"use strict";n.d(t,{$E:()=>ne,$R:()=>y,C1:()=>se,DE:()=>J,F2:()=>g,Fu:()=>_,JK:()=>P,JP:()=>v,KA:()=>ae,M0:()=>A,Mf:()=>he,PV:()=>ue,QN:()=>ce,VC:()=>ie,YF:()=>le,ZY:()=>x,a2:()=>de,b8:()=>te,cP:()=>m,g5:()=>ee,j4:()=>oe,jZ:()=>Y,tj:()=>re,u2:()=>Q,uO:()=>pe,v8:()=>fe,vT:()=>me,z:()=>f,zH:()=>$,zW:()=>C,zo:()=>b});var r=n("cOQ3"),i=n("W5eQ"),s=n("Muaz"),o=n("/VpG"),a=n("k9uP"),l=n("6EL/"),c=(n("HXFP"),n("jeW/")),u=n("vIQR"),h=n("rs/O"),d=n("O1LO"),p=n("F8nM");const f=!1,m="template";function g(e){const t=e.match(/^((0x[a-fA-F0-9]{1,8}?|[0-9]+)(e([+-]?[0-9]+))?)([ulUL]*)$/);(0,r.hu)(t,`cannot parse uint literal: ${e}`);const n=-1===t[5].toLowerCase().indexOf("u"),i=Number(t[4]||"0"),s=Number(t[2]);(0,r.hu)(!Number.isNaN(s));return{signed:n,exp:i,base:s,heximal:"x"===e[1]}}function v(e,t){let n=e.findType(t);return(0,r.hu)(!n||n.instructionType===u.rO.k_SystemType),n}function y(e,...t){let n,r,i,s,a,l;if([n,r,i,s,a,l]=t,v(e,n))return console.error(`type already exists: ${n}`),null;const c=new o.F({scope:e,name:n,elementType:i,length:s,fields:a,size:r,methods:l});return e.addType(c),c}function b(e,t,n){e.addTypeAlias(t,n)}function _(e,t,n,i){for(let o in n){const c=v(e,i+(o.length>1?o.length.toString():""));(0,r.hu)(c);const u=new s.x({scope:e,name:o}),h=new l.L({scope:e,type:c,writable:n[o]});t.push(new a.D({scope:e,id:u,type:h}))}}function x(e,t={},n=0){if(n>=4)return t;if(0===n){for(let n=0;n<e.length;n++)t[e[n]]=!0;n=1}const r=Object.keys(t);for(let n=0;n<e.length;n++)for(let i=0;i<r.length;i++)-1!==r[i].indexOf(e[n])?t[r[i]+e[n]]=!1:t[r[i]+e[n]]=!1!==t[r[i]];return x(e,t,++n)}function w(e){return e.split(" ").slice(-1)[0]===m}function S(e,t,n=null){(0,r.hu)(n!==m);const i=(n?t.replace(m,n):t).split(" "),s=i.slice(-1)[0],o=v(e,s),a=i.slice(0,-1);return(0,r.hu)(null!==o),a.forEach((e=>(0,r.hu)(-1!==["in","out","inout"].indexOf(e)))),{type:o,usages:a,hash:s}}const T={};function E(e){throw new Error(e)}function M(e,t={}){E(c.g[e])}const A=2,C=256;function k(e,t,n,r,i){const o=r.map(((t,n)=>new a.D({type:new l.L({type:t.type,usages:t.usages,scope:e}),id:new s.x({name:`p${n}`,scope:e}),scope:e}))),c=new l.L({type:t.type,usages:t.usages,scope:e}),u=!!(i&A),f=!!(1&i),m=[];!!(i&C)&&m.push(new h.o({scope:e,name:"extern"}));const g=new s.x({scope:e,name:n}),v=new d.Y({scope:e,returnType:c,id:g,paramList:o}),y=new p.h({scope:e,def:v,pixel:u,vertex:f,attrs:m});e.addFunction(y)}function P(e,t,n,i,s,o=1|A){if((0,r.Ft)(s)){w(n)&&E("Bad return type(TEMPLATE_TYPE) for system function '"+t+"'.");let r=t+"(",s=S(e,n),a=[];for(let n=0;n<i.length;n++)if(w(i[n]))E("Bad argument type(TEMPLATE_TYPE) for system function '"+t+"'.");else{const t=S(e,i[n]);a.push(t),r+=t.hash+","}r+=")",T[r]&&M(c.g.SystemFunctionRedefinition,{funcName:r}),k(e,s,t,a,o),T[r]=!0}else for(let r=0;r<s.length;r++){let a=t+"(",l=S(e,n,s[r]),u=[];for(let t=0;t<i.length;t++){const n=S(e,i[t],s[r]);u.push(n),a+=n.hash+","}a+=")",T[a]&&M(c.g.SystemFunctionRedefinition,{funcName:a}),k(e,l,t,u,o),T[a]=!0}}const R=["bool","int","uint","half","float"],L=["int","uint"],O=["float"],N=["int","int2","int3","int4","int2x2","int2x3","int2x4","int3x2","int3x3","int3x4","int4x2","int4x3","int4x4"],I=["uint","uint2","uint3","uint4","uint2x2","uint2x3","uint2x4","uint3x2","uint3x3","uint3x4","uint4x2","uint4x3","uint4x4"],D=["half","half2","half3","half4","half2x2","half2x3","half2x4","half3x2","half3x3","half3x4","half4x2","half4x3","half4x4"],F=["float","float2","float3","float4","float2x2","float2x3","float2x4","float3x2","float3x3","float3x4","float4x2","float4x3","float4x4"],z=["bool","bool2","bool3","bool4","bool2x2","bool2x3","bool2x4","bool3x2","bool3x3","bool3x4","bool4x2","bool4x3","bool4x4"],U=["bool2","bool3","bool4","int2","int3","int4","uint2","uint3","uint4","half2","half3","half4","float2","float3","float4"],B=["bool2x2","bool2x3","bool2x4","bool3x2","bool3x3","bool3x4","bool4x2","bool4x3","bool4x4","int2x2","int2x3","int2x4","int3x2","int3x3","int3x4","int4x2","int4x3","int4x4","uint2x2","uint2x3","uint2x4","uint3x2","uint3x3","uint3x4","uint4x2","uint4x3","uint4x4","half2x2","half2x3","half2x4","half3x2","half3x3","half3x4","half4x2","half4x3","half4x4","float2x2","float2x3","float2x4","float3x2","float3x3","float3x4","float4x2","float4x3","float4x4"],V=[...R,...U,...B],G=["RWTexture1D","RWTexture2D","RWTexture3D","RWBuffer","RWStructuredBuffer","AppendStructuredBuffer"],Z=["Texture1D","Texture2D","Texture3D","TextureCube","Texture2DArray","TextureCubeArray","RWTexture1D","RWTexture2D","RWTexture3D"],H=["Buffer","RWBuffer","RWStructuredBuffer","AppendStructuredBuffer","StructuredBuffer"],j=["SamplerState","SamplerComparisonState"],W="BlendState",q="DepthStencilState",K="RasterizerState",X=e=>e.match(/([\w][\w\d]+)(<[\w][\w\d]+>)?/)[1],Y=e=>G.includes(X(e.name)),J=e=>Z.includes(X(e.name)),$=e=>H.includes(X(e.name)),Q=e=>j.includes(e.name),ee=e=>[W].includes(e.name),te=e=>[q].includes(e.name),ne=e=>[K].includes(e.name),re=e=>[W,q,K].includes(e.name),ie=e=>V.includes(i.V5.signature(e)),se=e=>U.includes(i.V5.signature(e)),oe=e=>B.includes(i.V5.signature(e)),ae=e=>R.includes(i.V5.signature(e)),le=e=>L.includes(i.V5.signature(e)),ce=e=>O.includes(i.V5.signature(e)),ue=e=>N.includes(i.V5.signature(e)),he=e=>I.includes(i.V5.signature(e)),de=e=>z.includes(i.V5.signature(e)),pe=e=>D.includes(i.V5.signature(e)),fe=e=>F.includes(i.V5.signature(e));function me(e){let t=null,n=-1;const i=e.semantic;if(i){const e=i.match(/^register\(([utbs]{1})([\d]+)\)$/);e&&(t=e[1],n=Number(e[2]))}return Y(e.type)&&((0,r.hu)(null===t||"u"===t),t="u"),J(e.type)&&((0,r.hu)(null===t||"t"===t),t="t"),Q(e.type)&&((0,r.hu)(null===t||"s"===t),t="s"),e.instructionType===u.rO.k_CbufferDecl&&((0,r.hu)(null===t||"b"===t),t="b"),{type:t,index:n}}},BNML:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>ce});var i=n("dnVx"),s=n("1fdM"),o=n("/Hc9"),a=n("7Nqm"),l=n("E5ji"),c=n("jYc8"),u=n("3KVU"),h=n("elBL"),d=n("vIQR"),p=n("j3Uf"),f=n("0mZ+"),m=n("GUxJ"),g=n("4mVy"),v=n("IMqc"),y=n("AVkT"),b=n("RA5N"),_=n("Q8lk"),x=n("Xra2"),w=n("2IwD"),S=n("gp8H"),T=n("5RqF"),E=n("4U8C"),M=n("fPGG"),A=n("bJcc"),C=n("BmuJ"),k=n("zGvL"),P=n("2KDM"),R=n("+VBS"),L=n("WhBg"),O=n("ZbwE"),N=n("pOt9"),I=n("Jpkv"),D=n("DrVX"),F=n("KEtj"),z=n("dunc"),U=n("Rum1"),B=n("r1qu"),V=n("E1+w"),G=n("TRYF"),Z=n("O/5E"),H=n("6977"),j=e([i,s]);[i,s]=j.then?(await j)():j;const W=!0;function q(e,t,n,r=new _.c,i,s){const o=new x.P("production","0.0.11.0113e50","0113e50b99f9b6331fc9621201dec1d60b26c7f0","develop","Wed Mar 08 2023 04:02:44 GMT+0300 (Moscow Standard Time)");return new y.B(e,o,r,t,n,i,s)}function K(e,t,n={}){const r=e.root.scope,{geometry:i,sorting:s,instanceCount:o,CSParticlesPrerenderRoutine:a,drawMode:l}=t,c=l==p.t.k_Auto?J(e,a):new L.u,u=Y(r.findType(t.instance)),h=ee(e,t.instance,t.VSParticleShader,n),d=re(e,t.PSParticleShader,n),f=[R.Zd.RoutineBytecodeBundle,R.Zd.RoutineShaderBundle,R.Zd.RoutineShaderBundle],m=[c,h,d],g=r.findType(t.instance).size>>2,v=Object.keys(t.renderStates).map((e=>new P.o(Number(e),Number(t.renderStates[e]))));return new A.l(f,m,i,s,o,g,u,v)}function X(e,t,n={},r={}){const i=e.root.scope,s=ee(e,t.instance,t.VSParticleShader,n,r),o=re(e,t.PSParticleShader,n,r),a=[R.Zd.RoutineShaderBundle,R.Zd.RoutineShaderBundle],l=[s,o],c=Y(i.findType(t.instance)),u=i.findType(t.instance).size>>2,h=Object.keys(t.renderStates).map((e=>new P.o(Number(e),Number(t.renderStates[e]))));return new E.S(a,l,c,u,h)}function Y(e){return(0,s.Nl)(e)}function J(e,t){const n=t.name,r=[...t.numthreads],s=i.Iu(e,n);s.diagnosticReport.errors&&(console.error(f.g.stringify(s.diagnosticReport)),alert("could not generate bytecode, see console log for details"));const o=s.program?.code;if(!o)return new L.u;const a=t.uavs.map((({name:t,register:n,elementType:r})=>{const i=e.root.scope.findType(r),s=i.size,o=Y(i);return new B.O(t,n,s,o)})),l=t.buffers.map((({name:t,register:n,elementType:r})=>{const i=e.root.scope.findType(r),s=i.size,o=Y(i);return new v.L(t,n,s,o)})),c=t.textures.map((({name:t,register:n,elementType:r})=>{const i=e.root.scope.findType(r),s=i.size,o=Y(i);return new z.n(t,n,s,o)})),u=t.trimeshes.map((({name:e,vertexCountUName:t,faceCountUName:n,verticesName:r,facesName:i,indicesAdjName:s,faceAdjName:o})=>new U.e(e,t,n,r,i,s,o)));return new L.u(Array.from(o),new O.s(a,l,c,u),r)}function $(e,t,n,{name:r}={}){const i=e.root.scope,s=i.findFunction(n,null);if(!s)return new N.r;const o=i.findType(t),a=Y(o).fields.map((e=>{let t=e.size>>2,n=e.padding>>2,r=h.K.$declToAttributeName(o.getField(e.name));return new S.w(t,n,r)})),l=new h.i({mode:"vs"}),c=h.K.translate(s,l),u=l.cbuffers.map((({name:e,register:t,size:n})=>{const r=i.findCbuffer(e).type.fields.map((e=>new Z.q(Y(e.type),e.name,e.semantic,e.type.size,e.type.padding)));return new g.L(e,t,n,r)}));return new N.r(c,a,u)}function Q(e,t,{name:n}={},{textDocument:r,slastDocument:i}={}){const s=e.root.scope,o=s.findFunction(t,null);if(!o)return new I.v;const a=new c.u({textDocument:r,slastDocument:i,mode:"vs",entryName:n}),l=c.R.translate(o,a),u=a.cbuffers.map((({name:e,register:t,size:n})=>{const r=s.findCbuffer(e).type.fields.map((e=>new Z.q(Y(e.type),e.name,e.semantic,e.type.size,e.type.padding)));return new g.L(e,t,n,r)}));return new I.v(l,n,u)}function ee(e,t,n,r={},i={}){const s=[],o=[];return r.omitGLSL||(s.push(F.Jo.RoutineGLSLSourceBundle),o.push($(e,t,n,r))),r.omitHLSL||(s.push(F.Jo.RoutineHLSLSourceBundle),o.push(Q(e,n,r,i))),new D.w(s,o)}function te(e,t,{name:n}={}){const r=e.root.scope,i=r.findFunction(t,null);if(!i)return new N.r;const s=new h.i({mode:"ps"}),o=h.K.translate(i,s),a=s.cbuffers.map((({name:e,register:t,size:n})=>{const i=r.findCbuffer(e).type.fields.map((e=>new Z.q(Y(e.type),e.name,e.semantic,e.type.size,e.type.padding)));return new g.L(e,t,n,i)}));return new N.r(o,[],a)}function ne(e,t,{name:n}={},{textDocument:r,slastDocument:i}={}){const s=e.root.scope,o=s.findFunction(t,null);if(!o)return new I.v;const a=new c.u({textDocument:r,slastDocument:i,mode:"ps",entryName:n}),l=c.R.translate(o,a),u=a.cbuffers.map((({name:e,register:t,size:n})=>{const r=s.findCbuffer(e).type.fields.map((e=>new Z.q(Y(e.type),e.name,e.semantic,e.type.size,e.type.padding)));return new g.L(e,t,n,r)}));return new I.v(l,n,u)}function re(e,t,n={},r={}){const i=[],s=[];return n.omitGLSL||(i.push(F.Jo.RoutineGLSLSourceBundle),s.push(te(e,t,n))),n.omitHLSL||(i.push(F.Jo.RoutineHLSLSourceBundle),s.push(ne(e,t,n,r))),new D.w(i,s)}function ie(e){return e.map((e=>{const t=e.properties.map((e=>new G.f(e.name,(0,m.ZJ)(e.type),(0,m.Lo)(e.type,e.value))));return new V.l(e.name,(0,m.pr)(e.type),(0,m.Vd)(e.type,e.value),t)}))}function se(e){return e.map((({name:e,desc:t,data:n})=>new C.m(e,t,n.map((({name:e,type:t,value:n})=>new k.G(e,(0,m.pr)(t),(0,m.Vd)(t,n)))))))}function oe(e,t={}){let{packed:n=W}=t;if(!n)return e;let r=new H.Ib,i=e.pack(r);return r.finish(i),r.asUint8Array()}async function ae(e,t={}){const n=new u.sn({...t.translator}),r=u.m7.translate(e,n),i=n.techniques[0],{name:s,capacity:o}=i;t.name||=s;const c=await(0,l.X)("://raw",r),h=await(0,a.N)(c),d=h.root.scope;if(h.diagnosticReport.errors)return console.error(f.g.stringify(h.diagnosticReport)),null;const p=Y(d.findType(i.particle)),m=Array(w.p.k_Last),g=Array(w.p.k_Last);g[w.p.k_Reset]=R.Zd.RoutineBytecodeBundle,m[w.p.k_Reset]=J(h,i.CSParticlesResetRoutine),g[w.p.k_Spawn]=R.Zd.RoutineBytecodeBundle,m[w.p.k_Spawn]=J(h,i.CSParticlesSpawnRoutine),g[w.p.k_Init]=R.Zd.RoutineBytecodeBundle,m[w.p.k_Init]=J(h,i.CSParticlesInitRoutine),g[w.p.k_Update]=R.Zd.RoutineBytecodeBundle,m[w.p.k_Update]=J(h,i.CSParticlesUpdateRoutine);const v=i.passes.map((e=>K(h,e,t))),y=new M.I(o,g,m,v,p),x=ie(i.controls),S=se(i.presets),{meta:T}=t;return oe(q(t.name,b.fN.PartBundle,y,new _.c(T?.author,T?.source),x,S),t)}async function le(e,t={},n={}){const{includeResolver:r,defines:i}=n,{textDocument:s,slastDocument:c}=n,h=new u.sn({...t.translator,textDocument:s,slastDocument:c}),d=u.m7.translate(e,h),p=h.techniques[0],{name:g}=p;t.name||=g;const v=await(0,l.X)("file://foo.bar///mat.fx",d),y=await(0,o.J)(v,{includeResolver:r,defines:i}),x=await(0,a.N)(y);if(x.diagnosticReport.errors)return console.error(f.g.stringify(x.diagnosticReport)),null;const w=p.passes.map((e=>X(x,e,t,new m.lG(v,y,r,i)))),S=new T.K(w),E=ie(p.controls),M=se(p.presets),{meta:A}=t;return oe(q(t.name,b.fN.MatBundle,S,new _.c(A?.author,A?.source),E,M),t)}async function ce(e,t,n){switch(e.instructionType){case d.rO.k_PartFxDecl:return ae(e,t);case d.rO.k_TechniqueDecl:return le(e,t,n)}return console.assert(!1),null}r()}catch(ue){r(ue)}}))},uI6s:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>D});var i=n("cOQ3"),s=n("dnVx"),o=n("1fdM"),a=n("8VxU"),l=n("/Hc9"),c=n("7Nqm"),u=n("E5ji"),h=n("jYc8"),d=n("3KVU"),p=n("O/5E"),f=n("+H7Q"),m=n("0mZ+"),g=n("z3nI"),v=n("GUxJ"),y=n("6977"),b=n("4mVy"),_=n("AVkT"),x=n("RA5N"),w=n("Q8lk"),S=n("Xra2"),T=n("23YT"),E=n("X2z1"),M=n("mGiJ"),A=n("s7GX"),C=n("E1+w"),k=n("Gw1M"),P=n("TRYF"),R=e([s,o,a]);function L(e){return e.map((e=>{const t=e.properties.map((e=>new P.f(e.name,(0,v.ZJ)(e.type),(0,v.Lo)(e.type,e.value))));return new C.l(e.name,(0,v.pr)(e.type),(0,v.Vd)(e.type,e.value),t)}))}function O(e,t,n,r=new w.c,i,s){const o=new S.P("production","0.0.11.0113e50","0113e50b99f9b6331fc9621201dec1d60b26c7f0","develop","Wed Mar 08 2023 04:02:44 GMT+0300 (Moscow Standard Time)");return new _.B(e,o,r,t,n,i,s)}function N(e,t={}){let{packed:n=!0}=t;if(!n)return e;let r=new y.Ib,i=e.pack(r);return r.finish(i),r.asUint8Array()}async function I(e,t={},n={}){const r=new d.sn({...t.translator,...n}),y=d.m7.translate(e,r),_=[];for(const t of e.passes){const{program:r}=s.Iu(t),{code:d,cdl:x}=r,w=a.UN(d)[f.EChunkType.k_Shaders],S=[],M=[];if((0,g.Xq)(w)){const t=a.vY(w);for(const r of t){const{ver:t,args:s,name:a}=r;console.warn(`compile shader <${a}> -v ${t}`,s);{const t=e.scope.findFunction(a,null).def.params;(0,i.hu)(s.every(((e,n)=>[...t].reverse()[n].type.name===[...s].reverse()[n].type)),"entry function doesn't match uniform arguments")}const d=t.substring(0,2);(0,i.hu)(["vs","ps","gs"].includes(d),`invalid mode: "${d}"`);const f=await(0,u.X)(`file://${e.name}///${a}.fx`,y),g=await(0,l.J)(f,n),_=await(0,c.N)(g),x=new v.lG(f,g,n.includeResolver,n.defines);if(_.diagnosticReport.errors)return console.error(m.g.stringify(_.diagnosticReport)),null;const w=_.root.scope,A=w.findFunction(a,null),C=new h.u({...x,mode:d,constants:s}),P=h.R.translate(A,C),R=C.cbuffers.map((({name:e,register:t,size:n})=>{const{type:r}=w.findCbuffer(e),i=r.fields.map((e=>new p.q((0,o.Nl)(e.type),e.name,e.semantic,e.type.size,e.type.padding)));return new b.L(e,t,n,i)}));let L,O;switch(d){case"vs":let e=(0,o.Nl)(A.def.params[0].type);L=E.ex.VertexShader,O=new k.A(P,a,e,R);break;case"ps":L=E.ex.PixelShader,O=new T.y(P,a,R);break;default:(0,i.hu)(!1,"not implemeted")}S.push(L),M.push(O)}}_.push(new A.X([...d],S,M))}const{name:S}=e;t.name||=S;const C=L(r.techniques11[0].controls),P=new M.h(_),{meta:R}=t;return N(O(t.name,x.fN.Technique11Bundle,P,new w.c(R?.author,R?.source),C),t)}async function D(e,t,n){return I(e,t,n)}[s,o,a]=R.then?(await R)():R,r()}catch(F){r(F)}}))},GUxJ:(e,t,n)=>{"use strict";n.d(t,{Cw:()=>C,H9:()=>E,Lo:()=>x,TC:()=>M,Vd:()=>_,Ve:()=>A,ZJ:()=>b,lG:()=>P,pr:()=>y,qe:()=>k});var r=n("cOQ3"),i=n("6977"),s=n("1Yqr"),o=n("IJKq"),a=n("5CMk"),l=n("1Bqd"),c=n("cHyH"),u=n("Gjvx"),h=n("6wsJ"),d=n("Nk0z"),p=n("meSg"),f=n("Lmwj"),m=n("J5jW"),g=n("6gZf"),v=n("AVkT");function y(e){switch(e){case"int":return d.$e.IntValue;case"uint":return d.$e.UintValue;case"float":return d.$e.FloatValue;case"float2":return d.$e.Float2Value;case"float3":return d.$e.Float3Value;case"float4":return d.$e.Float4Value;case"color":return d.$e.ColorValue;case"texture2d":return d.$e.TextureValue;case"mesh":return d.$e.MeshValue}return(0,r.hu)(!1,"Unsupported control type"),null}function b(e){switch(e){case"int":return p.OI.IntValue;case"uint":return p.OI.UintValue;case"float":return p.OI.FloatValue;case"string":return p.OI.StringValue}return(0,r.hu)(!1,"Unsupported property type"),null}function _(e,t){switch(e){case"int":return new o.k(t);case"uint":return new s.H(t);case"float":return new a.r(t);case"float2":let e=t;return new c.U(e.x,e.y);case"float3":let n=t;return new u.I(n.x,n.y,n.z);case"float4":let r=t;return new h.K(r.x,r.y,r.z,r.w);case"color":let i=t,l=Math.max(0,Math.min(255,255*i.r)),d=Math.max(0,Math.min(255,255*i.g)),p=Math.max(0,Math.min(255,255*i.b)),v=Math.max(0,Math.min(255,255*i.a));return new f.Y(l,d,p,v);case"texture2d":return new m.P(t);case"mesh":return new g.X(t)}return(0,r.hu)(!1,"Unsupported control type"),null}function x(e,t){switch(e){case"int":return new o.k(t);case"uint":return new s.H(t);case"float":return new a.r(t);case"string":return new l.s(t)}return(0,r.hu)(!1,"Unsupported property type"),null}function w(e){switch(e){case d.$e.IntValue:return"int";case d.$e.UintValue:return"uint";case d.$e.FloatValue:return"float";case d.$e.Float2Value:return"float2";case d.$e.Float3Value:return"float3";case d.$e.Float4Value:return"float4";case d.$e.ColorValue:return"color";case d.$e.TextureValue:return"texture2d";case d.$e.MeshValue:return"mesh"}return(0,r.hu)(!1,"Unsupported control value type"),null}function S(e,t){switch(e){case d.$e.IntValue:case d.$e.UintValue:case d.$e.FloatValue:return t.value;case d.$e.Float2Value:let e=t;return{x:e.x,y:e.y};case d.$e.Float3Value:let n=t;return{x:n.x,y:n.y,z:n.z};case d.$e.Float4Value:let r=t;return{x:r.x,y:r.y,z:r.z,w:r.w};case d.$e.ColorValue:let i=t;return{r:i.r/255,g:i.g/255,b:i.b/255,a:i.a/255};case d.$e.TextureValue:case d.$e.MeshValue:return t.value}return(0,r.hu)(!1,"Unsupported control value type"),null}function T(e){let t={};return e.forEach((e=>{let n={},i=e.name,s=w(e.valueType);e.properties.forEach((e=>{const t=e.name,i=function(e,t){switch(e){case p.OI.IntValue:case p.OI.UintValue:case p.OI.FloatValue:case p.OI.StringValue:return t.value}return(0,r.hu)(!1,"Unsupported property value type"),null}(e.valueType,e.value);n[t]=i})),t[i]={name:i,type:s,properties:n}})),t}function E(e){const t=function(e){let t=null;return e instanceof Uint8Array?(t=new v.B,v.b.getRootAsBundle(new i.cZ(e)).unpackTo(t)):t=e,t}(e),n=T(t.controls),r=function(e){let t={};return e.forEach((e=>t[e.name]=S(e.valueType,e.value))),t}(t.controls),s=function(e){return e.map((({name:e,desc:t,data:n})=>({name:e,desc:t,data:n.map((({name:e,valueType:t,value:n})=>({name:e,type:w(t),value:S(t,n)})))})))}(t.presets);return{controls:n,values:r,presets:s}}function M(e){let t=[];for(let n in e.values){const r=e.values[n],i=[];switch(e.controls[n].type){case"int":case"uint":i.push(Math.round(Number(r)));break;case"float":i.push(r);break;case"float2":let e=r;i.push(e.x,e.y);break;case"float3":let t=r;i.push(t.x,t.y,t.z);break;case"float4":let n=r;i.push(n.x,n.y,n.z,n.w);break;case"color":let s=r;i.push(s.r,s.g,s.b,s.a)}t.push(`${n} = { ${i.join(", ")} }`)}return[...t,null].join(";\n")}function A(e,t){switch(e){case"int":case"uint":case"float":case"texture2d":return t;case"float2":case"float3":case"float4":case"color":return{...t}}return(0,r.hu)(!1,"Unsupported control type"),null}function C({r:e,g:t,b:n,a:r}){return[e,t,n,r]=[e,t,n,r].map((e=>Math.max(0,Math.min(255,255*e)))),n<<0|t<<8|e<<16}function k(e,t){t.r=(e>>16&255)/255,t.g=(e>>8&255)/255,t.b=(e>>0&255)/255}class P{constructor(e,t,n,i){this.textDocument=e,this.slastDocument=t,this.includeResolver=n,this.defines=i?.map((e=>(0,r.HD)(e)?{name:e}:e))}}},dnVx:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{$E:()=>T,$l:()=>x,Iu:()=>V,JF:()=>_,ki:()=>G,p2:()=>w,s1:()=>b,wp:()=>S});var i=n("cOQ3"),s=n("W5eQ"),o=n("k9uP"),a=n("A0ZU"),l=n("sg/z"),c=n("E5ji"),u=n("+H7Q"),h=n("/9BJ"),d=n("vIQR"),p=n("0mZ+"),f=n("4eqb"),m=n("PMu9"),g=n("ZrbQ"),v=n("p8vA"),y=e([m]);m=(y.then?(await y)():y)[0];const b=0,_=1,x=17,w=33,S=64-w,T=w-x,E=T-_,M=-1;function A(e,t,n){return e.set((0,f.Xc)(n.length),t),t+=4,e.set(n.split("").map((e=>e.charCodeAt(0))),t),t+=n.length}function C(e,t,n){return e.set((0,f.Xc)(n),t),t+=4}function k(e,t,n){return t=C(e,t,n.padding),t=A(e,t=C(e,t,n.size),n.semantic),t=P(e,t=A(e,t,n.name),n.type)}function P(e,t,n){t=C(e,t,n.size),t=C(e,t,n.length),t=C(e,t=A(e,t,n.name),n.fields.length);for(let r of n.fields)t=k(e,t,r);return t}function R(e){const{externs:t}=e,n=t.dump(),r=e=>12+e.name.length+4+e.fields.reduce(((e,t)=>{return e+(12+(n=t).semantic.length+4+n.name.length+r(n.type));var n}),0),i=4+n.reduce(((e,{name:t,ret:n,params:i})=>e+4+4+t.length+r(n)+4+i.reduce(((e,t)=>e+r(t)),0)),0)+4>>2,s=[u.EChunkType.k_Externs,i],o=new Uint32Array(s.length+i);o.set(s);const a=new Uint8Array(o.buffer,8);let l=C(a,0,n.length);for(let e=0;e<n.length;++e){const{id:t,name:r,ret:i,params:s}=n[e];l=C(a,l,t),l=A(a,l,r),l=P(a,l,i),l=C(a,l,s.length);for(let e of s)l=P(a,l,e)}return o.buffer}function L(e){const{constants:t}=e,n=t.dump(),r=4+n.map((e=>e.name.length+e.type.length+e.semantic.length+4+4+4+4+4+4)).reduce(((e,t)=>e+t),0)+4>>2,i=[u.EChunkType.k_Layout,r],s=new Uint32Array(i.length+r);s.set(i);const o=new Uint8Array(s.buffer,8);let a=C(o,0,n.length);for(let e=0;e<n.length;++e){const{name:t,offset:r,type:i,size:s,semantic:l}=n[e];a=A(o,a,t),a=A(o,a,i),a=A(o,a,l||""),a=C(o,a,r),a=C(o,a,s)}return s.buffer}function O(e){const{constants:t}=e,n=t.data,r=n.byteLength>>2,s=[u.EChunkType.k_Constants,r];(0,i.hu)(r<<2==n.byteLength);const o=new Uint32Array(s.length+r);return o.set(s),o.set(new Uint32Array(n.byteArray.buffer,0,n.byteLength>>2),s.length),o.buffer}function N(e){const{instructions:t}=e,n=[u.EChunkType.k_Code,t.length],r=new Uint32Array(n.length+t.length);return r.set(n),r.set(t.data,n.length),r.buffer}const I=new Uint8Array(0).buffer;function D(e){const{pipeline:t}=e,n=t.dumpShaders();if(0===n.length)return I;const r=4+n.map((({shader:e})=>e.name.length+e.ver.length+4+4+4+e.args.map((e=>4+e.type.length+4)).reduce(((e,t)=>e+t),0))).reduce(((e,t)=>e+t),0)+4>>2,s=[u.EChunkType.k_Shaders,r],o=new Uint32Array(s.length+r);o.set(s);const a=new Uint8Array(o.buffer,8);let l=C(a,0,n.length);for(let e=0;e<n.length;++e){const{name:t,ver:r,args:s}=n[e].shader;l=A(a,l,t),l=A(a,l,r),l=C(a,l,s.length);for(let e=0;e<s.length;++e)switch(l=A(a,l,s[e].type),s[e].type){case"int":case"uint":case"bool":l=C(a,l,+s[e].value);break;default:(0,i.hu)(!1,`unsupported constant type "${s[e].type}"`),l=C(a,l,0)}}return o.buffer}function F(e){const{pipeline:t}=e,n=t.dumpDepthStencilStates();if(0===n.length)return I;const r=4+n.map((e=>56)).reduce(((e,t)=>e+t),0)+4>>2,i=[u.EChunkType.k_DepthStencilStates,r],s=new Uint32Array(i.length+r);s.set(i);const o=new Uint8Array(s.buffer,8);let a=C(o,0,n.length);for(let e=0;e<n.length;++e){const t=n[e];a=C(o,a,+t.DepthEnable),a=C(o,a,+t.DepthWriteMask),a=C(o,a,+t.DepthFunc),a=C(o,a,+t.StencilEnable),a=C(o,a,+t.StencilReadMask),a=C(o,a,+t.StencilWriteMask),a=C(o,a,+t.FrontFace.StencilFailOp),a=C(o,a,+t.FrontFace.StencilDepthFailOp),a=C(o,a,+t.FrontFace.StencilPassOp),a=C(o,a,+t.FrontFace.StencilFunc),a=C(o,a,+t.BackFace.StencilFailOp),a=C(o,a,+t.BackFace.StencilDepthFailOp),a=C(o,a,+t.BackFace.StencilPassOp),a=C(o,a,+t.BackFace.StencilFunc)}return s.buffer}function z(e){const t=[L(e),O(e),N(e),R(e),D(e),F(e)].map((e=>new Uint8Array(e))),n=t.map((e=>e.byteLength)).reduce(((e,t)=>e+t));let r=new Uint8Array(n),i=0;return t.forEach((e=>{r.set(e,i),i+=e.byteLength})),r}function U(e,t){const{constants:n,debug:r,alloca:i,push:o,pop:a,addr:l,imove:c,ref:d,icode:p,instructions:f}=e;r.beginCompilationUnit("[todo]",t.def.returnType);const m=t.def;o(t,i(m.returnType.size));for(let e=0;e<m.params.length;++e){const t=m.params[e];if(t.type.usages.includes("out")||t.type.usages.includes("inout"))continue;const n=s.VD.parameterIndex(t)+_,o=t.type.size,a=l.loc({type:u.EAddrType.k_Input,inputIndex:n,addr:0,size:o}),h=i(o);c(h,a),r.map(m),d(t,h)}B(e,t),a();const[g]=f.back();return g!=h.K.k_Ret&&p(h.K.k_Ret),r.endCompilationUnit(),{code:z(e),cdl:r.dump()}}function B(e,t){const{pc:n,error:r,critical:l,constants:c,pipeline:p,externs:f,uavs:y,srvs:b,alloca:x,addr:w,debug:S,push:T,pop:A,open:C,close:k,deref:P,ref:R,icode:L,imove:O,iop4:N,iop3:I,iop2:D,iop1:F,iload:z,iconst_i32:U,iconst_f32:V,ret:G,depth:Z,instructions:H}=e,j={arithf(e,t,n,s){const o=Math.max(n.size,s.size)/v.Z.f32();if(n.size!=s.size)if(n.size===v.Z.f32())n=w.override(n,Array(o).fill(0));else{if(s.size!==v.Z.f32())return(0,i.hu)(!1,"vectors with differen length cannot be multipled"),g.Z.INVALID;s=w.override(s,Array(o).fill(0))}const a={"+":h.K.k_F32Add,"-":h.K.k_F32Sub,"*":h.K.k_F32Mul,"/":h.K.k_F32Div,"%":h.K.k_F32Mod}[e];return(0,i.Xq)(a)?(I(a,t,n,s),t):(r(null,m.VV.k_UnsupportedArithmeticExpr,{tooltip:`operation: ${e}`}),g.Z.INVALID)},arithi(e,t,n,s){const o=Math.max(n.size,s.size)/v.Z.f32();if(n.size!==s.size)if(n.size===v.Z.f32())n=w.override(n,Array(o).fill(0));else{if(s.size!==v.Z.f32())return(0,i.hu)(!1,"vectors with differen length cannot be multipled"),g.Z.INVALID;s=w.override(s,Array(o).fill(0))}const a={"+":h.K.k_I32Add,"-":h.K.k_I32Sub,"*":h.K.k_I32Mul,"/":h.K.k_I32Div,"%":h.K.k_I32Mod}[e];return(0,i.Xq)(a)?(I(a,t,n,s),t):(r(null,m.VV.k_UnsupportedArithmeticExpr,{tooltip:`operation ${e}`}),g.Z.INVALID)},mulf:(e,t,n)=>j.arithf("*",e,t,n),divf:(e,t,n)=>j.arithf("/",e,t,n),addf:(e,t,n)=>j.arithf("+",e,t,n),subf:(e,t,n)=>j.arithf("-",e,t,n),modf:(e,t,n)=>j.arithf("%",e,t,n),muli:(e,t,n)=>j.arithi("*",e,t,n),divi:(e,t,n)=>j.arithi("/",e,t,n),addi:(e,t,n)=>j.arithi("+",e,t,n),subi:(e,t,n)=>j.arithi("-",e,t,n),modi:(e,t,n)=>j.arithi("%",e,t,n),dotf(e,t,n){let r=x(Math.max(t.size,n.size)),i=j.mulf(r,t,n),s=i.size/v.Z.f32();O(e,w.shrink(i,v.Z.f32()));for(let t=1;t<s;++t){let n=t*v.Z.f32(),r=v.Z.f32();j.addf(e,e,w.sub(i,n,r))}return e},distancef(e,t,n){let r=x(t.size);return j.subf(r,t,n),j.lengthf(e,r),e},madi:(e,t,n,r)=>(N(h.K.k_I32Mad,e,t,n,r),e),noti:(e,t)=>(D(h.K.k_I32Not,e,t),e),mini:(e,t,n)=>(I(h.K.k_I32Min,e,t,n),e),maxi:(e,t,n)=>(I(h.K.k_I32Max,e,t,n),e),fracf:(e,t)=>(D(h.K.k_F32Frac,e,t),e),floorf:(e,t)=>(D(h.K.k_F32Floor,e,t),e),ceilf:(e,t)=>(D(h.K.k_F32Ceil,e,t),e),sinf:(e,t)=>(D(h.K.k_F32Sin,e,t),e),cosf:(e,t)=>(D(h.K.k_F32Cos,e,t),e),absf:(e,t)=>(D(h.K.k_F32Abs,e,t),e),sqrtf:(e,t)=>(D(h.K.k_F32Sqrt,e,t),e),powf:(e,t,n)=>(I(h.K.k_F32Pow,e,t,n),e),minf:(e,t,n)=>(I(h.K.k_F32Min,e,t,n),e),maxf:(e,t,n)=>(I(h.K.k_F32Max,e,t,n),e),stepf:(e,t,n)=>(I(h.K.k_F32GreaterThanEqual,e,n,t),e),clampf:(e,t,n,r)=>(I(h.K.k_F32Max,e,t,n),I(h.K.k_F32Min,e,e,r),e),saturatef:(e,t)=>(I(h.K.k_F32Max,e,t,V(0)),I(h.K.k_F32Min,e,e,V(1)),e),lengthf:(e,t)=>(j.dotf(e,t,t),j.sqrtf(e,e),e),normalizef(e,t){const n=x(v.Z.f32());return j.lengthf(n,t),j.divf(e,t,n),e},lerpf(e,t,n,r){(0,i.hu)(t.size===n.size);const s=t.size,o=s/v.Z.f32(),a=Array(o).fill(0);let l,c=V(1);r.size===v.Z.f32()?l=j.subf(c,c,r):((0,i.hu)(r.size===t.size),c=w.override(c,a),l=j.subf(x(e.size),c,r));let u=x(s);return j.mulf(u,n,r),j.mulf(e,t,l),j.addf(e,e,u),e},cross(e,t,n){let r=v.Z.f32(),i=x(r),s=x(r),o=x(3*r),a=w.sub(t,0*r,r),l=w.sub(t,1*r,r),c=w.sub(t,2*r,r),u=w.sub(n,0*r,r),h=w.sub(n,1*r,r),d=w.sub(n,2*r,r),p=w.sub(o,0*r,r),f=w.sub(o,1*r,r),m=w.sub(o,2*r,r);return j.mulf(i,l,d),j.mulf(s,c,h),j.subf(p,i,s),j.mulf(i,c,u),j.mulf(s,a,d),j.subf(f,i,s),j.mulf(i,a,h),j.mulf(s,l,u),j.subf(m,i,s),O(e,o),e}};function W(e){const t=e.type.isUniform(),n=0!=(e.usageFlags&o.K.k_Cbuffer),r=e.initExpr&&e.initExpr.isConst(),i=a.isPipelineState(e.type);return e.isGlobal()&&(t||n||r)&&!i}function q(e){if(e.isParameter()&&(e.type.usages.includes("out")||e.type.usages.includes("inout")))return 1===Z()?u.EAddrType.k_Input:u.EAddrType.k_Registers;if(e.isGlobal()){if(W(e))return u.EAddrType.k_Input;if(a.isUAV(e.type))return u.EAddrType.k_Input;if(a.isBuffer(e.type))return u.EAddrType.k_Input;if(a.isTexture(e.type))return u.EAddrType.k_Input;if(a.isPipelineState(e.type))return u.EAddrType.k_PipelineStates;l(e.sourceNode,m.VV.k_AddressCannotBeResolved,{tooltip:`could not resolve address type for '${e.toCode()}'`})}return(0,i.hu)(e.isLocal()),u.EAddrType.k_Registers}const K={r:0,x:0,s:0,g:1,y:1,t:1,b:2,z:2,p:2,a:3,w:3,q:3};function X(e){const t=e.decl,n=t.def,s=n.returnType,o=x(s.size);let l;if("InterlockedAdd"===t.name)l=!1;else l=!0;const c=function(e,t){const n=e.decl.def,r=[];for(let i=0;i<n.params.length;++i){let n=Y(e.args[i]);n.type!==u.EAddrType.k_Registers&&t&&(n=z(n)),r.push(n)}return r}(e,l);switch(t.name){case"asuint":case"asfloat":case"asint":return c[0];case"mul":return j.mulf(o,c[0],c[1]);case"dot":return j.dotf(o,c[0],c[1]);case"frac":return j.fracf(o,c[0]);case"sin":return j.sinf(o,c[0]);case"cos":return j.cosf(o,c[0]);case"abs":return j.absf(o,c[0]);case"sqrt":return j.sqrtf(o,c[0]);case"pow":return j.powf(o,c[0],c[1]);case"normalize":return j.normalizef(o,c[0]);case"length":return j.lengthf(o,c[0]);case"floor":return j.floorf(o,c[0]);case"ceil":return j.ceilf(o,c[0]);case"distance":return j.distancef(o,c[0],c[1]);case"min":return a.isFloatBasedType(n.params[0].type)?j.minf(o,c[0],c[1]):((0,i.hu)(a.isIntBasedType(n.params[0].type)||a.isUintBasedType(n.params[1].type)),j.mini(o,c[0],c[1]));case"max":return a.isFloatBasedType(n.params[0].type)?j.maxf(o,c[0],c[1]):((0,i.hu)(a.isIntBasedType(n.params[0].type)||a.isUintBasedType(n.params[0].type)),j.maxi(o,c[0],c[1]));case"step":return(0,i.hu)(a.isFloatBasedType(n.params[0].type)),j.stepf(o,c[0],c[1]);case"clamp":return(0,i.hu)(a.isFloatBasedType(n.params[0].type)),j.clampf(o,c[0],c[1],c[2]);case"saturate":return(0,i.hu)(a.isFloatBasedType(n.params[0].type)),j.saturatef(o,c[0]);case"lerp":return j.lerpf(o,c[0],c[1],c[2]);case"cross":return j.cross(o,c[0],c[1]);case"mod":return a.isFloatBasedType(n.params[0].type)?j.modf(o,c[0],c[1]):((0,i.hu)(a.isIntBasedType(n.params[0].type)||a.isUintBasedType(n.params[0].type)),j.modi(o,c[0],c[1]));case"InterlockedAdd":{(0,i.hu)(3===n.params.length),(0,i.hu)(c[0].type===u.EAddrType.k_PointerInput,"destination must be UAV address"),(0,i.hu)(c[0].size===v.Z.i32(),"only int/uint values are supported"),c[1].type!==u.EAddrType.k_Registers&&(c[1]=z(c[1]));let e=c[2];c[2].type!==u.EAddrType.k_Registers&&(e=x(v.Z.i32())),O(e,c[0]);const t=j.addi(x(v.Z.i32()),e,c[1]);return O(c[0],t),c[2]!==e&&O(c[2],e),g.Z.INVALID}case"DecrementCounter":{const t=Y(e.callee),n=w.shrink(t,v.Z.i32()),r=z(n),i=j.addi(x(v.Z.i32()),r,U(-1));return O(n,i),i}case"IncrementCounter":{const t=Y(e.callee),n=w.shrink(t,v.Z.i32()),r=z(n),i=j.addi(x(v.Z.i32()),r,U(1));return O(n,i),r}case"Append":{const{callee:t,args:n}=e,r=Y(t),s=w.shrink(r,v.Z.i32());(0,i.hu)(1===n.length);const o=Y(n[0]),a=z(s),l=n[0].type.size,c=w.sub(r,v.Z.i32()),u=w.subPointer(c,a,l);return O(u,o),j.addi(a,a,U(1)),O(s,a),u}case"GetDimensions":{const{callee:t}=e,n=Y(t);(0,i.hu)(t.type.name.includes("Texture2D")),(0,i.hu)(3===c.length);const r=w.sub(n,0,v.Z.i32()),s=w.sub(n,v.Z.i32(),v.Z.i32()),o=c[1],a=c[2];return O(o,r),O(a,s),g.Z.INVALID}case"Load":{const{callee:t}=e,n=Y(t);(0,i.hu)(t.type.name.includes("Texture2D")),(0,i.hu)(1===c.length);let r=c[0];r.type!==u.EAddrType.k_Registers&&(r=z(r));const s=x(4*v.Z.f32());return L(h.K.k_I32TextureLoad,s,n.inputIndex,r),s}}return r(e.sourceNode,m.VV.k_UnsupportedIntrinsic,{name:e.decl.name}),g.Z.INVALID}function Y(t){switch(t.instructionType){case d.rO.k_InitExpr:{const e=t;if(e.isArray())return r(t.sourceNode,m.VV.k_UnsupportedExprType,{tooltip:"arrays are not yet supported"}),g.Z.INVALID;return Y(e.args[0])}case d.rO.k_BoolExpr:{const e=t.value?1:0;return U(e)}case d.rO.k_IntExpr:{const e=t.value;return U(e)}case d.rO.k_FloatExpr:{const e=t.value;return V(e)}case d.rO.k_StringExpr:{const e=t.value?.slice(1,-1);(0,i.hu)(e.length>0);const n=c.derefCString(e);return U(n.addr)}case d.rO.k_NullExpr:return U(0);case d.rO.k_IdExpr:{let e=t;(0,i.hu)(e.decl===s.th.unwind(e));const n=e.decl.type.size,r=s.th.unwind(e),o=q(r);switch(o){case u.EAddrType.k_Registers:return P(e.decl);case u.EAddrType.k_Input:{if(W(r))return c.deref(r);if(a.isUAV(r.type))return y.deref(r);if(a.isBuffer(r.type))return b.deref(r);if(a.isTexture(r.type))return b.deref(r);const e=0,t=s.VD.parameterIndex(r)+_;return(0,i.hu)(s.VD.parameterIndex(r)<E),w.loc({inputIndex:t,addr:e,size:n,type:o})}case u.EAddrType.k_PipelineStates:{const e=p.deref(r);return U(e)}}return l(e.sourceNode,m.VV.k_UnsupportedAddressType,{tooltip:`type: ${o}`}),g.Z.INVALID}case d.rO.k_ComplexExpr:return Y(t.expr);case d.rO.k_ArithmeticExpr:{const e=t,n=x(e.type.size),r=e.operator,s=e.left,o=e.right;(0,i.hu)(a.isScalarType(s.type)||a.isVectorType(s.type)),(0,i.hu)(a.isScalarType(o.type)||a.isVectorType(o.type));let l=Y(s);l.type!==u.EAddrType.k_Registers&&(l=z(l),S.map(s));let c=Y(o);if(c.type!==u.EAddrType.k_Registers&&(c=z(c),S.map(o)),a.isFloatBasedType(s.type))(0,i.hu)(a.isFloatBasedType(o.type)),j.arithf(r,n,l,c);else{if(!a.isIntBasedType(s.type)&&!a.isUintBasedType(s.type))return(0,i.hu)(!1),g.Z.INVALID;(0,i.hu)(a.isIntBasedType(o.type)||a.isUintBasedType(o.type)),j.arithi(r,n,l,c)}return S.map(e),n}case d.rO.k_AssignmentExpr:{const e=t,n=e.type.size;(0,i.hu)(n%v.Z.i32()==0);const o=Y(e.left);(0,i.hu)(s.NQ.isExpression(e.right),d.rO[e.right.instructionType]);let l=Y(e.right);l.type!==u.EAddrType.k_Registers&&(l=z(l),S.map(e.right));const c=a.isFloatBasedType(t.type);switch(e.operator){case"=":O(o,l);break;case"+=":c?j.addf(o,o,l):j.addi(o,o,l);break;case"-=":c?j.subf(o,o,l):j.subi(o,o,l);break;case"*=":c?j.mulf(o,o,l):j.muli(o,o,l);break;case"/=":c?j.divf(o,o,l):j.divi(o,o,l);break;default:r(null,m.VV.k_UnsupportedAssigmentOperator,{tooltip:`operator: ${e.operator}`})}return S.map(e),S.ns(),o}case d.rO.k_PostfixArithmeticExpr:{const e=t,n=e.expr,i=e.operator,s=e.type.size;let o=Y(n);if(o.type!==u.EAddrType.k_Registers&&(o=z(o)),a.isIntBasedType(n.type))switch(i){case"++":{const t=O(x(s),o);return j.arithi("+",o,o,U(1)),S.map(e),t}case"--":{const t=O(x(s),o);return j.arithi("-",o,o,U(1)),S.map(e),t}}else switch(i){case"++":{const t=O(x(s),o);return j.arithf("+",o,o,V(1)),S.map(e),t}case"--":{const t=O(x(s),o);return j.arithf("-",o,o,V(1)),S.map(e),t}}return r(e.sourceNode,m.VV.k_UnsupportedUnaryExpression,{tooltip:`unsupported type of unary expression found: '${i}'(${e.toCode()})`}),g.Z.INVALID}case d.rO.k_UnaryExpr:{const e=t,n=e.expr,i=e.operator,s=e.type.size;let o=Y(n);if(o.type!==u.EAddrType.k_Registers&&(o=z(o)),a.isBoolBasedType(n.type)&&"!"===i){const t=j.noti(x(s),o);return S.map(e),t}if(a.isIntBasedType(n.type))switch(i){case"-":{const t=j.arithi("*",x(s),o,U(-1));return S.map(e),t}case"+":return o;case"++":{const t=j.arithi("+",o,o,U(1));return S.map(e),t}case"--":{const t=j.arithi("-",o,o,U(1));return S.map(e),t}}else switch(i){case"-":{const t=j.arithf("*",x(s),o,V(-1));return S.map(e),t}case"++":{const t=j.arithf("+",o,o,V(1));return S.map(e),t}case"--":{const t=j.arithf("-",o,o,V(1));return S.map(e),t}}return r(e.sourceNode,m.VV.k_UnsupportedUnaryExpression,{tooltip:`unsupported type of unary expression found: '${i}'(${e.toCode()})`}),g.Z.INVALID}case d.rO.k_LogicalExpr:{const e=t;let n={"||":h.K.k_I32LogicalOr,"&&":h.K.k_I32LogicalAnd}[e.operator];const{left:r,right:i}=e;let s=Y(r);s.type!==u.EAddrType.k_Registers&&(s=z(s),S.map(r));let o=Y(i);o.type!==u.EAddrType.k_Registers&&(o=z(o),S.map(i));const a=e.type.size,l=x(a);return I(n,l,s,o),S.map(e),w.loc({addr:l,size:a})}case d.rO.k_RelationalExpr:{const e=t,n={"<":h.K.k_U32LessThan,">=":h.K.k_U32GreaterThanEqual,"==":h.K.k_I32Equal,"!=":h.K.k_I32NotEqual},i={"<":h.K.k_I32LessThan,">=":h.K.k_I32GreaterThanEqual,"==":h.K.k_I32Equal,"!=":h.K.k_I32NotEqual},o={"<":h.K.k_F32LessThan,">=":h.K.k_F32GreaterThanEqual,"==":h.K.k_I32Equal,"!=":h.K.k_I32NotEqual};let l,{left:c,right:d}=e,p=e.operator;if(">"===p&&(p="<",[d,c]=[c,d]),"<="===p&&(p=">=",[d,c]=[c,d]),s.V5.equals(c.type,a.T_INT)){if(l=i[p],!s.V5.equals(d.type,a.T_INT)&&!s.V5.equals(d.type,a.T_UINT))return r(t.sourceNode,m.VV.k_UnsupportedRelationalExpr,{}),g.Z.INVALID}else if(s.V5.equals(c.type,a.T_UINT)){if(l=n[p],!s.V5.equals(d.type,a.T_UINT)&&!s.V5.equals(d.type,a.T_INT))return r(t.sourceNode,m.VV.k_UnsupportedRelationalExpr,{}),g.Z.INVALID}else if(s.V5.equals(c.type,a.T_FLOAT)){if(l=o[p],!s.V5.equals(d.type,a.T_FLOAT))return r(t.sourceNode,m.VV.k_UnsupportedRelationalExpr,{}),g.Z.INVALID}else if(s.V5.equals(c.type,a.T_BOOL)&&(l=i[p],!s.V5.equals(d.type,a.T_BOOL)))return r(t.sourceNode,m.VV.k_UnsupportedRelationalExpr,{}),g.Z.INVALID;if(!l)return r(t.sourceNode,m.VV.k_UnsupportedRelationalExpr,{}),g.Z.INVALID;let f=Y(c);f.type!==u.EAddrType.k_Registers&&(f=z(f),S.map(c));let v=Y(d);v.type!==u.EAddrType.k_Registers&&(v=z(v),S.map(d));const y=e.type.size,b=x(y);return I(l,b,f,v),S.map(e),w.loc({addr:b,size:y})}case d.rO.k_CastExpr:{const e=t;if(e.isUseless())return console.warn(`Useless cast found: ${e.toCode()}`),Y(e.expr);const n=e.expr.type,i=e.type;let o;if(s.V5.equals(i,a.T_BOOL)){const t=e.type.size,n=x(t);let r=Y(e.expr);return r.type!==u.EAddrType.k_Registers&&(r=z(r)),I(h.K.k_I32NotEqual,n,r,U(0)),S.map(e),w.loc({addr:n,size:t})}if(s.V5.equals(n,a.T_FLOAT))if(s.V5.equals(i,a.T_INT))o=h.K.k_F32ToI32;else{if(!s.V5.equals(i,a.T_UINT))return r(e.sourceNode,m.VV.k_UnsupoortedTypeConversion,{info:e.toCode()}),g.Z.INVALID;o=h.K.k_F32ToU32}else if(s.V5.equals(n,a.T_INT)){if(!s.V5.equals(i,a.T_FLOAT))return s.V5.equals(i,a.T_UINT)?Y(e.expr):(r(e.sourceNode,m.VV.k_UnsupoortedTypeConversion,{info:e.toCode()}),g.Z.INVALID);o=h.K.k_I32ToF32}else if(s.V5.equals(n,a.T_UINT)){if(!s.V5.equals(i,a.T_FLOAT))return s.V5.equals(i,a.T_INT)?Y(e.expr):(r(e.sourceNode,m.VV.k_UnsupoortedTypeConversion,{info:e.toCode()}),g.Z.INVALID);o=h.K.k_U32ToF32}const l=e.type.size,c=x(l);let d=Y(e.expr);return d.type!==u.EAddrType.k_Registers&&(d=z(d)),D(o,c,d),S.map(e),w.loc({addr:c,size:l})}case d.rO.k_PostfixIndexExpr:{const e=t,{element:n,index:r}=e;(0,i.hu)(s.V5.equals(r.type,a.T_INT)||s.V5.equals(r.type,a.T_UINT)),(0,i.hu)(!(0,i.Ft)(n.type.arrayElementType));{let t=Y(n);a.isUAV(n.type)&&(t=w.sub(t,v.Z.i32()));let s=n.type.arrayElementType.size;(0,i.hu)(s%v.Z.i32()==0,`all sizes must be multiple of ${v.Z.i32()}`);let o=Y(r);const l=w.subPointer(t,o,s);return S.map(e),l}}case d.rO.k_PostfixPointExpr:{const e=t,{element:n,postfix:r}=e,o=Y(n);let{size:c,padding:u}=r.type,h=null;if(e.isConstExpr()){return a.isVectorType(n.type)||a.isScalarType(n.type)?((0,i.hu)(r.name.split("").map((e=>K[e])).map((e=>e>=0&&e<4)).reduce(((e,t)=>e&&t))),h=(e=>e.split("").map((e=>K[e])))(r.name),(0,i.hu)(u===s.NQ.UNDEFINE_PADDING,"padding of swizzled components must be undefined"),w.override(o,h)):w.sub(o,u,c)}return l(t.sourceNode,m.VV.k_NotImplemented,{}),o}case d.rO.k_FunctionCallExpr:{const n=t,r=n.decl,s=r.def,o=s.returnType;if(r.attrs.find((({name:e})=>"extern"===e))){S.ns();const e=function(e){const t=e.decl.def,n=t.returnType.size+t.params.reduce(((e,t)=>e+t.type.size),0);(0,i.hu)(n>=0&&n<=256);const r=x(n);let s=w.sub(r,t.returnType.size);(0,i.hu)(t.params.length==e.args.length);for(let n=0;n<t.params.length;++n){const r=e.args[n],o=t.params[n],a=o.type;(0,i.hu)(r.type.size===o.type.size),(0,i.hu)(r.type.size%4==0);const l=Y(r);O(w.sub(s,0,a.size),l),n!==t.params.length-1&&(s=w.sub(s,a.size))}const o=f.add(t);return L(h.K.k_I32ExternCall,o,r),w.sub(r,0,t.returnType.size)}(n);return S.map(n),e}if(r.instructionType===d.rO.k_SystemFunctionDecl){S.ns();const e=X(n);return S.map(n),e}const a=x(o.size),l=s.params,c=l.map(((e,t)=>t<n.args.length?n.args[t]:e.initExpr)),p=c.map((e=>Y(e))).map((e=>e.type===u.EAddrType.k_Registers?e:z(e)));T(r,a);for(let e=0;e<s.params.length;++e){const t=p[e];if(l[e].type.usages.includes("out")||l[e].type.usages.includes("inout"))R(l[e],t);else{const n=l[e].type.size,r=x(n);O(r,t),S.map(c[e]),R(l[e],r)}}return B(e,r),A(),a}case d.rO.k_ConditionalExpr:{const{condition:e,left:r,right:o}=t;(0,i.hu)(s.V5.equals(r.type,o.type));let a=r.type.size,l=x(a),c=Y(e);(0,i.hu)(c.size===v.Z.bool()),c.type!==u.EAddrType.k_Registers&&(c=z(c),S.map(e)),F(h.K.k_JumpIf,c);let d=n();L(h.K.k_Jump,M);let p=Y(r);p.type!==u.EAddrType.k_Registers&&(p=z(p),S.map(r)),O(l,p),S.map(r);let f=n()+1;H.replace(d,h.K.k_Jump,[f]),d=n(),L(h.K.k_Jump,M);let m=Y(o);return m.type!==u.EAddrType.k_Registers&&(m=z(m),S.map(o)),O(l,m),S.map(o),f=n(),H.replace(d,h.K.k_Jump,[f]),w.loc({addr:l,size:a})}case d.rO.k_ConstructorCallExpr:{const e=t,n=e.type,r=e.args,o=n.size,l=x(o);switch(n.name){case"float":case"float1":case"float2":case"float3":case"float4":case"int":case"int1":case"int2":case"int3":case"int4":case"uint":case"uint1":case"uint2":case"uint3":case"uint4":case"bool":case"bool2":case"bool3":case"bool4":if(1===r.length){(0,i.hu)(s.NQ.isExpression(r[0]),d.rO[r[0].instructionType]);let o=Y(r[0]);if(o.type!==u.EAddrType.k_Registers&&(o=z(o),S.map(r[0])),a.isFloatBasedType(r[0].type)!==a.isFloatBasedType(n)){const e=a.isFloatBasedType(n)?h.K.k_I32ToF32:h.K.k_F32ToI32;(0,i.hu)(r[0].type.size===v.Z.i32()||r[0].type.size===t.type.size);let s=x(o.size);D(e,s,o),o=s}const c=a.isFloatBasedType(n)?v.Z.f32():v.Z.i32();let p=n.size/c,f=null;o.size===c?(f=[...Array(p).fill(0)],o=w.override(o,f)):(f=[...Array(p).keys()],o=w.override(o,f)),O(l,o),S.map(e)}else{let t=0;for(let e=0;e<r.length;++e){(0,i.hu)(s.NQ.isExpression(r[e]),d.rO[r[e].instructionType]);let o=Y(r[e]);if(o.type!==u.EAddrType.k_Registers&&(o=z(o),S.map(r[e])),a.isFloatBasedType(r[e].type)!==a.isFloatBasedType(n)){const t=a.isFloatBasedType(n)?h.K.k_I32ToF32:h.K.k_F32ToI32;(0,i.hu)(r[e].type.size===v.Z.i32());let s=x(o.size);D(t,s,o),o=s}O(w.sub(l,t,o.size),o),t+=r[e].type.size}S.map(e)}return w.loc({addr:l,size:o})}return console.warn(`Unknown constructor found: ${e.toCode()}`),g.Z.INVALID}case d.rO.k_CompileShader11Expr:{const e=t,n=p.derefShader11(e);return U(n)}default:return console.warn(`Unknown expression found: ${t.instructionName} (${t.toCode()})`),g.Z.INVALID}}!function e(t){if(!(0,i.Ft)(t))switch(t.instructionType){case d.rO.k_VariableDecl:{let e=t;if((0,i.Ft)(e.initExpr))return void R(e,x(e.type.size));let n=Y(e.initExpr);return n.type!==u.EAddrType.k_Registers&&(S.ns(),n=z(n),S.map(e.initExpr),S.ns()),void R(e,n)}case d.rO.k_DeclStmt:return void t.declList.forEach(e);case d.rO.k_IfStmt:{let r=t,{cond:s,conseq:o,contrary:a}=r,l=Y(s);(0,i.hu)(l.size===v.Z.bool()),l.type!==u.EAddrType.k_Registers&&(l=z(l)),F(h.K.k_JumpIf,l);let c=n();L(h.K.k_Jump,M),e(o);let d=n()+(a?1:0);return H.replace(c,h.K.k_Jump,[d]),void(a&&(c=n(),L(h.K.k_Jump,M),e(a),d=n(),H.replace(c,h.K.k_Jump,[d])))}case d.rO.k_ReturnStmt:{let e=t;const n=e.expr;if(!(0,i.Ft)(n)){let e=Y(n);e.type!==u.EAddrType.k_Registers&&(e=z(e),S.map(n));const t=G();(0,i.hu)(e.size===G().size),O(t,e),S.map(n)}return S.ns(),L(h.K.k_Ret),void S.map(e)}case d.rO.k_StmtBlock:{C();let n=t;for(let t of n.stmtList)e(t);return void k()}case d.rO.k_FunctionDecl:{let n=t;n.impl||(n=n.scope.findFunctionInScope(n));n.def;return void e(n.impl)}case d.rO.k_ExprStmt:return void Y(t.expr);case d.rO.k_ForStmt:{const r=t,{init:o,cond:l,step:c,body:d}=r;C(),s.NQ.isExpression(o)?Y(o):e(o),(0,i.hu)(s.V5.equals(l.type,a.T_BOOL));let p=n(),f=Y(l);(0,i.hu)(f.size===v.Z.bool()),f.type!==u.EAddrType.k_Registers&&(f=z(f)),F(h.K.k_JumpIf,f);let m=n();L(h.K.k_Jump,M),e(d),Y(c),L(h.K.k_Jump,p);let g=n();return H.replace(m,h.K.k_Jump,[g]),void k()}default:console.warn(`Unknown statement found: ${t.instructionName} (${t.toCode()})`)}}(t)}function V(e,t){let n,r;switch(arguments.length){case 2:{let[e,t]=arguments;r=e.root.scope.findFunction(t,null),n=e.uri}break;case 1:[r]=arguments,(0,i.hu)(r),n=r.sourceNode?.loc?.start.file;break;default:(0,i.hu)(!1)}const s=(0,m.RY)(n);let o=null;try{(0,i.$V)(r)||s.critical(r.sourceNode,m.VV.k_EntryPointNotFound,{}),o=U(s,r)}catch(e){if(!(e instanceof p.V))throw e}const a=s.diag.resolve();return{uri:n,diagnosticReport:a,program:o}}async function G(e,t){const n="anonymous",r=`auto anonymous() { return (${e}); }`,i=await(0,c.X)("://expression",r),s=await(0,l.x)(i,void 0,t);return s.diagnosticReport.errors?(console.error(p.g.stringify(s.diagnosticReport)),null):V(s,n)}r()}catch(Z){r(Z)}}))},qOq6:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{ZP:()=>f});var i=n("cOQ3"),s=n("A0ZU"),o=n("+H7Q"),a=n("vIQR"),l=n("dnVx"),c=n("4eqb"),u=n("ZrbQ"),h=e([l]);l=(h.then?(await h)():h)[0];class d{constructor(){this.byteArray=new Uint8Array(4),this.byteLength=0}get byteCapacity(){return this.byteArray.byteLength}check(e){let t=this.byteLength+e;if(!(t<=this.byteCapacity)){var n=this.byteArray,r=new Uint8Array(Math.max(t,2*this.byteCapacity));r.set(n),this.byteArray=r}}addUniform(e,t,n=null){this.check(e),n&&this.byteArray.set(n,this.byteLength),this.byteLength+=e}}class p{constructor(){this._data=new d,this._knownConstants=[]}deref(e){(0,i.hu)(e.isGlobal()&&(e.type.isUniform()||e.isConstant()));const{name:t,semantic:n,initExpr:r,type:{size:c}}=e;let h=this._knownConstants.find((e=>e.name===t));if(!h){let o=null,l=null;if(!(0,i.Ft)(r))if(e.type.isNotBaseArray())(0,i.hu)(!1,"arrays are not yet supported (!)");else switch(r.type.name){case s.T_FLOAT.name:l=new Float32Array([r.value]);break;case s.T_UINT.name:l=new Uint32Array([r.value]);break;case s.T_BOOL.name:const e=r.value;l=new Int32Array([e?1:0]);break;case s.T_INT.name:l=new Int32Array([r.value]);break;case s.T_FLOAT2.name:case s.T_FLOAT3.name:case s.T_FLOAT4.name:(0,i.hu)(r.instructionType===a.rO.k_InitExpr),l=new Float32Array(r.args.map((e=>e.value)));break;case s.T_INT2.name:case s.T_INT3.name:case s.T_INT4.name:(0,i.hu)(r.instructionType===a.rO.k_InitExpr),l=new Int32Array(r.args.map((e=>e.value)));break;default:return(0,i.hu)(!1,"unsupported"),u.Z.INVALID}o=this.addUniform(c,`${t}${n?`:${n}`:""}`,l);const{addr:d}=o,p=e.type.name;h={name:t,semantic:n,offset:d,size:c,type:p},this._knownConstants.push(h)}return new u.Z({type:o.EAddrType.k_Input,inputIndex:l.s1,addr:h.offset,size:c})}derefCString(e){let t=`"${e}"`,n=4+e.length+1+3>>2<<2;let r=this._knownConstants.find((e=>e.name===t));if(!r){let i=new Uint8Array(n);i.set([...(0,c.Xc)(e.length),...e.split("").map((e=>e.charCodeAt(0))),0]);let s=this.addUniform(n,`"${e}"`,i);const{addr:o}=s;r={name:t,offset:o,size:n,type:"string",semantic:""},this._knownConstants.push(r)}return new u.Z({type:o.EAddrType.k_Input,inputIndex:l.s1,addr:r.offset,size:n})}addUniform(e,t,n=null){const r=this._data.byteLength;return this._data.addUniform(e,t,n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):null),new u.Z({type:o.EAddrType.k_Input,inputIndex:l.s1,addr:r,size:e})}get data(){return this._data}get size(){return this._data.byteLength}dump(){return this._knownConstants}}const f=p;r()}catch(e){r(e)}}))},PMu9:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{RY:()=>T,VV:()=>i});var i,s,o=n("cOQ3"),a=n("+H7Q"),l=n("/9BJ"),c=n("DIkA"),u=n("0mZ+"),h=n("4eqb"),d=n("qOq6"),p=n("prdm"),f=n("MjXi"),m=n("ZrbQ"),g=n("p8vA"),v=n("+nD5"),y=n("LvtK"),b=n("c1OO"),_=n("iHBS"),x=n("EYeK"),w=e([d,y,b,_]);[d,y,b,_]=w.then?(await w)():w,function(e){e[e.k_UnsupportedConstantType=0]="k_UnsupportedConstantType",e[e.k_UnsupportedExprType=1]="k_UnsupportedExprType",e[e.k_UnsupoortedTypeConversion=2]="k_UnsupoortedTypeConversion",e[e.k_UnsupportedArithmeticExpr=3]="k_UnsupportedArithmeticExpr",e[e.k_UnsupportedRelationalExpr=4]="k_UnsupportedRelationalExpr",e[e.k_UnsupportedIntrinsic=5]="k_UnsupportedIntrinsic",e[e.k_UnsupportedUnaryExpression=6]="k_UnsupportedUnaryExpression",e[e.k_UnsupportedAssigmentOperator=7]="k_UnsupportedAssigmentOperator",e[e.k_UnsupportedAddressType=8]="k_UnsupportedAddressType",e[e.k_AddressCannotBeResolved=9]="k_AddressCannotBeResolved",e[e.k_EntryPointNotFound=10]="k_EntryPointNotFound",e[e.k_NotImplemented=11]="k_NotImplemented"}(i||(i={})),s||(s={});class S extends u.g{constructor(){super("Translator Diagnostics","T")}resolveFilename(e,t,n){return"[unknown]"}resolveRange(e,t,n){return{start:{line:0,column:0,file:null},end:{line:0,column:0,file:null}}}diagnosticMessages(){return{}}resolveDescription(e,t,n){let r=this.diagnosticMessages();if((0,o.$V)(r[e]))return super.resolveDescription(e,t,n);let{loc:a,...l}=n;return t==c.D.k_Warning?`${s[e]}: ${JSON.stringify(l)}`:`${i[e]}:${a?.start.line}:${a?.start.column}: ${JSON.stringify(l)}`}}function T(e=null){console.assert(e,"no debug info?!");let t=0;const n=[],r=new f.Z,i=new d.ZP,s=new x.Vv,c=new b.D,u=new y.X,w=new _.H,T=new S,E=e=>(0,o.$V)(e)?(0,o.Xq)(e.loc)?e.loc:E(e.children[e.children.length-1]):null,M=()=>n[n.length-1],A=()=>r.pc,C=(0,p.ZP)(A);function k(e){if(0===e)return m.Z.INVALID;const n=F.loc({type:a.EAddrType.k_Registers,addr:t,size:e});return t+=e,n}function P(e,...t){e===l.K.k_Ret&&M()?.retRequests.push(A()),C.step(),r.add(e,t.map(Number))}function R(e,t){switch((0,o.hu)(t.length===e.length,`source size is ${t.size} and less then the requested size ${e.size}.`),e.type){case a.EAddrType.k_Registers:switch(t.type){case a.EAddrType.k_Registers:(0,o.hu)(e.type===a.EAddrType.k_Registers);for(let n=0;n<e.length;++n)P(l.K.k_I32LoadRegister,e.addr+(e.swizzle?e.swizzle[n]:n)*g.Z.i32(),t.addr+(t.swizzle?t.swizzle[n]:n)*g.Z.i32());break;case a.EAddrType.k_Input:(0,o.hu)(e.type===a.EAddrType.k_Registers);for(let n=0;n<e.length;++n)P(l.K.k_I32LoadInput,t.inputIndex,e.addr+(e.swizzle?e.swizzle[n]:n)*g.Z.i32(),t.addr+(t.swizzle?t.swizzle[n]:n)*g.Z.i32());break;case a.EAddrType.k_PointerRegisters:(0,o.hu)(e.type===a.EAddrType.k_Registers);for(let n=0;n<e.length;++n)P(l.K.k_I32LoadRegistersPointer,e.addr+(e.swizzle?e.swizzle[n]:n)*g.Z.i32(),t.addr,(t.swizzle?t.swizzle[n]:n)*g.Z.i32());break;case a.EAddrType.k_PointerInput:(0,o.hu)(e.type===a.EAddrType.k_Registers);for(let n=0;n<e.length;++n)P(l.K.k_I32LoadInputPointer,t.inputIndex,e.addr+(e.swizzle?e.swizzle[n]:n)*g.Z.i32(),t.addr,(t.swizzle?t.swizzle[n]:n)*g.Z.i32());break;default:(0,o.hu)(!1,"unsupported memory type found.")}break;case a.EAddrType.k_Input:(0,o.hu)(t.type===a.EAddrType.k_Registers);for(let n=0;n<e.length;++n)P(l.K.k_I32StoreInput,e.inputIndex,e.addr+(e.swizzle?e.swizzle[n]:n)*g.Z.i32(),t.addr+(t.swizzle?t.swizzle[n]:n)*g.Z.i32());break;case a.EAddrType.k_PointerInput:(0,o.hu)(t.type===a.EAddrType.k_Registers);for(let n=0;n<e.length;++n)P(l.K.k_I32StoreInputPointer,e.inputIndex,e.addr,t.addr+(t.swizzle?t.swizzle[n]:n)*g.Z.i32(),(e.swizzle?e.swizzle[n]:n)*g.Z.i32());break;case a.EAddrType.k_PointerRegisters:(0,o.hu)(t.type===a.EAddrType.k_Registers);for(let n=0;n<e.length;++n)P(l.K.k_I32StoreRegisterPointer,e.addr,t.addr+(t.swizzle?t.swizzle[n]:n)*g.Z.i32(),(e.swizzle?e.swizzle[n]:n)*g.Z.i32());break;default:(0,o.hu)(!1,"unsupported memory type found.")}return e}function L(e){return(0,o.hu)(e.type!==a.EAddrType.k_Registers),R(k(e.size),e)}function O(e,t,n){return(0,o.hu)(e.type===a.EAddrType.k_Registers),P(l.K.k_I32SetConst,e.addr+(e.swizzle?e.swizzle[0]:0)*g.Z.i32(),t,n),e}function N(e){return O(k(g.Z.i32()),e,0)}function I(){const e=new v.Z;M().scopes.push({symbols:e,rc:t})}function D(){const e=M().scopes.pop();t=e.rc}const F={loc:({type:e=a.EAddrType.k_Registers,addr:t,inputIndex:n,size:r,swizzle:i})=>new m.Z({type:e,addr:t,inputIndex:n,size:r,swizzle:i}),override(e,t){let n=0,r=0;if(t=t.map((t=>e.swizzle?e.swizzle[t]:t)),!e.isPointer()){if(1===t.length)return n=t[0]*g.Z.i32(),r=g.Z.i32(),t=null,new m.Z({...e,addr:e.addr+n,size:r,swizzle:t});const i=[...t].sort(((e,t)=>e-t));0!==i[0]&&(n=i[0]*g.Z.i32(),t=t.map((e=>e-i[0])));t.every(((e,t)=>e===t))&&(r=t.length*g.Z.i32(),t=null)}return new m.Z({...e,addr:e.addr+n,size:r,swizzle:t})},subPointer(e,n,r){const{type:i,addr:s,size:c,inputIndex:u,swizzle:h}=e;if(n.type!==a.EAddrType.k_Registers&&(n=L(n)),!h){const t=N(r>>2),o=e.isPointer()?s:N(s>>2),a=e.isPointer()?i:m.Z.castToPointer(i),c=k(g.Z.addr());return P(l.K.k_I32Mad,c,o,n,t),new m.Z({type:a,addr:c,size:r,inputIndex:u})}(0,o.hu)(r===g.Z.i32()),(0,o.hu)(h.length<=4);const d=t;h.forEach((e=>N(e)));const p=N(d>>2);P(l.K.k_I32Add,p,p,n);const f=L(new m.Z({type:a.EAddrType.k_PointerRegisters,addr:p,size:g.Z.i32()})),v=e.isPointer()?s:N(s>>2),y=e.isPointer()?i:m.Z.castToPointer(i);return P(l.K.k_I32Add,f,v,f),new m.Z({type:y,addr:f,size:r,inputIndex:u})},sub(e,t,n){const{type:r,addr:i,size:s,inputIndex:a,swizzle:c}=e;if(n=n||s-t,(0,o.hu)(n%g.Z.i32()==0),(0,o.hu)(t%g.Z.i32()==0),(0,o.hu)(s>=t+n),e.isPointer()){if(!c){if(0!==t){const e=k(g.Z.addr()),s=N(t>>2);return P(l.K.k_I32Add,e,i,s),new m.Z({type:r,addr:e,size:n,inputIndex:a})}return new m.Z({type:r,addr:i,size:n,inputIndex:a})}return(0,o.hu)(!1,"unsupported branch"),m.Z.INVALID}if(!c)return new m.Z({type:r,addr:i+t,size:n,inputIndex:a});const u=[...Array(n/g.Z.i32()).keys()].map((e=>e+t/g.Z.i32()));return F.override(e,u)},shrink:(e,t)=>F.sub(e,0,t)};return{pc:A,addr:F,instructions:r,debug:C,deref:function(e){const t=h.Uy.var(e);for(let e=n.length-1;e>=0;--e){const r=n[e].scopes;for(let e=r.length-1;e>=0;--e){const n=r[e].symbols;if((0,o.Xq)(n[t]))return n[t]}}return(0,o.hu)(!1,`cannot dereference varaible ${t} (${e.toCode()})`),m.Z.INVALID},ref:function(e,t){const n=h.Uy.var(e);(0,o.hu)(t.type===a.EAddrType.k_Registers);const r=M().scopes,i=r[r.length-1].symbols;(0,o.hu)(!(0,o.Xq)(i[n])),i[n]=t},alloca:k,icode:P,imove:R,iload:L,iconst_i32:N,iconst_f32:function(e){return O(k(g.Z.f32()),(0,h.RU)(e),1)},iop4:function(e,t,n,r,i){(0,o.hu)(t.type===a.EAddrType.k_Registers),(0,o.hu)(n.type===a.EAddrType.k_Registers),(0,o.hu)(r.type===a.EAddrType.k_Registers),(0,o.hu)(i.type===a.EAddrType.k_Registers),(0,o.hu)(t.length===n.length),(0,o.hu)(t.length===r.length),(0,o.hu)(t.length===i.length);for(let s=0;s<t.length;++s)P(e,t.addr+(t.swizzle?t.swizzle[s]:s)*g.Z.i32(),n.addr+(n.swizzle?n.swizzle[s]:s)*g.Z.i32(),r.addr+(r.swizzle?r.swizzle[s]:s)*g.Z.i32(),i.addr+(i.swizzle?i.swizzle[s]:s)*g.Z.i32())},iop3:function(e,t,n,r){(0,o.hu)(t.type===a.EAddrType.k_Registers),(0,o.hu)(n.type===a.EAddrType.k_Registers),(0,o.hu)(r.type===a.EAddrType.k_Registers),(0,o.hu)(t.length===n.length),(0,o.hu)(t.length===r.length);for(let i=0;i<t.length;++i)P(e,t.addr+(t.swizzle?t.swizzle[i]:i)*g.Z.i32(),n.addr+(n.swizzle?n.swizzle[i]:i)*g.Z.i32(),r.addr+(r.swizzle?r.swizzle[i]:i)*g.Z.i32())},iop2:function(e,t,n){(0,o.hu)(t.type===a.EAddrType.k_Registers),(0,o.hu)(n.type===a.EAddrType.k_Registers),(0,o.hu)(t.length===n.length);for(let r=0;r<t.length;++r)P(e,t.addr+(t.swizzle?t.swizzle[r]:r)*g.Z.i32(),n.addr+(n.swizzle?n.swizzle[r]:r)*g.Z.i32())},iop1:function(e,t){(0,o.hu)(t.type===a.EAddrType.k_Registers);for(let n=0;n<t.length;++n)P(e,t.addr+(t.swizzle?t.swizzle[n]:n)*g.Z.i32())},push:function(e,t){const i=r.pc;n.push({fn:e,scopes:[],ret:t,pc:i,retRequests:[]}),I()},pop:function(){(0,o.hu)(1===M().scopes.length),D();const e=n.pop();0===n.length||e.retRequests.forEach((e=>r.replace(e,l.K.k_Jump,[r.pc])))},open:I,close:D,ret:()=>M().ret,constants:i,pipeline:s,externs:w,uavs:c,srvs:u,depth:()=>n.length,diag:T,error:(t,n,r={})=>{const i=E(t),s=e;T.error(n,{file:s,loc:i,info:r})},critical:(t,n,r={})=>{const i=E(t),s=e;T.critical(n,{file:s,loc:i,info:r})}}}r()}catch(E){r(E)}}))},prdm:(e,t,n)=>{"use strict";n.d(t,{A4:()=>u,ZP:()=>h});var r,i,s=n("cOQ3"),o=n("aBMm"),a=n("z3nI"),l=n("UOyM");!function(e){e[e.k_NewStatement=1]="k_NewStatement"}(r||(r={}));function c(e){const t=[],n=[],i=()=>n[n.length-1]||null;return{ns:function(){let e=i();e&&(e.flags|=r.k_NewStatement)},step:function(){n.push({pc:e(),flags:0})},map:function(e){const n=e&&e.sourceNode&&e.sourceNode.loc||null;if((0,l.isNull)(n))return;const r=n.start,s=i();s&&(s.line=r.line||0,s.column=r.column||0,s.file=function(e){let n=t.indexOf(e);return-1==n&&(n=t.length,t.push(e)),n}(`${r.file}`))},dump:function(){let e,r=new o.Z,i={};for(let t=n.length-1;t>=0;t--){let o=n[t];e!=o.line&&r.pickNext(),e=(0,s.Xq)(o.line)?o.line:e,o.line=e,i[e]=(0,s.Xq)(i[e])?i[e]:r.value(),o.color=i[e]}return{files:t,layout:n}}}}function u(e){if(!(0,a.$V)(e))return null;const{line:t,info:n}=e;return{resolveFileLocation:function(e){let n=t.layout[e];return(0,s.hu)(n.pc==e),{file:(0,s.Xq)(n.file)?t.files[n.file]:null,line:n.line,column:n.column}},resolveBreakpointLocation:function(e){let n=t.layout.find((t=>t.line>=e&&0!=(t.flags&r.k_NewStatement)));return n&&n.line||-1},resolvePcColor:function(e){return t.layout[e]?t.layout[e].color:16777215},resolveLineColor:function(e,n){let r=t.layout.find((r=>r.line===e&&r.file===t.files.indexOf(n)));return r?r.color:-1}}}!function(e){e[e.k_CompilationUnit=0]="k_CompilationUnit",e[e.k_SubProgram=1]="k_SubProgram"}(i||(i={}));const h=function(e){const t=c(e),n=function(e){let t;return{beginCompilationUnit:function(e=null,n){t=n},endCompilationUnit:function(){},beginSubProgram:function(e){},endSubProgram:function(){},locate:function(e,t){},dump:function(){return{layout:t}}}}();return{...t,...n,dump:function(){return{line:t.dump(),info:n.dump()}}}}},iHBS:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{H:()=>a});var i=n("cOQ3"),s=n("1fdM"),o=e([s]);s=(o.then?(await o)():o)[0];class a{constructor(){this.funcs=[]}add(e){let t=this.funcs.indexOf(e);return-1===t&&(t=this.funcs.length,this.funcs.push(e)),(0,i.hu)(this.funcs[t].instructionID===e.instructionID),t}dump(){return this.funcs.map(((e,t)=>{const n=(0,s.Nl)(e.returnType),r=e.params.map((({type:e})=>(0,s.Nl)(e)));return{id:t,name:e.name,ret:n,params:r}}))}}r()}catch(e){r(e)}}))},MjXi:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("cOQ3"),i=n("/9BJ");class s{constructor(){this._data=new Uint32Array(8),this._length=0}get capacity(){return this._data.length}get data(){return this._data.subarray(0,this._length)}get length(){return this._length}get pc(){return this.length/s.STRIDE}static prepareInstruction(e,t){switch(e){case i.K.k_I32SetConst:(0,r.hu)(3==t.length),t[0]>>=2;break;case i.K.k_I32LoadRegister:(0,r.hu)(2==t.length),t[0]>>=2,t[1]>>=2;break;case i.K.k_I32LoadRegistersPointer:case i.K.k_I32StoreRegisterPointer:(0,r.hu)(3==t.length),t[0]>>=2,t[1]>>=2,t[2]>>=2;break;case i.K.k_I32LoadInput:case i.K.k_I32StoreInput:(0,r.hu)(3==t.length),t[1]>>=2,t[2]>>=2;break;case i.K.k_I32LoadInputPointer:case i.K.k_I32StoreInputPointer:(0,r.hu)(4==t.length),t[1]>>=2,t[2]>>=2,t[3]>>=2;break;case i.K.k_I32TextureLoad:(0,r.hu)(3==t.length),t[0]>>=2,t[1],t[2]>>=2;break;case i.K.k_I32ExternCall:(0,r.hu)(2==t.length),t[0],t[1]>>=2;break;case i.K.k_I32Not:(0,r.hu)(2==t.length),t[0]>>=2,t[1]>>=2;break;case i.K.k_I32Add:case i.K.k_I32Sub:case i.K.k_I32Mul:case i.K.k_I32Div:case i.K.k_I32Mod:case i.K.k_F32Add:case i.K.k_F32Sub:case i.K.k_F32Mul:case i.K.k_F32Div:case i.K.k_F32Mod:case i.K.k_U32LessThan:case i.K.k_U32GreaterThanEqual:case i.K.k_I32LessThan:case i.K.k_I32GreaterThanEqual:case i.K.k_I32Equal:case i.K.k_I32NotEqual:case i.K.k_F32LessThan:case i.K.k_F32GreaterThanEqual:(0,r.hu)(3==t.length),t[0]>>=2,t[1]>>=2,t[2]>>=2;break;case i.K.k_I32Mad:(0,r.hu)(4==t.length),t[0]>>=2,t[1]>>=2,t[2]>>=2,t[3]>>=2;break;case i.K.k_I32LogicalOr:case i.K.k_I32LogicalAnd:(0,r.hu)(3==t.length),t[0]>>=2,t[1]>>=2,t[2]>>=2;break;case i.K.k_F32Frac:case i.K.k_F32Floor:case i.K.k_F32Ceil:case i.K.k_F32Sin:case i.K.k_F32Cos:case i.K.k_F32Abs:case i.K.k_F32Sqrt:(0,r.hu)(2==t.length),t[0]>>=2,t[1]>>=2;break;case i.K.k_I32Min:case i.K.k_I32Max:case i.K.k_F32Max:case i.K.k_F32Min:case i.K.k_F32Pow:(0,r.hu)(3==t.length),t[0]>>=2,t[1]>>=2,t[2]>>=2;break;case i.K.k_F32ToI32:case i.K.k_I32ToF32:case i.K.k_F32ToU32:case i.K.k_U32ToF32:(0,r.hu)(2==t.length),t[0]>>=2,t[1]>>=2;break;case i.K.k_Jump:(0,r.hu)(1===t.length),t[0]*=1;break;case i.K.k_JumpIf:(0,r.hu)(1===t.length),t[0]>>=2;break;case i.K.k_Ret:break;default:(0,r.hu)(!1,`unknown operation found: ${e} (${i.K[e]})`)}}add(e,t){(0,r.hu)(t.length<=4),this.check(s.STRIDE),s.prepareInstruction(e,t),this.push(e),t.forEach((e=>this.push(e))),this._length+=4-t.length}replace(e,t,n){(0,r.hu)(e<this.pc),(0,r.hu)(n.length<=4);const o=e*s.STRIDE;(0,r.hu)(this.data[o]===i.K.k_Ret||this.data[o]===i.K.k_Jump,`expected ${i.K.k_Ret}/${i.K.k_Jump}, but given is ${this.data[o]} for pc = ${e}`),s.prepareInstruction(t,n),this.data[o]=t,n.forEach(((e,t)=>{this.data[o+1+t]=e}))}back(){return this.data.slice(-s.STRIDE)}push(e){(0,r.hu)(this.capacity-this._length>=1),this._data[this._length++]=e}check(e){let t=this._length+e;if(!(t<=this.capacity)){var n=this._data,r=new Uint32Array(Math.max(t,2*this.capacity));r.set(n),this._data=r}}}s.STRIDE=5;const o=s},EYeK:(e,t,n)=>{"use strict";n.d(t,{Vv:()=>h});var r=n("cOQ3"),i=n("W5eQ"),s=n("A0ZU"),o=n("+H7Q"),a=n("vIQR");function l(e,t,n,i){if(!(0,r.Xq)(e[t]))return i;const s=Object.keys(n),o=s.map((e=>{return(t=e.substring(2),t?.length>1?(t[0]+t.substring(1).replace(/[A-Z]/g,(e=>`_${e}`))).toLowerCase():t).toUpperCase();var t})).indexOf(e[t].toUpperCase());if((0,r.hu)(-1!==o),-1==o)return i;return n[s[o]]}function c(e,t,n){let r;return function(e){e[e.k_False=0]="k_False",e[e.k_True=1]="k_True"}(r||(r={})),!!l(e,t,r,+n)}function u(e,t,n){return(0,r.Xq)(e[t])?Number(e[t]):n}class h{constructor(){this._knownShaders={},this._knownDepthStencilStates=[]}dumpShaders(){return Object.values(this._knownShaders).sort(((e,t)=>e.id-t.id))}dumpDepthStencilStates(){return this._knownDepthStencilStates.map((e=>e.state))}derefShader11(e){const{func:t,ver:n}=e,{name:r}=t,s=function(e){return`${e.ver}-${e.func.name}.${e.func.instructionID}-${e.args.map((e=>i.th.evalConst(e))).join(":")}`}(e),o=this._knownShaders;if(o[s])return o[s].id;const a=Object.keys(o).length+1,l=e.args.map((e=>({type:e.type.name,value:i.th.evalConst(e)})));return o[s]={id:a,shader:{name:r,ver:n,args:l}},a}deref(e){return s.isDepthStencilState(e.type)?this.derefDethStencilState(e):s.isBlendState(e.type)?(console.assert(!1,"blend state is not yet supported"),this.derefBlendState(e)):s.isRasterizerState(e.type)?(console.assert(!1,"raserizer state is not yet supported"),this.derefRasterizerState(e)):((0,r.hu)(!1,`unknown pipeline state "${e.type.name}" found`),-1)}derefDethStencilState(e){(0,r.hu)(!e.type.isNotBaseArray(),"DSS arrays are not yet unsupported (!)"),(0,r.hu)(e.isGlobal());const{name:t,type:n,initExpr:i}=e,s=this._knownDepthStencilStates,h=s.findIndex((e=>e.name===t));if(-1!==h)return h;const d={DepthEnable:!0,DepthWriteMask:o.EDepthWriteMask.k_All,DepthFunc:o.EComparisonFunc.k_Less,StencilEnable:!1,StencilReadMask:255,StencilWriteMask:255,FrontFace:{StencilFailOp:o.EStencilOp.k_Keep,StencilDepthFailOp:o.EStencilOp.k_Keep,StencilPassOp:o.EStencilOp.k_Keep,StencilFunc:o.EComparisonFunc.k_Always},BackFace:{StencilFailOp:o.EStencilOp.k_Keep,StencilDepthFailOp:o.EStencilOp.k_Keep,StencilPassOp:o.EStencilOp.k_Keep,StencilFunc:o.EComparisonFunc.k_Always}},p=s.length;if(s.push({name:t,state:d}),i){(0,r.hu)(i.instructionType===a.rO.k_StateBlockExpr);const e=i.props;d.DepthEnable=c(e,"DepthEnable",d.DepthEnable),d.DepthWriteMask=l(e,"DepthWriteMask",o.EDepthWriteMask,d.DepthWriteMask),d.DepthFunc=l(e,"DepthFunc",o.EComparisonFunc,d.DepthFunc),d.StencilEnable=c(e,"StencilEnable",d.StencilEnable),d.StencilReadMask=u(e,"StencilReadMask",d.StencilReadMask),d.StencilWriteMask=u(e,"StencilWriteMask",d.StencilWriteMask),d.FrontFace.StencilFailOp=l(e,"FrontFaceStencilFailOp",o.EStencilOp,d.FrontFace.StencilFailOp),d.FrontFace.StencilDepthFailOp=l(e,"FrontFaceStencilDepthFailOp",o.EStencilOp,d.FrontFace.StencilDepthFailOp),d.FrontFace.StencilPassOp=l(e,"FrontFaceStencilPassOp",o.EStencilOp,d.FrontFace.StencilPassOp),d.FrontFace.StencilFunc=l(e,"FrontFaceStencilFunc",o.EComparisonFunc,d.FrontFace.StencilFunc),d.BackFace.StencilFailOp=l(e,"BackFaceStencilFailOp",o.EStencilOp,d.BackFace.StencilFailOp),d.BackFace.StencilDepthFailOp=l(e,"BackFaceStencilDepthFailOp",o.EStencilOp,d.BackFace.StencilDepthFailOp),d.BackFace.StencilPassOp=l(e,"BackFaceStencilPassOp",o.EStencilOp,d.BackFace.StencilPassOp),d.BackFace.StencilFunc=l(e,"BackFaceStencilFunc",o.EComparisonFunc,d.BackFace.StencilFunc)}return p}derefBlendState(e){return 0}derefRasterizerState(e){return 0}}},ZrbQ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("cOQ3"),i=n("+H7Q"),s=n("4eqb"),o=n("p8vA");class a{constructor({type:e,addr:t,size:n=0,inputIndex:i=-1,swizzle:a=null}){this.type=e,this.addr=Number(t),this.inputIndex=i,(0,r.hu)(!a||!n||a.length*o.Z.i32()===n,"size and swizzling are not compatible"),a&&((0,r.hu)(a.length>1,"unary swizzles must be removed in favor of offsetted adress"),(0,r.hu)(a.length<=4,"only xyzw/rgba swizzles are supported"),n=a.length*o.Z.i32()),this.size=n,this.swizzle=a,(0,r.hu)(t===s.zk||n>0,"invalid address size found"),(0,r.hu)(n%o.Z.i32()==0,"invalid address alignment found")}get length(){return this.size/o.Z.i32()}valueOf(){return this.type!=i.EAddrType.k_Registers?((0,r.hu)(!1,`address has implicitly moved to ${i.EAddrType[i.EAddrType.k_Registers]} from ${i.EAddrType[this.type]}`),s.zk):this.addr}isPointer(){return this.type>=i.EAddrType.k_PointerRegisters}isInput(){return this.type==i.EAddrType.k_Input||this.type==i.EAddrType.k_PointerInput}toNumber(){return this.addr}toString(){const{type:e,inputIndex:t,addr:n,swizzle:r,size:s}=this,o=this.isPointer(),a=this.isInput();return`${i.EAddrType[e]} [${o?"%":a?"":"r"}${n/4} ${a?`input(${t})`:""}, ${s} bytes, [${(r||[]).join(", ")}]]`}static castToPointer(e){return(0,r.hu)(e<i.EAddrType.k_PointerRegisters),e+i.EAddrType.k_PointerRegisters}}a.INVALID=new a({type:i.EAddrType.k_Registers,addr:s.zk,size:0});const l=a},LvtK:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{X:()=>u});var i=n("cOQ3"),s=n("+H7Q"),o=n("A0ZU"),a=n("dnVx"),l=n("ZrbQ"),c=e([a]);a=(c.then?(await c)():c)[0];class u{constructor(){this._knownSRVs=Array(a.wp).fill(null)}deref(e){const t=this._knownSRVs;(0,i.hu)(!e.type.isNotBaseArray()),(0,i.hu)(o.isBuffer(e.type)||o.isTexture(e.type));let{index:n,type:r}=o.resolveRegister(e);(0,i.hu)("t"===r);const c=t.indexOf(e);(0,i.hu)(-1===c||c===n),-1===n&&(n=t.findIndex((e=>(0,i.Ft)(e))),(0,i.hu)(-1!==n,`uav limit is reached (uav total: ${a.wp})`),t[n]=e),t[n]=e,(0,i.hu)(-1!==n),(0,i.hu)(n<a.wp);const u=a.p2+n;return new l.Z({type:s.EAddrType.k_Input,addr:0,size:1<<30,inputIndex:u})}}r()}catch(e){r(e)}}))},"+nD5":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class r{*[Symbol.iterator](){for(let e in this)yield this[e]}}const i=r},c1OO:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{D:()=>u});var i=n("cOQ3"),s=n("+H7Q"),o=n("A0ZU"),a=n("dnVx"),l=n("ZrbQ"),c=e([a]);a=(c.then?(await c)():c)[0];class u{constructor(){this._knownUAVs=Array(a.$E).fill(null)}deref(e){const t=this._knownUAVs;(0,i.hu)(!e.type.isNotBaseArray()),(0,i.hu)(o.isUAV(e.type));let{index:n,type:r}=o.resolveRegister(e);(0,i.hu)("u"===r);const c=t.indexOf(e);(0,i.hu)(-1===c||c===n),-1===n&&(n=t.findIndex((e=>(0,i.Ft)(e))),(0,i.hu)(-1!==n,`uav limit is reached (uav total: ${a.$E})`),t[n]=e),t[n]=e,(0,i.hu)(-1!==n),(0,i.hu)(n<a.$E);const u=a.$l+n;return new l.Z({type:s.EAddrType.k_Input,addr:0,size:1<<30,inputIndex:u})}}r()}catch(e){r(e)}}))},Xxmt:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.r(t),n.d(t,{copyViewToMemory:()=>m,createUAV:()=>p,debugResetRegisters:()=>v,destroyUAV:()=>f,make:()=>c,memoryToF32Array:()=>d,memoryToI32Array:()=>h,memoryToU8Array:()=>u,releaseMemory:()=>g});var i=n("xmIN");function s(e,t){const n=e._malloc(t.length*t.BYTES_PER_ELEMENT),r=t.length>>2;return e.HEAPU8.set(t,n),{heap:n,size:r}}function o(e,{heap:t}){e._free(t)}const a=await(0,i.Z)(),l=a?.Bundle;function c(e,t){let n=null,r=s(a,t);try{n=new a.Bundle(e,r)}catch(e){}finally{a._free(r.heap)}return n}function u(e){const{heap:t,size:n}=e;return a.HEAPU8.subarray(t,t+(n<<2))}function h(e){const{heap:t,size:n}=e;return console.assert(t%4==0,"unsupported heap address!"),a.HEAP32.subarray(t>>2,(t>>2)+n)}function d(e){const{heap:t,size:n}=e;return console.assert(t%4==0,"unsupported heap address!"),a.HEAPF32.subarray(t>>2,(t>>2)+n)}function p(e,t,n,r){return l.createUAV(e,t,n,r)}function f(e){l.destroyUAV(e)}function m(e){return s(a,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function g(e){o(a,e)}function v(){}r()}catch(y){r(y)}}),1)},ZLcK:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{$d:()=>v,KT:()=>_,Ln:()=>y,Mb:()=>m,S:()=>g,Sy:()=>f,sU:()=>d,u6:()=>o.u6,uz:()=>p,vw:()=>b});var i=n("cOQ3"),s=n("0jsi"),o=n("1fdM"),a=n("Xxmt"),l=n("vVoC"),c=e([s,o,a,l]);[s,o,a,l]=c.then?(await c)():c;let u=!(()=>"true"===new URLSearchParams(window.location.search).get("disable-wasm"))();function h(){return u?a:l}function d(){return u}function p(e){u=(0,i.Xq)(e)?"wasm"===e:!u,console.log(`%c VM runtime has been switched to "${u?"WASM":"JS"}".`,"font-weight: bold; background: #6f0000; color: #fff")}function f(e,t){return h().make(e,new Uint8Array(t))}function m(e){return h().memoryToU8Array(e)}function g(e){return h().memoryToI32Array(e)}function v(e){return h().copyViewToMemory(e)}function y(e){h().releaseMemory(e)}function b(e,t,n,r){return h().createUAV(e,t,n,r)}function _(e){h().destroyUAV(e)}r()}catch(x){r(x)}}))},"1fdM":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Nl:()=>w,W3:()=>S,u6:()=>T});var i=n("cOQ3"),s=n("4eqb"),o=n("ZLcK"),a=n("vIQR"),l=n("KUuy"),c=n("O/5E"),u=e([o]);function h(e,t,n,r=4){const i=[];for(let s=0;s<n;++s)i.push(e(t.subarray(r*s,r*s+r)));return i}function d(e,t){let n=t.reduce(((t,n)=>t+e(n).byteLength),0),r=new Uint8Array(n),i=0;for(let n of t){let t=e(n);r.set(t,i),i+=t.byteLength}return r}o=(u.then?(await u)():u)[0];const p=s.J8,f=e=>p(e)>>>0,m=s.Rm,g=e=>0!==p(e),v=e=>new Uint8Array((0,s.Xc)(e)),y=e=>new Uint8Array((0,s.Xc)(e)),b=e=>new Uint8Array((0,s.Xc)((0,s.RU)(e))),_=e=>new Uint8Array((0,s.Xc)(+e));function x({fields:e,length:t,name:n,size:r}){return new l.h(e,void 0,n,r)}function w(e){let t,n=e.name,r=e.size,i=-1;if(e.isNotBaseArray()){i=e.length;t=w(e.arrayElementType).fields}else(e=>!e.isComplex()||e.instructionType==a.rO.k_SystemType)(e)||(t=e.fields.map((({name:e,type:t,semantic:n})=>new c.q(w(t),e,n,t.size,t.padding))));return new l.h(t,i,n,r)}function S(e,t){switch(t.name){case"bool":return _(e);case"int":return v(e);case"float":return b(e);case"uint":return y(e);case"uint2":case"uint3":case"uint4":return d(y,e);case"int2":case"int3":case"int4":return d(v,e);case"float2":case"float3":case"float4":return d(b,e)}if(t.length&&t.length>=0){const n=x(t);return d((e=>S(e,n)),e)}if(t.fields){let n=t.fields.reduce(((e,t)=>{const{padding:n,size:r,type:i,name:s}=t;return Math.max(e,n+r)}),0),r=new Uint8Array(n);return t.fields.forEach((t=>{const{padding:n,size:i,type:s,name:o}=t,a=S(e[o],s);r.set(a,n)})),r}return(0,i.hu)(!1,"not implemented",t),null}function T(e,t){switch(t.name){case"bool":return g(e);case"int":return p(e);case"float":return m(e);case"uint":return f(e);case"uint2":case"uint3":case"uint4":return h(f,e,t.size/4,4);case"int2":case"int3":case"int4":return h(p,e,t.size/4,4);case"float2":case"float3":case"float4":return h(m,e,t.size/4,4)}if(t.length&&t.length>=0){const n=x(t);return h((e=>T(e,n)),e,t.length,n.size)}if(t.fields){let n={};return t.fields.forEach((t=>{const{padding:r,size:i,type:s}=t;n[t.name]=T(e.subarray(r,r+i),s)})),n}return(0,i.hu)(!1,"not implemented",t),null}r()}catch(E){r(E)}}))},vVoC:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.r(t),n.d(t,{copyViewToMemory:()=>h,createUAV:()=>p,debugResetRegisters:()=>m,destroyUAV:()=>f,make:()=>o,memoryToF32Array:()=>l,memoryToI32Array:()=>c,memoryToU8Array:()=>a,releaseMemory:()=>d});var i=n("8VxU"),s=e([i]);function o(e,t){return new i.tn(e,t)}function a(e){const t=(0,i.ud)(e);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function l(e){const t=(0,i.ud)(e);return new Float32Array(t.buffer,t.byteOffset,t.length)}function c(e){return(0,i.ud)(e)}function u(e){const t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),t}function h(e){return(0,i.Vb)(u(e))}function d(e){}function p(e,t,n,r){return i.tn.createUAV(e,t,n,r)}function f(e){}function m(){i.tn.resetRegisters()}i=(s.then?(await s)():s)[0],r()}catch(g){r(g)}}))},"8VxU":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{UN:()=>v,Vb:()=>f,tn:()=>g,ud:()=>m,vY:()=>_});var i=n("cOQ3"),s=n("dnVx"),o=n("4eqb"),a=n("MjXi"),l=n("p8vA"),c=n("1fdM"),u=n("+H7Q"),h=e([s,c]);[s,c]=h.then?(await h)():h;let{EChunkType:d,EOperation:p}=u;function f(e){return{buffer:e instanceof Int32Array?e:new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2)}}function m(e){return e.buffer}class g{constructor(e,t){this.debugName=e,this.load(t)}load(e){const t=v(e),n=t[d.k_Code];(0,i.hu)((0,i.$V)(n)&&(0,i.$V)(t[d.k_Constants]));const r=t[d.k_Constants];this.instructions=y(n),this.layout=b(t[d.k_Layout]),this.depthStencilStates=x(t[d.k_DepthStencilStates]),this.shaders=_(t[d.k_Shaders]),this.externs=T(t[d.k_Externs]),this.inputs=Array(64).fill(null),this.inputs[s.s1]=new Int32Array(r.buffer,r.byteOffset,r.length>>2);const o=(e,t,n,r,s,o,a,l,c,u,h)=>{console.log(...[e,t,n,r,s,o,a,l,c,u,h].filter((e=>(0,i.Xq)(e))))};this.ncalls=Array(this.externs.length).fill(null).map(((e,t)=>{return"trace"===this.externs[t].name?o:(n=this.externs[t],(e,t,r,s,o,a)=>{console.error(`[native call <${n.name}> was not provided]`,[e,t,r,s,o,a].filter((e=>(0,i.Xq)(e))))});var n}))}asNative(e,t){switch(t.name){case"string":{let t=(0,o.BS)(e),n=this.inputs[s.s1],r=n[t>>2],i=new Uint8Array(n.buffer,n.byteOffset+t+4,r);return String.fromCharCode(...i)}case"DepthStencilState":{let t=(0,o.BS)(e);return this.depthStencilStates[t]}case"VertexShader":case"PixelShader":case"GeometryShader":{let t=(0,o.BS)(e);return 0==t?null:this.shaders[t-1]}}return(0,c.u6)(e,t)}play(){const e=this.instructions,t=g.iregs,n=g.fregs,r=g.regs,s=this.inputs;let o=0;e:for(;;){let l=e[o],u=e[o+1],h=e[o+2],d=e[o+3],f=e[o+4];switch(l){case p.k_I32SetConst:t[u]=h;break;case p.k_I32LoadRegister:t[u]=t[h];break;case p.k_I32LoadInput:t[h]=s[u][d];break;case p.k_I32StoreInput:s[u][h]=t[d];break;case p.k_I32LoadRegistersPointer:t[u]=t[t[h]+d];break;case p.k_I32StoreRegisterPointer:t[t[u]+d]=t[h];break;case p.k_I32LoadInputPointer:t[h]=s[u][t[d]+f];break;case p.k_I32StoreInputPointer:s[u][t[h]+f]=t[d];break;case p.k_I32TextureLoad:{const e=s[h],r=t[d],i=t[d+1],o=e[0],a=(e[1],e.subarray(16)[o*i+r]>>>0),l=255&a,c=a>>8&255,p=a>>16&255,f=a>>24&255;n.set([l/255,c/255,p/255,f/255],u)}break;case p.k_I32ExternCall:{const e=u,{params:t,ret:n}=this.externs[e],s=h<<2;let o=s+n.size,a=new Array(t.length);for(let e=0;e<t.length;++e){let n=t[e],s=r.subarray(o,o+n.size);a[e]=this.asNative(s,n),o+=n.size,(0,i.hu)(n.size%4==0)}const l=this.ncalls[u].apply(null,a);n.size&&r.set((0,c.W3)(l,n),s)}break;case p.k_I32Add:t[u]=t[h]+t[d];break;case p.k_I32Sub:t[u]=t[h]-t[d];break;case p.k_I32Mul:t[u]=t[h]*t[d];break;case p.k_I32Div:t[u]=t[h]/t[d];break;case p.k_I32Mod:t[u]=t[h]%t[d];break;case p.k_I32Mad:t[u]=t[h]+t[d]*t[f];break;case p.k_I32Min:t[u]=Math.min(t[h],t[d]);break;case p.k_I32Max:t[u]=Math.max(t[h],t[d]);break;case p.k_F32Add:n[u]=n[h]+n[d];break;case p.k_F32Sub:n[u]=n[h]-n[d];break;case p.k_F32Mul:n[u]=n[h]*n[d];break;case p.k_F32Div:n[u]=n[h]/n[d];break;case p.k_F32Mod:n[u]=n[h]%n[d];break;case p.k_U32LessThan:t[u]=+(t[h]>>>0<t[d]>>>0);break;case p.k_U32GreaterThanEqual:t[u]=+(t[h]>>>0>=t[d]>>>0);break;case p.k_I32LessThan:t[u]=+(t[h]<t[d]);break;case p.k_I32GreaterThanEqual:t[u]=+(t[h]>=t[d]);break;case p.k_I32Equal:t[u]=+(t[h]===t[d]);break;case p.k_I32NotEqual:t[u]=+(t[h]!==t[d]);break;case p.k_I32Not:t[u]=+!t[h];break;case p.k_F32LessThan:n[u]=+(n[h]<n[d]);break;case p.k_F32GreaterThanEqual:n[u]=+(n[h]>=n[d]);break;case p.k_I32LogicalOr:t[u]=+(t[h]||t[d]);break;case p.k_I32LogicalAnd:t[u]=+(t[h]&&t[d]);break;case p.k_F32Frac:n[u]=n[h]-Math.floor(n[h]);break;case p.k_F32Floor:n[u]=Math.floor(n[h]);break;case p.k_F32Ceil:n[u]=Math.ceil(n[h]);break;case p.k_F32Sin:n[u]=Math.sin(n[h]);break;case p.k_F32Cos:n[u]=Math.cos(n[h]);break;case p.k_F32Abs:n[u]=Math.abs(n[h]);break;case p.k_F32Sqrt:n[u]=Math.sqrt(n[h]);break;case p.k_F32Max:n[u]=Math.max(n[h],n[d]);break;case p.k_F32Min:n[u]=Math.min(n[h],n[d]);break;case p.k_F32Pow:n[u]=Math.pow(n[h],n[d]);break;case p.k_U32ToF32:n[u]=t[h]>>>0;break;case p.k_I32ToF32:n[u]=t[h];break;case p.k_F32ToU32:case p.k_F32ToI32:t[u]=Math.trunc(n[h]);break;case p.k_JumpIf:o=0!==t[u]?o+a.Z.STRIDE:o;break;case p.k_Jump:o=u*a.Z.STRIDE;continue;case p.k_Ret:break e;default:console.error(`${this.debugName} | unknown operation found: ${l}`)}o+=a.Z.STRIDE}return g.regs}dispatch(e,t){const{x:n,y:r,z:i}=e,{x:o,y:a,z:l}=t,c=s.JF+0,u=s.JF+1,h=s.JF+2,d=s.JF+3;this.inputs[c]=g.Gid,this.inputs[u]=g.Gi,this.inputs[h]=g.GTid,this.inputs[d]=g.DTid;for(let e=0;e<i;++e)for(let t=0;t<r;++t)for(let r=0;r<n;++r){g.Gid[0]=r,g.Gid[1]=t,g.Gid[2]=e;for(let n=0;n<l;++n)for(let i=0;i<a;++i)for(let s=0;s<o;++s)g.GTid[0]=s,g.GTid[1]=i,g.GTid[2]=n,g.DTid[0]=r*o+s,g.DTid[1]=t*a+i,g.DTid[2]=e*l+n,g.Gi[0]=n*o*a+i*o+s,this.play()}}setInput(e,t){this.inputs[e]=t.buffer}getInput(e){return f(this.inputs[e])}setConstant(e,t){const n=this.layout.find((t=>t.name===e)),r=this.inputs[s.s1];if(!n)return!1;const o=new DataView(r.buffer,r.byteOffset+n.offset),a=new DataView(t.buffer,t.byteOffset);switch(n.type){case"float":o.setFloat32(0,a.getFloat32(0,!0),!0);break;case"int":o.setInt32(0,a.getInt32(0,!0),!0);break;case"uint":o.setUint32(0,a.getUint32(0,!0),!0);break;case"float2":o.setFloat32(0,a.getFloat32(0,!0),!0),o.setFloat32(4,a.getFloat32(4,!0),!0);break;case"float3":o.setFloat32(0,a.getFloat32(0,!0),!0),o.setFloat32(4,a.getFloat32(4,!0),!0),o.setFloat32(8,a.getFloat32(8,!0),!0);break;case"float4":o.setFloat32(0,a.getFloat32(0,!0),!0),o.setFloat32(4,a.getFloat32(4,!0),!0),o.setFloat32(8,a.getFloat32(8,!0),!0),o.setFloat32(12,a.getFloat32(12,!0),!0);break;default:(0,i.hu)(!1,"unsupported")}return!0}getLayout(){return this.layout}getExterns(){return this.externs}setExtern(e,t){this.ncalls[e]=t}static resetRegisters(){g.regs.fill(0)}static createUAV(e,t,n,r){const o=l.Z.i32(),a=o+n*t;(0,i.hu)(a%l.Z.i32()==0);const c=s.$l+r,u=f(new Int32Array(a>>2)),h=f(u.buffer.subarray(o>>2));return u.buffer.subarray(0,1)[0]=0,{name:e,elementSize:t,length:n,register:r,data:h,buffer:u,index:c}}}function v(e,t){(0,i.$V)(t)||(t={});const n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(0,!0),s=n.getUint32(4,!0)<<2;let o=null;try{o=new Uint8Array(e.buffer,e.byteOffset+8,s)}catch(e){console.log(e)}t[r]=o;const a=o.byteOffset+o.byteLength;return a<e.buffer.byteLength&&v(new Uint8Array(o.buffer,a),t),t}function y(e){return new Uint32Array(e.buffer,e.byteOffset,e.byteLength>>2)}function b(e){let t=0,n=(0,o.BS)(e.subarray(t,t+4));t+=4;let r=[];for(let i=0;i<n;++i){const n=(0,o.BS)(e.subarray(t,t+4));t+=4;const i=String.fromCharCode(...e.subarray(t,t+n));t+=n;const s=(0,o.BS)(e.subarray(t,t+4));t+=4;const a=String.fromCharCode(...e.subarray(t,t+s));t+=s;const l=(0,o.BS)(e.subarray(t,t+4));t+=4;const c=String.fromCharCode(...e.subarray(t,t+l));t+=l;const u=(0,o.BS)(e.subarray(t,t+4));t+=4;const h=(0,o.BS)(e.subarray(t,t+4));t+=4,r.push({name:i,type:a,offset:u,size:h,semantic:c})}return r}function _(e){if(!e)return null;let t=0,n=(0,o.BS)(e.subarray(t,t+4));t+=4;let r=[];for(let s=0;s<n;++s){const n=(0,o.BS)(e.subarray(t,t+4));t+=4;const s=String.fromCharCode(...e.subarray(t,t+n));t+=n;const a=(0,o.BS)(e.subarray(t,t+4));t+=4;const l=String.fromCharCode(...e.subarray(t,t+a));t+=a;const c=(0,o.BS)(e.subarray(t,t+4));t+=4;const u=[];for(let n=0;n<c;++n){const n=(0,o.BS)(e.subarray(t,t+4));t+=4;const r=String.fromCharCode(...e.subarray(t,t+n));let s;switch(t+=n,r){case"int":case"uint":s=(0,o.BS)(e.subarray(t,t+4)),t+=4;break;case"bool":s=!!(0,o.BS)(e.subarray(t,t+4)),t+=4;break;default:(0,i.hu)(!1,`unsupported constant type "${r}"`)}u.push({type:r,value:s})}r.push({name:s,ver:l,args:u})}return r}function x(e){if(!e)return null;let t=0,n=(0,o.BS)(e.subarray(t,t+4));t+=4;let r=[];for(let i=0;i<n;++i){const n=!!(0,o.BS)(e.subarray(t,t+4));t+=4;const i=(0,o.BS)(e.subarray(t,t+4));t+=4;const s=(0,o.BS)(e.subarray(t,t+4));t+=4;const a=!!(0,o.BS)(e.subarray(t,t+4));t+=4;const l=(0,o.BS)(e.subarray(t,t+4));t+=4;const c=(0,o.BS)(e.subarray(t,t+4));t+=4;const u=(0,o.BS)(e.subarray(t,t+4));t+=4;const h=(0,o.BS)(e.subarray(t,t+4));t+=4;const d=(0,o.BS)(e.subarray(t,t+4));t+=4;const p=(0,o.BS)(e.subarray(t,t+4));t+=4;const f=(0,o.BS)(e.subarray(t,t+4));t+=4;const m=(0,o.BS)(e.subarray(t,t+4));t+=4;const g=(0,o.BS)(e.subarray(t,t+4));t+=4;const v=(0,o.BS)(e.subarray(t,t+4));t+=4,r.push({DepthEnable:n,DepthWriteMask:i,DepthFunc:s,StencilEnable:a,StencilReadMask:l,StencilWriteMask:c,FrontFace:{StencilFailOp:u,StencilDepthFailOp:h,StencilPassOp:d,StencilFunc:p},BackFace:{StencilFailOp:f,StencilDepthFailOp:m,StencilPassOp:g,StencilFunc:v}})}return r}function w(e,t){let n=0;t.padding=(0,o.BS)(e.subarray(n,n+4)),n+=4,t.size=(0,o.BS)(e.subarray(n,n+4)),n+=4;const r=(0,o.BS)(e.subarray(n,n+4));n+=4,t.semantic=String.fromCharCode(...e.subarray(n,n+r)),n+=r;const i=(0,o.BS)(e.subarray(n,n+4));n+=4,t.name=String.fromCharCode(...e.subarray(n,n+i)),n+=i;let s={};return n+=S(e.subarray(n),s),t.type=s,n}function S(e,t){let n=0;t.size=(0,o.BS)(e.subarray(n,n+4)),n+=4,t.length=(0,o.BS)(e.subarray(n,n+4)),n+=4;const r=(0,o.BS)(e.subarray(n,n+4));n+=4,t.name=String.fromCharCode(...e.subarray(n,n+r)),n+=r;let i=(0,o.BS)(e.subarray(n,n+4));n+=4;for(let r=0;r<i;++r){let r={};n+=w(e.subarray(n),r),t.fields||=[],t.fields.push(r)}return n}function T(e){let t=0,n=(0,o.BS)(e.subarray(t,t+4));t+=4;let r=[];for(let i=0;i<n;++i){const n=(0,o.BS)(e.subarray(t,t+4));t+=4;const i=(0,o.BS)(e.subarray(t,t+4));t+=4;const s=String.fromCharCode(...e.subarray(t,t+i));t+=i;const a={};t+=S(e.subarray(t),a);let l=(0,o.BS)(e.subarray(t,t+4));t+=4;const c=[];for(let n=0;n<l;++n){const n={};t+=S(e.subarray(t),n),c.push(n)}r.push({id:n,name:s,ret:a,params:c})}return r}g.$regs=new ArrayBuffer(8192),g.iregs=new Int32Array(g.$regs),g.fregs=new Float32Array(g.$regs),g.regs=new Uint8Array(g.$regs),g.Gid=new Int32Array([0,0,0]),g.Gi=new Int32Array([0]),g.GTid=new Int32Array([0,0,0]),g.DTid=new Int32Array([0,0,0]),r()}catch(E){r(E)}}))},"4eqb":(e,t,n)=>{"use strict";n.d(t,{Ax:()=>i,BS:()=>a,J8:()=>l,RU:()=>p,Rm:()=>c,Uy:()=>s,Xc:()=>o,zk:()=>r});const r=-1>>>0,i="main",s={i32:e=>`%i32:${e}`,f32:e=>`%f32:${e}`,var:e=>`${e.name}:${e.instructionID}`,fun:e=>`${e.name}:${e.instructionID}`},o=e=>Array(4).fill(0).map(((t,n,r)=>e>>8*n&255)),a=e=>e.reduce(((e,t,n,r)=>e|t<<8*n),0),l=e=>e[0]|e[1]<<8|e[2]<<16|e[3]<<24,c=e=>new Float32Array(e.buffer,e.byteOffset)[0],u=new ArrayBuffer(4),h=new Float32Array(u),d=new Int32Array(u);new Uint32Array(u);function p(e){return h[0]=e,d[0]}},"0jsi":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Ax:()=>s.Ax,Iu:()=>i.Iu,ki:()=>i.ki});var i=n("dnVx"),s=n("4eqb"),o=(n("prdm"),e([i]));i=(o.then?(await o)():o)[0],r()}catch(e){r(e)}}))},p8vA:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const r={u32:()=>4,i32:()=>4,f32:()=>4,bool:()=>r.i32(),addr:()=>r.i32()},i=r},k9Bk:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.r(t),n.d(t,{copyTechnique:()=>v,copyViewToMemory:()=>E,createTechnique:()=>g,createTexture:()=>y,createTrimesh:()=>_,destroyTechnique:()=>p,destroyTexture:()=>b,destroyTrimesh:()=>x,memoryToF32Array:()=>T,memoryToI32Array:()=>S,memoryToU8Array:()=>w,releaseMemory:()=>M});var i=n("3fZ9"),s=n("6977"),o=n("AVkT"),a=n("RA5N");const l=await(0,i.Z)(),c=e=>"emitter"===e?.getType();function u(e,t){const n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=e._malloc(n.length*n.BYTES_PER_ELEMENT),i=n.length>>2;return e.HEAPU8.set(n,r),{heap:r,size:i}}function h(e,{heap:t}){e._free(t)}function d(e){let t=null,n=u(l,e);try{t=l.createFromBundle(n)}finally{l._free(n.heap)}return t}function p(e){c(e)&&l.destroyEmitter(e)}function f(e){if(e instanceof Uint8Array){let t=new o.B,n=new s.cZ(e);return o.b.getRootAsBundle(n).unpackTo(t),t}return e}function m(e){if(e instanceof Uint8Array){let t=new s.cZ(e);return o.b.getRootAsBundle(t).contentType()}return e.contentType}function g(e){console.assert(e instanceof Uint8Array,"only packed bundle are supported");if(m(e)===a.fN.PartBundle){const t=d(e);return t.reset(),t}return{getName:()=>f(e).name,getType:()=>"material",getPassCount:()=>0,getPass:e=>null}}function v(e,t){return!(!c(e)||!c(t))&&l.copyEmitter(e,t)}function y(e,t){let n=null,r=u(l,t);try{n=l.createTexture(e,r)}finally{l._free(r.heap)}return n}function b(e){if(e)try{l.destroyTexture(e)}finally{}}function _(e,t,n,r,i){let s=null,o=u(l,t),a=u(l,n),c=u(l,r),h=u(l,i);try{s=l.createTrimesh(e,o,a,c,h)}finally{l._free(o.heap),l._free(a.heap),l._free(c.heap)}return s}function x(e){if(e)try{l.destroyTrimesh(e)}finally{}}function w(e){const{heap:t,size:n}=e;return l.HEAPU8.subarray(t,t+(n<<2))}function S(e){const{heap:t,size:n}=e;return console.assert(t%4==0,"unsupported heap address!"),l.HEAP32.subarray(t>>2,(t>>2)+n)}function T(e){const{heap:t,size:n}=e;return console.assert(t%4==0,"unsupported heap address!"),l.HEAPF32.subarray(t>>2,(t>>2)+n)}function E(e){return u(l,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function M(e){h(l,e)}r()}catch(A){r(A)}}),1)},LvoO:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Mb:()=>S,Nn:()=>v,Qd:()=>w,RP:()=>_,Tz:()=>T,cU:()=>b,jl:()=>g,ki:()=>y,n8:()=>x,sU:()=>p,uz:()=>f});var i=n("k9Bk"),s=n("vZ19"),o=n("cOQ3"),a=n("6977"),l=n("AVkT"),c=n("RA5N"),u=e([i,s]);[i,s]=u.then?(await u)():u;let h=!(()=>"true"===new URLSearchParams(window.location.search).get("disable-wasm"))();function d(){return h?i:s}function p(){return h}function f(e){h=(0,o.Xq)(e)?"wasm"===e:!h,console.log(`%c Technique runtime has been switched to "${h?"WASM":"JS"}".`,"font-weight: bold; background: #6f0000; color: #fff")}function m(e){if(e instanceof Uint8Array){let t=new a.cZ(e);return l.b.getRootAsBundle(t).contentType()}return e.contentType}function g(e){return!p()||m(e)!==c.fN.MatBundle&&m(e)!==c.fN.Technique11Bundle?d().createTechnique(e):(console.warn(`${c.fN[m(e)]} bundle was created using TS module while WASM is on.`),s.createTechnique(e))}function v(e){d().destroyTechnique(e)}function y(e,t){return d().copyTechnique(e,t)}function b(e,t){return d().createTexture(e,t)}function _(e){d().destroyTexture(e)}function x(e,t,n,r,i){return d().createTrimesh(e,t,n,r,i)}function w(e){d().destroyTrimesh(e)}function S(e){return d().memoryToU8Array(e)}function T(e){return d().memoryToF32Array(e)}r()}catch(E){r(E)}}))},vZ19:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.r(t),n.d(t,{copyTechnique:()=>_,copyViewToMemory:()=>E,createTechnique:()=>y,createTexture:()=>f,createTrimesh:()=>g,destroyTechnique:()=>b,destroyTexture:()=>m,destroyTrimesh:()=>v,memoryToF32Array:()=>w,memoryToI32Array:()=>S,memoryToU8Array:()=>x,releaseMemory:()=>M});var i=n("8VxU"),s=n("6977"),o=n("dua5"),a=n("R5qs"),l=n("moL5"),c=n("cOQ3"),u=n("AVkT"),h=n("RA5N"),d=e([i,o,l]);function p(e){if(e instanceof Uint8Array){let t=new u.B,n=new s.cZ(e);return u.b.getRootAsBundle(n).unpackTo(t),t}return e}function f(e,t){return(0,o.nB)(e,t)}function m(e){(0,o.VC)(e)}function g(e,t,n,r,i){return(0,o.jv)(e,t,n,r,i)}function v(e){(0,o.V0)(e)}function y(e){const t=p(e);if(t.contentType===h.fN.PartBundle){const e=(0,o.oJ)(t);return e.reset(),e}return t.contentType===h.fN.MatBundle?(0,a._z)(t):t.contentType===h.fN.Technique11Bundle?(0,l.DM)(t):null}function b(e){switch(e?.getType()){case"emitter":return(0,o.Yx)(e);case"material":return(0,a.Xn)(e);case"technique11":return(0,l.kK)(e)}}function _(e,t){switch((0,c.hu)(e.getType()===t.getType()),e.getType()){case"emitter":return(0,o.o2)(e,t);case"material":return(0,a.T5)(e,t);case"technique11":return(0,l.Lq)(e,t)}return console.assert(!1),!1}function x(e){const t=(0,i.ud)(e);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function w(e){const t=(0,i.ud)(e);return new Float32Array(t.buffer,t.byteOffset,t.length)}function S(e){return(0,i.ud)(e)}function T(e){const t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),t}function E(e){return(0,i.Vb)(T(e))}function M(e){console.error("NOT IMPLEMENTED!!!")}[i,o,l]=d.then?(await d)():d,r()}catch(A){r(A)}}))},dua5:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{V0:()=>R,VC:()=>k,Yx:()=>M,jv:()=>P,nB:()=>C,o2:()=>E,oJ:()=>A});var i=n("cOQ3"),s=n("ZLcK"),o=n("8VxU"),a=n("3KVU"),l=n("dnVx"),c=n("UHT2"),u=n("r1qu"),h=n("2IwD"),d=n("wC6P"),p=n("KEtj"),f=e([s,o,l]);function m(e,t){return s.vw(e.name,e.stride,t,e.slot)}function g(e,t,n=[]){return e.map((e=>{const r=n.find((t=>t.name===e.name));if(r)return r;const i=m(e,t);return n.push(i),i}))}[s,o,l]=f.then?(await f)():f;const v=new Uint8Array(8),y=new DataView(v.buffer);function b(e,t,n,r,i){const o=new Uint8Array(e.size*t),a=new Array(t);const l=()=>t-x.readCounter(n);function c(t){const n=new Uint8Array(o.buffer,o.byteOffset+t*e.size,e.size);return s.u6(n,e)}return{dump:function(){l();const t=s.S(r.data),n=s.Mb(i.data);let c=0;t.forEach(((t,r)=>{if(t){const t=new Uint8Array(n.buffer,n.byteOffset+r*e.size,e.size);new Uint8Array(o.buffer,o.byteOffset+c*e.size,e.size).set(t),a[c]=r,c++}}))},isDumpReady:()=>!0,getParticleCount:l,readParticleJSON:c,readParticlesJSON:function(){let e=[];for(let t=0;t<l();++t)e.push({...c(t),"#id":a[t]});return e}}}function _(e,t,n,r){if(0==t.code.length)return null;const o=s.Sy(e,t.code),a=g(t.resources.uavs,n,r),c=t.numthreads;a.forEach((e=>{o.setInput(e.index,e.buffer)}));const{buffers:u,textures:h,trimeshes:d}=t.resources;function p(e,t){o.setConstant(e,t)}function f(e,t){y.setUint32(0,t,!0),p(e,v)}function m(e,t){const n=u.find((t=>t.name===e));n&&o.setInput(n.slot+l.p2,t)}return(0,i.hu)(c[0]>=1&&1===c[1]&&1===c[2]),{uavs:a,bundle:o,run:function(e){o.dispatch({x:e,y:1,z:1},{x:c[0],y:c[1],z:c[2]})},setConstants:function(e){Object.keys(e).forEach((t=>p(t,e[t])))},setInt32Constant:function(e,t){y.setInt32(0,t,!0),p(e,v)},setUint32Constant:f,setTrimesh:function(e,t){const{vertCount:n,faceCount:r,vertices:i,faces:s,indicesAdj:o,faceAdj:a}=t,l=d.find((t=>t.name===e));l&&(m(l.verticesName,i),m(l.facesName,s),m(l.gsAdjecencyName,o),m(l.faceAdjacencyName,a),f(l.vertexCountUName,n),f(l.faceCountUName,r))},setTexture:function(e,t){const{layout:n}=t,r=h.find((t=>t.name===e));r&&o.setInput(r.slot+l.p2,n)},groupsizex:c[0]}}const x={overwriteCounter(e,t){s.S(e.buffer)[0]=t},readCounter:e=>s.S(e.buffer)[0],readElement({data:e,elementSize:t},n){const r=s.Mb(e);return new Uint8Array(r.buffer,r.byteOffset+n*t,t)},minidump(e){const{name:t,length:n,elementSize:r,register:i,data:o}=e;console.log(` uav ${t}[${n}x${r}:r${i}:cnt(${x.readCounter(e)})]`);const a=s.Mb(o);let l=Math.min(64,n*r),c="";for(let e=0;e<l;++e)c+=`${a[e].toString(16)} `;c+="...",console.log(c)}};function w(e,t){const{name:n,content:r}=e,{capacity:l,particle:f,simulationRoutines:m,renderPasses:v}=r,y=_(`${n}/reset`,m[h.p.k_Reset],l,t),w=_(`${n}/init`,m[h.p.k_Init],l,t),S=_(`${n}/update`,m[h.p.k_Update],l,t),T=_(`${n}/spawn`,m[h.p.k_Spawn],4,t),E=t.find((e=>e.name===a.m7.UAV_DEAD_INDICES)),M=t.find((e=>e.name===a.m7.UAV_PARTICLES)),A=t.find((e=>e.name===a.m7.UAV_STATES)),C=t.find((e=>e.name===a.m7.UAV_SPAWN_DISPATCH_ARGUMENTS));t.find((e=>e.name===a.m7.UAV_CREATION_REQUESTS)),t.find((e=>e.name===a.m7.UAV_SPAWN_EMITTER));const k=v.map(((e,r)=>{const{routines:f,geometry:v,sorting:y,instanceCount:b,instance:w,stride:S,renderStates:T}=e,E=`${a.m7.UAV_PRERENDERED}${r}`,M=`${a.m7.UAV_SERIALS}${r}`,A=f[d.W.k_Prerender],C=_(`${n}/prerender`,A,l*b,t),k=t.find((e=>e.name===E)),P=t.find((e=>e.name===M)),R=f[d.W.k_Vertex],L=R.shaders.find(((e,t)=>R.shadersType[t]===p.Jo.RoutineGLSLSourceBundle)),O=f[d.W.k_Pixel],N=O.shaders.find(((e,t)=>O.shadersType[t]===p.Jo.RoutineGLSLSourceBundle)),I=L.code,D=N.code,F=L.attributes,z=()=>x.readCounter(k)*b,U=(C?f[d.W.k_Prerender]:m[h.p.k_Update]).resources.uavs.find((e=>e.name===E)),B={},V=(e,t,n)=>{for(let{name:r,slot:i,size:s,fields:o}of t.cbuffers){const t=e[`${r}`]||={name:`${r}`,slot:i,size:s,usage:n,fields:o.map((({name:e,semantic:t,size:n,padding:r,type:{length:i}})=>({name:`${e}`,semantic:`${t||e}`,size:n,padding:r,length:i})))};t.usage|=n}};V(B,L,c.w.k_Vertex),V(B,N,c.w.k_Pixel);const G=Object.values(B),Z=k,H=s.Mb(Z.data);let j=null,W=null,q=null,K=null;y&&(j=new u.O(`${U.name}Sorted`,U.slot,U.stride,U.type),W=g([j],l*b,t)[0],q=s.Mb(W.data),K=s.S(P.data));function X(){k&&x.overwriteCounter(k,0),P&&x.overwriteCounter(P,0)}return{getDesc:function(){const e={};return T.forEach((({type:t,value:n})=>{e[t]=n})),{instanceName:w.name,instanceLayout:F.map((({name:e,offset:t,size:n})=>({name:e,offset:t,size:n}))),stride:S,geometry:v,sorting:y,vertexShader:I,pixelShader:D,renderStates:e,cbuffers:G}},getData:function(){return(0,o.Vb)(y?q:H)},getNumRenderedParticles:z,setTexture:function(e,t){C?.setTexture(e,t)},setTrimesh:function(e,t){C?.setTrimesh(e,t)},serialize:function(){if(!y)return;const e=S*b;(0,i.hu)(q.byteLength>>2==e*l);const t=new Float32Array(H.buffer,H.byteOffset,H.byteLength>>2),n=new Float32Array(q.buffer,q.byteOffset,q.byteLength>>2),r=[];for(let e=0;e<x.readCounter(k);++e){const t=K[2*e+0],n=K[2*e+1];r.push([n,t])}r.sort(((e,t)=>-e[1]+t[1]));for(let i=0;i<r.length;++i){const s=r[i][0]*e,o=i*e,a=t.subarray(s,s+e);n.subarray(o,o+e).set(a)}},preparePrerender:X,prerender:function(e){C&&(X(),C.setConstants(e),C.run(Math.ceil(l/C.groupsizex)))},dump:()=>{let e=z();(0,i.c2)(`dump ${e}/${l} prerendred particles: `);for(let t=0;t<e;++t)(0,i.c2)(s.u6(x.readElement(Z,t),w))}}})),P=()=>l-x.readCounter(E);function R(e){k.forEach(((e,t)=>{e.preparePrerender()})),S.setConstants(e),S.run(Math.ceil(l/S.groupsizex))}return{getType:()=>"emitter",getName:()=>n,getCapacity:()=>l,getPassCount:()=>k.length,getPass:e=>k[e],getNumParticles:P,reset:function(){y.run(Math.ceil(l/y.groupsizex)),x.overwriteCounter(E,l)},simulate:function(e){R(e),function(e){w.setConstants(e),w.run(s.S(C.data)[0]),T.setConstants(e),T.run(1)}(e)},prerender:function(e){k.forEach((t=>t.prerender(e)))},serialize:function(){k.forEach((e=>e.serialize()))},setTrimesh:function(e,t){T.setTrimesh(e,t),w.setTrimesh(e,t),S.setTrimesh(e,t),k.forEach((n=>n.setTrimesh(e,t)))},setTexture:function(e,t){T.setTexture(e,t),w.setTexture(e,t),S.setTexture(e,t),k.forEach((n=>n.setTexture(e,t)))},dump:function(){const e=P(),t=f.size;(0,i.c2)(`particles total: ${e} ( ${x.readCounter(E)}/${l} )`);const n=s.S(A.data),r=s.Mb(M.data);n.forEach(((e,n)=>{if(e){const e=new Uint8Array(r.buffer,r.byteOffset+n*t,t);(0,i.c2)(n,s.u6(e,f))}}))},createDebugViewer:function(){return b(f,l,E,A,M)}}}function S(e,t){return JSON.stringify(e)==JSON.stringify(t)}function T(e,t){if(e.capacity!=t.capacity)return!1;if(e.renderPasses.length!=t.renderPasses.length)return!1;if(!S(e.particle,t.particle))return!1;for(let n=0;n<e.renderPasses.length;++n){if(e.renderPasses[n].geometry!=t.renderPasses[n].geometry)return!1;if(e.renderPasses[n].sorting!=t.renderPasses[n].sorting)return!1;if(e.renderPasses[n].instanceCount!=t.renderPasses[n].instanceCount)return!1;if(!S(e.renderPasses[n].instance,t.renderPasses[n].instance))return!1}return!0}function E(e,t){return(0,i.hu)("emitter"===e.getType()&&"emitter"===t.getType()),!!T(e.bundle.content,t.bundle.content)&&(e.uavResources.forEach(((e,n)=>s.Mb(e.buffer).set(s.Mb(t.uavResources[n].buffer)))),!0)}function M(e){(0,i.hu)("emitter"===e.getType());let t=e,{uavResources:n}=t;n.forEach((e=>{s.KT(e)})),(0,i.c2)(`emitter '${t.getName()}' has been dropped.`)}function A(e){let t=[];return{bundle:e,uavResources:t,...w(e,t)}}function C({width:e,height:t},n){const r=4*e*t,o=new Uint8Array(64+r),a=o.subarray(64);if(n){(0,i.hu)(n.byteLength===r);const e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);a.set(e)}else a.fill(0);const l=new DataView(o.buffer,0,64);return l.setInt32(0,e,!0),l.setInt32(4,t,!0),l.setInt32(8,0,!0),{layout:s.$d(o)}}function k(e){const{layout:t}=e;s.Ln(t),(0,i.c2)("texture has been dropped.")}function P(e,t,n,r,i){const{vertCount:o,faceCount:a}=e;return{vertCount:o,faceCount:a,vertices:s.$d(t),faces:s.$d(n),indicesAdj:s.$d(r),faceAdj:s.$d(i)}}function R(e){const{vertices:t,faces:n,indicesAdj:r,faceAdj:i}=e;s.Ln(t),s.Ln(n),s.Ln(r),s.Ln(i)}r()}catch(L){r(L)}}))},R5qs:(e,t,n)=>{"use strict";n.d(t,{T5:()=>o,_z:()=>l,Xn:()=>a});var r,i=n("UHT2");!function(e){e[e.k_Vertex=0]="k_Vertex",e[e.k_Pixel=1]="k_Pixel",e[e.k_Last=2]="k_Last"}(r||(r={}));var s=n("KEtj");function o(e,t){return!1}function a(e){}function l(e){let t=function(e){const{name:t,content:n}=e,{renderPasses:o}=n,a=o.map(((e,t)=>{const{routines:n,instance:o,stride:a,renderStates:l}=e,c=n[r.k_Vertex],u=c.shaders.find(((e,t)=>c.shadersType[t]===s.Jo.RoutineGLSLSourceBundle)),h=n[r.k_Pixel],d=h.shaders.find(((e,t)=>h.shadersType[t]===s.Jo.RoutineGLSLSourceBundle)),p=u.code,f=d.code,m=u.attributes,g={};l.forEach((({type:e,value:t})=>{g[e]=t}));const v={},y=(e,t,n)=>{for(let{name:r,slot:i,size:s,fields:o}of t.cbuffers){const t=e[`${r}`]||={name:`${r}`,slot:i,size:s,usage:n,fields:o.map((({name:e,semantic:t,size:n,padding:r,type:{length:i}})=>({name:`${e}`,semantic:`${t||e}`,size:n,padding:r,length:i})))};t.usage|=n}};y(v,u,i.w.k_Vertex),y(v,d,i.w.k_Pixel);const b=Object.values(v);return{getDesc:function(){return{instanceName:o.name,instanceLayout:m.map((({name:e,offset:t,size:n})=>({name:e,offset:t,size:n}))),stride:a,vertexShader:p,pixelShader:f,renderStates:g,cbuffers:b}}}}));return{getType:()=>"material",getName:()=>t,getPassCount:()=>a.length,getPass:e=>a[e]}}(e);return{bundle:e,...t}}},moL5:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{DM:()=>c,Lq:()=>a,kK:()=>l});var i=n("vVoC"),s=e([i]);function o(e){const{name:t,content:n}=e,r=n.passes.map((({code:e,shaders:t,shadersType:n},r)=>({render:i.make(`pass-${r}`,new Uint8Array(e)),shaders:t})));return{getType:()=>"technique11",getName:()=>t,getPassCount:()=>r.length,getPass:e=>r[e]}}function a(e,t){return!1}function l(e){}function c(e){return{bundle:e,...o(e)}}i=(s.then?(await s)():s)[0],r()}catch(u){r(u)}}))},QlGU:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});var r=n("cOQ3");function i(){let e,t,n,i,s,o,a;const l={elapsedTime:0,elapsedTimeLevel:0,frameNumber:0};function c(){return!s}function u(){return!!o}return{getConstants:function(){return l},start:function(){l.elapsedTime=0,l.elapsedTimeLevel=0,l.frameNumber=0,o=0,t=0,e=0,a=0,n=Date.now(),i=0,s=!0,(0,r.c2)("timeline started")},stop:function(){s=!1,o=0,(0,r.c2)("timeline stopped")},tick:function(){if(c()||u())return;const e=Date.now()-n-t;l.elapsedTime=(e-i)/1e3,l.elapsedTimeLevel=i/1e3,l.frameNumber=++a,i=e},isStopped:c,pause:function(){c()||(u()||(e=Date.now()),o++)},unpause:function(){!c()&&u()&&(o--,u()||(t+=Date.now()-e))},isPaused:u}}},jYc8:(e,t,n)=>{"use strict";n.d(t,{R:()=>s,u:()=>i});var r=n("HXFP");class i extends r.qU{constructor(e){super(e),this.includeDeps=[]}get textDocument(){return this.opts.textDocument}get slastDocument(){return this.opts.slastDocument}}class s extends r.Q{convoluteToInclude(e,t){if(!t)return!1;if(!e.slastDocument||!e.textDocument)return!1;if(!t.sourceNode)return!1;const n=t.sourceNode.loc,r=e.slastDocument.includes;let i=n;for(;i&&String(e.textDocument.uri)!==String(i.start.file);)i=r.get(String(i.start.file));if(i==n)return!1;const{start:s,end:o}=i,a=e.textDocument.source.substring(s.offset,o.offset);return!a.includes("lib.hlsl")&&(e.includeDeps.includes(a)||e.includeDeps.push(a),!0)}emitComplexTypeDecl(e,t){this.convoluteToInclude(e,t)||super.emitComplexTypeDecl(e,t)}emitFunction(e,t){this.convoluteToInclude(e,t)||super.emitFunction(e,t)}emitTypeDecl(e,t){this.convoluteToInclude(e,t)||super.emitTypeDecl(e,t)}emitTypedef(e,t){this.convoluteToInclude(e,t)||super.emitTypedef(e,t)}emitGlobalVariable(e,t){this.convoluteToInclude(e,t)||super.emitGlobalVariable(e,t)}emitCbuffer(e,t){this.convoluteToInclude(e,t)||super.emitCbuffer(e,t)}emitTexture(e,t){this.convoluteToInclude(e,t)||super.emitTexture(e,t)}toString(e){const t=super.toString();if(!e)return t;if(!e.includeDeps.length)return t;return`${e.includeDeps.join("\n")}\n\n${t}`}emit(e,t){return super.emit(e,t),this}static translate(e,t=new i){return s.ccEmitter.emit(t,e).toString(t)}}s.ccEmitter=new s({omitEmptyParams:!0})},HXFP:(e,t,n)=>{"use strict";n.d(t,{qU:()=>m,Q:()=>g});var r=n("cOQ3"),i=n("W5eQ"),s=n("vIQR"),o=n("zoki"),a=n("k9uP"),l=n("Y4FD"),c=n("HS1/"),u=n("z3nI");class h{constructor(){this.blocks=[],this.stack=[]}top(){return this.stack[this.depth()-1]}findOrCreateOutput(e){const t=this.blocks.findIndex((t=>e&&t.name===e)),n=-1!==t?this.blocks.splice(t,1)[0]:function({tab:e="\t",nl:t="\n",name:n=null}={}){let r=[""],i=[],s=0,o=!1;function a(e){if(!s)for(let t=0;t<i.length;++t)e=i[t]+e;r[r.length-1]+=e,s++,o=!1}function l(){r.push(""),s=0}return{isEmpty:function(){return 1==r.length&&0==r[0].length},keyword:function(e){!o&&s&&a(" "),a(e)},ignoreNextSpace:()=>o=!0,push:(t=e)=>(i.push(t),s&&l()),pop:()=>(i.pop(),s&&l()),newline:l,add:a,toString:()=>r.join(t),name:n}}({name:e});return n}depth(){return this.stack.length}begin(e){this.stack.push(this.findOrCreateOutput(e))}end(e=!1){const t=this.stack.pop();t.isEmpty()||(e?this.blocks=[t,...this.blocks]:this.blocks.push(t))}push(e){this.top().push(e)}pop(){this.top().pop()}emitNewline(e=1){Array(e).fill(0).forEach((e=>this.top()?.newline()))}emitKeyword(e){this.top()?.keyword(e)}emitNoSpace(){this.top()?.ignoreNextSpace()}emitSpace(){this.emitChar(" "),this.emitNoSpace()}emitChar(e){this.top()?.add(e)}emitLine(e){this.emitChar(e),this.emitNewline()}clear(){(0,r.hu)(0==this.stack.length),this.blocks=[]}toString(){const e=this.blocks.map((e=>e.toString())).filter((e=>!!e)).join("\n\n");return this.clear(),e}valueOf(){return this.toString()}}var d,p=n("A0ZU");function f(e,t){-1==e.indexOf(t)&&e.push(t)}!function(e){e[e.k_Vertex=1]="k_Vertex",e[e.k_Pixel=2]="k_Pixel",e[e.k_Compute=4]="k_Compute"}(d||(d={}));class m{constructor(e={}){this.knownSignatures=new Set,this.uavs=[],this.textures=[],this.buffers=[],this.cbuffers=[],this.CSShaders=[],this.opts=e,this.opts.mode||="raw",console.assert(["vs","ps","ds","hs","gs","cs","raw"].includes(this.opts.mode))}get entryName(){return this.opts.entryName}get mode(){return this.opts.mode}isPixel(){return"ps"===this.mode}isVertex(){return"vs"===this.mode}isRaw(){return"raw"===this.mode}has(e){return this.knownSignatures.has(e)}add(e){(0,r.hu)(!this.has(e)),this.knownSignatures.add(e)}addCbuffer(e){(0,r.hu)(!this.has(e.name)),this.add(e.name);const{name:t,type:{size:n}}=e,i={name:t,size:n,register:p.resolveRegister(e).index};return this.cbuffers.push(i),i}addTexture(e,t){(0,r.hu)(!this.has(t)),this.add(t);const n=this.buffers.length+this.textures.length,i=e.match(/^([\w]+)<([\w0-9_]+)>$/)||[`${e}<float4>`,`${e}`,"float4"],s={name:t,type:e,texType:i[1],elementType:i[2],register:n};return this.textures.push(s),s}addUav(e,t){(0,r.hu)(!this.has(t)),this.add(t);const n=this.uavs.length,i=e.match(/^([\w]+)<([\w0-9_]+)>$/);(0,r.hu)(i);const s={name:t,type:e,uavType:i[1],elementType:i[2],register:n};return this.uavs.push(s),s}addBuffer(e,t){(0,r.hu)(!this.has(t)),this.add(t);const n=this.buffers.length+this.textures.length,i=e.match(/^([\w]+)<([\w0-9_]+)>$/);(0,r.hu)(i);const s={name:t,type:e,bufType:i[1],elementType:i[2],register:n};return this.buffers.push(s),s}beginCsShader(e,t){this.CSShader={name:e,numthreads:t,uavs:[],buffers:[],textures:[]}}endCsShader(){const e=this.CSShader;(0,r.hu)(e),(0,r.hu)(!this.has(e.name)),this.add(e.name),this.CSShaders.push(e),this.CSShader=null}linkBuffer(e){(0,r.hu)(this.has(e));let t=this.CSShader;t&&f(t.buffers,this.buffers.find((t=>t.name==e)))}linkCbuffer(e){(0,r.hu)(this.has(e));this.CSShader}linkUav(e){(0,r.hu)(this.has(e));let t=this.CSShader;t&&f(t.uavs,this.uavs.find((t=>t.name==e)))}linkTexture(e){(0,r.hu)(this.has(e));let t=this.CSShader;t&&f(t.textures,this.textures.find((t=>t.name==e)))}}class g extends h{constructor(e={}){super(),this.options=e}isMain(){return 1===this.depth()}resolveTypeName(e){return e.name}resolveType(e,t){if(!t)return null;let n,r,i,o;if(t.isComplex()){r=t.name;const n=t.scope.findType(t.name);this.emit(e,n)}else r=this.resolveTypeName(t);if(t.instructionType===s.rO.k_VariableType){i=t.usages}return t.isNotBaseArray()&&(n=t.length),i&&i.length&&(o=i.filter((e=>!this.options.omitInUsage||"in"!=e)).join(" ")),{typeName:r,length:n,usage:o}}emitBuffer(e,t,n,r){if(!e.has(n)){const i=e.addBuffer(t,n);this.begin(),r&&this.emitComment(r),this.emitKeyword(`${t} ${n}: register(t${i.register});`),this.end()}e.linkBuffer(n)}emitUav(e,t,n,r){if(!e.has(n)){const i=e.addUav(t,n);this.begin(),r&&this.emitComment(r),this.emitKeyword(`${t} ${n}: register(u${i.register});`),this.end()}e.linkUav(n)}emitTexture(e,t){const{name:n,type:r}=t;this.emitTextureRaw(e,r.name,n)}emitTextureRaw(e,t,n,r){if(!e.has(n)){const i=e.addTexture(t,n);this.begin(),r&&this.emitComment(r),this.emitKeyword(`${t} ${n}: register(t${i.register});`),this.end()}e.linkTexture(n)}emitLine(e,t){this.emitChar(e),t&&(0,r.hu)(1===t.split("\n").length),t&&(this.emitChar("\t"),this.emitComment(t)),this.emitNewline()}emitComment(e){-1!==e.indexOf("\n")?(this.emitLine("/**"),this.push(" * "),e.split("\n").forEach((e=>this.emitLine(e))),this.pop(),this.emitLine(" */")):this.emitLine(`// ${e}`)}emitComplexType(e,t){(0,r.hu)(t.isComplex()),this.emitKeyword("struct"),this.emitKeyword(t.name),this.emitNewline(),this.emitChar("{"),this.push(),t.fields.map((t=>(this.emitComplexField(e,t),this.emitNewline()))),this.pop(),this.emitChar("}")}emitComplexTypeDecl(e,t){e.has(t.name)||(e.add(t.name),this.begin(),this.emitComplexType(e,t),this.emitChar(";"),this.end())}emitVariableNoInit(e,t,n){const{typeName:r,length:i,usage:s}=this.resolveType(e,t.type),o=n?n(t):t.name;s&&this.emitKeyword(s),this.emitKeyword(r),this.emitKeyword(o),i&&this.emitChar(`[${i}]`),t.semantic&&this.emitSemantic(e,t.semantic),t.annotation&&this.emitAnnotation(e,t.annotation)}emitVariable(e,t,n){if(this.emitVariableNoInit(e,t,n),t.initExpr){t.initExpr.instructionType===s.rO.k_StateBlockExpr||(this.emitKeyword("="),this.emitSpace()),this.emitExpression(e,t.initExpr)}}emitIfStmt(e,t){this.emitKeyword("if"),this.emitChar("("),this.emitNoSpace(),this.emitExpression(e,t.cond),this.emitChar(")"),this.emitNewline(),t.conseq?this.emitStmt(e,t.conseq):this.emitChar(";"),t.contrary&&(this.emitNewline(),this.emitKeyword("else"),this.emitStmt(e,t.contrary))}emitSemantic(e,t){this.emitChar(":"),this.emitKeyword(t)}emitAnnotation(e,t){}emitCompile(e,t){this.emitFunction(e,t.function),this.emitKeyword("compile"),this.emitKeyword(t.function.name),this.emitChar("("),this.emitNoSpace(),this.emitExpressionList(e,t.args),this.emitChar(")")}evaluateEntryName(e,t){const n=t.name,i=e.entryName;return(0,u.HD)(i)?((0,r.Xq)(t.scope.functions[i])&&console.error("entry point already exists"),i):n}emitEntryParams(e,t){const n=e.opts.constants;n&&t.filter((e=>e.type.isUniform())).forEach(((t,r)=>{const i=n[r],s=t.name;e.has(s)?console.assert(!1,"?!"):(e.add(s),this.begin(),this.emitLine(`static const ${i.type} ${s} = ${String(i.value)};`),this.end())})),t.filter((e=>!(this.options.omitEmptyParams&&0===e.type.size||e.type.isUniform()&&n))).forEach(((t,n,r)=>{this.emitParam(e,t),n+1!=r.length&&this.emitChar(",")}))}emitEntryFunction(e,t){const{def:n}=t,{typeName:r}=this.resolveType(e,n.returnType);this.begin();{let i=this.evaluateEntryName(e,t);this.emitKeyword(r),this.emitKeyword(i),this.emitChar("("),this.emitNoSpace(),this.emitEntryParams(e,n.params),this.emitChar(")"),n.returnType.isComplex()||e.isPixel()&&(this.emitChar(":"),this.emitKeyword(t.semantic||"SV_Target0")),this.emitNewline(),this.emitBlock(e,t.impl)}this.end()}emitAttributes(e,t){t?.forEach((t=>{this.emitChar("["),this.emitNoSpace(),this.emitKeyword(t.name),this.emitNoSpace(),t.args&&(this.emitChar("("),this.emitNoSpace(),this.emitExpressionList(e,t.args),this.emitChar(")"),this.emitNoSpace()),this.emitChar("]"),this.emitNewline()}))}emitRegularFunction(e,t){if(!t)return;const{def:n}=t,{typeName:r}=this.resolveType(e,n.returnType);this.begin(),this.emitAttributes(e,t.attrs),this.emitKeyword(r),this.emitKeyword(t.name),this.emitChar("("),this.emitNoSpace(),this.emitParams(e,n.params),this.emitChar(")"),this.emitNewline(),t.impl?this.emitBlock(e,t.impl):this.emitChar(";"),this.end()}emitFunction(e,t){if(!t)return;const n=o.fn.signature(t.def);if(e.has(n))return;e.add(n);0==this.depth()&&!e.isRaw()?this.emitEntryFunction(e,t):this.emitRegularFunction(e,t)}emitCollector(e,t){this.begin();for(let n of t.instructions)this.emit(e,n);this.end()}emitTypeDecl(e,t){this.resolveType(e,t.type)}emitTypedef(e,t){}emitForInit(e,t){i.NQ.isExpression(t)?this.emitExpression(e,t):this.emitVariable(e,t)}emitForStmt(e,t){this.emitKeyword("for"),this.emitChar("("),this.emitNoSpace(),this.emitForInit(e,t.init),this.emitChar(";"),this.emitExpression(e,t.cond),this.emitChar(";"),this.emitExpression(e,t.step),this.emitChar(")"),t.body.instructionType===s.rO.k_StmtBlock&&this.emitNewline(),this.emitStmt(e,t.body)}emitExpression(e,t){if(t)switch(t.instructionType){case s.rO.k_ArithmeticExpr:return this.emitArithmetic(e,t);case s.rO.k_AssignmentExpr:return this.emitAssigment(e,t);case s.rO.k_PostfixPointExpr:return this.emitPostfixPoint(e,t);case s.rO.k_IdExpr:return this.emitIdentifier(e,t);case s.rO.k_FunctionCallExpr:return this.emitFCall(e,t);case s.rO.k_ConstructorCallExpr:return this.emitCCall(e,t);case s.rO.k_FloatExpr:return this.emitFloat(e,t);case s.rO.k_IntExpr:return this.emitInteger(e,t);case s.rO.k_BoolExpr:return this.emitBool(e,t);case s.rO.k_StringExpr:return this.emitString(e,t);case s.rO.k_ComplexExpr:return this.emitComplexExpr(e,t);case s.rO.k_CompileExpr:return this.emitCompile(e,t);case s.rO.k_ConditionalExpr:return this.emitConditionalExpr(e,t);case s.rO.k_RelationalExpr:return this.emitRelationalExpr(e,t);case s.rO.k_LogicalExpr:return this.emitLogicalExpr(e,t);case s.rO.k_UnaryExpr:return this.emitUnaryExpr(e,t);case s.rO.k_PostfixArithmeticExpr:return this.emitPostfixArithmetic(e,t);case s.rO.k_InitExpr:return this.emitInitExpr(e,t);case s.rO.k_CastExpr:return this.emitCast(e,t);case s.rO.k_BitwiseExpr:return this.emitBitwise(e,t);case s.rO.k_PostfixIndexExpr:return this.emitPostfixIndex(e,t);case s.rO.k_StateBlockExpr:return this.emitStateBlockExpr(e,t);default:this.emitLine(`/* ... unsupported expression '${t.instructionName}' ... */`),(0,r.hu)(!1,`unsupported instruction found: ${t.instructionName}`)}}emitFloat(e,t){const n=String(t.value);this.emitKeyword(n),-1===n.indexOf(".")&&this.emitChar("."),this.emitChar("f")}emitBool(e,t){this.emitKeyword(t.value?"true":"false")}emitString(e,t){this.emitKeyword(t.value)}emitComplexExpr(e,t){this.emitChar("("),this.emitNoSpace(),this.emitExpression(e,t.expr),this.emitChar(")")}emitConditionalExpr(e,t){this.emitExpression(e,t.condition),this.emitKeyword("?"),this.emitExpression(e,t.left),this.emitKeyword(":"),this.emitExpression(e,t.right)}emitInteger(e,t){const n=t;this.emitKeyword(`${n.heximal?"0x"+n.value.toString(16).toUpperCase():n.value.toFixed(0)}${n.signed?"":"u"}`)}emitRelationalExpr(e,t){this.emitExpression(e,t.left),this.emitKeyword(t.operator),this.emitExpression(e,t.right)}emitLogicalExpr(e,t){this.emitExpression(e,t.left),this.emitKeyword(t.operator),this.emitExpression(e,t.right)}emitUnaryExpr(e,t){this.emitChar(t.operator),this.emitExpression(e,t.expr)}emitPostfixArithmetic(e,t){this.emitExpression(e,t.expr),this.emitChar(t.operator)}emitPostfixIndex(e,t){this.emitExpression(e,t.element),this.emitChar("["),this.emitNoSpace(),this.emitExpression(e,t.index),this.emitChar("]")}emitStateBlockExpr(e,t){"raw"===e.mode&&(0,r.hu)("not implemented")}emitBreakStmt(e,t){this.emitLine(`${t.operator};`)}emitExpressionList(e,t){t?.forEach(((n,r)=>{this.emitExpression(e,n),r!=t.length-1&&this.emitChar(",")}))}emitParam(e,t){this.emitVariable(e,t)}emitParams(e,t){t.filter((e=>!this.options.omitEmptyParams||0!==e.type.size)).forEach(((t,n,r)=>{this.emitParam(e,t),n+1!=r.length&&this.emitChar(",")}))}emitInitExpr(e,t){if(t.args.length>1)return this.emitChar("{"),this.emitNoSpace(),this.emitExpressionList(e,t.args),void this.emitChar("}");this.emitExpression(e,t.args[0])}emitCast(e,t){if(t.isUseless())return;this.emitChar("("),this.emitNoSpace();const{typeName:n}=this.resolveType(e,t.type);this.emitKeyword(n),this.emitChar(")"),this.emitNoSpace(),this.emitChar("("),this.emitNoSpace(),this.emitExpression(e,t.expr),this.emitChar(")")}emitBitwise(e,t){this.emitExpression(e,t.left),this.emitKeyword(t.operator),this.emitSpace(),this.emitExpression(e,t.right)}emitArithmetic(e,t){this.emitExpression(e,t.left),this.emitKeyword(t.operator),this.emitSpace(),this.emitExpression(e,t.right)}emitAssigment(e,t){this.emitExpression(e,t.left),this.emitKeyword(t.operator),this.emitSpace(),(0,r.hu)(i.NQ.isExpression(t.right)),this.emitExpression(e,t.right)}emitPostfixPoint(e,t){t.element.instructionType===s.rO.k_IdExpr||t.element.instructionType===s.rO.k_PostfixPointExpr?this.emitExpression(e,t.element):(this.emitChar("("),this.emitNoSpace(),this.emitExpression(e,t.element),this.emitChar(")")),this.emitChar("."),this.emitChar(t.postfix.name)}emitCbufferField(e,t){this.emitVariable(e,t),this.emitChar(";"),this.emitChar("\t"),this.emitComment(`padding ${t.type.padding}, size ${t.type.size}`)}emitCbuffer(e,t){if(!e.has(t.name)){e.addCbuffer(t),this.begin(),this.emitComment(`size: ${t.type.size}`),this.emitKeyword("cbuffer"),t.id&&this.emitKeyword(t.name);const n=p.resolveRegister(t);-1!==n.index&&(this.emitChar(":"),this.emitKeyword("register"),this.emitChar("("),this.emitNoSpace(),this.emitKeyword(`${n.type}${n.index}`),this.emitNoSpace(),this.emitChar(")")),this.emitNewline(),this.emitChar("{"),this.push(),t.type.fields.forEach((t=>{this.emitCbufferField(e,t)})),this.pop(),this.emitChar("}"),this.emitChar(";"),this.end()}e.linkCbuffer(t.name)}emitGlobal(e,t){const{name:n,type:r}=t;this.isMain()&&t.isParameter()&&r.isUniform();if(t.isGlobal())if(t.usageFlags&a.K.k_Cbuffer){const n=t.parent.parent;this.begin(),this.emitCbuffer(e,n),this.end()}else p.isTexture(r)?(this.begin(),this.emitTexture(e,t),this.end()):(this.begin(),this.emitGlobalVariable(e,t),this.end())}emitIdentifier(e,t){const{decl:n,name:r}=t;this.emitGlobal(e,n),this.emitKeyword(r)}emitCCall(e,t){const n=t.args,{typeName:r}=this.resolveType(e,t.ctor);this.emitKeyword(r),this.emitChar("("),this.emitNoSpace(),this.emitExpressionList(e,n),this.emitChar(")")}emitFCall(e,t,n=(e=>e.name)){const{decl:r,args:i,callee:o}=t;r.instructionType!==s.rO.k_SystemFunctionDecl&&this.emitFunction(e,r),o&&(this.emitExpression(e,o),this.emitChar("."),this.emitNoSpace()),this.emitKeyword(n(r)),this.emitChar("("),this.emitNoSpace(),this.emitExpressionList(e,i),this.emitChar(")")}emitReturnStmt(e,t){this.emitKeyword("return"),this.emitSpace(),this.emitExpression(e,t.expr),this.emitChar(";")}emitExpressionStmt(e,t){this.emitExpression(e,t.expr),this.emitChar(";")}emitLocalVariable(e,t){this.emitVariable(e,t),this.emitChar(";")}emitGlobalVariable(e,t){e.has(t.name)||(e.add(t.name),this.begin(),this.emitVariable(e,t),this.emitChar(";"),this.end())}emitComplexField(e,t){console.assert(t.instructionType===s.rO.k_VariableDecl),this.emitVariable(e,t),this.emitChar(";")}emitDeclStmt(e,t){t.declList.forEach((t=>{console.assert(t.instructionType===s.rO.k_VariableDecl),this.emitLocalVariable(e,t)}))}emitStmt(e,t){switch(t.instructionType){case s.rO.k_DeclStmt:this.emitDeclStmt(e,t);break;case s.rO.k_ExprStmt:this.emitExpressionStmt(e,t);break;case s.rO.k_ReturnStmt:this.emitReturnStmt(e,t);break;case s.rO.k_SemicolonStmt:this.emitChar(";");break;case s.rO.k_IfStmt:this.emitIfStmt(e,t);break;case s.rO.k_StmtBlock:this.emitBlock(e,t);break;case s.rO.k_ForStmt:this.emitForStmt(e,t);break;case s.rO.k_BreakStmt:this.emitBreakStmt(e,t);break;default:this.emitLine(`/* ... unsupported stmt '${t.instructionName}' .... */`),console.warn(`unknown stmt found: '${t.instructionName}'`)}}emitBlock(e,t){this.emitChar("{"),this.push(),t.stmtList.forEach((t=>(this.emitStmt(e,t),this.emitNewline()))),this.pop(),this.emitChar("}")}emitPass(e,t){this.emitKeyword("pass"),t.name&&this.emitKeyword(t.name),this.emitNewline(),this.emitChar("{"),this.push(),this.emitPassBody(e,t),this.pop(),this.emitChar("}"),this.emitNewline()}emitPassBody(e,t){if(t.vertexShader&&(this.emitFunction(e,t.vertexShader),this.emitKeyword("VertexShader"),this.emitKeyword("="),this.emitKeyword("compile"),this.emitKeyword(t.vertexShader.name),this.emitChar("()"),this.emitChar(";"),this.emitNewline()),t.pixelShader&&(this.emitFunction(e,t.pixelShader),this.emitKeyword("PixelShader"),this.emitKeyword("="),this.emitKeyword("compile"),this.emitKeyword(t.pixelShader.name),this.emitChar("()"),this.emitChar(";"),this.emitNewline()),t.renderStates)for(let e in t.renderStates){const n=t.renderStates[e];n!=c.m.UNDEF&&(this.emitKeyword(l.H[Number(e)]),this.emitChar("="),this.emitKeyword(c.m[n]),this.emitChar(";"),this.emitNewline())}this.emitNewline()}emit(e,t){if(!t)return this.emitLine("/* ... empty instruction .... */"),this;if(i.NQ.isExpression(t))return this.emitExpression(e,t),this;if(i.NQ.isStatement(t))return this.emitStmt(e,t),this;switch(t.instructionType){case s.rO.k_FunctionDecl:this.emitFunction(e,t);break;case s.rO.k_CbufferDecl:this.emitCbuffer(e,t);break;case s.rO.k_VariableDecl:this.emitGlobalVariable(e,t);break;case s.rO.k_Collector:this.emitCollector(e,t);break;case s.rO.k_TypeDecl:this.emitTypeDecl(e,t);break;case s.rO.k_TypedefDecl:this.emitTypedef(e,t);break;case s.rO.k_ComplexType:case s.rO.k_VariableType:this.emitComplexTypeDecl(e,t);break;default:this.emitLine(`/* ... unsupported instruction '${t.instructionName}' .... */`),(0,r.hu)(!1,`unsupported instruction found: ${t.instructionName}`)}return this}static translate(e,t=new m){return g.cEmitter.emit(t,e).toString()}static translateDocument(e,t=new m){return(0,r.Ft)(e)||(0,r.Ft)(e.root)?"":g.translate(e.root,t)}}g.cEmitter=new g({omitEmptyParams:!0})},h9Zj:(e,t,n)=>{"use strict";n.d(t,{I:()=>l,j:()=>a});var r=n("cOQ3"),i=n("A0ZU"),s=n("vIQR"),o=n("jYc8");class a extends o.u{constructor(){super(...arguments),this.technique=null}tech(){return this.technique}beginTechnique(e){(0,r.hu)((0,r.Ft)(this.technique)),this.technique=e}endTechnique(){(0,r.hu)((0,r.$V)(this.technique)),this.technique=null}}class l extends o.R{emitRoutineProperty(e,t,n){this.emitKeyword(t),this.emitKeyword("="),this.emitSpace(),this.emitCompile(e,n),this.emitChar(";"),this.emitNewline()}emitStringProperty(e,t,n){this.emitKeyword(t),this.emitKeyword("="),this.emitKeyword(n),this.emitChar(";"),this.emitNewline()}emitSpawnStmt(e,t){const n=e.tech(),r=t.scope.findFunction(t.name,[n.particle,i.T_INT,...t.args.map((e=>e.type))]);this.emitFunction(e,r),this.emitKeyword(`spawn(${t.count})`),this.emitKeyword(t.name),this.emitChar("("),this.emitNoSpace(),t.args.forEach(((t,n,r)=>{this.emitExpression(e,t),n+1!=r.length&&this.emitChar(",")})),this.emitChar(")"),this.emitChar(";")}emitDrawStmt(e,t){this.emitKeyword("draw"),this.emitKeyword(t.name),this.emitChar("("),this.emitNoSpace(),t.args.forEach(((t,n,r)=>{this.emitExpression(e,t),n+1!=r.length&&this.emitChar(",")})),this.emitChar(")"),this.emitChar(";")}emitPartFxDecl(e,t){e.beginTechnique(t),this.begin(),this.emitKeyword("partFx"),t.name&&this.emitKeyword(t.name),t.semantic&&this.emitSemantic(e,t.semantic),t.annotation&&this.emitAnnotation(e,t.annotation),this.emitNewline(),this.emitChar("{"),this.push(),t.capacity&&this.emitStringProperty(e,"Capacity",String(t.capacity)),t.spawnRoutine&&this.emitRoutineProperty(e,"SpawnRoutine",t.spawnRoutine),t.initRoutine&&this.emitRoutineProperty(e,"InitRoutine",t.initRoutine),t.updateRoutine&&this.emitRoutineProperty(e,"UpdateRoutine",t.updateRoutine),this.emitNewline(),t.passes.forEach(((n,r)=>(this.emitPartFxPass(e,n),r!==t.passes.length-1&&this.emitNewline()))),this.emitNewline(),t.presets.forEach(((n,r)=>(this.emitPresetDecl(e,n),r!==t.presets.length-1&&this.emitNewline()))),this.pop(),this.emitChar("}"),this.end(),e.endTechnique()}emitTechniqueDecl(e,t){e.beginTechnique(t),this.begin(),this.emitKeyword("technique"),t.name&&this.emitKeyword(t.name),t.semantic&&this.emitSemantic(e,t.semantic),t.annotation&&this.emitAnnotation(e,t.annotation),this.emitNewline(),this.emitChar("{"),this.push(),this.emitNewline(),t.passes.forEach(((n,r)=>(this.emitPass(e,n),r!==t.passes.length-1&&this.emitNewline()))),this.pop(),this.emitChar("}"),this.end(),e.endTechnique()}emitTechnique11Decl(e,t){console.warn("emitTechnique11Decl() not implemented")}emitPartFxPass(e,t){this.emitKeyword("pass"),t.name&&this.emitKeyword(t.name),this.emitNewline(),this.emitChar("{"),this.push(),t.prerenderRoutine&&this.emitRoutineProperty(e,"PrerenderRoutine",t.prerenderRoutine),t.sorting&&this.emitStringProperty(e,"Sorting",String(t.sorting)),this.emitStringProperty(e,"Geometry",`"${t.geometry}"`),1!==t.instanceCount&&this.emitStringProperty(e,"InstanceCount",String(t.instanceCount)),super.emitPassBody(e,t),this.pop(),this.emitChar("}"),this.emitNewline()}emitPresetDecl(e,t){this.emitKeyword("preset"),t.name&&this.emitKeyword(t.name),this.emitNewline(),this.emitChar("{"),this.push(),t.props.forEach((t=>{this.emitKeyword(t.id.name),this.emitKeyword("="),this.emitKeyword("{"),this.emitExpressionList(e,t.args),this.emitKeyword("}"),this.emitChar(";"),this.emitNewline()})),this.pop(),this.emitChar("}"),this.emitNewline()}emitStmt(e,t){switch(t.instructionType){case s.rO.k_SpawnStmt:this.emitSpawnStmt(e,t);break;case s.rO.k_DrawStmt:this.emitDrawStmt(e,t);break;default:super.emitStmt(e,t)}}emit(e,t){if(!t)return this;switch(t.instructionType){case s.rO.k_PartFxDecl:this.emitPartFxDecl(e,t);break;case s.rO.k_TechniqueDecl:this.emitTechniqueDecl(e,t);break;case s.rO.k_Technique11Decl:this.emitTechnique11Decl(e,t);break;default:super.emit(e,t)}return this}static translate(e,t=new a){return l.fxEmitter.emit(t,e).toString(t)}static translateDocument(e,t=new a){return(0,r.Ft)(e)||(0,r.Ft)(e.root)?"":l.translate(e.root,t)}static translateTechnique(e,t,n=new a){return(0,r.Ft)(e)||(0,r.Ft)(e.root)?"":l.translate(e.root.scope.findTechnique(t),n)}}l.fxEmitter=new l({omitEmptyParams:!0})},"3KVU":(e,t,n)=>{"use strict";n.d(t,{_d:()=>g,m7:()=>y,s0:()=>m,sn:()=>v});var r=n("cOQ3"),i=n("W5eQ"),s=n("A0ZU"),o=n("vIQR"),a=n("j3Uf"),l=n("h9Zj"),c=n("q04y"),u=n("k9uP");const h=e=>e.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`)),d=e=>("PART_ID"===e.semantic||"partId"==e.name)&&i.V5.equals(/u?int/,e.type),p=e=>("SPAWN_ID"===e.semantic||"spawnId"==e.name)&&i.V5.equals(/u?int/,e.type);function f(e,t){const n=function(e,t){return e.map((({checker:e})=>t.params.findIndex(e)))}(e,t),r=n.filter((e=>-1!==e)).length,i=new Array(r);for(let t=0;t<n.length;++t){const r=n[t];-1!==r&&(i[r]=e[t].name)}return i}const m="AUTOGEN_GLOBALS",g="AUTOGEN_CONTROLS";class v extends l.j{constructor(){super(...arguments),this.techniques=[],this.techniques11=[],this.controls=[],this.trimeshes=[],this.uniforms=[],this.spawners=[]}addControl(e){return this.controls.push(e),e}addTechnique(e){return(0,r.hu)(!this.has(e.name)),(0,r.hu)(!(0,r.Xq)(this.techniques[0])),this.add(e.name),this.techniques[0]=e,e}addTechnique11(e){return(0,r.hu)(!this.has(e.name)),(0,r.hu)(!(0,r.Xq)(this.techniques[0])),this.add(e.name),this.techniques11[0]=e,e}addUniform(e){return this.uniforms.push(e),e}addTrimesh(e){return(0,r.hu)(!this.has(e.name)),this.add(e.name),this.trimeshes.push(e),e}addSpawnCtor(e){return(0,r.hu)(!this.has(e.name)),this.add(e.name),this.spawners.push(e),e}linkTrimesh(e){(0,r.hu)(this.has(e));let t=this.CSShader;var n,i;t&&(n=t.trimeshes,i=this.trimeshes.find((t=>t.name==e)),-1==n.indexOf(i)&&n.push(i))}beginCsShader(e,t){this.CSShader={name:e,numthreads:t,uavs:[],buffers:[],textures:[],trimeshes:[]}}}class y extends l.I{addControl(e,t){const{id:n,type:r,initExpr:i,annotation:s}=t;if(!s)return!1;if(!t.isGlobal())return!1;let a=r.isNotBaseArray()?r.length:-1;for(let i=0;i<Math.abs(a);++i){const l=""+(a>0?`[${i}]`:""),c={name:n.name+l,type:r.name,value:null,properties:[]};s&&s.decls.forEach((e=>{let t=e.name,n=e.type.name;switch(t){case"UIType":t="__type";break;case"UIName":t="__caption";break;case"UIMin":t="__min";break;case"UIMax":t="__max";break;case"UIStep":t="__step"}let r=b(n,e.initExpr);if(-1!==["__min","__max","__step"].indexOf(t))("float"===n&&"float"===c.type||"int"===n&&"int"===c.type||"uint"===n&&"uint"===c.type)&&c.properties.push({name:t,type:n,value:r});else{if("__type"===t&&"string"!==n)return;if("__type"===t&&"color"===r)return void(c.type="color");c.properties.push({name:t,type:n,value:r})}}));const u=c.properties.find((e=>"__caption"===e.name));u&&(u.value+=l);const h=(e,t)=>t.instructionType===o.rO.k_InitExpr?_(e,t?.args):_(e,[t]);if(-1==a)c.value=h(c.type,t.initExpr);else{let e=t.initExpr?.args;c.value=h(c.type,e[i])}e.addControl(c)}return!0}trimeshBaseName(e){return`trim${e[0].toUpperCase()}${e.slice(1)}`}isTrimesh(e){return!!e?.name.includes("TriMesh")}emitTrimeshDecl(e,t){const n=t.type.name.match(/^([\w]+)<([\w0-9_]+)>$/);(0,r.hu)(n);const i=t.scope.findType(n[2]),s=t.name,o=this.trimeshBaseName(s),a=`${o}VertexCount`,l=`${o}FaceCount`,c=`${o}Vertices`,u=`${o}Faces`,h=`${o}GsAdjacency`,d=`${o}FaceAdjacency`,{typeName:p}=this.resolveType(e,i);this.emitBuffer(e,`StructuredBuffer<${p}>`,c,"vertices"),this.emitBuffer(e,"Buffer<uint3>",u,"faces"),this.emitBuffer(e,"Buffer<uint>",h,"gs like adjacency"),this.emitBuffer(e,"Buffer<uint>",d,"face adjacency");if(!e.has(s)){e.opts.globalUniformsGatherToDedicatedConstantBuffer?e.addUniform({name:a,typeName:"uint"}):this.emitGlobalRaw(e,a,`uniform uint ${a}`),e.opts.globalUniformsGatherToDedicatedConstantBuffer?e.addUniform({name:l,typeName:"uint"}):this.emitGlobalRaw(e,l,`uniform uint ${l}`),this.begin(),this.emitLine(`void ${o}_GetDimensions(out uint vertCount, out uint faceCount)`),this.emitChar("{"),this.push(),this.emitLine(`vertCount = ${a};`),this.emitLine(`faceCount = ${l};`),this.pop(),this.emitChar("}"),this.emitNewline(),this.emitNewline(),this.emitLine(`${p} ${o}_LoadVertex(uint vert)`),this.emitChar("{"),this.push(),this.emitLine(`return ${c}[vert];`),this.pop(),this.emitChar("}"),this.emitNewline(),this.emitNewline(),this.emitLine(`uint3 ${o}_LoadFace(uint face)`),this.emitChar("{"),this.push(),this.emitLine(`return ${u}[face];`),this.pop(),this.emitChar("}"),this.emitNewline(),this.emitNewline(),this.emitLine(`void ${o}_LoadGSAdjacency(uint face, out uint vertices[6])`),this.emitChar("{"),this.push(),this.emitLine("uint offset = face * 6u;"),this.emitLine(`vertices[0] = ${h}[offset];`),this.emitLine(`vertices[1] = ${h}[offset + 1];`),this.emitLine(`vertices[2] = ${h}[offset + 2];`),this.emitLine(`vertices[3] = ${h}[offset + 3];`),this.emitLine(`vertices[4] = ${h}[offset + 4];`),this.emitLine(`vertices[5] = ${h}[offset + 5];`),this.pop(),this.emitChar("}"),this.emitLine(`void ${o}_LoadFaceAdjacency(uint face, out uint faces[3])`),this.emitChar("{"),this.push(),this.emitLine("uint offset = face * 3u;"),this.emitLine(`faces[0] = ${d}[offset];`),this.emitLine(`faces[1] = ${d}[offset + 1];`),this.emitLine(`faces[2] = ${d}[offset + 2];`),this.pop(),this.emitChar("}"),this.end();const n={name:s,vertexCountUName:a,faceCountUName:l,verticesName:c,facesName:u,indicesAdjName:h,faceAdjName:d};e.addTrimesh(n);let r=t.annotation.decls.find((({name:e})=>"name"==e||"ResourceName"==e))?.initExpr?.value;r=r?.slice(1,-1)||null;const i={name:s,type:"mesh",value:r,properties:[]};e.addControl(i)}e.linkTrimesh(s)}emitTriMeshCall(e,t){switch(t.decl.name){case"LoadFace":case"LoadVertex":case"LoadGSAdjacency":case"LoadFaceAdjacency":case"GetDimensions":{(0,r.hu)(t.callee.instructionType===o.rO.k_IdExpr);const n=t.callee;this.emitGlobalVariable(e,n.decl),this.emitKeyword(`${this.trimeshBaseName(n.name)}_${t.decl.name}`),this.emitNoSpace(),this.emitChar("("),this.emitNoSpace(),this.emitExpressionList(e,t.args),this.emitChar(")")}break;default:(0,r.hu)(!1)}}emitFCall(e,t,n){this.isTrimesh(t.callee?.type)?this.emitTriMeshCall(e,t):super.emitFCall(e,t,n)}emitGlobalVariable(e,t){if(this.convoluteToInclude(e,t))return;const{type:n}=t;if(this.isTrimesh(t.type))return void this.emitTrimeshDecl(e,t);if(e.has(t.name))return;if(this.addControl(e,t))return this.emitControlVariable(e,t),void e.add(t.name);if(n.isUniform()||!n.isStatic()&&t.isGlobal()&&!s.isSamplerState(n)&&!s.isBuffer(n)&&!s.isUAV(n)&&!s.isTexture(n))return this.emitUniformVariable(e,t),void e.add(t.name);super.emitGlobalVariable(e,t)}emitControlVariable(e,t,n){e.opts.uiControlsGatherToDedicatedConstantBuffer||(this.emitKeyword("uniform"),this.emitVariableNoInit(e,t,n),this.emitChar(";"))}emitUniformVariable(e,t){const n=t.semantic||h(t.name).toUpperCase();t.usageFlags&u.K.k_Argument&&e.opts.argUniformsToDedicatedConstantBuffer,["ELAPSED_TIME","ELAPSED_TIME_LEVEL","FRAME_NUMBER","PARENT_POSITION","MODEL_MATRIX","MODEL_VIEW_PROJECTION_MATRIX","CAMERA_POSITION","VIEW_MATRIX","VIEW_PROJECTION_MATRIX","PROJECTION_MATRIX"].includes(n)||console.warn(`Unsupported uniform has been used: ${t.toCode()} (${t.usageFlags}).`);if(!e.opts.globalUniformsGatherToDedicatedConstantBuffer)return super.emitVariable(e,t),void this.emitChar(";");{let{name:n,semantic:r,type:{name:i,length:s}}=t;t.type.isNotBaseArray()||(s=-1);const o={name:n,semantic:r,typeName:i,length:s};e.addUniform(o)}}emitTexture(e,t){const{name:n,type:r}=t;if(!e.has(n)){let r=t.annotation?.decls.find((({name:e})=>"name"==e||"ResourceName"==e))?.initExpr?.value;r=r?.slice(1,-1)||null;const i={name:n,type:"texture2d",value:r,properties:[]};e.addControl(i)}super.emitTexture(e,t)}emitSpawnStmt(e,t){const n=e.tech();let r=[[/u?int/,/u?int/],[/u?int/],[]].map((e=>[n.particle,...e,...t.args.map((e=>e.type))])),i=null;for(const e of r)if(i=t.scope.findFunction(t.name,e),i)break;if(!i){for(const e of r)console.error(`could not find spawn inititalizer: ${t.name}(${e.map((e=>`${e}`)).join(", ")})`);return}if(!e.has(i.name)){e.addSpawnCtor(i);const t=e.spawners.indexOf(i)+1;this.emitSpawnOperator(e,t,i)}const s=e.spawners.indexOf(i)+1;this.emitKeyword(`${y.SPAWN_OPERATOR_POLYFILL_NAME}${s}__`),this.emitChar("("),this.emitNoSpace(),this.emitKeyword("(uint)"),this.emitNoSpace(),this.emitChar("("),this.emitExpression(e,t.count),this.emitChar(")"),t.args.length&&(this.emitChar(","),this.emitExpressionList(e,t.args)),this.emitChar(")"),this.emitChar(";"),this.emitNewline()}emitDrawStmt(e,{name:t,args:n}){const r=e.tech(),i=r.passes.find((e=>e.name==t));if(!i)return void console.warn(`pass<${t}> for draw operator has not been found.`);const s=r.passes.indexOf(i);if(!e.has(t)){e.add(t);const n=i.prerenderRoutine.function;this.emitFunction(e,n),this.emitPrerenderRoutune(e,i,s)}this.emitKeyword(`${y.DRAW_OPERATOR_POLYFILL_NAME}${s}`),this.emitChar("("),this.emitNoSpace(),this.emitExpressionList(e,n),this.emitChar(")"),this.emitChar(";"),this.emitNewline()}emitResetShader(e){const t=y.CS_PARTICLE_RESET_ROUTINE,n=[64,1,1],i=e.tech(),o=i.capacity;e.beginCsShader(t,n),this.begin(),this.emitLine(`[numthreads(${n.join(", ")})]`),this.emitLine(`void ${t}(uint3 Gid: SV_GroupID, uint GI: SV_GroupIndex, uint3 GTid: SV_GroupThreadID, uint3 DTid: SV_DispatchThreadID)`),this.emitChar("{"),this.push();{this.emitLine("uint tid = DTid.x;"),this.emitLine(`if (tid >= ${o}) return;`),this.emitUav(e,"RWStructuredBuffer<uint>",y.UAV_DEAD_INDICES,y.UAV_DEAD_INDICES_DESCRIPTION),this.emitLine(`${y.UAV_DEAD_INDICES}[tid] = tid;`),this.emitUav(e,"RWBuffer<uint>",y.UAV_STATES,y.UAV_STATES_DESCRIPTION),this.emitLine(`${y.UAV_STATES}[tid] = 0;`);const{typeName:t}=this.resolveType(e,i.particle);this.emitUav(e,`RWStructuredBuffer<${t}>`,y.UAV_PARTICLES,y.UAV_PARTICLES_DESCRIPTION),this.emitLine(`${t} Particle;`),(0,r.hu)(i.particle.isComplex()),i.particle.fields.forEach((({name:e,type:t})=>{(0,r.hu)(t.length>=1);let n=(0,s.isFloatBasedType)(t)?"0.f":(0,s.isBoolBasedType)(t)?"false":"0";1===t.length?this.emitLine(`Particle.${e} = ${n};`):this.emitLine(`Particle.${e} = ${t.name}(${Array(t.length).fill(n).join(", ")});`)})),this.emitLine(`${y.UAV_PARTICLES}[tid] = Particle;`);const n=i.spawnRoutine.function;if(n.def.params.length>0){const t=n.def.params[0];if(this.emitLine("if (tid == 0)"),this.emitChar("{"),this.push(),this.emitUav(e,`RWStructuredBuffer<${t.type.name}>`,`${y.UAV_SPAWN_EMITTER}`,y.UAV_SPAWN_EMITTER_DESCRIPTION),this.emitLine(`${t.type.name} ${t.name};`),t.type.isComplex())for(const n of t.type.fields)n.type.isComplex()||(n.initExpr?(this.emitKeyword(`${t.name}.${n.name} =`),this.emitExpression(e,n.initExpr),this.emitChar(";"),this.emitNewline()):(this.emitKeyword(`${t.name}.${n.name} =`),this.emitKeyword(`(${n.type.name})0`),this.emitChar(";"),this.emitNewline()));this.emitLine(`${y.UAV_SPAWN_EMITTER}[0] = ${t.name};`),this.pop(),this.emitChar("}")}}this.pop(),this.emitChar("}"),this.end(),e.endCsShader()}emitSpawnOperator(e,t,n,i=64){this.begin();{this.emitKeyword("void"),this.emitKeyword(`${y.SPAWN_OPERATOR_POLYFILL_NAME}${t}__`),this.emitChar("("),this.emitNoSpace(),this.emitKeyword("uint nPart");const o=[{name:"Particle",checker:()=>!0},{name:"PartId",checker:d},{name:"SpawnId",checker:p}];let a=[];n&&(a=f(o,n.def),n.def.params.length>a.length&&(this.emitChar(","),this.emitParams(e,n.def.params.slice(a.length)))),this.emitChar(")"),this.emitNewline(),this.emitChar("{"),this.push(),this.emitUav(e,`RWStructuredBuffer<${y.SPAWN_OPERATOR_TYPE}>`,y.UAV_CREATION_REQUESTS,y.UAV_CREATION_REQUESTS_DESCRIPTION),this.emitUav(e,"RWBuffer<uint>",y.UAV_SPAWN_DISPATCH_ARGUMENTS,y.UAV_SPAWN_DISPATCH_ARGUMENTS_DESCRIPTION),this.emitLine(`int nGroups = (int)ceil((float)nPart / ${i}.f);`),this.emitLine("uint RequestId;"),this.emitLine("// layout: [ uint GroupCountX, uint GroupCountY, uint GroupCountZ ]"),this.emitLine(`InterlockedAdd(${y.UAV_SPAWN_DISPATCH_ARGUMENTS}[0], nGroups, RequestId);`),this.emitLine("for (int i = 0; i < nGroups; ++i)"),this.emitChar("{"),this.push();{const e=`${y.UAV_CREATION_REQUESTS}[RequestId]`;if(this.emitLine(`${e}.count = min(nPart, ${i}u);`),this.emitLine(`${e}.offset = ${i}u * i;`),this.emitLine(`${e}.type = ${t}u;`),n){const t=n.def.params;let i=0;t.slice(a.length).forEach((t=>{let n=t.type;n.isComplex()&&(0,r.hu)(!1,"unsupported",n.toCode());let o=n.size/s.T_FLOAT.size;for(let r=0;r<o;++r)this.emitLine(`${e}.payload[${Math.floor(i/4)}][${i%4}] = asfloat(${t.name}${n.isArray()?`[${r%4}]`:""});`),i++}))}this.emitLine(`nPart -= ${i}u;`),this.emitLine("RequestId += 1;")}this.pop(),this.emitChar("}"),this.pop(),this.emitChar("}")}this.end()}emitGlobalRaw(e,t,n){e.has(t)||(e.add(t),this.begin(),this.emitChar(`${n};`),this.end())}emitSpawnShader(e){const t=e.tech();if(!t.spawnRoutine)return null;const n=t.spawnRoutine.function,o=t.scope.findVariable("elapsedTime"),a=y.CS_PARTICLE_SPAWN_ROUTINE,l=[1,1,1];if(e.beginCsShader(a,l),this.emitUav(e,`RWStructuredBuffer<${y.SPAWN_OPERATOR_TYPE}>`,y.UAV_CREATION_REQUESTS,y.UAV_CREATION_REQUESTS_DESCRIPTION),this.emitUav(e,"RWBuffer<uint>",y.UAV_SPAWN_DISPATCH_ARGUMENTS,y.UAV_SPAWN_DISPATCH_ARGUMENTS_DESCRIPTION),t.initRoutine&&this.emitSpawnOperator(e,0,null),this.begin(),this.emitLine(`[numthreads(${l.join(", ")})]`),this.emitLine(`void ${a}(uint3 Gid: SV_GroupID, uint GI: SV_GroupIndex, uint3 GTid: SV_GroupThreadID, uint3 DTid: SV_DispatchThreadID)`),this.emitChar("{"),this.push(),this.emitLine("if (DTid.x != 0u) return;"),this.emitNewline(),this.emitLine(`// usage of 4th element of ${y.UAV_SPAWN_DISPATCH_ARGUMENTS} as temp value of number of particles`),this.emitFunction(e,n),o?this.emitGlobal(e,o):this.emitGlobalRaw(e,"elapsedTime","uniform float elapsedTime"),this.emitLine(`${y.UAV_SPAWN_DISPATCH_ARGUMENTS}[0] = 0u;`),this.emitLine(`${y.UAV_SPAWN_DISPATCH_ARGUMENTS}[1] = 1u;`),this.emitLine(`${y.UAV_SPAWN_DISPATCH_ARGUMENTS}[2] = 1u;`),i.V5.equals(n.def.returnType,s.T_VOID))if(1==n.def.params.length){const t=n.def.params[0];this.emitUav(e,`RWStructuredBuffer<${t.type.name}>`,`${y.UAV_SPAWN_EMITTER}`,y.UAV_SPAWN_EMITTER_DESCRIPTION),this.emitChar("{"),this.push(),this.emitLine(`${t.type.name} ${t.name} = ${y.UAV_SPAWN_EMITTER}[0];`),this.emitLine(`${n.name}(${t.name});`),this.emitLine(`${y.UAV_SPAWN_EMITTER}[0] = ${t.name};`),this.pop(),this.emitChar("}")}else this.emitLine(`${n.name}();`);else(0,r.hu)(i.V5.equals(n.def.returnType,s.T_INT)),this.emitLine(`float nPartAddFloat = asfloat(${y.UAV_SPAWN_DISPATCH_ARGUMENTS}[3]) + (float)${n.name}() * elapsedTime;`),this.emitLine("float nPartAdd = floor(nPartAddFloat);"),this.emitLine(`${y.UAV_SPAWN_DISPATCH_ARGUMENTS}[3] = asuint(nPartAddFloat - nPartAdd);`),this.emitLine(`${y.SPAWN_OPERATOR_POLYFILL_NAME}0__((uint)nPartAdd);`);this.pop(),this.emitChar("}"),this.end(),e.endCsShader()}emitEntryParams(e,t){t.forEach(((t,n,r)=>{this.emitParam(e,t),n+1!=r.length&&this.emitChar(",")}))}emitInitShader(e){const t=e.tech(),n=t.initRoutine?.function,i=y.CS_PARTICLE_INIT_ROUTINE,o=[64,1,1];e.beginCsShader(i,o),this.begin(),this.emitLine(`[numthreads(${o.join(", ")})]`),this.emitLine(`void ${i}(uint3 Gid: SV_GroupID, uint GI: SV_GroupIndex, uint3 GTid: SV_GroupThreadID, uint3 DTid: SV_DispatchThreadID)`),this.emitChar("{"),this.push();{this.emitLine("uint GroupId = Gid.x;"),this.emitLine("uint ThreadId = GTid.x;"),this.emitUav(e,`RWStructuredBuffer<${y.SPAWN_OPERATOR_TYPE}>`,y.UAV_CREATION_REQUESTS,y.UAV_CREATION_REQUESTS_DESCRIPTION),this.emitLine(`uint nPart = ${y.UAV_CREATION_REQUESTS}[GroupId].count;`),this.emitNewline(),this.emitLine("if (ThreadId >= nPart) return;"),this.emitNewline(),this.emitUav(e,"RWStructuredBuffer<uint>",y.UAV_DEAD_INDICES,y.UAV_DEAD_INDICES_DESCRIPTION),this.emitLine(`int n = (int)${y.UAV_DEAD_INDICES}.DecrementCounter();`),this.emitComment("a bit confusing way to check for particles running out"),this.emitLine("if (n <= 0)"),this.emitChar("{"),this.push(),this.emitComment("not very beautiful, but a cheap way not to"),this.emitComment("think about the correctness of this counter"),this.emitLine(`${y.UAV_DEAD_INDICES}.IncrementCounter();`),this.emitLine("return;"),this.pop(),this.emitChar("}"),this.emitNewline(),this.emitNewline(),this.emitLine(`uint PartId = ${y.UAV_DEAD_INDICES}[n];`);const{typeName:i}=this.resolveType(e,t.particle);this.emitUav(e,`RWStructuredBuffer<${i}>`,y.UAV_PARTICLES,y.UAV_PARTICLES_DESCRIPTION),this.emitLine(`${i} Particle;`),n&&this.emitFunction(e,n);const o=`${y.UAV_CREATION_REQUESTS}[GroupId]`;this.emitLine(`uint Type = ${o}.type;`),this.emitLine(`uint SpawnId = ${o}.offset + ThreadId;`);const a=[{name:"Particle",checker:()=>!0},{name:"PartId",checker:d},{name:"SpawnId",checker:p}];if(n){const e=f(a,n.def);this.emitLine("if (Type == 0u)"),this.emitChar("{"),this.push(),this.emitLine(`${n.name}(${e.join(", ")});`),this.pop(),this.emitChar("}"),this.emitNewline()}e.spawners.forEach(((t,i)=>{this.emitFunction(e,t),(n||i>0)&&(this.emitKeyword("else"),this.emitSpace()),this.emitLine(`if (Type == ${i+1}u)`),this.emitChar("{"),this.push();{const n=f(a,t.def);let i=0,l=t.def.params.slice(n.length);l.forEach((t=>{this.emitVariable(e,t),this.emitChar(";"),this.emitNewline();const n=t.type;n.isComplex()&&(0,r.hu)(!1,"unsupported",n.toCode());let a="asfloat";(0,s.isFloatBasedType)(n)&&(a="asfloat"),(0,s.isIntBasedType)(n)&&(a="asint"),(0,s.isUintBasedType)(n)&&(a="asuint");let l=n.size/s.T_FLOAT.size;for(let e=0;e<l;++e)this.emitLine(`${t.name}${n.isArray()?`[${e%4}]`:""} = ${a}(${o}.payload[${Math.floor(i/4)}][${i%4}]);`),i++;this.emitNewline()})),this.emitKeyword(t.name),this.emitChar("("),this.emitNoSpace(),this.emitKeyword(n.join(", ")),l.length>0&&(this.emitChar(","),l.forEach(((e,t,n)=>{this.emitKeyword(e.name),t+1!=n.length&&this.emitChar(", ")}))),this.emitChar(")"),this.emitChar(";"),this.emitNewline()}this.pop(),this.emitChar("}"),this.emitNewline()})),this.emitLine(`${y.UAV_PARTICLES}[PartId] = Particle;`),this.emitComment("set particles's state as 'Alive'"),this.emitUav(e,"RWBuffer<uint>",y.UAV_STATES,y.UAV_STATES_DESCRIPTION),this.emitLine(`${y.UAV_STATES}[PartId] = 1;`)}this.pop(),this.emitChar("}"),this.end(),e.endCsShader()}emitUpdateShader(e){const t=e.tech(),n=t.updateRoutine.function,r=y.CS_PARTICLE_UPDATE_ROUTINE,i=[64,1,1];e.beginCsShader(r,i),this.begin(),this.emitLine(`[numthreads(${i.join(", ")})]`),this.emitLine(`void ${r}(uint3 Gid: SV_GroupID, uint GI: SV_GroupIndex, uint3 GTid: SV_GroupThreadID, uint3 DTid: SV_DispatchThreadID)`),this.emitChar("{"),this.push();{this.emitLine("uint PartId = DTid.x;"),this.emitUav(e,"RWBuffer<uint>",y.UAV_STATES,y.UAV_STATES_DESCRIPTION),this.emitLine(`bool Alive = (bool)${y.UAV_STATES}[PartId];`),this.emitNewline(),this.emitLine("[branch]"),this.emitLine("if(!Alive) return;"),this.emitNewline();const{typeName:r}=this.resolveType(e,t.particle);this.emitUav(e,`RWStructuredBuffer<${r}>`,y.UAV_PARTICLES,y.UAV_PARTICLES_DESCRIPTION),this.emitLine(`${r} Particle = ${y.UAV_PARTICLES}[PartId];`),this.emitNewline(),this.emitFunction(e,n),this.emitLine("[branch]"),this.emitLine(`if (!${n.name}(Particle${n.def.params.length>1?", PartId":""}))`),this.emitChar("{"),this.push(),this.emitUav(e,"RWStructuredBuffer<uint>",y.UAV_DEAD_INDICES,y.UAV_DEAD_INDICES_DESCRIPTION),this.emitComment("returning the particle index to the list of the dead"),this.emitLine(`uint n = ${y.UAV_DEAD_INDICES}.IncrementCounter();`),this.emitLine(`${y.UAV_DEAD_INDICES}[n] = PartId;`),this.emitNewline(),this.emitComment("set particles's state as 'dead'"),this.emitLine(`${y.UAV_STATES}[PartId] = 0;`),this.emitLine("return;"),this.pop(),this.emitChar("}"),this.emitNewline(),this.emitNewline(),this.emitLine(`${y.UAV_PARTICLES}[PartId] = Particle;`)}this.pop(),this.emitChar("}"),this.end(),this.emitUav(e,`RWStructuredBuffer<${y.SPAWN_OPERATOR_TYPE}>`,y.UAV_CREATION_REQUESTS,y.UAV_CREATION_REQUESTS_DESCRIPTION),this.emitUav(e,"RWBuffer<uint>",y.UAV_SPAWN_DISPATCH_ARGUMENTS,y.UAV_SPAWN_DISPATCH_ARGUMENTS_DESCRIPTION),e.endCsShader()}emitPrerenderRoutune(e,t,n){const r=e.tech(),o=t.prerenderRoutine.function,{typeName:a}=this.resolveType(e,o.def.params[1].type),{typeName:l}=this.resolveType(e,r.particle);this.begin(),this.emitLine(`void ${y.DRAW_OPERATOR_POLYFILL_NAME}${n}(${l} Particle)`),this.emitChar("{"),this.push(),this.emitUav(e,`RWStructuredBuffer<${a}>`,`${y.UAV_PRERENDERED}${n}`),t.sorting&&this.emitUav(e,"RWStructuredBuffer<int2>",`${y.UAV_SERIALS}${n}`,y.UAV_SERIALS_DESCRIPTION),this.emitLine(`uint PrerenderId = ${y.UAV_PRERENDERED}${n}.IncrementCounter();`),t.sorting&&this.emitLine(`uint SerialId = ${y.UAV_SERIALS}${n}.IncrementCounter();`),t.instanceCount>1&&(this.emitLine(`for(int InstanceId = 0; InstanceId < ${t.instanceCount}; InstanceId++)`),this.emitChar("{"),this.push());{this.emitLine(`${a} Prerendered;`);const e=o.def.params.findIndex((e=>e.type.name===a)),r=o.def.params.findIndex((e=>e.type.name===l)),c=o.def.params.findIndex((e=>e.type.name===s.T_INT.name)),u=[];u[e]="Prerendered",u[r]="Particle",-1!==c&&(u[c]="InstanceId"),i.V5.equals(o.def.returnType,s.T_VOID)?(this.emitLine("int SortIndex = 0;"),this.emitLine(`${o.name}(${u.join(", ")});`)):this.emitLine(`int SortIndex = ${o.name}(${u.join(", ")});`),t.sorting&&(t.instanceCount>1?(this.emitLine("if (InstanceId == 0)"),this.push(),this.emitLine(`${y.UAV_SERIALS}${n}[SerialId] = int2(SortIndex, PrerenderId);`),this.pop()):this.emitLine(`${y.UAV_SERIALS}${n}[SerialId] = int2(SortIndex, PrerenderId);`)),t.instanceCount>1?this.emitLine(`${y.UAV_PRERENDERED}${n}[PrerenderId * ${t.instanceCount} + InstanceId] = Prerendered;`):this.emitLine(`${y.UAV_PRERENDERED}${n}[PrerenderId] = Prerendered;`)}t.instanceCount>1&&(this.pop(),this.emitChar("}"),this.emitNewline()),this.pop(),this.emitChar("}"),this.end()}emitPrerenderShader(e,t,n){const r=t.prerenderRoutine.function,i=`${y.CS_PARTICLE_PRERENDER_SHADER}${n}`,s=[64,1,1],o=e.tech();e.beginCsShader(i,s),this.begin(),this.emitLine(`[numthreads(${s.join(", ")})]`),this.emitLine(`void ${i}(uint3 Gid: SV_GroupID, uint GI: SV_GroupIndex, uint3 GTid: SV_GroupThreadID, uint3 DTid: SV_DispatchThreadID)`),this.emitChar("{"),this.push();{this.emitLine("uint PartId = DTid.x;"),this.emitUav(e,"RWBuffer<uint>",y.UAV_STATES,y.UAV_STATES_DESCRIPTION),this.emitLine(`bool Alive = (bool)${y.UAV_STATES}[PartId];`),this.emitNewline(),this.emitLine("[branch]"),this.emitLine("if(!Alive) return;"),this.emitNewline(),this.emitFunction(e,r);const{typeName:i}=this.resolveType(e,o.particle);this.emitUav(e,`RWStructuredBuffer<${i}>`,y.UAV_PARTICLES,y.UAV_PARTICLES_DESCRIPTION),this.emitLine(`${i} Particle = ${y.UAV_PARTICLES}[PartId];`),this.emitPrerenderRoutune(e,t,n),this.emitLine(`${y.DRAW_OPERATOR_POLYFILL_NAME}${n}(Particle);`)}this.pop(),this.emitChar("}"),this.end(),e.endCsShader()}emitSpawnOpContainer(e){const t=e.spawners.map((e=>e.def.params.slice(2).map((e=>e.type.size)).reduce(((e,t)=>t+e),0))).reduce(((e,t)=>t+e),0),n=s.T_FLOAT4.size,r=Math.ceil(t/n);this.begin(),this.emitLine(`struct ${y.SPAWN_OPERATOR_TYPE}`),this.emitChar("{"),this.push(),this.emitLine("uint count;      // number of particles inside group"),this.emitLine("uint offset;     // number of particles prior this group (to determ spawn id)"),this.emitLine("uint type;       // type of spawner (type of function to init)"),r>0&&(this.emitNewline(),this.emitLine(`float4 payload[${r}];`)),this.pop(),this.emitChar("}"),this.emitChar(";"),this.end(!0)}finalizeTechnique(e){if(e.opts.globalUniformsGatherToDedicatedConstantBuffer&&e.uniforms.length>0){const t=e.opts.globalUniformsConstantBufferRegister||-1;for(let n in e.tech()?.scope.cbuffers){let r=e.tech().scope.cbuffers[n];s.resolveRegister(r).index===t&&console.error(`register ${t} is already used by cbuffer '${r.name}'`)}const n=e.opts.globalUniformsConstantBufferName||m;this.begin(),this.emitKeyword("cbuffer"),this.emitKeyword(n),-1!==t&&(this.emitChar(":"),this.emitKeyword("register"),this.emitChar("("),this.emitNoSpace(),this.emitKeyword(`b${t}`),this.emitNoSpace(),this.emitChar(")")),this.emitNewline(),this.emitChar("{"),this.push(),e.uniforms.forEach((({name:t,typeName:n,semantic:r,length:i})=>{this.emitKeyword(n),this.emitKeyword(t),i>0&&this.emitChar(`[${i}]`),r?this.emitSemantic(e,r):this.emitSemantic(e,h(t).toUpperCase()),this.emitChar(";"),this.emitNewline()})),this.pop(),this.emitChar("}"),this.emitChar(";"),this.end(!0)}const t=e.controls.filter((e=>!["texture2d","mesh"].includes(e.type)));if(e.opts.uiControlsGatherToDedicatedConstantBuffer&&t.length>0){const n=e.opts.uiControlsConstantBufferRegister||-1;for(let t in e.tech()?.scope.cbuffers){let r=e.tech().scope.cbuffers[t];s.resolveRegister(r).index===n&&console.error(`register ${n} is already used by cbuffer '${r.name}'`)}const r=e.opts.uiControlsConstantBufferName||g;this.begin(),this.emitKeyword("cbuffer"),this.emitKeyword(r),-1!==n&&(this.emitChar(":"),this.emitKeyword("register"),this.emitChar("("),this.emitNoSpace(),this.emitKeyword(`b${n}`),this.emitNoSpace(),this.emitChar(")")),this.emitNewline(),this.emitChar("{"),this.push();{const e=/([\w_][\w\d]+)(\[([\d]+)\])?/,n={};t.forEach((t=>{const r=t.name,i=r.match(e),s=function(e){const t=e.type;switch(t){case"color":return"float4";case"int":case"uint":case"float":case"float2":case"float3":case"float4":return t;default:console.assert(!1,`unsupported UI type: ${t}`)}return null}(t);n[i[1]]||={name:r,type:s},n[i[1]].name=i[3]?`${i[1]}[${Number(i[3])+1}]`:i[1]})),Object.values(n).forEach((e=>{this.emitKeyword(e.type),this.emitKeyword(e.name),this.emitChar(";"),this.emitNewline()}))}this.pop(),this.emitChar("}"),this.emitChar(";"),this.end(!0)}}emitPartFxDecl(e,t){if(!t.particle)return;e.beginTechnique(t),this.emitSpawnShader(e),this.emitResetShader(e),t.updateRoutine&&this.emitUpdateShader(e),this.emitInitShader(e);const n=t.passes.map(((t,n)=>{const{prerenderRoutine:r,vertexShader:i,pixelShader:s,drawMode:o}=t;let{sorting:l,geometry:c,instanceCount:u}=t,h=null,d=null,p=t.renderStates;r&&o===a.t.k_Auto&&this.emitPrerenderShader(e,t,n),i&&(this.emitFunction(e,i),h=i.name),s&&(this.emitFunction(e,s),d=s.name);const{typeName:f}=this.resolveType(e,t.particleInstance);return{instance:f,sorting:l,geometry:c,instanceCount:u,VSParticleShader:h,PSParticleShader:d,renderStates:p,CSParticlesPrerenderRoutine:e.CSShaders.find((e=>e.name==`${y.CS_PARTICLE_PRERENDER_SHADER}${n}`)),drawMode:o}}));this.emitSpawnOpContainer(e),this.finalizeTechnique(e);const{name:r,capacity:i}=t,s=this.resolveType(e,t.particle).typeName,o=e.CSShaders.find((e=>e.name==y.CS_PARTICLE_SPAWN_ROUTINE)),l=e.CSShaders.find((e=>e.name==y.CS_PARTICLE_RESET_ROUTINE)),c=e.CSShaders.find((e=>e.name==y.CS_PARTICLE_UPDATE_ROUTINE)),u={name:r,capacity:i,particle:s,passes:n,CSParticlesSpawnRoutine:o,CSParticlesResetRoutine:l,CSParticlesInitRoutine:e.CSShaders.find((e=>e.name==y.CS_PARTICLE_INIT_ROUTINE)),CSParticlesUpdateRoutine:c,controls:[...e.controls],presets:y.parsePresets(t)};e.addTechnique(u),e.endTechnique()}emitTechniqueDecl(e,t){e.beginTechnique(t);const{name:n}=t;t.passes.forEach(((t,n)=>{const{vertexShader:r,pixelShader:i}=t;r&&this.emitFunction(e,r),i&&this.emitFunction(e,i)}));const r=t.passes.map(((t,n)=>{const{vertexShader:r,pixelShader:i}=t;let s=null,o=null;r&&(s=r.name),i&&(o=i.name);const a=r?.def.params[0].type,{typeName:l}=this.resolveType(e,a);return{instance:l,VSParticleShader:s,PSParticleShader:o,renderStates:t.renderStates}}));this.finalizeTechnique(e);const i={name:n,passes:r,controls:[...e.controls],presets:y.parsePresets(t)};e.addTechnique(i),e.endTechnique()}emitTechnique11Decl(e,t){e.beginTechnique(t);const{name:n}=t;for(const n of t.passes)(0,c.N)(n,((t,n)=>{if(t.instructionType===o.rO.k_CompileShader11Expr){const n=t;this.emitEntryFunction(e,n.func)}}));this.finalizeTechnique(e);const r={name:n,controls:[...e.controls]};e.addTechnique11(r),e.endTechnique()}static parsePresets(e){return e.presets.map(((e,t)=>{const n=e.name;let r=[];return e.props.forEach((e=>{if(!e)return;const t=e.resolveDeclaration();let n=t.type.name.toLowerCase();t.annotation&&t.annotation.decls.forEach((e=>{const t=e.name,r=e.type.name,i=b(r,e.initExpr);"__type"!==t&&"UIType"!==t||"string"!==r||"color"!==i||(n="color")}));const i=_(n,e.args);r.push({name:t.name,type:n,value:i})})),{name:n,desc:null,data:r}}))}static translate(e,t=new v){return y.fxtTranslator.emit(t,e),e.instructionType===o.rO.k_FunctionDecl&&y.fxtTranslator.finalizeTechnique(t),y.fxtTranslator.toString(t)}}function b(e,t){switch(t=x(t),e){case"int":case"uint":case"float":return t.value;case"string":return t.value.split('"').join("")}return(0,r.hu)(!1,"Unsupported type"),null}function _(e,t){switch(e){case"int":case"uint":case"float":return x(t[0]).value;case"float2":return{x:x(t[0]).value,y:x(t[1]).value};case"float3":return{x:x(t[0]).value,y:x(t[1]).value,z:x(t[2]).value};case"float4":return{x:x(t[0]).value,y:x(t[1]).value,z:x(t[2]).value,w:x(t[3]).value};case"color":return{r:x(t[0]).value,g:x(t[1]).value,b:x(t[2]).value,a:x(t[3]).value};case"texture2d":return x(t[0]).value?.slice(1,-1)||null}return null}function x(e){return e.instructionType===o.rO.k_InitExpr?e.args[0]:e}y.UAV_PARTICLES="uavParticles",y.UAV_STATES="uavStates",y.UAV_DEAD_INDICES="uavDeadIndices",y.UAV_CREATION_REQUESTS="uavCreationRequests",y.UAV_PRERENDERED="uavPrerendered",y.UAV_SERIALS="uavSerials",y.UAV_SPAWN_DISPATCH_ARGUMENTS="uavSpawnDispatchArguments",y.UAV_SPAWN_EMITTER="uavEmitter",y.UAV_PARTICLES_DESCRIPTION="The buffer contains user-defined particle data.",y.UAV_STATES_DESCRIPTION="The buffer contains the state of the particles, Alive or dead.",y.UAV_DEAD_INDICES_DESCRIPTION="The buffer contains indicies of dead particles.",y.UAV_CREATION_REQUESTS_DESCRIPTION="The buffer contatins information about the number and type of particles to be created",y.UAV_SERIALS_DESCRIPTION="The buffer contains hashes are required for correct sorting during render buffer filling.",y.UAV_SPAWN_DISPATCH_ARGUMENTS_DESCRIPTION="The buffer contains arguments of dispatch required to run initialization of new particles.",y.UAV_SPAWN_EMITTER_DESCRIPTION="The buffer containts constant data avaialble across frames.",y.SPAWN_OPERATOR_POLYFILL_NAME="__spawn_op",y.SPAWN_OPERATOR_TYPE="__SPAWN_T__",y.DRAW_OPERATOR_POLYFILL_NAME="__draw_op",y.CS_PARTICLE_RESET_ROUTINE="CSParticlesResetRoutine",y.CS_PARTICLE_SPAWN_ROUTINE="CSParticlesSpawnRoutine",y.CS_PARTICLE_INIT_ROUTINE="CSParticlesInitRoutine",y.CS_PARTICLE_UPDATE_ROUTINE="CSParticlesUpdateRoutine",y.CS_PARTICLE_PRERENDER_SHADER="CSParticlesPrerenderShader",y.fxtTranslator=new y({omitEmptyParams:!0})},elBL:(e,t,n)=>{"use strict";n.d(t,{K:()=>m,i:()=>f});var r=n("cOQ3"),i=n("W5eQ"),s=n("vIQR"),o=n("A0ZU"),a=n("HXFP");const l={void:"void",uint:"uint",uint2:"uvec2",uint3:"uvec3",uint4:"uvec4",bool:"bool",bool2:"bvec2",bool3:"bvec3",bool4:"bvec4",int:"int",int2:"ivec2",int3:"ivec3",int4:"ivec4",float:"float",float2:"vec2",float3:"vec3",float4:"vec4",float4x4:"mat4",float3x3:"mat3x3",float3x4:"mat3x4"},c=e=>e.semantic?`a_${e.semantic.toLowerCase()}`:`a_${e.name}_${e.instructionID}`,u=e=>e.semantic?`v_${e.semantic.toLowerCase()}`:`v_${e.name}_${e.instructionID}`,h=e=>-1!==["INSTANCE_ID","SV_INSTANCEID"].indexOf(e.toUpperCase()),d=e=>-1!==["VERTEX_ID","SV_VERTEXID"].indexOf(e.toUpperCase());function p(e,t){const n=o.isScalarType(e)?t.length:o.isScalarType(t)?e.length:Math.min(e.length,t.length),r=o.determMostPreciseBaseType(e,t);return o.findType(`${r.name}${1===n?"":n}`)}class f extends a.qU{constructor(){super(...arguments),this.location=0}has(e){return!!["unpackHalf2x16(uint)"].includes(e)||super.has(e)}}class m extends a.Q{resolveTypeName(e){const t=l[e.name];return(0,r.Xq)(t)?t:((0,r.hu)(!1,`unknown built in type found '${e.name}'`),e.name)}resolveType(e,t){let n=super.resolveType(e,t);return n&&(n.usage=n.usage?.split(" ").filter((e=>"static"!==e)).join(" ")),n}isVaryingOrAttributeAlias(e,t){if(this.isMain()&&!e.isRaw()&&t.element.instructionType===s.rO.k_IdExpr){const e=t.element;if(e.decl.isParameter()&&!e.decl.type.isUniform())return!0}return!1}emitExpressionWithCast(e,t,n){const{typeName:r}=this.resolveType(e,n);i.V5.equals(n,t.type)?this.emitExpression(e,t):(this.emitKeyword(r),this.emitNoSpace(),this.emitChar("("),this.emitNoSpace(),this.emitExpression(e,t),this.emitChar(")"))}emitExpressionListWithCast(e,t,n){t?.forEach(((r,i)=>{this.emitExpressionWithCast(e,t[i],n[i]),i!=t.length-1&&this.emitChar(",")}))}emitArithmetic(e,t){let{left:n,right:r,operator:s}=t;if(!i.V5.equals(n.type,r.type)){const t=p(n.type,r.type);return this.emitExpressionWithCast(e,n,t),this.emitKeyword(s),this.emitSpace(),void this.emitExpressionWithCast(e,r,t)}super.emitArithmetic(e,t)}emitAssigment(e,t){let{left:n,right:s,operator:o}=t;if(!i.V5.equals(n.type,s.type)){const t=p(n.type,s.type);return this.emitExpressionWithCast(e,n,t),this.emitKeyword(o),this.emitSpace(),(0,r.hu)(i.NQ.isExpression(s)),void this.emitExpressionWithCast(e,s,t)}super.emitAssigment(e,t)}emitSemantic(e,t){}emitPostfixIndex(e,t){/^Buffer(<[a-zA-Z0-9_]+>)?$/.test(t.element.type.name)?this.emitKeyword(`${this.resolveType(e,t.type).typeName}(0.0, 0.0, 0.0, 0.0)`):super.emitPostfixIndex(e,t)}emitVariableNoInit(e,t,n){const{type:r}=t;if(t.isGlobal()&&o.isBuffer(r)){const{typeName:n}=this.resolveType(e,r.arrayElementType);return this.emitKeyword("uniform highp"),["ivec4"].includes(n)?this.emitKeyword("isampler2D"):["uvec4"].includes(n)?this.emitKeyword("usampler2D"):this.emitKeyword("sampler2D"),void this.emitKeyword(t.name)}if(o.isTexture(r))return this.emitKeyword("sampler2D"),void this.emitKeyword(t.name);super.emitVariableNoInit(e,t,n)}emitVariable(e,t,n){if(this.emitVariableNoInit(e,t,n),t.initExpr)if(this.emitKeyword("="),this.emitSpace(),i.V5.equals(t.type,t.initExpr.type))this.emitExpression(e,t.initExpr);else{const{typeName:n}=this.resolveType(e,t.type);this.emitKeyword(`${n}`),this.emitChar("("),this.emitNoSpace(),this.emitExpression(e,t.initExpr),this.emitChar(")")}}emitPrologue(e,t){this.begin(),this.emitLine("#version 300 es"),this.emitLine("precision highp float;"),this.emitLine("precision highp int;"),this.end(),this.begin();for(const n of t.params){if(n.type.isUniform())continue;const t=n.type;t.isComplex()?t.fields.forEach((t=>{(0,r.hu)(!t.type.isNotBaseArray()&&!t.type.isComplex()),this.emitVaryingOrAttribute(e,t)})):this.emitVaryingOrAttribute(e,n)}if(this.end(),this.begin(),this.end(),"vs"===e.mode){this.begin();{const n=t.returnType;(0,r.hu)(n.isComplex(),"basic types unsupported yet"),n.fields.forEach((t=>this.emitVarying(e,t)))}this.end()}if("ps"===e.mode){if(this.begin(),i.V5.equals(t.returnType,o.T_FLOAT4))this.emitLine("layout(location = 0) out vec4 out_color;");else if(t.returnType.isComplex()){t.returnType.fields.forEach(((t,n)=>{const{typeName:i}=this.resolveType(e,t.type);(0,r.hu)(!t.type.isComplex()&&!t.type.isNotBaseArray()),this.emitLine(`layout(location = ${n}) out ${i} out_${t.name};`)}))}else(0,r.hu)(!1,"unsupported pixel shader output format");this.end()}}emitKeyword(e){"input"===e&&(e="input1"),super.emitKeyword(e)}emitTextureRaw(e,t,n,r){if(!e.has(n)){e.addTexture(t,n);this.begin(),r&&this.emitComment(r),this.emitKeyword(`uniform sampler2D ${n};`),this.end()}e.linkTexture(n)}emitAttribute(e,t){h(t.semantic)||d(t.semantic)||(this.emitKeyword(`layout(location = ${e.location++}) in`),this.emitVariable(e,t,c),this.emitChar(";"),this.emitNewline())}emitVarying(e,t){const{type:n}=t;if(n.isComplex())return void n.fields.forEach((t=>this.emitVarying(e,t)));this.emitKeyword({vs:"out",ps:"in"}[e.mode]),this.emitVariable(e,t,u),this.emitChar(";"),this.emitNewline()}emitVaryingOrAttribute(e,t){switch(e.mode){case"vs":return this.emitAttribute(e,t);case"ps":return this.emitVarying(e,t)}}emitCbuffer(e,t){e.has(t.name)||(e.addCbuffer(t),this.begin(),this.emitComment(`size: ${t.type.size}`),this.emitKeyword("uniform"),t.id&&this.emitKeyword(t.name),this.emitNewline(),this.emitChar("{"),this.push(),t.type.fields.forEach((t=>{this.emitVariable(e,t),this.emitChar(";"),this.emitChar("\t"),this.emitComment(`padding ${t.type.padding}, size ${t.type.size}`)})),this.pop(),this.emitChar("}"),this.emitChar(";"),this.end()),e.linkCbuffer(t.name)}emitFloat(e,t){const n=String(t.value);this.emitKeyword(n),-1===n.indexOf(".")&&this.emitChar(".0")}attr(e,t){return e.isVertex()?c(t):u(t)}emitPostfixPoint(e,t){super.emitPostfixPoint(e,t)}emitFCall(e,t){const{decl:n,args:i,callee:a}=t;switch(n.name){case"mul":return(0,r.hu)(2==i.length),void this.emitMulIntrinsic(e,i[0],i[1]);case"lerp":return void super.emitFCall(e,t,(e=>"mix"));case"frac":return void super.emitFCall(e,t,(e=>"fract"));case"asuint":return void super.emitFCall(e,t,(e=>"floatBitsToUint"));case"asfloat":return void super.emitFCall(e,t,(e=>"uintBitsToFloat"));case"fmod":return void super.emitFCall(e,t,(e=>"mod"));case"clip":return void this.emitClipIntrinsic(e,i[0])}if(a){const t=a.type;if(o.isTexture(t)){const t=a;return this.emitGlobal(e,t.decl),"Sample"==n.name&&(this.emitKeyword("texture"),this.emitChar("("),this.emitNoSpace(),this.emitKeyword(t.name),this.emitChar(","),this.emitExpressionList(e,i.slice(1)),this.emitChar(")")),void("GetDimensions"==n.name&&(this.emitChar("{"),this.push(),this.emitKeyword("ivec2"),this.emitKeyword("temp"),this.emitSpace(),this.emitChar("="),this.emitKeyword("textureSize"),this.emitChar("("),this.emitNoSpace(),this.emitKeyword(t.name),this.emitChar(","),this.emitKeyword("int"),this.emitChar("("),this.emitNoSpace(),this.emitExpression(e,i[0]),this.emitChar(")"),this.emitChar(")"),this.emitChar(";"),this.emitNewline(),this.emitExpression(e,i[1]),this.emitSpace(),this.emitChar("="),this.emitKeyword("uint(temp.x)"),this.emitChar(";"),this.emitNewline(),this.emitExpression(e,i[2]),this.emitSpace(),this.emitChar("="),this.emitKeyword("uint(temp.y)"),this.emitChar(";"),this.emitNewline(),this.pop(),this.emitChar("}")))}}n.instructionType!==s.rO.k_SystemFunctionDecl&&this.emitFunction(e,n),a&&(this.emitExpression(e,a),this.emitChar("."),this.emitNoSpace()),this.emitKeyword(n.name),this.emitChar("("),this.emitNoSpace(),this.emitExpressionListWithCast(e,i,n.def.params.map((e=>e.type))),this.emitChar(")")}emitCast(e,t){if(!t.isUseless()){if(l[t.type.name]){const{typeName:n}=this.resolveType(e,t.type);return this.emitKeyword(n),this.emitChar("("),this.emitNoSpace(),this.emitExpression(e,t.expr),void this.emitChar(")")}super.emitCast(e,t)}}emitInitExpr(e,t){if(l[t.type.name]){const{typeName:n}=this.resolveType(e,t.type);return this.emitKeyword(n),this.emitChar("("),this.emitNoSpace(),this.emitExpressionList(e,t.args),void this.emitChar(")")}super.emitInitExpr(e,t)}emitFunction(e,t){const n=t.def,r=n.returnType,s=e.isVertex()||e.isPixel();if(0===this.depth()&&s){this.emitPrologue(e,t.def);const{typeName:s}=this.resolveType(e,n.returnType);super.emitRegularFunction(e,t),this.begin();{this.emitChar("void main(void)"),this.emitNewline(),this.emitChar("{"),this.push();const a=t.def.params.filter((e=>0!==e.type.size));{for(let t of a){const n=t.name,{typeName:r}=this.resolveType(e,t.type);this.emitKeyword(r),this.emitKeyword(n),this.emitChar(";"),this.emitNewline();const i=(t,n)=>{if(!t.type.isComplex()||o.isBase(t.type)){for(let e of n)this.emitKeyword(e),this.emitChar("."),this.emitNoSpace();this.emitKeyword(t.name),this.emitSpace(),this.emitChar("="),h(t.semantic)?this.emitKeyword("uint(gl_InstanceID)"):d(t.semantic)?this.emitKeyword("uint(gl_VertexID)"):this.emitKeyword(this.attr(e,t)),this.emitChar(";"),this.emitNewline()}else t.type.fields.forEach((e=>i(e,[...n,t.name])))};i(t,[])}const l="temp";if(this.emitKeyword(s),this.emitKeyword(l),this.emitKeyword("="),this.emitKeyword(t.name),this.emitChar("("),this.emitNoSpace(),a.forEach(((e,t,n)=>{this.emitKeyword(e.name),t+1!=n.length&&this.emitChar(",")})),this.emitChar(")"),this.emitChar(";"),this.emitNewline(),e.isVertex()){{let e,t;e=(e,n)=>{if(!e.type.isComplex()||o.isBase(e.type)){this.emitKeyword(u(e)),this.emitSpace(),this.emitChar("=");for(let e of n)this.emitKeyword(e),this.emitChar("."),this.emitNoSpace();this.emitKeyword(e.name),this.emitChar(";"),this.emitNewline()}else t(e.type,[...n,e.name])},t=(t,n)=>t.fields.forEach((t=>e(t,n))),t(r,[l])}const e=r.fields.filter((e=>{return t=e.semantic,-1!==["POSITION","SV_POSITION"].indexOf(t.toUpperCase());var t}))[0];this.emitKeyword("gl_Position"),this.emitKeyword("="),this.emitKeyword(l),this.emitChar("."),this.emitChar(e?.name),this.emitChar(";"),this.emitNewline()}else if(i.V5.equals(n.returnType,o.T_FLOAT4))this.emitKeyword("out_color"),this.emitKeyword("="),this.emitKeyword(l),this.emitChar(";"),this.emitNewline();else if(n.returnType.isComplex()){const e=n.returnType;for(const t of e.fields)this.emitKeyword(`out_${t.name}`),this.emitKeyword("="),this.emitKeyword(`${l}.${t.name}`),this.emitChar(";"),this.emitNewline()}}this.pop(),this.emitChar("}")}this.end()}else super.emitFunction(e,t)}emitMulIntrinsic(e,t,n){this.emitChar("("),this.emitExpression(e,t),this.emitKeyword("*"),this.emitExpression(e,n),this.emitChar(")")}emitClipIntrinsic(e,t){this.emitKeyword("if"),this.emitChar("("),this.emitNoSpace(),this.emitChar("("),this.emitNoSpace(),this.emitExpression(e,t),this.emitChar(")"),this.emitKeyword("<"),this.emitKeyword("0.0"),this.emitChar(")"),this.emitKeyword("discard")}static $declToAttributeName(e){return c(e)}static translate(e,t=new f){return m.glslEmitter.emit(t,e).toString()}}m.glslEmitter=new m({omitEmptyParams:!0,omitInUsage:!0})},"jeW/":(e,t,n)=>{"use strict";var r;n.d(t,{g:()=>r}),function(e){e[e.SystemTypeRedefinition=2202]="SystemTypeRedefinition",e[e.TypeRedefinition=2203]="TypeRedefinition",e[e.VariableRedefinition=2204]="VariableRedefinition",e[e.SystemVariableRedefinition=2205]="SystemVariableRedefinition",e[e.FunctionRedifinition=2206]="FunctionRedifinition",e[e.CbufferRedefinition=2207]="CbufferRedefinition",e[e.SystemFunctionRedefinition=2208]="SystemFunctionRedefinition",e[e.UnsupportedTypeDecl=2209]="UnsupportedTypeDecl",e[e.UnsupportedExpr=2210]="UnsupportedExpr",e[e.UnknownVarName=2211]="UnknownVarName",e[e.UnknownInstruction=2212]="UnknownInstruction",e[e.InvalidArithmeticOperation=2213]="InvalidArithmeticOperation",e[e.InvalidArithmeticAssigmentOperation=2214]="InvalidArithmeticAssigmentOperation",e[e.InvalidAssigmentOperation=2215]="InvalidAssigmentOperation",e[e.InvalidBitwiseOperation=2216]="InvalidBitwiseOperation",e[e.InvalidLeftHandSideInAssignment=2217]="InvalidLeftHandSideInAssignment",e[e.InvalidRelationalOperation=2218]="InvalidRelationalOperation",e[e.InvalidLogicOperation=2219]="InvalidLogicOperation",e[e.InvalidConditionType=2220]="InvalidConditionType",e[e.InvalidConditonValueTypes=2221]="InvalidConditonValueTypes",e[e.InvalidCastTypeUsage=2222]="InvalidCastTypeUsage",e[e.InvalidCastTypeNotBase=2223]="InvalidCastTypeNotBase",e[e.InvalidCastUnknownType=2224]="InvalidCastUnknownType",e[e.InvalidUnaryOperation=2225]="InvalidUnaryOperation",e[e.InvalidPostfixNotArray=2226]="InvalidPostfixNotArray",e[e.InvalidPostfixNotIntIndex=2227]="InvalidPostfixNotIntIndex",e[e.InvalidPostfixNotField=2228]="InvalidPostfixNotField",e[e.InvalidPostfixArithmetic=2229]="InvalidPostfixArithmetic",e[e.InvalidComplexNotFunction=2230]="InvalidComplexNotFunction",e[e.InvalidComplexNotType=2231]="InvalidComplexNotType",e[e.InvalidComplexNotConstructor=2232]="InvalidComplexNotConstructor",e[e.InvalidCompileNotFunction=2233]="InvalidCompileNotFunction",e[e.InvalidCompileFunctionNotValid=2234]="InvalidCompileFunctionNotValid",e[e.FunctionRedefinition=2235]="FunctionRedefinition",e[e.InvalidWhileCondition=2236]="InvalidWhileCondition",e[e.InvalidDoWhileCondition=2237]="InvalidDoWhileCondition",e[e.InvalidIfCondition=2238]="InvalidIfCondition",e[e.InvalidForInitExpr=2239]="InvalidForInitExpr",e[e.InvalidForInitEmptyIterator=2240]="InvalidForInitEmptyIterator",e[e.InvalidForConditionEmpty=2241]="InvalidForConditionEmpty",e[e.InvalidForConditionRelation=2242]="InvalidForConditionRelation",e[e.InvalidForStepEmpty=2243]="InvalidForStepEmpty",e[e.InvalidForStepOperator=2244]="InvalidForStepOperator",e[e.InvalidForStepExpr=2245]="InvalidForStepExpr",e[e.InvalidNewFieldForStructName=2246]="InvalidNewFieldForStructName",e[e.InvalidNewFieldForStructSematic=2247]="InvalidNewFieldForStructSematic",e[e.InvalidNewAnnotationVar=2248]="InvalidNewAnnotationVar",e[e.InvalidFunctionParameterDefenitionDefaultNeeded=2249]="InvalidFunctionParameterDefenitionDefaultNeeded",e[e.CannotChooseFunction=2250]="CannotChooseFunction",e[e.InvalidFuncDefenitionReturnType=2251]="InvalidFuncDefenitionReturnType",e[e.InvalidSystemFunctionReturnType=2252]="InvalidSystemFunctionReturnType",e[e.InvalidTypeNameNotType=2253]="InvalidTypeNameNotType",e[e.InvalidTypeNameTemplateNotFound=2254]="InvalidTypeNameTemplateNotFound",e[e.InvalidTypeScope=2255]="InvalidTypeScope",e[e.CannotProduceType=2256]="CannotProduceType",e[e.InvalidTypeVectorMatrix=2257]="InvalidTypeVectorMatrix",e[e.TechniqueNameRedefinition=2258]="TechniqueNameRedefinition",e[e.InvalidFunctionRecursionNotAllowed=2259]="InvalidFunctionRecursionNotAllowed",e[e.InvalidFunctionImplementationNotFound=2260]="InvalidFunctionImplementationNotFound",e[e.FunctionIsNotCompatibleWithVertexShader=2261]="FunctionIsNotCompatibleWithVertexShader",e[e.FunctionIsNotCompatibleWithPixelShader=2262]="FunctionIsNotCompatibleWithPixelShader",e[e.InvalidReturnStmtVoid=2263]="InvalidReturnStmtVoid",e[e.InvalidReturnStmtEmpty=2264]="InvalidReturnStmtEmpty",e[e.InvalidReturnStmtTypesNotEqual=2265]="InvalidReturnStmtTypesNotEqual",e[e.InvalidFunctionReturnType=2266]="InvalidFunctionReturnType",e[e.InvalidFunctionParameterUsage=2267]="InvalidFunctionParameterUsage",e[e.InvalidTypeForWriting=2268]="InvalidTypeForWriting",e[e.InvalidTypeForReading=2269]="InvalidTypeForReading",e[e.InvalidExprIsNotLValue=2270]="InvalidExprIsNotLValue",e[e.InvalidVariableInitializing=2271]="InvalidVariableInitializing",e[e.InvalidVariableInitializingEx=2272]="InvalidVariableInitializingEx",e[e.UnsupportedStateIndex=2273]="UnsupportedStateIndex",e[e.InvalidSamplerTexture=2274]="InvalidSamplerTexture",e[e.CannotCalcPadding=2275]="CannotCalcPadding",e[e.ImportedComponentNotExists=2276]="ImportedComponentNotExists",e[e.InvalidFunctionReturnStmtNotFound=2277]="InvalidFunctionReturnStmtNotFound",e[e.UnsupportedProvideAs=2278]="UnsupportedProvideAs",e[e.UnreachableCode=2279]="UnreachableCode",e[e.OperatorCannotBeUsedWithGivenLValue=2280]="OperatorCannotBeUsedWithGivenLValue",e[e.PartFx_VertexShaderParametersMismatch=2281]="PartFx_VertexShaderParametersMismatch",e[e.PartFx_InvalidSpawnStmtInitializerNotFound=2282]="PartFx_InvalidSpawnStmtInitializerNotFound",e[e.PartFx_DrawOpOnlyAllowedWithinUpdateRoutine=2283]="PartFx_DrawOpOnlyAllowedWithinUpdateRoutine"}(r||(r={}))},AW2x:(e,t,n)=>{"use strict";var r;n.d(t,{S:()=>r}),function(e){e[e.UnsupportedRenderStateTypeUsed=3e3]="UnsupportedRenderStateTypeUsed",e[e.IncompleteTechnique=3001]="IncompleteTechnique",e[e.IncompletePass=3002]="IncompletePass",e[e.UselessPassState=3003]="UselessPassState",e[e.EmptySemicolon=3004]="EmptySemicolon",e[e.InvalidCbufferRegister=3005]="InvalidCbufferRegister",e[e.ImplicitTypeConversion=3006]="ImplicitTypeConversion",e[e.ImplicitTypeTruncation=3007]="ImplicitTypeTruncation",e[e.Deprecated=3008]="Deprecated",e[e.PartFx_SortingCannotBeApplied=3009]="PartFx_SortingCannotBeApplied",e[e.PartFx_PresetPropertyHasNotBeenFound=3010]="PartFx_PresetPropertyHasNotBeenFound",e[e.PartFx_RenderPassWasNotFound=3011]="PartFx_RenderPassWasNotFound",e[e.PartFx_EmitterPersistentDataMustBeMarkedAsInout=3012]="PartFx_EmitterPersistentDataMustBeMarkedAsInout",e[e.ExternCall=3013]="ExternCall"}(r||(r={}))},"HS1/":(e,t,n)=>{"use strict";var r;n.d(t,{m:()=>r}),function(e){e[e.UNDEF=0]="UNDEF",e[e.TRUE=1]="TRUE",e[e.FALSE=2]="FALSE",e[e.ZERO=3]="ZERO",e[e.ONE=4]="ONE",e[e.SRCCOLOR=5]="SRCCOLOR",e[e.INVSRCCOLOR=6]="INVSRCCOLOR",e[e.SRCALPHA=7]="SRCALPHA",e[e.INVSRCALPHA=8]="INVSRCALPHA",e[e.DESTALPHA=9]="DESTALPHA",e[e.INVDESTALPHA=10]="INVDESTALPHA",e[e.DESTCOLOR=11]="DESTCOLOR",e[e.INVDESTCOLOR=12]="INVDESTCOLOR",e[e.SRCALPHASAT=13]="SRCALPHASAT",e[e.NONE=14]="NONE",e[e.CW=15]="CW",e[e.CCW=16]="CCW",e[e.FRONT=17]="FRONT",e[e.BACK=18]="BACK",e[e.FRONT_AND_BACK=19]="FRONT_AND_BACK",e[e.NEVER=20]="NEVER",e[e.LESS=21]="LESS",e[e.EQUAL=22]="EQUAL",e[e.LESSEQUAL=23]="LESSEQUAL",e[e.GREATER=24]="GREATER",e[e.NOTEQUAL=25]="NOTEQUAL",e[e.GREATEREQUAL=26]="GREATEREQUAL",e[e.ALWAYS=27]="ALWAYS",e[e.FUNCADD=28]="FUNCADD",e[e.FUNCSUBTRACT=29]="FUNCSUBTRACT",e[e.FUNCREVERSESUBTRACT=30]="FUNCREVERSESUBTRACT",e[e.LINELIST=31]="LINELIST",e[e.LINESTRIP=32]="LINESTRIP",e[e.TRIANGLELIST=33]="TRIANGLELIST",e[e.TRAINGLESTRIP=34]="TRAINGLESTRIP",e[e.POINTLIST=35]="POINTLIST"}(r||(r={}))},Y4FD:(e,t,n)=>{"use strict";var r;n.d(t,{H:()=>r}),function(e){e[e.BLENDENABLE=0]="BLENDENABLE",e[e.CULLFACEENABLE=1]="CULLFACEENABLE",e[e.ZENABLE=2]="ZENABLE",e[e.ZWRITEENABLE=3]="ZWRITEENABLE",e[e.DITHERENABLE=4]="DITHERENABLE",e[e.SCISSORTESTENABLE=5]="SCISSORTESTENABLE",e[e.STENCILTESTENABLE=6]="STENCILTESTENABLE",e[e.POLYGONOFFSETFILLENABLE=7]="POLYGONOFFSETFILLENABLE",e[e.CULLFACE=8]="CULLFACE",e[e.FRONTFACE=9]="FRONTFACE",e[e.SRCBLENDCOLOR=10]="SRCBLENDCOLOR",e[e.DESTBLENDCOLOR=11]="DESTBLENDCOLOR",e[e.SRCBLENDALPHA=12]="SRCBLENDALPHA",e[e.DESTBLENDALPHA=13]="DESTBLENDALPHA",e[e.BLENDEQUATIONCOLOR=14]="BLENDEQUATIONCOLOR",e[e.BLENDEQUATIONALPHA=15]="BLENDEQUATIONALPHA",e[e.ZFUNC=16]="ZFUNC",e[e.ALPHABLENDENABLE=17]="ALPHABLENDENABLE",e[e.ALPHATESTENABLE=18]="ALPHATESTENABLE",e[e.SRCBLEND=19]="SRCBLEND",e[e.DESTBLEND=20]="DESTBLEND",e[e.BLENDFUNC=21]="BLENDFUNC",e[e.BLENDFUNCSEPARATE=22]="BLENDFUNCSEPARATE",e[e.BLENDEQUATION=23]="BLENDEQUATION",e[e.BLENDEQUATIONSEPARATE=24]="BLENDEQUATIONSEPARATE",e[e.PRIMITIVETOPOLOGY=25]="PRIMITIVETOPOLOGY"}(r||(r={}))},DIkA:(e,t,n)=>{"use strict";var r;n.d(t,{D:()=>r}),function(e){e[e.k_Warning=0]="k_Warning",e[e.k_Error=1]="k_Error"}(r||(r={}))},vIQR:(e,t,n)=>{"use strict";var r,i,s,o,a,l;n.d(t,{SR:()=>a,rO:()=>r,vj:()=>l}),function(e){e[e.k_Instruction=0]="k_Instruction",e[e.k_Id=1]="k_Id",e[e.k_Provide=2]="k_Provide",e[e.k_Collector=3]="k_Collector",e[e.k_Keyword=4]="k_Keyword",e[e.k_Simple=5]="k_Simple",e[e.k_SamplerState=6]="k_SamplerState",e[e.k_Attribute=7]="k_Attribute",e[e.k_Annotation=8]="k_Annotation",e[e.k_UsageType=9]="k_UsageType",e[e.k_Typed=10]="k_Typed",e[e.k_VariableType=11]="k_VariableType",e[e.k_SystemType=12]="k_SystemType",e[e.k_ComplexType=13]="k_ComplexType",e[e.k_ProxyType=14]="k_ProxyType",e[e.k_Expr=15]="k_Expr",e[e.k_IdExpr=16]="k_IdExpr",e[e.k_IntExpr=17]="k_IntExpr",e[e.k_FloatExpr=18]="k_FloatExpr",e[e.k_BoolExpr=19]="k_BoolExpr",e[e.k_StringExpr=20]="k_StringExpr",e[e.k_NullExpr=21]="k_NullExpr",e[e.k_ArithmeticExpr=22]="k_ArithmeticExpr",e[e.k_AssignmentExpr=23]="k_AssignmentExpr",e[e.k_BitwiseExpr=24]="k_BitwiseExpr",e[e.k_RelationalExpr=25]="k_RelationalExpr",e[e.k_LogicalExpr=26]="k_LogicalExpr",e[e.k_ConditionalExpr=27]="k_ConditionalExpr",e[e.k_CastExpr=28]="k_CastExpr",e[e.k_UnaryExpr=29]="k_UnaryExpr",e[e.k_PostfixIndexExpr=30]="k_PostfixIndexExpr",e[e.k_PostfixPointExpr=31]="k_PostfixPointExpr",e[e.k_PostfixArithmeticExpr=32]="k_PostfixArithmeticExpr",e[e.k_ComplexExpr=33]="k_ComplexExpr",e[e.k_FunctionCallExpr=34]="k_FunctionCallExpr",e[e.k_ConstructorCallExpr=35]="k_ConstructorCallExpr",e[e.k_CompileExpr=36]="k_CompileExpr",e[e.k_CompileShader11Expr=37]="k_CompileShader11Expr",e[e.k_InitExpr=38]="k_InitExpr",e[e.k_StateBlockExpr=39]="k_StateBlockExpr",e[e.k_SamplerStateBlockExpr=40]="k_SamplerStateBlockExpr",e[e.k_Decl=41]="k_Decl",e[e.k_TypeDecl=42]="k_TypeDecl",e[e.k_TypedefDecl=43]="k_TypedefDecl",e[e.k_VariableDecl=44]="k_VariableDecl",e[e.k_StructDecl=45]="k_StructDecl",e[e.k_FunctionDecl=46]="k_FunctionDecl",e[e.k_SystemFunctionDecl=47]="k_SystemFunctionDecl",e[e.k_FunctionDef=48]="k_FunctionDef",e[e.k_PassDecl=49]="k_PassDecl",e[e.k_TechniqueDecl=50]="k_TechniqueDecl",e[e.k_Technique11Decl=51]="k_Technique11Decl",e[e.k_CbufferDecl=52]="k_CbufferDecl",e[e.k_Stmt=53]="k_Stmt",e[e.k_ExprStmt=54]="k_ExprStmt",e[e.k_BreakStmt=55]="k_BreakStmt",e[e.k_WhileStmt=56]="k_WhileStmt",e[e.k_ForStmt=57]="k_ForStmt",e[e.k_IfStmt=58]="k_IfStmt",e[e.k_DeclStmt=59]="k_DeclStmt",e[e.k_ReturnStmt=60]="k_ReturnStmt",e[e.k_SemicolonStmt=61]="k_SemicolonStmt",e[e.k_StmtBlock=62]="k_StmtBlock",e[e.k_PartFxDecl=63]="k_PartFxDecl",e[e.k_PartFxPass=64]="k_PartFxPass",e[e.k_SpawnStmt=65]="k_SpawnStmt",e[e.k_DrawStmt=66]="k_DrawStmt",e[e.k_PresetDecl=67]="k_PresetDecl",e[e.k_PresetProperty=68]="k_PresetProperty"}(r||(r={})),function(e){e[e.CODE_TARGET_SUPPORT=0]="CODE_TARGET_SUPPORT",e[e.SELF_CONTAINED=1]="SELF_CONTAINED"}(i||(i={})),function(e){e[e.k_Read=0]="k_Read",e[e.k_Write=1]="k_Write",e[e.k_ReadWrite=2]="k_ReadWrite",e[e.k_Undefined=3]="k_Undefined",e[e.k_Default=2]="k_Default"}(s||(s={})),function(e){e[e.k_Header=0]="k_Header",e[e.k_Float=1]="k_Float",e[e.k_Int=2]="k_Int",e[e.k_Bool=3]="k_Bool",e[e.k_Float2=4]="k_Float2",e[e.k_Int2=5]="k_Int2",e[e.k_Bool2=6]="k_Bool2",e[e.k_Float3=7]="k_Float3",e[e.k_Int3=8]="k_Int3",e[e.k_Bool3=9]="k_Bool3",e[e.k_Float4=10]="k_Float4",e[e.k_Int4=11]="k_Int4",e[e.k_Bool4=12]="k_Bool4",e[e.k_Float4x4=13]="k_Float4x4"}(o||(o={})),function(e){e[e.k_System=0]="k_System",e[e.k_Global=1]="k_Global",e[e.k_Default=2]="k_Default",e[e.k_Struct=3]="k_Struct",e[e.k_Cbuffer=4]="k_Cbuffer",e[e.k_Annotation=5]="k_Annotation"}(a||(a={})),function(e){e[e.k_BasicFx=0]="k_BasicFx",e[e.k_PartFx=1]="k_PartFx",e[e.k_Unknown=2]="k_Unknown"}(l||(l={}))},UHT2:(e,t,n)=>{"use strict";var r;n.d(t,{w:()=>r}),function(e){e[e.k_Vertex=1]="k_Vertex",e[e.k_Pixel=2]="k_Pixel",e[e.k_Compute=4]="k_Compute"}(r||(r={}))},"4mVy":(e,t,n)=>{"use strict";n.d(t,{L:()=>o,W:()=>s});var r=n("6977"),i=n("O/5E");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsCBBundle(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsCBBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}slot(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb_pos+e):0}size(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint32(this.bb_pos+e):0}fields(e,t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new i.n).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startCBBundle(e){e.startObject(4)}static addName(e,t){e.addFieldOffset(0,t,0)}static addSlot(e,t){e.addFieldInt32(1,t,0)}static addSize(e,t){e.addFieldInt32(2,t,0)}static addFields(e,t){e.addFieldOffset(3,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static endCBBundle(e){return e.endObject()}static createCBBundle(e,t,n,r,i){return s.startCBBundle(e),s.addName(e,t),s.addSlot(e,n),s.addSize(e,r),s.addFields(e,i),s.endCBBundle(e)}unpack(){return new o(this.name(),this.slot(),this.size(),this.bb.createObjList(this.fields.bind(this),this.fieldsLength()))}unpackTo(e){e.name=this.name(),e.slot=this.slot(),e.size=this.size(),e.fields=this.bb.createObjList(this.fields.bind(this),this.fieldsLength())}}class o{constructor(e=null,t=0,n=0,r=[]){this.name=e,this.slot=t,this.size=n,this.fields=r}pack(e){const t=null!==this.name?e.createString(this.name):0,n=s.createFieldsVector(e,e.createObjectOffsetList(this.fields));return s.createCBBundle(e,t,this.slot,this.size,n)}}},IMqc:(e,t,n)=>{"use strict";n.d(t,{L:()=>o,l:()=>s});var r=n("6977"),i=n("KUuy");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBufferBundle(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBufferBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}slot(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb_pos+e):0}stride(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint32(this.bb_pos+e):0}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new i.U).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startBufferBundle(e){e.startObject(4)}static addName(e,t){e.addFieldOffset(0,t,0)}static addSlot(e,t){e.addFieldInt32(1,t,0)}static addStride(e,t){e.addFieldInt32(2,t,0)}static addType(e,t){e.addFieldOffset(3,t,0)}static endBufferBundle(e){return e.endObject()}unpack(){return new o(this.name(),this.slot(),this.stride(),null!==this.type()?this.type().unpack():null)}unpackTo(e){e.name=this.name(),e.slot=this.slot(),e.stride=this.stride(),e.type=null!==this.type()?this.type().unpack():null}}class o{constructor(e=null,t=0,n=0,r=null){this.name=e,this.slot=t,this.stride=n,this.type=r}pack(e){const t=null!==this.name?e.createString(this.name):0,n=null!==this.type?this.type.pack(e):0;return s.startBufferBundle(e),s.addName(e,t),s.addSlot(e,this.slot),s.addStride(e,this.stride),s.addType(e,n),s.endBufferBundle(e)}}},RA5N:(e,t,n)=>{"use strict";n.d(t,{ZW:()=>a,fN:()=>r});var r,i=n("5RqF"),s=n("fPGG"),o=n("mGiJ");function a(e,t){switch(r[e]){case"NONE":default:return null;case"PartBundle":return t(new s.c);case"MatBundle":return t(new i.y);case"Technique11Bundle":return t(new o.U)}}!function(e){e[e.NONE=0]="NONE",e[e.PartBundle=1]="PartBundle",e[e.MatBundle=2]="MatBundle",e[e.Technique11Bundle=3]="Technique11Bundle"}(r||(r={}))},Q8lk:(e,t,n)=>{"use strict";n.d(t,{c:()=>s,r:()=>i});var r=n("6977");class i{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBundleMeta(e,t){return(t||new i).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBundleMeta(e,t){return e.setPosition(e.position()+r.XU),(t||new i).__init(e.readInt32(e.position())+e.position(),e)}author(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}source(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startBundleMeta(e){e.startObject(2)}static addAuthor(e,t){e.addFieldOffset(0,t,0)}static addSource(e,t){e.addFieldOffset(1,t,0)}static endBundleMeta(e){return e.endObject()}static createBundleMeta(e,t,n){return i.startBundleMeta(e),i.addAuthor(e,t),i.addSource(e,n),i.endBundleMeta(e)}unpack(){return new s(this.author(),this.source())}unpackTo(e){e.author=this.author(),e.source=this.source()}}class s{constructor(e=null,t=null){this.author=e,this.source=t}pack(e){const t=null!==this.author?e.createString(this.author):0,n=null!==this.source?e.createString(this.source):0;return i.createBundleMeta(e,t,n)}}},Xra2:(e,t,n)=>{"use strict";n.d(t,{P:()=>s,X:()=>i});var r=n("6977");class i{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBundleSignature(e,t){return(t||new i).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBundleSignature(e,t){return e.setPosition(e.position()+r.XU),(t||new i).__init(e.readInt32(e.position())+e.position(),e)}mode(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}version(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}commithash(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}branch(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}timestamp(e){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}static startBundleSignature(e){e.startObject(5)}static addMode(e,t){e.addFieldOffset(0,t,0)}static addVersion(e,t){e.addFieldOffset(1,t,0)}static addCommithash(e,t){e.addFieldOffset(2,t,0)}static addBranch(e,t){e.addFieldOffset(3,t,0)}static addTimestamp(e,t){e.addFieldOffset(4,t,0)}static endBundleSignature(e){return e.endObject()}static createBundleSignature(e,t,n,r,s,o){return i.startBundleSignature(e),i.addMode(e,t),i.addVersion(e,n),i.addCommithash(e,r),i.addBranch(e,s),i.addTimestamp(e,o),i.endBundleSignature(e)}unpack(){return new s(this.mode(),this.version(),this.commithash(),this.branch(),this.timestamp())}unpackTo(e){e.mode=this.mode(),e.version=this.version(),e.commithash=this.commithash(),e.branch=this.branch(),e.timestamp=this.timestamp()}}class s{constructor(e=null,t=null,n=null,r=null,i=null){this.mode=e,this.version=t,this.commithash=n,this.branch=r,this.timestamp=i}pack(e){const t=null!==this.mode?e.createString(this.mode):0,n=null!==this.version?e.createString(this.version):0,r=null!==this.commithash?e.createString(this.commithash):0,s=null!==this.branch?e.createString(this.branch):0,o=null!==this.timestamp?e.createString(this.timestamp):0;return i.createBundleSignature(e,t,n,r,s,o)}}},AVkT:(e,t,n)=>{"use strict";n.d(t,{B:()=>u,b:()=>c});var r=n("6977"),i=n("RA5N"),s=n("Q8lk"),o=n("Xra2"),a=n("BmuJ"),l=n("E1+w");class c{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBundle(e,t){return(t||new c).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new c).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}signature(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new o.X).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}meta(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new s.r).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}contentType(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint8(this.bb_pos+e):i.fN.NONE}content(e){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__union(e,this.bb_pos+t):null}controls(e,t){const n=this.bb.__offset(this.bb_pos,14);return n?(t||new l.F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}controlsLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}presets(e,t){const n=this.bb.__offset(this.bb_pos,16);return n?(t||new a.S).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}presetsLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startBundle(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addSignature(e,t){e.addFieldOffset(1,t,0)}static addMeta(e,t){e.addFieldOffset(2,t,0)}static addContentType(e,t){e.addFieldInt8(3,t,i.fN.NONE)}static addContent(e,t){e.addFieldOffset(4,t,0)}static addControls(e,t){e.addFieldOffset(5,t,0)}static createControlsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startControlsVector(e,t){e.startVector(4,t,4)}static addPresets(e,t){e.addFieldOffset(6,t,0)}static createPresetsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startPresetsVector(e,t){e.startVector(4,t,4)}static endBundle(e){return e.endObject()}static finishBundleBuffer(e,t){e.finish(t)}static finishSizePrefixedBundleBuffer(e,t){e.finish(t,void 0,!0)}unpack(){return new u(this.name(),null!==this.signature()?this.signature().unpack():null,null!==this.meta()?this.meta().unpack():null,this.contentType(),(()=>{let e=(0,i.ZW)(this.contentType(),this.content.bind(this));return null===e?null:e.unpack()})(),this.bb.createObjList(this.controls.bind(this),this.controlsLength()),this.bb.createObjList(this.presets.bind(this),this.presetsLength()))}unpackTo(e){e.name=this.name(),e.signature=null!==this.signature()?this.signature().unpack():null,e.meta=null!==this.meta()?this.meta().unpack():null,e.contentType=this.contentType(),e.content=(()=>{let e=(0,i.ZW)(this.contentType(),this.content.bind(this));return null===e?null:e.unpack()})(),e.controls=this.bb.createObjList(this.controls.bind(this),this.controlsLength()),e.presets=this.bb.createObjList(this.presets.bind(this),this.presetsLength())}}class u{constructor(e=null,t=null,n=null,r=i.fN.NONE,s=null,o=[],a=[]){this.name=e,this.signature=t,this.meta=n,this.contentType=r,this.content=s,this.controls=o,this.presets=a}pack(e){const t=null!==this.name?e.createString(this.name):0,n=null!==this.signature?this.signature.pack(e):0,r=null!==this.meta?this.meta.pack(e):0,i=e.createObjectOffset(this.content),s=c.createControlsVector(e,e.createObjectOffsetList(this.controls)),o=c.createPresetsVector(e,e.createObjectOffsetList(this.presets));return c.startBundle(e),c.addName(e,t),c.addSignature(e,n),c.addMeta(e,r),c.addContentType(e,this.contentType),c.addContent(e,i),c.addControls(e,s),c.addPresets(e,o),c.endBundle(e)}}},Lmwj:(e,t,n)=>{"use strict";n.d(t,{D:()=>r,Y:()=>i});class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}r(){return this.bb.readUint8(this.bb_pos)}g(){return this.bb.readUint8(this.bb_pos+1)}b(){return this.bb.readUint8(this.bb_pos+2)}a(){return this.bb.readUint8(this.bb_pos+3)}static sizeOf(){return 4}static createColorValue(e,t,n,r,i){return e.prep(1,4),e.writeInt8(i),e.writeInt8(r),e.writeInt8(n),e.writeInt8(t),e.offset()}unpack(){return new i(this.r(),this.g(),this.b(),this.a())}unpackTo(e){e.r=this.r(),e.g=this.g(),e.b=this.b(),e.a=this.a()}}class i{constructor(e=0,t=0,n=0,r=0){this.r=e,this.g=t,this.b=n,this.a=r}pack(e){return r.createColorValue(e,this.r,this.g,this.b,this.a)}}},Nk0z:(e,t,n)=>{"use strict";n.d(t,{$e:()=>r,K4:()=>p});var r,i=n("Lmwj"),s=n("cHyH"),o=n("Gjvx"),a=n("6wsJ"),l=n("5CMk"),c=n("IJKq"),u=n("6gZf"),h=n("J5jW"),d=n("1Yqr");function p(e,t){switch(r[e]){case"NONE":default:return null;case"UintValue":return t(new d.d);case"IntValue":return t(new c.F);case"FloatValue":return t(new l.A);case"Float2Value":return t(new s.K);case"Float3Value":return t(new o.b);case"Float4Value":return t(new a.D);case"ColorValue":return t(new i.D);case"TextureValue":return t(new h.v);case"MeshValue":return t(new u.J)}}!function(e){e[e.NONE=0]="NONE",e[e.UintValue=1]="UintValue",e[e.IntValue=2]="IntValue",e[e.FloatValue=3]="FloatValue",e[e.Float2Value=4]="Float2Value",e[e.Float3Value=5]="Float3Value",e[e.Float4Value=6]="Float4Value",e[e.ColorValue=7]="ColorValue",e[e.TextureValue=8]="TextureValue",e[e.MeshValue=9]="MeshValue"}(r||(r={}))},wC6P:(e,t,n)=>{"use strict";var r;n.d(t,{W:()=>r}),function(e){e[e.k_Prerender=0]="k_Prerender",e[e.k_Vertex=1]="k_Vertex",e[e.k_Pixel=2]="k_Pixel",e[e.k_Last=3]="k_Last"}(r||(r={}))},"2IwD":(e,t,n)=>{"use strict";var r;n.d(t,{p:()=>r}),function(e){e[e.k_Reset=0]="k_Reset",e[e.k_Spawn=1]="k_Spawn",e[e.k_Init=2]="k_Init",e[e.k_Update=3]="k_Update",e[e.k_Last=4]="k_Last"}(r||(r={}))},"5CMk":(e,t,n)=>{"use strict";n.d(t,{A:()=>r,r:()=>i});class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}value(){return this.bb.readFloat32(this.bb_pos)}static sizeOf(){return 4}static createFloatValue(e,t){return e.prep(4,4),e.writeFloat32(t),e.offset()}unpack(){return new i(this.value())}unpackTo(e){e.value=this.value()}}class i{constructor(e=0){this.value=e}pack(e){return r.createFloatValue(e,this.value)}}},cHyH:(e,t,n)=>{"use strict";n.d(t,{K:()=>r,U:()=>i});class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}x(){return this.bb.readFloat32(this.bb_pos)}y(){return this.bb.readFloat32(this.bb_pos+4)}static sizeOf(){return 8}static createFloat2Value(e,t,n){return e.prep(4,8),e.writeFloat32(n),e.writeFloat32(t),e.offset()}unpack(){return new i(this.x(),this.y())}unpackTo(e){e.x=this.x(),e.y=this.y()}}class i{constructor(e=0,t=0){this.x=e,this.y=t}pack(e){return r.createFloat2Value(e,this.x,this.y)}}},Gjvx:(e,t,n)=>{"use strict";n.d(t,{I:()=>i,b:()=>r});class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}x(){return this.bb.readFloat32(this.bb_pos)}y(){return this.bb.readFloat32(this.bb_pos+4)}z(){return this.bb.readFloat32(this.bb_pos+8)}static sizeOf(){return 12}static createFloat3Value(e,t,n,r){return e.prep(4,12),e.writeFloat32(r),e.writeFloat32(n),e.writeFloat32(t),e.offset()}unpack(){return new i(this.x(),this.y(),this.z())}unpackTo(e){e.x=this.x(),e.y=this.y(),e.z=this.z()}}class i{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}pack(e){return r.createFloat3Value(e,this.x,this.y,this.z)}}},"6wsJ":(e,t,n)=>{"use strict";n.d(t,{D:()=>r,K:()=>i});class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}x(){return this.bb.readFloat32(this.bb_pos)}y(){return this.bb.readFloat32(this.bb_pos+4)}z(){return this.bb.readFloat32(this.bb_pos+8)}w(){return this.bb.readFloat32(this.bb_pos+12)}static sizeOf(){return 16}static createFloat4Value(e,t,n,r,i){return e.prep(4,16),e.writeFloat32(i),e.writeFloat32(r),e.writeFloat32(n),e.writeFloat32(t),e.offset()}unpack(){return new i(this.x(),this.y(),this.z(),this.w())}unpackTo(e){e.x=this.x(),e.y=this.y(),e.z=this.z(),e.w=this.w()}}class i{constructor(e=0,t=0,n=0,r=0){this.x=e,this.y=t,this.z=n,this.w=r}pack(e){return r.createFloat4Value(e,this.x,this.y,this.z,this.w)}}},gp8H:(e,t,n)=>{"use strict";n.d(t,{w:()=>s,y:()=>i});var r=n("6977");class i{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsGLSLAttribute(e,t){return(t||new i).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsGLSLAttribute(e,t){return e.setPosition(e.position()+r.XU),(t||new i).__init(e.readInt32(e.position())+e.position(),e)}size(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb_pos+e):0}offset(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb_pos+e):0}name(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}static startGLSLAttribute(e){e.startObject(3)}static addSize(e,t){e.addFieldInt32(0,t,0)}static addOffset(e,t){e.addFieldInt32(1,t,0)}static addName(e,t){e.addFieldOffset(2,t,0)}static endGLSLAttribute(e){return e.endObject()}static createGLSLAttribute(e,t,n,r){return i.startGLSLAttribute(e),i.addSize(e,t),i.addOffset(e,n),i.addName(e,r),i.endGLSLAttribute(e)}unpack(){return new s(this.size(),this.offset(),this.name())}unpackTo(e){e.size=this.size(),e.offset=this.offset(),e.name=this.name()}}class s{constructor(e=0,t=0,n=null){this.size=e,this.offset=t,this.name=n}pack(e){const t=null!==this.name?e.createString(this.name):0;return i.createGLSLAttribute(e,this.size,this.offset,t)}}},IJKq:(e,t,n)=>{"use strict";n.d(t,{F:()=>r,k:()=>i});class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}value(){return this.bb.readInt32(this.bb_pos)}static sizeOf(){return 4}static createIntValue(e,t){return e.prep(4,4),e.writeInt32(t),e.offset()}unpack(){return new i(this.value())}unpackTo(e){e.value=this.value()}}class i{constructor(e=0){this.value=e}pack(e){return r.createIntValue(e,this.value)}}},"5RqF":(e,t,n)=>{"use strict";n.d(t,{K:()=>o,y:()=>s});var r=n("6977"),i=n("4U8C");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMatBundle(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMatBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}renderPasses(e,t){const n=this.bb.__offset(this.bb_pos,4);return n?(t||new i.E).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}renderPassesLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMatBundle(e){e.startObject(1)}static addRenderPasses(e,t){e.addFieldOffset(0,t,0)}static createRenderPassesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startRenderPassesVector(e,t){e.startVector(4,t,4)}static endMatBundle(e){return e.endObject()}static createMatBundle(e,t){return s.startMatBundle(e),s.addRenderPasses(e,t),s.endMatBundle(e)}unpack(){return new o(this.bb.createObjList(this.renderPasses.bind(this),this.renderPassesLength()))}unpackTo(e){e.renderPasses=this.bb.createObjList(this.renderPasses.bind(this),this.renderPassesLength())}}class o{constructor(e=[]){this.renderPasses=e}pack(e){const t=s.createRenderPassesVector(e,e.createObjectOffsetList(this.renderPasses));return s.createMatBundle(e,t)}}},"4U8C":(e,t,n)=>{"use strict";n.d(t,{E:()=>a,S:()=>l});var r=n("6977"),i=n("2KDM"),s=n("+VBS"),o=n("KUuy");class a{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMatRenderPass(e,t){return(t||new a).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMatRenderPass(e,t){return e.setPosition(e.position()+r.XU),(t||new a).__init(e.readInt32(e.position())+e.position(),e)}routinesType(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}routinesTypeLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}routinesTypeArray(){const e=this.bb.__offset(this.bb_pos,4);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}routines(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__union(t,this.bb.__vector(this.bb_pos+n)+4*e):null}routinesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}instance(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new o.U).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}stride(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb_pos+e):0}renderStates(e,t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new i.n).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}renderStatesLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMatRenderPass(e){e.startObject(5)}static addRoutinesType(e,t){e.addFieldOffset(0,t,0)}static createRoutinesTypeVector(e,t){e.startVector(1,t.length,1);for(let n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}static startRoutinesTypeVector(e,t){e.startVector(1,t,1)}static addRoutines(e,t){e.addFieldOffset(1,t,0)}static createRoutinesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startRoutinesVector(e,t){e.startVector(4,t,4)}static addInstance(e,t){e.addFieldOffset(2,t,0)}static addStride(e,t){e.addFieldInt32(3,t,0)}static addRenderStates(e,t){e.addFieldOffset(4,t,0)}static createRenderStatesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startRenderStatesVector(e,t){e.startVector(4,t,4)}static endMatRenderPass(e){return e.endObject()}unpack(){return new l(this.bb.createScalarList(this.routinesType.bind(this),this.routinesTypeLength()),(()=>{let e=[];for(let t=0;t<this.routinesTypeLength();++t){let n=this.routinesType(t);if(null===n||"NONE"===s.Zd[n])continue;let r=(0,s.Zn)(n,this.routines.bind(this),t);null!==r&&e.push(r.unpack())}return e})(),null!==this.instance()?this.instance().unpack():null,this.stride(),this.bb.createObjList(this.renderStates.bind(this),this.renderStatesLength()))}unpackTo(e){e.routinesType=this.bb.createScalarList(this.routinesType.bind(this),this.routinesTypeLength()),e.routines=(()=>{let e=[];for(let t=0;t<this.routinesTypeLength();++t){let n=this.routinesType(t);if(null===n||"NONE"===s.Zd[n])continue;let r=(0,s.Zn)(n,this.routines.bind(this),t);null!==r&&e.push(r.unpack())}return e})(),e.instance=null!==this.instance()?this.instance().unpack():null,e.stride=this.stride(),e.renderStates=this.bb.createObjList(this.renderStates.bind(this),this.renderStatesLength())}}class l{constructor(e=[],t=[],n=null,r=0,i=[]){this.routinesType=e,this.routines=t,this.instance=n,this.stride=r,this.renderStates=i}pack(e){const t=a.createRoutinesTypeVector(e,this.routinesType),n=a.createRoutinesVector(e,e.createObjectOffsetList(this.routines)),r=null!==this.instance?this.instance.pack(e):0,i=a.createRenderStatesVector(e,e.createObjectOffsetList(this.renderStates));return a.startMatRenderPass(e),a.addRoutinesType(e,t),a.addRoutines(e,n),a.addInstance(e,r),a.addStride(e,this.stride),a.addRenderStates(e,i),a.endMatRenderPass(e)}}},"6gZf":(e,t,n)=>{"use strict";n.d(t,{J:()=>i,X:()=>s});var r=n("6977");class i{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMeshValue(e,t){return(t||new i).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMeshValue(e,t){return e.setPosition(e.position()+r.XU),(t||new i).__init(e.readInt32(e.position())+e.position(),e)}value(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}static startMeshValue(e){e.startObject(1)}static addValue(e,t){e.addFieldOffset(0,t,0)}static endMeshValue(e){return e.endObject()}static createMeshValue(e,t){return i.startMeshValue(e),i.addValue(e,t),i.endMeshValue(e)}unpack(){return new s(this.value())}unpackTo(e){e.value=this.value()}}class s{constructor(e=null){this.value=e}pack(e){const t=null!==this.value?e.createString(this.value):0;return i.createMeshValue(e,t)}}},fPGG:(e,t,n)=>{"use strict";n.d(t,{I:()=>l,c:()=>a});var r=n("6977"),i=n("bJcc"),s=n("+VBS"),o=n("KUuy");class a{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsPartBundle(e,t){return(t||new a).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsPartBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new a).__init(e.readInt32(e.position())+e.position(),e)}capacity(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb_pos+e):0}simulationRoutinesType(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}simulationRoutinesTypeLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}simulationRoutinesTypeArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}simulationRoutines(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb.__vector(this.bb_pos+n)+4*e):null}simulationRoutinesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}renderPasses(e,t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new i.k).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}renderPassesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}particle(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new o.U).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startPartBundle(e){e.startObject(5)}static addCapacity(e,t){e.addFieldInt32(0,t,0)}static addSimulationRoutinesType(e,t){e.addFieldOffset(1,t,0)}static createSimulationRoutinesTypeVector(e,t){e.startVector(1,t.length,1);for(let n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}static startSimulationRoutinesTypeVector(e,t){e.startVector(1,t,1)}static addSimulationRoutines(e,t){e.addFieldOffset(2,t,0)}static createSimulationRoutinesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startSimulationRoutinesVector(e,t){e.startVector(4,t,4)}static addRenderPasses(e,t){e.addFieldOffset(3,t,0)}static createRenderPassesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startRenderPassesVector(e,t){e.startVector(4,t,4)}static addParticle(e,t){e.addFieldOffset(4,t,0)}static endPartBundle(e){return e.endObject()}unpack(){return new l(this.capacity(),this.bb.createScalarList(this.simulationRoutinesType.bind(this),this.simulationRoutinesTypeLength()),(()=>{let e=[];for(let t=0;t<this.simulationRoutinesTypeLength();++t){let n=this.simulationRoutinesType(t);if(null===n||"NONE"===s.Zd[n])continue;let r=(0,s.Zn)(n,this.simulationRoutines.bind(this),t);null!==r&&e.push(r.unpack())}return e})(),this.bb.createObjList(this.renderPasses.bind(this),this.renderPassesLength()),null!==this.particle()?this.particle().unpack():null)}unpackTo(e){e.capacity=this.capacity(),e.simulationRoutinesType=this.bb.createScalarList(this.simulationRoutinesType.bind(this),this.simulationRoutinesTypeLength()),e.simulationRoutines=(()=>{let e=[];for(let t=0;t<this.simulationRoutinesTypeLength();++t){let n=this.simulationRoutinesType(t);if(null===n||"NONE"===s.Zd[n])continue;let r=(0,s.Zn)(n,this.simulationRoutines.bind(this),t);null!==r&&e.push(r.unpack())}return e})(),e.renderPasses=this.bb.createObjList(this.renderPasses.bind(this),this.renderPassesLength()),e.particle=null!==this.particle()?this.particle().unpack():null}}class l{constructor(e=0,t=[],n=[],r=[],i=null){this.capacity=e,this.simulationRoutinesType=t,this.simulationRoutines=n,this.renderPasses=r,this.particle=i}pack(e){const t=a.createSimulationRoutinesTypeVector(e,this.simulationRoutinesType),n=a.createSimulationRoutinesVector(e,e.createObjectOffsetList(this.simulationRoutines)),r=a.createRenderPassesVector(e,e.createObjectOffsetList(this.renderPasses)),i=null!==this.particle?this.particle.pack(e):0;return a.startPartBundle(e),a.addCapacity(e,this.capacity),a.addSimulationRoutinesType(e,t),a.addSimulationRoutines(e,n),a.addRenderPasses(e,r),a.addParticle(e,i),a.endPartBundle(e)}}},bJcc:(e,t,n)=>{"use strict";n.d(t,{k:()=>a,l:()=>l});var r=n("6977"),i=n("2KDM"),s=n("+VBS"),o=n("KUuy");class a{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsPartRenderPass(e,t){return(t||new a).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsPartRenderPass(e,t){return e.setPosition(e.position()+r.XU),(t||new a).__init(e.readInt32(e.position())+e.position(),e)}routinesType(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}routinesTypeLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}routinesTypeArray(){const e=this.bb.__offset(this.bb_pos,4);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}routines(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__union(t,this.bb.__vector(this.bb_pos+n)+4*e):null}routinesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}geometry(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}sorting(){const e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}instanceCount(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint32(this.bb_pos+e):0}stride(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint32(this.bb_pos+e):0}instance(e){const t=this.bb.__offset(this.bb_pos,16);return t?(e||new o.U).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}renderStates(e,t){const n=this.bb.__offset(this.bb_pos,18);return n?(t||new i.n).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}renderStatesLength(){const e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static startPartRenderPass(e){e.startObject(8)}static addRoutinesType(e,t){e.addFieldOffset(0,t,0)}static createRoutinesTypeVector(e,t){e.startVector(1,t.length,1);for(let n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}static startRoutinesTypeVector(e,t){e.startVector(1,t,1)}static addRoutines(e,t){e.addFieldOffset(1,t,0)}static createRoutinesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startRoutinesVector(e,t){e.startVector(4,t,4)}static addGeometry(e,t){e.addFieldOffset(2,t,0)}static addSorting(e,t){e.addFieldInt8(3,+t,0)}static addInstanceCount(e,t){e.addFieldInt32(4,t,0)}static addStride(e,t){e.addFieldInt32(5,t,0)}static addInstance(e,t){e.addFieldOffset(6,t,0)}static addRenderStates(e,t){e.addFieldOffset(7,t,0)}static createRenderStatesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startRenderStatesVector(e,t){e.startVector(4,t,4)}static endPartRenderPass(e){return e.endObject()}unpack(){return new l(this.bb.createScalarList(this.routinesType.bind(this),this.routinesTypeLength()),(()=>{let e=[];for(let t=0;t<this.routinesTypeLength();++t){let n=this.routinesType(t);if(null===n||"NONE"===s.Zd[n])continue;let r=(0,s.Zn)(n,this.routines.bind(this),t);null!==r&&e.push(r.unpack())}return e})(),this.geometry(),this.sorting(),this.instanceCount(),this.stride(),null!==this.instance()?this.instance().unpack():null,this.bb.createObjList(this.renderStates.bind(this),this.renderStatesLength()))}unpackTo(e){e.routinesType=this.bb.createScalarList(this.routinesType.bind(this),this.routinesTypeLength()),e.routines=(()=>{let e=[];for(let t=0;t<this.routinesTypeLength();++t){let n=this.routinesType(t);if(null===n||"NONE"===s.Zd[n])continue;let r=(0,s.Zn)(n,this.routines.bind(this),t);null!==r&&e.push(r.unpack())}return e})(),e.geometry=this.geometry(),e.sorting=this.sorting(),e.instanceCount=this.instanceCount(),e.stride=this.stride(),e.instance=null!==this.instance()?this.instance().unpack():null,e.renderStates=this.bb.createObjList(this.renderStates.bind(this),this.renderStatesLength())}}class l{constructor(e=[],t=[],n=null,r=!1,i=0,s=0,o=null,a=[]){this.routinesType=e,this.routines=t,this.geometry=n,this.sorting=r,this.instanceCount=i,this.stride=s,this.instance=o,this.renderStates=a}pack(e){const t=a.createRoutinesTypeVector(e,this.routinesType),n=a.createRoutinesVector(e,e.createObjectOffsetList(this.routines)),r=null!==this.geometry?e.createString(this.geometry):0,i=null!==this.instance?this.instance.pack(e):0,s=a.createRenderStatesVector(e,e.createObjectOffsetList(this.renderStates));return a.startPartRenderPass(e),a.addRoutinesType(e,t),a.addRoutines(e,n),a.addGeometry(e,r),a.addSorting(e,this.sorting),a.addInstanceCount(e,this.instanceCount),a.addStride(e,this.stride),a.addInstance(e,i),a.addRenderStates(e,s),a.endPartRenderPass(e)}}},"23YT":(e,t,n)=>{"use strict";n.d(t,{g:()=>s,y:()=>o});var r=n("6977"),i=n("4mVy");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsPixelShader(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsPixelShader(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}code(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}entryName(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}cbuffers(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new i.W).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}cbuffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startPixelShader(e){e.startObject(3)}static addCode(e,t){e.addFieldOffset(0,t,0)}static addEntryName(e,t){e.addFieldOffset(1,t,0)}static addCbuffers(e,t){e.addFieldOffset(2,t,0)}static createCbuffersVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCbuffersVector(e,t){e.startVector(4,t,4)}static endPixelShader(e){return e.endObject()}static createPixelShader(e,t,n,r){return s.startPixelShader(e),s.addCode(e,t),s.addEntryName(e,n),s.addCbuffers(e,r),s.endPixelShader(e)}unpack(){return new o(this.code(),this.entryName(),this.bb.createObjList(this.cbuffers.bind(this),this.cbuffersLength()))}unpackTo(e){e.code=this.code(),e.entryName=this.entryName(),e.cbuffers=this.bb.createObjList(this.cbuffers.bind(this),this.cbuffersLength())}}class o{constructor(e=null,t=null,n=[]){this.code=e,this.entryName=t,this.cbuffers=n}pack(e){const t=null!==this.code?e.createString(this.code):0,n=null!==this.entryName?e.createString(this.entryName):0,r=s.createCbuffersVector(e,e.createObjectOffsetList(this.cbuffers));return s.createPixelShader(e,t,n,r)}}},zGvL:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,f:()=>s});var r=n("6977"),i=n("Nk0z");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsPresetEntry(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsPresetEntry(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}valueType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):i.$e.NONE}value(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}static startPresetEntry(e){e.startObject(3)}static addName(e,t){e.addFieldOffset(0,t,0)}static addValueType(e,t){e.addFieldInt8(1,t,i.$e.NONE)}static addValue(e,t){e.addFieldOffset(2,t,0)}static endPresetEntry(e){return e.endObject()}static createPresetEntry(e,t,n,r){return s.startPresetEntry(e),s.addName(e,t),s.addValueType(e,n),s.addValue(e,r),s.endPresetEntry(e)}unpack(){return new o(this.name(),this.valueType(),(()=>{let e=(0,i.K4)(this.valueType(),this.value.bind(this));return null===e?null:e.unpack()})())}unpackTo(e){e.name=this.name(),e.valueType=this.valueType(),e.value=(()=>{let e=(0,i.K4)(this.valueType(),this.value.bind(this));return null===e?null:e.unpack()})()}}class o{constructor(e=null,t=i.$e.NONE,n=null){this.name=e,this.valueType=t,this.value=n}pack(e){const t=null!==this.name?e.createString(this.name):0,n=e.createObjectOffset(this.value);return s.createPresetEntry(e,t,this.valueType,n)}}},BmuJ:(e,t,n)=>{"use strict";n.d(t,{S:()=>s,m:()=>o});var r=n("6977"),i=n("zGvL");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsPreset(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsPreset(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}desc(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}data(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new i.f).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}dataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startPreset(e){e.startObject(3)}static addName(e,t){e.addFieldOffset(0,t,0)}static addDesc(e,t){e.addFieldOffset(1,t,0)}static addData(e,t){e.addFieldOffset(2,t,0)}static createDataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startDataVector(e,t){e.startVector(4,t,4)}static endPreset(e){return e.endObject()}static createPreset(e,t,n,r){return s.startPreset(e),s.addName(e,t),s.addDesc(e,n),s.addData(e,r),s.endPreset(e)}unpack(){return new o(this.name(),this.desc(),this.bb.createObjList(this.data.bind(this),this.dataLength()))}unpackTo(e){e.name=this.name(),e.desc=this.desc(),e.data=this.bb.createObjList(this.data.bind(this),this.dataLength())}}class o{constructor(e=null,t=null,n=[]){this.name=e,this.desc=t,this.data=n}pack(e){const t=null!==this.name?e.createString(this.name):0,n=null!==this.desc?e.createString(this.desc):0,r=s.createDataVector(e,e.createObjectOffsetList(this.data));return s.createPreset(e,t,n,r)}}},meSg:(e,t,n)=>{"use strict";n.d(t,{OI:()=>r,SG:()=>l});var r,i=n("5CMk"),s=n("IJKq"),o=n("1Bqd"),a=n("1Yqr");function l(e,t){switch(r[e]){case"NONE":default:return null;case"UintValue":return t(new a.d);case"IntValue":return t(new s.F);case"FloatValue":return t(new i.A);case"StringValue":return t(new o.G)}}!function(e){e[e.NONE=0]="NONE",e[e.UintValue=1]="UintValue",e[e.IntValue=2]="IntValue",e[e.FloatValue=3]="FloatValue",e[e.StringValue=4]="StringValue"}(r||(r={}))},"2KDM":(e,t,n)=>{"use strict";n.d(t,{n:()=>i,o:()=>s});var r=n("6977");class i{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRenderState(e,t){return(t||new i).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRenderState(e,t){return e.setPosition(e.position()+r.XU),(t||new i).__init(e.readInt32(e.position())+e.position(),e)}type(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb_pos+e):0}value(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb_pos+e):0}static startRenderState(e){e.startObject(2)}static addType(e,t){e.addFieldInt32(0,t,0)}static addValue(e,t){e.addFieldInt32(1,t,0)}static endRenderState(e){return e.endObject()}static createRenderState(e,t,n){return i.startRenderState(e),i.addType(e,t),i.addValue(e,n),i.endRenderState(e)}unpack(){return new s(this.type(),this.value())}unpackTo(e){e.type=this.type(),e.value=this.value()}}class s{constructor(e=0,t=0){this.type=e,this.value=t}pack(e){return i.createRenderState(e,this.type,this.value)}}},"+VBS":(e,t,n)=>{"use strict";n.d(t,{Zd:()=>r,Zn:()=>o});var r,i=n("WhBg"),s=n("DrVX");function o(e,t,n){switch(r[e]){case"NONE":default:return null;case"RoutineBytecodeBundle":return t(n,new i.y);case"RoutineShaderBundle":return t(n,new s.C)}}!function(e){e[e.NONE=0]="NONE",e[e.RoutineBytecodeBundle=1]="RoutineBytecodeBundle",e[e.RoutineShaderBundle=2]="RoutineShaderBundle"}(r||(r={}))},ZbwE:(e,t,n)=>{"use strict";n.d(t,{M:()=>l,s:()=>c});var r=n("6977"),i=n("IMqc"),s=n("dunc"),o=n("Rum1"),a=n("r1qu");class l{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRoutineBytecodeBundleResources(e,t){return(t||new l).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRoutineBytecodeBundleResources(e,t){return e.setPosition(e.position()+r.XU),(t||new l).__init(e.readInt32(e.position())+e.position(),e)}uavs(e,t){const n=this.bb.__offset(this.bb_pos,4);return n?(t||new a.q).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}uavsLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new i.l).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}textures(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new s.j).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}texturesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}trimeshes(e,t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new o.x).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}trimeshesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startRoutineBytecodeBundleResources(e){e.startObject(4)}static addUavs(e,t){e.addFieldOffset(0,t,0)}static createUavsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startUavsVector(e,t){e.startVector(4,t,4)}static addBuffers(e,t){e.addFieldOffset(1,t,0)}static createBuffersVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startBuffersVector(e,t){e.startVector(4,t,4)}static addTextures(e,t){e.addFieldOffset(2,t,0)}static createTexturesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startTexturesVector(e,t){e.startVector(4,t,4)}static addTrimeshes(e,t){e.addFieldOffset(3,t,0)}static createTrimeshesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startTrimeshesVector(e,t){e.startVector(4,t,4)}static endRoutineBytecodeBundleResources(e){return e.endObject()}static createRoutineBytecodeBundleResources(e,t,n,r,i){return l.startRoutineBytecodeBundleResources(e),l.addUavs(e,t),l.addBuffers(e,n),l.addTextures(e,r),l.addTrimeshes(e,i),l.endRoutineBytecodeBundleResources(e)}unpack(){return new c(this.bb.createObjList(this.uavs.bind(this),this.uavsLength()),this.bb.createObjList(this.buffers.bind(this),this.buffersLength()),this.bb.createObjList(this.textures.bind(this),this.texturesLength()),this.bb.createObjList(this.trimeshes.bind(this),this.trimeshesLength()))}unpackTo(e){e.uavs=this.bb.createObjList(this.uavs.bind(this),this.uavsLength()),e.buffers=this.bb.createObjList(this.buffers.bind(this),this.buffersLength()),e.textures=this.bb.createObjList(this.textures.bind(this),this.texturesLength()),e.trimeshes=this.bb.createObjList(this.trimeshes.bind(this),this.trimeshesLength())}}class c{constructor(e=[],t=[],n=[],r=[]){this.uavs=e,this.buffers=t,this.textures=n,this.trimeshes=r}pack(e){const t=l.createUavsVector(e,e.createObjectOffsetList(this.uavs)),n=l.createBuffersVector(e,e.createObjectOffsetList(this.buffers)),r=l.createTexturesVector(e,e.createObjectOffsetList(this.textures)),i=l.createTrimeshesVector(e,e.createObjectOffsetList(this.trimeshes));return l.createRoutineBytecodeBundleResources(e,t,n,r,i)}}},WhBg:(e,t,n)=>{"use strict";n.d(t,{u:()=>o,y:()=>s});var r=n("6977"),i=n("ZbwE");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRoutineBytecodeBundle(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRoutineBytecodeBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}code(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}codeLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}codeArray(){const e=this.bb.__offset(this.bb_pos,4);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}resources(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new i.M).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}numthreads(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}numthreadsLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}numthreadsArray(){const e=this.bb.__offset(this.bb_pos,8);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startRoutineBytecodeBundle(e){e.startObject(3)}static addCode(e,t){e.addFieldOffset(0,t,0)}static createCodeVector(e,t){e.startVector(1,t.length,1);for(let n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}static startCodeVector(e,t){e.startVector(1,t,1)}static addResources(e,t){e.addFieldOffset(1,t,0)}static addNumthreads(e,t){e.addFieldOffset(2,t,0)}static createNumthreadsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addInt32(t[n]);return e.endVector()}static startNumthreadsVector(e,t){e.startVector(4,t,4)}static endRoutineBytecodeBundle(e){return e.endObject()}unpack(){return new o(this.bb.createScalarList(this.code.bind(this),this.codeLength()),null!==this.resources()?this.resources().unpack():null,this.bb.createScalarList(this.numthreads.bind(this),this.numthreadsLength()))}unpackTo(e){e.code=this.bb.createScalarList(this.code.bind(this),this.codeLength()),e.resources=null!==this.resources()?this.resources().unpack():null,e.numthreads=this.bb.createScalarList(this.numthreads.bind(this),this.numthreadsLength())}}class o{constructor(e=[],t=null,n=[]){this.code=e,this.resources=t,this.numthreads=n}pack(e){const t=s.createCodeVector(e,this.code),n=null!==this.resources?this.resources.pack(e):0,r=s.createNumthreadsVector(e,this.numthreads);return s.startRoutineBytecodeBundle(e),s.addCode(e,t),s.addResources(e,n),s.addNumthreads(e,r),s.endRoutineBytecodeBundle(e)}}},pOt9:(e,t,n)=>{"use strict";n.d(t,{r:()=>a,t:()=>o});var r=n("6977"),i=n("4mVy"),s=n("gp8H");class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRoutineGLSLSourceBundle(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRoutineGLSLSourceBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}code(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}attributes(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new s.y).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}attributesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}cbuffers(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new i.W).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}cbuffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startRoutineGLSLSourceBundle(e){e.startObject(3)}static addCode(e,t){e.addFieldOffset(0,t,0)}static addAttributes(e,t){e.addFieldOffset(1,t,0)}static createAttributesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startAttributesVector(e,t){e.startVector(4,t,4)}static addCbuffers(e,t){e.addFieldOffset(2,t,0)}static createCbuffersVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCbuffersVector(e,t){e.startVector(4,t,4)}static endRoutineGLSLSourceBundle(e){return e.endObject()}static createRoutineGLSLSourceBundle(e,t,n,r){return o.startRoutineGLSLSourceBundle(e),o.addCode(e,t),o.addAttributes(e,n),o.addCbuffers(e,r),o.endRoutineGLSLSourceBundle(e)}unpack(){return new a(this.code(),this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createObjList(this.cbuffers.bind(this),this.cbuffersLength()))}unpackTo(e){e.code=this.code(),e.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),e.cbuffers=this.bb.createObjList(this.cbuffers.bind(this),this.cbuffersLength())}}class a{constructor(e=null,t=[],n=[]){this.code=e,this.attributes=t,this.cbuffers=n}pack(e){const t=null!==this.code?e.createString(this.code):0,n=o.createAttributesVector(e,e.createObjectOffsetList(this.attributes)),r=o.createCbuffersVector(e,e.createObjectOffsetList(this.cbuffers));return o.createRoutineGLSLSourceBundle(e,t,n,r)}}},Jpkv:(e,t,n)=>{"use strict";n.d(t,{u:()=>s,v:()=>o});var r=n("6977"),i=n("4mVy");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRoutineHLSLSourceBundle(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRoutineHLSLSourceBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}code(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}entryName(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}cbuffers(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new i.W).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}cbuffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startRoutineHLSLSourceBundle(e){e.startObject(3)}static addCode(e,t){e.addFieldOffset(0,t,0)}static addEntryName(e,t){e.addFieldOffset(1,t,0)}static addCbuffers(e,t){e.addFieldOffset(2,t,0)}static createCbuffersVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCbuffersVector(e,t){e.startVector(4,t,4)}static endRoutineHLSLSourceBundle(e){return e.endObject()}static createRoutineHLSLSourceBundle(e,t,n,r){return s.startRoutineHLSLSourceBundle(e),s.addCode(e,t),s.addEntryName(e,n),s.addCbuffers(e,r),s.endRoutineHLSLSourceBundle(e)}unpack(){return new o(this.code(),this.entryName(),this.bb.createObjList(this.cbuffers.bind(this),this.cbuffersLength()))}unpackTo(e){e.code=this.code(),e.entryName=this.entryName(),e.cbuffers=this.bb.createObjList(this.cbuffers.bind(this),this.cbuffersLength())}}class o{constructor(e=null,t=null,n=[]){this.code=e,this.entryName=t,this.cbuffers=n}pack(e){const t=null!==this.code?e.createString(this.code):0,n=null!==this.entryName?e.createString(this.entryName):0,r=s.createCbuffersVector(e,e.createObjectOffsetList(this.cbuffers));return s.createRoutineHLSLSourceBundle(e,t,n,r)}}},DrVX:(e,t,n)=>{"use strict";n.d(t,{C:()=>s,w:()=>o});var r=n("6977"),i=n("KEtj");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRoutineShaderBundle(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRoutineShaderBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}shadersType(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}shadersTypeLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}shadersTypeArray(){const e=this.bb.__offset(this.bb_pos,4);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}shaders(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__union(t,this.bb.__vector(this.bb_pos+n)+4*e):null}shadersLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}static startRoutineShaderBundle(e){e.startObject(2)}static addShadersType(e,t){e.addFieldOffset(0,t,0)}static createShadersTypeVector(e,t){e.startVector(1,t.length,1);for(let n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}static startShadersTypeVector(e,t){e.startVector(1,t,1)}static addShaders(e,t){e.addFieldOffset(1,t,0)}static createShadersVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startShadersVector(e,t){e.startVector(4,t,4)}static endRoutineShaderBundle(e){return e.endObject()}static createRoutineShaderBundle(e,t,n){return s.startRoutineShaderBundle(e),s.addShadersType(e,t),s.addShaders(e,n),s.endRoutineShaderBundle(e)}unpack(){return new o(this.bb.createScalarList(this.shadersType.bind(this),this.shadersTypeLength()),(()=>{let e=[];for(let t=0;t<this.shadersTypeLength();++t){let n=this.shadersType(t);if(null===n||"NONE"===i.Jo[n])continue;let r=(0,i.z0)(n,this.shaders.bind(this),t);null!==r&&e.push(r.unpack())}return e})())}unpackTo(e){e.shadersType=this.bb.createScalarList(this.shadersType.bind(this),this.shadersTypeLength()),e.shaders=(()=>{let e=[];for(let t=0;t<this.shadersTypeLength();++t){let n=this.shadersType(t);if(null===n||"NONE"===i.Jo[n])continue;let r=(0,i.z0)(n,this.shaders.bind(this),t);null!==r&&e.push(r.unpack())}return e})()}}class o{constructor(e=[],t=[]){this.shadersType=e,this.shaders=t}pack(e){const t=s.createShadersTypeVector(e,this.shadersType),n=s.createShadersVector(e,e.createObjectOffsetList(this.shaders));return s.createRoutineShaderBundle(e,t,n)}}},KEtj:(e,t,n)=>{"use strict";n.d(t,{Jo:()=>r,z0:()=>o});var r,i=n("pOt9"),s=n("Jpkv");function o(e,t,n){switch(r[e]){case"NONE":default:return null;case"RoutineGLSLSourceBundle":return t(n,new i.t);case"RoutineHLSLSourceBundle":return t(n,new s.u)}}!function(e){e[e.NONE=0]="NONE",e[e.RoutineGLSLSourceBundle=1]="RoutineGLSLSourceBundle",e[e.RoutineHLSLSourceBundle=2]="RoutineHLSLSourceBundle"}(r||(r={}))},X2z1:(e,t,n)=>{"use strict";n.d(t,{Rx:()=>o,ex:()=>r});var r,i=n("23YT"),s=n("Gw1M");function o(e,t,n){switch(r[e]){case"NONE":default:return null;case"VertexShader":return t(n,new s.Q);case"PixelShader":return t(n,new i.g)}}!function(e){e[e.NONE=0]="NONE",e[e.VertexShader=1]="VertexShader",e[e.PixelShader=2]="PixelShader"}(r||(r={}))},"1Bqd":(e,t,n)=>{"use strict";n.d(t,{G:()=>i,s:()=>s});var r=n("6977");class i{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStringValue(e,t){return(t||new i).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStringValue(e,t){return e.setPosition(e.position()+r.XU),(t||new i).__init(e.readInt32(e.position())+e.position(),e)}value(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}static startStringValue(e){e.startObject(1)}static addValue(e,t){e.addFieldOffset(0,t,0)}static endStringValue(e){return e.endObject()}static createStringValue(e,t){return i.startStringValue(e),i.addValue(e,t),i.endStringValue(e)}unpack(){return new s(this.value())}unpackTo(e){e.value=this.value()}}class s{constructor(e=null){this.value=e}pack(e){const t=null!==this.value?e.createString(this.value):0;return i.createStringValue(e,t)}}},mGiJ:(e,t,n)=>{"use strict";n.d(t,{U:()=>s,h:()=>o});var r=n("6977"),i=n("s7GX");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTechnique11Bundle(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTechnique11Bundle(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}passes(e,t){const n=this.bb.__offset(this.bb_pos,4);return n?(t||new i.m).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}passesLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}static startTechnique11Bundle(e){e.startObject(1)}static addPasses(e,t){e.addFieldOffset(0,t,0)}static createPassesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startPassesVector(e,t){e.startVector(4,t,4)}static endTechnique11Bundle(e){return e.endObject()}static createTechnique11Bundle(e,t){return s.startTechnique11Bundle(e),s.addPasses(e,t),s.endTechnique11Bundle(e)}unpack(){return new o(this.bb.createObjList(this.passes.bind(this),this.passesLength()))}unpackTo(e){e.passes=this.bb.createObjList(this.passes.bind(this),this.passesLength())}}class o{constructor(e=[]){this.passes=e}pack(e){const t=s.createPassesVector(e,e.createObjectOffsetList(this.passes));return s.createTechnique11Bundle(e,t)}}},s7GX:(e,t,n)=>{"use strict";n.d(t,{X:()=>o,m:()=>s});var r=n("6977"),i=n("X2z1");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTechnique11RenderPass(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTechnique11RenderPass(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}code(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}codeLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}codeArray(){const e=this.bb.__offset(this.bb_pos,4);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}shadersType(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}shadersTypeLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}shadersTypeArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}shaders(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb.__vector(this.bb_pos+n)+4*e):null}shadersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}static startTechnique11RenderPass(e){e.startObject(3)}static addCode(e,t){e.addFieldOffset(0,t,0)}static createCodeVector(e,t){e.startVector(1,t.length,1);for(let n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}static startCodeVector(e,t){e.startVector(1,t,1)}static addShadersType(e,t){e.addFieldOffset(1,t,0)}static createShadersTypeVector(e,t){e.startVector(1,t.length,1);for(let n=t.length-1;n>=0;n--)e.addInt8(t[n]);return e.endVector()}static startShadersTypeVector(e,t){e.startVector(1,t,1)}static addShaders(e,t){e.addFieldOffset(2,t,0)}static createShadersVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startShadersVector(e,t){e.startVector(4,t,4)}static endTechnique11RenderPass(e){return e.endObject()}static createTechnique11RenderPass(e,t,n,r){return s.startTechnique11RenderPass(e),s.addCode(e,t),s.addShadersType(e,n),s.addShaders(e,r),s.endTechnique11RenderPass(e)}unpack(){return new o(this.bb.createScalarList(this.code.bind(this),this.codeLength()),this.bb.createScalarList(this.shadersType.bind(this),this.shadersTypeLength()),(()=>{let e=[];for(let t=0;t<this.shadersTypeLength();++t){let n=this.shadersType(t);if(null===n||"NONE"===i.ex[n])continue;let r=(0,i.Rx)(n,this.shaders.bind(this),t);null!==r&&e.push(r.unpack())}return e})())}unpackTo(e){e.code=this.bb.createScalarList(this.code.bind(this),this.codeLength()),e.shadersType=this.bb.createScalarList(this.shadersType.bind(this),this.shadersTypeLength()),e.shaders=(()=>{let e=[];for(let t=0;t<this.shadersTypeLength();++t){let n=this.shadersType(t);if(null===n||"NONE"===i.ex[n])continue;let r=(0,i.Rx)(n,this.shaders.bind(this),t);null!==r&&e.push(r.unpack())}return e})()}}class o{constructor(e=[],t=[],n=[]){this.code=e,this.shadersType=t,this.shaders=n}pack(e){const t=s.createCodeVector(e,this.code),n=s.createShadersTypeVector(e,this.shadersType),r=s.createShadersVector(e,e.createObjectOffsetList(this.shaders));return s.createTechnique11RenderPass(e,t,n,r)}}},dunc:(e,t,n)=>{"use strict";n.d(t,{j:()=>s,n:()=>o});var r=n("6977"),i=n("KUuy");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTextureBundle(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTextureBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}slot(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb_pos+e):0}stride(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint32(this.bb_pos+e):0}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new i.U).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startTextureBundle(e){e.startObject(4)}static addName(e,t){e.addFieldOffset(0,t,0)}static addSlot(e,t){e.addFieldInt32(1,t,0)}static addStride(e,t){e.addFieldInt32(2,t,0)}static addType(e,t){e.addFieldOffset(3,t,0)}static endTextureBundle(e){return e.endObject()}unpack(){return new o(this.name(),this.slot(),this.stride(),null!==this.type()?this.type().unpack():null)}unpackTo(e){e.name=this.name(),e.slot=this.slot(),e.stride=this.stride(),e.type=null!==this.type()?this.type().unpack():null}}class o{constructor(e=null,t=0,n=0,r=null){this.name=e,this.slot=t,this.stride=n,this.type=r}pack(e){const t=null!==this.name?e.createString(this.name):0,n=null!==this.type?this.type.pack(e):0;return s.startTextureBundle(e),s.addName(e,t),s.addSlot(e,this.slot),s.addStride(e,this.stride),s.addType(e,n),s.endTextureBundle(e)}}},J5jW:(e,t,n)=>{"use strict";n.d(t,{P:()=>s,v:()=>i});var r=n("6977");class i{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTextureValue(e,t){return(t||new i).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTextureValue(e,t){return e.setPosition(e.position()+r.XU),(t||new i).__init(e.readInt32(e.position())+e.position(),e)}value(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}static startTextureValue(e){e.startObject(1)}static addValue(e,t){e.addFieldOffset(0,t,0)}static endTextureValue(e){return e.endObject()}static createTextureValue(e,t){return i.startTextureValue(e),i.addValue(e,t),i.endTextureValue(e)}unpack(){return new s(this.value())}unpackTo(e){e.value=this.value()}}class s{constructor(e=null){this.value=e}pack(e){const t=null!==this.value?e.createString(this.value):0;return i.createTextureValue(e,t)}}},Rum1:(e,t,n)=>{"use strict";n.d(t,{e:()=>s,x:()=>i});var r=n("6977");class i{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTrimeshBundle(e,t){return(t||new i).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTrimeshBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new i).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}vertexCountUName(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}faceCountUName(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}verticesName(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}facesName(e){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}gsAdjecencyName(e){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}faceAdjacencyName(e){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__string(this.bb_pos+t,e):null}static startTrimeshBundle(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addVertexCountUName(e,t){e.addFieldOffset(1,t,0)}static addFaceCountUName(e,t){e.addFieldOffset(2,t,0)}static addVerticesName(e,t){e.addFieldOffset(3,t,0)}static addFacesName(e,t){e.addFieldOffset(4,t,0)}static addGsAdjecencyName(e,t){e.addFieldOffset(5,t,0)}static addFaceAdjacencyName(e,t){e.addFieldOffset(6,t,0)}static endTrimeshBundle(e){return e.endObject()}static createTrimeshBundle(e,t,n,r,s,o,a,l){return i.startTrimeshBundle(e),i.addName(e,t),i.addVertexCountUName(e,n),i.addFaceCountUName(e,r),i.addVerticesName(e,s),i.addFacesName(e,o),i.addGsAdjecencyName(e,a),i.addFaceAdjacencyName(e,l),i.endTrimeshBundle(e)}unpack(){return new s(this.name(),this.vertexCountUName(),this.faceCountUName(),this.verticesName(),this.facesName(),this.gsAdjecencyName(),this.faceAdjacencyName())}unpackTo(e){e.name=this.name(),e.vertexCountUName=this.vertexCountUName(),e.faceCountUName=this.faceCountUName(),e.verticesName=this.verticesName(),e.facesName=this.facesName(),e.gsAdjecencyName=this.gsAdjecencyName(),e.faceAdjacencyName=this.faceAdjacencyName()}}class s{constructor(e=null,t=null,n=null,r=null,i=null,s=null,o=null){this.name=e,this.vertexCountUName=t,this.faceCountUName=n,this.verticesName=r,this.facesName=i,this.gsAdjecencyName=s,this.faceAdjacencyName=o}pack(e){const t=null!==this.name?e.createString(this.name):0,n=null!==this.vertexCountUName?e.createString(this.vertexCountUName):0,r=null!==this.faceCountUName?e.createString(this.faceCountUName):0,s=null!==this.verticesName?e.createString(this.verticesName):0,o=null!==this.facesName?e.createString(this.facesName):0,a=null!==this.gsAdjecencyName?e.createString(this.gsAdjecencyName):0,l=null!==this.faceAdjacencyName?e.createString(this.faceAdjacencyName):0;return i.createTrimeshBundle(e,t,n,r,s,o,a,l)}}},r1qu:(e,t,n)=>{"use strict";n.d(t,{O:()=>o,q:()=>s});var r=n("6977"),i=n("KUuy");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUAVBundle(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUAVBundle(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}slot(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint32(this.bb_pos+e):0}stride(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint32(this.bb_pos+e):0}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new i.U).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startUAVBundle(e){e.startObject(4)}static addName(e,t){e.addFieldOffset(0,t,0)}static addSlot(e,t){e.addFieldInt32(1,t,0)}static addStride(e,t){e.addFieldInt32(2,t,0)}static addType(e,t){e.addFieldOffset(3,t,0)}static endUAVBundle(e){return e.endObject()}unpack(){return new o(this.name(),this.slot(),this.stride(),null!==this.type()?this.type().unpack():null)}unpackTo(e){e.name=this.name(),e.slot=this.slot(),e.stride=this.stride(),e.type=null!==this.type()?this.type().unpack():null}}class o{constructor(e=null,t=0,n=0,r=null){this.name=e,this.slot=t,this.stride=n,this.type=r}pack(e){const t=null!==this.name?e.createString(this.name):0,n=null!==this.type?this.type.pack(e):0;return s.startUAVBundle(e),s.addName(e,t),s.addSlot(e,this.slot),s.addStride(e,this.stride),s.addType(e,n),s.endUAVBundle(e)}}},"E1+w":(e,t,n)=>{"use strict";n.d(t,{F:()=>o,l:()=>a});var r=n("6977"),i=n("Nk0z"),s=n("TRYF");class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUIControl(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUIControl(e,t){return e.setPosition(e.position()+r.XU),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}valueType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):i.$e.NONE}value(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}properties(e,t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new s.n).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}propertiesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startUIControl(e){e.startObject(4)}static addName(e,t){e.addFieldOffset(0,t,0)}static addValueType(e,t){e.addFieldInt8(1,t,i.$e.NONE)}static addValue(e,t){e.addFieldOffset(2,t,0)}static addProperties(e,t){e.addFieldOffset(3,t,0)}static createPropertiesVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startPropertiesVector(e,t){e.startVector(4,t,4)}static endUIControl(e){return e.endObject()}static createUIControl(e,t,n,r,i){return o.startUIControl(e),o.addName(e,t),o.addValueType(e,n),o.addValue(e,r),o.addProperties(e,i),o.endUIControl(e)}unpack(){return new a(this.name(),this.valueType(),(()=>{let e=(0,i.K4)(this.valueType(),this.value.bind(this));return null===e?null:e.unpack()})(),this.bb.createObjList(this.properties.bind(this),this.propertiesLength()))}unpackTo(e){e.name=this.name(),e.valueType=this.valueType(),e.value=(()=>{let e=(0,i.K4)(this.valueType(),this.value.bind(this));return null===e?null:e.unpack()})(),e.properties=this.bb.createObjList(this.properties.bind(this),this.propertiesLength())}}class a{constructor(e=null,t=i.$e.NONE,n=null,r=[]){this.name=e,this.valueType=t,this.value=n,this.properties=r}pack(e){const t=null!==this.name?e.createString(this.name):0,n=e.createObjectOffset(this.value),r=o.createPropertiesVector(e,e.createObjectOffsetList(this.properties));return o.createUIControl(e,t,this.valueType,n,r)}}},"1Yqr":(e,t,n)=>{"use strict";n.d(t,{H:()=>i,d:()=>r});class r{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}value(){return this.bb.readUint32(this.bb_pos)}static sizeOf(){return 4}static createUintValue(e,t){return e.prep(4,4),e.writeInt32(t),e.offset()}unpack(){return new i(this.value())}unpackTo(e){e.value=this.value()}}class i{constructor(e=0){this.value=e}pack(e){return r.createUintValue(e,this.value)}}},Gw1M:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,Q:()=>o});var r=n("6977"),i=n("4mVy"),s=n("KUuy");class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsVertexShader(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsVertexShader(e,t){return e.setPosition(e.position()+r.XU),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}code(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}entryName(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}input(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new s.U).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}cbuffers(e,t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new i.W).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}cbuffersLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startVertexShader(e){e.startObject(4)}static addCode(e,t){e.addFieldOffset(0,t,0)}static addEntryName(e,t){e.addFieldOffset(1,t,0)}static addInput(e,t){e.addFieldOffset(2,t,0)}static addCbuffers(e,t){e.addFieldOffset(3,t,0)}static createCbuffersVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCbuffersVector(e,t){e.startVector(4,t,4)}static endVertexShader(e){return e.endObject()}unpack(){return new a(this.code(),this.entryName(),null!==this.input()?this.input().unpack():null,this.bb.createObjList(this.cbuffers.bind(this),this.cbuffersLength()))}unpackTo(e){e.code=this.code(),e.entryName=this.entryName(),e.input=null!==this.input()?this.input().unpack():null,e.cbuffers=this.bb.createObjList(this.cbuffers.bind(this),this.cbuffersLength())}}class a{constructor(e=null,t=null,n=null,r=[]){this.code=e,this.entryName=t,this.input=n,this.cbuffers=r}pack(e){const t=null!==this.code?e.createString(this.code):0,n=null!==this.entryName?e.createString(this.entryName):0,r=null!==this.input?this.input.pack(e):0,i=o.createCbuffersVector(e,e.createObjectOffsetList(this.cbuffers));return o.startVertexShader(e),o.addCode(e,t),o.addEntryName(e,n),o.addInput(e,r),o.addCbuffers(e,i),o.endVertexShader(e)}}},TRYF:(e,t,n)=>{"use strict";n.d(t,{f:()=>o,n:()=>s});var r=n("6977"),i=n("meSg");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsViewTypeProperty(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsViewTypeProperty(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}valueType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):i.OI.NONE}value(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}static startViewTypeProperty(e){e.startObject(3)}static addName(e,t){e.addFieldOffset(0,t,0)}static addValueType(e,t){e.addFieldInt8(1,t,i.OI.NONE)}static addValue(e,t){e.addFieldOffset(2,t,0)}static endViewTypeProperty(e){return e.endObject()}static createViewTypeProperty(e,t,n,r){return s.startViewTypeProperty(e),s.addName(e,t),s.addValueType(e,n),s.addValue(e,r),s.endViewTypeProperty(e)}unpack(){return new o(this.name(),this.valueType(),(()=>{let e=(0,i.SG)(this.valueType(),this.value.bind(this));return null===e?null:e.unpack()})())}unpackTo(e){e.name=this.name(),e.valueType=this.valueType(),e.value=(()=>{let e=(0,i.SG)(this.valueType(),this.value.bind(this));return null===e?null:e.unpack()})()}}class o{constructor(e=null,t=i.OI.NONE,n=null){this.name=e,this.valueType=t,this.value=n}pack(e){const t=null!==this.name?e.createString(this.name):0,n=e.createObjectOffset(this.value);return s.createViewTypeProperty(e,t,this.valueType,n)}}},"O/5E":(e,t,n)=>{"use strict";n.d(t,{n:()=>s,q:()=>o});var r=n("6977"),i=n("KUuy");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTypeField(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTypeField(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}type(e){const t=this.bb.__offset(this.bb_pos,4);return t?(e||new i.U).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}name(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}semantic(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}size(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb_pos+e):0}padding(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint32(this.bb_pos+e):0}static startTypeField(e){e.startObject(5)}static addType(e,t){e.addFieldOffset(0,t,0)}static addName(e,t){e.addFieldOffset(1,t,0)}static addSemantic(e,t){e.addFieldOffset(2,t,0)}static addSize(e,t){e.addFieldInt32(3,t,0)}static addPadding(e,t){e.addFieldInt32(4,t,0)}static endTypeField(e){return e.endObject()}static createTypeField(e,t,n,r,i,o){return s.startTypeField(e),s.addType(e,t),s.addName(e,n),s.addSemantic(e,r),s.addSize(e,i),s.addPadding(e,o),s.endTypeField(e)}unpack(){return new o(null!==this.type()?this.type().unpack():null,this.name(),this.semantic(),this.size(),this.padding())}unpackTo(e){e.type=null!==this.type()?this.type().unpack():null,e.name=this.name(),e.semantic=this.semantic(),e.size=this.size(),e.padding=this.padding()}}class o{constructor(e=null,t=null,n=null,r=0,i=0){this.type=e,this.name=t,this.semantic=n,this.size=r,this.padding=i}pack(e){const t=null!==this.type?this.type.pack(e):0,n=null!==this.name?e.createString(this.name):0,r=null!==this.semantic?e.createString(this.semantic):0;return s.createTypeField(e,t,n,r,this.size,this.padding)}}},KUuy:(e,t,n)=>{"use strict";n.d(t,{U:()=>s,h:()=>o});var r=n("6977"),i=n("O/5E");class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTypeLayout(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTypeLayout(e,t){return e.setPosition(e.position()+r.XU),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}fields(e,t){const n=this.bb.__offset(this.bb_pos,4);return n?(t||new i.n).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}length(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}name(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}size(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint32(this.bb_pos+e):0}static startTypeLayout(e){e.startObject(4)}static addFields(e,t){e.addFieldOffset(0,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addLength(e,t){e.addFieldInt32(1,t,0)}static addName(e,t){e.addFieldOffset(2,t,0)}static addSize(e,t){e.addFieldInt32(3,t,0)}static endTypeLayout(e){return e.endObject()}static createTypeLayout(e,t,n,r,i){return s.startTypeLayout(e),s.addFields(e,t),s.addLength(e,n),s.addName(e,r),s.addSize(e,i),s.endTypeLayout(e)}unpack(){return new o(this.bb.createObjList(this.fields.bind(this),this.fieldsLength()),this.length(),this.name(),this.size())}unpackTo(e){e.fields=this.bb.createObjList(this.fields.bind(this),this.fieldsLength()),e.length=this.length(),e.name=this.name(),e.size=this.size()}}class o{constructor(e=[],t=0,n=null,r=0){this.fields=e,this.length=t,this.name=n,this.size=r}pack(e){const t=s.createFieldsVector(e,e.createObjectOffsetList(this.fields)),n=null!==this.name?e.createString(this.name):0;return s.createTypeLayout(e,t,this.length,n,this.size)}}},"/9BJ":(e,t,n)=>{"use strict";var r;n.d(t,{K:()=>r}),function(e){e[e.k_I32LoadRegister=0]="k_I32LoadRegister",e[e.k_I32LoadInput=1]="k_I32LoadInput",e[e.k_I32LoadInputPointer=2]="k_I32LoadInputPointer",e[e.k_I32LoadRegistersPointer=3]="k_I32LoadRegistersPointer",e[e.k_I32StoreRegisterPointer=4]="k_I32StoreRegisterPointer",e[e.k_I32StoreInput=5]="k_I32StoreInput",e[e.k_I32StoreInputPointer=6]="k_I32StoreInputPointer",e[e.k_I32SetConst=7]="k_I32SetConst",e[e.k_I32TextureLoad=8]="k_I32TextureLoad",e[e.k_I32ExternCall=9]="k_I32ExternCall",e[e.k_I32Add=10]="k_I32Add",e[e.k_I32Sub=11]="k_I32Sub",e[e.k_I32Mul=12]="k_I32Mul",e[e.k_I32Div=13]="k_I32Div",e[e.k_I32Mod=14]="k_I32Mod",e[e.k_F32Add=15]="k_F32Add",e[e.k_F32Sub=16]="k_F32Sub",e[e.k_F32Mul=17]="k_F32Mul",e[e.k_F32Div=18]="k_F32Div",e[e.k_F32Mod=19]="k_F32Mod",e[e.k_U32LessThan=20]="k_U32LessThan",e[e.k_U32GreaterThanEqual=21]="k_U32GreaterThanEqual",e[e.k_I32LessThan=22]="k_I32LessThan",e[e.k_I32GreaterThanEqual=23]="k_I32GreaterThanEqual",e[e.k_I32Equal=24]="k_I32Equal",e[e.k_I32NotEqual=25]="k_I32NotEqual",e[e.k_I32Not=26]="k_I32Not",e[e.k_F32LessThan=27]="k_F32LessThan",e[e.k_F32GreaterThanEqual=28]="k_F32GreaterThanEqual",e[e.k_I32LogicalOr=29]="k_I32LogicalOr",e[e.k_I32LogicalAnd=30]="k_I32LogicalAnd",e[e.k_F32Frac=31]="k_F32Frac",e[e.k_F32Floor=32]="k_F32Floor",e[e.k_F32Ceil=33]="k_F32Ceil",e[e.k_F32Sin=34]="k_F32Sin",e[e.k_F32Cos=35]="k_F32Cos",e[e.k_F32Abs=36]="k_F32Abs",e[e.k_F32Sqrt=37]="k_F32Sqrt",e[e.k_F32Max=38]="k_F32Max",e[e.k_F32Min=39]="k_F32Min",e[e.k_F32Pow=40]="k_F32Pow",e[e.k_I32Mad=41]="k_I32Mad",e[e.k_I32Min=42]="k_I32Min",e[e.k_I32Max=43]="k_I32Max",e[e.k_F32ToU32=44]="k_F32ToU32",e[e.k_F32ToI32=45]="k_F32ToI32",e[e.k_U32ToF32=46]="k_U32ToF32",e[e.k_I32ToF32=47]="k_I32ToF32",e[e.k_JumpIf=48]="k_JumpIf",e[e.k_Jump=49]="k_Jump",e[e.k_Ret=50]="k_Ret"}(r||(r={}))},"+H7Q":(e,t,n)=>{"use strict";n.r(t),n.d(t,{EAddrType:()=>o,EChunkType:()=>a,EComparisonFunc:()=>i,EDepthWriteMask:()=>r,EOperation:()=>l.K,EStencilOp:()=>s});var r,i,s,o,a,l=n("/9BJ");!function(e){e[e.k_Zero=0]="k_Zero",e[e.k_All=1]="k_All"}(r||(r={})),function(e){e[e.k_Never=1]="k_Never",e[e.k_Less=2]="k_Less",e[e.k_Equal=3]="k_Equal",e[e.k_LessEqual=4]="k_LessEqual",e[e.k_Greater=5]="k_Greater",e[e.k_NotEqual=6]="k_NotEqual",e[e.k_GreaterEqual=7]="k_GreaterEqual",e[e.k_Always=8]="k_Always"}(i||(i={})),function(e){e[e.k_Keep=1]="k_Keep",e[e.K_zero=2]="K_zero",e[e.k_Replace=3]="k_Replace",e[e.k_IncrSat=4]="k_IncrSat",e[e.k_DecrSat=5]="k_DecrSat",e[e.k_Invert=6]="k_Invert",e[e.k_Incr=7]="k_Incr",e[e.k_Decr=8]="k_Decr"}(s||(s={})),function(e){e[e.k_Registers=0]="k_Registers",e[e.k_Input=1]="k_Input",e[e.k_PointerRegisters=2]="k_PointerRegisters",e[e.k_PointerInput=3]="k_PointerInput",e[e.k_PipelineStates=4]="k_PipelineStates"}(o||(o={})),function(e){e[e.k_Constants=0]="k_Constants",e[e.k_Layout=1]="k_Layout",e[e.k_Code=2]="k_Code",e[e.k_Externs=3]="k_Externs",e[e.k_Shaders=4]="k_Shaders",e[e.k_DepthStencilStates=5]="k_DepthStencilStates"}(a||(a={}))},Y0AG:(e,t,n)=>{"use strict";var r,i,s,o,a,l,c;n.d(t,{NB:()=>o,TI:()=>s,Vc:()=>r,WQ:()=>c,eo:()=>a,fG:()=>i,n3:()=>l}),function(e){e[e.k_Default=0]="k_Default",e[e.k_Necessary=1]="k_Necessary",e[e.k_Expose=2]="k_Expose",e[e.k_Skip=3]="k_Skip"}(r||(r={})),function(e){e[e.k_Ok=0]="k_Ok",e[e.k_Error=1]="k_Error"}(i||(i={})),function(e){e[e.k_LR0=0]="k_LR0",e[e.k_LR1=1]="k_LR1",e[e.k_LALR=2]="k_LALR"}(s||(s={})),function(e){e[e.k_Optimize=8]="k_Optimize",e[e.k_DeveloperMode=16]="k_DeveloperMode"}(o||(o={})),function(e){e[e.k_ForceAppendAll=1]="k_ForceAppendAll",e[e.k_AllowExposeMode=2]="k_AllowExposeMode",e[e.k_AllowAddMode=4]="k_AllowAddMode",e[e.k_AllowSkipMode=8]="k_AllowSkipMode",e[e.k_Default=14]="k_Default",e[e.k_Debug=16]="k_Debug"}(a||(a={})),function(e){e[e.k_NumericLiteral=1]="k_NumericLiteral",e[e.k_SinglelineCommentLiteral=2]="k_SinglelineCommentLiteral",e[e.k_MultilineCommentLiteral=3]="k_MultilineCommentLiteral",e[e.k_StringLiteral=4]="k_StringLiteral",e[e.k_PunctuatorLiteral=5]="k_PunctuatorLiteral",e[e.k_WhitespaceLiteral=6]="k_WhitespaceLiteral",e[e.k_EscapeSequence=7]="k_EscapeSequence",e[e.k_NewlineLiteral=8]="k_NewlineLiteral",e[e.k_IdentifierLiteral=9]="k_IdentifierLiteral",e[e.k_KeywordLiteral=10]="k_KeywordLiteral",e[e.K_MacroLiteral=11]="K_MacroLiteral",e[e.k_Unknown=12]="k_Unknown",e[e.k_End=13]="k_End"}(l||(l={})),function(e){e[e.k_Error=100]="k_Error",e[e.k_Shift=101]="k_Shift",e[e.k_Reduce=102]="k_Reduce",e[e.k_Success=103]="k_Success",e[e.k_Ok=104]="k_Ok"}(c||(c={}))},j3Uf:(e,t,n)=>{"use strict";var r;n.d(t,{t:()=>r}),function(e){e[e.k_Auto=0]="k_Auto",e[e.k_Manual=1]="k_Manual"}(r||(r={}))},sesj:(e,t,n)=>{"use strict";n.d(t,{f:()=>u,h:()=>h});var r,i=n("cOQ3"),s=n("Y0AG"),o=n("yMDx"),a=n("5ZRz"),l=n("0mZ+");!function(e){e[e.UnknownToken=2101]="UnknownToken",e[e.InvalidToken=2102]="InvalidToken"}(r||(r={}));class c extends l.g{constructor(){super("Lexer Diagnostics","L")}resolveFilename(e,t,n){return n.file}resolveRange(e,t,n){return n.token.loc}diagnosticMessages(){return{[r.UnknownToken]:"Unknown token: {token.value}.",[r.InvalidToken]:"Invalid token: {token.value}."}}}class u{constructor(){this.keywords={},this.punctuators={},this.punctuatorsFirstSymbols={}}addPunctuator(e,t=u.getPunctuatorName(e)){return this.punctuators[e]=t,this.punctuatorsFirstSymbols[e[0]]=!0,t}addKeyword(e,t){return this.keywords[e]=t,t}getTerminalValueByName(e){let t="";for(t in this.punctuators)if(this.punctuators[t]===e)return t;for(t in this.keywords)if(this.keywords[t]===e)return t;return e}isLineTerminator(e){return"\n"===e||"\r"===e||"\u2028"===e||"\u2029"===e}isKeyword(e){return!!this.keywords[e]}isPunctuator(e){return!!this.punctuators[e]}isNumberStart(e,t){return e>="0"&&e<="9"||"."===e&&t>="0"&&t<="9"}isCommentStart(e,t){return"/"===e&&("/"===t||"*"===t)}isStringStart(e){return'"'===e||"'"===e}isPunctuatorStart(e){return!!this.punctuatorsFirstSymbols[e]}isWhiteSpaceStart(e){return" "===e||"\t"===e}isNewlineStart(e){return"\n"===e||"\r"===e}isEscapeSequenceStart(e){return"\\"===e}isIdentifierStart(e){return"_"===e||"$"===e||e>="a"&&e<="z"||e>="A"&&e<="Z"}static getPunctuatorName(e){return"T_PUNCTUATOR_"+e.charCodeAt(0)}}class h{constructor({engine:e=new u,knownTypes:t=new Set,skipComments:n=!0,allowLineTerminators:r=!1}={}){this.diagnostics=new c,this.knownTypes=t,this.engine=e,this.config={skipComments:n,allowLineTerminators:r}}getPosition(){return this.pos()}setPosition(e){(0,i.hu)(this.document.uri===e.file),this.index=e.offset,this.lineNumber=e.line,this.columnNumber=e.column}setTextDocument(e){return this.columnNumber=0,this.lineNumber=0,this.index=0,this.document=e,this}getDiagnosticReport(){return this.diagnostics.resolve()}getNextToken(){const e=this.scanToken();return a.cv(e.loc,this.document.offset),e}getNextLine(){const e=this.scanThisLine();return a.cv(e.loc,this.document.offset),e}scanToken(){if(!this.currentChar()){const e=this.pos();return{index:this.index,name:o.FI,value:o.FI,loc:{start:e,end:{...e}}}}switch(this.identityTokenType()){case s.n3.k_NumericLiteral:return this.scanNumber();case s.n3.k_SinglelineCommentLiteral:case s.n3.k_MultilineCommentLiteral:return this.config.skipComments?(this.scanComment(),this.scanToken()):this.scanComment();case s.n3.k_StringLiteral:return this.scanString();case s.n3.k_PunctuatorLiteral:return this.scanPunctuator();case s.n3.k_IdentifierLiteral:return this.scanIdentifier();case s.n3.k_EscapeSequence:return this.scanEscapeSequence();case s.n3.k_NewlineLiteral:return this.config.allowLineTerminators?this.scanLineTerminators():(this.scanLineTerminators(),this.scanToken());case s.n3.k_WhitespaceLiteral:return this.scanWhiteSpace(),this.scanToken();case s.n3.K_MacroLiteral:return this.scanMacro();default:return this.scanInvalid()}}scanThisLine(){let e=this.pos(),t="",n=this.currentChar();for(;n;){if("\\"===n){let e=this.readNextChar();switch("\r"===e&&(e=this.readNextChar()),e){case"\n":n=this.readNextChar(),this.lineNumber++,this.columnNumber=0,t+="\\\n";continue;case"n":n="\n";break;case"t":n="\t";break;default:(0,i.hu)(!1,"unsupported character sequence found")}}else if("\n"===n)break;t+=n,n=this.readNextChar()}return{index:this.index,name:o.we,value:t,loc:{start:e,end:this.pos()}}}pos(e=0){return{file:this.document.uri,line:this.lineNumber,column:this.columnNumber+e,offset:this.index+e}}emitError(e,t){this.diagnostics.error(e,{file:`${this.document.uri}`,token:t})}identityTokenType(){return this.isIdentifierStart()?s.n3.k_IdentifierLiteral:this.isWhiteSpaceStart()?s.n3.k_WhitespaceLiteral:this.isNewlineStart()?s.n3.k_NewlineLiteral:this.isEscapeSequenceStart()?s.n3.k_EscapeSequence:this.isStringStart()?s.n3.k_StringLiteral:this.isCommentStart()?s.n3.k_SinglelineCommentLiteral:this.isNumberStart()?s.n3.k_NumericLiteral:this.isPunctuatorStart()?s.n3.k_PunctuatorLiteral:this.isMacroStart()?s.n3.K_MacroLiteral:s.n3.k_Unknown}isNumberStart(){return this.engine.isNumberStart(this.currentChar(),this.nextChar())}isCommentStart(){return this.engine.isCommentStart(this.currentChar(),this.nextChar())}isStringStart(){return this.engine.isStringStart(this.currentChar())}isPunctuatorStart(){return this.engine.isPunctuatorStart(this.currentChar())}isWhiteSpaceStart(){return this.engine.isWhiteSpaceStart(this.currentChar())}isNewlineStart(){return this.engine.isNewlineStart(this.currentChar())}isEscapeSequenceStart(){return this.engine.isEscapeSequenceStart(this.currentChar())}isMacroStart(){return"#"===this.currentChar()}isIdentifierStart(){return this.engine.isIdentifierStart(this.currentChar())}nextChar(){return this.document.source[this.index+1]}currentChar(){return this.document.source[this.index]}readNextChar(){return this.index++,this.columnNumber++,this.document.source[this.index]}scanEscapeSequence(){let e=this.readNextChar();return"\r"===e&&(e=this.readNextChar()),(0,i.hu)("\n"===e,"unsupported escape sequence found"),this.lineNumber++,this.columnNumber=0,this.readNextChar(),this.scanToken()}scanString(){let e=this.currentChar(),t=e,n="",i=e,a=!1,l=this.pos();for(;n=this.readNextChar(),n;){if(t+=n,n===e&&"\\"!==i){a=!0,this.readNextChar();break}i=n}if(a)return{index:this.index,name:o.Qs,value:t,loc:{start:l,end:this.pos()}};{n||(n=o.sd),t+=n;const e={index:this.index,type:s.n3.k_StringLiteral,value:t,loc:{start:l,end:this.pos()}};return this.emitError(r.InvalidToken,e),h.makeUnknownToken(e)}}scanInvalid(){const e=this.pos();let t="";for(;this.identityTokenType()===s.n3.k_Unknown&&this.index<this.document.source.length;)t+=this.currentChar(),this.readNextChar();const n={index:this.index,name:o.we,value:t,loc:{start:e,end:this.pos()}};return this.emitError(r.UnknownToken,n),n}scanPunctuator(){let e,t=this.currentChar(),n=this.pos();for(;e=this.readNextChar(),e;)if(t+=e,!this.engine.isPunctuator(t)){t=t.slice(0,t.length-1);break}return{index:this.index,name:this.engine.punctuators[t],value:t,loc:{start:n,end:this.pos()}}}scanNumber(){let e=this.currentChar(),t="",n=!1,i=!1,a=!1,l=e,c=!1,u=!1,d=!1,p=this.pos();for("."===e&&(t+=0,n=!0),t+=e;;){if(e=this.readNextChar(),"."===e){if(n||d||a||i)break;n=!0}else if("e"===e){if(u||d||a)break;u=!0}else if("u"===e||"U"===e){if(n||d)break;d=!0}else if("l"===e||"L"===e){if(n||a)break;a=!0}else if("x"===e){if(d||a||u||n)break;i=!0}else if("+"!==e&&"-"!==e||"e"!==l){if("f"===e&&(n||u)){if(n=!0,e=this.readNextChar(),e>="a"&&e<="z"||e>="A"&&e<="Z")break;c=!0;break}if(e>="a"&&e<="z"||e>="A"&&e<="Z"){if(!i)break}else if(!(e>="0"&&e<="9")||!e||d||a){(u&&"+"!==l&&"-"!==l&&"e"!==l||!u)&&(c=!0);break}}else;t+=e,l=e}if(c){let e=n?o.oV:o.I4;return{index:this.index,name:e,value:t,loc:{start:p,end:this.pos()}}}{e||(e=o.sd),t+=e;const n={index:this.index,type:s.n3.k_NumericLiteral,value:t,loc:{start:p,end:this.pos()}};return this.emitError(r.InvalidToken,n),h.makeUnknownToken(n)}}scanMacro(){const e=this.pos(),t=this.nextChar();if(t>="a"&&t<="z"||t>="A"&&t<="Z"){this.readNextChar();const t=this.scanIdentifier();return{index:this.index,name:o.HY,value:`#${t.value}`,loc:{start:e,end:this.pos()}}}return"#"===t?(this.readNextChar(),this.readNextChar(),{index:this.index,name:o.ex,value:"##",loc:{start:e,end:this.pos()}}):((0,i.hu)(!1,`unsupported macro found: ${this.document.source.substr(this.index,20)}...`),this.readNextChar(),{index:this.index,name:o.we,value:"#",loc:{start:e,end:this.pos()}})}scanIdentifier(){let e=this.currentChar(),t=e,n=this.pos(),i=!1;for(;;){if(e=this.readNextChar(),!e){i=!0;break}if(!("_"===e||"$"===e||e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9")){i=!0;break}t+=e}if(i){if(this.engine.isKeyword(t))return{index:this.index,name:this.engine.keywords[t],value:t,loc:{start:n,end:this.pos()}};{let e=this.knownTypes.has(t)?o.Xo:o.rl;return{index:this.index,name:e,value:t,loc:{start:n,end:this.pos()}}}}{e||(e=o.sd),t+=e;const i={index:this.index,type:s.n3.k_IdentifierLiteral,value:t,loc:{start:n,end:this.pos()}};return this.emitError(r.InvalidToken,i),h.makeUnknownToken(i)}}scanLineTerminators(){let e=this.currentChar(),t="",n=this.pos();for(;e&&this.engine.isLineTerminator(e);)t+=e,"\r"===e&&"\n"===this.nextChar()&&this.lineNumber--,this.lineNumber++,e=this.readNextChar(),this.columnNumber=0;let r=o.Gt;return{index:this.index,name:r,value:t,loc:{start:n,end:this.pos()}}}scanWhiteSpace(){let e=this.currentChar();for(;e;){if("\t"===e)this.columnNumber+=0;else if(" "!==e)break;e=this.readNextChar()}return!0}scanComment(){let e=this.currentChar(),t=this.readNextChar(),n=this.pos();if(e+=t,"/"===t){for(;t=this.readNextChar(),t;){if(this.engine.isLineTerminator(t)){"\r"===t&&"\n"===this.nextChar()&&this.lineNumber--,this.lineNumber++,this.readNextChar(),this.columnNumber=0;break}e+=t}return{index:this.index,type:s.n3.k_SinglelineCommentLiteral,value:e,loc:{start:n,end:this.pos()}}}{let n=t,i=!1,a=this.pos();for(;t=this.readNextChar(),t;){if(e+=t,"/"===t&&"*"===n){i=!0,this.readNextChar();break}this.engine.isLineTerminator(t)&&("\r"===t&&"\n"===this.nextChar()&&this.lineNumber--,this.lineNumber++,this.columnNumber=-1),n=t}if(i)return{index:this.index,type:s.n3.k_MultilineCommentLiteral,value:e,loc:{start:a,end:this.pos()}};{t||(t=o.sd),e+=t;const n={index:this.index,type:s.n3.k_MultilineCommentLiteral,value:e,loc:{start:a,end:this.pos()}};return this.emitError(r.InvalidToken,n),h.makeUnknownToken(n)}}}static makeUnknownToken(e){return{...e,type:void 0,name:o.we,loc:{start:{...e.loc.start},end:{...e.loc.end}}}}}},"4ELN":(e,t,n)=>{"use strict";n.d(t,{Av:()=>E,jY:()=>M});var r=n("cOQ3"),i=n("BCBV"),s=n("E5ji"),o=n("DIkA"),a=n("Y0AG"),l=n("5ZRz"),c=n("CWQE"),u=n("0mZ+"),h=n("yMDx");class d{constructor(e){this.tokens=e||[],this.pos=0}get document(){return(0,r.hu)(!1),null}get config(){return(0,r.hu)(!1),null}setTextDocument(e){return(0,r.hu)(!1),this}getNextLine(){return(0,r.hu)(!1),null}getPosition(){return this.pos}setPosition(e){this.pos=e}getDiagnosticReport(){return(0,r.hu)(!1),null}getNextToken(){return this.tokens[this.pos++]||d.END_TOKEN}}d.END_TOKEN={index:-1,name:h.FI,value:h.FI,loc:null};var p=n("sesj");class f{constructor(){this.stack=[{root:null,macros:{}}]}get depth(){return this.stack.length}get root(){return this.stack[this.depth-1].root}push(e){this.stack.push({root:e,macros:{}})}pop(){this.stack.pop()}set(e){this.stack[this.depth-1].macros[e.name]=e}unset(e){delete this.stack[this.depth-1].macros[e]}get(e){let t=this.depth-1;for(;;){const{macros:n,root:r}=this.stack[t];if(r?.name===e&&!r.bFunction)return null;const i=n[e];if(i)return i;if(0==t)break;t=0}return null}has(e){return null!==this.get(e)}forEach(e){let t=new Set;for(let n=this.depth-1;n>=0;--n){const r=this.stack[n].macros;for(const n of Object.values(r))t.has(n.name)||(t.add(n.name),e(n))}}*[Symbol.iterator](){let e=new Set;for(let t=this.depth-1;t>=0;--t){const n=this.stack[t].macros;for(const t of Object.values(n))e.has(t.name)||(e.add(t.name),yield t)}}}let m=!1;var g,v,y,b;!function(e){e[e.k_AllowElse=0]="k_AllowElse",e[e.k_ForbidElse=1]="k_ForbidElse"}(g||(g={})),function(e){e[e.SyntaxUnknownError=7051]="SyntaxUnknownError",e[e.GeneralCouldNotReadFile=7200]="GeneralCouldNotReadFile",e[e.MacroUnknownError=7201]="MacroUnknownError"}(v||(v={})),function(e){e[e.MacroUnknownWarning=3e3]="MacroUnknownWarning"}(y||(y={}));class _ extends u.g{constructor(){super("Preprocessor diagnostics","M")}resolveFilename(e,t,n){return n.file}resolveRange(e,t,n){if(e===o.D.k_Warning&&t===y.MacroUnknownWarning)return n.loc;switch(t){case v.SyntaxUnknownError:return n.token.loc;case v.GeneralCouldNotReadFile:case v.MacroUnknownError:return n.loc}return null}diagnosticMessages(){return{[v.SyntaxUnknownError]:"Syntax error during parsing. Token: '{token.value}'\nLine: {token.loc.start.line}. Column: {token.loc.start.column}.",[v.GeneralCouldNotReadFile]:"Could not read file '{target}'."}}resolveDescription(e,t,n){let i=this.diagnosticMessages();if((0,r.$V)(i[e]))return super.resolveDescription(e,t,n);let{file:s,loc:a,...l}=n;return t==o.D.k_Warning?`${y[e]}: ${JSON.stringify(l)}`:`${v[e]}: ${JSON.stringify(l)}`}}function x(e,t){return(0,r.hu)((0,r.HD)(e),e),{index:-1,type:a.n3.k_Unknown,name:h.HY,value:e,loc:t}}function w(e){return{op:(...t)=>x(String(e(...t)),l.We(...t.map((e=>e.loc)))),length:e.length}}function S(e,t=(()=>NaN)){const n=e.value;return"true"===String(n)?1:"false"===String(n)?0:String(Number(n))===String(n)?Number(n):t(e)}class T{constructor(){this.states=[]}is(e){return this.states[this.states.length-1]===e}isEmpty(){return 0===this.states.length}push(e){this.states.push(e)}pop(){return this.states.pop()}replace(e){this.pop(),this.push(e)}}!function(e){e[e.k_None=0]="k_None",e[e.k_Macro=1]="k_Macro",e[e.k_Include=2]="k_Include"}(b||(b={}));class E{constructor(e,{knownTypes:t=new Set,macros:n=new f,diag:r=new _,skipComments:i=!0,includeResolver:s=null,defines:o=null}={}){this.macros=n,o&&o.forEach((({name:e})=>this.macros.set({name:e,tokens:[],bFunction:!1,params:null,bRegionExpr:!1}))),this.macroState=new T,this.includeMap=new Map,this.unreachableCodeList=[],this.unresolvedMacros=[],this.knownTypes=t,this.lexerEngine=e,this.diagnostics=r,this.includeResolver=s,this.lexerReport=null,this.lexerOptions={skipComments:i},this.stack=[],this.includes=[]}get lexer(){return this.stack[this.stack.length-1].lexer}get tokens(){return this.stack[this.stack.length-1].tokens}get uri(){return this.document.uri}macroLocation(){const e=this.includes[this.includes.length-1];return e<this.stack.length-1?this.stack[e+1].loc:null}currentMacro(){return this.macros.root}getDiagnosticReport(){return u.g.mergeReports([this.lexerReport,this.diagnostics.resolve()])}readLine(){return this.lexer.getNextLine()}setTextDocument(e){return this.document=e,this.pushDocument(this.documentToLexer(e),null,b.k_Include),this}pushDocument(e,t,n,i=null){n&b.k_Macro&&((0,r.hu)((0,r.$V)(i)),this.macros.push(i)),n&b.k_Include&&(this.includes.push(this.stack.length),this.includeMap.set(`${e.document.uri}`,t)),this.stack.push({lexer:e,tokens:[],flags:n,loc:t})}pop(){const{flags:e,lexer:t}=this.stack.pop(),n=t.diagnostics;n&&!n.isEmpty()&&(this.lexerReport=u.g.mergeReports([this.lexerReport,t.getDiagnosticReport()])),e&b.k_Macro&&this.macros.pop(),e&b.k_Include&&this.includes.pop()}pushToken(...e){this.tokens.push(...e)}popToken(){return this.tokens.shift()||null}async readToken(e=!0,t=!0){const n=this.popToken()||this.lexer.getNextToken();switch(n.name){case h.HY:if(e)return this.readMacro(n);break;case h.FI:if(t){if(this.stack.length>1)return this.pop(),this.readToken(e);this.macroState.isEmpty()||this.emitMacroError("'endif' not found :/",n.loc)}break;default:if(e)return this.examMacro(n)}return n}async readMacro(e){switch(e.value){case"#define":return this.processDefineMacro(e);case"#ifdef":return this.processIfdefMacro(e);case"#ifndef":return this.processIfndefMacro(e);case"#endif":return this.processEndifMacro(e);case"#else":return this.processElseMacro(e);case"#elif":return this.processElifMacro(e);case"#if":return this.processIfMacro(e);case"#error":return this.processErrorMacro(e);case"#include":return this.processIncludeMacro(e);case"#undef":return this.processUndefMacro(e);case"#pragma":return this.readLine(),this.readToken()}return this.emitMacroWarning(`unsupported macro type found: ${e.value}`,e.loc),this.readToken()}async processUndefMacro(e){const t=await this.readToken(!1);this.readLine();return t.name!==h.rl?((0,r.hu)(t.name===h.rl),this.readToken()):(this.macros.has(t.value)?this.macros.unset(t.value):this.emitMacroWarning(`target macro not found: ${t.value}`,t.loc),this.readToken())}async processDefineMacro(e){const t=await this.readToken(!1),n=this.readLine();if(t.name!==h.rl)return(0,r.hu)(t.name===h.rl),this.readToken();this.macros.has(t.value)&&this.emitMacroWarning(`macro redefinition found: ${t.value}`,t.loc);const i=await this.processMacro(t,n);if(i){const e=this.unresolvedMacros.find((e=>e.name===t.value));e&&(i.bRegionExpr=e.bRegionExpr,this.unresolvedMacros=this.unresolvedMacros.filter((e=>e.name!==t.value))),this.macros.set(i)}return this.readToken()}async processMacro(e,t){let n=!1,r=null,i=[];if(!/^\s*$/.test(t.value)){const s=await this.tokenToLexer(t);let o=s.getNextToken();const a="("===o.value,l=o.loc.start.line===e.loc.end.line,c=o.loc.start.column===e.loc.end.column;if(a&&l&&c){r=[],n=!0;let e=!1;for(o=s.getNextToken();o.name!==h.FI&&")"!==o.value;){if(e){if(","!==o.value)return this.emitMacroError("invalid macro, comma expected",o.loc),null}else{if(o.name!==h.rl)return this.emitMacroError("invalid token found. only identifiers allowed as param names",o.loc),null;r.push(o.value)}e=!e,o=s.getNextToken()}if(o.name===h.FI)return this.emitMacroError("comma mismatch",o.loc),null;o=s.getNextToken()}for(;o.name!==h.FI;)i.push(o),o=s.getNextToken()}return i.forEach((e=>{e.synthetic=!0})),{name:e.value,tokens:i,bFunction:n,params:r,bRegionExpr:!1}}async processIfdefMacro(e){return this.resolveDefMacro(await this.lineToLexer(this.readLine()))?(this.macroState.push(g.k_ForbidElse),this.readToken()):(this.macroState.push(g.k_AllowElse),this.skipUnreachableCode(e))}async processIfndefMacro(e){return this.resolveDefMacro(await this.lineToLexer(this.readLine()))?(this.macroState.push(g.k_AllowElse),this.skipUnreachableCode(e)):(this.macroState.push(g.k_ForbidElse),this.readToken())}async processIfMacro(e){return this.resolveMacroInner(await this.lineToLexer(this.readLine()))?(this.macroState.push(g.k_ForbidElse),this.readToken()):(this.macroState.push(g.k_AllowElse),this.skipUnreachableCode(e))}async processElifMacro(e){return this.macroState.is(g.k_AllowElse)||this.macroState.is(g.k_ForbidElse)?this.macroState.is(g.k_AllowElse)&&this.resolveMacroInner(await this.lineToLexer(this.readLine()))?(this.macroState.replace(g.k_ForbidElse),this.readToken()):this.skipUnreachableCode(e):(this.emitMacroError("inappropriate control instruction found",e.loc),this.readToken())}async processElseMacro(e){return this.macroState.is(g.k_AllowElse)||this.macroState.is(g.k_ForbidElse)?this.macroState.is(g.k_AllowElse)?(this.macroState.replace(g.k_ForbidElse),this.readToken()):this.skipUnreachableCode(e):(this.emitMacroError("inappropriate control instruction found",e.loc),this.readToken())}async processEndifMacro(e){return this.macroState.is(g.k_AllowElse)||this.macroState.is(g.k_ForbidElse)?(this.macroState.pop(),this.readToken()):(this.emitMacroError("inappropriate control instruction found",e.loc),this.readToken())}resolveDefMacro(e){const t=this.macros,n=e=>S(e,(({value:e})=>{const n=t.get(e);return n?(n.bRegionExpr=!0,1):(this.addUnresolvedMacro(e),0)})),r=w,i=r(n),s={"&&":r(((e,t)=>n(e)&&n(t))),"||":r(((e,t)=>n(e)||n(t))),"!":r((e=>!n(e))),asValue:i};return this.evaluateMacroExpr(e,{"(":1,")":1,"&&":2,"||":3,"!":8},s,{})}resolveMacroInner(e){const t=this.macros,n=e=>this.resolveMacro(e),i=w,s=i(n),o={"(":1,")":1,"||":2,"&&":3,"<":4,">":4,"<=":4,">=":4,"==":5,"!=":5,"+":6,"-":6,"*":7,"/":7,"!":8,defined:9},c={"&&":i(((e,t)=>n(e)&&n(t))),"||":i(((e,t)=>n(e)||n(t))),"!":i((e=>!n(e))),"+":i(((e,t)=>n(e)+n(t))),"-":i(((e,t)=>n(e)-n(t))),"*":i(((e,t)=>n(e)*n(t))),"/":i(((e,t)=>n(e)/n(t))),"<":i(((e,t)=>n(e)<n(t))),">":i(((e,t)=>n(e)>n(t))),"<=":i(((e,t)=>n(e)<=n(t))),">=":i(((e,t)=>n(e)>=n(t))),"==":i(((e,t)=>n(e)===n(t))),"!=":i(((e,t)=>n(e)!==n(t))),asValue:s},u={defined:i((e=>{const n=t.get(e.value);return n?(n.bRegionExpr=!0,1):(this.addUnresolvedMacro(e.value),0)}))};return t.forEach((e=>{e.bFunction&&(o[e.name]=10,u[e.name]={op:(...n)=>{t.push(e),(0,r.hu)(e.params.length===n.length);const i=e.params;for(let e=0;e<i.length;++e)t.set({name:i[e],tokens:[n[e]],bFunction:!1,params:null,bRegionExpr:!1});const s=String(this.resolveMacroInner(this.macroToLexer(e)));t.pop();const o=l.We(...n.map((e=>e.loc)));return{index:-1,type:a.n3.k_NumericLiteral,name:"T_UINT",value:s,loc:o}},length:e.params.length})})),this.evaluateMacroExpr(e,o,c,u)}resolveMacro(e){return S(e,(t=>{const n=this.macros.get(t.value);if(!(0,r.Ft)(n)&&!(0,r.Ft)(n.tokens)){const e=this.resolveMacroInner(this.macroToLexer(n));return e}return this.emitMacroWarning(`cannot resolve macro '${t.value}'`,e.loc),this.addUnresolvedMacro(t.value),NaN}))}addUnresolvedMacro(e){this.unresolvedMacros.find((t=>t.name===e))||this.unresolvedMacros.push({bFunction:!1,name:e,params:null,tokens:null,bRegionExpr:!0})}evaluateMacroExpr(e,t,n,i={}){const s=[],o=[];let a=e.getNextToken();e:for(;;){switch(a.name){case"T_TYPE_ID":case"T_NON_TYPE_ID":if(i[a.value]){o.push(a);break}s.push(a);break;case"T_UINT":case"T_KW_TRUE":case"T_KW_FALSE":s.push(a);break;case"T_PUNCTUATOR_40":o.push(a);break;case"T_PUNCTUATOR_41":{let e=o.pop();for(;"("!==e.value;)s.push(e),e=o.pop()}break;case"T_PUNCTUATOR_44":break;case h.FI:break e;default:if(t[a.value]){if(o.length){const e=a.value,n=o[o.length-1].value;(0,r.hu)(t[n]&&t[e],n,e),t[n]>=t[e]&&s.push(o.pop())}o.push(a);break}return this.emitMacroError(`unsupported macro operator found: '${a.value}'`,a.loc),NaN}a=e.getNextToken()}for(;o.length;)s.push(o.pop());s.map((e=>e.value)).join(", ");const l=[];return s.forEach((e=>{if(t=e,(0,r.Xq)(n[t.value])){const{op:t,length:r}=(e=>n[e.value])(e);l.push(t(...l.splice(-r)))}else{var t;if((e=>(0,r.Xq)(i[e.value]))(e)){const{op:t,length:n}=(e=>i[e.value])(e);l.push(t(...l.splice(-n)))}else l.push(e)}})),1===s.length&&(l[0]=n.asValue.op(l[0])),S(l[0])}async processErrorMacro(e){const t=this.readLine(),n=t.value.trim();return this.emitMacroError(`erroneous macro reached: "${n}"`,l.We(e.loc,t.loc)),this.readToken()}async skipUnreachableCode(e){let t=await this.readToken(!1),n=0;for(;t.name!==h.FI;){if(t.name===h.HY)switch(t.value){case"#if":case"#ifdef":case"#ifndef":n++,this.readLine();break;case"#elif":case"#else":if(0!==n){this.readLine();break}case"#endif":if(n>0){n--,this.readLine();break}return this.addUnreachableCode(e,t),this.readMacro(t);case"#error":this.readLine()}t=await this.readToken(!1)}return this.emitMacroError("'endif' non found :/",t.loc),t}addUnreachableCode(e,t){const n={start:{...e.loc.end,column:0},end:{...t.loc.end,column:0}};n.start.line++,n.end.line-n.start.line>0&&this.unreachableCodeList.push(n)}async processIncludeMacro(e){const t=this.readLine(),n=t.value.trim().slice(1,-1),r=c.DB(n,`${e.loc.start.file}`),i=l.We(e.loc,t.loc);this.includeMap.has(r);const o=await this.includeResolver(r);if(!o)return this.emitFileNotFound(r,i),this.readToken();const{uri:a,source:u}=o,h=await(0,s.X)(a,u);return this.pushDocument(this.documentToLexer(h),i,b.k_Include),this.readToken()}emitMacroWarning(e,t){this.diagnostics.warning(y.MacroUnknownWarning,{...t.start,loc:t,msg:e})}emitMacroError(e,t){this.diagnostics.error(v.MacroUnknownError,{...t.start,loc:t,msg:e})}emitFileNotFound(e,t){this.diagnostics.error(v.GeneralCouldNotReadFile,{...t.start,loc:t,target:e})}async applyMacro(e){const t=this.macros,n=t.get(e.value);if(!n)return null;if(n.bFunction){const i=this.lexer,s=this.lexer.getPosition(),o=await this.readToken();if("("!==o.value)return this.emitMacroWarning(`for macro '${n.name} function call signature is expected'`,e.loc),(0,r.hu)(i===this.lexer,"something went wrong"),this.lexer.setPosition(s),null;let a=[o],l=[],c=await this.readToken(),u=0,d=1,p=1;for(a.push(c);c.name!==h.FI&&(")"!==c.value||0!=u);){switch(c.value){case"(":u++;break;case")":u--;break;case",":0===u&&((0,r.hu)(p-d>0),p-d>0&&l.push(d,p),d=p+1)}p++,c=await this.readToken(),a.push(c)}p>d&&l.push(d,p);const f=l.length/2;if(f!==n.params.length)return this.emitMacroError(`macro '${n.name}' arguments mismatch, expected count is ${n.params.length} but recived ${f}`,e.loc),(0,r.hu)(i===this.lexer,"something went wrong"),this.lexer.setPosition(s),null;{const{loc:{start:t}}=e,{loc:{end:r}}=c;this.pushDocument(this.macroToLexer(n),{start:t,end:r},b.k_Macro,n)}const g=n.params;for(let e=0;e<g.length;++e){const n=2*e,r=l[n],i=l[n+1],s=(a[r].loc.start,a[i-1].loc.end,a.slice(r,i));m,t.set({name:g[e],tokens:s,bFunction:!1,params:null,bRegionExpr:!1})}}else this.pushDocument(this.macroToLexer(n),e.loc,b.k_Macro,n);return n}async preprocessToString(e,t){const{knownTypes:n,macros:r,diagnostics:i}=this,o=new E(this.lexerEngine,{knownTypes:n,macros:r,diag:i,includeResolver:t});o.setTextDocument(await(0,s.X)("://macro",e));let a=await o.readToken(),l=null;for(;a.name!==h.FI;)l=(l?l+" ":"")+a.value,a=await o.readToken();return l}async applyConcatMacro(e){(0,r.hu)(!this.macros.get(e.value)||!this.macros.get(e.value).bFunction);const t=await this.readToken(!1,!1);(0,r.hu)(t.name!==h.FI);const n=await this.preprocessToString(e.value,this.includeResolver),i=await this.preprocessToString(t.value,this.includeResolver),o=`${n}${i}`;const a={start:e.loc.start,end:t.loc.end},l=await this.readToken(!1,!1);if(l.name===h.ex)return this.applyConcatMacro(x(o,a));this.pushToken(l);const c=e.loc.start,u=await(0,s.X)(c.file,o,c);return this.pushDocument(this.documentToLexer(u),a,b.k_None),this.readToken()}async examMacro(e){if(this.stack[this.stack.length-1].flags&b.k_Macro){const t=await this.readToken(!1,!1);if(t.name===h.ex)return this.applyConcatMacro(e);this.pushToken(t)}if(e.name===h.rl||e.name===h.Xo){if(await this.applyMacro(e))return this.readToken()}return e}documentToLexer(e){const{lexerEngine:t,knownTypes:n,lexerOptions:{skipComments:r}}=this,i=new p.h({engine:t,knownTypes:n,skipComments:r});return i.setTextDocument(e),i}tokensToLexer(e){return new d(e)}macroToLexer(e){return this.tokensToLexer(e.tokens)}async tokenToLexer(e){const t=new p.h({engine:this.lexerEngine,knownTypes:this.knownTypes}),n=e.loc.start.file,r=e.value,i=e.loc.start;return t.setTextDocument(await(0,s.X)(n,r,i)),t}async lineToTokens(e){const t=await this.tokenToLexer(e);let n=[],r=t.getNextToken();for(;r.name!==h.FI;)n.push(r),r=t.getNextToken();return n}async lineToLexer(e){return this.tokensToLexer(await this.lineToTokens(e))}}async function M(e,t={}){const n=(0,i.DU)(),{skipComments:r=!0,includeResolver:o,defines:a}=t,l=new E(n.lexerEngine,{skipComments:r,includeResolver:o,defines:a});l.setTextDocument(e);const c=(e,t)=>Array(Math.min(t-e,4)).fill("\n").join("");let u="",d=await l.readToken();for(;d.name!==h.FI;){const e=!u||"\n"===u.substr(-1),t=l.macroLocation()||d.loc,n=l.currentMacro();e&&(u+=(p=t.start.column,Array(p).fill(" ").join(""))),u=`${u}${e?"":" "}${d.value}`;const r=await l.readToken(),i=l.macroLocation()||r.loc;t.end.file!==i.start.file?u+="\n\n":t.end.line<i.start.line?u+=c(t.end.line,i.start.line):d.loc.end.line<r.loc.start.line&&n===l.currentMacro()&&(u+=c(d.loc.end.line,r.loc.start.line)),d=r}var p;return(0,s.X)(e.uri,u)}},wKf3:(e,t,n)=>{"use strict";n.d(t,{_2:()=>l});var r=n("Y0AG"),i=n("sesj"),s=n("4ELN"),o=n("yMDx"),a=n("5ZRz");class l{async parse(e,t){const n=await async function(e,t){const n=new i.h({skipComments:!1}),a=await(0,s.jY)(e,{skipComments:!1,includeResolver:t});n.setTextDocument(a);let l,c=[];for(;(l=n.getNextToken()).value!==o.FI;)l.type===r.n3.k_MultilineCommentLiteral&&c.push(l);return c}(e,t);n.forEach((e=>{let t,n=e.value.slice(2,-2).split("\n").map((e=>e.replace(/^\s*\*{1,2}\s*|\s*$/g,""))),r=[],i=null,s=[],o=-1;for(;n.length;)o++,[t,n]=[n[0],n.slice(1)],t.match(/^\s*$/g)||(t.match(/^@[\w]+/g)?(i&&s.push({content:[i.content,...r.splice(0)].join(" "),line:i.line}),i={content:t,line:o}):r.push(t));i&&i.content&&s.push({content:[i.content,...r.splice(0)].join(" "),line:i.line}),this.beginComment(t);for(let t of s){const{line:n,content:r}=t,i=r.split(" "),s=i[0].trim().toLowerCase(),o=(0,a.BN)(e.loc);o.start.line+=n,o.start.column=3,o.end.line=o.start.line,o.end.column=o.start.column+i.join(" ").length,this.applyRule(s,i,o)}this.endComment()}))}beginComment(e){}applyRule(e,t,n){}endComment(){}}},yMDx:(e,t,n)=>{"use strict";n.d(t,{CC:()=>r,D3:()=>l,FI:()=>u,Gt:()=>w,HY:()=>S,I4:()=>b,PB:()=>p,Qs:()=>v,Xo:()=>_,ao:()=>o,ex:()=>T,jL:()=>f,jx:()=>a,oV:()=>y,pn:()=>c,qn:()=>d,qq:()=>m,r8:()=>i,rl:()=>x,sd:()=>g,ul:()=>h,we:()=>s});const r="END",i="EMPTY",s="UNKNOWN",o="S",a="##",l="#",c="ERROR",u="$",h="--LEXER--",d="--add",p="--skip",f="--expose",m="--F",g="EOF",v="T_STRING",y="T_FLOAT",b="T_UINT",_="T_TYPE_ID",x="T_NON_TYPE_ID",w="T_LINE_TERMINATOR",S="T_MACRO",T="T_MACRO_CONCAT"},"5ZRz":(e,t,n)=>{"use strict";n.d(t,{BN:()=>o,We:()=>l,cv:()=>c,xV:()=>a});var r=n("cOQ3");function i(e,t){return(0,r.hu)(e.file===t.file),{offset:Math.min(e.offset,t.offset),line:Math.min(e.line,t.line),column:Math.min(e.column,t.column),file:e.file}}function s(e,t){return(0,r.hu)(e.file===t.file),{offset:Math.max(e.offset,t.offset),line:Math.max(e.line,t.line),column:Math.max(e.column,t.column),file:e.file}}function o(e){return{start:{...e.start},end:{...e.end}}}function a(e,t){return t.start.file!==e.start.file||(t.start.line<e.start.line?e.start={...t.start}:t.start.line===e.start.line&&(e.start=i(t.start,e.start)),t.end.line>e.end.line?e.end={...t.end}:t.end.line===e.end.line&&(e.end=s(t.end,e.end))),e}function l(...e){const t=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,r=e[0].start.file;let o={offset:t,column:t,line:t,file:r},a={offset:n,column:n,line:n,file:r};return e.forEach((e=>o=i(o,e.start))),e.forEach((e=>a=s(a,e.end))),{start:o,end:a}}function c(e,t){if(t){const{start:n,end:r}=e;0===n.line&&(n.column+=t.column),0===r.line&&(r.column+=t.column),n.line+=t.line,r.line+=t.line}return e}},U50j:(e,t,n)=>{"use strict";n.d(t,{Fv:()=>s,Qc:()=>o,SD:()=>a});var r=n("cOQ3");class i{constructor(e){this._dirname=null,this._extension=null,this._filename=null,(0,r.Xq)(e)&&this.set(e)}get path(){return this.toString()}set path(e){this.set(e)}get dirname(){return this._dirname}set dirname(e){this._dirname=e}get filename(){return this._filename}set filename(e){this._filename=e}get ext(){return this._extension}set ext(e){this._extension=e}get basename(){return this._filename?this._filename+(this._extension?"."+this._extension:""):""}set basename(e){var t=e.lastIndexOf(".");t<0?(this._filename=e.substr(0),this._extension=null):(this._filename=e.substr(0,t),this._extension=e.substr(t+1))}set(e){if((0,r.HD)(e)){var t=e.replace("\\","/").split("/");this.basename=t.pop(),this._dirname=t.join("/")}else{if(!(e instanceof i)){if((0,r.Ft)(e))return null;throw new Error(`Unexpected data type was used: ${e}`)}this._dirname=e.dirname,this._filename=e.filename,this._extension=e.ext}}replaceExt(e){return this.ext=e,this}isAbsolute(){return!("/"!==this._dirname?.[0])}toString(){return(this._dirname?this._dirname+"/":"")+this.basename}}function s(e){var t=o(e),n=t.isAbsolute(),r=t.dirname,i=/[\\\/]$/.test(r);return(r=function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;)e.unshift("..");return e}(r.split(/[\\\/]+/).filter((function(e){return!!e})),!n).join("/"))&&i&&(r+="/"),t.dirname=(n?"/":"")+r,t.toString()}function o(e){return new i(e)}function a(e){return o(e).ext}},CWQE:(e,t,n)=>{"use strict";n.d(t,{DB:()=>a,Qc:()=>l,RN:()=>u,bZ:()=>c});var r=n("cOQ3"),i=n("U50j");class s{constructor(e){this._scheme=null,this._userinfo=null,this._host=null,this._port=0,this._path=null,this._query=null,this._fragment=null,e&&this.set(e)}get urn(){return(this._path?this._path:"")+(this._query?"?"+this._query:"")+(this._fragment?"#"+this._fragment:"")}get url(){return(this._scheme?this._scheme+"//":"")+this.authority}get authority(){return this._host?(this._userinfo?this._userinfo+"@":"")+this._host+(this._port?":"+this._port:""):""}get scheme(){return this._scheme}get protocol(){return this._scheme?this._scheme.substr(0,this._scheme.lastIndexOf(":")):this._scheme}get userInfo(){return this._userinfo}get host(){return this._host}set host(e){this._host=e}get port(){return this._port}set port(e){this._port=e}get path(){return this._path}set path(e){this._path=e}get query(){return this._query}set query(e){this._query=e}get fragment(){return this._fragment}set(e){if((0,r.HD)(e)){var t=s.uriExp.exec(e);return console.assert(null!==t,"Invalid URI format used.\nused uri: "+e),t?(this._scheme=t[1]||null,this._userinfo=t[2]||null,this._host=t[3]||null,this._port=parseInt(t[4])||null,this._path=t[5]||t[6]||null,this._query=t[7]||null,this._fragment=t[8]||null,this):null}return e instanceof s?this.set(e.toString()):(console.error("Unexpected data type was used."),null)}toString(){return this.url+this.urn}}function o(e){if(!(0,r.Ft)(e.path))if("filesystem:"===e.scheme){var t=l(e.path);t.path=i.Fv(t.path),e.path=t.toString()}else e.path=i.Fv(e.path);return e}function a(e,t=document.location.href){var n,s=l(t),a=l(e);return o(a),o(s),(0,r.Ft)(a.scheme)&&(0,r.Ft)(a.host)&&!i.Qc(a.path).isAbsolute()?(n=i.Qc(s.path).dirname,s.path=n?n+"/"+e:e,o(s).toString()):e}function l(e){return new s(String(e))}function c(e){return`file:///${String(e).replaceAll("\\","/")}`}function u(e){return l(e).path?.substring(1)||""}s.uriExp=new RegExp("^([a-z0-9+.-]+:)?(?:\\/\\/(?:((?:[a-z0-9-._~!$&'()*+,;=:]|%[0-9A-F]{2})*)@)?((?:[a-z0-9-._~!$&'()*+,;=]|%[0-9A-F]{2})*)(?::(\\d*))?(\\/(?:[a-z0-9-._~!$&'()*+,;=:@/]|%[0-9A-F]{2})*)?|(\\/?(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})*(?:[a-z0-9-._~!$&'()*+,;=:@/]|%[0-9A-F]{2})*)?)(?:\\?((?:[a-z0-9-._~!$&'()*+,;=:/?@]|%[0-9A-F]{2})*))?(?:#((?:[a-z0-9-._~!$&'()*+,;=:/?@]|%[0-9A-F]{2})*))?$","i")},"0mZ+":(e,t,n)=>{"use strict";n.d(t,{V:()=>l,g:()=>c});var r=n("cOQ3"),i=n("DIkA");function s(e){return`${e.line},${e.column}`}function o(e,t){let n=t.split(".");return n.length>1?o(e[n[0]],n.splice(1).join(".")):e[n[0]]}function a(e,t){return e.replace(/{([a-zA-Z.]+)}/g,((e,n)=>o(t,n)))}class l extends Error{constructor(e,t){super(t.content),Error.captureStackTrace(this,l)}}class c{constructor(e,t){this._name=e,this._codePrefix=(t||"").toUpperCase(),this.reset()}emitException(){throw new l(this,this.getLastError())}reset(){this._entries=[]}resolve(){let e={errors:0,warnings:0,messages:[]};for(let t of this._entries){let n=this.resolveEntry(t);switch(n.category){case i.D.k_Warning:e.warnings++;break;case i.D.k_Error:e.errors++}e.messages.push(n)}return e}resolveEntry(e){let t,n,r,i=null,o=this.resolveFilename(e.category,e.code,e.desc);(t=this.resolveRange(e.category,e.code,e.desc))?(({start:n,end:r}=t),i=function(e){return`${s(e.start)}:${s(e.end)}`}(t)):(n=this.resolvePosition(e.category,e.code,e.desc),i=s(n));let a=`${this.resolveDescription(e.code,e.category,e.desc)}`;return{code:`${this._codePrefix}${e.code}`,category:e.category,content:a,file:o,start:n,end:r}}resolveFilename(e,t,n){return"[unknown]"}resolvePosition(e,t,n){return{file:null,line:0,column:0}}resolveRange(e,t,n){return null}resolveDescription(e,t,n){let i=this.diagnosticMessages();return i?i[e]?(0,r.HD)(i[e])?a(i[e],n):i[e](n):`[no description found for code '${e}']`:(console.error(`Diagnostic messages of '${this._name}' not found.`),"[no description found]")}diagnosticMessages(){return null}error(e,t){this._entries.push({category:i.D.k_Error,code:e,desc:t})}warning(e,t){this._entries.push({category:i.D.k_Warning,code:e,desc:t})}critical(e,t){this.error(e,t),this.emitException()}prettyPrint(){return null}hasErrors(){return this._entries.filter((e=>e.category===i.D.k_Error)).length>0}getLastError(){for(let e=this._entries.length-1;e>=0;--e)if(this._entries[e].category===i.D.k_Error)return this.resolveEntry(this._entries[e]);return null}isEmpty(){return 0===this._entries.length}static mergeReports(e){let t={errors:0,warnings:0,messages:[]};return e.forEach((e=>{e&&(t.errors+=e.errors,t.warnings+=e.warnings,t.messages=t.messages.concat(e.messages))})),t}static stringify(e){return e.messages.map((e=>e.content)).join("\n")}static asRange(e){let t={start:e.start,end:e.end};t.end||(t.end={...t.start});const{start:n,end:r}=t;return r.line==n.line&&r.column==n.column&&(r.column+=1),t}}},aBMm:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});class r{constructor(e=0){this._curIdx=e}value(){return this._curIdx}pickNext(){return this._curIdx=(this._curIdx+1)%r.list.length,this.value()}toRGBAString(){return r.toRGBAString(r.resolveColor(this.value()))}static resolveColor(e){return r.list[e%r.list.length]}static toRGBAString(e){return`rgb(${e>>16&255}, ${e>>8&255}, ${e>>0&255})`}static make(e){return new r(e)}static buildVariousClasses(e="dc"){return r.list.reduce(((t,n)=>(t[`${e}_${n}`]={opacity:.3,backgroundColor:`${r.toRGBAString(n)}`},t)),{})}}r.list=[15079755,3978315,16769305,4416472,16089649,9510580,4649200,15741670,12383756,16432830,32896,15122175,10117924,16775880,8388608,11206595,8421376,16767153,117,8421504];const i=r},Cx6u:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var r=n("cOQ3");class i{constructor(e){this.content=e}valueOf(){return this.content}toString(){return this.content}toSource(){return this.content}static make(e){if(!e)return null;if(!(0,r.HD)(e)){if(e instanceof i)return e;if((0,r.HD)(e.content))return i.make(e.content)}const t=e;let n=i.storage[t];return n||(n=new i(t),i.storage[t]=n,n)}}i.storage={}},kVxP:(e,t,n)=>{"use strict";n.d(t,{KH:()=>i});var r=n("JgUL");n("+YAm");function i(e,t,n){"function"==typeof t&&(n=t,t="");return n=n||((e,t)=>{}),new Promise(((i,s)=>{(0,r.exec)('"C:\\Program Files\\Perforce\\p4.exe" '+e+" "+(t||""),((e,t,r)=>{if(e)return s(e),n(e);r&&console.warn(r),i(t),n(null,t)}))}))}},z3nI:(e,t,n)=>{"use strict";function r(e){return void 0!==e}function i(e){return null!=e}function s(e){return"string"==typeof e}function o(e){return"number"==typeof e}n.d(t,{$V:()=>i,HD:()=>s,Xq:()=>r,hj:()=>o})},ceAs:(e,t,n)=>{"use strict";n.d(t,{AK:()=>$,AU:()=>I,Fe:()=>c,Fs:()=>d,G:()=>u,Ix:()=>C,Ld:()=>X,Nn:()=>J,Nw:()=>k,Oh:()=>K,PJ:()=>P,Qt:()=>q,Qu:()=>v,R8:()=>O,Td:()=>l,Vx:()=>a,WF:()=>L,XD:()=>o,ZX:()=>E,Zm:()=>F,_A:()=>w,aJ:()=>V,ar:()=>G,bD:()=>H,bp:()=>_,ce:()=>h,fC:()=>W,fZ:()=>A,gZ:()=>b,h9:()=>g,hV:()=>R,hq:()=>s,hs:()=>U,j1:()=>B,lg:()=>z,ny:()=>M,ow:()=>T,po:()=>m,qH:()=>p,qW:()=>r,r$:()=>i,sM:()=>S,sY:()=>Z,tV:()=>x,v$:()=>f,v0:()=>y,wI:()=>D,xB:()=>j,xU:()=>Y,yn:()=>N});const r="source-file-request",i="source-file-loaded",s="source-file-loading-failed",o="source-file-drop-state",a="grammar-content-specified",l="parser-params-changed",c="parsing-params-changed",u="source-code-modified",h="source-code-parsing-complete",d="source-code-analysis-complete",p="source-code-add-marker",f="source-code-add-marker-batch",m="source-code-remove-marker",g="source-code-remove-marker-batch",v="source-code-add-breakpoint",y="source-code-remove-breakpoint",b="source-code-set-define",_="source-code-remove-define",x="source-code-preprocessing-complete",w="debugger-compile",S="debugger-start-debug",T="debugger-reset",E="debugger-options-changed",M="playground-technique-update",A="playground-select-effect",C="playground-force-destroy-and-switch-technique-runtime-type",k="playground-force-destroy-and-switch-vm-runtime",P="playground-effect-save-request",R="playground-effect-autosave-request",L="playground-effect-has-been-saved",O="playground-effect-has-been-dropped",N="playground-set-option-autosave",I="playground-set-shader-format",D="graph-loaded",F="graph-reset",z="graph-compile",U="graph-modified",B="graph-node-docs-provided",V="graph-change-layout",G="graph-add-constant",Z="graph-remove-constant",H="graph-set-constant",j="graph-set-capacity",W="s3d-init-env",q="s3d-init-env-successed",K="s3d-init-env-failed",X="s3d-connect-p4",Y="s3d-connect-p4-successed",J="depot-update-request",$="depot-update-complete"},"b/L/":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Me:()=>u,QK:()=>c,sv:()=>a,td:()=>l});var i=n("t4A9"),s=n("ceAs"),o=e([i]);i=(o.then?(await o)():o)[0];const a={openFile:e=>({type:s.qW,payload:{filename:e}}),setContent:(e,t)=>({type:s.G,payload:{content:e,filename:t}}),addMarker:e=>({type:s.qH,payload:e}),removeMarker:e=>({type:s.po,payload:{name:e}}),addBreakpoint:e=>({type:s.Qu,payload:{line:e}}),removeBreakpoint:e=>({type:s.v0,payload:{line:e}}),compile:(e,t="expression")=>({type:s._A,payload:{query:e,type:t}}),specifyOptions:e=>({type:s.ZX,payload:{options:e}}),resetDebugger:()=>({type:s.ow}),setDefine:e=>({type:s.gZ,payload:{name:e}}),removeDefine:e=>({type:s.bp,payload:{name:e}})},l={reset:()=>({type:s.Zm,payload:{}}),recompile:()=>({type:s.lg,payload:{}}),changed:()=>({type:s.hs,payload:{}}),load:e=>({type:s.wI,payload:{content:e}}),provideNodeDocs:e=>({type:s.j1,payload:{docs:e}}),changeLayout:e=>({type:s.aJ,payload:{layout:e}}),addConstant:e=>({type:s.ar,payload:{value:e}}),removeConstant:e=>({type:s.sY,payload:{name:e}}),setConstant:(e,t)=>({type:s.bD,payload:{name:e,value:t}}),setCapacity:e=>({type:s.xB,payload:{value:e}})};function c(e){i.h.dispatch(l.provideNodeDocs(e))}function u(){i.h.dispatch(l.recompile())}r()}catch(h){r(h)}}))},"1t3V":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>p});var i=n("d+t4"),s=n("RIdR"),o=n("OsKO"),a=n("6EL/"),l=n("W5eQ"),c=n("wEVW"),u=n("KHnE"),h=e([c]);function d(e){const t={};return["float","float2","float3","float4","half","half2","half3","half4","int","int2","int3","int4","uint","uint2","uint3","uint4","bool","bool2","bool3","bool4"].forEach((e=>{const n=e.match(/(float|half|bool|uint|int)(2|3|4)?/),r=[e[0].toUpperCase(),...e.slice(1)].join(""),h=Number(n[2]||1),d=n[1];let p=e=>{const t=Number(e);switch(d){case"bool":return!!t;case"uint":return t>>>0;case"int":return t<<0;default:return t}};class f extends c.MK{constructor(){super(r),this.inputNames=[],this.addOutput("out",e),[..."xyzw"].slice(0,h).forEach((e=>{1==h?this.addInput(e,"float,bool,int,uint,half"):this.addInput(e,d),this.inputNames.push(e),"bool"==d?this.addProperty(e,!1,"boolean"):this.addProperty(e,0,"number")})),this.size=[180,25*h]}compute(e,t){return[...Array(h).keys()].map((n=>this.getInputNode(n)?.compute(e,t)||[])).flat()}exec(t,r,c){const u=null,d=r.currentScope,f=d.findType(e),m=new a.L({type:f,scope:null}),g=[...Array(h).keys()].map((e=>{const s=this.getInputNode(e),a=this.inputNames[e];return s?s.exec(t,r,this.getOriginalSlot(e)):"bool"===n[1]?new i.O({scope:d,sourceNode:u,value:!!this.properties[a]}):new o.O({scope:d,sourceNode:u,value:p(this.properties[a])})}));return 1==h&&l.V5.equals(f,g[0].type)?g[0]:new s.f({scope:d,sourceNode:u,ctor:m,args:g})}updateInputNames(){for(let e in this.inputs){let t=this.inputs[e];t.name=t.link?this.inputNames[e]:`${this.inputNames[e]} = ${p(this.properties[this.inputNames[e]])}`}}onConnectionsChange(e,t,n,r,i){super.onConnectionsChange(e,t,n,r,i),this.updateInputNames()}onPropertyChanged(e,t,n){return super.onPropertyChanged(e,t,n),this.updateInputNames(),!0}getDocs(){return`Constructor of ${e}() type.`}getTitle(){return this.flags.collapsed&&0===this.inputs.filter((e=>e.link)).length?`(${this.inputNames.map((e=>p(this.properties[e]))).join(" ,")})`:super.getTitle()}}f.desc=r,t[`constructors/${e}`]=f;class m extends c.MK{constructor(){super(r),this.inputNames=[],this.addOutput("out",e),this.addInput("x","float,bool,int,uint,half".split(",").map((e=>`${e}${h}`)).join(",")),this.size=this.computeSize()}compute(e,t){return this.getInputNode(0)?.compute(e,t)}exec(t,n,r){const i=n.currentScope,s=i.findType(e),o=this.getInputNode(0).exec(t,n,this.getOriginalSlot(0));return l.V5.equals(o.type,s)?o:new u.G({scope:i,sourceExpr:o,type:s})}getDocs(){return`Cast to ${e}() type.`}}m.desc=`${r} (cast)`,t[`constructors/${e} (cast)`]=m})),t}c=(h.then?(await h)():h)[0];const p=d;r()}catch(f){r(f)}}))},nqVC:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>v});var i=n("kBTl"),s=n("Muaz"),o=n("++2t"),a=n("7Nqm"),l=n("E5ji"),c=n("vIQR"),u=n("0mZ+"),h=n("5Ao9"),d=n("sVSU"),p=n("wEVW"),f=e([p]);function m(e){let t=0;return e.addLocal=()=>"t"+t++,e}function g(e){class t extends p.MK{constructor(){super("Decomposer"),this.addInput("in",null),this.size=[180,25]}exec(e,t,n){const r=this.getOutputInfo(n).name,a=this.getInputNode(0).exec(e,t,this.getOriginalSlot(0)),l=t.currentScope,c=a.type.getField(r),u=new s.x({scope:l,name:r}),h=new i.M({scope:l,id:u,decl:c});return new o.e({scope:l,element:a,postfix:h})}onConnectInput(t,n,r,i,s){const o=this;return async function(){const t=`auto anonymous(${d.d} ${d.K}, int partId) { return ($complexExpr); }`,n=await(0,l.X)("://decompose-node",t);let r=null,h=await(0,a.Z)(n,e(),{$complexExpr:(e,t,n)=>{const o=m(e);i.onBeforeExecution(o,t),i.compute(o,t);const a=i.exec(e,t,s);return r=a.type,a}});if(h.diagnosticReport.errors&&console.error(u.g.stringify(h.diagnosticReport)),r.isComplex())return r.fields.forEach((e=>o.addOutput(e.name,e.type.name))),!0;if(r.isNotBaseArray()||r.baseType.instructionType!==c.rO.k_SystemType||(r=r.baseType),r.instructionType===c.rO.k_SystemType){const e=r.name.match(/(float|half|bool|uint|int)(2|3|4)/);if(e)return[..."xyzw"].slice(0,Number(e[2])).forEach((t=>o.addOutput(t,e[1]))),!0}console.error(`unsupported type for decomposition '${r.name}'`),o.dropInput()}(),!0}dropInput(){this.disconnectInput(0)}dropOutputs(){for(;this.outputs.length;)this.disconnectOutput(0),this.removeOutput(0)}onConnectionsChange(e,t,n,r,i){e!=h.LiteGraph.INPUT||n||this.dropOutputs()}onBeforeConnectInput(e){return this.dropOutputs(),e}getTitle(){let e=this.outputs.filter((e=>e.links?.length));return this.inputs.length&&1===e.length?`*.${e[0].name}`:super.getTitle()}getDocs(){return"Auxiliary node to decompose complex ty to components."}}return t.desc="Decomposer",{"helpers/decomposer":t}}p=(f.then?(await f)():f)[0];const v=g;r()}catch(y){r(y)}}))},cAsR:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>l});var i=n("OsKO"),s=n("wEVW"),o=e([s]);function a(e){class t extends s.MK{constructor(){super("Float"),this.addOutput("value","float"),this.addProperty("value",0,"number"),this.widget=this.addWidget("number","value",0,"value",{precision:5}),this.widgets_up=!0,this.size=this.computeSize()}exec(e,t,n){const r=t.currentScope;return new i.O({scope:r,value:Number(Number(this.properties.value).toFixed(3))})}getTitle(){return this.flags.collapsed?this.properties.value.toFixed(2):super.getTitle()}onDrawBackground(e,t,n,r){super.onDrawBackground(e,t,n,r),this.outputs[0].label=this.properties.value.toFixed(2)}}return t.desc="Float",{"constants/float":t}}s=(o.then?(await o)():o)[0];const l=a;r()}catch(c){r(c)}}))},B6UE:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>l});var i=n("y57x"),s=n("wEVW"),o=e([s]);function a(e){const t={};return function(e){let t=e.root.scope,n=[];for(;t;){for(let[e,r]of Object.entries(t.functions))for(let e of r){if(!e.def.params.every((e=>e.type.usages.every((e=>"inout"!=e&&"out"!=e&&"uniform"!=e)))))continue;let t=e.def.params.map((e=>({name:e.id.name,type:e.type.name}))),r=[{name:"out",type:e.def.returnType.name}],i=e.def.toCode(),s=e.def.id.name;n.push({func:e,name:s,desc:i,inputs:t,outputs:r})}t=t.parent}return n}(e()).forEach((e=>function(e){class n extends s.MK{constructor(){super(e.name),e.inputs.forEach((e=>this.addInput(e.name,e.type))),e.outputs.forEach((e=>this.addOutput(e.name,e.type))),this.size=[180,25*Math.max(e.inputs.length,e.outputs.length)]}compute(t,n){if(this.locals||!this.inputs.every(((e,t)=>this.isInputConnected(t))))return[];const r=super.compute(t,n),s=n.currentScope,o=e.func,a=o.def.returnType,l=e.inputs.map(((e,r)=>this.getInputNode(r)?.exec(t,n,this.getOriginalSlot(r))))||null,c=new i.L({scope:s,type:a,decl:o,args:l});return[...r,...this.addLocal(t,n,a.name,c)]}exec(e,t,n){return this.locals?(0,s.kb)(e,t).idexpr(this.locals[n]):null}}n.desc=e.desc,t[`functions/${e.desc}`]=n}(e))),t}s=(o.then?(await o)():o)[0];const l=a;r()}catch(c){r(c)}}))},wEVW:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{MK:()=>R,Vv:()=>k,fz:()=>O,kR:()=>N,kb:()=>P,wp:()=>L});var i=n("cOQ3"),s=n("HK/f"),o=n("eck/"),a=n("d+t4"),l=n("RIdR"),c=n("YZc1"),u=n("ubxH"),h=n("OsKO"),d=n("BLpd"),p=n("O1LO"),f=n("kBTl"),m=n("Muaz"),g=n("s0og"),v=n("++2t"),y=n("UL2e"),b=n("fc3/"),_=n("k9uP"),x=n("6EL/"),w=n("A0ZU"),S=n("BeyE"),T=n("jeW/"),E=n("vIQR"),M=n("b/L/"),A=n("5Ao9"),C=e([M]);M=(C.then?(await C)():C)[0];class k extends s.P{constructor(){super(...arguments),this.varNum=0}addLocal(){return"t"+this.varNum++}}const P=(e,t)=>({variable(e,n,r=[]){const i=t.currentScope,s=new m.x({scope:i,name:e}),o=new x.L({scope:i,type:i.findType(n),usages:r}),a=new _.D({scope:i,type:o,id:s});return i.addVariable(a),a},stmt(e){const n=t.currentScope;return new c.T({scope:n,declList:e})},assigment(n,r){const i=t.currentScope;r.type.readable||e.error(r.sourceNode,T.g.InvalidTypeForReading);const s=new o.a({scope:i,left:n,right:r,operator:"="});return new u.D({scope:i,expr:s})},bool(e){const n=t.currentScope;return new a.O({scope:n,value:e})},int(e){const n=t.currentScope,{base:r,signed:i,heximal:s,exp:o}=(0,S.F2)(e.toFixed(0));return new g.v({scope:n,base:r,exp:o,signed:i,heximal:s})},float(e){const n=t.currentScope;return new h.O({scope:n,value:e})},float2(e,n){const r=t.currentScope,i=[...arguments].map((e=>this.float(e))),s=new x.L({type:w[`T_FLOAT${i.length}`],scope:null});return new l.f({scope:r,args:i,ctor:s})},float3(e,n,r){const i=t.currentScope,s=[...arguments].map((e=>this.float(e))),o=new x.L({type:w[`T_FLOAT${s.length}`],scope:null});return new l.f({scope:i,args:s,ctor:o})},float4(e,n,r,i){const s=t.currentScope,o=[...arguments].map((e=>this.float(e))),a=new x.L({type:w[`T_FLOAT${o.length}`],scope:null});return new l.f({scope:s,args:o,ctor:a})},id(e){const n=t.currentScope;return new m.x({scope:n,name:e})},idexpr(e){const n=t.currentScope,r=n.findVariable(e);if((0,i.Ft)(r))return null;const s=new m.x({scope:n,name:e});return new f.M({scope:n,id:s,decl:r})},postfixpoint(e){const[n,r]=e.split("."),i=t.currentScope,s=this.idexpr(n),o=new f.M({scope:i,id:new m.x({scope:i,name:r}),decl:s.type.getField(r)});return new v.e({scope:i,element:s,postfix:o})},return(e){const n=t.currentScope;return new y.F({scope:n,expr:e})},func(n,r){const i=/(?<typeName>\w+)\s(?<funcName>\w+)\(\s*(?<paramStr>.*)\)/gm.exec(n);if(!i)return null;const s=P(e,t),{funcName:o,typeName:a,paramStr:l}=i.groups,c=l.split(",").map((e=>e.trim())).map((e=>e.split(/\s+/).reverse())).map((([e,t,n])=>s.variable(e,t,n?[n]:[]))),u=t.currentScope,h=t.globalScope;t.push(E.SR.k_Default);const f=x.L.wrap(u.findType(a),w.SCOPE),m=s.id(o),g=new p.Y({scope:u,returnType:f,id:m,paramList:c});e.funcDef=g;const v=[...r()];if(!v.length||v[v.length-1].instructionType!=E.rO.k_ReturnStmt){let e=null;switch(a){case"bool":e=s.bool(!0);break;case"uint":case"int":e=s.int(0);break;case"void":break;default:console.error("unsupported type of return expression")}v.push(s.return(e))}const y=new b.O({scope:u,stmtList:v});t.pop();let _=new d.s({scope:u,def:g,impl:y});return h.addFunction(_),_}});class R extends A.LGraphNode{resolveInput(e){let t=-1;return t=(0,i.HD)(e)?this.inputs.findIndex((t=>t.name==e)):e,t}resolveOutput(e){let t=-1;return t=(0,i.HD)(e)?this.outputs.findIndex((t=>t.name==e)):e,t}getInputLink(e){const t=this.getInputInfo(e);if(!t)return null;const n=t.link;return n?this.graph.links[n]:null}getOutputLinks(e){const t=this.getOutputInfo(e);if(!t)return null;const n=t.links;return n?n.map((e=>this.graph.links[e])):null}getOriginalSlot(e){let t=this.getInputLink(e);return t?t.origin_slot:-1}getInputNode(e){let t=this.resolveInput(e);return super.getInputNode(t)}getInputInfo(e){let t=this.resolveInput(e);return super.getInputInfo(t)}getOutputInfo(e){let t=this.resolveOutput(e);return super.getOutputInfo(t)}getOutputNodes(e){let t=this.resolveOutput(e);return super.getOutputNodes(t)}getInputNodes(){return this.inputs.filter((e=>e&&null!==e.link)).map((e=>this.graph.links[e.link])).filter((e=>!!e)).map((e=>this.graph.getNodeById(e.origin_id)))}async run(e){return null}local(e){return this.locals[0]}localCache(e){return this.localsCache?.[0]||null}addLocal(e,t,n,r){const i=e.addLocal();this.locals=[i],this.localsCache=[r];const s=P(e,t);return[s.stmt([s.variable(i,n)]),s.assigment(s.idexpr(i),r)]}onBeforeExecution(e,t){this.locals=null,this.localsCache=null,this.inputs.forEach(((n,r)=>n.type!=A.LiteGraph.ACTION&&this.getInputNode(r)?.onBeforeExecution(e,t))),this.outputs.forEach(((n,r)=>n.type==A.LiteGraph.EVENT&&this.getOutputNodes(r)?.forEach((n=>n.onBeforeExecution(e,t)))))}compute(e,t){return this.inputs.map(((n,r)=>n.type==A.LiteGraph.ACTION?[]:this.getInputNode(r)?.compute(e,t)||[])).flat()}exec(e,t,n){const r=t.currentScope;return new a.O({scope:r,value:!1})}getDocs(){return R.nodesDocs[this.title]?.desc||null}getTitle(){return R.nodesDocs[this.title]?.title||this.title}onSelected(){const e=this.getDocs();e&&(0,M.QK)(e)}onDeselected(){this.getDocs()&&(0,M.QK)(null)}onPropertyChanged(e,t,n){return(0,M.Me)(),!0}emitError(e){e&&console.error(e),this.color="red"}emitNoError(){this.color=null}onConnectionsChange(e,t,n,r,i){this.emitNoError()}onDrawBackground(e,t,n,r){if(!this.flags.collapsed&&this.mouseOver){this.getDocs()&&(e.save(),e.font="12px sans-serif",e.fillStyle="#AAA",e.fillText(this.getDocs(),0,this.size[1]+18),e.restore())}}setOutputSlotType(e,t){}setInputSlotType(e,t){}}R.nodesDocs={};class L extends R{getName(){return null}getType(){return null}}class O extends R{constructor(){super(...arguments),this.readyToAccept=!1}dependentNodes(){return this.getOutputNodes(0)}update(){let[e,t]=this.computeSize(),[n,r]=[7,t-(this.inputs.find((e=>e.pos?.[1]<0))||!1===this.outputs?.[0]?.visible?26:0)];const i=this.dependentNodes();if(i)for(let t of i){const i=t.constructor.title_mode==A.LiteGraph.NO_TITLE,s=this.pos[0]+n,o=this.pos[1]+r+(i?5:35);t.pos[0]==s&&t.pos[1]==o||(t.pos=[s,o],t.onReposition?.()),e=Math.max(e,t.size[0]+14),r=r+t.size[1]+(i?0:A.LiteGraph.NODE_TITLE_HEIGHT)+5}return e=Math.max(100,e),t=Math.max(30,r+10),this.size[0]==e&&this.size[1]==t||(this.size=[e,t],this.onResize()),i}onResize(){this.getInputNode("context")?.update?.()}onReposition(){this.getInputNode("context")?.update?.()}highlight(e){this.readyToAccept=e}onDropEnter(e){this.highlight(!0),this.update()}onDropLeave(e){this.highlight(!1);const t=this.graph;(this.outputs[0].links||[]).forEach((n=>{let r=t.links[n],i=t.getNodeById(r.target_id);e==i&&this.disconnectOutput(0,i)})),this.update()}onDrag(e){const t=this.update();t&&t.forEach((t=>{e.bringToFront(t),t.onDrag&&t.onDrag(e)}))}onConnectionsChange(){this.update(),this.onResize()}onBringToFront(e){const t=this.dependentNodes();t&&t.forEach((t=>{e.bringToFront(t),t.onBringToFront&&t.onBringToFront(e)}))}}class N extends O{onDrawBackground(e,t,n,r){if(super.onDrawBackground(e,t,n,r),this.flags.collapsed)return;let[i,s]=this.size;this.readyToAccept&&(e.save(),e.beginPath(),e.lineWidth=2,e.strokeStyle="orange",e.roundRect(0,0,i+1,s,[0,0,0,0],0),e.stroke(),e.closePath(),e.restore())}}N.can_accept_drop=!0,N.collapsable=!1,r()}catch(e){r(e)}}))},jEKi:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>u});var i=n("AAir"),s=n("fc3/"),o=n("5Ao9"),a=n("wEVW"),l=e([a]);function c(e){const t="Action",n={visible:!1};class r extends a.fz{constructor(){super("Action"),this.addInput("cond","bool",{pos:[13,-13],label:""}),this.addInput("context",o.LiteGraph.ACTION,n),this.addOutput("true",o.LiteGraph.EVENT,n),this.addOutput("false",o.LiteGraph.EVENT,n),this.update()}dependentNodes(){return[...this.getOutputNodes(0)||[],...this.getOutputNodes(1)||[]]}computeSize(){return[120,26]}onDrawTitleBox(e,t,n,r){}onDrawBackground(e,t,n,r){if(super.onDrawBackground(e,t,n,r),this.flags.collapsed)return;let[i,s]=this.size;e.save(),e.beginPath(),e.strokeStyle=this.readyToAccept?"orange":"rgba(255, 255, 255, 0)",e.fillStyle="rgba(255, 255, 255, 0.2)",e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=6,e.roundRect(0,0,i+1,s,[0,0,5,5],5),e.stroke(),e.fill(),e.closePath(),e.restore()}onDropLeave(e){this.highlight(!1);const t=this.graph;for(let n of[0,1]){const r=this.outputs[n].links;r&&r.forEach((r=>{let i=t.links[r],s=t.getNodeById(i.target_id);e==s&&this.disconnectOutput(n,s)}))}const n=this.outputs[0].links,r=this.outputs[1].links;if(!n?.length&&r?.length){let e=t.links[r[0]],n=t.getNodeById(e.target_id);this.disconnectOutput(1),this.connect(0,n,"context")}this.update()}onDrop(e){const t=this.isOutputConnected(0)?this.isOutputConnected(1)?null:"false":"true";t&&this.connect(t,e,"context"),this.highlight(!1),this.update()}compute(e,t){const n=super.compute(e,t),r=t.currentScope,o=this.getInputNode("cond")?.exec(e,t,this.getOriginalSlot("cond"))||this.exec(e,t,0),a=this.getOutputNodes("true")?.map((n=>n.compute(e,t))).flat(),l=a?new s.O({scope:r,stmtList:a}):null,c=this.getOutputNodes("false")?.map((n=>n.compute(e,t))).flat(),u=c?new s.O({scope:r,stmtList:c}):null;return[...n,new i.i({scope:r,cond:o,conseq:l,contrary:u})]}}return r.desc=t,r.color="transparent",r.bgcolor="transparent",r.can_be_dropped=!0,r.can_accept_drop=!0,r.collapsable=!1,{"fx/Action":r}}a=(l.then?(await l)():l)[0];const u=c;r()}catch(h){r(h)}}))},"0N+1":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>u});var i=n("d+t4"),s=n("s0og"),o=n("BeyE"),a=n("wEVW"),l=e([a]);function c(e){const t={};class n extends a.MK{constructor(){super("Int"),this.addOutput("value","int"),this.addProperty("value",0,"number"),this.widget=this.addWidget("number","value",0,"value",{precision:0,step:10}),this.widgets_up=!0,this.size=[150,30]}exec(e,t){let n=t.currentScope,r=this.properties.value,{base:i,signed:a,heximal:l,exp:c}=(0,o.F2)(Math.abs(r).toFixed(0));return r<0&&(i=-i),new s.v({scope:n,sourceNode:null,base:i,exp:c,signed:a,heximal:l})}getTitle(){return this.flags.collapsed?this.properties.value.toFixed(0):super.getTitle()}onDrawBackground(e,t,n,r){super.onDrawBackground(e,t,n,r),this.outputs[0].label=this.properties.value.toFixed(2)}}n.desc="Int",t["constants/int"]=n;class r extends a.MK{constructor(){super("Uint"),this.addOutput("value","uint"),this.addProperty("value",0,"number"),this.widget=this.addWidget("number","value",0,"value",{precision:0,step:10,min:0}),this.widgets_up=!0,this.size=[150,30]}exec(e,t){let n=t.currentScope,{base:r,signed:i,heximal:a,exp:l}=(0,o.F2)(this.properties.value.toFixed(0));return i=!1,new s.v({scope:n,sourceNode:null,base:r,exp:l,signed:i,heximal:a})}getTitle(){return this.flags.collapsed?this.properties.value.toFixed(0):super.getTitle()}onDrawBackground(e,t,n,r){super.onDrawBackground(e,t,n,r),this.outputs[0].label=this.properties.value.toFixed(2)}}r.desc="Uint",t["constants/uint"]=r;class l extends a.MK{constructor(){super("Bool"),this.addOutput("value","bool"),this.addProperty("value",!1,"bool"),this.widget=this.addWidget("toggle","value",!1,"value"),this.widgets_up=!0,this.size=[150,30]}exec(e,t){let n=t.currentScope,r=this.properties.value;return new i.O({scope:n,sourceNode:null,value:r})}getTitle(){return this.flags.collapsed?this.properties.value:super.getTitle()}onDrawBackground(e,t,n,r){super.onDrawBackground(e,t,n,r),this.outputs[0].label=this.properties.value}}return l.desc="Bool",t["constants/bool"]=l,t}a=(l.then?(await l)():l)[0];const u=c;r()}catch(h){r(h)}}))},dJ4L:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>p});var i=n("Jm+q"),s=n("+tx1"),o=n("2i/b"),a=n("IsZF"),l=n("5Ao9"),c=n("wEVW"),u=n("Oxvu"),h=e([c]);function d(e){const t={};class n extends c.MK{get a(){return this.getInputNode("a")}get b(){return this.getInputNode("b")}}const r=["float","int","uint","float3"],h=r.join(",");[{name:"Summ",operator:"+",search:"summ '+'"},{name:"Subtraction",operator:"-",search:"subtraction '-'"},{name:"Mult",operator:"*",search:"multiply '*'"},{name:"Div",operator:"/",search:"division '/'"},{name:"Mod",operator:"%",search:"modulo '%'"}].forEach((e=>{class r extends n{constructor(){super(e.name),this.addInput("a",h),this.addInput("b",h),this.addOutput("value",h),this.size=[100,50],this.shape=l.LiteGraph.ROUND_SHAPE}compute(t,n){if(this.locals||!this.inputs.every(((e,t)=>this.isInputConnected(t))))return[];const r=super.compute(t,n),o=n.currentScope,a=e.operator,l=this.a.exec(t,n,this.getOriginalSlot("a")),c=this.b.exec(t,n,this.getOriginalSlot("b")),u=i.L.checkTwoOperandExprTypes(t,a,l.type,c.type);for(const e of["a","b"])this.getInputInfo(e).type=l.type.name,this.getInputLink(e).type=l.type.name;this.getOutputInfo("value").type=u.name;const h=new s.W({scope:o,left:l,right:c,operator:a,type:u});return[...r,...this.addLocal(t,n,h.type.name,h)]}exec(e,t,n){let r=this.a,i=this.b;return r&&i?this.locals?(0,c.kb)(e,t).idexpr(this.locals[n]):null:(this.emitError("All inputs must be conected."),null)}getTitle(){const t=`${this.getInputInfo("a").name} ${e.operator} ${this.getInputInfo("b").name}`;return this.flags.collapsed?e.operator:t}getDocs(){return`Operator '${e.search}'.`}onConnectionsChange(e,t,n,r,i){for(let e of["a","b"]){let t=this.getInputInfo(e);t.link||(t.type=h)}super.onConnectionsChange(e,t,n,r,i)}}r.desc=e.name,t[`operators/${e.search}`]=r}));[{name:"Equal",operator:"==",search:"equal '=='"},{name:"NotEqual",operator:"!=",search:"not equal '!='"},{name:"Less",operator:"<",search:"less '<'"},{name:"Greater",operator:">",search:"greater '>'"},{name:"LessThan",operator:"<=",search:"less than '<='"},{name:"GreaterThan",operator:">=",search:"greater than '>='"}].forEach((e=>{class i extends n{constructor(){super(e.name),this.addInput("a",r.join(",")),this.addInput("b",r.join(",")),this.addOutput("value","bool"),this.size=[100,50]}compute(t,n){if(this.locals||!this.inputs.every(((e,t)=>this.isInputConnected(t))))return[];const r=super.compute(t,n),i=n.currentScope,s=e.operator;let a=this.a,l=this.b;const c=a.exec(t,n,this.getOriginalSlot("a")),u=l.exec(t,n,this.getOriginalSlot("b"));for(const e of["a","b"])this.getInputInfo(e).type=c.type.name,this.getInputLink(e).type=c.type.name;const h=new o.m({scope:i,left:c,right:u,operator:s});return[...r,...this.addLocal(t,n,h.type.name,h)]}exec(e,t,n){let r=this.a,i=this.b;return r&&i?this.locals?(0,c.kb)(e,t).idexpr(this.locals[n]):null:(this.emitError("All inputs must be conected."),null)}getTitle(){const t=`${this.getInputInfo("a").name} ${e.operator} ${this.getInputInfo("b").name}`;return this.flags.collapsed?e.operator:t}getDocs(){return`Operator '${e.search}'.`}onConnectionsChange(e,t,n,r,i){for(let e of["a","b"]){let t=this.getInputInfo(e);t.link||(t.type=h)}super.onConnectionsChange(e,t,n,r,i)}}i.desc=e.name,t[`operators/${e.search}`]=i}));[{name:"And",operator:"&&",search:"and '&&'"},{name:"Or",operator:"||",search:"or '||'"}].forEach((e=>{class r extends n{constructor(){super(e.name),this.addInput("a","bool"),this.addInput("b","bool"),this.addOutput("value","bool"),this.size=[100,50]}compute(t,n){if(this.locals||!this.inputs.every(((e,t)=>this.isInputConnected(t))))return[];const r=super.compute(t,n),i=n.currentScope,s=e.operator;let o=this.a,a=this.b;const l=o.exec(t,n,this.getOriginalSlot("a")),c=a.exec(t,n,this.getOriginalSlot("b")),h=new u.u({scope:i,left:l,right:c,operator:s});return[...r,...this.addLocal(t,n,h.type.name,h)]}exec(e,t,n){let r=this.a,i=this.b;return r&&i?this.locals?(0,c.kb)(e,t).idexpr(this.locals[n]):null:(this.emitError("All inputs must be conected."),null)}getTitle(){const t=`${this.getInputInfo("a").name} ${e.operator} ${this.getInputInfo("b").name}`;return this.flags.collapsed?e.operator:t}getDocs(){return`Operator '${e.search}'.`}}r.desc=e.name,t[`operators/${e.search}`]=r}));class d extends n{constructor(){super("Conditional"),this.addInput("cond","bool"),this.addInput("a",h),this.addInput("b",h),this.addOutput("value",h),this.size=this.computeSize()}get cond(){return this.getInputNode("cond")}compute(e,t){if(this.locals||!this.inputs.every(((e,t)=>this.isInputConnected(t))))return[];const n=super.compute(e,t),r=t.currentScope;let i=this.a,s=this.b,o=this.cond;const l=i.exec(e,t,this.getOriginalSlot("a")),c=s.exec(e,t,this.getOriginalSlot("b")),u=o.exec(e,t,this.getOriginalSlot("cond")),h=new a.x({scope:r,cond:u,left:l,right:c});for(const e of["a","b"])this.getInputInfo(e).type=l.type.name,this.getInputLink(e).type=l.type.name;return this.getOutputInfo("value").type=h.type.name,[...n,...this.addLocal(e,t,h.type.name,h)]}exec(e,t,n){let r=this.a,i=this.b;return r&&i?this.locals?(0,c.kb)(e,t).idexpr(this.locals[n]):null:(this.emitError("All inputs must be conected."),null)}getTitle(){return`${this.getInputInfo("cond").name} ? ${this.getInputInfo("a").name} : ${this.getInputInfo("b").name}`}getDocs(){return"Conditional operator '?'."}onConnectionsChange(e,t,n,r,i){for(let e of["a","b"]){let t=this.getInputInfo(e);t.link||(t.type=h)}super.onConnectionsChange(e,t,n,r,i)}}return d.desc="Conditional",t["operators/conditional '?'"]=d,t}c=(h.then?(await h)():h)[0];const p=d;r()}catch(f){r(f)}}))},Ca6S:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>l});var i=n("5Ao9"),s=n("wEVW"),o=e([s]);function a(e){const t="Statements",n={visible:!1};class r extends s.fz{constructor(){super("Statements"),this.addInput("context",i.LiteGraph.ACTION,n),this.addOutput("stmts",i.LiteGraph.EVENT,n),this.update()}computeSize(){return[120,26]}onDrawTitleBox(e,t,n,r){}onDrawBackground(e,t,n,r){if(super.onDrawBackground(e,t,n,r),this.flags.collapsed)return;let[i,s]=this.size;e.save(),e.beginPath(),e.strokeStyle=this.readyToAccept?"orange":"rgba(255, 255, 255, 0)",e.fillStyle="rgba(255, 255, 255, 0.2)",e.shadowColor="#000",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=6,e.roundRect(0,0,i+1,s,[0,0,5,5],5),e.stroke(),e.fill(),e.closePath(),e.restore()}onDrop(e){this.connect("stmts",e,"context"),this.highlight(!1),this.update()}compute(e,t){const n=super.compute(e,t),r=(t.currentScope,this.getOutputNodes("stmts")?.map((n=>n.compute(e,t))).flat());return[...n,...r]}}return r.desc=t,r.color="transparent",r.bgcolor="transparent",r.can_be_dropped=!0,r.can_accept_drop=!0,r.collapsable=!1,{[`fx/${t}`]:r}}s=(o.then?(await o)():o)[0];const l=a;r()}catch(c){r(c)}}))},teaP:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>a});var i=n("wEVW"),s=e([i]);function o(e){const t={},n=e().root.scope.variables;for(let e in n){let r=n[e];if(r.type.isUniform()){class n extends i.MK{constructor(){super(`${e}`),this.addOutput("out",r.type.name,{label:""}),this.size=this.computeSize(),this.size[1]=0,this.size[0]=Math.max(180,this.size[0]),this.outputs[0].pos=[this.size[0]-13,-13]}onDrawTitleBox(e,t,n,r){}exec(t,n){return(0,i.kb)(t,n).idexpr(e)}}n.desc=`Uniform '${e}'`,n.collapsable=!1,n.color="transparent",t[`constants/${e} (uniform)`]=n}}return t}i=(s.then?(await s)():s)[0];const a=o;r()}catch(l){r(l)}}))},sVSU:(e,t,n)=>{"use strict";n.d(t,{K:()=>i,d:()=>r});const r="Part",i="part"},pqmu:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>u});var i=n("pjXG"),s=n("zHDc"),o=n("0mZ+"),a=n("wEVW"),l=e([a]);function c(e){const t=e().root.scope.types.DefaultShaderInput.fields.map((e=>({name:e.name,type:e.type.name}))),n="DefaultMaterial";class r extends a.MK{constructor(){super("DefaultMaterial"),t.forEach((e=>this.addInput(e.name,e.type))),this.addInput("sort","int"),this.size=[180,25*(t.length+1)+100],this.addProperty("Sorting",!0,"bool"),this.sortingWidget=this.addWidget("toggle","Sorting",!0,"value"),this.addProperty("Geometry","Box","string"),this.geometryWidget=this.addWidget("text","Geometry","Box","value"),this.serialize_widgets=!0}get sorting(){return this.sortingWidget.value}get geometry(){return this.geometryWidget.value}extend(e){const t=e.uri,n=e.root.scope,r=new s.F$(n),l=new a.Vv(t);this.onBeforeExecution(l,r);const c=(0,a.kb)(l,r),u=e=>this.getInputNode(e).exec(l,r,this.getOriginalSlot(e)),h=e=>this.getInputNode(e).compute(l,r);l.beginFunc();const d=c.func(`int PrerenderRoutine${this.id}(inout Part part, out DefaultShaderInput input)`,(()=>[...h("pos"),...h("size"),...h("color"),...h("sort"),c.assigment(c.postfixpoint("input.pos"),u("pos")),c.assigment(c.postfixpoint("input.size"),u("size")),c.assigment(c.postfixpoint("input.color"),u("color")),c.return(u("sort"))]));l.endFunc();const p=o.g.mergeReports([e.diagnosticReport,l.diagnostics.resolve()]),f=e.root.instructions.concat([d]);return{root:new i.N({scope:r.globalScope,instructions:f}),diagnosticReport:p,uri:t}}async run(e){return this.extend(e)}getTitle(){return"Default Material"}getDocs(){return"Render particles with default material shader."}}return r.desc=n,{[`fx/${n}`]:r}}a=(l.then?(await l)():l)[0];const u=c;r()}catch(h){r(h)}}))},"H+Dh":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>l});var i=n("5Ao9"),s=n("wEVW"),o=e([s]);function a(e){const t="Kill",n={visible:!1};class r extends s.MK{constructor(){super("Kill"),this.addInput("context",i.LiteGraph.ACTION,n),this.size=[100,0]}compute(e,t){t.currentScope;const n=(0,s.kb)(e,t);return[n.return(n.bool(!1))]}}return r.desc=t,r.color="transparent",r.can_be_dropped=!0,{"fx/Kill":r}}s=(o.then?(await o)():o)[0];const l=a;r()}catch(c){r(c)}}))},"7U7x":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>u});var i=n("AAir"),s=n("fc3/"),o=n("5Ao9"),a=n("wEVW"),l=e([a]);function c(e){const t="Kill By",n={visible:!1};class r extends a.MK{constructor(){super("Kill By"),this.addInput("cond","bool",{pos:[13,-13],label:""}),this.addInput("context",o.LiteGraph.ACTION,n),this.size=[100,0]}onDrawTitleBox(e,t,n,r){}compute(e,t){const n=super.compute(e,t),r=(0,a.kb)(e,t),o=t.currentScope,l=this.getInputNode("cond")?.exec(e,t,this.getOriginalSlot("cond"))||this.exec(e,t,0),c=[r.return(r.bool(!1))],u=c?new s.O({scope:o,stmtList:c}):null;return[...n,new i.i({scope:o,cond:l,conseq:u})]}}return r.desc=t,r.color="transparent",r.can_be_dropped=!0,r.collapsable=!1,{"fx/Kill By":r}}a=(l.then?(await l)():l)[0];const u=c;r()}catch(h){r(h)}}))},zLQT:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>h});var i=n("pjXG"),s=n("zHDc"),o=n("0mZ+"),a=n("sVSU"),l=n("wEVW"),c=e([l]);function u(e){e().root.scope.types[a.d];const t="LwiMaterial";class n extends l.MK{constructor(){super("Lwi Material"),this.map={transform:0,template:1},this.addInput("transform","float3x4"),this.addInput("template","int"),this.size=[180,150],this.addProperty("Sorting",!0,"bool"),this.sortingWidget=this.addWidget("toggle","Sorting",!0,"value"),this.addProperty("Geometry","Box","string"),this.geometryWidget=this.addWidget("text","Geometry","Box","value"),this.serialize_widgets=!0}get sorting(){return this.sortingWidget.value}get geometry(){return this.geometryWidget.value}extend(e){const t=e.uri,n=e.root.scope,r=new s.F$(n),a=new l.Vv(t);this.onBeforeExecution(a,r);const c=(0,l.kb)(a,r),u=e=>this.getInputNode(e).exec(a,r,this.getOriginalSlot(e));a.beginFunc();const h=c.func(`int PrerenderRoutine${this.id}(inout Part part, inout LwiInstance input)`,(()=>[...this.getInputNode("transform").compute(a,r),...this.getInputNode("template").compute(a,r),c.assigment(c.postfixpoint("input.worldMatrPrev"),c.postfixpoint("input.worldMatr")),c.assigment(c.postfixpoint("input.worldMatr"),u("transform")),c.return(u("template"))]));a.endFunc();const d=o.g.mergeReports([e.diagnosticReport,a.diagnostics.resolve()]),p=e.root.instructions.concat([h]);return{root:new i.N({scope:r.globalScope,instructions:p}),diagnosticReport:d,uri:t}}async run(e){return this.extend(e)}getDocs(){return"Render particles as lwi templates."}}return n.desc=t,{[`fx/${t}`]:n}}l=(c.then?(await c)():c)[0];const h=u;r()}catch(d){r(d)}}))},"Ts+a":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>a});var i=n("wEVW"),s=e([i]);function o(e){const t={};let n={},r=e().root.scope;for(;r;)n={...n,...r.types},r=r.parent;for(let e in n){let r=n[e];class s extends i.wp{constructor(){super(`${e}`),this.addOutput("out",r.name),this.title=`${this.getType()} ${this.getName()}`,this.size=this.computeSize(),this.size[1]=0,this.outputs[0].pos=[this.size[0]-13,-13],this.outputs[0].label=""}onDrawTitleBox(e,t,n,r){}getName(){return`p${this.id}`}getType(){return r.name}exec(e,t){return(0,i.kb)(e,t).idexpr(this.getName())}}s.desc=`${e} param`,s.title_color="rgba(255, 170, 0, 0.7)",s.collapsable=!1,s.color="transparent",t[`params/${e}`]=s}return t}i=(s.then?(await s)():s)[0];const a=o;r()}catch(l){r(l)}}))},Xmng:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>g});var i=n("cOQ3"),s=n("eck/"),o=n("ubxH"),a=n("kBTl"),l=n("Muaz"),c=n("++2t"),u=n("jeW/"),h=n("5Ao9"),d=n("sVSU"),p=n("wEVW"),f=e([p]);function m(e){const t={},n=e().root.scope.types[d.d],r=`${d.K}`,f=`${r} (previous value).`;function m(e,t){const n=t.currentScope,s=n.findVariable(r);if((0,i.Ft)(s))return null;const o=new l.x({scope:n,sourceNode:null,name:r});return new a.M({scope:n,sourceNode:null,id:o,decl:s})}const g={visible:!1};n.fields.forEach((e=>{if(e.type.isComplex())return;const n=`${d.K}.${e.name}`,r=`${n} (previous value).`;class i extends p.MK{constructor(){super(n),this.addInput(n,e.type.name,{pos:[13,-13],label:""}),this.addInput("context",h.LiteGraph.ACTION,g),this.size=this.computeSize(),this.size[1]=0}onDrawTitleBox(e,t,n,r){}compute(t,n){if(!this.isInputConnected(0))return[];const r=super.compute(t,n),i=n.currentScope,h=this.getInputNode(0).exec(t,n,this.getOriginalSlot(0)),d=m(0,n),p=new a.M({scope:i,id:new l.x({scope:i,name:e.name}),decl:d.type.getField(e.name)}),f=new c.e({scope:i,element:d,postfix:p}),g=new s.a({scope:i,left:f,right:h,operator:"="});return h.type.readable||t.error(h.sourceNode,u.g.InvalidTypeForReading),f.type.writable||t.error(f.sourceNode,u.g.InvalidTypeForWriting),[...r,new o.D({scope:i,expr:g})]}}i.desc=r,i.color="transparent",i.can_be_dropped=!0,i.collapsable=!1,t[`fx/out ${n}`]=i}));class v extends p.MK{constructor(){super(r),n.fields.forEach((e=>{if(e.type.isComplex())return;const t=`${e.name}`;this.addInput(t,e.type.name)})),this.addInput("context",h.LiteGraph.ACTION,g),this.size=this.computeSize()}compute(e,t){if(!this.isInputConnected(0))return[];const r=super.compute(e,t),i=t.currentScope;return[...r,...this.inputs.map(((e,t)=>t)).slice(0,-1).map(((r,u)=>{const h=this.getInputNode(u).exec(e,t,this.getOriginalSlot(u)),d=m(0,t),p=new a.M({scope:i,id:new l.x({scope:i,name:n.fields[u].name}),decl:d.type.getField(n.fields[u].name)}),f=new c.e({scope:i,element:d,postfix:p}),g=new s.a({scope:i,left:f,right:h,operator:"="});return new o.D({scope:i,expr:g})}))]}}return v.desc=f,v.color="transparent",v.can_be_dropped=!0,v.collapsable=!1,t[`fx/out ${r}`]=v,t}p=(f.then?(await f)():f)[0];const g=m;r()}catch(v){r(v)}}))},H1jh:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>a});var i=n("wEVW"),s=e([i]);function o(e){class t extends i.MK{constructor(){super("Part ID"),this.addOutput("id","int",{label:""}),this.size=this.computeSize(),this.size[1]=0,this.size[0]=Math.max(180,this.size[0]),this.outputs[0].pos=[this.size[0]-13,-13]}onDrawTitleBox(e,t,n,r){}exec(e,t,n){const r="partId",s=t.currentScope.findVariable(r),o=(0,i.kb)(e,t);return s?o.idexpr(r):(this.emitError("Part ID has not been found."),null)}}return t.desc="Autogenerated particle ID.",t.collapsable=!1,t.color="transparent",{"fx/partId":t}}i=(s.then?(await s)():s)[0];const a=o;r()}catch(l){r(l)}}))},"4Und":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>d});var i=n("pjXG"),s=n("zHDc"),o=n("0mZ+"),a=n("5Ao9"),l=n("gbPg"),c=n("wEVW"),u=e([l,c]);function h(e){const t="InitRoutine",n={visible:!1};class r extends c.kR{constructor(){super("Init Routine"),this.pure=!1,this.operators=null,this.addOutput("stmts",a.LiteGraph.EVENT,n),this.update()}onDrop(e){this.connect("stmts",e,"context")&&(this.update(),this.highlight(!1))}findParamsDependencies(){return[...new Set(function e(t,n=[]){let r=(r,i)=>{let s=t.graph.links[r];if(!s)return;let o=t.graph.getNodeById(i?s.target_id:s.origin_id);e(o,n),o instanceof c.wp&&n.push(o)};return t.inputs?.filter((e=>e.type!==a.LiteGraph.ACTION&&null!==e.link)).forEach((({link:e})=>r(e,!1))),t.outputs?.filter((e=>e.type==a.LiteGraph.EVENT)).forEach((({links:e})=>e?.forEach((e=>r(e,!0))))),n}(this))]}extend(e){const t=e.uri,n=e.root.scope,r=new s.F$(n),a=new c.Vv(t);this.onBeforeExecution(a,r);let l=this.findParamsDependencies().map((e=>`${e.getType()} ${e.getName()}`)).join(", ");l=l&&`, ${l}`,this.pure=!l;const u=(0,c.kb)(a,r);a.beginFunc();const h=u.func(`void InitRoutine${this.id}(out Part part, int partId ${l})`,(()=>(this.getOutputNodes(0)||[]).map((e=>e.compute(a,r))).flat()));a.endFunc();const d=o.g.mergeReports([e.diagnosticReport,a.diagnostics.resolve()]),p=e.root.instructions.concat([h]);return{root:new i.N({scope:r.globalScope,instructions:p}),diagnosticReport:d,uri:t}}async run(e){return this.extend(e)}onAdded(t){this.operators=(0,l.Z)(e,this),Object.keys(this.operators).forEach((e=>a.LiteGraph.registerNodeType(e,this.operators[e])))}onRemoved(){Object.keys(this.operators).map((e=>this.graph.findNodesByType(e))).flat().forEach((e=>this.graph.remove(e))),Object.keys(this.operators).forEach((e=>a.LiteGraph.unregisterNodeType(e)))}getDocs(){return"Determines initial state of each particle."}}return r.desc=t,{[`fx/${t}`]:r}}[l,c]=u.then?(await u)():u;const d=h;r()}catch(p){r(p)}}))},cIOx:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>p});var i=n("cOQ3"),s=n("Jm+q"),o=n("kBTl"),a=n("Muaz"),l=n("++2t"),c=n("sVSU"),u=n("wEVW"),h=e([u]);function d(e){const t={},n=e().root.scope.types[c.d],r=`${c.K}`,h=`${r} (previous value).`;function d(e,t){const n=t.currentScope,s=n.findVariable(r);if((0,i.Ft)(s))return null;const l=new a.x({scope:n,sourceNode:null,name:r});return new o.M({scope:n,sourceNode:null,id:l,decl:s})}n.fields.forEach((e=>{if(e.type.isComplex())return;const n=`${c.K}.${e.name}`,r=`${n} (previous value).`;class i extends u.MK{constructor(){super(n),this.addOutput(n,e.type.name),this.size=this.computeSize(),this.size[1]=0,this.outputs[0].pos=[this.size[0]-13,-13],this.outputs[0].label=""}onDrawTitleBox(e,t,n,r){}exec(t,n,r){const i=null,c=n.currentScope,u=d(0,n),h=e.name,p=s.L.createFieldDecl(u.type,h),f=new a.x({scope:c,sourceNode:i,name:h}),m=new o.M({scope:c,sourceNode:i,id:f,decl:p});return new l.e({sourceNode:i,scope:c,element:u,postfix:m})}}i.desc=r,i.collapsable=!1,i.color="transparent",t[`fx/${n}`]=i}));class p extends u.MK{constructor(){super(r),this.addOutput(c.K,c.d),this.size=[100,25]}exec(e,t,n){return d(0,t)}}return p.desc=h,t[`fx/${r}`]=p,t}u=(h.then?(await h)():h)[0];const p=d;r()}catch(f){r(f)}}))},mGRc:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>d});var i=n("cOQ3"),s=n("7Nqm"),o=n("E5ji"),a=n("wEVW"),l=e([a]);function c(e,t={}){return`int SpawnRoutine() { return ${(0,i.hj)(t.count)?String(t.count):"$count"}; }`}function u(e){let t=0;return e.addLocal=()=>"t"+t++,e}function h(e){const t="SpawnRoutine",n="count";class r extends a.MK{constructor(){super("SpawnRoutine"),this.addInput(n,"int"),this.addProperty(n,1,"number"),this.size=[180,30],this.updateInputNames()}async run(e){this.onBeforeExecution(null,null);const t=this.getInputNode(0),n={};t||(n.count=+this.properties.count.toFixed(0));const r=await(0,o.X)("://SpawnRoutine.hlsl",c(0,n));return(0,s.Z)(r,e,{$count:(e,n,r)=>(t.compute(u(e),n),t.exec(e,n,this.getOriginalSlot(0)))})}getTitle(){return"Spawn routine"}getDocs(){return"Determines number of particles spawnd per second."}updateInputNames(){const e=this.inputs[0];e.name=e.link?n:`count = ${this.properties.count}`}onConnectionsChange(e,t,n,r,i){super.onConnectionsChange(e,t,n,r,i),this.updateInputNames()}onPropertyChanged(e,t,n){return super.onPropertyChanged(e,t,n),this.updateInputNames(),!0}}return r.desc=t,{[`fx/${t}`]:r}}a=(l.then?(await l)():l)[0];const d=h;r()}catch(p){r(p)}}))},"0j9O":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>h});var i=n("pjXG"),s=n("zHDc"),o=n("0mZ+"),a=n("5Ao9"),l=n("wEVW"),c=e([l]);function u(e){const t="UpdateRoutine",n={visible:!1};class r extends l.kR{constructor(){super("UpdateRoutine"),this.addOutput("stmts",a.LiteGraph.EVENT,n),this.update()}onDrop(e){this.connect("stmts",e,"context")&&(this.update(),this.highlight(!1))}extend(e){const t=e.uri,n=e.root.scope,r=new s.F$(n),a=new l.Vv(t);this.onBeforeExecution(a,r);const c=(0,l.kb)(a,r);a.beginFunc();const u=c.func("bool UpdateRoutine(inout Part part, int partId)",(()=>(this.getOutputNodes(0)||[]).map((e=>e.compute(a,r))).flat()));a.endFunc();const h=o.g.mergeReports([e.diagnosticReport,a.diagnostics.resolve()]),d=e.root.instructions.concat([u]);return{root:new i.N({scope:r.globalScope,instructions:d}),diagnosticReport:h,uri:t}}async run(e){return this.extend(e)}getTitle(){return"Update routine"}getDocs(){return"Determines state of particle after each update."}}return r.desc=t,{[`fx/${t}`]:r}}l=(c.then?(await c)():c)[0];const h=u;r()}catch(d){r(d)}}))},gbPg:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>h});var i=n("s0og"),s=n("sg/T"),o=n("BeyE"),a=n("5Ao9"),l=n("wEVW"),c=e([l]);function u(e,t){const n=`Spawn '${t.title} (${t.id})'`,r={visible:!1};class c extends l.fz{constructor(){super(`Spawn '${t.title}'`);const e=t.findParamsDependencies();this.addInput("count","int"),e.forEach((e=>this.addInput(e.getName(),e.getType()))),this.addInput("context",a.LiteGraph.ACTION,r),this.update()}onBeforeExecution(e,t){this.inputs.slice(1,-1).map(((e,t)=>t)).filter((e=>this.isInputConnected(e))).length&&super.onBeforeExecution(e,t)}compute(e,n){const r=t.findParamsDependencies(),a=r.map(((e,t)=>t+1)).filter((e=>this.isInputConnected(e)));r.forEach(((e,t)=>this.inputs[t+1].name=r[t].title));const c=super.compute(e,n),u=n.currentScope;(0,l.kb)(e,n);let h=this.getInputNode("count")?.exec(e,n,this.getOriginalSlot("count"));if(!h){const{base:e,signed:t,heximal:n,exp:r}=(0,o.F2)("1");h=new i.v({scope:u,base:e,exp:r,signed:t,heximal:n})}const d=`InitRoutine${t.id}`,p=a.map((t=>this.getInputNode(t)?.exec(e,n,this.getOriginalSlot(t)))),f=new s.B({scope:u,name:d,args:p,count:h});a.map((e=>u.findType(r[e-1].getType())));return e.spawnStmts.push(f),[...c,f]}onDrawTitleBox(e,t,n,r){}}return c.desc=n,c.color="transparent",c.can_be_dropped=!0,c.collapsable=!1,{[`fx/actions/${n}`]:c}}l=(c.then?(await c)():c)[0];const h=u;r()}catch(d){r(d)}}))},FzSB:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>a});var i=n("wEVW"),s=e([i]);function o(e,t){const n={};for(let e of t){const{name:t,type:r,value:s}=e;class o extends i.MK{constructor(){super(`${t} (user const)`),this.addOutput("out",r,{label:""}),this.size=this.computeSize(),this.size[1]=0,this.size[0]=Math.max(180,this.size[0]),this.outputs[0].pos=[this.size[0]-13,-13]}onDrawTitleBox(e,t,n,r){}exec(e,n){return(0,i.kb)(e,n).idexpr(t)}}o.desc=`${t} (user const)`,o.collapsable=!1,o.color="transparent",n[`user constants/${t}`]=o}return n}i=(s.then?(await s)():s)[0];const a=o;r()}catch(l){r(l)}}))},"ia+x":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("wKf3");class i extends r._2{constructor(){super(...arguments),this.nodes={},this.node=null}beginComment(e){this.node={name:null}}applyRule(e,t,n){let r=t.slice(1).join(" ");switch(e){case"@node":this.node.name=r.match(/\{([^\{\}]*)\}/)[1].trim();break;case"@desc":this.node.desc=r.trim();break;case"@title":this.node.title=r.trim()}}endComment(){this.node.name&&(this.nodes[this.node.name]=this.node)}}},Qk0k:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>u});var i=n("E5ji"),s=n("wEVW"),o=n("ia+x"),a=e([s]);async function l(e){try{const t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),200!==t.status?(console.error(`unable to request file ''${e}`),null):(0,i.X)(e,t.responseText)}catch(e){console.error(e)}return null}async function c(e){const t=[e];let n=new o.Z;for(let e of t)await n.parse(e,l);for(let e in n.nodes)s.MK.nodesDocs[e]=n.nodes[e]}s=(a.then?(await a)():a)[0];const u=c;r()}catch(h){r(h)}}))},KNfE:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>b});var i=n("LvoO"),s=n("QlGU"),o=n("FJDS"),a=n("kKLm"),l=n("ynia"),c=n("ZhYP"),u=n("yp34"),h=n("GUxJ"),d=n("6977"),p=n("Q8lk"),f=n("AVkT"),m=e([i,c,u]);[i,c,u]=m.then?(await m)():m;const g={height:"calc(100vh)",width:"calc(100vw)",position:"relative",left:"0",right:"0",margin:"0"};function v(e){let t=new p.c,n=new d.cZ(e);return f.b.getRootAsBundle(n).meta().unpackTo(t),t}class y extends l.Component{constructor(e){super(e)}componentDidMount(){o.PF.notifyAppReady()}render(){const e=this.props.name,t=new Uint8Array(a.readFileSync(e)),n=(0,h.H9)(t),r=i.jl(t),o=s.S();return o.start(),console.log(`source: ${v(t).source}`),"emitter"==r.getType()?l.createElement(c.Z,{style:g,emitter:r,timeline:o,controls:n}):l.createElement(u.Z,{style:g,material:r,timeline:o,controls:n})}}const b=y;r()}catch(_){r(_)}}))},ZhYP:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>I});var i=n("cOQ3"),s=n("ynia"),o=n("+2B3"),a=n("y9Bw"),l=n("1fdM"),c=n("7Nqm"),u=n("LvoO"),h=n("E5ji"),d=n("bVKE"),p=n("Kk0H"),f=n("Y4FD"),m=n("HS1/"),g=n("I0Lu"),v=n("KeJm"),y=n("eK+6"),b=n("KPdV"),_=n("O6BO"),x=(n("zwOj"),n("rRgV")),w=e([l,u,v,y]);[l,u,v,y]=w.then?(await w)():w;let S="\nstruct PartLight {\n    float3 pos;\n    float radius;\n    float3 color;\n    float attenuation;\n    float viewZ;\n    int camIdx;\n    bool isFpView;\n    bool isAdaptiveIntensity;\n };\n";const T=await(0,h.X)("://raw",S),E=await(0,c.N)(T),M=(0,l.Nl)(E.root.scope.findType("PartLight")),A=e=>p[e],C={position:"absolute",color:"white",padding:"2px 5px",fontFamily:"consolas, monospace",fontSize:"10px",right:"0",lineHeight:"11px",textShadow:"0 0 1px grey",whiteSpace:"pre"},k={background:"#eee",borderRadius:"0"};function P(e){const t=e.width,n=e.height,r=document.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d").drawImage(e,0,0,t,n),r.getContext("2d").getImageData(0,0,t,n).data}function R(e,t,n,r){switch(n){case"int":case"uint":e.set(t).int(r);break;case"float":e.set(t).float(r);break;case"float2":let n=r;e.set(t).float2(n.x,n.y);break;case"float3":let i=r;e.set(t).float3(i.x,i.y,i.z);break;case"float4":let s=r;e.set(t).float4(s.x,s.y,s.z,s.w);break;case"color":let o=r;e.set(t).float4(o.r,o.g,o.b,o.a)}}function L(e,t,n,r){const i=t.getConstants(),s=(0,d.Z)();if(s.set("elapsedTime").float(i.elapsedTime),s.set("elapsedTimeLevel").float(i.elapsedTimeLevel),s.set("elapsedTimeThis").float(i.elapsedTimeLevel),s.set("parentPosition").float3(0,0,0),s.set("cameraPosition").float3.apply(null,e.position.toArray()),s.set("instanceTotal").int(2),s.set("frameNumber").int(i.frameNumber),n){if(r){const e=n?.presets.find((e=>e.name==r));e?.data.forEach((e=>R(s,e.name,e.type,e.value)))}for(const e in n.values){const t=n.controls[e].type,r=n.values[e];R(s,e,t,r)}}return s.finish()}class O extends a.BufferGeometry{constructor(){super(),this.type="TriangleGeometry";this.setIndex([0,1,2]),this.setAttribute("position",new a.Float32BufferAttribute([0,0,0,0,0,0,0,0,0],3)),this.setAttribute("normal",new a.Float32BufferAttribute([0,0,0,0,0,0,0,0,0],3)),this.setAttribute("uv",new a.Float32BufferAttribute([0,0,0,0,0,0],2))}}class N extends x.Z{constructor(e){super(e),this.env=null,this.helperGeom=[],this.gui=new y.Y,this.uniformGroups=new b.Z,this.deps=new v.iv,this.state={emitter:null,loading:null,nParticles:0,time:"0.00",...this.stateInitials()}}componentDidMount(){super.componentDidMount(),this.gui.mount(this.mount),this.gui.create(this.props.controls),this.uniformGroups.create9(this.props.emitter),this.uniforms=_.$.create(this.props.controls,this.deps),this.createEmitter(this.props.emitter),this.start()}shouldComponentUpdate(e,t){return this.state.emitter!==e.emitter||this.state.nParticles!==t.nParticles||this.state.time!==t.time}componentDidUpdate(e,t){if(super.componentDidUpdate?.(e,t),this.state.loading===this.props.emitter)return;if(this.props.emitter!==this.state.emitter)return void this.createEmitter(this.props.emitter);t.loading,this.state.emitter,t.emitter,this.state.emitter}componentWillUnmount(){this.removeEmitter(),super.componentWillUnmount()}render(){return s.createElement("div",{style:this.props.style,ref:e=>{this.mount=e}},s.createElement(o.Z,{value:this.state.nParticles,total:this.props.emitter.getCapacity(),attached:"top",size:"medium",indicating:!0,style:k}),s.createElement("div",{style:C},"     count: ",s.createElement("span",null,this.state.nParticles),s.createElement("br",null),"simulation: CPU",s.createElement("br",null),"       fps: ",s.createElement("span",null,Math.round(this.state.fps.value)),s.createElement("br",null),"      time: ",s.createElement("span",null,this.state.time),s.createElement("br",null)))}addPassLine(e,t){const n=new a.BufferGeometry,r=u.Tz(e.getData()),i=e.getDesc(),s=new a.InstancedInterleavedBuffer(new Float32Array(r.buffer,r.byteOffset,r.byteLength>>2),i.stride);i.instanceLayout.forEach((e=>{const t=new a.InterleavedBufferAttribute(s,e.size,e.offset);n.setAttribute(e.name,t)}));const o=this.uniforms,l=new a.RawShaderMaterial({uniforms:o,vertexShader:i.vertexShader,fragmentShader:i.pixelShader,transparent:!0,blending:a.NormalBlending,depthTest:!1});l.uniformsGroups=this.uniformGroups.data()[t],n.setDrawRange(0,e.getNumRenderedParticles());const c=new a.LineSegments(n,l);this.scene.add(c),this.passes.push({meshes:[c],instancedBuffer:s})}addPass(e,t){const n=e.getDesc(),r=u.Tz(e.getData());if("line"===n.geometry)return void this.addPassLine(e,t);const{stride:i,instanceLayout:s,vertexShader:o,pixelShader:l,renderStates:c}=n,h=new a.InstancedInterleavedBuffer(new Float32Array(r.buffer,r.byteOffset,r.byteLength>>2),i),d=s.map((e=>({name:e.name,data:new a.InterleavedBufferAttribute(h,e.size,e.offset)}))),p=this.uniforms,g=new a.RawShaderMaterial({uniforms:p,vertexShader:o,fragmentShader:l,transparent:!0,blending:a.NormalBlending,depthTest:!1,side:a.DoubleSide});c?.[f.H.ZENABLE]&&(g.depthTest=c[f.H.ZENABLE]===m.m.TRUE),c?.[f.H.BLENDENABLE]&&(g.transparent=c[f.H.BLENDENABLE]===m.m.TRUE),g.uniformsGroups=this.uniformGroups.data()[t];const v=this.createInstinceGeometry(n.geometry).map((e=>{const r=new a.InstancedBufferGeometry;d.forEach((({name:e,data:t})=>{r.setAttribute(e,t)}));const i={a_position0:e.attributes.position,a_normal0:e.attributes.normal,a_texcoord0:e.attributes.uv};e.index?r.setIndex(e.index):r.setIndex(Array(e.attributes.position.array.length/3).fill(0).map(((e,t)=>t)));for(const e in i)r.attributes[e]=i[e];const s=new a.Mesh(r,g);return s.name=`pass-${t}-${n.geometry}`,s}));this.scene.add(...v),this.passes.push({meshes:v,instancedBuffer:h})}showEnv(){this.env||this.addEnv(),Object.keys(this.env).forEach((e=>this.env[e].visible=!0))}hideEnv(){this.env&&Object.keys(this.env).forEach((e=>this.env[e].visible=!1))}addEnv(){if(this.env)return;this.env={};const e=this.scene;this.env.floor=(t=>{const n=new a.PlaneGeometry(20,20),r=new a.MeshPhongMaterial({shininess:10,color:"#fff"}),i=new a.Mesh(n,r);return i.rotation.x=-.5*Math.PI,i.receiveShadow=!0,e.add(i),i})(),this.env.leftWall=(t=>{const n=new a.PlaneGeometry(20,15),r=new a.MeshPhongMaterial({shininess:10,color:"#fff"}),i=new a.Mesh(n,r);return i.rotation.y=.5*Math.PI,i.position.set(-10,7.5,0),i.receiveShadow=!0,e.add(i),i})(),this.env.rightWall=(t=>{const n=new a.PlaneGeometry(20,15),r=new a.MeshPhongMaterial({shininess:10,color:"#fff"}),i=new a.Mesh(n,r);return i.rotation.y=-.5*Math.PI,i.position.set(10,7.5,0),i.receiveShadow=!0,e.add(i),i})(),this.env.backWall=(t=>{const n=new a.PlaneGeometry(15,20),r=new a.MeshPhongMaterial({shininess:10,color:"#fff"}),i=new a.Mesh(n,r);return i.rotation.z=-.5*Math.PI,i.position.set(0,7.5,-10),i.receiveShadow=!0,e.add(i),i})(),this.env.ceiling=(t=>{const n=new a.PlaneGeometry(20,20),r=new a.MeshPhongMaterial({shininess:10,color:"#fff"}),i=new a.Mesh(n,r);return i.rotation.x=.5*Math.PI,i.position.set(0,15,0),i.receiveShadow=!0,e.add(i),i})()}addPassLight(e){this.showEnv(),this.passes.push({meshes:null,instancedBuffer:null})}addPassLWI(e,t){const n=e.getDesc(),r=u.Tz(e.getData()),i={LwiInstance:{vertexShader:A("lwiMatVS"),fragmentShader:A("lwiMatFS")},LwiColoredInstance:{vertexShader:A("lwiColoredMatVS"),fragmentShader:A("lwiColoredMatFS")}},s=new a.InstancedInterleavedBuffer(new Float32Array(r.buffer,r.byteOffset,r.byteLength>>2),n.stride);s.setUsage(a.DynamicDrawUsage);const o=new a.InterleavedBufferAttribute(s,4,0),l=new a.InterleavedBufferAttribute(s,4,4),c=new a.InterleavedBufferAttribute(s,4,8),h=new a.InterleavedBufferAttribute(s,4,12),d=new a.InterleavedBufferAttribute(s,4,16),p=new a.InterleavedBufferAttribute(s,4,20),f=new a.InterleavedBufferAttribute(s,4,24),m=new a.InterleavedBufferAttribute(s,4,28),g=this.uniforms,v=new a.RawShaderMaterial({uniforms:g,...i[n.instanceName],transparent:!0,blending:a.NormalBlending,depthTest:!0,side:a.DoubleSide});v.uniformsGroups=this.uniformGroups.data()[t];const y=this.createInstinceGeometry(n.geometry,"box").map((r=>{const i=new a.InstancedBufferGeometry;i.index=r.index,i.attributes.position=r.attributes.position,i.attributes.normal=r.attributes.normal,i.attributes.uv=r.attributes.uv,i.attributes.a_dynData_0=o,i.attributes.a_dynData_1=l,i.attributes.a_worldMat_0=c,i.attributes.a_worldMat_1=h,i.attributes.a_worldMat_2=d,i.attributes.a_worldMatPrev_0=p,i.attributes.a_worldMatPrev_1=f,i.attributes.a_worldMatPrev_2=m,i.instanceCount=e.getNumRenderedParticles();const s=new a.Mesh(i,v);return s.name=`pass-lwi-${t}-${n.geometry}`,s}));this.scene.add(...y),this.passes.push({meshes:y,instancedBuffer:s})}addPassDefaultMat(e,t){const n=e.getDesc(),r=u.Tz(e.getData()),i=new a.InstancedInterleavedBuffer(new Float32Array(r.buffer,r.byteOffset,r.byteLength>>2),n.stride);i.setUsage(a.DynamicDrawUsage);const s=new a.InterleavedBufferAttribute(i,3,0),o=new a.InterleavedBufferAttribute(i,4,3),l=new a.InterleavedBufferAttribute(i,1,7),c=this.uniforms,h=new a.RawShaderMaterial({uniforms:c,vertexShader:A("defMatVS"),fragmentShader:A("defMatFS"),transparent:!0,blending:a.NormalBlending,depthTest:!1});h.uniformsGroups=this.uniformGroups.data()[t];const d=this.createInstinceGeometry(n.geometry).map((r=>{const i=new a.InstancedBufferGeometry;i.index=r.index,i.attributes.position=r.attributes.position,i.attributes.normal=r.attributes.normal,i.attributes.uv=r.attributes.uv,i.attributes.offset=s,i.attributes.color=o,i.attributes.size=l,i.instanceCount=e.getNumRenderedParticles();const c=new a.Mesh(i,h);return c.name=`pass-def-${t}-${n.geometry}`,c}));this.scene.add(...d),this.passes.push({meshes:d,instancedBuffer:i})}createInstinceGeometry(e,t="billboard"){let n=null;switch(e){case"box":n=[new a.BoxGeometry];break;case"sphere":n=[new a.SphereGeometry(.5)];break;case"cylinder":n=[new a.CylinderGeometry(.5,.5,1)];break;case"line":console.assert(!1,"line should have been handled using different code branch");break;case"billboard":n=[new a.PlaneGeometry];break;case"triangle":n=[new O];break;default:let r=Object.keys(this.deps.models).find((t=>t.includes(e)));if(r){let e=this.deps.models[r];if(e)return e.map((e=>e.geometry))}return this.createInstinceGeometry(t)}return n}removeEmitter(){this.passes?.forEach((e=>{e.meshes&&this.scene.remove(...e.meshes)})),Object.values(this.textures||{}).forEach((e=>{u.RP(e)})),Object.values(this.meshes||{}).forEach((e=>{u.Qd(e)})),this.meshes={},this.textures={}}createPasses(e){this.passes=[];let t=e.getPassCount();this.hideEnv();for(let n=0;n<t;++n){let t=e.getPass(n),r=t.getDesc();r.vertexShader&&r.pixelShader?this.addPass(t,n):"DefaultShaderInput"==r.instanceName?this.addPassDefaultMat(t,n):"LwiInstance"==r.instanceName||"LwiColoredInstance"==r.instanceName?this.addPassLWI(t,n):"PartLight"==r.instanceName&&this.addPassLight(n)}this.setState({emitter:e,loading:null}),(0,i.c2)(`emitter '${e.getName()}' has been loaded.`)}createEmitter(e){if(this.removeEmitter(),!(0,i.$V)(e))return;(0,i.c2)(`emitter '${e.getName()}' loading in process...`),this.setState({loading:e,emitter:null});const t=this.props.controls,n=Object.values(t?.controls).map((e=>e.type)).includes("mesh");this.deps.resolve(!0,n,(t=>{this.createPasses(e)}))}setupResources(){const e=this.state.emitter,t=e=>{let t=e.source.data,n=t.width,r=t.height,i=null;return i=t instanceof HTMLImageElement?P(t):t.data,u.cU({width:n,height:r},i)},n=e=>{const{geometry:t}=e[0];(0,i.hu)(t);const{vertCount:n,faceCount:r,vertices:s,faces:o,indicesAdj:a,facesAdj:l}=(0,g.xR)(t);return u.n8({vertCount:n,faceCount:r},new Float32Array(s),new Uint32Array(o),new Uint32Array(a),new Uint32Array(l))},r=this.props.controls;for(const i in r.values){const s=r.controls[i].type,o=r.values[i];if("texture2d"==s){const n=this.deps.textures[o];this.textures[o]||(this.textures[o]=t(n)),e.setTexture(i,this.textures[o])}if("mesh"==s){const t=this.deps.models[o];this.meshes[o]||(this.meshes[o]=n(t)),this.gui.debugDraw()[i]&&this.helperGeom.push(...t.map((e=>{const t=e.clone();return t.material=new a.MeshNormalMaterial,t}))),e.setTrimesh(i,this.meshes[o])}}}createLights(){const e=this.state.emitter,t=[];for(let n=0;n<this.passes.length;++n){const r=this.passes[n],i=e.getPass(n);i.getDesc();if(r.meshes);else{console.assert("PartLight"==i.getDesc().instanceName);const e=u.Mb(i.getData());for(let n=0;n<i.getNumRenderedParticles();++n){const r=(0,l.u6)(e.subarray(M.size*n,(n+1)*M.size),M),i=Math.max(...r.color),s=Math.floor(r.color[0]/i*255)|Math.floor(r.color[1]/i*255)<<8|Math.floor(r.color[2]/i*255)<<16,o=new a.PointLight(s,10,r.radius,0==r.attenuation?4:r.attenuation),c=new a.PointLightHelper(o);o.position.set(...r.pos),t.push(o,c)}}}return t}setGeometryInstanceCouts(){const e=this.state.emitter;for(let t=0;t<this.passes.length;++t){const n=this.passes[t],r=e.getPass(t),i=r.getDesc();n.instancedBuffer&&(n.instancedBuffer.needsUpdate=!0),n.meshes?.forEach((e=>{const t=e.geometry;"line"===i.geometry?t.setDrawRange(0,r.getNumRenderedParticles()):t.instanceCount=r.getNumRenderedParticles()}))}}beginFrame(){const e=this.state.emitter,t=this.props.timeline,n=this.props.controls,r=this.props.emitter,i=this.camera,s=this.mount,o=this.deps,a=this.gui.preset();if(!e)return;this.uniformGroups.update9(i,s,n,t,o,r),_.$.update(n,t,o,this.uniforms),this.setupResources();const l=L(i,t,n,a);t.isStopped()||t.isPaused()||(t.tick(),e.simulate(l)),e.prerender(l),e.serialize(),this.setGeometryInstanceCouts(),this.helperGeom.push(...this.createLights()),this.helperGeom.length&&this.scene.add(...this.helperGeom),this.setState({nParticles:e.getNumParticles(),time:t.getConstants().elapsedTimeLevel.toFixed(2)})}endFrame(){this.scene.remove(...this.helperGeom),this.helperGeom=[]}}const I=N;r()}catch(D){r(D)}}),1)},rRgV:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n("2U48"),i=n("y9Bw");const s={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class o{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const a=new i.OrthographicCamera(-1,1,1,-1,0,1),l=new i.BufferGeometry;l.setAttribute("position",new i.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),l.setAttribute("uv",new i.Float32BufferAttribute([0,2,0,0,2,0],2));class c{constructor(e){this._mesh=new i.Mesh(l,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,a)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class u extends o{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof i.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=i.UniformsUtils.clone(e.uniforms),this.material=new i.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new c(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class h extends o{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let s,o;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(s=0,o=1):(s=1,o=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),i.buffers.stencil.setClear(o),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class d extends o{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class p{constructor(e,t){if(this.renderer=e,void 0===t){const n=e.getSize(new i.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=n.width,this._height=n.height,(t=new i.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===s&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===u&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new u(s),this.clock=new i.Clock}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let t=0,r=this.passes.length;t<r;t++){const r=this.passes[t];if(!1!==r.enabled){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),r.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),r.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==h&&(r instanceof h?n=!0:r instanceof d&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new i.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}new i.OrthographicCamera(-1,1,1,-1,0,1);const f=new i.BufferGeometry;f.setAttribute("position",new i.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),f.setAttribute("uv",new i.Float32BufferAttribute([0,2,0,0,2,0],2));class m extends o{constructor(e,t,n,r,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==s?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new i.Color}render(e,t,n){const r=e.autoClear;let i,s;e.autoClear=!1,void 0!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=s),e.autoClear=r}}const g={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new i.Color(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class v extends o{constructor(e,t,n,r){super(),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=r,this.resolution=void 0!==e?new i.Vector2(e.x,e.y):new i.Vector2(256,256),this.clearColor=new i.Color(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new i.WebGLRenderTarget(o,a),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let e=0;e<this.nMips;e++){const t=new i.WebGLRenderTarget(o,a);t.texture.name="UnrealBloomPass.h"+e,t.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(t);const n=new i.WebGLRenderTarget(o,a);n.texture.name="UnrealBloomPass.v"+e,n.texture.generateMipmaps=!1,this.renderTargetsVertical.push(n),o=Math.round(o/2),a=Math.round(a/2)}void 0===g&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const l=g;this.highPassUniforms=i.UniformsUtils.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new i.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const u=[3,5,7,9,11];o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let e=0;e<this.nMips;e++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(u[e])),this.separableBlurMaterials[e].uniforms.texSize.value=new i.Vector2(o,a),o=Math.round(o/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===s&&console.error("THREE.UnrealBloomPass relies on CopyShader");const h=s;this.copyUniforms=i.UniformsUtils.clone(h.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new i.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:i.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new i.Color,this.oldClearAlpha=1,this.basic=new i.MeshBasicMaterial,this.fsQuad=new c(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(let e=0;e<this.nMips;e++)this.renderTargetsHorizontal[e].setSize(n,r),this.renderTargetsVertical[e].setSize(n,r),this.separableBlurMaterials[e].uniforms.texSize.value=new i.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)}render(e,t,n,r,i){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let o=this.renderTargetBright;for(let t=0;t<this.nMips;t++)this.fsQuad.material=this.separableBlurMaterials[t],this.separableBlurMaterials[t].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[t].uniforms.direction.value=v.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[t]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[t].uniforms.colorTexture.value=this.renderTargetsHorizontal[t].texture,this.separableBlurMaterials[t].uniforms.direction.value=v.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[t]),e.clear(),this.fsQuad.render(e),o=this.renderTargetsVertical[t];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeperableBlurMaterial(e){return new i.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new i.Vector2(.5,.5)},direction:{value:new i.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(e){return new i.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}v.BlurDirectionX=new i.Vector2(1,0),v.BlurDirectionY=new i.Vector2(0,1);const y={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new i.Vector2(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvoid SMAAEdgeDetectionVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAAEdgeDetectionVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\n\t\tvec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {\n\t\t\tvec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );\n\n\t\t\t// Calculate color deltas:\n\t\t\tvec4 delta;\n\t\t\tvec3 C = texture2D( colorTex, texcoord ).rgb;\n\n\t\t\tvec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;\n\t\t\tvec3 t = abs( C - Cleft );\n\t\t\tdelta.x = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;\n\t\t\tt = abs( C - Ctop );\n\t\t\tdelta.y = max( max( t.r, t.g ), t.b );\n\n\t\t\t// We do the usual threshold:\n\t\t\tvec2 edges = step( threshold, delta.xy );\n\n\t\t\t// Then discard if there is no edge:\n\t\t\tif ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )\n\t\t\t\tdiscard;\n\n\t\t\t// Calculate right and bottom deltas:\n\t\t\tvec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;\n\t\t\tt = abs( C - Cright );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;\n\t\t\tt = abs( C - Cbottom );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the maximum delta in the direct neighborhood:\n\t\t\tfloat maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );\n\n\t\t\t// Calculate left-left and top-top deltas:\n\t\t\tvec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;\n\t\t\tt = abs( C - Cleftleft );\n\t\t\tdelta.z = max( max( t.r, t.g ), t.b );\n\n\t\t\tvec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;\n\t\t\tt = abs( C - Ctoptop );\n\t\t\tdelta.w = max( max( t.r, t.g ), t.b );\n\n\t\t\t// Calculate the final maximum delta:\n\t\t\tmaxDelta = max( max( maxDelta, delta.z ), delta.w );\n\n\t\t\t// Local contrast adaptation in action:\n\t\t\tedges.xy *= step( 0.5 * maxDelta, delta.xy );\n\n\t\t\treturn vec4( edges, 0.0, 0.0 );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );\n\n\t\t}"},b={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new i.Vector2(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 3 ];\n\t\tvarying vec2 vPixcoord;\n\n\t\tvoid SMAABlendingWeightCalculationVS( vec2 texcoord ) {\n\t\t\tvPixcoord = texcoord / resolution;\n\n\t\t\t// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components\n\n\t\t\t// And these for the searches, they indicate the ends of the loops:\n\t\t\tvOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAABlendingWeightCalculationVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\t#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tArea;\n\t\tuniform sampler2D tSearch;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[3];\n\t\tvarying vec2 vPixcoord;\n\n\t\t#if __VERSION__ == 100\n\t\tvec2 round( vec2 x ) {\n\t\t\treturn sign( x ) * floor( abs( x ) + 0.5 );\n\t\t}\n\t\t#endif\n\n\t\tfloat SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {\n\t\t\t// Not required if searchTex accesses are set to point:\n\t\t\t// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);\n\t\t\t// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +\n\t\t\t//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;\n\t\t\te.r = bias + e.r * scale;\n\t\t\treturn 255.0 * texture2D( searchTex, e, 0.0 ).r;\n\t\t}\n\n\t\tfloat SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\t/**\n\t\t\t\t* @PSEUDO_GATHER4\n\t\t\t\t* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to\n\t\t\t\t* sample between edge, thus fetching four edges in a row.\n\t\t\t\t* Sampling with different offsets in each direction allows to disambiguate\n\t\t\t\t* which edges are active from the four fetched ones.\n\t\t\t\t*/\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\t// We correct the previous (-0.25, -0.125) offset we applied:\n\t\t\ttexcoord.x += 0.25 * resolution.x;\n\n\t\t\t// The searches are bias by 1, so adjust the coords accordingly:\n\t\t\ttexcoord.x += resolution.x;\n\n\t\t\t// Disambiguate the length added by the last step:\n\t\t\ttexcoord.x += 2.0 * resolution.x; // Undo last step\n\t\t\ttexcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 0.0, 1.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 2.0, 0.0 ) * resolution;\n\t\t\t\tif ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.x -= 0.25 * resolution.x;\n\t\t\ttexcoord.x -= resolution.x;\n\t\t\ttexcoord.x -= 2.0 * resolution.x;\n\t\t\ttexcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );\n\n\t\t\treturn texcoord.x;\n\t\t}\n\n\t\tfloat SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tfloat SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {\n\t\t\tvec2 e = vec2( 1.0, 0.0 );\n\n\t\t\tfor ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for\n\t\t\t\te = texture2D( edgesTex, texcoord, 0.0 ).rg;\n\t\t\t\ttexcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign\n\t\t\t\tif ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;\n\t\t\t}\n\n\t\t\ttexcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign\n\t\t\ttexcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign\n\n\t\t\treturn texcoord.y;\n\t\t}\n\n\t\tvec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {\n\t\t\t// Rounding prevents precision errors of bilinear filtering:\n\t\t\tvec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;\n\n\t\t\t// We do a scale and bias for mapping to texel space:\n\t\t\ttexcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );\n\n\t\t\t// Move to proper place, according to the subpixel offset:\n\t\t\ttexcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;\n\n\t\t\treturn texture2D( areaTex, texcoord, 0.0 ).rg;\n\t\t}\n\n\t\tvec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {\n\t\t\tvec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );\n\n\t\t\tvec2 e = texture2D( edgesTex, texcoord ).rg;\n\n\t\t\tif ( e.g > 0.0 ) { // Edge at north\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the left:\n\t\t\t\tvec2 coords;\n\t\t\t\tcoords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );\n\t\t\t\tcoords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)\n\t\t\t\td.x = coords.x;\n\n\t\t\t\t// Now fetch the left crossing edges, two at a time using bilinear\n\t\t\t\t// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to\n\t\t\t\t// discern what value each edge has:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).r;\n\n\t\t\t\t// Find the distance to the right:\n\t\t\t\tcoords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );\n\t\t\t\td.y = coords.x;\n\n\t\t\t\t// We want the distances to be in pixel units (doing this here allow to\n\t\t\t\t// better interleave arithmetic and memory accesses):\n\t\t\t\td = d / resolution.x - pixcoord.x;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the right crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;\n\n\t\t\t\t// Ok, we know how this pattern looks like, now it is time for getting\n\t\t\t\t// the actual area:\n\t\t\t\tweights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );\n\t\t\t}\n\n\t\t\tif ( e.r > 0.0 ) { // Edge at west\n\t\t\t\tvec2 d;\n\n\t\t\t\t// Find the distance to the top:\n\t\t\t\tvec2 coords;\n\n\t\t\t\tcoords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );\n\t\t\t\tcoords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;\n\t\t\t\td.x = coords.y;\n\n\t\t\t\t// Fetch the top crossing edges:\n\t\t\t\tfloat e1 = texture2D( edgesTex, coords, 0.0 ).g;\n\n\t\t\t\t// Find the distance to the bottom:\n\t\t\t\tcoords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );\n\t\t\t\td.y = coords.y;\n\n\t\t\t\t// We want the distances to be in pixel units:\n\t\t\t\td = d / resolution.y - pixcoord.y;\n\n\t\t\t\t// SMAAArea below needs a sqrt, as the areas texture is compressed\n\t\t\t\t// quadratically:\n\t\t\t\tvec2 sqrt_d = sqrt( abs( d ) );\n\n\t\t\t\t// Fetch the bottom crossing edges:\n\t\t\t\tcoords.y -= 1.0 * resolution.y; // WebGL port note: Added\n\t\t\t\tfloat e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;\n\n\t\t\t\t// Get the area for this direction:\n\t\t\t\tweights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );\n\t\t\t}\n\n\t\t\treturn weights;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );\n\n\t\t}"},_={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new i.Vector2(1/1024,1/512)}},vertexShader:"\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvoid SMAANeighborhoodBlendingVS( vec2 texcoord ) {\n\t\t\tvOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component\n\t\t\tvOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tSMAANeighborhoodBlendingVS( vUv );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tColor;\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\t\tvarying vec4 vOffset[ 2 ];\n\n\t\tvec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {\n\t\t\t// Fetch the blending weights for current pixel:\n\t\t\tvec4 a;\n\t\t\ta.xz = texture2D( blendTex, texcoord ).xz;\n\t\t\ta.y = texture2D( blendTex, offset[ 1 ].zw ).g;\n\t\t\ta.w = texture2D( blendTex, offset[ 1 ].xy ).a;\n\n\t\t\t// Is there any blending weight with a value greater than 0.0?\n\t\t\tif ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {\n\t\t\t\treturn texture2D( colorTex, texcoord, 0.0 );\n\t\t\t} else {\n\t\t\t\t// Up to 4 lines can be crossing a pixel (one through each edge). We\n\t\t\t\t// favor blending by choosing the line with the maximum weight for each\n\t\t\t\t// direction:\n\t\t\t\tvec2 offset;\n\t\t\t\toffset.x = a.a > a.b ? a.a : -a.b; // left vs. right\n\t\t\t\toffset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs\n\n\t\t\t\t// Then we go in the direction that has the maximum weight:\n\t\t\t\tif ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical\n\t\t\t\t\toffset.y = 0.0;\n\t\t\t\t} else {\n\t\t\t\t\toffset.x = 0.0;\n\t\t\t\t}\n\n\t\t\t\t// Fetch the opposite color and lerp by hand:\n\t\t\t\tvec4 C = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\ttexcoord += sign( offset ) * resolution;\n\t\t\t\tvec4 Cop = texture2D( colorTex, texcoord, 0.0 );\n\t\t\t\tfloat s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );\n\n\t\t\t\t// WebGL port note: Added gamma correction\n\t\t\t\tC.xyz = pow(C.xyz, vec3(2.2));\n\t\t\t\tCop.xyz = pow(Cop.xyz, vec3(2.2));\n\t\t\t\tvec4 mixed = mix(C, Cop, s);\n\t\t\t\tmixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));\n\n\t\t\t\treturn mixed;\n\t\t\t}\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );\n\n\t\t}"};class x extends o{constructor(e,t){super(),this.edgesRT=new i.WebGLRenderTarget(e,t,{depthBuffer:!1}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new i.WebGLRenderTarget(e,t,{depthBuffer:!1}),this.weightsRT.texture.name="SMAAPass.weights";const n=this,r=new Image;r.src=this.getAreaTexture(),r.onload=function(){n.areaTexture.needsUpdate=!0},this.areaTexture=new i.Texture,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=r,this.areaTexture.minFilter=i.LinearFilter,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const s=new Image;s.src=this.getSearchTexture(),s.onload=function(){n.searchTexture.needsUpdate=!0},this.searchTexture=new i.Texture,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=s,this.searchTexture.magFilter=i.NearestFilter,this.searchTexture.minFilter=i.NearestFilter,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,void 0===y&&console.error("THREE.SMAAPass relies on SMAAShader"),this.uniformsEdges=i.UniformsUtils.clone(y.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new i.ShaderMaterial({defines:Object.assign({},y.defines),uniforms:this.uniformsEdges,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader}),this.uniformsWeights=i.UniformsUtils.clone(b.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new i.ShaderMaterial({defines:Object.assign({},b.defines),uniforms:this.uniformsWeights,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader}),this.uniformsBlend=i.UniformsUtils.clone(_.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new i.ShaderMaterial({uniforms:this.uniformsBlend,vertexShader:_.vertexShader,fragmentShader:_.fragmentShader}),this.needsSwap=!1,this.fsQuad=new c(null)}render(e,t,n){this.uniformsEdges.tDiffuse.value=n.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=n.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}dispose(){this.edgesRT.dispose(),this.weightsRT.dispose(),this.areaTexture.dispose(),this.searchTexture.dispose(),this.materialEdges.dispose(),this.materialWeights.dispose(),this.materialBlend.dispose(),this.fsQuad.dispose()}}var w=n("cOQ3"),S=n("nt2h"),T=n("izR9"),E=n("ynia"),M=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};class A extends E.Component{constructor(){super(...arguments),this.frames=0,this.prevTime=0,this.start=()=>{this.frameId||(this.frameId=requestAnimationFrame(this.animate))},this.stop=()=>{cancelAnimationFrame(this.frameId)}}stateInitials(){return{fps:{min:0,max:0,value:0}}}componentDidMount({grid:e,fog:t}={grid:!0,fog:!0}){const n=this.mount.clientWidth,r=this.mount.clientHeight;if(this.scene=new i.Scene,this.scene.background=new i.Color(13421772),this.camera=this.createCamera(n,r),this.fog=null,t){const e=13421772;this.fog=new i.FogExp2(e,.035)}this.scene.fog=this.fog,this.renderer=this.createRenderer(n,r),this.renderer.setSize(n,r),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.domElement.id="playground-main-canvas",this.renderer.domElement.style.borderBottomLeftRadius="3px",this.renderer.domElement.style.borderBottomRightRadius="3px",this.mount.appendChild(this.renderer.domElement),this.props.canvasRef?.(this.renderer.domElement),this.orbitControls=new T.OrbitControls(this.camera,this.renderer.domElement),this.orbitControls.enabled=!1,this.orbitControls.enableKeys=!1,e&&this.createGridHelper(),window.addEventListener("resize",this.onWindowResize,!1),this.canvas.addEventListener("mouseover",(e=>{this.orbitControls.enabled=!0})),this.canvas.addEventListener("mouseout",(e=>{this.orbitControls.enabled=!1})),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1)}componentWillUnmount(){this.stop(),this.mount.removeChild(this.renderer.domElement),window.removeEventListener("resize",this.onWindowResize,!1),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1)}handleVisibilityChange(){const e=this.props.timeline;document.hidden?(e.pause(),(0,w.c2)("pause timeline")):(e.unpause(),(0,w.c2)("unpause timeline"))}get canvas(){return this.renderer.domElement}createCamera(e,t){const n=new i.PerspectiveCamera(75,e/t,.1,1e4);return n.position.z=3,n.position.y=2,n.position.x=2,n.lookAt(new i.Vector3(0,0,0)),n}createRenderer(e,t){return new i.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0})}createGridHelper(e=200,t=200){const n=new i.GridHelper(e,t);this.scene.add(n)}onWindowResize(){this.camera.aspect=this.mount.clientWidth/this.mount.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.mount.clientWidth,this.mount.clientHeight)}begin(){}end(){this.frames++;const e=(performance||Date).now();return e>this.prevTime+1e3&&(this.updateFps(1e3*this.frames/(e-this.prevTime),100),this.prevTime=e,this.frames=0),e}updateFps(e,t){const n=this.state.fps,r=Math.min(n.min,e),i=Math.max(n.max,e);this.setState({fps:{min:r,max:i,value:e}})}animate(e){this.begin(),this.orbitControls.update(),this.beginFrame(),this.renderFrame(),this.endFrame(),this.frameId=requestAnimationFrame(this.animate),this.end()}beginFrame(){this.props.timeline.tick()}renderFrame(){this.renderer.render(this.scene,this.camera)}endFrame(){}render(){return E.createElement("div",{style:this.props.style,ref:e=>{this.mount=e}})}}M([S.ZP],A.prototype,"handleVisibilityChange",null),M([S.ZP],A.prototype,"onWindowResize",null),M([S.ZP],A.prototype,"animate",null);const C=A;var k=function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o};function P(e){Object.keys(e).forEach((t=>localStorage[t]=e[t]))}function R(e,t){return{width:e.clientWidth*t,height:e.clientHeight*t}}class L extends C{createRenderer(e,t){const n=new i.WebGLRenderer({antialias:!0,preserveDrawingBuffer:!0});return n.setPixelRatio(window.devicePixelRatio),n.setSize(e,t),n}createSceneControls(e,t){const n=this.hdrParams,i=new r.XS({autoPlace:!1});r.XS.TEXT_OPEN="Show Options",this.mount.appendChild(i.domElement),i.domElement.style.position="absolute",i.domElement.style.bottom="20px";let s=i.addFolder("tonemapping");return s.add(n,"bloom").onChange((e=>{P(this.hdrParams)})),s.add(n,"toneMappingExposure",.1,2).onChange((e=>{t.toneMappingExposure=Math.pow(e,4),P(this.hdrParams)})).name("exposure"),s.add(n,"bloomThreshold",0,1).onChange((t=>{e.threshold=Number(t),P(this.hdrParams)})),s.add(n,"bloomStrength",0,3).onChange((t=>{e.strength=Number(t),P(this.hdrParams)})),s.add(n,"bloomRadius",0,1).step(.01).onChange((t=>{e.radius=Number(t),P(this.hdrParams)})),s.open(),i.close(),i}componentDidMount(){super.componentDidMount({grid:!0,fog:!0});const e=this.scene,t=this.camera,n=this.renderer,r=this.mount,s=this.renderer.getPixelRatio(),{width:o,height:a}=R(r,s),l=new m(e,t),c=new v(new i.Vector2(o,a),1.5,.4,.85),u=new x(o,a);this.hdrParams=function(){const e={bloom:!0,toneMappingType:"Linear",toneMappingExposure:1,bloomStrength:2,bloomThreshold:1,bloomRadius:1};return e.bloom=(0,w.HD)(localStorage.bloom)?"true"===localStorage.bloom:e.bloom,e.toneMappingType=localStorage.toneMappingType||"ACESFilmic",e.toneMappingExposure=Number(localStorage.toneMappingExposure||e.toneMappingExposure),e.bloomThreshold=Number(localStorage.bloomThreshold||e.bloomThreshold),e.bloomStrength=Number(localStorage.bloomStrength||e.bloomStrength),e.bloomRadius=Number(localStorage.bloomRadius||e.bloomRadius),e}(),this.renderer.toneMapping=i[`${this.hdrParams.toneMappingType}ToneMapping`],n.toneMappingExposure=this.hdrParams.toneMappingExposure,c.threshold=this.hdrParams.bloomThreshold,c.strength=this.hdrParams.bloomStrength,c.radius=this.hdrParams.bloomRadius;const h={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat,type:i.FloatType},d=new i.WebGLRenderTarget(o,a,h);this.composer=new p(n,d);const f=this.composer;f.setPixelRatio(s),f.addPass(l),f.addPass(c),f.addPass(u),this.hdrControls=this.createSceneControls(c,n)}renderFrame(){this.hdrParams.bloom?this.composer.render():super.renderFrame()}onWindowResize(){super.onWindowResize();const{mount:e,renderer:t}=this,{width:n,height:r}=R(e,t.getPixelRatio());this.composer.setSize(n,r)}}k([S.ZP],L.prototype,"onWindowResize",null);const O=L},yp34:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>m});var i=n("Qn1W"),s=n("Y4FD"),o=n("HS1/"),a=n("y9Bw"),l=n("rRgV"),c=n("KeJm"),u=n("KPdV"),h=n("eK+6"),d=n("O6BO"),p=e([c,h]);[c,h]=p.then?(await p)():p;class f extends l.Z{constructor(e){super(e),this.params={model:"probe"},this.gui=new h.Y,this.uniformGroups=new u.Z,this.deps=new c.iv,this.state={...this.stateInitials()}}reloadModel(){const e=new i.L,t=this.params,n=this.props.material.getPassCount(),r=this.scene;if(this.scene.remove(...this.groups||[]),"plane"===t.model){const e=new a.PlaneGeometry(2,2),t=new a.Mesh(e,null),n=new a.Group;return n.add(t),this.groups=[n],r.add(...this.groups),void this.reloadMaterial()}e.load(`./assets/models/${t.model}.obj`,(e=>{this.groups=Array(n).fill(null).map((t=>e.clone(!0))),this.groups.forEach((e=>{e.children.forEach((e=>{e.geometry}))})),r.add(...this.groups),this.reloadMaterial()}),(e=>{console.log(e.loaded/e.total*100+"% loaded")}),(e=>{console.log("An error happened"),this.groups=null}))}componentDidMount(){super.componentDidMount(),this.gui.mount(this.mount),this.gui.create(this.props.controls),this.hdrControls.add(this.params,"model",["probe","cube","plane"]).onChange((e=>{this.reloadModel()})),this.uniforms=d.$.create(this.props.controls,this.deps),this.uniformGroups.create9(this.props.material),this.reloadModel(),this.start()}shouldComponentUpdate(e,t){return this.props.material!==e.material}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.gui.create(this.props.controls);const n=this.props.material.getPassCount();this.scene.remove(...this.groups),n>0&&(this.groups=Array(n).fill(null).map((e=>this.groups[0].clone(!0)||null)),this.scene.add(...this.groups)),this.reloadMaterial()}reloadMaterial(){const e=this.groups,t=this.props.controls,n=Object.values(t?.controls).map((e=>e.type)).includes("texture2d"),r=Object.values(t?.controls).map((e=>e.type)).includes("mesh");this.deps.resolve(n,r),this.uniformGroups.create9(this.props.material);for(let t=0;t<this.props.material.getPassCount();++t){const n=e[t],{vertexShader:r,pixelShader:i,renderStates:l}=this.props.material.getPass(t).getDesc(),c=this.uniforms,u=new a.RawShaderMaterial({uniforms:c,vertexShader:r,fragmentShader:i,blending:a.NormalBlending,transparent:!1,depthTest:!0});if(u.uniformsGroups=this.uniformGroups.data()[t],l[s.H.ZENABLE]&&(u.depthTest=l[s.H.ZENABLE]===o.m.TRUE),l[s.H.BLENDENABLE]&&(u.transparent=l[s.H.BLENDENABLE]===o.m.TRUE),l[s.H.CULLFACE])switch(l[s.H.CULLFACE]){case o.m.FRONT:u.side=a.FrontSide;break;case o.m.BACK:u.side=a.BackSide;break;case o.m.FRONT_AND_BACK:u.side=a.DoubleSide}for(const e of n.children){const t=e;t.material=u,t.geometry.attributes.a_position0=t.geometry.attributes.position,t.geometry.attributes.a_normal0=t.geometry.attributes.normal,t.geometry.attributes.a_texcoord0=t.geometry.attributes.uv,t.geometry.attributes.a_v_position=t.geometry.attributes.position,t.geometry.attributes.a_v_normal=t.geometry.attributes.normal,t.geometry.attributes.a_v_texcoord0=t.geometry.attributes.uv}}}beginFrame(){const{timeline:e,controls:t,material:n}=this.props,{deps:r,camera:i,mount:s}=this;d.$.update(t,e,r,this.uniforms),this.uniformGroups.update9(i,s,t,e,r,n),super.beginFrame()}}const m=f;r()}catch(e){r(e)}}))},KPdV:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("y9Bw"),i=n("ei2b"),s=n("3KVU");function o({padding:e},t,n){const r=e/16>>>0,i=e%16/4,s=n.uniforms[r+0].value;t.toArray().forEach(((e,t)=>s.setComponent(i+t,e)))}function a({padding:e},t,n){const r=e/16>>>0;n.uniforms[r+0].value.fromArray(t.elements,0),n.uniforms[r+1].value.fromArray(t.elements,4),n.uniforms[r+2].value.fromArray(t.elements,8),n.uniforms[r+3].value.fromArray(t.elements,12)}function l({padding:e},t,n){const r=e/16>>>0;n.uniforms[r+0].value.fromArray(t.elements,0),n.uniforms[r+1].value.fromArray(t.elements,4),n.uniforms[r+2].value.fromArray(t.elements,8)}function c(e,t,n,r,s){const o=`${t.name}${n>=0?`[${n}]`:""}`;let a=0;if(-1!=t.length){const e=t.size/t.length>>>0;console.assert(e*t.length===t.size,"padding?!"),a=e*n}const l=(t.padding+a)/16>>>0,c=(t.padding+a)%16/4,u=e.controls[o],h=e.values[o];if(-1!==["uint","int","uint","float"].indexOf(u.type)){const e=(0,i.ky)((0,i.pC)(h,u.type,r),u.type);s.uniforms[l].value.setComponent(c,e)}else s.uniforms[l].value=(0,i.pC)(h,u.type,r)}function u({padding:e},t,n){const r=e/16>>>0,i=e%16/4;n.uniforms[r].value.setComponent(i,t)}function h(e){return(new r.Matrix4).copy(e).transpose()}class d{data(){return this.uniformGroups}create9(e){this.uniformGroups?.forEach((e=>e.forEach((e=>e.dispose())))),this.uniformGroups=[];for(let t=0;t<e.getPassCount();++t){const n=e.getPass(t).getDesc().cbuffers;this.uniformGroups.push(d.create(n))}}static create(e){const t=[];for(let n of e){let{name:e,size:i,usage:s}=n;const o=i/16,a=new r.UniformsGroup;a.setName(e);for(let e=0;e<o;++e)a.add(new r.Uniform(new r.Vector4(0,0,0,0)));t.push(a)}return t}update9(e,t,n,r,i,s){for(let o=0;o<s.getPassCount();++o){const a=s.getPass(o).getDesc().cbuffers,l=this.uniformGroups[o];d.update(e,t,n,r,i,l,a)}}static update(e,t,n,i,d,p,f){const m=new r.Matrix4,g=(new r.Matrix4).copy(m),v=(new r.Matrix4).copy(e.matrixWorldInverse),y=(new r.Matrix4).copy(e.projectionMatrix),b=(new r.Matrix4).multiplyMatrices(v,g),_=(new r.Matrix4).multiplyMatrices(y,b),x=(new r.Matrix4).multiplyMatrices(y,v),{clientWidth:w,clientHeight:S}=t,T=i.getConstants();for(let t=0;t<f.length;++t){let r=f[t],i=p[t],{name:E,size:M,usage:A}=r;switch(E){case s._d:for(let e of r.fields)if(-1==e.length)c(n,e,-1,d,i);else for(let t=0;t<e.length;++t)c(n,e,t,d,i);break;case s.s0:for(let t of r.fields)switch(t.semantic){case"ELAPSED_TIME_LEVEL":u(t,T.elapsedTimeLevel,i);break;case"ELAPSED_TIME":u(t,T.elapsedTime,i);break;case"FRAME_NUMBER":u(t,T.frameNumber,i);break;case"MODEL_MATRIX":a(t,g,i);break;case"MODEL_VIEW_MATRIX":a(t,b,i);break;case"MODEL_VIEW_PROJECTION_MATRIX":a(t,h(_),i);break;case"VIEW_MATRIX":a(t,v,i);break;case"PROJECTION_MATRIX":a(t,y,i);break;case"CAMERA_POSITION":o(t,e.position,i);break;default:console.error(`GLOBAL_UNIFORMS: unknown semantic <${t.semantic}> found.`)}break;default:for(let e of r.fields)switch(e.semantic){case"COMMON_VIEWPROJ_MATRIX":a(e,h(x),i);break;case"COMMON_VP_PARAMS":{const t=e.padding/16>>>0;i.uniforms[t+0].value.fromArray([1/w,1/S,.5/w,.5/S])}break;case"VS_REG_COMMON_OBJ_WORLD_MATRIX_DEBUG":l(e,m,i)}}}}}},O6BO:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});var r=n("ei2b");class i{static create(e,t){const n={elapsedTime:{value:0},elapsedTimeLevel:{value:0}};if(e)for(let i in e.values){let s=e.values[i],o=e.controls[i];n[i]={value:(0,r.pC)(s,o.type,t)}}return n}static update(e,t,n,i){const s=t.getConstants();if(i.elapsedTime.value=s.elapsedTime,i.elapsedTimeLevel.value=s.elapsedTimeLevel,e)for(let t in e.values){let s=e.values[t],o=e.controls[t];i[t]&&(i[t].value=(0,r.pC)(s,o.type,n))}}}},I0Lu:(e,t,n)=>{"use strict";n.d(t,{xR:()=>c});var r=n("cOQ3"),i=n("y9Bw");const s=-1>>>0;class o{}function a(e,t,n,a,l=0){const c=new Array(a),u=new Array(a),h=new Array(3*t);u.fill(s),h.fill(s);for(let n=0;n<3*t;++n){let t=e[n];if(-1!==t){if(t>=a)return(0,r.hu)(!1),null;h[n]=u[t],u[t]=n}}const d={},p=e=>new i.Vector3(n[3*e+0],n[3*e+1],n[3*e+2]);if(0==l)for(let t=0;t<a;++t){let n=p(t).x,r=p(t).y,i=p(t).z;const a=`${n.toFixed(3)}:${r.toFixed(3)}:${i.toFixed(3)}`;let l=s;for(let n=d[a];null!=n;n=n.next)if(n.v.x==p(t).x&&n.v.y==p(t).y&&n.v.z==p(t).z){let r=u[t],i=!1;for(;r!=s;){const t=r/3;if(e[3*t]==n.index||e[3*t+1]==n.index||e[3*t+2]==n.index){i=!0;break}r=h[r]}if(!i){l=n.index;break}}if(l!=s)c[t]=l;else{let e=new o;e.v=p(t),e.index=t,e.next=d[a],d[a]=e,c[t]=t}}else{const o=function(e,t){const n=new Array(t),s=t=>new i.Vector3(e[3*t+0],e[3*t+1],e[3*t+2]);for(let e=0;e<t;++e)n[e]=e;if(t>1){let e=t>>>0;for(let r=t>>1>>>0;--r>>>0!=-1>>>0;){let t=r,i=r+r+1;const o=n[t];for(;i<e;){let r=n[i];if(i+1<e){const e=n[i+1];s(e).x<=s(r).x&&(i++,r=e)}if(s(r).x>s(o).x)break;n[t]=n[i],t=i,i+=i+1}n[t]=o}for(;--e>>>0!=-1>>>0;){const i=n[e];n[e]=n[0];let o=0,a=1;for(;a<e;){let t=n[a];if(a+1<e){const e=n[a+1];s(e).x<=s(t).x&&(a++,t=e)}if(s(t).x>s(i).x)break;n[o]=n[a],o=a,a+=a+1}(0,r.hu)(o<t),n[o]=i}}return n}(n,a);c.fill(s);const d=l*l;let f=0,m=0;for(;m<a;){for(;f<a&&p(m).x-p(f).x<=l;)++f;let n=o[m];if((0,r.hu)(n<a),c[n]==s){c[n]=n;const i=p(n);for(let l=m+1;l<f;++l){let f=o[l];if((0,r.hu)(f<a),c[f]==s){if(p(f).sub(i).lengthSq()<d){let i=u[n],o=!1;for(;i!=s;){const s=i/3;if((0,r.hu)(s<t),(0,r.hu)(e[3*s]==n||e[3*s+1]==n||e[3*s+2]==n),e[3*s]==f||e[3*s+1]==f||e[3*s+2]==f){o=!0;break}i=h[i]}o||(c[f]=n)}}}}++m}}return c}class l{}function c(e){(0,r.hu)(e.attributes.position),(0,r.hu)(e.attributes.normal),(0,r.hu)(e.attributes.uv),(0,r.hu)(!e.index);const t=e.attributes.position.array,n=e.attributes.normal.array,o=e.attributes.uv.array,c=e.attributes.position.count,u=c/3,h=Array(c).fill(0).map(((e,t)=>t)),d=a(h,u,t,c),p=function(e,t,n,o,a){const c=new Array(3*t),u={},h=e=>new i.Vector3(n[3*e+0],n[3*e+1],n[3*e+2]);for(let n=0;n<t;++n){let t=e[3*n],r=e[3*n+1],i=e[3*n+2];if(-1==t||-1==r||-1==i)continue;if(t>=o||r>=o||i>=o)return null;const s=a[t],c=a[r],h=a[i];if(s!=c&&s!=h&&c!=h)for(let t=0;t<3;++t){const r=a[e[3*n+t]],i=a[e[3*n+(t+1)%3]],s=a[e[3*n+(t+2)%3]],o=`${r}`;let c=new l;c.v1=r,c.v2=i,c.vOther=s,c.face=n,c.next=u[o],u[o]=c}}c.fill(s);for(let n=0;n<t;++n){let t=e[3*n],o=e[3*n+1],l=e[3*n+2];if(-1==t||-1==o||-1==l)continue;const d=a[t],p=a[o],f=a[l];if(d!=p&&d!=f&&p!=f)for(let t=0;t<3;++t){if(c[3*n+t]!=s)continue;const o=a[e[3*n+(t+1)%3]],l=a[e[3*n+t]],d=a[e[3*n+(t+2)%3]],p=`${o}`;let f=u[p],m=null,g=s;for(;null!=f;){if(f.v2==l&&f.v1==o){g=f.face;break}m=f,f=f.next}let v=f,y=m,b=-2;if(f)for(m=f,f=f.next;null!=f;){if(f.v2==l&&f.v1==o){const e=h(l),t=h(o),n=h(d);let r=(new i.Vector3).subVectors(e,t),s=(new i.Vector3).subVectors(e,n);const a=r.cross(s).normalize();if(-2==b){const e=h(v.v1),t=h(v.v2),n=h(v.vOther);r=(new i.Vector3).subVectors(e,t),s=(new i.Vector3).subVectors(e,n),b=(new i.Vector3).crossVectors(r,s).normalize().dot(a)}const c=h(f.v1),u=h(f.v2),p=h(f.vOther);r=(new i.Vector3).subVectors(c,u),s=(new i.Vector3).subVectors(c,p);const _=(new i.Vector3).crossVectors(r,s).normalize().dot(a);_>b&&(v=f,y=m,g=f.face,b=_)}m=f,f=f.next}if(g!=s){(0,r.hu)(null!=v),null!=y?y.next=v.next:u[p]=v.next,(0,r.hu)(c[3*n+t]==s),c[3*n+t]=g;const i=`${l}`;for(f=u[i],m=null;null!=f;){if(f.face==n&&f.v2==o&&f.v1==l){null!=m?m.next=f.next:u[i]=f.next;break}m=f,f=f.next}let h=!1;for(let e=0;e<t;++e)if(g==c[3*n+e]){h=!0,c[3*n+t]=s;break}if(!h){let t=0;for(;t<3;++t){let n=e[3*g+t];if(-1!=n&&a[n]==o)break}t<3&&(c[3*g+t]=n)}}}}return c}(h,u,t,c,d),f=function(e,t,n,i,o){const a=new Array(6*t);let l=0,c=0;for(let u=0;u<t;++u)for(let h=0;h<3;++h){a[c]=e[l],++c,++l,(0,r.hu)(c<6*t);const d=i[3*u+h];if(d==s)a[c]=e[3*u+(h+2)%3];else{let t=e[3*u+h],i=e[3*u+(h+1)%3];if(-1==t||-1==i)a[c]=-1;else{if(t>=o||i>=o)return(0,r.hu)(!1),null;t=n[t],i=n[i];let l=s;for(let s=0;s<3;++s){const a=e[3*d+s];if(-1==a)break;if(a>=o)return(0,r.hu)(!1),null;n[a]!=t&&n[a]!=i&&(l=a)}a[c]=l==s?e[3*u+(h+2)%3]:l}}++c}return a}(h,u,d,p,c),m=new Array(8*c);for(let e=0;e<c;++e){for(let n=0;n<3;++n)m[8*e+0+n]=t[3*e+n];for(let t=0;t<3;++t)m[8*e+3+t]=n[3*e+t];for(let t=0;t<2;++t)m[8*e+6+t]=o[2*e+t]}return{vertCount:c,faceCount:u,vertices:m,faces:h,facesAdj:p,indicesAdj:f}}},ei2b:(e,t,n)=>{"use strict";n.d(t,{ky:()=>o,pC:()=>s});var r=n("y9Bw");const i=function(e=512,t=512){const n=e*t,i=new Uint8Array(4*n),s=new r.Color(16777215),o=Math.floor(255*s.r),a=Math.floor(255*s.g),l=Math.floor(255*s.b);for(let e=0;e<n;e++){const t=4*e;i[t]=o,i[t+1]=a,i[t+2]=l,i[t+3]=255}const c=new r.DataTexture(i,e,t);return c.needsUpdate=!0,c}(1,1);function s(e,t,n){let s=new ArrayBuffer(4);new DataView(s);switch(t){case"color":{const{r:t,g:n,b:i,a:s}=e;return new r.Vector4(t,n,i,s)}case"float4":{const{x:t,y:n,z:i,w:s}=e;return new r.Vector4(t,n,i,s)}case"float3":{const{x:t,y:n,z:i}=e;return new r.Vector3(t,n,i)}case"float2":{const{x:t,y:n}=e;return new r.Vector2(t,n)}case"mesh":return null;case"texture2d":return n.textures[e]||i;case"uint":case"int":case"float":return e;default:console.error("unsupported type found")}return null}function o(e,t){let n=new ArrayBuffer(4),r=new DataView(n);switch(t){case"float":return e;case"int":return r.setInt32(0,e),r.getFloat32(0);case"uint":return r.setUint32(0,e),r.getFloat32(0);default:console.error("unsupported type found")}return null}},KeJm:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{BG:()=>g,IM:()=>v,iv:()=>w});var i=n("cOQ3"),s=n("FJDS"),o=n("Ctio"),a=n("8ajK"),l=n("VXBr"),c=n("y9Bw"),u=n("Qn1W"),h=n("WH/H"),d=e([o]);function p(){return`${o.dP}/textures`}function f(){return`${o.dP}/models`}function m(){return window.navigator.platform.includes("Mac")?window.location.pathname:window.location.pathname.substr(1)}function g(){if(s.d()){const e=l.dirname(m()),t=l.join(e,p());return a.readdirSync(t)}return Object.values(o.ZG.textures).filter((e=>(0,i.HD)(e))).map((e=>l.basename(e))).sort()}function v(){if(s.d()){const e=l.dirname(m()),t=l.join(e,f());return a.readdirSync(t).filter((e=>".obj"===l.extname(e)))}return Object.values(o.ZG.models).filter((e=>(0,i.HD)(e))).map((e=>l.basename(e))).sort()}function y(e){const t=new u.L;return new Promise(((n,r)=>{t.load(`${f()}/${e}`,(t=>{console.log(`model '${f()}/${e}.obj' is loaded.`),n(t.children)}),(e=>{}),(e=>{console.log("An error happened"),r()}))}))}function b(e){const t=new h.U;return new Promise(((n,r)=>{t.load(`${p()}/${e}`,(t=>{console.log(`texture '${p()}/${e}' is loaded.`),n(t)}),(e=>{}),(e=>{console.log("An error happened"),r()}))}))}function _(e){if(".tga"===l.extname(e))return b(e);const t=new c.TextureLoader;return new Promise(((n,r)=>{t.load(`${p()}/${e}`,(t=>{console.log(`texture '${p()}/${e}' is loaded.`),n(t)}),(e=>{}),(e=>{console.log("An error happened"),r()}))}))}function x(e,t,n,r){const i=new Set,s=new Set;e&&g().forEach((e=>s.add(e))),v().forEach((e=>i.add(e)));let o=1,a=()=>{o--,0==o&&r?.(n)};for(let e of i.values())n.models[e]||(o++,y(e).then((t=>{n.models[e]=t,a()})));for(let e of s.values())n.textures[e]||(o++,_(e).then((t=>{n.textures[e]=t,a()})));a()}o=(d.then?(await d)():d)[0];class w{constructor(){this.models={},this.textures={}}resolve(e,t,n){x(e,0,this,n)}}r()}catch(S){r(S)}}))},"eK+6":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Y:()=>d});var i=n("cOQ3"),s=n("GUxJ"),o=n("2U48"),a=n("KeJm"),l=n("ls5I"),c=n("Krap"),u=n.n(c),h=e([a]);a=(h.then?(await h)():h)[0];class d{constructor(){this.gui=null,this.presetName=null,this.meshDebugDraw={}}mount(e){this.mountEl=e}detach(){this.mountEl.removeChild(this.gui.domElement)}attach(){this.mountEl.appendChild(this.gui.domElement)}debugDraw(){return this.meshDebugDraw}preset(){return this.presetName}static hash(e){return JSON.stringify(e.controls)+JSON.stringify(e.presets)+JSON.stringify(Object.values(e.values).filter(i.HD))}remove(){this.gui&&(this.detach(),this.gui.destroy(),this.gui=null,this.hash=null)}create(e){if(!e)return;const t=d.hash(e);if(this.hash!=t&&this.remove(),0==Object.keys(e.values).length)return null;if(this.gui)return;this.presetName&&!e.presets.find((e=>e.name===this.presetName))&&(this.presetName=null);const n=new o.XS({autoPlace:!1});for(let t in e.values){let r=e.controls[t],i=r.properties.__type||r.type,o=r.properties.__caption||r.name,l=null;switch(i){case"int":case"uint":case"float":l=n.add(e.values,t);break;case"slider":let i=r.properties.__min,c=r.properties.__max,u=r.properties.__step;l=n.add(e.values,t,i,c,u);break;case"color":let h=n.addFolder(o),d=e.values[t];h.addColor({color:(0,s.Cw)(d)},"color").onChange((e=>(0,s.qe)(e,d))),h.add({opacity:d.a},"opacity",0,1).onChange((e=>d.a=e)),h.open();break;case"float2":let p=n.addFolder(o);p.add(e.values[t],"x"),p.add(e.values[t],"y"),p.close();break;case"float3":let f=n.addFolder(o);f.add(e.values[t],"x"),f.add(e.values[t],"y"),f.add(e.values[t],"z"),f.close();break;case"float4":let m=n.addFolder(o);m.add(e.values[t],"x"),m.add(e.values[t],"y"),m.add(e.values[t],"z"),m.add(e.values[t],"w"),m.close();break;case"texture2d":{const r=(0,a.BG)();let i=e.values[t];r.includes(i)||(i=r[0]),n.add(e.values,t,r).setValue(i)}break;case"mesh":{let r=e.values[t];const i=(0,a.IM)();i.includes(r)||(r=i[0]);const s=n.addFolder(o);s.add(e.values,t,i).setValue(r),this.meshDebugDraw[t]||=!1,s.add(this.meshDebugDraw,t).name("show (debug)"),s.open()}}l&&l.name(o)}e.presets?.length&&n.add(this,"presetName",["",...e.presets.map((e=>e.name))]).onChange((t=>{console.log("apply preset",t);const n=e.presets.find((e=>e.name==t));n&&(n.data.forEach((t=>{e.controls[t.name]&&(e.values[t.name]=(0,s.Ve)(t.type,t.value))})),setTimeout((()=>{this.remove(),this.create(e)}),10))})).name("preset");const r="<center>copy to clipboard</center>";n.add({[r]:()=>{u()((0,s.TC)(e),{debug:!0}),(0,l.Am)({size:"tiny",type:"info",title:"Copied to clipboard",animation:"bounce",time:2e3})}},r),n.open(),n.domElement.style.position="absolute",n.domElement.style.top="2px",this.gui=n,this.hash=t,this.attach()}}r()}catch(e){r(e)}}))},FJDS:(e,t,n)=>{"use strict";n.d(t,{PF:()=>l,Z_:()=>a,d:()=>s});var r=n("s0+s"),i=n.n(r);function s(){return i()()}const o=s()?n("isQe").ipcRenderer:null,a={argv:()=>o?.sendSync("argv",{}),saveFile:(e,t)=>o?.sendSync("process-save-file-silent",{name:e,data:t}),saveFileDialog:(e,t)=>(e={title:"Save File",defaultPath:"",buttonLabel:"Save",filters:[],...e},o?.sendSync("process-save-file-dialog",{data:t,options:e}))},l={notifyAppReady(){o?.send("app-ready",{})}}},Ctio:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{BX:()=>N,Bc:()=>C,H:()=>k,LO:()=>R,OL:()=>L,ZG:()=>I,ZP:()=>z,dP:()=>O,dy:()=>_,sc:()=>x,y$:()=>P});var i=n("U50j"),s=n("CWQE"),o=n("b/L/"),a=n("ceAs"),l=n("FJDS"),c=n("cxbA"),u=n("va7o"),h=n("qLko"),d=n("vpSu"),p=n("ls5I"),f=n("M2zF"),m=(n("/lOe"),e([o]));o=(m.then?(await m)():m)[0];const g=e=>e===s.bZ(x)?{status:200,text:async()=>`/* created: ${new Date} */\n\n`}:null,v=e=>g(e)||fetch(e),y=(0,f.Z)({type:a.qW,latest:!0,async process({getState:e,action:t},n,r){n({type:a.XD}),n({type:a.R8,payload:{}});const s=t.payload.filename;try{const e=await v(s);if(200!==e.status)console.warn(`Could not find file ${s}.`),n({type:a.hq,payload:{}});else{const t=i.SD(s),r=await e.text();n("xfx"===t?{type:a.wI,payload:{filename:s,content:r}}:{type:a.r$,payload:{filename:s,content:r}})}}catch(e){console.warn(`Could not find file ${s}.`),n({type:a.hq,payload:{error:e}})}finally{r()}}}),b="/NotFound",_="/:view/:fx?/:name?/:pass?/:property?",x="unnamed",w="playground",S="bytecode",T="program",E="ast",M="preprocessor",A="graph",C="@preprocessed",k="@graph",P="last-session-id",R=[".fx",".xfx",".vsh",".psh",".csh",".vs",".ps",".hlsl"],L=l.d()?"./":`${window.location.pathname}`,O=`${L}assets`,N=`${O}/graph`;let I=await(await fetch(`${O}/manifest.json`)).json();const D=[w,S,T,E,M,A],F=(0,f.Z)({type:h.nk,latest:!0,debounce:10,async process({getState:e,action:t},n,r){const i=t.payload.location.pathname,{sourceFile:s,depot:a}=e(),l=localStorage.getItem(P)||x;if("/"===i)return l!==x&&setTimeout((()=>{(0,p.Am)({type:"warning",title:"Last session",description:"Last session has been loaded.",animation:"fade up",time:2e3})}),2e3),u.m.push(`/${w}/${l}`),r();const h=(0,d.LX)(i,{path:_,exact:!1});if(h){const{view:e,fx:t,name:i}=h.params;if(-1!==D.indexOf(e)){if(!t)return u.m.push(`/${e}/${x}`),r();const i=await c.gc(a,t);s.uri!==i&&n(o.sv.openFile(i))}return r()}i!==b&&u.m.push(b),r()}}),z=[y,F,(0,f.Z)({type:a.hq,async process({getState:e},t,n){const r=e().router.location.pathname,i=(0,d.LX)(r,{path:_,exact:!1});if(i){const{view:e,fx:t}=i.params;t?u.m.push(b):u.m.push(`/${e}/${x}`)}return n()}})];r()}catch(e){r(e)}}),1)},"/KxH":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>v});var i=n("ceAs"),s=n("M2zF"),o=n("CWQE"),a=n("FJDS"),l=n("gOsK"),c=n("VXBr"),u=n("Ctio"),h=n("cOQ3"),d=e([u]);async function p(e){let t=m();t.files=Object.values(u.ZG.fx.demos).filter((e=>(0,h.HD)(e))).map((e=>`${u.OL}${e}`)).sort(),t.path="/demos",t.totalFiles=t.files.length;let n=m();n.files=Object.values(u.ZG.graph).filter((e=>(0,h.HD)(e))).map((e=>`${u.OL}${e}`)).sort(),n.path="/graph",n.totalFiles=n.files.length,e.folders=[t,n],e.path="/",e.totalFiles=t.totalFiles+n.totalFiles}function f(e,t,n,r){try{if(t.path=o.bZ(e),!l.statSync(e).isDirectory())return;if(r?.includes(c.basename(e)))return;l.readdirSync(e).forEach((async i=>{let s=c.join(e,i),a=l.statSync(s);if(a.isFile()&&(n&&-1==n.indexOf(c.extname(i))||(t.files=t.files||[],t.files.push(o.bZ(s)),t.totalFiles++)),a.isDirectory()){t.folders=t.folders||[];let e={path:o.bZ(s),totalFiles:0};f(s,e,n,r),t.folders.push(e),t.totalFiles+=e.totalFiles}}))}catch(e){console.log(e)}}u=(d.then?(await d)():d)[0];const m=()=>({path:null,files:[],folders:[],totalFiles:0});const g=(0,s.Z)({type:i.Nn,latest:!0,async process({getState:e,action:t},n,r){const{s3d:{env:s}}=e(),l=m(),h=c.dirname(window.navigator.platform.includes("Mac")?window.location.pathname:window.location.pathname.substr(1));if(a.d()){if(s){let e=m();await f(s.Get("influx-sfx-dir"),e,u.LO);let t=m();await f(s.Get("sdrproj-dir"),t,u.LO,["maya_fx","deploy_test","nrd"]);let n=m(),r=c.join(h,u.BX);await f(r,n,u.LO),l.path=o.bZ(c.dirname(s.Get("project-dir"))),l.folders=[e,t,n],l.totalFiles=e.totalFiles+t.totalFiles}else{let e=c.join(h,`${u.dP}/fx/demos`);await f(e,l,u.LO)}l.files.push(o.bZ(u.sc))}else await p(l);n({type:i.AK,payload:{root:l}}),r()}}),v=[g,(0,s.Z)({type:i.AK,async process({getState:e,action:t},n,r){r()}})];r()}catch(y){r(y)}}))},"5FPh":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>P});var i=n("cOQ3"),s=n("BNML"),o=n("uI6s"),a=n("ZLcK"),l=n("LvoO"),c=n("U50j"),u=n("CWQE"),h=n("ceAs"),d=n("FJDS"),p=n("cxbA"),f=n("R46Y"),m=n("J7+d"),g=n("M2zF"),v=n("GUxJ"),y=n("RSd/"),b=n("VXBr"),_=n.n(b),x=n("ls5I"),w=(n("/lOe"),e([s,o,a,l,f,m]));function S(e,t,n){T(new Blob([e],{type:n}),t)}function T(e,t){let n;n=window.URL.createObjectURL(e),E(n,t),setTimeout((()=>window.URL.revokeObjectURL(n)),1e3)}function E(e,t){let n;n=document.createElement("a"),n.href=e,n.download=t,document.body.appendChild(n),n.style="display: none",n.click(),n.remove()}async function M(e){return new Promise((t=>setTimeout(t,e)))}[s,o,a,l,f,m]=w.then?(await w)():w;const A=(0,g.Z)({type:[h.Fs,h.fZ,h.Nw,h.Ix],async process({getState:e,action:t},n,r){const d=e(),g=(0,m.H8)(d),b=(0,f.jR)(d),_=b.timeline,x=(p.GJ(d),(0,y.R)(d)),w=(0,m.bR)(g),S=(0,f.kZ)(w),T=(0,f.g5)(w);let E=t.type===h.fZ?t.payload.name:null,A=b.technique,C=b.controls;if(!(0,i.Ft)(A)&&(0,i.Ft)(E)&&-1!==S.map((e=>e.name)).indexOf(A.getName())&&(E=A.getName()),!E)for(const e of S)if(e.isValid()){E=e.name;break}if(!E)for(const e of T)if(e.isValid()){E=e.name;break}async function k(e){l.Nn(e)}async function P(e=!0){const t=S.map((e=>e.name)).indexOf(E);if(-1==t)return async function(e=!0){const t=T.map((e=>e.name)).indexOf(E);if(-1==t)return[null,null];const n=await o.Z(T[t],{translator:x}),r=l.jl(n),i=(0,v.H9)(n);return r&&e&&_.start(),[r,i]}(e);const n=await s.Z(S[t],{translator:x,omitHLSL:!0}),r=l.jl(n),i=(0,v.H9)(n);return r&&e&&_.start(),[r,i]}async function R(){await k(A),[A,C]=[null,null]}async function L(){n({type:h.ny,payload:{technique:A,controls:C}}),await M(10)}switch(t.type){case h.Nw:await async function(){await R(),await L(),a.uz(),[A,C]=await P()}();break;case h.Ix:await async function(){await R(),await L(),l.uz(),[A,C]=await P()}();break;default:!g.slDocument||g.slDocument.diagnosticReport.errors>0?await R():await async function(){if(!A)return void await async function(){await k(A),[A,C]=await P()}();let[e,t]=await P(!1),n=A;await async function(e,t){l.ki(e,t)}(e,n),await k(n),A=e,C=t}()}if(n({type:h.ny,payload:{technique:A,controls:C}}),b.autosave&&n({type:h.hV,payload:{}}),!b.exportName){const e=u.Qc(g.uri);if("file"==e.protocol){const t=c.Qc(u.RN(e)).replaceExt("bfx");n({type:h.WF,payload:{filename:u.bZ(t)}})}}r()}}),C=(0,g.Z)({type:[h.PJ],async process({getState:e,action:t},n,r){const o=e(),a=(0,m.H8)(o),l=(0,f.jR)(o),p=(0,m.bR)(a),g=(0,f.kZ)(p),v=(0,y.R)(o),b=l.technique,w=c.Qc(a.uri);w.ext="bfx";let T={packed:!0,meta:{source:a.uri,author:o.s3d?.p4?.["User name"]},omitGLSL:!1,omitHLSL:!1,translator:v};const E=g.find((e=>e.name==b.getName())),M=await s.Z(E,T,(0,m.dg)(o));if(d.d()){let e=null;e=t.payload.silent?d.Z_.saveFile(u.RN(l.exportName),M):d.Z_.saveFileDialog({defaultPath:u.RN(l.exportName),title:"Save binary FX",buttonLabel:"Save",filters:[{name:"Binary FX",extensions:["bfx"]}]},M),e&&(n({type:h.WF,payload:{filename:u.bZ(e)}}),(0,i.c2)(`Effect '${e}' has been exported successfully.`),(0,x.Am)({size:"tiny",type:"info",title:(t.payload.silent?"Autoexport":"Export")+" complete",description:`Effect '${e}' has been exported successfully.`,animation:"bounce",time:2e3}))}else S(M,w.basename,"application/octet-stream");let A=o.s3d?.env?.Get("fx-dir");if(A){let e=_().basename(l.exportName),t=A+"\\"+e,n=t+".resource",r=u.RN(u.bZ(t)),i=u.RN(u.bZ(n));d.Z_.saveFile(r,M),d.Z_.saveFile(i,"__type: res_desc_bfx\nlinks: []\nbfx: "+e+"\n")}r()}}),k=(0,g.Z)({type:[h.hV],latest:!0,debounce:1e3,async process({getState:e,action:t},n,r){const i=(0,f.jR)(e());i.exportName&&i.technique&&n({type:h.PJ,payload:{silent:!0}}),r()}}),P=[A,C,k,(0,g.Z)({type:[h.yn],latest:!0,debounce:100,async process({getState:e,action:t},n,r){t.payload.enabled&&n({type:h.hV,payload:{}}),r()}})];r()}catch(R){r(R)}}))},q0SN:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{ZP:()=>Q});var i=n("W5eQ"),s=n("sg/z"),o=n("E5ji"),a=n("h9Zj"),l=n("0mZ+"),c=n("z3nI"),u=n("b/L/"),h=n("ceAs"),d=n("va7o"),p=n("5Ao9"),f=n("vpSu"),m=n("M2zF"),g=n("Ctio"),v=(n("HXFP"),n("Qk0k")),y=n("sVSU"),b=n("1t3V"),_=n("nqVC"),x=n("cAsR"),w=n("B6UE"),S=n("jEKi"),T=n("0N+1"),E=n("dJ4L"),M=n("Ca6S"),A=n("teaP"),C=n("pqmu"),k=n("H+Dh"),P=n("7U7x"),R=n("zLQT"),L=n("Ts+a"),O=n("Xmng"),N=n("H1jh"),I=n("4Und"),D=n("cIOx"),F=n("mGRc"),z=n("0j9O"),U=n("FzSB"),B=n("0xhk"),V=n("qLCU"),G=e([u,g,v,b,_,x,w,S,T,E,M,A,C,k,P,R,L,O,N,I,D,F,z,U]);async function Z(e){const t=async e=>(0,o.X)(e,await(await fetch(e)).text()),n=`${g.BX}/lib.hlsl`,r=await(0,o.X)("",`#include "${n}"`),i=await(0,s.x)(r,{includeResolver:t});(0,v.Z)(r);const a=await(0,o.X)("://part-layout",e);return(0,s.s)(a,i,null,{includeResolver:t})}function H(e){let t=null;try{t=JSON.parse(e)}catch(e){console.error("could not parse XFX data"),t=B}return console.assert("part"===t.type),t.content}function j(e,...t){let n={};return t.forEach((t=>{n={...n,...t(e)}})),n}[u,g,v,b,_,x,w,S,T,E,M,A,C,k,P,R,L,O,N,I,D,F,z,U]=G.then?(await G)():G;const W=(0,m.Z)({type:[h.wI],latest:!0,debounce:500,async transform({getState:e,action:t},n){const r=H(t.payload.content);t.payload.env=await Z(r.layout),t.payload.constants=r.constants||[],t.payload.capacity=r.capacity||4096,n({...t,meta:r})},async process({getState:e,action:t,action$:n},r,i){const s=e().nodes.graph,{graph:o}=t.meta,{env:a,constants:l}=t.payload;console.assert((0,c.$V)(a)),s.clear();let h=j((()=>(0,V.d)(e())),E.Z,x.Z,T.Z,S.Z,w.Z,b.Z,k.Z,P.Z,_.Z,A.Z,M.Z,O.Z,N.Z,z.Z,F.Z,I.Z,D.Z,R.Z,C.Z,L.Z);h={...h,...(0,U.Z)((()=>(0,V.d)(e())),l)},p.LiteGraph.clearRegisteredTypes(),Object.keys(h).forEach((e=>p.LiteGraph.registerNodeType(e,h[e]))),s.configure(o),r(u.td.recompile());const m=e().router.location.pathname,v=(0,f.LX)(m,{path:g.dy,exact:!1});if(v){const{fx:e,view:t}=v.params;d.m.push(`/${t}/${e}/${g.H}`)}i()}});function q(e,t){let n=t.passes.map(((e,t)=>`   pass P${t} {\n        Sorting = ${e.sorting};\n        PrerenderRoutine = compile PrerenderRoutine${e.id}();\n        Geometry = "${e.geometry.toLowerCase()}";\n    }`)).join("\n\n");return`\npartFx G {\n    Capacity = ${t.capacity};\n    SpawnRoutine = compile SpawnRoutine();\n    InitRoutine = compile InitRoutine${t.initId}();\n    UpdateRoutine = compile UpdateRoutine();\n\n${n}\n}\n\n`}const K=(0,m.Z)({type:[h.lg],latest:!0,debounce:500,async process({getState:e,action:t},n,r){const i=e(),{nodes:c}=i,{graph:h,env:d,constants:f,capacity:m}=c,g=p.LiteGraph.registered_node_types["fx/InitRoutine"];let v=h.findNodeByTitle("SpawnRoutine"),y=h.findNodeByTitle("UpdateRoutine"),b=h.findNodesByClass(g),_=[];_=[..._,...h.findNodesByTitle("DefaultMaterial")],_=[..._,...h.findNodesByTitle("LwiMaterial")];let x=null;f.length&&(x=await(0,o.X)("://user-constants",f.map((({name:e,type:t,value:n})=>`static const ${t} ${e} = ${n};`)).join("\n")+"\n\n"));let w=await(0,s.s)(x,d);w=await v.run(w);for(let e of b)w=await e.run(w);w=await y.run(w);let S=[];for(let e in _){let{id:t,sorting:n,geometry:r}=_[e];w=await _[e].run(w),S.push({id:t,sorting:n,geometry:r})}w=await(0,s.s)(await(0,o.X)("://fx-template",q(0,{passes:S,initId:b.find((e=>e.pure)).id,capacity:m})),w);let T=l.g.stringify(w.diagnosticReport);console.log(T),h.list_of_graphcanvas.forEach((e=>e.draw(!0,!0))),n(u.sv.setContent(a.I.translateTechnique(w,"G"))),r()}}),X=(0,m.Z)({type:[h.aJ],async validate({getState:e,action:t},n,r){let s,o;try{if(s=await Z(t.payload.layout),o=s.root.scope.findType(y.d),!o)return void r({type:"graph-change-layout-error"})}catch(e){return void r({type:"graph-change-layout-error"})}const{env:a,graph:l}=e().nodes,c=a.root.scope.findType(y.d);function u(e){let t=function(e){return l.findNodesByType(e).map((t=>{let[n,r]=t.pos;return l.remove(t),()=>{t=p.LiteGraph.createNode(e),l.add(t),t.pos=[n,r]}}))}(e);return()=>t.forEach((e=>e()))}const h=e=>e(),d=c.fields.filter((e=>o.fields.find((t=>t.name==e.name&&!i.V5.compare(t.type,e.type))))).map((e=>e.name)),f=c.fields.filter((e=>!o.fields.find((t=>t.name==e.name)))).map((e=>e.name)),m=c.fields.filter(((e,t)=>o.fields.find(((n,r)=>t!=r&&n.name==e.name&&i.V5.compare(n.type,e.type))))).map((e=>e.name));console.log("remove:",f),console.log("recreate:",d),console.log("reconnect:",m),f.forEach((e=>{const t=`${y.K}.${e}`;let n=l.findNodesByType(`fx/${t}`);n.forEach((e=>l.remove(e))),n=l.findNodesByType(`fx/out ${t}`),n.forEach((e=>l.remove(e)))}));let g=u(`fx/${y.K}`),v=d.map((e=>u(`fx/${y.K}.${e}`))),b=u(`fx/out ${y.K}`),_=d.map((e=>u(`fx/out ${y.K}.${e}`))),x=j((()=>a),D.Z,O.Z);Object.keys(x).forEach((e=>p.LiteGraph.unregisterNodeType(e))),x=j((()=>s),D.Z,O.Z),Object.keys(x).forEach((e=>p.LiteGraph.registerNodeType(e,x[e]))),h(g),v.forEach((e=>h(e))),h(b),_.forEach((e=>h(e))),n({...t,payload:{env:s}})}}),Y=(0,m.Z)({type:[h.ar],async process({getState:e,action:t},n,r){const{env:i,graph:s,constants:o}=e().nodes,a=(0,U.Z)((()=>(0,V.d)(e())),[t.payload.value]);Object.keys(a).forEach((e=>p.LiteGraph.registerNodeType(e,a[e]))),r()}}),J=(0,m.Z)({type:[h.sY],async process({getState:e,action:t},n,r){const{env:i,graph:s,constants:o}=e().nodes,a=`user constants/${t.payload.name}`;s.findNodesByType(a).forEach((e=>s.remove(e))),p.LiteGraph.unregisterNodeType(a),r()}}),$=(0,m.Z)({type:[h.bD,h.xB],async process({getState:e,action:t},n,r){n(u.td.recompile()),r()}}),Q=[(0,m.Z)({type:[h.Zm],async process({getState:e,action:t},n,r){console.log("graph reset!"),r()}}),K,W,X,Y,J,$];r()}catch(ee){r(ee)}}))},"6LMl":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>H});var i=n("cOQ3"),s=n("0jsi"),o=n("prdm"),a=n("ZLcK"),l=n("sg/z"),c=n("/Hc9"),u=n("BCBV"),h=n("E5ji"),d=n("4ELN"),p=n("ceAs"),f=n("J7+d"),m=n("qLko"),g=n("vpSu"),v=n("ls5I"),y=(n("/lOe"),n("M2zF")),b=n("Ctio"),_=n("cxbA"),x=n("0mZ+"),w=e([s,a,f,b]);[s,a,f,b]=w.then?(await w)():w;const S="debug-ln-clr";function T(e,t){return Object.keys(e.sourceFile.markers).filter((e=>e.startsWith(`${t}-`)))}function E(e,t){t.length>0&&e({type:p.h9,payload:{batch:t}})}function M(e,t,n){return e.map(((e,r)=>{const{loc:i,message:s,payload:o}=e;return{name:`${n}-${s}-${r}`,range:i,type:t,tooltip:s,payload:o}}))}function A(e,t){e({type:p.v$,payload:{batch:t}})}const C=e=>M(e,"line",S),k=e=>T(e,S);async function P(e,t){const{depot:n,parserParams:{parsingFlags:r},sourceFile:{content:i,uri:s,defines:o}}=e;if(!i)return;const a=_.dX(n),l=await(0,h.X)(s,i),u=await(0,c.J)(l,{flags:r,includeResolver:a,defines:o.map((e=>({name:e})))}),d=u.unreachableCode.filter((e=>String(e.start.file)===String(u.uri)));E(t,T(e,"unreachable-code")),A(t,M(d.map((e=>({loc:e,payload:{}}))),"unreachable-code","unreachable-code")),u.diagnosticReport.errors>0&&(0,v.Am)({type:"error",title:"Parsing failed.",animation:"scale",size:"tiny",time:2e3}),t({type:p.ce,payload:{slastDocument:u}})}async function R(e,t){const{slastDocument:n}=e.sourceFile;if(!n)return;const r=await(0,l.x)(n);r.diagnosticReport.errors>0&&(0,v.Am)({type:"error",title:"Analysis failed.",animation:"scale",size:"tiny",time:2e3}),r.diagnosticReport.warnings>0&&A(t,M(r.diagnosticReport.messages.filter((e=>"A3008"===e.code)).map((({start:e,end:t,content:n})=>({loc:{start:e,end:t},message:"@deprecated",payload:{}}))),"deprecated","deprecated")),t({type:p.Fs,payload:{result:r}})}const L=(0,y.Z)({type:[p.Vx,p.Td],async process({getState:e,action:t},n,r){const i=e().parserParams,{grammar:s,type:o,flags:a}=i;console.log("%c Creating parser...","background: #222; color: #bada55");try{(0,u.kG)({grammar:s,type:o,flags:a}),console.log("%c [ DONE ]","background: #222; color: #bada55")}catch(e){return console.error("could not initialize parser."),null}r()}}),O=(0,y.Z)({type:p.XD,async process({getState:e,action:t}){localStorage.removeItem(b.y$)}}),N=(0,y.Z)({type:[p.G,p.r$],latest:!0,debounce:500,async process({getState:e,action:t,action$:n},r,s){(0,f.Df)(e()).options.autocompile||r({type:p.ow}),await P(e(),r);const o=e().router.location.pathname,a=(0,g.LX)(o,{path:b.dy,exact:!1});if(a){const{view:n,fx:s,name:o}=a.params;s&&o===b.Bc&&await z(e(),r),t.type===p.r$&&localStorage.getItem(b.y$)!==s&&(localStorage.setItem(b.y$,s),(0,i.c2)(`Last sesstion data has been updated. (${localStorage.getItem(b.y$)})`),(0,v.Am)({type:"info",title:"Session update.",description:"Last sesstion data has been updated.",animation:"fade up",size:"tiny",time:2e3}))}s()}}),I=(0,y.Z)({type:[p.ce],async process({getState:e,action:t,action$:n},r,i){await R(e(),r),i()}});function D(e,t){const n=[];if(e.bcDocument?.program){const r=0,i=t.content.split("\n").length,s=(0,o.A4)(e.bcDocument.program.cdl);for(let e=r;e<=i;++e){const r=s.resolveLineColor(e,t.uri);if(-1!==r){const t={start:{file:null,line:e,column:0},end:null};n.push({loc:t,payload:{color:r}})}}}return n}const F=(0,y.Z)({type:p._A,cancelType:p.ow,latest:!0,async process({getState:e,action:t},n,r){const o=(0,f.H8)(e()),a=(0,f.Df)(e()),l=t?.payload?.type||"expression";let c=t?.payload?.query||a.query;if((0,i.Ft)(o.slDocument))console.error("invalid compile request!");else{const e=o.slDocument.root.scope;let t=null;if("expression"===l&&(c||=`${s.Ax}()`,t=e.findFunction(c,null)),"pass"===l){if(!c){const t=Object.values(e.techniques11).find((e=>e.passes.length>0)),n=t?.passes[0];c=`${t?.name}::${n?.name}`}const[,n,r]=c.match(/([\w\.]+)::([\w]+)/);t=e.findTechnique11(n).passes.find((e=>e.name===r))}let r=null;r=t?s.Iu(t):await s.ki(c,o.slDocument),r.diagnosticReport.errors>0&&(console.error(x.g.stringify(r.diagnosticReport)),alert(`could not evaluate query '${c}', see console log for details`)),n({type:p.sM,payload:{query:c,bcDocument:r}})}r()}});async function z(e,t){const n=(0,f.H8)(e),r=_.dX(e.depot),i=n.defines.map((e=>({name:e}))),s=await(0,d.jY)(await(0,h.X)(n.uri,n.content),{includeResolver:r,defines:i});t({type:p.tV,payload:{document:s}})}const U=(0,y.Z)({type:m.nk,latest:!0,debounce:10,async process({getState:e,action:t},n,r){const i=t.payload.location.pathname,s=((0,f.H8)(e()),(0,g.LX)(i,{path:b.dy,exact:!1}));if(s){const{view:t,fx:r,name:i}=s.params;r&&i===b.Bc&&await z(e(),n)}r()}}),B=(0,y.Z)({type:p.ow,async process({getState:e,action:t},n,r){(0,f.Df)(e()).options.colorize&&E(n,k(e())),r()}}),V=(0,y.Z)({type:p.ZX,async process({getState:e,action:t},n,r){const{autocompile:s,colorize:o,wasm:l}=t.payload.options;if((0,i.Xq)(s)&&!0===s&&n({type:p._A}),(0,i.Xq)(o)&&!1===o)E(n,k(e()));else{const t=D((0,f.Df)(e()),(0,f.H8)(e()));A(n,C(t))}(0,i.Xq)(l)&&l!=a.sU()&&n({type:p.Nw}),r()}}),G=(0,y.Z)({type:p.sM,async process({getState:e,action:t},n,r){const i=(0,f.H8)(e()),s=(0,f.Df)(e());if(s.options.colorize){const e=D(s,i);A(n,C(e))}r()}}),Z=(0,y.Z)({type:p.Fs,process({getState:e},t,n){(0,f.Df)(e()).options.autocompile&&t({type:p._A}),n()}}),H=[O,L,N,I,F,B,V,G,Z,U,(0,y.Z)({type:[p.gZ,p.bp],process({getState:e},t,n){const r=e(),{content:i}=(0,f.H8)(r);t({type:p.G,payload:{content:i}}),n()}})];r()}catch(j){r(j)}}))},votG:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("ceAs"),i=n("M2zF"),s=n("cOQ3"),o=n("rB4m"),a=n("VXBr");function l(e){return o.existsSync(e)}function c(e){return o.lstatSync(e).isDirectory()}class u{constructor(e){this.props={},this.Load(e)}Load(e){this.LoadPrjenv(a.join(e,u.DefaultProjectName))}static IsLocal(e){return e.substr(-u.LocalProjectSuffix.length)==u.LocalProjectSuffix}static IsDefault(e){return e.substr(-u.DefaultProjectName.length)==u.DefaultProjectName}LoadPrjenv(e){if(!l(e))return void(u.IsLocal(e)||console.error(`could not find project env file '${a.normalize(e)}'`));if(c(e))return this.LoadPrjenv(a.join(e,u.DefaultSubprojectName));u.IsDefault(e)&&(this.props["project-dir"]=a.dirname(e),this.props["project-name"]=a.basename(this.props["project-dir"]));let t=n("8mqI").load(function(e){return o.readFileSync(e,"utf8")}(e));t?(this.ReadProperties(t,this.props,e),u.IsLocal(e)||this.LoadPrjenv(e+u.LocalProjectSuffix)):console.error(`could not read prjenv: ${e}`)}ReadProperties(e,t,n){e&&(Object.keys(e).forEach((r=>{if("references"==r)return;let i=e[r];if(s.HD(i)||s.hj(i)||s.jn(i))t[r]=i;else if(s.kJ(i))t[r]=t[r]||[],i.forEach((e=>{t[r].push(e)}));else{if("scope"==r&&t[r])return;t[r]=t[r]||{},this.ReadProperties(i,t[r],n)}})),this.LoadReferences(e,a.dirname(n)))}LoadReferences(e,t){let n=e.references;n&&n.forEach((e=>{s.HD(e)?this.LoadPrjenv(a.join(t,e)):s.Kn(e)&&Object.keys(e).forEach((n=>{if(s.HD(e[n])){let r=a.join(t,e[n]);l(r)?(this.props[`${n}-dir`]=c(r)?a.normalize(r):a.dirname(r),this.LoadPrjenv(a.join(t,e[n]))):console.warn(`Reference '${r}' is not found.`)}}))}))}Get(e){let t=e.split(/[\\\/]/);return t[0]=`$(${t[0]})`,this.Resolve(t.join("/"))}Resolve(e){if(s.kJ(e))return e=e.map((e=>this.Resolve(e)));if(s.Kn(e))return Object.keys(e).forEach((t=>{e[t]=this.Resolve(e[t])})),e;if(s.hj(e))return e;let t=e.split(/[\\\/]/);if(t.length>1){let n=this.ResolveObject(t[0]);if(s.HD(n)){for(let e=1;e<t.length;++e)n=a.join(n,this.ResolveString(t[e]));return a.normalize(n)}if(!n)return console.error(`could not resolve '${t[0]}'`),e;for(let e=1;e<t.length;++e)n=n[this.ResolveString(t[e])];return n}return this.ResolveObject(e)}ResolveString(e){try{return e.replace(/\$\(([\w\d\-\_]+)\)/g,((e,t)=>{let n=t.split("/"),r=this.props;for(;n.length;)r=r[n.shift()];if(s.HD(r)||s.hj(r))return r;throw console.error(`could not resolve '${t}' property`),null}))}catch(e){}return e}ResolveObject(e){try{let t=e.match(/^\$\(([\w\d\-\_]+)\)$/);return t?this.Resolve(this.props[t[1]]):this.ResolveString(e)}catch(e){}return e}}u.DefaultProjectName=".project",u.DefaultSubprojectName=".subproject",u.LocalProjectSuffix="-local";var h=n("kVxP");const d=[(0,i.Z)({type:r.fC,process({getState:e,action:t},n,i){const o=t.payload.projectRoot;if((0,s.HD)(o)){const e=new u(o);if(e.Get("game-name"))return n({type:r.Qt,payload:{env:e}}),n({type:r.Ld,payload:{}}),i()}return n({type:r.Oh,payload:{}}),i()}}),(0,i.Z)({type:r.Ld,async process({getState:e,action:t},n,i){const s=e().s3d.env.Get("perforce-settings");try{await h.KH(`set P4PORT=${s.server}`),await h.KH(`set P4USER=${s.login}`),await h.KH(`set P4CLIENT=${s.workspace}`);const e=await h.KH("info");let t={};e.split("\n").forEach((e=>{let n=e.split(":"),r=n[0],i=n[1];t[r]=i})),n({type:r.xU,payload:{info:t}}),i()}finally{i()}}})]},yZBA:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var r=n("KNfE"),i=n("FJDS"),s=n("ynia"),o=n("7wdh"),a=e([r]);r=(a.then?(await a)():a)[0],n("ITMc");const{file:l}=i.Z_.argv();o.render(s.createElement(r.Z,{name:l}),document.getElementById("app")),t()}catch(e){t(e)}}))},cxbA:(e,t,n)=>{"use strict";n.d(t,{GJ:()=>f,ZP:()=>h,dX:()=>p,gc:()=>d});var r=n("Q46b"),i=n("ceAs"),s=n("VXBr"),o=n.n(s),a=n("FJDS"),l=n("akNS"),c=n("CWQE"),u=n("E5ji");const h=(0,r.j)({[i.AK]:(e,t)=>({...e,root:{...e.root,...t.payload.root}})},{root:null});async function d(e,t){t=decodeURIComponent(t);const n=c.Qc(t);if("file"===n.protocol&&(console.assert(a.d()),l.existsSync(c.RN(n))))return t;const r=(e,t)=>{let n=e?.files?.find((e=>-1!=o().normalize(e).indexOf(o().normalize(t))));if(!n&&e.folders)for(let i of e.folders)if(n=r(i,t),n)break;return n};return(t=r(e.root,o().basename(c.RN(n))))||null}function p(e){return async t=>{const n=await d(e,t),r=c.Qc(n);if(!n)return null;if("file"===r.protocol)return console.assert(a.d()),(0,u.X)(String(r),(await l.promises.readFile(c.RN(r))).toString());try{return(0,u.X)(n,await(await fetch(n)).text())}catch(e){return console.error(`Can't resolve file "${t}"`),null}}}const f=e=>e.depot},Q46b:(e,t,n)=>{"use strict";function r(e,t){return(n,r)=>(n=n||t,e.hasOwnProperty(r.type)?e[r.type](n,r):n)}n.d(t,{j:()=>r})},qLCU:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a,d:()=>l});var r=n("ceAs"),i=n("Q46b"),s=n("5Ao9");const o={docs:null,graph:new s.LGraph,revision:0,env:null,constants:[],capacity:4096},a=(0,i.j)({[r.XD]:(e,t)=>({...e,revision:0}),[r.hs]:(e,t)=>({...e,revision:e.revision+1}),[r.wI]:(e,{payload:t})=>({...e,env:t.env,constants:t.constants,capacity:t.capacity}),[r.j1]:(e,{payload:t})=>({...e,docs:t.docs}),[r.aJ]:(e,{payload:t})=>({...e,env:t.env}),[r.ar]:(e,{payload:t})=>({...e,constants:[...e.constants,t.value],revision:e.revision+1}),[r.bD]:(e,{payload:t})=>({...e,constants:e.constants.map((e=>e.name===t.name?{...e,value:t.value}:e)),revision:e.revision+1}),[r.sY]:(e,{payload:t})=>({...e,constants:e.constants.filter((e=>e.name!=t.name)),revision:e.revision+1}),[r.xB]:(e,{payload:t})=>({...e,capacity:t.value,revision:e.revision+1})},o),l=e=>e.nodes.env},"0VSY":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("Y0AG"),i=n("ceAs"),s=n("Q46b");const o={filename:null,grammar:null,type:r.TI.k_LALR,flags:r.eo.k_Default,parsingFlags:r.NB.k_Optimize};const a=(0,s.j)({[i.Vx]:(e,t)=>({...e,grammar:t.payload.content}),[i.Td]:(e,t)=>{const{flags:n,type:r}=t.payload;return{...e,flags:n,type:r}},[i.Fe]:(e,t)=>{const{flags:n}=t.payload;return{...e,parsingFlags:n}}},o)},R46Y:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{ZP:()=>u,g5:()=>d,jR:()=>p,kZ:()=>h});var i=n("LvoO"),s=n("QlGU"),o=n("ceAs"),a=n("Q46b"),l=e([i]);i=(l.then?(await l)():l)[0];const c={technique:null,timeline:s.S(),controls:{controls:{},values:{},presets:[]},presets:{},revision:0,wasm:i.sU(),shaderFormat:"glsl",exportName:null,autosave:!1},u=(0,a.j)({[o.ny]:(e,{payload:t})=>({...e,technique:t.technique,controls:t.controls,revision:e.revision+1}),[o.Ix]:(e,t)=>({...e,wasm:!e.wasm}),[o.WF]:(e,t)=>({...e,exportName:t.payload.filename}),[o.R8]:(e,t)=>({...e,exportName:null,technique:null}),[o.yn]:(e,t)=>({...e,autosave:t.payload.enabled}),[o.AU]:(e,t)=>({...e,shaderFormat:t.payload.format})},c);function h(e){if(!e)return[];const t=e.techniques;return Object.keys(t).map((e=>t[e]))}function d(e){if(!e)return[];const t=e.techniques11;return Object.keys(t).map((e=>t[e]))}const p=e=>e.playground;r()}catch(f){r(f)}}))},va7o:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,m:()=>i});var r=n("0TMr");const i=(0,n("3tQP").q_)(),s=(0,r.iz)(i)},fq7q:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("Q46b"),i=n("ceAs");const s=(0,r.j)({[i.Qt]:(e,t)=>({...e,env:t.payload.env}),[i.Oh]:(e,t)=>({...e,env:null}),[i.xU]:(e,t)=>({...e,p4:t.payload.info})},{env:null,p4:null})},"J7+d":(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Df:()=>g,H8:()=>m,ZP:()=>f,bR:()=>v,dg:()=>_});var i=n("cOQ3"),s=n("GUxJ"),o=n("ZLcK"),a=n("LvoO"),l=n("Cx6u"),c=n("ceAs"),u=n("Q46b"),h=n("cxbA"),d=e([o,a]);[o,a]=d.then?(await d)():d;const p={revision:0,uri:null,content:"",error:null,markers:{},breakpoints:[],slastDocument:null,slDocument:null,rawDocument:null,defines:[],debugger:{query:null,bcDocument:null,options:{colorize:!0,disableOptimizations:!0,autocompile:!1,wasm:o.sU()}}},f=(0,u.j)({[c.wI]:(e,t)=>({...e,uri:t.payload.filename}),[c.r$]:(e,t)=>({...e,uri:t.payload.filename,content:t.payload.content,revision:0}),[c.hq]:(e,t)=>({...e,error:t.payload.error,content:null,debugger:{...e.debugger,bcDocument:null},breakpoints:[],slastDocument:null,slDocument:null,revision:0,wasm:a.sU()}),[c.XD]:(e,t)=>({...e,error:null,content:null,debugger:{...e.debugger,bcDocument:null},markers:{},breakpoints:[],slastDocument:null,slDocument:null,revision:0}),[c.G]:(e,t)=>({...e,markers:{},content:t.payload.content,uri:t.payload.filename||e.uri,revision:e.revision+1}),[c.ce]:(e,t)=>({...e,slastDocument:t.payload.slastDocument}),[c.Fs]:(e,t)=>({...e,slDocument:t.payload.result}),[c.tV]:(e,t)=>({...e,rawDocument:t.payload.document}),[c.qH]:(e,t)=>({...e,markers:{...e.markers,[t.payload.name]:t.payload}}),[c.po]:(e,t)=>{const n={...e.markers};return delete n[t.payload.name],{...e,markers:n}},[c.v$]:(e,t)=>{const n={...e.markers};return t.payload.batch.forEach((e=>n[e.name]=e)),{...e,markers:n}},[c.h9]:(e,t)=>{const n={...e.markers};return t.payload.batch.forEach((e=>{delete n[e]})),{...e,markers:n}},[c.Qu]:(e,t)=>((0,i.hu)(-1===e.breakpoints.indexOf(t.payload.line)),{...e,breakpoints:[...e.breakpoints,t.payload.line]}),[c.v0]:(e,t)=>({...e,breakpoints:e.breakpoints.filter((e=>e!==t.payload.line))}),[c.gZ]:(e,{payload:{name:t}})=>({...e,defines:[t,...e.defines.filter((e=>e!=t))]}),[c.bp]:(e,{payload:{name:t}})=>({...e,defines:e.defines.filter((e=>e!=t))}),[c.sM]:(e,t)=>{const n=e.debugger.options,{query:r,bcDocument:i}=t.payload;return{...e,debugger:{query:r,bcDocument:i,options:n}}},[c.ow]:e=>{const{debugger:{options:t}}=e;return{...e,debugger:{query:null,bcDocument:null,options:t,layout:"i32"}}},[c.ZX]:(e,t)=>{const n={...e.debugger.options,...t.payload.options},r={...e.debugger,options:n};return{...e,debugger:r}}},p),m=e=>e.sourceFile,g=e=>m(e).debugger,v=e=>e.slDocument?e.slDocument.root.scope:null,y=({uri:e,content:t})=>({uri:l.m.make(e),source:t}),b=e=>e.slastDocument,_=e=>{const t=e.sourceFile,n=e.depot,r=y(t),i=b(t),o=h.dX(n),a=t.defines;return new s.lG(r,i,o,a)};r()}catch(e){r(e)}}))},"RSd/":(e,t,n)=>{"use strict";n.d(t,{R:()=>i,Z:()=>r});const r=(0,n("Q46b").j)({},{uiControlsGatherToDedicatedConstantBuffer:!0,uiControlsConstantBufferRegister:10,globalUniformsGatherToDedicatedConstantBuffer:!0,globalUniformsConstantBufferRegister:11}),i=e=>({...e.translatorParams})},t4A9:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{h:()=>M});var i=n("Ctio"),s=n("/KxH"),o=n("5FPh"),a=n("q0SN"),l=n("6LMl"),c=n("votG"),u=n("cxbA"),h=n("qLCU"),d=n("0VSY"),p=n("RSd/"),f=n("R46Y"),m=n("va7o"),g=n("fq7q"),v=n("J7+d"),y=n("Fqr5"),b=n("b2X+"),_=n("jANQ"),x=n("h5yL"),w=e([i,s,o,a,l,f,v]);[i,s,o,a,l,f,v]=w.then?(await w)():w;const S=(0,y.UY)({sourceFile:v.ZP,parserParams:d.Z,translatorParams:p.Z,router:m.Z,playground:f.ZP,nodes:h.Z,s3d:g.Z,depot:u.ZP}),T=(0,x.Z)([...i.ZP,...l.Z,...o.Z,...a.ZP,...c.Z,...s.Z]),E=((0,_.createLogger)({collapsed:!0,diff:!1}),(0,b.Z)({ignore:["sourceFile.slastDocument","sourceFile.slDocument","sourceFile.debugger.bcDocument","playground.technique","playground.timeline","playground.controls","nodes.graph","nodes.env","s3d.env"]}),[T]),M=(0,y.MT)(S,(0,y.md)(...E)),A="store-backup-defines";M.subscribe((()=>{const e=M.getState();localStorage[A]=JSON.stringify(e.sourceFile.defines)})),JSON.parse(localStorage[A]||"[]").forEach((e=>M.dispatch({type:"source-code-set-define",payload:{name:e}}))),r()}catch(e){r(e)}}))},xmIN:(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i});const i=(r="file:///C:/Husky/streams2/tools/code/Influx/src/lib/fx/bytecode/VM/cpp/module.cpp",function(e){var t,i;(e=void 0!==(e=e||{})?e:{}).ready=new Promise((function(e,n){t=e,i=n}));var s,o,a,l=Object.assign({},e),c=[],u="./this.program",h="";"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),h=0!==(h=r).indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},o=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)};var d,p,f=e.print||console.log.bind(console),m=e.printErr||console.warn.bind(console);Object.assign(e,l),l=null,e.arguments&&(c=e.arguments),e.thisProgram&&(u=e.thisProgram),e.quit&&e.quit,e.wasmBinary&&(d=e.wasmBinary),e.noExitRuntime,"object"!=typeof WebAssembly&&$("no native wasm support detected");var g=!1;function v(e,t){e||$(t)}var y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function b(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&y)return y.decode(e.subarray(t,i));for(var s="";t<i;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&e[t++])<65536)s+=String.fromCharCode(o);else{var c=o-65536;s+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else s+=String.fromCharCode((31&o)<<6|a)}else s+=String.fromCharCode(o)}return s}function _(e,t){return e?b(E,e,t):""}function x(e,t,n,r){if(!(r>0))return 0;for(var i=n,s=n+r-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(n>=s)break;t[n++]=a}else if(a<=2047){if(n+1>=s)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=s)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=s)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}return t[n]=0,n-i}function w(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}var S,T,E,M,A,C,k,P,R,L="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function O(e,t){for(var n=e,r=n>>1,i=r+t/2;!(r>=i)&&A[r];)++r;if((n=r<<1)-e>32&&L)return L.decode(E.subarray(e,n));for(var s="",o=0;!(o>=t/2);++o){var a=M[e+2*o>>1];if(0==a)break;s+=String.fromCharCode(a)}return s}function N(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,s=0;s<i;++s){var o=e.charCodeAt(s);M[t>>1]=o,t+=2}return M[t>>1]=0,t-r}function I(e){return 2*e.length}function D(e,t){for(var n=0,r="";!(n>=t/4);){var i=C[e+4*n>>2];if(0==i)break;if(++n,i>=65536){var s=i-65536;r+=String.fromCharCode(55296|s>>10,56320|1023&s)}else r+=String.fromCharCode(i)}return r}function F(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,i=r+n-4,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),C[t>>2]=o,(t+=4)+4>i)break}return C[t>>2]=0,t-r}function z(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function U(t){S=t,e.HEAP8=T=new Int8Array(t),e.HEAP16=M=new Int16Array(t),e.HEAP32=C=new Int32Array(t),e.HEAPU8=E=new Uint8Array(t),e.HEAPU16=A=new Uint16Array(t),e.HEAPU32=k=new Uint32Array(t),e.HEAPF32=P=new Float32Array(t),e.HEAPF64=R=new Float64Array(t)}e.INITIAL_MEMORY;var B,V,G,Z,H=[],j=[],W=[],q=0,K=null,X=null;function Y(t){q++,e.monitorRunDependencies&&e.monitorRunDependencies(q)}function J(t){if(q--,e.monitorRunDependencies&&e.monitorRunDependencies(q),0==q&&(null!==K&&(clearInterval(K),K=null),X)){var n=X;X=null,n()}}function $(t){e.onAbort&&e.onAbort(t),m(t="Aborted("+t+")"),g=!0,t+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(t);throw i(n),n}function Q(e){return e.startsWith("data:application/octet-stream;base64,")}function ee(e){try{if(e==V&&d)return new Uint8Array(d);if(a)return a(e);throw"both async and sync fetching of the wasm failed"}catch(e){$(e)}}function te(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?re(r)():re(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(e)}}e.locateFile?Q(V="C:/Husky/streams2/tools/code/Influx/webpack-addons/module-7937ca9cc6f8782be9620f24a283f5b5.wasm")||(V=function(t){return e.locateFile?e.locateFile(t,h):h+t}(V)):V=new URL(n("0Wsb"),n.b).toString();var ne=[];function re(e){var t=ne[e];return t||(e>=ne.length&&(ne.length=e+1),ne[e]=t=B.get(e)),t}function ie(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){k[this.ptr+4>>2]=e},this.get_type=function(){return k[this.ptr+4>>2]},this.set_destructor=function(e){k[this.ptr+8>>2]=e},this.get_destructor=function(){return k[this.ptr+8>>2]},this.set_refcount=function(e){C[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,T[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=T[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,T[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=T[this.ptr+13>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=C[this.ptr>>2];C[this.ptr>>2]=e+1},this.release_ref=function(){var e=C[this.ptr>>2];return C[this.ptr>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){k[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return k[this.ptr+16>>2]},this.get_exception_ptr=function(){if(Wt(this.get_type()))return k[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}var se={};function oe(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ae(e){return this.fromWireType(k[e>>2])}var le={},ce={},ue={};function he(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function de(e,t){return e=he(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function pe(e,t){var n=de(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var fe=void 0;function me(e){throw new fe(e)}function ge(e,t,n){function r(t){var r=n(t);r.length!==e.length&&me("Mismatched type converter count");for(var i=0;i<e.length;++i)we(e[i],r[i])}e.forEach((function(e){ue[e]=t}));var i=new Array(t.length),s=[],o=0;t.forEach(((e,t)=>{ce.hasOwnProperty(e)?i[t]=ce[e]:(s.push(e),le.hasOwnProperty(e)||(le[e]=[]),le[e].push((()=>{i[t]=ce[e],++o===s.length&&r(i)})))})),0===s.length&&r(i)}function ve(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var ye=void 0;function be(e){for(var t="",n=e;E[n];)t+=ye[E[n++]];return t}var _e=void 0;function xe(e){throw new _e(e)}function we(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||xe('type "'+r+'" must have a positive integer typeid pointer'),ce.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;xe("Cannot register type '"+r+"' twice")}if(ce[e]=t,delete ue[e],le.hasOwnProperty(e)){var i=le[e];delete le[e],i.forEach((e=>e()))}}function Se(e){if(!(this instanceof je))return!1;if(!(e instanceof je))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return t===r&&n===i}function Te(e){xe(e.$$.ptrType.registeredClass.name+" instance already deleted")}var Ee=!1;function Me(e){}function Ae(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function Ce(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=Ce(e,t,n.baseClass);return null===r?null:n.downcast(r)}var ke={};function Pe(){return Object.keys(De).length}function Re(){var e=[];for(var t in De)De.hasOwnProperty(t)&&e.push(De[t]);return e}var Le=[];function Oe(){for(;Le.length;){var e=Le.pop();e.$$.deleteScheduled=!1,e.delete()}}var Ne=void 0;function Ie(e){Ne=e,Le.length&&Ne&&Ne(Oe)}var De={};function Fe(e,t){return t=function(e,t){for(void 0===t&&xe("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),De[t]}function ze(e,t){return t.ptrType&&t.ptr||me("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&me("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Be(Object.create(e,{$$:{value:t}}))}function Ue(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Fe(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function i(){return this.isSmartPointer?ze(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ze(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var s,o=this.registeredClass.getActualType(t),a=ke[o];if(!a)return i.call(this);s=this.isConst?a.constPointerType:a.pointerType;var l=Ce(t,this.registeredClass,s.registeredClass);return null===l?i.call(this):this.isSmartPointer?ze(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:e}):ze(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}function Be(e){return"undefined"==typeof FinalizationRegistry?(Be=e=>e,e):(Ee=new FinalizationRegistry((e=>{Ae(e.$$)})),Be=e=>{var t=e.$$;if(t.smartPtr){var n={$$:t};Ee.register(e,n,e)}return e},Me=e=>Ee.unregister(e),Be(e))}function Ve(){if(this.$$.ptr||Te(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=Be(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Ge(){this.$$.ptr||Te(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&xe("Object already scheduled for deletion"),Me(this),Ae(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ze(){return!this.$$.ptr}function He(){return this.$$.ptr||Te(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&xe("Object already scheduled for deletion"),Le.push(this),1===Le.length&&Ne&&Ne(Oe),this.$$.deleteScheduled=!0,this}function je(){}function We(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||xe("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function qe(e,t,n,r,i,s,o,a){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=s,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function Ke(e,t,n){for(;t!==n;)t.upcast||xe("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Xe(e,t){if(null===t)return this.isReference&&xe("null is not a valid "+this.name),0;t.$$||xe('Cannot pass "'+gt(t)+'" as a '+this.name),t.$$.ptr||xe("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return Ke(t.$$.ptr,n,this.registeredClass)}function Ye(e,t){var n;if(null===t)return this.isReference&&xe("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||xe('Cannot pass "'+gt(t)+'" as a '+this.name),t.$$.ptr||xe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&xe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=Ke(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&xe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:xe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,mt.toHandle((function(){i.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:xe("Unsupporting sharing policy")}return n}function Je(e,t){if(null===t)return this.isReference&&xe("null is not a valid "+this.name),0;t.$$||xe('Cannot pass "'+gt(t)+'" as a '+this.name),t.$$.ptr||xe("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&xe("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return Ke(t.$$.ptr,n,this.registeredClass)}function $e(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Qe(e){this.rawDestructor&&this.rawDestructor(e)}function et(e){null!==e&&e.delete()}function tt(e,t,n,r,i,s,o,a,l,c,u){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=s,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,i||void 0!==t.baseClass?this.toWireType=Ye:r?(this.toWireType=Xe,this.destructorFunction=null):(this.toWireType=Je,this.destructorFunction=null)}function nt(t,n,r){return t.includes("j")?function(t,n,r){var i=e["dynCall_"+t];return r&&r.length?i.apply(null,[n].concat(r)):i.call(null,n)}(t,n,r):re(n).apply(null,r)}function rt(e,t){var n,r,i,s=(e=be(e)).includes("j")?(n=e,r=t,i=[],function(){return i.length=0,Object.assign(i,arguments),nt(n,r,i)}):re(t);return"function"!=typeof s&&xe("unknown function pointer with signature "+e+": "+t),s}var it=void 0;function st(e){var t=Ht(e),n=be(t);return jt(t),n}function ot(e,t){var n=[],r={};throw t.forEach((function e(t){r[t]||ce[t]||(ue[t]?ue[t].forEach(e):(n.push(t),r[t]=!0))})),new it(e+": "+n.map(st).join([", "]))}function at(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=de(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return i instanceof Object?i:r}function lt(e,t,n,r,i){var s=t.length;s<2&&xe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==n,a=!1,l=1;l<t.length;++l)if(null!==t[l]&&void 0===t[l].destructorFunction){a=!0;break}var c="void"!==t[0].name,u="",h="";for(l=0;l<s-2;++l)u+=(0!==l?", ":"")+"arg"+l,h+=(0!==l?", ":"")+"arg"+l+"Wired";var d="return function "+he(e)+"("+u+") {\nif (arguments.length !== "+(s-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(s-2)+" args!');\n}\n";a&&(d+="var destructors = [];\n");var p=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[xe,r,i,oe,t[0],t[1]];for(o&&(d+="var thisWired = classParam.toWireType("+p+", this);\n"),l=0;l<s-2;++l)d+="var arg"+l+"Wired = argType"+l+".toWireType("+p+", arg"+l+"); // "+t[l+2].name+"\n",f.push("argType"+l),m.push(t[l+2]);if(o&&(h="thisWired"+(h.length>0?", ":"")+h),d+=(c?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+");\n",a)d+="runDestructors(destructors);\n";else for(l=o?1:2;l<t.length;++l){var g=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==t[l].destructorFunction&&(d+=g+"_dtor("+g+"); // "+t[l].name+"\n",f.push(g+"_dtor"),m.push(t[l].destructorFunction))}return c&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",f.push(d),at(Function,f).apply(null,m)}function ct(e,t){for(var n=[],r=0;r<e;r++)n.push(C[(t>>2)+r]);return n}var ut=[],ht=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function dt(e){e>4&&0==--ht[e].refcount&&(ht[e]=void 0,ut.push(e))}function pt(){for(var e=0,t=5;t<ht.length;++t)void 0!==ht[t]&&++e;return e}function ft(){for(var e=5;e<ht.length;++e)if(void 0!==ht[e])return ht[e];return null}var mt={toValue:e=>(e||xe("Cannot use deleted val. handle = "+e),ht[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=ut.length?ut.pop():ht.length;return ht[t]={refcount:1,value:e},t}}};function gt(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function vt(e,t){switch(t){case 2:return function(e){return this.fromWireType(P[e>>2])};case 3:return function(e){return this.fromWireType(R[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function yt(e,t,n){switch(t){case 0:return n?function(e){return T[e]}:function(e){return E[e]};case 1:return n?function(e){return M[e>>1]}:function(e){return A[e>>1]};case 2:return n?function(e){return C[e>>2]}:function(e){return k[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function bt(e,t){var n=ce[e];return void 0===n&&xe(t+" has unknown type "+st(e)),n}var _t={};function xt(e){var t=_t[e];return void 0===t?be(e):t}var wt=[],St=[];function Tt(e){try{return p.grow(e-S.byteLength+65535>>>16),U(p.buffer),1}catch(e){}}var Et={};function Mt(){if(!Mt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"};for(var t in Et)void 0===Et[t]?delete e[t]:e[t]=Et[t];var n=[];for(var t in e)n.push(t+"="+e[t]);Mt.strings=n}return Mt.strings}var At={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=At.isAbs(e),n="/"===e.substr(-1);return(e=At.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=At.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=At.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments,0);return At.normalize(e.join("/"))},join2:(e,t)=>At.normalize(e+"/"+t)},Ct={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:Rt.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t=At.isAbs(r)}return(t?"/":"")+(e=At.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Ct.resolve(e).substr(1),t=Ct.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),s=Math.min(r.length,i.length),o=s,a=0;a<s;a++)if(r[a]!==i[a]){o=a;break}var l=[];for(a=o;a<r.length;a++)l.push("..");return(l=l.concat(i.slice(o))).join("/")}},kt={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){kt.ttys[e]={input:[],output:[],ops:t},Rt.registerDevice(e,kt.stream_ops)},stream_ops:{open:function(e){var t=kt.ttys[e.node.rdev];if(!t)throw new Rt.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new Rt.ErrnoError(60);for(var s=0,o=0;o<r;o++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new Rt.ErrnoError(29)}if(void 0===a&&0===s)throw new Rt.ErrnoError(6);if(null==a)break;s++,t[n+o]=a}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new Rt.ErrnoError(60);try{for(var s=0;s<r;s++)e.tty.ops.put_char(e.tty,t[n+s])}catch(e){throw new Rt.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=Bt(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(f(b(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(f(b(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(m(b(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(m(b(e.output,0)),e.output=[])}}},Pt={ops_table:null,mount:function(e){return Pt.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(Rt.isBlkdev(n)||Rt.isFIFO(n))throw new Rt.ErrnoError(63);Pt.ops_table||(Pt.ops_table={dir:{node:{getattr:Pt.node_ops.getattr,setattr:Pt.node_ops.setattr,lookup:Pt.node_ops.lookup,mknod:Pt.node_ops.mknod,rename:Pt.node_ops.rename,unlink:Pt.node_ops.unlink,rmdir:Pt.node_ops.rmdir,readdir:Pt.node_ops.readdir,symlink:Pt.node_ops.symlink},stream:{llseek:Pt.stream_ops.llseek}},file:{node:{getattr:Pt.node_ops.getattr,setattr:Pt.node_ops.setattr},stream:{llseek:Pt.stream_ops.llseek,read:Pt.stream_ops.read,write:Pt.stream_ops.write,allocate:Pt.stream_ops.allocate,mmap:Pt.stream_ops.mmap,msync:Pt.stream_ops.msync}},link:{node:{getattr:Pt.node_ops.getattr,setattr:Pt.node_ops.setattr,readlink:Pt.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Pt.node_ops.getattr,setattr:Pt.node_ops.setattr},stream:Rt.chrdev_stream_ops}});var i=Rt.createNode(e,t,n,r);return Rt.isDir(i.mode)?(i.node_ops=Pt.ops_table.dir.node,i.stream_ops=Pt.ops_table.dir.stream,i.contents={}):Rt.isFile(i.mode)?(i.node_ops=Pt.ops_table.file.node,i.stream_ops=Pt.ops_table.file.stream,i.usedBytes=0,i.contents=null):Rt.isLink(i.mode)?(i.node_ops=Pt.ops_table.link.node,i.stream_ops=Pt.ops_table.link.stream):Rt.isChrdev(i.mode)&&(i.node_ops=Pt.ops_table.chrdev.node,i.stream_ops=Pt.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Rt.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Rt.isDir(e.mode)?t.size=4096:Rt.isFile(e.mode)?t.size=e.usedBytes:Rt.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Pt.resizeFileStorage(e,t.size)},lookup:function(e,t){throw Rt.genericErrors[44]},mknod:function(e,t,n,r){return Pt.createNode(e,t,n,r)},rename:function(e,t,n){if(Rt.isDir(e.mode)){var r;try{r=Rt.lookupNode(t,n)}catch(e){}if(r)for(var i in r.contents)throw new Rt.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=Rt.lookupNode(e,t);for(var r in n.contents)throw new Rt.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=Pt.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!Rt.isLink(e.mode))throw new Rt.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,i){var s=e.node.contents;if(i>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-i,r);if(o>8&&s.subarray)t.set(s.subarray(i,i+o),n);else for(var a=0;a<o;a++)t[n+a]=s[i+a];return o},write:function(e,t,n,r,i,s){if(t.buffer===T.buffer&&(s=!1),!r)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(s)return o.contents=t.subarray(n,n+r),o.usedBytes=r,r;if(0===o.usedBytes&&0===i)return o.contents=t.slice(n,n+r),o.usedBytes=r,r;if(i+r<=o.usedBytes)return o.contents.set(t.subarray(n,n+r),i),r}if(Pt.expandFileStorage(o,i+r),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)o.contents[i+a]=t[n+a];return o.usedBytes=Math.max(o.usedBytes,i+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&Rt.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new Rt.ErrnoError(28);return r},allocate:function(e,t,n){Pt.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,i){if(!Rt.isFile(e.node.mode))throw new Rt.ErrnoError(43);var s,o,a=e.node.contents;if(2&i||a.buffer!==S){if((n>0||n+t<a.length)&&(a=a.subarray?a.subarray(n,n+t):Array.prototype.slice.call(a,n,n+t)),o=!0,!(s=void $()))throw new Rt.ErrnoError(48);T.set(a,s)}else o=!1,s=a.byteOffset;return{ptr:s,allocated:o}},msync:function(e,t,n,r,i){if(!Rt.isFile(e.node.mode))throw new Rt.ErrnoError(43);return 2&i||Pt.stream_ops.write(e,t,0,r,n,!1),0}}},Rt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=Ct.resolve(Rt.cwd(),e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new Rt.ErrnoError(32);for(var n=At.normalizeArray(e.split("/").filter((e=>!!e)),!1),r=Rt.root,i="/",s=0;s<n.length;s++){var o=s===n.length-1;if(o&&t.parent)break;if(r=Rt.lookupNode(r,n[s]),i=At.join2(i,n[s]),Rt.isMountpoint(r)&&(!o||o&&t.follow_mount)&&(r=r.mounted.root),!o||t.follow)for(var a=0;Rt.isLink(r.mode);){var l=Rt.readlink(i);if(i=Ct.resolve(At.dirname(i),l),r=Rt.lookupPath(i,{recurse_count:t.recurse_count+1}).node,a++>40)throw new Rt.ErrnoError(32)}}return{path:i,node:r}},getPath:e=>{for(var t;;){if(Rt.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Rt.nameTable.length},hashAddNode:e=>{var t=Rt.hashName(e.parent.id,e.name);e.name_next=Rt.nameTable[t],Rt.nameTable[t]=e},hashRemoveNode:e=>{var t=Rt.hashName(e.parent.id,e.name);if(Rt.nameTable[t]===e)Rt.nameTable[t]=e.name_next;else for(var n=Rt.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:(e,t)=>{var n=Rt.mayLookup(e);if(n)throw new Rt.ErrnoError(n,e);for(var r=Rt.hashName(e.id,t),i=Rt.nameTable[r];i;i=i.name_next){var s=i.name;if(i.parent.id===e.id&&s===t)return i}return Rt.lookup(e,t)},createNode:(e,t,n,r)=>{var i=new Rt.FSNode(e,t,n,r);return Rt.hashAddNode(i),i},destroyNode:e=>{Rt.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=Rt.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>Rt.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>{var t=Rt.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return Rt.lookupNode(e,t),20}catch(e){}return Rt.nodePermissions(e,"wx")},mayDelete:(e,t,n)=>{var r;try{r=Rt.lookupNode(e,t)}catch(e){return e.errno}var i=Rt.nodePermissions(e,"wx");if(i)return i;if(n){if(!Rt.isDir(r.mode))return 54;if(Rt.isRoot(r)||Rt.getPath(r)===Rt.cwd())return 10}else if(Rt.isDir(r.mode))return 31;return 0},mayOpen:(e,t)=>e?Rt.isLink(e.mode)?32:Rt.isDir(e.mode)&&("r"!==Rt.flagsToPermissionString(t)||512&t)?31:Rt.nodePermissions(e,Rt.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=Rt.MAX_OPEN_FDS)=>{for(var n=e;n<=t;n++)if(!Rt.streams[n])return n;throw new Rt.ErrnoError(33)},getStream:e=>Rt.streams[e],createStream:(e,t,n)=>{Rt.FSStream||(Rt.FSStream=function(){this.shared={}},Rt.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get function(){return this.shared.position},set:function(e){this.shared.position=e}}}),e=Object.assign(new Rt.FSStream,e);var r=Rt.nextfd(t,n);return e.fd=r,Rt.streams[r]=e,e},closeStream:e=>{Rt.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=Rt.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new Rt.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{Rt.devices[e]={stream_ops:t}},getDevice:e=>Rt.devices[e],getMounts:e=>{for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),Rt.syncFSRequests++,Rt.syncFSRequests>1&&m("warning: "+Rt.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=Rt.getMounts(Rt.root.mount),r=0;function i(e){return Rt.syncFSRequests--,t(e)}function s(e){if(e)return s.errored?void 0:(s.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach((t=>{if(!t.type.syncfs)return s(null);t.type.syncfs(t,e,s)}))},mount:(e,t,n)=>{var r,i="/"===n,s=!n;if(i&&Rt.root)throw new Rt.ErrnoError(10);if(!i&&!s){var o=Rt.lookupPath(n,{follow_mount:!1});if(n=o.path,r=o.node,Rt.isMountpoint(r))throw new Rt.ErrnoError(10);if(!Rt.isDir(r.mode))throw new Rt.ErrnoError(54)}var a={type:e,opts:t,mountpoint:n,mounts:[]},l=e.mount(a);return l.mount=a,a.root=l,i?Rt.root=l:r&&(r.mounted=a,r.mount&&r.mount.mounts.push(a)),l},unmount:e=>{var t=Rt.lookupPath(e,{follow_mount:!1});if(!Rt.isMountpoint(t.node))throw new Rt.ErrnoError(28);var n=t.node,r=n.mounted,i=Rt.getMounts(r);Object.keys(Rt.nameTable).forEach((e=>{for(var t=Rt.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&Rt.destroyNode(t),t=n}})),n.mounted=null;var s=n.mount.mounts.indexOf(r);n.mount.mounts.splice(s,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,n)=>{var r=Rt.lookupPath(e,{parent:!0}).node,i=At.basename(e);if(!i||"."===i||".."===i)throw new Rt.ErrnoError(28);var s=Rt.mayCreate(r,i);if(s)throw new Rt.ErrnoError(s);if(!r.node_ops.mknod)throw new Rt.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,Rt.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,Rt.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{Rt.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,n)=>(void 0===n&&(n=t,t=438),t|=8192,Rt.mknod(e,t,n)),symlink:(e,t)=>{if(!Ct.resolve(e))throw new Rt.ErrnoError(44);var n=Rt.lookupPath(t,{parent:!0}).node;if(!n)throw new Rt.ErrnoError(44);var r=At.basename(t),i=Rt.mayCreate(n,r);if(i)throw new Rt.ErrnoError(i);if(!n.node_ops.symlink)throw new Rt.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:(e,t)=>{var n,r,i=At.dirname(e),s=At.dirname(t),o=At.basename(e),a=At.basename(t);if(n=Rt.lookupPath(e,{parent:!0}).node,r=Rt.lookupPath(t,{parent:!0}).node,!n||!r)throw new Rt.ErrnoError(44);if(n.mount!==r.mount)throw new Rt.ErrnoError(75);var l,c=Rt.lookupNode(n,o),u=Ct.relative(e,s);if("."!==u.charAt(0))throw new Rt.ErrnoError(28);if("."!==(u=Ct.relative(t,i)).charAt(0))throw new Rt.ErrnoError(55);try{l=Rt.lookupNode(r,a)}catch(e){}if(c!==l){var h=Rt.isDir(c.mode),d=Rt.mayDelete(n,o,h);if(d)throw new Rt.ErrnoError(d);if(d=l?Rt.mayDelete(r,a,h):Rt.mayCreate(r,a))throw new Rt.ErrnoError(d);if(!n.node_ops.rename)throw new Rt.ErrnoError(63);if(Rt.isMountpoint(c)||l&&Rt.isMountpoint(l))throw new Rt.ErrnoError(10);if(r!==n&&(d=Rt.nodePermissions(n,"w")))throw new Rt.ErrnoError(d);Rt.hashRemoveNode(c);try{n.node_ops.rename(c,r,a)}catch(e){throw e}finally{Rt.hashAddNode(c)}}},rmdir:e=>{var t=Rt.lookupPath(e,{parent:!0}).node,n=At.basename(e),r=Rt.lookupNode(t,n),i=Rt.mayDelete(t,n,!0);if(i)throw new Rt.ErrnoError(i);if(!t.node_ops.rmdir)throw new Rt.ErrnoError(63);if(Rt.isMountpoint(r))throw new Rt.ErrnoError(10);t.node_ops.rmdir(t,n),Rt.destroyNode(r)},readdir:e=>{var t=Rt.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Rt.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=Rt.lookupPath(e,{parent:!0}).node;if(!t)throw new Rt.ErrnoError(44);var n=At.basename(e),r=Rt.lookupNode(t,n),i=Rt.mayDelete(t,n,!1);if(i)throw new Rt.ErrnoError(i);if(!t.node_ops.unlink)throw new Rt.ErrnoError(63);if(Rt.isMountpoint(r))throw new Rt.ErrnoError(10);t.node_ops.unlink(t,n),Rt.destroyNode(r)},readlink:e=>{var t=Rt.lookupPath(e).node;if(!t)throw new Rt.ErrnoError(44);if(!t.node_ops.readlink)throw new Rt.ErrnoError(28);return Ct.resolve(Rt.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var n=Rt.lookupPath(e,{follow:!t}).node;if(!n)throw new Rt.ErrnoError(44);if(!n.node_ops.getattr)throw new Rt.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>Rt.stat(e,!0),chmod:(e,t,n)=>{var r;if(!(r="string"==typeof e?Rt.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new Rt.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:(e,t)=>{Rt.chmod(e,t,!0)},fchmod:(e,t)=>{var n=Rt.getStream(e);if(!n)throw new Rt.ErrnoError(8);Rt.chmod(n.node,t)},chown:(e,t,n,r)=>{var i;if(!(i="string"==typeof e?Rt.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Rt.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(e,t,n)=>{Rt.chown(e,t,n,!0)},fchown:(e,t,n)=>{var r=Rt.getStream(e);if(!r)throw new Rt.ErrnoError(8);Rt.chown(r.node,t,n)},truncate:(e,t)=>{if(t<0)throw new Rt.ErrnoError(28);var n;if(!(n="string"==typeof e?Rt.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Rt.ErrnoError(63);if(Rt.isDir(n.mode))throw new Rt.ErrnoError(31);if(!Rt.isFile(n.mode))throw new Rt.ErrnoError(28);var r=Rt.nodePermissions(n,"w");if(r)throw new Rt.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var n=Rt.getStream(e);if(!n)throw new Rt.ErrnoError(8);if(0==(2097155&n.flags))throw new Rt.ErrnoError(28);Rt.truncate(n.node,t)},utime:(e,t,n)=>{var r=Rt.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:(t,n,r)=>{if(""===t)throw new Rt.ErrnoError(44);var i;if(r=void 0===r?438:r,r=64&(n="string"==typeof n?Rt.modeStringToFlags(n):n)?4095&r|32768:0,"object"==typeof t)i=t;else{t=At.normalize(t);try{i=Rt.lookupPath(t,{follow:!(131072&n)}).node}catch(e){}}var s=!1;if(64&n)if(i){if(128&n)throw new Rt.ErrnoError(20)}else i=Rt.mknod(t,r,0),s=!0;if(!i)throw new Rt.ErrnoError(44);if(Rt.isChrdev(i.mode)&&(n&=-513),65536&n&&!Rt.isDir(i.mode))throw new Rt.ErrnoError(54);if(!s){var o=Rt.mayOpen(i,n);if(o)throw new Rt.ErrnoError(o)}512&n&&!s&&Rt.truncate(i,0),n&=-131713;var a=Rt.createStream({node:i,path:Rt.getPath(i),flags:n,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1});return a.stream_ops.open&&a.stream_ops.open(a),!e.logReadFiles||1&n||(Rt.readFiles||(Rt.readFiles={}),t in Rt.readFiles||(Rt.readFiles[t]=1)),a},close:e=>{if(Rt.isClosed(e))throw new Rt.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Rt.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,n)=>{if(Rt.isClosed(e))throw new Rt.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Rt.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new Rt.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:(e,t,n,r,i)=>{if(r<0||i<0)throw new Rt.ErrnoError(28);if(Rt.isClosed(e))throw new Rt.ErrnoError(8);if(1==(2097155&e.flags))throw new Rt.ErrnoError(8);if(Rt.isDir(e.node.mode))throw new Rt.ErrnoError(31);if(!e.stream_ops.read)throw new Rt.ErrnoError(28);var s=void 0!==i;if(s){if(!e.seekable)throw new Rt.ErrnoError(70)}else i=e.position;var o=e.stream_ops.read(e,t,n,r,i);return s||(e.position+=o),o},write:(e,t,n,r,i,s)=>{if(r<0||i<0)throw new Rt.ErrnoError(28);if(Rt.isClosed(e))throw new Rt.ErrnoError(8);if(0==(2097155&e.flags))throw new Rt.ErrnoError(8);if(Rt.isDir(e.node.mode))throw new Rt.ErrnoError(31);if(!e.stream_ops.write)throw new Rt.ErrnoError(28);e.seekable&&1024&e.flags&&Rt.llseek(e,0,2);var o=void 0!==i;if(o){if(!e.seekable)throw new Rt.ErrnoError(70)}else i=e.position;var a=e.stream_ops.write(e,t,n,r,i,s);return o||(e.position+=a),a},allocate:(e,t,n)=>{if(Rt.isClosed(e))throw new Rt.ErrnoError(8);if(t<0||n<=0)throw new Rt.ErrnoError(28);if(0==(2097155&e.flags))throw new Rt.ErrnoError(8);if(!Rt.isFile(e.node.mode)&&!Rt.isDir(e.node.mode))throw new Rt.ErrnoError(43);if(!e.stream_ops.allocate)throw new Rt.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:(e,t,n,r,i)=>{if(0!=(2&r)&&0==(2&i)&&2!=(2097155&e.flags))throw new Rt.ErrnoError(2);if(1==(2097155&e.flags))throw new Rt.ErrnoError(2);if(!e.stream_ops.mmap)throw new Rt.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i)},msync:(e,t,n,r,i)=>e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0,munmap:e=>0,ioctl:(e,t,n)=>{if(!e.stream_ops.ioctl)throw new Rt.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=Rt.open(e,t.flags),i=Rt.stat(e).size,s=new Uint8Array(i);return Rt.read(r,s,0,i,0),"utf8"===t.encoding?n=b(s,0):"binary"===t.encoding&&(n=s),Rt.close(r),n},writeFile:(e,t,n={})=>{n.flags=n.flags||577;var r=Rt.open(e,n.flags,n.mode);if("string"==typeof t){var i=new Uint8Array(w(t)+1),s=x(t,i,0,i.length);Rt.write(r,i,0,s,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Rt.write(r,t,0,t.byteLength,void 0,n.canOwn)}Rt.close(r)},cwd:()=>Rt.currentPath,chdir:e=>{var t=Rt.lookupPath(e,{follow:!0});if(null===t.node)throw new Rt.ErrnoError(44);if(!Rt.isDir(t.node.mode))throw new Rt.ErrnoError(54);var n=Rt.nodePermissions(t.node,"x");if(n)throw new Rt.ErrnoError(n);Rt.currentPath=t.path},createDefaultDirectories:()=>{Rt.mkdir("/tmp"),Rt.mkdir("/home"),Rt.mkdir("/home/web_user")},createDefaultDevices:()=>{Rt.mkdir("/dev"),Rt.registerDevice(Rt.makedev(1,3),{read:()=>0,write:(e,t,n,r,i)=>r}),Rt.mkdev("/dev/null",Rt.makedev(1,3)),kt.register(Rt.makedev(5,0),kt.default_tty_ops),kt.register(Rt.makedev(6,0),kt.default_tty1_ops),Rt.mkdev("/dev/tty",Rt.makedev(5,0)),Rt.mkdev("/dev/tty1",Rt.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){$("randomDevice")}}();Rt.createDevice("/dev","random",e),Rt.createDevice("/dev","urandom",e),Rt.mkdir("/dev/shm"),Rt.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{Rt.mkdir("/proc");var e=Rt.mkdir("/proc/self");Rt.mkdir("/proc/self/fd"),Rt.mount({mount:()=>{var t=Rt.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var n=+t,r=Rt.getStream(n);if(!r)throw new Rt.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>r.path}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{e.stdin?Rt.createDevice("/dev","stdin",e.stdin):Rt.symlink("/dev/tty","/dev/stdin"),e.stdout?Rt.createDevice("/dev","stdout",null,e.stdout):Rt.symlink("/dev/tty","/dev/stdout"),e.stderr?Rt.createDevice("/dev","stderr",null,e.stderr):Rt.symlink("/dev/tty1","/dev/stderr"),Rt.open("/dev/stdin",0),Rt.open("/dev/stdout",1),Rt.open("/dev/stderr",1)},ensureErrnoError:()=>{Rt.ErrnoError||(Rt.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},Rt.ErrnoError.prototype=new Error,Rt.ErrnoError.prototype.constructor=Rt.ErrnoError,[44].forEach((e=>{Rt.genericErrors[e]=new Rt.ErrnoError(e),Rt.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{Rt.ensureErrnoError(),Rt.nameTable=new Array(4096),Rt.mount(Pt,{},"/"),Rt.createDefaultDirectories(),Rt.createDefaultDevices(),Rt.createSpecialDirectories(),Rt.filesystems={MEMFS:Pt}},init:(t,n,r)=>{Rt.init.initialized=!0,Rt.ensureErrnoError(),e.stdin=t||e.stdin,e.stdout=n||e.stdout,e.stderr=r||e.stderr,Rt.createStandardStreams()},quit:()=>{Rt.init.initialized=!1;for(var e=0;e<Rt.streams.length;e++){var t=Rt.streams[e];t&&Rt.close(t)}},getMode:(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:(e,t)=>{var n=Rt.analyzePath(e,t);return n.exists?n.object:null},analyzePath:(e,t)=>{try{e=(r=Rt.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Rt.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=At.basename(e),r=Rt.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:(e,t,n,r)=>{e="string"==typeof e?e:Rt.getPath(e);for(var i=t.split("/").reverse();i.length;){var s=i.pop();if(s){var o=At.join2(e,s);try{Rt.mkdir(o)}catch(e){}e=o}}return o},createFile:(e,t,n,r,i)=>{var s=At.join2("string"==typeof e?e:Rt.getPath(e),t),o=Rt.getMode(r,i);return Rt.create(s,o)},createDataFile:(e,t,n,r,i,s)=>{var o=t;e&&(e="string"==typeof e?e:Rt.getPath(e),o=t?At.join2(e,t):e);var a=Rt.getMode(r,i),l=Rt.create(o,a);if(n){if("string"==typeof n){for(var c=new Array(n.length),u=0,h=n.length;u<h;++u)c[u]=n.charCodeAt(u);n=c}Rt.chmod(l,146|a);var d=Rt.open(l,577);Rt.write(d,n,0,n.length,0,s),Rt.close(d),Rt.chmod(l,a)}return l},createDevice:(e,t,n,r)=>{var i=At.join2("string"==typeof e?e:Rt.getPath(e),t),s=Rt.getMode(!!n,!!r);Rt.createDevice.major||(Rt.createDevice.major=64);var o=Rt.makedev(Rt.createDevice.major++,0);return Rt.registerDevice(o,{open:e=>{e.seekable=!1},close:e=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(e,t,r,i,s)=>{for(var o=0,a=0;a<i;a++){var l;try{l=n()}catch(e){throw new Rt.ErrnoError(29)}if(void 0===l&&0===o)throw new Rt.ErrnoError(6);if(null==l)break;o++,t[r+a]=l}return o&&(e.node.timestamp=Date.now()),o},write:(e,t,n,i,s)=>{for(var o=0;o<i;o++)try{r(t[n+o])}catch(e){throw new Rt.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}}),Rt.mkdev(i,s,o)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!s)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Bt(s(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new Rt.ErrnoError(29)}},createLazyFile:(e,t,n,r,i)=>{function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},s.prototype.setDataGetter=function(e){this.getter=e},s.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,s=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;i||(o=r);var a=this;a.setDataGetter((e=>{var t=e*o,i=(e+1)*o-1;if(i=Math.min(i,r-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==o&&i.setRequestHeader("Range","bytes="+e+"-"+t),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):Bt(i.responseText||"",!0)})(t,i)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]})),!s&&r||(o=r=1,r=this.getter(0).length,o=r,f("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o={isDevice:!1,url:n},a=Rt.createFile(e,t,o,r,i);o.contents?a.contents=o.contents:o.url&&(a.contents=null,a.url=o.url),Object.defineProperties(a,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(a.stream_ops).forEach((e=>{var t=a.stream_ops[e];l[e]=function(){return Rt.forceLoadFile(a),t.apply(null,arguments)}})),l.read=(e,t,n,r,i)=>{Rt.forceLoadFile(a);var s=e.node.contents;if(i>=s.length)return 0;var o=Math.min(s.length-i,r);if(s.slice)for(var l=0;l<o;l++)t[n+l]=s[i+l];else for(l=0;l<o;l++)t[n+l]=s.get(i+l);return o},a.stream_ops=l,a},createPreloadedFile:(e,t,n,r,i,s,a,l,c,u)=>{var h=t?Ct.resolve(At.join2(e,t)):e;function d(n){function o(n){u&&u(),l||Rt.createDataFile(e,t,n,r,i,c),s&&s(),J()}Browser.handledByPreloadPlugin(n,h,o,(()=>{a&&a(),J()}))||o(n)}Y(),"string"==typeof n?function(e,t,n,r){var i=r?"":"al "+e;o(e,(function(n){v(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),i&&J()}),(function(t){if(!n)throw'Loading data file "'+e+'" failed.';n()})),i&&Y()}(n,(e=>d(e)),a):d(n)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=Rt.indexedDB();try{var i=r.open(Rt.DB_NAME(),Rt.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=()=>{f("creating db"),i.result.createObjectStore(Rt.DB_STORE_NAME)},i.onsuccess=()=>{var r=i.result.transaction([Rt.DB_STORE_NAME],"readwrite"),s=r.objectStore(Rt.DB_STORE_NAME),o=0,a=0,l=e.length;function c(){0==a?t():n()}e.forEach((e=>{var t=s.put(Rt.analyzePath(e).object.contents,e);t.onsuccess=()=>{++o+a==l&&c()},t.onerror=()=>{a++,o+a==l&&c()}})),r.onerror=n},i.onerror=n},loadFilesFromDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=Rt.indexedDB();try{var i=r.open(Rt.DB_NAME(),Rt.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=n,i.onsuccess=()=>{var r=i.result;try{var s=r.transaction([Rt.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var o=s.objectStore(Rt.DB_STORE_NAME),a=0,l=0,c=e.length;function u(){0==l?t():n()}e.forEach((e=>{var t=o.get(e);t.onsuccess=()=>{Rt.analyzePath(e).exists&&Rt.unlink(e),Rt.createDataFile(At.dirname(e),At.basename(e),t.result,!0,!0,!0),++a+l==c&&u()},t.onerror=()=>{l++,a+l==c&&u()}})),s.onerror=n},i.onerror=n}},Lt={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(At.isAbs(t))return t;var r;if(-100===e)r=Rt.cwd();else{var i=Rt.getStream(e);if(!i)throw new Rt.ErrnoError(8);r=i.path}if(0==t.length){if(!n)throw new Rt.ErrnoError(44);return r}return At.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&At.normalize(t)!==At.normalize(Rt.getPath(e.node)))return-54;throw e}return C[n>>2]=r.dev,C[n+4>>2]=0,C[n+8>>2]=r.ino,C[n+12>>2]=r.mode,C[n+16>>2]=r.nlink,C[n+20>>2]=r.uid,C[n+24>>2]=r.gid,C[n+28>>2]=r.rdev,C[n+32>>2]=0,Z=[r.size>>>0,(G=r.size,+Math.abs(G)>=1?G>0?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],C[n+40>>2]=Z[0],C[n+44>>2]=Z[1],C[n+48>>2]=4096,C[n+52>>2]=r.blocks,C[n+56>>2]=r.atime.getTime()/1e3|0,C[n+60>>2]=0,C[n+64>>2]=r.mtime.getTime()/1e3|0,C[n+68>>2]=0,C[n+72>>2]=r.ctime.getTime()/1e3|0,C[n+76>>2]=0,Z=[r.ino>>>0,(G=r.ino,+Math.abs(G)>=1?G>0?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],C[n+80>>2]=Z[0],C[n+84>>2]=Z[1],0},doMsync:function(e,t,n,r,i){var s=E.slice(e,e+n);Rt.msync(t,s,i,n,r)},varargs:void 0,get:function(){return Lt.varargs+=4,C[Lt.varargs-4>>2]},getStr:function(e){return _(e)},getStreamFromFD:function(e){var t=Rt.getStream(e);if(!t)throw new Rt.ErrnoError(8);return t}};function Ot(e){return e%4==0&&(e%100!=0||e%400==0)}var Nt=[31,29,31,30,31,30,31,31,30,31,30,31],It=[31,28,31,30,31,30,31,31,30,31,30,31];function Dt(e,t,n,r){var i=C[r+40>>2],s={tm_sec:C[r>>2],tm_min:C[r+4>>2],tm_hour:C[r+8>>2],tm_mday:C[r+12>>2],tm_mon:C[r+16>>2],tm_year:C[r+20>>2],tm_wday:C[r+24>>2],tm_yday:C[r+28>>2],tm_isdst:C[r+32>>2],tm_gmtoff:C[r+36>>2],tm_zone:i?_(i):""},o=_(n),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in a)o=o.replace(new RegExp(l,"g"),a[l]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"];function h(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function d(e,t){return h(e,t,"0")}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function f(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=function(e,t){for(var n=new Date(e.getTime());t>0;){var r=Ot(n.getFullYear()),i=n.getMonth(),s=(r?Nt:It)[i];if(!(t>s-n.getDate()))return n.setDate(n.getDate()+t),n;t-=s-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=f(n),s=f(r);return p(i,t)<=0?p(s,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return c[e.tm_wday].substring(0,3)},"%A":function(e){return c[e.tm_wday]},"%b":function(e){return u[e.tm_mon].substring(0,3)},"%B":function(e){return u[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return h(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(e){return d(e.tm_mday+function(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}(Ot(e.tm_year+1900)?Nt:It,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return d(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var n=(e.tm_wday+371-e.tm_yday)%7;4==n||3==n&&Ot(e.tm_year)||(t=1)}}else{t=52;var r=(e.tm_wday+7-e.tm_yday-1)%7;(4==r||5==r&&Ot(e.tm_year%400-1))&&t++}return d(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return d(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var l in o=o.replace(/%%/g,"\0\0"),g)o.includes(l)&&(o=o.replace(new RegExp(l,"g"),g[l](s)));var v=Bt(o=o.replace(/\0\0/g,"%"),!1);return v.length>t?0:(function(e,t){T.set(e,t)}(v,e),v.length-1)}fe=e.InternalError=pe(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ye=e}(),_e=e.BindingError=pe(Error,"BindingError"),je.prototype.isAliasOf=Se,je.prototype.clone=Ve,je.prototype.delete=Ge,je.prototype.isDeleted=Ze,je.prototype.deleteLater=He,e.getInheritedInstanceCount=Pe,e.getLiveInheritedInstances=Re,e.flushPendingDeletes=Oe,e.setDelayFunction=Ie,tt.prototype.getPointee=$e,tt.prototype.destructor=Qe,tt.prototype.argPackAdvance=8,tt.prototype.readValueFromPointer=ae,tt.prototype.deleteObject=et,tt.prototype.fromWireType=Ue,it=e.UnboundTypeError=pe(Error,"UnboundTypeError"),e.count_emval_handles=pt,e.get_first_emval=ft;var Ft=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Rt.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},zt=365,Ut=146;function Bt(e,t,n){var r=n>0?n:w(e)+1,i=new Array(r),s=x(e,i,0,i.length);return t&&(i.length=s),i}Object.defineProperties(Ft.prototype,{read:{get:function(){return(this.mode&zt)===zt},set:function(e){e?this.mode|=zt:this.mode&=-366}},write:{get:function(){return(this.mode&Ut)===Ut},set:function(e){e?this.mode|=Ut:this.mode&=-147}},isFolder:{get:function(){return Rt.isDir(this.mode)}},isDevice:{get:function(){return Rt.isChrdev(this.mode)}}}),Rt.FSNode=Ft,Rt.staticInit();var Vt,Gt={j:function(e,t,n,r){$("Assertion failed: "+_(e)+", at: "+[t?_(t):"unknown filename",n,r?_(r):"unknown function"])},t:function(e){return Zt(e+24)+24},s:function(e,t,n){throw new ie(e).init(t,n),e},m:function(e){var t=se[e];delete se[e];var n=t.rawConstructor,r=t.rawDestructor,i=t.fields;ge([e],i.map((e=>e.getterReturnType)).concat(i.map((e=>e.setterArgumentType))),(e=>{var s={};return i.forEach(((t,n)=>{var r=t.fieldName,o=e[n],a=t.getter,l=t.getterContext,c=e[n+i.length],u=t.setter,h=t.setterContext;s[r]={read:e=>o.fromWireType(a(l,e)),write:(e,t)=>{var n=[];u(h,e,c.toWireType(n,t)),oe(n)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var n in s)t[n]=s[n].read(e);return r(e),t},toWireType:function(e,t){for(var i in s)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var o=n();for(i in s)s[i].write(o,t[i]);return null!==e&&e.push(r,o),o},argPackAdvance:8,readValueFromPointer:ae,destructorFunction:r}]}))},A:function(e,t,n,r,i){},K:function(e,t,n,r,i){var s=ve(n);we(e,{name:t=be(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=T;else if(2===n)r=M;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=C}return this.fromWireType(r[e>>s])},destructorFunction:null})},q:function(t,n,r,i,s,o,a,l,c,u,h,d,p){h=be(h),o=rt(s,o),l&&(l=rt(a,l)),u&&(u=rt(c,u)),p=rt(d,p);var f=he(h);!function(t,n,r){e.hasOwnProperty(t)?((void 0===r||void 0!==e[t].overloadTable&&void 0!==e[t].overloadTable[r])&&xe("Cannot register public name '"+t+"' twice"),We(e,t,t),e.hasOwnProperty(r)&&xe("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),e[t].overloadTable[r]=n):(e[t]=n,void 0!==r&&(e[t].numArguments=r))}(f,(function(){ot("Cannot construct "+h+" due to unbound types",[i])})),ge([t,n,r],i?[i]:[],(function(n){var r,s;n=n[0],s=i?(r=n.registeredClass).instancePrototype:je.prototype;var a=de(f,(function(){if(Object.getPrototypeOf(this)!==c)throw new _e("Use 'new' to construct "+h);if(void 0===d.constructor_body)throw new _e(h+" has no accessible constructor");var e=d.constructor_body[arguments.length];if(void 0===e)throw new _e("Tried to invoke ctor of "+h+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(d.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),c=Object.create(s,{constructor:{value:a}});a.prototype=c;var d=new qe(h,a,c,p,r,o,l,u),m=new tt(h,d,!0,!1,!1),g=new tt(h+"*",d,!1,!1,!1),v=new tt(h+" const*",d,!1,!0,!1);return ke[t]={pointerType:g,constPointerType:v},function(t,n,r){e.hasOwnProperty(t)||me("Replacing nonexistant public symbol"),void 0!==e[t].overloadTable&&void 0!==r?e[t].overloadTable[r]=n:(e[t]=n,e[t].argCount=r)}(f,a),[m,g,v]}))},y:function(e,t,n,r,i,s,o){var a=ct(n,r);t=be(t),s=rt(i,s),ge([],[e],(function(e){var r=(e=e[0]).name+"."+t;function i(){ot("Cannot call "+r+" due to unbound types",a)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]);var l=e.registeredClass.constructor;return void 0===l[t]?(i.argCount=n-1,l[t]=i):(We(l,t,r),l[t].overloadTable[n-1]=i),ge([],a,(function(e){var i=[e[0],null].concat(e.slice(1)),a=lt(r,i,null,s,o);return void 0===l[t].overloadTable?(a.argCount=n-1,l[t]=a):l[t].overloadTable[n-1]=a,[]})),[]}))},p:function(e,t,n,r,i,s){v(t>0);var o=ct(t,n);i=rt(r,i),ge([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new _e("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=()=>{ot("Cannot construct "+e.name+" due to unbound types",o)},ge([],o,(function(r){return r.splice(1,0,null),e.registeredClass.constructor_body[t-1]=lt(n,r,null,i,s),[]})),[]}))},c:function(e,t,n,r,i,s,o,a){var l=ct(n,r);t=be(t),s=rt(i,s),ge([],[e],(function(e){var r=(e=e[0]).name+"."+t;function i(){ot("Cannot call "+r+" due to unbound types",l)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,u=c[t];return void 0===u||void 0===u.overloadTable&&u.className!==e.name&&u.argCount===n-2?(i.argCount=n-2,i.className=e.name,c[t]=i):(We(c,t,r),c[t].overloadTable[n-2]=i),ge([],l,(function(i){var a=lt(r,i,e,s,o);return void 0===c[t].overloadTable?(a.argCount=n-2,c[t]=a):c[t].overloadTable[n-2]=a,[]})),[]}))},J:function(e,t){we(e,{name:t=be(t),fromWireType:function(e){var t=mt.toValue(e);return dt(e),t},toWireType:function(e,t){return mt.toHandle(t)},argPackAdvance:8,readValueFromPointer:ae,destructorFunction:null})},x:function(e,t,n){var r=ve(n);we(e,{name:t=be(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:vt(t,r),destructorFunction:null})},i:function(e,t,n,r,i){t=be(t),-1===i&&(i=4294967295);var s=ve(n),o=e=>e;if(0===r){var a=32-8*n;o=e=>e<<a>>>a}var l=t.includes("unsigned");we(e,{name:t,fromWireType:o,toWireType:l?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:yt(t,s,0!==r),destructorFunction:null})},e:function(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=k,n=t[e>>=2],i=t[e+1];return new r(S,i,n)}we(e,{name:n=be(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},w:function(e,t){var n="std::string"===(t=be(t));we(e,{name:t,fromWireType:function(e){var t,r=k[e>>2];if(n)for(var i=e+4,s=0;s<=r;++s){var o=e+4+s;if(s==r||0==E[o]){var a=_(i,o-i);void 0===t?t=a:(t+=String.fromCharCode(0),t+=a),i=o+1}}else{var l=new Array(r);for(s=0;s<r;++s)l[s]=String.fromCharCode(E[e+4+s]);t=l.join("")}return jt(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||xe("Cannot pass non-string to std::string");var i=(n&&r?()=>w(t):()=>t.length)(),s=Zt(4+i+1);if(k[s>>2]=i,n&&r)x(t,E,s+4,i+1);else if(r)for(var o=0;o<i;++o){var a=t.charCodeAt(o);a>255&&(jt(s),xe("String has UTF-16 code units that do not fit in 8 bits")),E[s+4+o]=a}else for(o=0;o<i;++o)E[s+4+o]=t[o];return null!==e&&e.push(jt,s),s},argPackAdvance:8,readValueFromPointer:ae,destructorFunction:function(e){jt(e)}})},r:function(e,t,n){var r,i,s,o,a;n=be(n),2===t?(r=O,i=N,o=I,s=()=>A,a=1):4===t&&(r=D,i=F,o=z,s=()=>k,a=2),we(e,{name:n,fromWireType:function(e){for(var n,i=k[e>>2],o=s(),l=e+4,c=0;c<=i;++c){var u=e+4+c*t;if(c==i||0==o[u>>a]){var h=r(l,u-l);void 0===n?n=h:(n+=String.fromCharCode(0),n+=h),l=u+t}}return jt(e),n},toWireType:function(e,r){"string"!=typeof r&&xe("Cannot pass non-string to C++ string type "+n);var s=o(r),l=Zt(4+s+t);return k[l>>2]=s>>a,i(r,l+4,s+t),null!==e&&e.push(jt,l),l},argPackAdvance:8,readValueFromPointer:ae,destructorFunction:function(e){jt(e)}})},k:function(e,t,n,r,i,s){se[e]={name:be(t),rawConstructor:rt(n,r),rawDestructor:rt(i,s),fields:[]}},a:function(e,t,n,r,i,s,o,a,l,c){se[e].fields.push({fieldName:be(t),getterReturnType:n,getter:rt(r,i),getterContext:s,setterArgumentType:o,setter:rt(a,l),setterContext:c})},L:function(e,t){we(e,{isVoid:!0,name:t=be(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},o:function(e,t,n){e=mt.toValue(e),t=bt(t,"emval::as");var r=[],i=mt.toHandle(r);return C[n>>2]=i,t.toWireType(r,e)},O:function(e,t,n,r,i){return(e=wt[e])(t=mt.toValue(t),n=xt(n),function(e){var t=[];return C[e>>2]=mt.toHandle(t),t}(r),i)},h:function(e,t,n,r){(e=wt[e])(t=mt.toValue(t),n=xt(n),null,r)},b:dt,g:function(e,t){var n=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=bt(C[(t>>2)+r],"parameter "+r);return n}(e,t),r=n[0],i=r.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$",s=St[i];if(void 0!==s)return s;for(var o=["retType"],a=[r],l="",c=0;c<e-1;++c)l+=(0!==c?", ":"")+"arg"+c,o.push("argType"+c),a.push(n[1+c]);var u="return function "+he("methodCaller_"+i)+"(handle, name, destructors, args) {\n",h=0;for(c=0;c<e-1;++c)u+="    var arg"+c+" = argType"+c+".readValueFromPointer(args"+(h?"+"+h:"")+");\n",h+=n[c+1].argPackAdvance;for(u+="    var rv = handle[name]("+l+");\n",c=0;c<e-1;++c)n[c+1].deleteObject&&(u+="    argType"+c+".deleteObject(arg"+c+");\n");r.isVoid||(u+="    return retType.toWireType(destructors, rv);\n"),u+="};\n",o.push(u);var d,p,f=at(Function,o).apply(null,a);return d=f,p=wt.length,wt.push(d),s=p,St[i]=s,s},M:function(e,t){return e=mt.toValue(e),t=mt.toValue(t),mt.toHandle(e[t])},d:function(e){e>4&&(ht[e].refcount+=1)},l:function(){return mt.toHandle([])},N:function(e){return mt.toHandle(xt(e))},n:function(e){oe(mt.toValue(e)),dt(e)},f:function(e,t){var n=(e=bt(e,"_emval_take_value")).readValueFromPointer(t);return mt.toHandle(n)},u:function(){$("")},I:function(e,t,n){E.copyWithin(e,t,t+n)},H:function(e){var t,n,r=E.length,i=2147483648;if((e>>>=0)>i)return!1;for(var s=1;s<=4;s*=2){var o=r*(1+.2/s);if(o=Math.min(o,e+100663296),Tt(Math.min(i,(t=Math.max(e,o))+((n=65536)-t%n)%n)))return!0}return!1},D:function(e,t){var n=0;return Mt().forEach((function(r,i){var s=t+n;k[e+4*i>>2]=s,function(e,t,n){for(var r=0;r<e.length;++r)T[t++>>0]=e.charCodeAt(r);n||(T[t>>0]=0)}(r,s),n+=r.length+1})),0},E:function(e,t){var n=Mt();k[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),k[t>>2]=r,0},F:function(e){try{var t=Lt.getStreamFromFD(e);return Rt.close(t),0}catch(e){if(void 0===Rt||!(e instanceof Rt.ErrnoError))throw e;return e.errno}},G:function(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,s=0;s<n;s++){var o=k[t>>2],a=k[t+4>>2];t+=8;var l=Rt.read(e,T,o,a,r);if(l<0)return-1;if(i+=l,l<a)break}return i}(Lt.getStreamFromFD(e),t,n);return C[r>>2]=i,0}catch(e){if(void 0===Rt||!(e instanceof Rt.ErrnoError))throw e;return e.errno}},z:function(e,t,n,r,i){try{var s=(l=n)+2097152>>>0<4194305-!!(a=t)?(a>>>0)+4294967296*l:NaN;if(isNaN(s))return 61;var o=Lt.getStreamFromFD(e);return Rt.llseek(o,s,r),Z=[o.position>>>0,(G=o.position,+Math.abs(G)>=1?G>0?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],C[i>>2]=Z[0],C[i+4>>2]=Z[1],o.getdents&&0===s&&0===r&&(o.getdents=null),0}catch(e){if(void 0===Rt||!(e instanceof Rt.ErrnoError))throw e;return e.errno}var a,l},v:function(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,s=0;s<n;s++){var o=k[t>>2],a=k[t+4>>2];t+=8;var l=Rt.write(e,T,o,a,r);if(l<0)return-1;i+=l}return i}(Lt.getStreamFromFD(e),t,n);return k[r>>2]=i,0}catch(e){if(void 0===Rt||!(e instanceof Rt.ErrnoError))throw e;return e.errno}},B:function(e){},C:function(e,t,n,r){return Dt(e,t,n,r)}},Zt=(function(){var t={a:Gt};function n(t,n){var r,i=t.exports;e.asm=i,U((p=e.asm.P).buffer),B=e.asm.S,r=e.asm.Q,j.unshift(r),J()}function r(e){n(e.instance)}function s(e){return(d||"function"!=typeof fetch?Promise.resolve().then((function(){return ee(V)})):fetch(V,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+V+"'";return e.arrayBuffer()})).catch((function(){return ee(V)}))).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(e,(function(e){m("failed to asynchronously prepare wasm: "+e),$(e)}))}if(Y(),e.instantiateWasm)try{return e.instantiateWasm(t,n)}catch(e){return m("Module.instantiateWasm callback failed with error: "+e),!1}(d||"function"!=typeof WebAssembly.instantiateStreaming||Q(V)||"function"!=typeof fetch?s(r):fetch(V,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){return m("wasm streaming compile failed: "+e),m("falling back to ArrayBuffer instantiation"),s(r)}))}))).catch(i)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.Q).apply(null,arguments)},e._malloc=function(){return(Zt=e._malloc=e.asm.R).apply(null,arguments)}),Ht=e.___getTypeName=function(){return(Ht=e.___getTypeName=e.asm.T).apply(null,arguments)},jt=(e.___embind_register_native_and_builtin_types=function(){return(e.___embind_register_native_and_builtin_types=e.asm.U).apply(null,arguments)},e._free=function(){return(jt=e._free=e.asm.V).apply(null,arguments)}),Wt=e.___cxa_is_pointer_type=function(){return(Wt=e.___cxa_is_pointer_type=e.asm.W).apply(null,arguments)};function qt(n){function r(){Vt||(Vt=!0,e.calledRun=!0,g||(e.noFSInit||Rt.init.initialized||Rt.init(),Rt.ignorePermissions=!1,kt.init(),te(j),t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),W.unshift(t);var t;te(W)}()))}n=n||c,q>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),H.unshift(t);var t;te(H)}(),q>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),r()}),1)):r()))}if(e.dynCall_viijii=function(){return(e.dynCall_viijii=e.asm.X).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.Y).apply(null,arguments)},e.dynCall_iiiiij=function(){return(e.dynCall_iiiiij=e.asm.Z).apply(null,arguments)},e.dynCall_iiiiijj=function(){return(e.dynCall_iiiiijj=e.asm._).apply(null,arguments)},e.dynCall_iiiiiijj=function(){return(e.dynCall_iiiiiijj=e.asm.$).apply(null,arguments)},X=function e(){Vt||qt(),Vt||(X=e)},e.run=qt,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return qt(),e.ready})},"3fZ9":(e,t,n)=>{"use strict";var r;n.d(t,{Z:()=>i});const i=(r="file:///C:/Husky/streams2/tools/code/Influx/src/lib/fx/techniques/cpp/module.cpp",function(e){var t,i;(e=void 0!==(e=e||{})?e:{}).ready=new Promise((function(e,n){t=e,i=n}));var s,o,a,l=Object.assign({},e),c=[],u="./this.program",h="";"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),h=0!==(h=r).indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},o=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)};var d,p,f=e.print||console.log.bind(console),m=e.printErr||console.warn.bind(console);Object.assign(e,l),l=null,e.arguments&&(c=e.arguments),e.thisProgram&&(u=e.thisProgram),e.quit&&e.quit,e.wasmBinary&&(d=e.wasmBinary),e.noExitRuntime,"object"!=typeof WebAssembly&&$("no native wasm support detected");var g=!1;function v(e,t){e||$(t)}var y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function b(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&y)return y.decode(e.subarray(t,i));for(var s="";t<i;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if((o=224==(240&o)?(15&o)<<12|a<<6|l:(7&o)<<18|a<<12|l<<6|63&e[t++])<65536)s+=String.fromCharCode(o);else{var c=o-65536;s+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else s+=String.fromCharCode((31&o)<<6|a)}else s+=String.fromCharCode(o)}return s}function _(e,t){return e?b(E,e,t):""}function x(e,t,n,r){if(!(r>0))return 0;for(var i=n,s=n+r-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(n>=s)break;t[n++]=a}else if(a<=2047){if(n+1>=s)break;t[n++]=192|a>>6,t[n++]=128|63&a}else if(a<=65535){if(n+2>=s)break;t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a}else{if(n+3>=s)break;t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a}}return t[n]=0,n-i}function w(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}var S,T,E,M,A,C,k,P,R,L="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function O(e,t){for(var n=e,r=n>>1,i=r+t/2;!(r>=i)&&A[r];)++r;if((n=r<<1)-e>32&&L)return L.decode(E.subarray(e,n));for(var s="",o=0;!(o>=t/2);++o){var a=M[e+2*o>>1];if(0==a)break;s+=String.fromCharCode(a)}return s}function N(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,s=0;s<i;++s){var o=e.charCodeAt(s);M[t>>1]=o,t+=2}return M[t>>1]=0,t-r}function I(e){return 2*e.length}function D(e,t){for(var n=0,r="";!(n>=t/4);){var i=C[e+4*n>>2];if(0==i)break;if(++n,i>=65536){var s=i-65536;r+=String.fromCharCode(55296|s>>10,56320|1023&s)}else r+=String.fromCharCode(i)}return r}function F(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,i=r+n-4,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),C[t>>2]=o,(t+=4)+4>i)break}return C[t>>2]=0,t-r}function z(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function U(t){S=t,e.HEAP8=T=new Int8Array(t),e.HEAP16=M=new Int16Array(t),e.HEAP32=C=new Int32Array(t),e.HEAPU8=E=new Uint8Array(t),e.HEAPU16=A=new Uint16Array(t),e.HEAPU32=k=new Uint32Array(t),e.HEAPF32=P=new Float32Array(t),e.HEAPF64=R=new Float64Array(t)}e.INITIAL_MEMORY;var B,V,G,Z,H=[],j=[],W=[],q=0,K=null,X=null;function Y(t){q++,e.monitorRunDependencies&&e.monitorRunDependencies(q)}function J(t){if(q--,e.monitorRunDependencies&&e.monitorRunDependencies(q),0==q&&(null!==K&&(clearInterval(K),K=null),X)){var n=X;X=null,n()}}function $(t){e.onAbort&&e.onAbort(t),m(t="Aborted("+t+")"),g=!0,t+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(t);throw i(n),n}function Q(e){return e.startsWith("data:application/octet-stream;base64,")}function ee(e){try{if(e==V&&d)return new Uint8Array(d);if(a)return a(e);throw"both async and sync fetching of the wasm failed"}catch(e){$(e)}}function te(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?re(r)():re(r)(n.arg):r(void 0===n.arg?null:n.arg)}else n(e)}}e.locateFile?Q(V="C:/Husky/streams2/tools/code/Influx/webpack-addons/module-e32e6b96488546f5db0e12945a440365.wasm")||(V=function(t){return e.locateFile?e.locateFile(t,h):h+t}(V)):V=new URL(n("MlWm"),n.b).toString();var ne=[];function re(e){var t=ne[e];return t||(e>=ne.length&&(ne.length=e+1),ne[e]=t=B.get(e)),t}function ie(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){k[this.ptr+4>>2]=e},this.get_type=function(){return k[this.ptr+4>>2]},this.set_destructor=function(e){k[this.ptr+8>>2]=e},this.get_destructor=function(){return k[this.ptr+8>>2]},this.set_refcount=function(e){C[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,T[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=T[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,T[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=T[this.ptr+13>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=C[this.ptr>>2];C[this.ptr>>2]=e+1},this.release_ref=function(){var e=C[this.ptr>>2];return C[this.ptr>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){k[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return k[this.ptr+16>>2]},this.get_exception_ptr=function(){if(Xt(this.get_type()))return k[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}var se={};function oe(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ae(e){return this.fromWireType(k[e>>2])}var le={},ce={},ue={};function he(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function de(e,t){return e=he(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function pe(e,t){var n=de(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var fe=void 0;function me(e){throw new fe(e)}function ge(e,t,n){function r(t){var r=n(t);r.length!==e.length&&me("Mismatched type converter count");for(var i=0;i<e.length;++i)we(e[i],r[i])}e.forEach((function(e){ue[e]=t}));var i=new Array(t.length),s=[],o=0;t.forEach(((e,t)=>{ce.hasOwnProperty(e)?i[t]=ce[e]:(s.push(e),le.hasOwnProperty(e)||(le[e]=[]),le[e].push((()=>{i[t]=ce[e],++o===s.length&&r(i)})))})),0===s.length&&r(i)}function ve(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var ye=void 0;function be(e){for(var t="",n=e;E[n];)t+=ye[E[n++]];return t}var _e=void 0;function xe(e){throw new _e(e)}function we(e,t,n={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||xe('type "'+r+'" must have a positive integer typeid pointer'),ce.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;xe("Cannot register type '"+r+"' twice")}if(ce[e]=t,delete ue[e],le.hasOwnProperty(e)){var i=le[e];delete le[e],i.forEach((e=>e()))}}function Se(e){if(!(this instanceof je))return!1;if(!(e instanceof je))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return t===r&&n===i}function Te(e){xe(e.$$.ptrType.registeredClass.name+" instance already deleted")}var Ee=!1;function Me(e){}function Ae(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function Ce(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=Ce(e,t,n.baseClass);return null===r?null:n.downcast(r)}var ke={};function Pe(){return Object.keys(De).length}function Re(){var e=[];for(var t in De)De.hasOwnProperty(t)&&e.push(De[t]);return e}var Le=[];function Oe(){for(;Le.length;){var e=Le.pop();e.$$.deleteScheduled=!1,e.delete()}}var Ne=void 0;function Ie(e){Ne=e,Le.length&&Ne&&Ne(Oe)}var De={};function Fe(e,t){return t=function(e,t){for(void 0===t&&xe("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),De[t]}function ze(e,t){return t.ptrType&&t.ptr||me("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&me("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Be(Object.create(e,{$$:{value:t}}))}function Ue(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Fe(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function i(){return this.isSmartPointer?ze(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ze(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var s,o=this.registeredClass.getActualType(t),a=ke[o];if(!a)return i.call(this);s=this.isConst?a.constPointerType:a.pointerType;var l=Ce(t,this.registeredClass,s.registeredClass);return null===l?i.call(this):this.isSmartPointer?ze(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:e}):ze(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}function Be(e){return"undefined"==typeof FinalizationRegistry?(Be=e=>e,e):(Ee=new FinalizationRegistry((e=>{Ae(e.$$)})),Be=e=>{var t=e.$$;if(t.smartPtr){var n={$$:t};Ee.register(e,n,e)}return e},Me=e=>Ee.unregister(e),Be(e))}function Ve(){if(this.$$.ptr||Te(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=Be(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Ge(){this.$$.ptr||Te(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&xe("Object already scheduled for deletion"),Me(this),Ae(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Ze(){return!this.$$.ptr}function He(){return this.$$.ptr||Te(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&xe("Object already scheduled for deletion"),Le.push(this),1===Le.length&&Ne&&Ne(Oe),this.$$.deleteScheduled=!0,this}function je(){}function We(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||xe("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function qe(t,n,r){e.hasOwnProperty(t)?((void 0===r||void 0!==e[t].overloadTable&&void 0!==e[t].overloadTable[r])&&xe("Cannot register public name '"+t+"' twice"),We(e,t,t),e.hasOwnProperty(r)&&xe("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),e[t].overloadTable[r]=n):(e[t]=n,void 0!==r&&(e[t].numArguments=r))}function Ke(e,t,n,r,i,s,o,a){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=s,this.upcast=o,this.downcast=a,this.pureVirtualFunctions=[]}function Xe(e,t,n){for(;t!==n;)t.upcast||xe("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Ye(e,t){if(null===t)return this.isReference&&xe("null is not a valid "+this.name),0;t.$$||xe('Cannot pass "'+yt(t)+'" as a '+this.name),t.$$.ptr||xe("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return Xe(t.$$.ptr,n,this.registeredClass)}function Je(e,t){var n;if(null===t)return this.isReference&&xe("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||xe('Cannot pass "'+yt(t)+'" as a '+this.name),t.$$.ptr||xe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&xe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=Xe(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&xe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:xe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,vt.toHandle((function(){i.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:xe("Unsupporting sharing policy")}return n}function $e(e,t){if(null===t)return this.isReference&&xe("null is not a valid "+this.name),0;t.$$||xe('Cannot pass "'+yt(t)+'" as a '+this.name),t.$$.ptr||xe("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&xe("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return Xe(t.$$.ptr,n,this.registeredClass)}function Qe(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function et(e){this.rawDestructor&&this.rawDestructor(e)}function tt(e){null!==e&&e.delete()}function nt(e,t,n,r,i,s,o,a,l,c,u){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=s,this.sharingPolicy=o,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=c,this.rawDestructor=u,i||void 0!==t.baseClass?this.toWireType=Je:r?(this.toWireType=Ye,this.destructorFunction=null):(this.toWireType=$e,this.destructorFunction=null)}function rt(t,n,r){e.hasOwnProperty(t)||me("Replacing nonexistant public symbol"),void 0!==e[t].overloadTable&&void 0!==r?e[t].overloadTable[r]=n:(e[t]=n,e[t].argCount=r)}function it(t,n,r){return t.includes("j")?function(t,n,r){var i=e["dynCall_"+t];return r&&r.length?i.apply(null,[n].concat(r)):i.call(null,n)}(t,n,r):re(n).apply(null,r)}function st(e,t){var n,r,i,s=(e=be(e)).includes("j")?(n=e,r=t,i=[],function(){return i.length=0,Object.assign(i,arguments),it(n,r,i)}):re(t);return"function"!=typeof s&&xe("unknown function pointer with signature "+e+": "+t),s}var ot=void 0;function at(e){var t=qt(e),n=be(t);return Kt(t),n}function lt(e,t){var n=[],r={};throw t.forEach((function e(t){r[t]||ce[t]||(ue[t]?ue[t].forEach(e):(n.push(t),r[t]=!0))})),new ot(e+": "+n.map(at).join([", "]))}function ct(e,t){for(var n=[],r=0;r<e;r++)n.push(C[(t>>2)+r]);return n}function ut(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=de(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return i instanceof Object?i:r}function ht(e,t,n,r,i){var s=t.length;s<2&&xe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var o=null!==t[1]&&null!==n,a=!1,l=1;l<t.length;++l)if(null!==t[l]&&void 0===t[l].destructorFunction){a=!0;break}var c="void"!==t[0].name,u="",h="";for(l=0;l<s-2;++l)u+=(0!==l?", ":"")+"arg"+l,h+=(0!==l?", ":"")+"arg"+l+"Wired";var d="return function "+he(e)+"("+u+") {\nif (arguments.length !== "+(s-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(s-2)+" args!');\n}\n";a&&(d+="var destructors = [];\n");var p=a?"destructors":"null",f=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[xe,r,i,oe,t[0],t[1]];for(o&&(d+="var thisWired = classParam.toWireType("+p+", this);\n"),l=0;l<s-2;++l)d+="var arg"+l+"Wired = argType"+l+".toWireType("+p+", arg"+l+"); // "+t[l+2].name+"\n",f.push("argType"+l),m.push(t[l+2]);if(o&&(h="thisWired"+(h.length>0?", ":"")+h),d+=(c?"var rv = ":"")+"invoker(fn"+(h.length>0?", ":"")+h+");\n",a)d+="runDestructors(destructors);\n";else for(l=o?1:2;l<t.length;++l){var g=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==t[l].destructorFunction&&(d+=g+"_dtor("+g+"); // "+t[l].name+"\n",f.push(g+"_dtor"),m.push(t[l].destructorFunction))}return c&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",f.push(d),ut(Function,f).apply(null,m)}var dt=[],pt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ft(e){e>4&&0==--pt[e].refcount&&(pt[e]=void 0,dt.push(e))}function mt(){for(var e=0,t=5;t<pt.length;++t)void 0!==pt[t]&&++e;return e}function gt(){for(var e=5;e<pt.length;++e)if(void 0!==pt[e])return pt[e];return null}var vt={toValue:e=>(e||xe("Cannot use deleted val. handle = "+e),pt[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=dt.length?dt.pop():pt.length;return pt[t]={refcount:1,value:e},t}}};function yt(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function bt(e,t){switch(t){case 2:return function(e){return this.fromWireType(P[e>>2])};case 3:return function(e){return this.fromWireType(R[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function _t(e,t,n){switch(t){case 0:return n?function(e){return T[e]}:function(e){return E[e]};case 1:return n?function(e){return M[e>>1]}:function(e){return A[e>>1]};case 2:return n?function(e){return C[e>>2]}:function(e){return k[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function xt(e,t){var n=ce[e];return void 0===n&&xe(t+" has unknown type "+at(e)),n}var wt={};function St(e){var t=wt[e];return void 0===t?be(e):t}var Tt=[];function Et(){return"object"==typeof globalThis?globalThis:Function("return this")()}var Mt=[];function At(e){try{return p.grow(e-S.byteLength+65535>>>16),U(p.buffer),1}catch(e){}}var Ct={};function kt(){if(!kt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:u||"./this.program"};for(var t in Ct)void 0===Ct[t]?delete e[t]:e[t]=Ct[t];var n=[];for(var t in e)n.push(t+"="+e[t]);kt.strings=n}return kt.strings}var Pt={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Pt.isAbs(e),n="/"===e.substr(-1);return(e=Pt.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Pt.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=Pt.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments,0);return Pt.normalize(e.join("/"))},join2:(e,t)=>Pt.normalize(e+"/"+t)},Rt={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:Nt.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t=Pt.isAbs(r)}return(t?"/":"")+(e=Pt.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Rt.resolve(e).substr(1),t=Rt.resolve(t).substr(1);for(var r=n(e.split("/")),i=n(t.split("/")),s=Math.min(r.length,i.length),o=s,a=0;a<s;a++)if(r[a]!==i[a]){o=a;break}var l=[];for(a=o;a<r.length;a++)l.push("..");return(l=l.concat(i.slice(o))).join("/")}},Lt={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Lt.ttys[e]={input:[],output:[],ops:t},Nt.registerDevice(e,Lt.stream_ops)},stream_ops:{open:function(e){var t=Lt.ttys[e.node.rdev];if(!t)throw new Nt.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new Nt.ErrnoError(60);for(var s=0,o=0;o<r;o++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new Nt.ErrnoError(29)}if(void 0===a&&0===s)throw new Nt.ErrnoError(6);if(null==a)break;s++,t[n+o]=a}return s&&(e.node.timestamp=Date.now()),s},write:function(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new Nt.ErrnoError(60);try{for(var s=0;s<r;s++)e.tty.ops.put_char(e.tty,t[n+s])}catch(e){throw new Nt.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),s}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=Zt(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(f(b(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(f(b(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(m(b(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(m(b(e.output,0)),e.output=[])}}},Ot={ops_table:null,mount:function(e){return Ot.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(Nt.isBlkdev(n)||Nt.isFIFO(n))throw new Nt.ErrnoError(63);Ot.ops_table||(Ot.ops_table={dir:{node:{getattr:Ot.node_ops.getattr,setattr:Ot.node_ops.setattr,lookup:Ot.node_ops.lookup,mknod:Ot.node_ops.mknod,rename:Ot.node_ops.rename,unlink:Ot.node_ops.unlink,rmdir:Ot.node_ops.rmdir,readdir:Ot.node_ops.readdir,symlink:Ot.node_ops.symlink},stream:{llseek:Ot.stream_ops.llseek}},file:{node:{getattr:Ot.node_ops.getattr,setattr:Ot.node_ops.setattr},stream:{llseek:Ot.stream_ops.llseek,read:Ot.stream_ops.read,write:Ot.stream_ops.write,allocate:Ot.stream_ops.allocate,mmap:Ot.stream_ops.mmap,msync:Ot.stream_ops.msync}},link:{node:{getattr:Ot.node_ops.getattr,setattr:Ot.node_ops.setattr,readlink:Ot.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ot.node_ops.getattr,setattr:Ot.node_ops.setattr},stream:Nt.chrdev_stream_ops}});var i=Nt.createNode(e,t,n,r);return Nt.isDir(i.mode)?(i.node_ops=Ot.ops_table.dir.node,i.stream_ops=Ot.ops_table.dir.stream,i.contents={}):Nt.isFile(i.mode)?(i.node_ops=Ot.ops_table.file.node,i.stream_ops=Ot.ops_table.file.stream,i.usedBytes=0,i.contents=null):Nt.isLink(i.mode)?(i.node_ops=Ot.ops_table.link.node,i.stream_ops=Ot.ops_table.link.stream):Nt.isChrdev(i.mode)&&(i.node_ops=Ot.ops_table.chrdev.node,i.stream_ops=Ot.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=Nt.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Nt.isDir(e.mode)?t.size=4096:Nt.isFile(e.mode)?t.size=e.usedBytes:Nt.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Ot.resizeFileStorage(e,t.size)},lookup:function(e,t){throw Nt.genericErrors[44]},mknod:function(e,t,n,r){return Ot.createNode(e,t,n,r)},rename:function(e,t,n){if(Nt.isDir(e.mode)){var r;try{r=Nt.lookupNode(t,n)}catch(e){}if(r)for(var i in r.contents)throw new Nt.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=Nt.lookupNode(e,t);for(var r in n.contents)throw new Nt.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=Ot.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!Nt.isLink(e.mode))throw new Nt.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,i){var s=e.node.contents;if(i>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-i,r);if(o>8&&s.subarray)t.set(s.subarray(i,i+o),n);else for(var a=0;a<o;a++)t[n+a]=s[i+a];return o},write:function(e,t,n,r,i,s){if(t.buffer===T.buffer&&(s=!1),!r)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(s)return o.contents=t.subarray(n,n+r),o.usedBytes=r,r;if(0===o.usedBytes&&0===i)return o.contents=t.slice(n,n+r),o.usedBytes=r,r;if(i+r<=o.usedBytes)return o.contents.set(t.subarray(n,n+r),i),r}if(Ot.expandFileStorage(o,i+r),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+r),i);else for(var a=0;a<r;a++)o.contents[i+a]=t[n+a];return o.usedBytes=Math.max(o.usedBytes,i+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&Nt.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new Nt.ErrnoError(28);return r},allocate:function(e,t,n){Ot.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,i){if(!Nt.isFile(e.node.mode))throw new Nt.ErrnoError(43);var s,o,a=e.node.contents;if(2&i||a.buffer!==S){if((n>0||n+t<a.length)&&(a=a.subarray?a.subarray(n,n+t):Array.prototype.slice.call(a,n,n+t)),o=!0,!(s=void $()))throw new Nt.ErrnoError(48);T.set(a,s)}else o=!1,s=a.byteOffset;return{ptr:s,allocated:o}},msync:function(e,t,n,r,i){if(!Nt.isFile(e.node.mode))throw new Nt.ErrnoError(43);return 2&i||Ot.stream_ops.write(e,t,0,r,n,!1),0}}},Nt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=Rt.resolve(Nt.cwd(),e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new Nt.ErrnoError(32);for(var n=Pt.normalizeArray(e.split("/").filter((e=>!!e)),!1),r=Nt.root,i="/",s=0;s<n.length;s++){var o=s===n.length-1;if(o&&t.parent)break;if(r=Nt.lookupNode(r,n[s]),i=Pt.join2(i,n[s]),Nt.isMountpoint(r)&&(!o||o&&t.follow_mount)&&(r=r.mounted.root),!o||t.follow)for(var a=0;Nt.isLink(r.mode);){var l=Nt.readlink(i);if(i=Rt.resolve(Pt.dirname(i),l),r=Nt.lookupPath(i,{recurse_count:t.recurse_count+1}).node,a++>40)throw new Nt.ErrnoError(32)}}return{path:i,node:r}},getPath:e=>{for(var t;;){if(Nt.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Nt.nameTable.length},hashAddNode:e=>{var t=Nt.hashName(e.parent.id,e.name);e.name_next=Nt.nameTable[t],Nt.nameTable[t]=e},hashRemoveNode:e=>{var t=Nt.hashName(e.parent.id,e.name);if(Nt.nameTable[t]===e)Nt.nameTable[t]=e.name_next;else for(var n=Nt.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:(e,t)=>{var n=Nt.mayLookup(e);if(n)throw new Nt.ErrnoError(n,e);for(var r=Nt.hashName(e.id,t),i=Nt.nameTable[r];i;i=i.name_next){var s=i.name;if(i.parent.id===e.id&&s===t)return i}return Nt.lookup(e,t)},createNode:(e,t,n,r)=>{var i=new Nt.FSNode(e,t,n,r);return Nt.hashAddNode(i),i},destroyNode:e=>{Nt.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=Nt.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>Nt.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>{var t=Nt.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return Nt.lookupNode(e,t),20}catch(e){}return Nt.nodePermissions(e,"wx")},mayDelete:(e,t,n)=>{var r;try{r=Nt.lookupNode(e,t)}catch(e){return e.errno}var i=Nt.nodePermissions(e,"wx");if(i)return i;if(n){if(!Nt.isDir(r.mode))return 54;if(Nt.isRoot(r)||Nt.getPath(r)===Nt.cwd())return 10}else if(Nt.isDir(r.mode))return 31;return 0},mayOpen:(e,t)=>e?Nt.isLink(e.mode)?32:Nt.isDir(e.mode)&&("r"!==Nt.flagsToPermissionString(t)||512&t)?31:Nt.nodePermissions(e,Nt.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=Nt.MAX_OPEN_FDS)=>{for(var n=e;n<=t;n++)if(!Nt.streams[n])return n;throw new Nt.ErrnoError(33)},getStream:e=>Nt.streams[e],createStream:(e,t,n)=>{Nt.FSStream||(Nt.FSStream=function(){this.shared={}},Nt.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get function(){return this.shared.position},set:function(e){this.shared.position=e}}}),e=Object.assign(new Nt.FSStream,e);var r=Nt.nextfd(t,n);return e.fd=r,Nt.streams[r]=e,e},closeStream:e=>{Nt.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=Nt.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new Nt.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{Nt.devices[e]={stream_ops:t}},getDevice:e=>Nt.devices[e],getMounts:e=>{for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),Nt.syncFSRequests++,Nt.syncFSRequests>1&&m("warning: "+Nt.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=Nt.getMounts(Nt.root.mount),r=0;function i(e){return Nt.syncFSRequests--,t(e)}function s(e){if(e)return s.errored?void 0:(s.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach((t=>{if(!t.type.syncfs)return s(null);t.type.syncfs(t,e,s)}))},mount:(e,t,n)=>{var r,i="/"===n,s=!n;if(i&&Nt.root)throw new Nt.ErrnoError(10);if(!i&&!s){var o=Nt.lookupPath(n,{follow_mount:!1});if(n=o.path,r=o.node,Nt.isMountpoint(r))throw new Nt.ErrnoError(10);if(!Nt.isDir(r.mode))throw new Nt.ErrnoError(54)}var a={type:e,opts:t,mountpoint:n,mounts:[]},l=e.mount(a);return l.mount=a,a.root=l,i?Nt.root=l:r&&(r.mounted=a,r.mount&&r.mount.mounts.push(a)),l},unmount:e=>{var t=Nt.lookupPath(e,{follow_mount:!1});if(!Nt.isMountpoint(t.node))throw new Nt.ErrnoError(28);var n=t.node,r=n.mounted,i=Nt.getMounts(r);Object.keys(Nt.nameTable).forEach((e=>{for(var t=Nt.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&Nt.destroyNode(t),t=n}})),n.mounted=null;var s=n.mount.mounts.indexOf(r);n.mount.mounts.splice(s,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,n)=>{var r=Nt.lookupPath(e,{parent:!0}).node,i=Pt.basename(e);if(!i||"."===i||".."===i)throw new Nt.ErrnoError(28);var s=Nt.mayCreate(r,i);if(s)throw new Nt.ErrnoError(s);if(!r.node_ops.mknod)throw new Nt.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,Nt.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,Nt.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var n=e.split("/"),r="",i=0;i<n.length;++i)if(n[i]){r+="/"+n[i];try{Nt.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,n)=>(void 0===n&&(n=t,t=438),t|=8192,Nt.mknod(e,t,n)),symlink:(e,t)=>{if(!Rt.resolve(e))throw new Nt.ErrnoError(44);var n=Nt.lookupPath(t,{parent:!0}).node;if(!n)throw new Nt.ErrnoError(44);var r=Pt.basename(t),i=Nt.mayCreate(n,r);if(i)throw new Nt.ErrnoError(i);if(!n.node_ops.symlink)throw new Nt.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:(e,t)=>{var n,r,i=Pt.dirname(e),s=Pt.dirname(t),o=Pt.basename(e),a=Pt.basename(t);if(n=Nt.lookupPath(e,{parent:!0}).node,r=Nt.lookupPath(t,{parent:!0}).node,!n||!r)throw new Nt.ErrnoError(44);if(n.mount!==r.mount)throw new Nt.ErrnoError(75);var l,c=Nt.lookupNode(n,o),u=Rt.relative(e,s);if("."!==u.charAt(0))throw new Nt.ErrnoError(28);if("."!==(u=Rt.relative(t,i)).charAt(0))throw new Nt.ErrnoError(55);try{l=Nt.lookupNode(r,a)}catch(e){}if(c!==l){var h=Nt.isDir(c.mode),d=Nt.mayDelete(n,o,h);if(d)throw new Nt.ErrnoError(d);if(d=l?Nt.mayDelete(r,a,h):Nt.mayCreate(r,a))throw new Nt.ErrnoError(d);if(!n.node_ops.rename)throw new Nt.ErrnoError(63);if(Nt.isMountpoint(c)||l&&Nt.isMountpoint(l))throw new Nt.ErrnoError(10);if(r!==n&&(d=Nt.nodePermissions(n,"w")))throw new Nt.ErrnoError(d);Nt.hashRemoveNode(c);try{n.node_ops.rename(c,r,a)}catch(e){throw e}finally{Nt.hashAddNode(c)}}},rmdir:e=>{var t=Nt.lookupPath(e,{parent:!0}).node,n=Pt.basename(e),r=Nt.lookupNode(t,n),i=Nt.mayDelete(t,n,!0);if(i)throw new Nt.ErrnoError(i);if(!t.node_ops.rmdir)throw new Nt.ErrnoError(63);if(Nt.isMountpoint(r))throw new Nt.ErrnoError(10);t.node_ops.rmdir(t,n),Nt.destroyNode(r)},readdir:e=>{var t=Nt.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Nt.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=Nt.lookupPath(e,{parent:!0}).node;if(!t)throw new Nt.ErrnoError(44);var n=Pt.basename(e),r=Nt.lookupNode(t,n),i=Nt.mayDelete(t,n,!1);if(i)throw new Nt.ErrnoError(i);if(!t.node_ops.unlink)throw new Nt.ErrnoError(63);if(Nt.isMountpoint(r))throw new Nt.ErrnoError(10);t.node_ops.unlink(t,n),Nt.destroyNode(r)},readlink:e=>{var t=Nt.lookupPath(e).node;if(!t)throw new Nt.ErrnoError(44);if(!t.node_ops.readlink)throw new Nt.ErrnoError(28);return Rt.resolve(Nt.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var n=Nt.lookupPath(e,{follow:!t}).node;if(!n)throw new Nt.ErrnoError(44);if(!n.node_ops.getattr)throw new Nt.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>Nt.stat(e,!0),chmod:(e,t,n)=>{var r;if(!(r="string"==typeof e?Nt.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new Nt.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:(e,t)=>{Nt.chmod(e,t,!0)},fchmod:(e,t)=>{var n=Nt.getStream(e);if(!n)throw new Nt.ErrnoError(8);Nt.chmod(n.node,t)},chown:(e,t,n,r)=>{var i;if(!(i="string"==typeof e?Nt.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Nt.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(e,t,n)=>{Nt.chown(e,t,n,!0)},fchown:(e,t,n)=>{var r=Nt.getStream(e);if(!r)throw new Nt.ErrnoError(8);Nt.chown(r.node,t,n)},truncate:(e,t)=>{if(t<0)throw new Nt.ErrnoError(28);var n;if(!(n="string"==typeof e?Nt.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Nt.ErrnoError(63);if(Nt.isDir(n.mode))throw new Nt.ErrnoError(31);if(!Nt.isFile(n.mode))throw new Nt.ErrnoError(28);var r=Nt.nodePermissions(n,"w");if(r)throw new Nt.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var n=Nt.getStream(e);if(!n)throw new Nt.ErrnoError(8);if(0==(2097155&n.flags))throw new Nt.ErrnoError(28);Nt.truncate(n.node,t)},utime:(e,t,n)=>{var r=Nt.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:(t,n,r)=>{if(""===t)throw new Nt.ErrnoError(44);var i;if(r=void 0===r?438:r,r=64&(n="string"==typeof n?Nt.modeStringToFlags(n):n)?4095&r|32768:0,"object"==typeof t)i=t;else{t=Pt.normalize(t);try{i=Nt.lookupPath(t,{follow:!(131072&n)}).node}catch(e){}}var s=!1;if(64&n)if(i){if(128&n)throw new Nt.ErrnoError(20)}else i=Nt.mknod(t,r,0),s=!0;if(!i)throw new Nt.ErrnoError(44);if(Nt.isChrdev(i.mode)&&(n&=-513),65536&n&&!Nt.isDir(i.mode))throw new Nt.ErrnoError(54);if(!s){var o=Nt.mayOpen(i,n);if(o)throw new Nt.ErrnoError(o)}512&n&&!s&&Nt.truncate(i,0),n&=-131713;var a=Nt.createStream({node:i,path:Nt.getPath(i),flags:n,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1});return a.stream_ops.open&&a.stream_ops.open(a),!e.logReadFiles||1&n||(Nt.readFiles||(Nt.readFiles={}),t in Nt.readFiles||(Nt.readFiles[t]=1)),a},close:e=>{if(Nt.isClosed(e))throw new Nt.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Nt.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,n)=>{if(Nt.isClosed(e))throw new Nt.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Nt.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new Nt.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:(e,t,n,r,i)=>{if(r<0||i<0)throw new Nt.ErrnoError(28);if(Nt.isClosed(e))throw new Nt.ErrnoError(8);if(1==(2097155&e.flags))throw new Nt.ErrnoError(8);if(Nt.isDir(e.node.mode))throw new Nt.ErrnoError(31);if(!e.stream_ops.read)throw new Nt.ErrnoError(28);var s=void 0!==i;if(s){if(!e.seekable)throw new Nt.ErrnoError(70)}else i=e.position;var o=e.stream_ops.read(e,t,n,r,i);return s||(e.position+=o),o},write:(e,t,n,r,i,s)=>{if(r<0||i<0)throw new Nt.ErrnoError(28);if(Nt.isClosed(e))throw new Nt.ErrnoError(8);if(0==(2097155&e.flags))throw new Nt.ErrnoError(8);if(Nt.isDir(e.node.mode))throw new Nt.ErrnoError(31);if(!e.stream_ops.write)throw new Nt.ErrnoError(28);e.seekable&&1024&e.flags&&Nt.llseek(e,0,2);var o=void 0!==i;if(o){if(!e.seekable)throw new Nt.ErrnoError(70)}else i=e.position;var a=e.stream_ops.write(e,t,n,r,i,s);return o||(e.position+=a),a},allocate:(e,t,n)=>{if(Nt.isClosed(e))throw new Nt.ErrnoError(8);if(t<0||n<=0)throw new Nt.ErrnoError(28);if(0==(2097155&e.flags))throw new Nt.ErrnoError(8);if(!Nt.isFile(e.node.mode)&&!Nt.isDir(e.node.mode))throw new Nt.ErrnoError(43);if(!e.stream_ops.allocate)throw new Nt.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:(e,t,n,r,i)=>{if(0!=(2&r)&&0==(2&i)&&2!=(2097155&e.flags))throw new Nt.ErrnoError(2);if(1==(2097155&e.flags))throw new Nt.ErrnoError(2);if(!e.stream_ops.mmap)throw new Nt.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,i)},msync:(e,t,n,r,i)=>e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0,munmap:e=>0,ioctl:(e,t,n)=>{if(!e.stream_ops.ioctl)throw new Nt.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=Nt.open(e,t.flags),i=Nt.stat(e).size,s=new Uint8Array(i);return Nt.read(r,s,0,i,0),"utf8"===t.encoding?n=b(s,0):"binary"===t.encoding&&(n=s),Nt.close(r),n},writeFile:(e,t,n={})=>{n.flags=n.flags||577;var r=Nt.open(e,n.flags,n.mode);if("string"==typeof t){var i=new Uint8Array(w(t)+1),s=x(t,i,0,i.length);Nt.write(r,i,0,s,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Nt.write(r,t,0,t.byteLength,void 0,n.canOwn)}Nt.close(r)},cwd:()=>Nt.currentPath,chdir:e=>{var t=Nt.lookupPath(e,{follow:!0});if(null===t.node)throw new Nt.ErrnoError(44);if(!Nt.isDir(t.node.mode))throw new Nt.ErrnoError(54);var n=Nt.nodePermissions(t.node,"x");if(n)throw new Nt.ErrnoError(n);Nt.currentPath=t.path},createDefaultDirectories:()=>{Nt.mkdir("/tmp"),Nt.mkdir("/home"),Nt.mkdir("/home/web_user")},createDefaultDevices:()=>{Nt.mkdir("/dev"),Nt.registerDevice(Nt.makedev(1,3),{read:()=>0,write:(e,t,n,r,i)=>r}),Nt.mkdev("/dev/null",Nt.makedev(1,3)),Lt.register(Nt.makedev(5,0),Lt.default_tty_ops),Lt.register(Nt.makedev(6,0),Lt.default_tty1_ops),Nt.mkdev("/dev/tty",Nt.makedev(5,0)),Nt.mkdev("/dev/tty1",Nt.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){$("randomDevice")}}();Nt.createDevice("/dev","random",e),Nt.createDevice("/dev","urandom",e),Nt.mkdir("/dev/shm"),Nt.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{Nt.mkdir("/proc");var e=Nt.mkdir("/proc/self");Nt.mkdir("/proc/self/fd"),Nt.mount({mount:()=>{var t=Nt.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var n=+t,r=Nt.getStream(n);if(!r)throw new Nt.ErrnoError(8);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>r.path}};return i.parent=i,i}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{e.stdin?Nt.createDevice("/dev","stdin",e.stdin):Nt.symlink("/dev/tty","/dev/stdin"),e.stdout?Nt.createDevice("/dev","stdout",null,e.stdout):Nt.symlink("/dev/tty","/dev/stdout"),e.stderr?Nt.createDevice("/dev","stderr",null,e.stderr):Nt.symlink("/dev/tty1","/dev/stderr"),Nt.open("/dev/stdin",0),Nt.open("/dev/stdout",1),Nt.open("/dev/stderr",1)},ensureErrnoError:()=>{Nt.ErrnoError||(Nt.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},Nt.ErrnoError.prototype=new Error,Nt.ErrnoError.prototype.constructor=Nt.ErrnoError,[44].forEach((e=>{Nt.genericErrors[e]=new Nt.ErrnoError(e),Nt.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{Nt.ensureErrnoError(),Nt.nameTable=new Array(4096),Nt.mount(Ot,{},"/"),Nt.createDefaultDirectories(),Nt.createDefaultDevices(),Nt.createSpecialDirectories(),Nt.filesystems={MEMFS:Ot}},init:(t,n,r)=>{Nt.init.initialized=!0,Nt.ensureErrnoError(),e.stdin=t||e.stdin,e.stdout=n||e.stdout,e.stderr=r||e.stderr,Nt.createStandardStreams()},quit:()=>{Nt.init.initialized=!1;for(var e=0;e<Nt.streams.length;e++){var t=Nt.streams[e];t&&Nt.close(t)}},getMode:(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:(e,t)=>{var n=Nt.analyzePath(e,t);return n.exists?n.object:null},analyzePath:(e,t)=>{try{e=(r=Nt.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Nt.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Pt.basename(e),r=Nt.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:(e,t,n,r)=>{e="string"==typeof e?e:Nt.getPath(e);for(var i=t.split("/").reverse();i.length;){var s=i.pop();if(s){var o=Pt.join2(e,s);try{Nt.mkdir(o)}catch(e){}e=o}}return o},createFile:(e,t,n,r,i)=>{var s=Pt.join2("string"==typeof e?e:Nt.getPath(e),t),o=Nt.getMode(r,i);return Nt.create(s,o)},createDataFile:(e,t,n,r,i,s)=>{var o=t;e&&(e="string"==typeof e?e:Nt.getPath(e),o=t?Pt.join2(e,t):e);var a=Nt.getMode(r,i),l=Nt.create(o,a);if(n){if("string"==typeof n){for(var c=new Array(n.length),u=0,h=n.length;u<h;++u)c[u]=n.charCodeAt(u);n=c}Nt.chmod(l,146|a);var d=Nt.open(l,577);Nt.write(d,n,0,n.length,0,s),Nt.close(d),Nt.chmod(l,a)}return l},createDevice:(e,t,n,r)=>{var i=Pt.join2("string"==typeof e?e:Nt.getPath(e),t),s=Nt.getMode(!!n,!!r);Nt.createDevice.major||(Nt.createDevice.major=64);var o=Nt.makedev(Nt.createDevice.major++,0);return Nt.registerDevice(o,{open:e=>{e.seekable=!1},close:e=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(e,t,r,i,s)=>{for(var o=0,a=0;a<i;a++){var l;try{l=n()}catch(e){throw new Nt.ErrnoError(29)}if(void 0===l&&0===o)throw new Nt.ErrnoError(6);if(null==l)break;o++,t[r+a]=l}return o&&(e.node.timestamp=Date.now()),o},write:(e,t,n,i,s)=>{for(var o=0;o<i;o++)try{r(t[n+o])}catch(e){throw new Nt.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}}),Nt.mkdev(i,s,o)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!s)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Zt(s(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new Nt.ErrnoError(29)}},createLazyFile:(e,t,n,r,i)=>{function s(){this.lengthKnown=!1,this.chunks=[]}if(s.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},s.prototype.setDataGetter=function(e){this.getter=e},s.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,s=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;i||(o=r);var a=this;a.setDataGetter((e=>{var t=e*o,i=(e+1)*o-1;if(i=Math.min(i,r-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",n,!1),r!==o&&i.setRequestHeader("Range","bytes="+e+"-"+t),i.responseType="arraybuffer",i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+n+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):Zt(i.responseText||"",!0)})(t,i)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]})),!s&&r||(o=r=1,r=this.getter(0).length,o=r,f("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o={isDevice:!1,url:n},a=Nt.createFile(e,t,o,r,i);o.contents?a.contents=o.contents:o.url&&(a.contents=null,a.url=o.url),Object.defineProperties(a,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(a.stream_ops).forEach((e=>{var t=a.stream_ops[e];l[e]=function(){return Nt.forceLoadFile(a),t.apply(null,arguments)}})),l.read=(e,t,n,r,i)=>{Nt.forceLoadFile(a);var s=e.node.contents;if(i>=s.length)return 0;var o=Math.min(s.length-i,r);if(s.slice)for(var l=0;l<o;l++)t[n+l]=s[i+l];else for(l=0;l<o;l++)t[n+l]=s.get(i+l);return o},a.stream_ops=l,a},createPreloadedFile:(e,t,n,r,i,s,a,l,c,u)=>{var h=t?Rt.resolve(Pt.join2(e,t)):e;function d(n){function o(n){u&&u(),l||Nt.createDataFile(e,t,n,r,i,c),s&&s(),J()}Browser.handledByPreloadPlugin(n,h,o,(()=>{a&&a(),J()}))||o(n)}Y(),"string"==typeof n?function(e,t,n,r){var i=r?"":"al "+e;o(e,(function(n){v(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),i&&J()}),(function(t){if(!n)throw'Loading data file "'+e+'" failed.';n()})),i&&Y()}(n,(e=>d(e)),a):d(n)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=Nt.indexedDB();try{var i=r.open(Nt.DB_NAME(),Nt.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=()=>{f("creating db"),i.result.createObjectStore(Nt.DB_STORE_NAME)},i.onsuccess=()=>{var r=i.result.transaction([Nt.DB_STORE_NAME],"readwrite"),s=r.objectStore(Nt.DB_STORE_NAME),o=0,a=0,l=e.length;function c(){0==a?t():n()}e.forEach((e=>{var t=s.put(Nt.analyzePath(e).object.contents,e);t.onsuccess=()=>{++o+a==l&&c()},t.onerror=()=>{a++,o+a==l&&c()}})),r.onerror=n},i.onerror=n},loadFilesFromDB:(e,t,n)=>{t=t||(()=>{}),n=n||(()=>{});var r=Nt.indexedDB();try{var i=r.open(Nt.DB_NAME(),Nt.DB_VERSION)}catch(e){return n(e)}i.onupgradeneeded=n,i.onsuccess=()=>{var r=i.result;try{var s=r.transaction([Nt.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var o=s.objectStore(Nt.DB_STORE_NAME),a=0,l=0,c=e.length;function u(){0==l?t():n()}e.forEach((e=>{var t=o.get(e);t.onsuccess=()=>{Nt.analyzePath(e).exists&&Nt.unlink(e),Nt.createDataFile(Pt.dirname(e),Pt.basename(e),t.result,!0,!0,!0),++a+l==c&&u()},t.onerror=()=>{l++,a+l==c&&u()}})),s.onerror=n},i.onerror=n}},It={DEFAULT_POLLMASK:5,calculateAt:function(e,t,n){if(Pt.isAbs(t))return t;var r;if(-100===e)r=Nt.cwd();else{var i=Nt.getStream(e);if(!i)throw new Nt.ErrnoError(8);r=i.path}if(0==t.length){if(!n)throw new Nt.ErrnoError(44);return r}return Pt.join2(r,t)},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&Pt.normalize(t)!==Pt.normalize(Nt.getPath(e.node)))return-54;throw e}return C[n>>2]=r.dev,C[n+4>>2]=0,C[n+8>>2]=r.ino,C[n+12>>2]=r.mode,C[n+16>>2]=r.nlink,C[n+20>>2]=r.uid,C[n+24>>2]=r.gid,C[n+28>>2]=r.rdev,C[n+32>>2]=0,Z=[r.size>>>0,(G=r.size,+Math.abs(G)>=1?G>0?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],C[n+40>>2]=Z[0],C[n+44>>2]=Z[1],C[n+48>>2]=4096,C[n+52>>2]=r.blocks,C[n+56>>2]=r.atime.getTime()/1e3|0,C[n+60>>2]=0,C[n+64>>2]=r.mtime.getTime()/1e3|0,C[n+68>>2]=0,C[n+72>>2]=r.ctime.getTime()/1e3|0,C[n+76>>2]=0,Z=[r.ino>>>0,(G=r.ino,+Math.abs(G)>=1?G>0?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],C[n+80>>2]=Z[0],C[n+84>>2]=Z[1],0},doMsync:function(e,t,n,r,i){var s=E.slice(e,e+n);Nt.msync(t,s,i,n,r)},varargs:void 0,get:function(){return It.varargs+=4,C[It.varargs-4>>2]},getStr:function(e){return _(e)},getStreamFromFD:function(e){var t=Nt.getStream(e);if(!t)throw new Nt.ErrnoError(8);return t}};function Dt(e){return e%4==0&&(e%100!=0||e%400==0)}var Ft=[31,29,31,30,31,30,31,31,30,31,30,31],zt=[31,28,31,30,31,30,31,31,30,31,30,31];function Ut(e,t,n,r){var i=C[r+40>>2],s={tm_sec:C[r>>2],tm_min:C[r+4>>2],tm_hour:C[r+8>>2],tm_mday:C[r+12>>2],tm_mon:C[r+16>>2],tm_year:C[r+20>>2],tm_wday:C[r+24>>2],tm_yday:C[r+28>>2],tm_isdst:C[r+32>>2],tm_gmtoff:C[r+36>>2],tm_zone:i?_(i):""},o=_(n),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in a)o=o.replace(new RegExp(l,"g"),a[l]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=["January","February","March","April","May","June","July","August","September","October","November","December"];function h(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function d(e,t){return h(e,t,"0")}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function f(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function m(e){var t=function(e,t){for(var n=new Date(e.getTime());t>0;){var r=Dt(n.getFullYear()),i=n.getMonth(),s=(r?Ft:zt)[i];if(!(t>s-n.getDate()))return n.setDate(n.getDate()+t),n;t-=s-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),i=f(n),s=f(r);return p(i,t)<=0?p(s,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return c[e.tm_wday].substring(0,3)},"%A":function(e){return c[e.tm_wday]},"%b":function(e){return u[e.tm_mon].substring(0,3)},"%B":function(e){return u[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return h(e.tm_mday,2," ")},"%g":function(e){return m(e).toString().substring(2)},"%G":function(e){return m(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(e){return d(e.tm_mday+function(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}(Dt(e.tm_year+1900)?Ft:zt,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return d(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var n=(e.tm_wday+371-e.tm_yday)%7;4==n||3==n&&Dt(e.tm_year)||(t=1)}}else{t=52;var r=(e.tm_wday+7-e.tm_yday-1)%7;(4==r||5==r&&Dt(e.tm_year%400-1))&&t++}return d(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return d(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var l in o=o.replace(/%%/g,"\0\0"),g)o.includes(l)&&(o=o.replace(new RegExp(l,"g"),g[l](s)));var v=Zt(o=o.replace(/\0\0/g,"%"),!1);return v.length>t?0:(function(e,t){T.set(e,t)}(v,e),v.length-1)}fe=e.InternalError=pe(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ye=e}(),_e=e.BindingError=pe(Error,"BindingError"),je.prototype.isAliasOf=Se,je.prototype.clone=Ve,je.prototype.delete=Ge,je.prototype.isDeleted=Ze,je.prototype.deleteLater=He,e.getInheritedInstanceCount=Pe,e.getLiveInheritedInstances=Re,e.flushPendingDeletes=Oe,e.setDelayFunction=Ie,nt.prototype.getPointee=Qe,nt.prototype.destructor=et,nt.prototype.argPackAdvance=8,nt.prototype.readValueFromPointer=ae,nt.prototype.deleteObject=tt,nt.prototype.fromWireType=Ue,ot=e.UnboundTypeError=pe(Error,"UnboundTypeError"),e.count_emval_handles=mt,e.get_first_emval=gt;var Bt=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Nt.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},Vt=365,Gt=146;function Zt(e,t,n){var r=n>0?n:w(e)+1,i=new Array(r),s=x(e,i,0,i.length);return t&&(i.length=s),i}Object.defineProperties(Bt.prototype,{read:{get:function(){return(this.mode&Vt)===Vt},set:function(e){e?this.mode|=Vt:this.mode&=-366}},write:{get:function(){return(this.mode&Gt)===Gt},set:function(e){e?this.mode|=Gt:this.mode&=-147}},isFolder:{get:function(){return Nt.isDir(this.mode)}},isDevice:{get:function(){return Nt.isChrdev(this.mode)}}}),Nt.FSNode=Bt,Nt.staticInit();var Ht,jt={f:function(e,t,n,r){$("Assertion failed: "+_(e)+", at: "+[t?_(t):"unknown filename",n,r?_(r):"unknown function"])},v:function(e){return Wt(e+24)+24},u:function(e,t,n){throw new ie(e).init(t,n),e},k:function(e){var t=se[e];delete se[e];var n=t.rawConstructor,r=t.rawDestructor,i=t.fields;ge([e],i.map((e=>e.getterReturnType)).concat(i.map((e=>e.setterArgumentType))),(e=>{var s={};return i.forEach(((t,n)=>{var r=t.fieldName,o=e[n],a=t.getter,l=t.getterContext,c=e[n+i.length],u=t.setter,h=t.setterContext;s[r]={read:e=>o.fromWireType(a(l,e)),write:(e,t)=>{var n=[];u(h,e,c.toWireType(n,t)),oe(n)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var n in s)t[n]=s[n].read(e);return r(e),t},toWireType:function(e,t){for(var i in s)if(!(i in t))throw new TypeError('Missing field:  "'+i+'"');var o=n();for(i in s)s[i].write(o,t[i]);return null!==e&&e.push(r,o),o},argPackAdvance:8,readValueFromPointer:ae,destructorFunction:r}]}))},E:function(e,t,n,r,i){},O:function(e,t,n,r,i){var s=ve(n);we(e,{name:t=be(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=T;else if(2===n)r=M;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=C}return this.fromWireType(r[e>>s])},destructorFunction:null})},n:function(e,t,n,r,i,s,o,a,l,c,u,h,d){u=be(u),s=st(i,s),a&&(a=st(o,a)),c&&(c=st(l,c)),d=st(h,d);var p=he(u);qe(p,(function(){lt("Cannot construct "+u+" due to unbound types",[r])})),ge([e,t,n],r?[r]:[],(function(t){var n,i;t=t[0],i=r?(n=t.registeredClass).instancePrototype:je.prototype;var o=de(p,(function(){if(Object.getPrototypeOf(this)!==l)throw new _e("Use 'new' to construct "+u);if(void 0===h.constructor_body)throw new _e(u+" has no accessible constructor");var e=h.constructor_body[arguments.length];if(void 0===e)throw new _e("Tried to invoke ctor of "+u+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(h.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),l=Object.create(i,{constructor:{value:o}});o.prototype=l;var h=new Ke(u,o,l,d,n,s,a,c),f=new nt(u,h,!0,!1,!1),m=new nt(u+"*",h,!1,!1,!1),g=new nt(u+" const*",h,!1,!0,!1);return ke[e]={pointerType:m,constPointerType:g},rt(p,o),[f,m,g]}))},R:function(e,t,n,r,i,s){v(t>0);var o=ct(t,n);i=st(r,i),ge([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new _e("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=()=>{lt("Cannot construct "+e.name+" due to unbound types",o)},ge([],o,(function(r){return r.splice(1,0,null),e.registeredClass.constructor_body[t-1]=ht(n,r,null,i,s),[]})),[]}))},b:function(e,t,n,r,i,s,o,a){var l=ct(n,r);t=be(t),s=st(i,s),ge([],[e],(function(e){var r=(e=e[0]).name+"."+t;function i(){lt("Cannot call "+r+" due to unbound types",l)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,u=c[t];return void 0===u||void 0===u.overloadTable&&u.className!==e.name&&u.argCount===n-2?(i.argCount=n-2,i.className=e.name,c[t]=i):(We(c,t,r),c[t].overloadTable[n-2]=i),ge([],l,(function(i){var a=ht(r,i,e,s,o);return void 0===c[t].overloadTable?(a.argCount=n-2,c[t]=a):c[t].overloadTable[n-2]=a,[]})),[]}))},N:function(e,t){we(e,{name:t=be(t),fromWireType:function(e){var t=vt.toValue(e);return ft(e),t},toWireType:function(e,t){return vt.toHandle(t)},argPackAdvance:8,readValueFromPointer:ae,destructorFunction:null})},A:function(e,t,n){var r=ve(n);we(e,{name:t=be(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:bt(t,r),destructorFunction:null})},j:function(e,t,n,r,i,s){var o=ct(t,n);e=be(e),i=st(r,i),qe(e,(function(){lt("Cannot call "+e+" due to unbound types",o)}),t-1),ge([],o,(function(n){var r=[n[0],null].concat(n.slice(1));return rt(e,ht(e,r,null,i,s),t-1),[]}))},h:function(e,t,n,r,i){t=be(t),-1===i&&(i=4294967295);var s=ve(n),o=e=>e;if(0===r){var a=32-8*n;o=e=>e<<a>>>a}var l=t.includes("unsigned");we(e,{name:t,fromWireType:o,toWireType:l?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:_t(t,s,0!==r),destructorFunction:null})},d:function(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=k,n=t[e>>=2],i=t[e+1];return new r(S,i,n)}we(e,{name:n=be(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},z:function(e,t){var n="std::string"===(t=be(t));we(e,{name:t,fromWireType:function(e){var t,r=k[e>>2];if(n)for(var i=e+4,s=0;s<=r;++s){var o=e+4+s;if(s==r||0==E[o]){var a=_(i,o-i);void 0===t?t=a:(t+=String.fromCharCode(0),t+=a),i=o+1}}else{var l=new Array(r);for(s=0;s<r;++s)l[s]=String.fromCharCode(E[e+4+s]);t=l.join("")}return Kt(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||xe("Cannot pass non-string to std::string");var i=(n&&r?()=>w(t):()=>t.length)(),s=Wt(4+i+1);if(k[s>>2]=i,n&&r)x(t,E,s+4,i+1);else if(r)for(var o=0;o<i;++o){var a=t.charCodeAt(o);a>255&&(Kt(s),xe("String has UTF-16 code units that do not fit in 8 bits")),E[s+4+o]=a}else for(o=0;o<i;++o)E[s+4+o]=t[o];return null!==e&&e.push(Kt,s),s},argPackAdvance:8,readValueFromPointer:ae,destructorFunction:function(e){Kt(e)}})},t:function(e,t,n){var r,i,s,o,a;n=be(n),2===t?(r=O,i=N,o=I,s=()=>A,a=1):4===t&&(r=D,i=F,o=z,s=()=>k,a=2),we(e,{name:n,fromWireType:function(e){for(var n,i=k[e>>2],o=s(),l=e+4,c=0;c<=i;++c){var u=e+4+c*t;if(c==i||0==o[u>>a]){var h=r(l,u-l);void 0===n?n=h:(n+=String.fromCharCode(0),n+=h),l=u+t}}return Kt(e),n},toWireType:function(e,r){"string"!=typeof r&&xe("Cannot pass non-string to C++ string type "+n);var s=o(r),l=Wt(4+s+t);return k[l>>2]=s>>a,i(r,l+4,s+t),null!==e&&e.push(Kt,l),l},argPackAdvance:8,readValueFromPointer:ae,destructorFunction:function(e){Kt(e)}})},l:function(e,t,n,r,i,s){se[e]={name:be(t),rawConstructor:st(n,r),rawDestructor:st(i,s),fields:[]}},c:function(e,t,n,r,i,s,o,a,l,c){se[e].fields.push({fieldName:be(t),getterReturnType:n,getter:st(r,i),getterContext:s,setterArgumentType:o,setter:st(a,l),setterContext:c})},P:function(e,t){we(e,{isVoid:!0,name:t=be(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},s:function(e,t,n){e=vt.toValue(e),t=xt(t,"emval::as");var r=[],i=vt.toHandle(r);return C[n>>2]=i,t.toWireType(r,e)},B:function(e,t,n,r,i){return(e=Tt[e])(t=vt.toValue(t),n=St(n),function(e){var t=[];return C[e>>2]=vt.toHandle(t),t}(r),i)},r:function(e,t,n,r){(e=Tt[e])(t=vt.toValue(t),n=St(n),null,r)},a:ft,C:function(e){return 0===e?vt.toHandle(Et()):(e=St(e),vt.toHandle(Et()[e]))},m:function(e,t){var n=function(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=xt(C[(t>>2)+r],"parameter "+r);return n}(e,t),r=n[0],i=r.name+"_$"+n.slice(1).map((function(e){return e.name})).join("_")+"$",s=Mt[i];if(void 0!==s)return s;for(var o=["retType"],a=[r],l="",c=0;c<e-1;++c)l+=(0!==c?", ":"")+"arg"+c,o.push("argType"+c),a.push(n[1+c]);var u="return function "+he("methodCaller_"+i)+"(handle, name, destructors, args) {\n",h=0;for(c=0;c<e-1;++c)u+="    var arg"+c+" = argType"+c+".readValueFromPointer(args"+(h?"+"+h:"")+");\n",h+=n[c+1].argPackAdvance;for(u+="    var rv = handle[name]("+l+");\n",c=0;c<e-1;++c)n[c+1].deleteObject&&(u+="    argType"+c+".deleteObject(arg"+c+");\n");r.isVoid||(u+="    return retType.toWireType(destructors, rv);\n"),u+="};\n",o.push(u);var d,p,f=ut(Function,o).apply(null,a);return d=f,p=Tt.length,Tt.push(d),s=p,Mt[i]=s,s},q:function(e,t){return e=vt.toValue(e),t=vt.toValue(t),vt.toHandle(e[t])},o:function(e){e>4&&(pt[e].refcount+=1)},w:function(){return vt.toHandle([])},e:function(e){return vt.toHandle(St(e))},Q:function(){return vt.toHandle({})},p:function(e){oe(vt.toValue(e)),ft(e)},i:function(e,t,n){e=vt.toValue(e),t=vt.toValue(t),n=vt.toValue(n),e[t]=n},g:function(e,t){var n=(e=xt(e,"_emval_take_value")).readValueFromPointer(t);return vt.toHandle(n)},x:function(){$("")},M:function(e,t,n){E.copyWithin(e,t,t+n)},L:function(e){var t,n,r=E.length,i=2147483648;if((e>>>=0)>i)return!1;for(var s=1;s<=4;s*=2){var o=r*(1+.2/s);if(o=Math.min(o,e+100663296),At(Math.min(i,(t=Math.max(e,o))+((n=65536)-t%n)%n)))return!0}return!1},H:function(e,t){var n=0;return kt().forEach((function(r,i){var s=t+n;k[e+4*i>>2]=s,function(e,t,n){for(var r=0;r<e.length;++r)T[t++>>0]=e.charCodeAt(r);n||(T[t>>0]=0)}(r,s),n+=r.length+1})),0},I:function(e,t){var n=kt();k[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),k[t>>2]=r,0},J:function(e){try{var t=It.getStreamFromFD(e);return Nt.close(t),0}catch(e){if(void 0===Nt||!(e instanceof Nt.ErrnoError))throw e;return e.errno}},K:function(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,s=0;s<n;s++){var o=k[t>>2],a=k[t+4>>2];t+=8;var l=Nt.read(e,T,o,a,r);if(l<0)return-1;if(i+=l,l<a)break}return i}(It.getStreamFromFD(e),t,n);return C[r>>2]=i,0}catch(e){if(void 0===Nt||!(e instanceof Nt.ErrnoError))throw e;return e.errno}},D:function(e,t,n,r,i){try{var s=(l=n)+2097152>>>0<4194305-!!(a=t)?(a>>>0)+4294967296*l:NaN;if(isNaN(s))return 61;var o=It.getStreamFromFD(e);return Nt.llseek(o,s,r),Z=[o.position>>>0,(G=o.position,+Math.abs(G)>=1?G>0?(0|Math.min(+Math.floor(G/4294967296),4294967295))>>>0:~~+Math.ceil((G-+(~~G>>>0))/4294967296)>>>0:0)],C[i>>2]=Z[0],C[i+4>>2]=Z[1],o.getdents&&0===s&&0===r&&(o.getdents=null),0}catch(e){if(void 0===Nt||!(e instanceof Nt.ErrnoError))throw e;return e.errno}var a,l},y:function(e,t,n,r){try{var i=function(e,t,n,r){for(var i=0,s=0;s<n;s++){var o=k[t>>2],a=k[t+4>>2];t+=8;var l=Nt.write(e,T,o,a,r);if(l<0)return-1;i+=l}return i}(It.getStreamFromFD(e),t,n);return k[r>>2]=i,0}catch(e){if(void 0===Nt||!(e instanceof Nt.ErrnoError))throw e;return e.errno}},F:function(e){},G:function(e,t,n,r){return Ut(e,t,n,r)}},Wt=(function(){var t={a:jt};function n(t,n){var r,i=t.exports;e.asm=i,U((p=e.asm.S).buffer),B=e.asm.V,r=e.asm.T,j.unshift(r),J()}function r(e){n(e.instance)}function s(e){return(d||"function"!=typeof fetch?Promise.resolve().then((function(){return ee(V)})):fetch(V,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+V+"'";return e.arrayBuffer()})).catch((function(){return ee(V)}))).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(e,(function(e){m("failed to asynchronously prepare wasm: "+e),$(e)}))}if(Y(),e.instantiateWasm)try{return e.instantiateWasm(t,n)}catch(e){return m("Module.instantiateWasm callback failed with error: "+e),!1}(d||"function"!=typeof WebAssembly.instantiateStreaming||Q(V)||"function"!=typeof fetch?s(r):fetch(V,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(r,(function(e){return m("wasm streaming compile failed: "+e),m("falling back to ArrayBuffer instantiation"),s(r)}))}))).catch(i)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.T).apply(null,arguments)},e._malloc=function(){return(Wt=e._malloc=e.asm.U).apply(null,arguments)}),qt=e.___getTypeName=function(){return(qt=e.___getTypeName=e.asm.W).apply(null,arguments)},Kt=(e.___embind_register_native_and_builtin_types=function(){return(e.___embind_register_native_and_builtin_types=e.asm.X).apply(null,arguments)},e._free=function(){return(Kt=e._free=e.asm.Y).apply(null,arguments)}),Xt=e.___cxa_is_pointer_type=function(){return(Xt=e.___cxa_is_pointer_type=e.asm.Z).apply(null,arguments)};function Yt(n){function r(){Ht||(Ht=!0,e.calledRun=!0,g||(e.noFSInit||Nt.init.initialized||Nt.init(),Nt.ignorePermissions=!1,Lt.init(),te(j),t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),W.unshift(t);var t;te(W)}()))}n=n||c,q>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),H.unshift(t);var t;te(H)}(),q>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),r()}),1)):r()))}if(e.dynCall_viijii=function(){return(e.dynCall_viijii=e.asm._).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.$).apply(null,arguments)},e.dynCall_iiiiij=function(){return(e.dynCall_iiiiij=e.asm.aa).apply(null,arguments)},e.dynCall_iiiiijj=function(){return(e.dynCall_iiiiijj=e.asm.ba).apply(null,arguments)},e.dynCall_iiiiiijj=function(){return(e.dynCall_iiiiiijj=e.asm.ca).apply(null,arguments)},X=function e(){Ht||Yt(),Ht||(X=e)},e.run=Yt,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Yt(),e.ready})},ScS0:e=>{"use strict";e.exports="data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw=="},"0Wsb":(e,t,n)=>{"use strict";e.exports=n.p+"92f00f01e34d86ab3b7e.wasm"},MlWm:(e,t,n)=>{"use strict";e.exports=n.p+"d41cfa7de53980742cc5.wasm"},uOvH:()=>{},s0VS:()=>{},GnR7:()=>{},JgUL:()=>{},rB4m:()=>{},"8ajK":()=>{},kKLm:()=>{},gOsK:()=>{},akNS:()=>{},"ngY+":(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:()=>r})},LbeA:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:()=>i})},"H+Tk":(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:()=>r})},m290:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("oVuA");function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,r.Z)(e,t)}},D1ci:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:()=>r})},oVuA:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:()=>r})},EInA:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("PSg2"),i=n("tcvG");const s=(0,r.Z)(i.Z,"DataView")},wo7b:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("kNWw"),i=n("E4zn"),s=n("F4ux"),o=n("9GnH"),a=n("IZfQ");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r.Z,l.prototype.delete=i.Z,l.prototype.get=s.Z,l.prototype.has=o.Z,l.prototype.set=a.Z;const c=l},X7r5:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("F1RM"),i=n("/VUM"),s=n("gnMa"),o=n("/RyQ"),a=n("0DjN");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r.Z,l.prototype.delete=i.Z,l.prototype.get=s.Z,l.prototype.has=o.Z,l.prototype.set=a.Z;const c=l},X2RK:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("PSg2"),i=n("tcvG");const s=(0,r.Z)(i.Z,"Map")},PUuQ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("KPXq"),i=n("Eut/"),s=n("G+5i"),o=n("cQD2"),a=n("Ah/L");function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r.Z,l.prototype.delete=i.Z,l.prototype.get=s.Z,l.prototype.has=o.Z,l.prototype.set=a.Z;const c=l},sMDm:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("PSg2"),i=n("tcvG");const s=(0,r.Z)(i.Z,"Promise")},"nK0/":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("PSg2"),i=n("tcvG");const s=(0,r.Z)(i.Z,"Set")},tBWn:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("PUuQ"),i=n("hDy9"),s=n("rPzt");function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r.Z;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i.Z,o.prototype.has=s.Z;const a=o},"8Sx2":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("X7r5"),i=n("NNUb"),s=n("1sOA"),o=n("YlX5"),a=n("OF8z"),l=n("chOi");function c(e){var t=this.__data__=new r.Z(e);this.size=t.size}c.prototype.clear=i.Z,c.prototype.delete=s.Z,c.prototype.get=o.Z,c.prototype.has=a.Z,c.prototype.set=l.Z;const u=c},BtaV:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n("tcvG").Z.Symbol},lJ1Z:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n("tcvG").Z.Uint8Array},QG8a:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("PSg2"),i=n("tcvG");const s=(0,r.Z)(i.Z,"WeakMap")},XULC:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},"o/qU":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},"Y+UM":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s}},YLbS:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("UE3l");const i=function(e,t){return!!(null==e?0:e.length)&&(0,r.Z)(e,t,0)>-1}},D3Z0:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},kZAY:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("iXuf"),i=n("Blrr"),s=n("ogfy"),o=n("f52i"),a=n("z5B3"),l=n("tbeu"),c=Object.prototype.hasOwnProperty;const u=function(e,t){var n=(0,s.Z)(e),u=!n&&(0,i.Z)(e),h=!n&&!u&&(0,o.Z)(e),d=!n&&!u&&!h&&(0,l.Z)(e),p=n||u||h||d,f=p?(0,r.Z)(e.length,String):[],m=f.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,a.Z)(g,m))||f.push(g);return f}},"9Gfg":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},fk72:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},Gbt9:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}},IOiJ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},d75s:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return e.split("")}},"94Nl":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;const i=function(e){return e.match(r)||[]}},VpGg:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("LYef"),i=n("R3nW"),s=Object.prototype.hasOwnProperty;const o=function(e,t,n){var o=e[t];s.call(e,t)&&(0,i.Z)(o,n)&&(void 0!==n||t in e)||(0,r.Z)(e,t,n)}},D53E:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("R3nW");const i=function(e,t){for(var n=e.length;n--;)if((0,r.Z)(e[n][0],t))return n;return-1}},LYef:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("L4iy");const i=function(e,t,n){"__proto__"==t&&r.Z?(0,r.Z)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},UBMP:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("tBWn"),i=n("YLbS"),s=n("D3Z0"),o=n("9Gfg"),a=n("UqZO"),l=n("Ocht");const c=function(e,t,n,c){var u=-1,h=i.Z,d=!0,p=e.length,f=[],m=t.length;if(!p)return f;n&&(t=(0,o.Z)(t,(0,a.Z)(n))),c?(h=s.Z,d=!1):t.length>=200&&(h=l.Z,d=!1,t=new r.Z(t));e:for(;++u<p;){var g=e[u],v=null==n?g:n(g);if(g=c||0!==g?g:0,d&&v==v){for(var y=m;y--;)if(t[y]===v)continue e;f.push(g)}else h(t,v,c)||f.push(g)}return f}},EFuN:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("cKw+");const i=(0,n("LahZ").Z)(r.Z)},JeBL:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}},zLIZ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("fk72"),i=n("BtaV"),s=n("Blrr"),o=n("ogfy"),a=i.Z?i.Z.isConcatSpreadable:void 0;const l=function(e){return(0,o.Z)(e)||(0,s.Z)(e)||!!(a&&e&&e[a])};const c=function e(t,n,i,s,o){var a=-1,c=t.length;for(i||(i=l),o||(o=[]);++a<c;){var u=t[a];n>0&&i(u)?n>1?e(u,n-1,i,s,o):(0,r.Z)(o,u):s||(o[o.length]=u)}return o}},Dbb6:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n("8foc").Z)()},"cKw+":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("Dbb6"),i=n("7lg8");const s=function(e,t){return e&&(0,r.Z)(e,t,i.Z)}},aeqe:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("CYY2"),i=n("30hn");const s=function(e,t){for(var n=0,s=(t=(0,r.Z)(t,e)).length;null!=e&&n<s;)e=e[(0,i.Z)(t[n++])];return n&&n==s?e:void 0}},"8XBD":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("fk72"),i=n("ogfy");const s=function(e,t,n){var s=t(e);return(0,i.Z)(e)?s:(0,r.Z)(s,n(e))}},MgId:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("BtaV"),i=n("wCjz"),s=n("wspj"),o=r.Z?r.Z.toStringTag:void 0;const a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?(0,i.Z)(e):(0,s.Z)(e)}},cWIl:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){return null!=e&&t in Object(e)}},cnSw:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=Math.max,i=Math.min;const s=function(e,t,n){return e>=i(t,n)&&e<r(t,n)}},UE3l:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("JeBL"),i=n("GctK"),s=n("hMmJ");const o=function(e,t,n){return t==t?(0,s.Z)(e,t,n):(0,r.Z)(e,i.Z,n)}},ifYN:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("XULC"),i=n("CYY2"),s=n("e2Wk"),o=n("HTgk"),a=n("30hn");const l=function(e,t,n){t=(0,i.Z)(t,e);var l=null==(e=(0,o.Z)(e,t))?e:e[(0,a.Z)((0,s.Z)(t))];return null==l?void 0:(0,r.Z)(l,e,n)}},ldmk:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("MgId"),i=n("2Nik");const s=function(e){return(0,i.Z)(e)&&"[object Arguments]"==(0,r.Z)(e)}},TyFl:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("Gs9k"),i=n("2Nik");const s=function e(t,n,s,o,a){return t===n||(null==t||null==n||!(0,i.Z)(t)&&!(0,i.Z)(n)?t!=t&&n!=n:(0,r.Z)(t,n,s,o,e,a))}},Gs9k:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n("8Sx2"),i=n("jsvt"),s=n("E/+H"),o=n("pG4N"),a=n("oNsh"),l=n("ogfy"),c=n("f52i"),u=n("tbeu"),h="[object Arguments]",d="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;const m=function(e,t,n,m,g,v){var y=(0,l.Z)(e),b=(0,l.Z)(t),_=y?d:(0,a.Z)(e),x=b?d:(0,a.Z)(t),w=(_=_==h?p:_)==p,S=(x=x==h?p:x)==p,T=_==x;if(T&&(0,c.Z)(e)){if(!(0,c.Z)(t))return!1;y=!0,w=!1}if(T&&!w)return v||(v=new r.Z),y||(0,u.Z)(e)?(0,i.Z)(e,t,n,m,g,v):(0,s.Z)(e,t,_,n,m,g,v);if(!(1&n)){var E=w&&f.call(e,"__wrapped__"),M=S&&f.call(t,"__wrapped__");if(E||M){var A=E?e.value():e,C=M?t.value():t;return v||(v=new r.Z),g(A,C,n,m,v)}}return!!T&&(v||(v=new r.Z),(0,o.Z)(e,t,n,m,g,v))}},DHBV:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("8Sx2"),i=n("TyFl");const s=function(e,t,n,s){var o=n.length,a=o,l=!s;if(null==e)return!a;for(e=Object(e);o--;){var c=n[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=n[o])[0],h=e[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in e))return!1}else{var p=new r.Z;if(s)var f=s(h,d,u,e,t,p);if(!(void 0===f?(0,i.Z)(d,h,3,s,p):f))return!1}}return!0}},GctK:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return e!=e}},G9jz:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n("W+Pi"),i=n("dAy9"),s=n("jaNM"),o=n("+FTI"),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const p=function(e){return!(!(0,s.Z)(e)||(0,i.Z)(e))&&((0,r.Z)(e)?d:a).test((0,o.Z)(e))}},qjZl:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("MgId"),i=n("XmKX"),s=n("2Nik"),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;const a=function(e){return(0,s.Z)(e)&&(0,i.Z)(e.length)&&!!o[(0,r.Z)(e)]}},vy2h:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("m5uP"),i=n("Wf8F"),s=n("b24R"),o=n("ogfy"),a=n("xHu8");const l=function(e){return"function"==typeof e?e:null==e?s.Z:"object"==typeof e?(0,o.Z)(e)?(0,i.Z)(e[0],e[1]):(0,r.Z)(e):(0,a.Z)(e)}},"2P11":(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("xlO4"),i=n("7E+q"),s=Object.prototype.hasOwnProperty;const o=function(e){if(!(0,r.Z)(e))return(0,i.Z)(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}},YoPN:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("EFuN"),i=n("MMSv");const s=function(e,t){var n=-1,s=(0,i.Z)(e)?Array(e.length):[];return(0,r.Z)(e,(function(e,r,i){s[++n]=t(e,r,i)})),s}},m5uP:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("DHBV"),i=n("ktbE"),s=n("87A/");const o=function(e){var t=(0,i.Z)(e);return 1==t.length&&t[0][2]?(0,s.Z)(t[0][0],t[0][1]):function(n){return n===e||(0,r.Z)(n,e,t)}}},Wf8F:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("TyFl"),i=n("7PNb"),s=n("3kbP"),o=n("Wl3f"),a=n("Pc7f"),l=n("87A/"),c=n("30hn");const u=function(e,t){return(0,o.Z)(e)&&(0,a.Z)(t)?(0,l.Z)((0,c.Z)(e),t):function(n){var o=(0,i.Z)(n,e);return void 0===o&&o===t?(0,s.Z)(n,e):(0,r.Z)(t,o,3)}}},QQR6:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return function(t){return null==t?void 0:t[e]}}},di10:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("aeqe");const i=function(e){return function(t){return(0,r.Z)(t,e)}}},K8oP:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return function(t){return null==e?void 0:e[t]}}},eboQ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("b24R"),i=n("jaA/"),s=n("+AB3");const o=function(e,t){return(0,s.Z)((0,i.Z)(e,t,r.Z),e+"")}},iF61:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("VpGg"),i=n("CYY2"),s=n("z5B3"),o=n("jaNM"),a=n("30hn");const l=function(e,t,n,l){if(!(0,o.Z)(e))return e;for(var c=-1,u=(t=(0,i.Z)(t,e)).length,h=u-1,d=e;null!=d&&++c<u;){var p=(0,a.Z)(t[c]),f=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=h){var m=d[p];void 0===(f=l?l(m,p,d):void 0)&&(f=(0,o.Z)(m)?m:(0,s.Z)(t[c+1])?[]:{})}(0,r.Z)(d,p,f),d=d[p]}return e}},Cybw:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("QNqF"),i=n("L4iy"),s=n("b24R");const o=i.Z?function(e,t){return(0,i.Z)(e,"toString",{configurable:!0,enumerable:!1,value:(0,r.Z)(t),writable:!0})}:s.Z},YWoN:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}},"/bBH":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("EFuN");const i=function(e,t){var n;return(0,r.Z)(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},iXuf:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},"+8fF":(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("BtaV"),i=n("9Gfg"),s=n("ogfy"),o=n("63ZI"),a=r.Z?r.Z.prototype:void 0,l=a?a.toString:void 0;const c=function e(t){if("string"==typeof t)return t;if((0,s.Z)(t))return(0,i.Z)(t,e)+"";if((0,o.Z)(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},q7Vo:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("R2pQ"),i=/^\s+/;const s=function(e){return e?e.slice(0,(0,r.Z)(e)+1).replace(i,""):e}},UqZO:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return function(t){return e(t)}}},"LOr/":(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("tBWn"),i=n("YLbS"),s=n("D3Z0"),o=n("Ocht"),a=n("xcm2"),l=n("KvSI");const c=function(e,t,n){var c=-1,u=i.Z,h=e.length,d=!0,p=[],f=p;if(n)d=!1,u=s.Z;else if(h>=200){var m=t?null:(0,a.Z)(e);if(m)return(0,l.Z)(m);d=!1,u=o.Z,f=new r.Z}else f=t?[]:p;e:for(;++c<h;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,d&&v==v){for(var y=f.length;y--;)if(f[y]===v)continue e;t&&f.push(v),p.push(g)}else u(f,v,n)||(f!==p&&f.push(v),p.push(g))}return p}},QKXj:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("9Gfg");const i=function(e,t){return(0,r.Z)(t,(function(t){return e[t]}))}},Ocht:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){return e.has(t)}},chsa:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("b24R");const i=function(e){return"function"==typeof e?e:r.Z}},CYY2:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("ogfy"),i=n("Wl3f"),s=n("DRor"),o=n("ud8q");const a=function(e,t){return(0,r.Z)(e)?e:(0,i.Z)(e,t)?[e]:(0,s.Z)((0,o.Z)(e))}},aW9N:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("YWoN");const i=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:(0,r.Z)(e,t,n)}},bLcr:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n("tcvG").Z["__core-js_shared__"]},LahZ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("MMSv");const i=function(e,t){return function(n,i){if(null==n)return n;if(!(0,r.Z)(n))return e(n,i);for(var s=n.length,o=t?s:-1,a=Object(n);(t?o--:++o<s)&&!1!==i(a[o],o,a););return n}}},"8foc":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return function(t,n,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var l=o[e?a:++i];if(!1===n(s[l],l,s))break}return t}}},eRn5:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("aW9N"),i=n("d9xN"),s=n("xqK6"),o=n("ud8q");const a=function(e){return function(t){t=(0,o.Z)(t);var n=(0,i.Z)(t)?(0,s.Z)(t):void 0,a=n?n[0]:t.charAt(0),l=n?(0,r.Z)(n,1).join(""):t.slice(1);return a[e]()+l}}},"EEY/":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("Gbt9"),i=n("auUP"),s=n("Ub34"),o=RegExp("['’]","g");const a=function(e){return function(t){return(0,r.Z)((0,s.Z)((0,i.Z)(t).replace(o,"")),e,"")}}},xcm2:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("nK0/"),i=n("wzju"),s=n("KvSI");const o=r.Z&&1/(0,s.Z)(new r.Z([,-0]))[1]==1/0?function(e){return new r.Z(e)}:i.Z},tb33:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n("K8oP").Z)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"})},L4iy:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("PSg2");const i=function(){try{var e=(0,r.Z)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},jsvt:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("tBWn"),i=n("IOiJ"),s=n("Ocht");const o=function(e,t,n,o,a,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(e),p=l.get(t);if(d&&p)return d==t&&p==e;var f=-1,m=!0,g=2&n?new r.Z:void 0;for(l.set(e,t),l.set(t,e);++f<u;){var v=e[f],y=t[f];if(o)var b=c?o(y,v,f,t,e,l):o(v,y,f,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!(0,i.Z)(t,(function(e,t){if(!(0,s.Z)(g,t)&&(v===e||a(v,e,n,o,l)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!a(v,y,n,o,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},"E/+H":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("BtaV"),i=n("lJ1Z"),s=n("R3nW"),o=n("jsvt"),a=n("LazF"),l=n("KvSI"),c=r.Z?r.Z.prototype:void 0,u=c?c.valueOf:void 0;const h=function(e,t,n,r,c,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i.Z(e),new i.Z(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,s.Z)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a.Z;case"[object Set]":var f=1&r;if(p||(p=l.Z),e.size!=t.size&&!f)return!1;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var g=(0,o.Z)(p(e),p(t),r,c,h,d);return d.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},pG4N:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("iCnn"),i=Object.prototype.hasOwnProperty;const s=function(e,t,n,s,o,a){var l=1&n,c=(0,r.Z)(e),u=c.length;if(u!=(0,r.Z)(t).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in t:i.call(t,d)))return!1}var p=a.get(e),f=a.get(t);if(p&&f)return p==t&&f==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=l;++h<u;){var v=e[d=c[h]],y=t[d];if(s)var b=l?s(y,v,d,t,e,a):s(v,y,d,e,t,a);if(!(void 0===b?v===y||o(v,y,n,s,a):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(m=!1)}return a.delete(e),a.delete(t),m}},ADdB:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={}.Object===Object&&{}},iCnn:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("8XBD"),i=n("Xgh7"),s=n("7lg8");const o=function(e){return(0,r.Z)(e,s.Z,i.Z)}},EjxH:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("hNMO");const i=function(e,t){var n=e.__data__;return(0,r.Z)(t)?n["string"==typeof t?"string":"hash"]:n.map}},ktbE:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("Pc7f"),i=n("7lg8");const s=function(e){for(var t=(0,i.Z)(e),n=t.length;n--;){var s=t[n],o=e[s];t[n]=[s,o,(0,r.Z)(o)]}return t}},PSg2:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("G9jz"),i=n("bB3j");const s=function(e,t){var n=(0,i.Z)(e,t);return(0,r.Z)(n)?n:void 0}},p07C:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n("kHLZ").Z)(Object.getPrototypeOf,Object)},wCjz:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("BtaV"),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=r.Z?r.Z.toStringTag:void 0;const l=function(e){var t=s.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=o.call(e);return r&&(t?e[a]=n:delete e[a]),i}},Xgh7:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("Y+UM"),i=n("maBV"),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;const a=o?function(e){return null==e?[]:(e=Object(e),(0,r.Z)(o(e),(function(t){return s.call(e,t)})))}:i.Z},oNsh:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var r=n("EInA"),i=n("X2RK"),s=n("sMDm"),o=n("nK0/"),a=n("QG8a"),l=n("MgId"),c=n("+FTI"),u="[object Map]",h="[object Promise]",d="[object Set]",p="[object WeakMap]",f="[object DataView]",m=(0,c.Z)(r.Z),g=(0,c.Z)(i.Z),v=(0,c.Z)(s.Z),y=(0,c.Z)(o.Z),b=(0,c.Z)(a.Z),_=l.Z;(r.Z&&_(new r.Z(new ArrayBuffer(1)))!=f||i.Z&&_(new i.Z)!=u||s.Z&&_(s.Z.resolve())!=h||o.Z&&_(new o.Z)!=d||a.Z&&_(new a.Z)!=p)&&(_=function(e){var t=(0,l.Z)(e),n="[object Object]"==t?e.constructor:void 0,r=n?(0,c.Z)(n):"";if(r)switch(r){case m:return f;case g:return u;case v:return h;case y:return d;case b:return p}return t});const x=_},bB3j:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){return null==e?void 0:e[t]}},"6H+C":(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("CYY2"),i=n("Blrr"),s=n("ogfy"),o=n("z5B3"),a=n("XmKX"),l=n("30hn");const c=function(e,t,n){for(var c=-1,u=(t=(0,r.Z)(t,e)).length,h=!1;++c<u;){var d=(0,l.Z)(t[c]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++c!=u?h:!!(u=null==e?0:e.length)&&(0,a.Z)(u)&&(0,o.Z)(d,u)&&((0,s.Z)(e)||(0,i.Z)(e))}},d9xN:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const i=function(e){return r.test(e)}},i9IA:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;const i=function(e){return r.test(e)}},kNWw:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("0neM");const i=function(){this.__data__=r.Z?(0,r.Z)(null):{},this.size=0}},E4zn:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},F4ux:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("0neM"),i=Object.prototype.hasOwnProperty;const s=function(e){var t=this.__data__;if(r.Z){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},"9GnH":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("0neM"),i=Object.prototype.hasOwnProperty;const s=function(e){var t=this.__data__;return r.Z?void 0!==t[e]:i.call(t,e)}},IZfQ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("0neM");const i=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r.Z&&void 0===t?"__lodash_hash_undefined__":t,this}},z5B3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=/^(?:0|[1-9]\d*)$/;const i=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},MG3Q:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("R3nW"),i=n("MMSv"),s=n("z5B3"),o=n("jaNM");const a=function(e,t,n){if(!(0,o.Z)(n))return!1;var a=typeof t;return!!("number"==a?(0,i.Z)(n)&&(0,s.Z)(t,n.length):"string"==a&&t in n)&&(0,r.Z)(n[t],e)}},Wl3f:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("ogfy"),i=n("63ZI"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;const a=function(e,t){if((0,r.Z)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,i.Z)(e))||(o.test(e)||!s.test(e)||null!=t&&e in Object(t))}},hNMO:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},dAy9:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r,i=n("bLcr"),s=(r=/[^.]+$/.exec(i.Z&&i.Z.keys&&i.Z.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";const o=function(e){return!!s&&s in e}},xlO4:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=Object.prototype;const i=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},Pc7f:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("jaNM");const i=function(e){return e==e&&!(0,r.Z)(e)}},F1RM:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){this.__data__=[],this.size=0}},"/VUM":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("D53E"),i=Array.prototype.splice;const s=function(e){var t=this.__data__,n=(0,r.Z)(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},gnMa:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("D53E");const i=function(e){var t=this.__data__,n=(0,r.Z)(t,e);return n<0?void 0:t[n][1]}},"/RyQ":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("D53E");const i=function(e){return(0,r.Z)(this.__data__,e)>-1}},"0DjN":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("D53E");const i=function(e,t){var n=this.__data__,i=(0,r.Z)(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},KPXq:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("wo7b"),i=n("X7r5"),s=n("X2RK");const o=function(){this.size=0,this.__data__={hash:new r.Z,map:new(s.Z||i.Z),string:new r.Z}}},"Eut/":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("EjxH");const i=function(e){var t=(0,r.Z)(this,e).delete(e);return this.size-=t?1:0,t}},"G+5i":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("EjxH");const i=function(e){return(0,r.Z)(this,e).get(e)}},cQD2:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("EjxH");const i=function(e){return(0,r.Z)(this,e).has(e)}},"Ah/L":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("EjxH");const i=function(e,t){var n=(0,r.Z)(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},LazF:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},"87A/":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},yl0W:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("A40A");const i=function(e){var t=(0,r.Z)(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},"0neM":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n("PSg2").Z)(Object,"create")},"7E+q":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n("kHLZ").Z)(Object.keys,Object)},oCs6:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("ADdB"),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof module&&module&&!module.nodeType&&module,o=s&&s.exports===i&&r.Z.process;const a=function(){try{var e=s&&s.require&&s.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}()},wspj:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=Object.prototype.toString;const i=function(e){return r.call(e)}},kHLZ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){return function(n){return e(t(n))}}},"jaA/":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("XULC"),i=Math.max;const s=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,o=-1,a=i(s.length-t,0),l=Array(a);++o<a;)l[o]=s[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=s[o];return c[t]=n(l),(0,r.Z)(e,this,c)}}},HTgk:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("aeqe"),i=n("YWoN");const s=function(e,t){return t.length<2?e:(0,r.Z)(e,(0,i.Z)(t,0,-1))}},tcvG:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("ADdB"),i="object"==typeof self&&self&&self.Object===Object&&self;const s=r.Z||i||Function("return this")()},hDy9:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},rPzt:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return this.__data__.has(e)}},KvSI:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},"+AB3":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("Cybw");const i=(0,n("ORNN").Z)(r.Z)},ORNN:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=Date.now;const i=function(e){var t=0,n=0;return function(){var i=r(),s=16-(i-n);if(n=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},NNUb:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("X7r5");const i=function(){this.__data__=new r.Z,this.size=0}},"1sOA":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},YlX5:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return this.__data__.get(e)}},OF8z:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return this.__data__.has(e)}},chOi:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("X7r5"),i=n("X2RK"),s=n("PUuQ");const o=function(e,t){var n=this.__data__;if(n instanceof r.Z){var o=n.__data__;if(!i.Z||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new s.Z(o)}return n.set(e,t),this.size=n.size,this}},hMmJ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},xqK6:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("d75s"),i=n("d9xN"),s=n("Oa0I");const o=function(e){return(0,i.Z)(e)?(0,s.Z)(e):(0,r.Z)(e)}},DRor:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("yl0W"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g;const o=(0,r.Z)((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(s,"$1"):n||e)})),t}))},"30hn":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("63ZI");const i=function(e){if("string"==typeof e||(0,r.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},"+FTI":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=Function.prototype.toString;const i=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},R2pQ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=/\s/;const i=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t}},Oa0I:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r="[\\ud800-\\udfff]",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+i+"|"+s+")"+"?",u="[\\ufe0e\\ufe0f]?",h=u+c+("(?:\\u200d(?:"+[o,a,l].join("|")+")"+u+c+")*"),d="(?:"+[o+i+"?",i,a,l,r].join("|")+")",p=RegExp(s+"(?="+s+")|"+d+h,"g");const f=function(e){return e.match(p)||[]}},V92Z:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",s="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+o+"]",l="\\d+",c="[\\u2700-\\u27bf]",u="["+i+"]",h="[^\\ud800-\\udfff"+o+l+r+i+s+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",f="["+s+"]",m="(?:"+u+"|"+h+")",g="(?:"+f+"|"+h+")",v="(?:['’](?:d|ll|m|re|s|t|ve))?",y="(?:['’](?:D|LL|M|RE|S|T|VE))?",b="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",_="[\\ufe0e\\ufe0f]?",x=_+b+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",d,p].join("|")+")"+_+b+")*"),w="(?:"+[c,d,p].join("|")+")"+x,S=RegExp([f+"?"+u+"+"+v+"(?="+[a,f,"$"].join("|")+")",g+"+"+y+"(?="+[a,f+m,"$"].join("|")+")",f+"?"+m+"+"+v,f+"+"+y,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l,w].join("|"),"g");const T=function(e){return e.match(S)||[]}},QNqF:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return function(){return e}}},auUP:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("tb33"),i=n("ud8q"),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const a=function(e){return(e=(0,i.Z)(e))&&e.replace(s,r.Z).replace(o,"")}},R3nW:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e,t){return e===t||e!=e&&t!=t}},SdmQ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("Y+UM"),i=n("EFuN");const s=function(e,t){var n=[];return(0,i.Z)(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n};var o=n("vy2h"),a=n("ogfy");const l=function(e,t){return((0,a.Z)(e)?r.Z:s)(e,(0,o.Z)(t,3))}},"610m":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("o/qU"),i=n("EFuN"),s=n("chsa"),o=n("ogfy");const a=function(e,t){return((0,o.Z)(e)?r.Z:i.Z)(e,(0,s.Z)(t))}},"7PNb":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("aeqe");const i=function(e,t,n){var i=null==e?void 0:(0,r.Z)(e,t);return void 0===i?n:i}},"3kbP":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("cWIl"),i=n("6H+C");const s=function(e,t){return null!=e&&(0,i.Z)(e,t,r.Z)}},NtZ7:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return e&&e.length?e[0]:void 0}},b24R:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return e}},M9TG:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("cnSw"),i=n("tbiB"),s=n("Q1Uy");const o=function(e,t,n){return t=(0,i.Z)(t),void 0===n?(n=t,t=0):n=(0,i.Z)(n),e=(0,s.Z)(e),(0,r.Z)(e,t,n)}},Li4J:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n("UE3l"),i=n("MMSv"),s=n("CruI"),o=n("Z8k3"),a=n("ItLR"),l=Math.max;const c=function(e,t,n,c){e=(0,i.Z)(e)?e:(0,a.Z)(e),n=n&&!c?(0,o.Z)(n):0;var u=e.length;return n<0&&(n=l(u+n,0)),(0,s.Z)(e)?n<=u&&e.indexOf(t,n)>-1:!!u&&(0,r.Z)(e,t,n)>-1}},iGFm:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("ifYN");const i=(0,n("eboQ").Z)(r.Z)},Blrr:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("ldmk"),i=n("2Nik"),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable;const l=(0,r.Z)(function(){return arguments}())?r.Z:function(e){return(0,i.Z)(e)&&o.call(e,"callee")&&!a.call(e,"callee")}},ogfy:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=Array.isArray},MMSv:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("W+Pi"),i=n("XmKX");const s=function(e){return null!=e&&(0,i.Z)(e.length)&&!(0,r.Z)(e)}},FcBF:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("MMSv"),i=n("2Nik");const s=function(e){return(0,i.Z)(e)&&(0,r.Z)(e)}},"+BPJ":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("MgId"),i=n("2Nik");const s=function(e){return!0===e||!1===e||(0,i.Z)(e)&&"[object Boolean]"==(0,r.Z)(e)}},f52i:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("tcvG"),i=n("5nAB"),s="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=s&&"object"==typeof module&&module&&!module.nodeType&&module,a=o&&o.exports===s?r.Z.Buffer:void 0;const l=(a?a.isBuffer:void 0)||i.Z},QYiU:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n("2P11"),i=n("oNsh"),s=n("Blrr"),o=n("ogfy"),a=n("MMSv"),l=n("f52i"),c=n("xlO4"),u=n("tbeu"),h=Object.prototype.hasOwnProperty;const d=function(e){if(null==e)return!0;if((0,a.Z)(e)&&((0,o.Z)(e)||"string"==typeof e||"function"==typeof e.splice||(0,l.Z)(e)||(0,u.Z)(e)||(0,s.Z)(e)))return!e.length;var t=(0,i.Z)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,c.Z)(e))return!(0,r.Z)(e).length;for(var n in e)if(h.call(e,n))return!1;return!0}},"W+Pi":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("MgId"),i=n("jaNM");const s=function(e){if(!(0,i.Z)(e))return!1;var t=(0,r.Z)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},XmKX:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},syBy:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return null==e}},xFAa:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("MgId"),i=n("2Nik");const s=function(e){return"number"==typeof e||(0,i.Z)(e)&&"[object Number]"==(0,r.Z)(e)}},jaNM:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"2Nik":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return null!=e&&"object"==typeof e}},"2FZd":(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n("MgId"),i=n("p07C"),s=n("2Nik"),o=Function.prototype,a=Object.prototype,l=o.toString,c=a.hasOwnProperty,u=l.call(Object);const h=function(e){if(!(0,s.Z)(e)||"[object Object]"!=(0,r.Z)(e))return!1;var t=(0,i.Z)(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},CruI:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("MgId"),i=n("ogfy"),s=n("2Nik");const o=function(e){return"string"==typeof e||!(0,i.Z)(e)&&(0,s.Z)(e)&&"[object String]"==(0,r.Z)(e)}},"63ZI":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("MgId"),i=n("2Nik");const s=function(e){return"symbol"==typeof e||(0,i.Z)(e)&&"[object Symbol]"==(0,r.Z)(e)}},tbeu:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("qjZl"),i=n("UqZO"),s=n("oCs6"),o=s.Z&&s.Z.isTypedArray;const a=o?(0,i.Z)(o):r.Z},b0ud:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){return void 0===e}},"7lg8":(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("kZAY"),i=n("2P11"),s=n("MMSv");const o=function(e){return(0,s.Z)(e)?(0,r.Z)(e):(0,i.Z)(e)}},e2Wk:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},"hR+M":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("9Gfg"),i=n("vy2h"),s=n("YoPN"),o=n("ogfy");const a=function(e,t){return((0,o.Z)(e)?r.Z:s.Z)(e,(0,i.Z)(t,3))}},A40A:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("PUuQ");function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(i.Cache||r.Z),n}i.Cache=r.Z;const s=i},wzju:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){}},XomA:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n("aeqe"),i=n("iF61"),s=n("CYY2");const o=function(e,t,n){for(var o=-1,a=t.length,l={};++o<a;){var c=t[o],u=(0,r.Z)(e,c);n(u,c)&&(0,i.Z)(l,(0,s.Z)(c,e),u)}return l};var a=n("3kbP");const l=function(e,t){return o(e,t,(function(t,n){return(0,a.Z)(e,n)}))};var c=n("zLIZ");const u=function(e){return(null==e?0:e.length)?(0,c.Z)(e,1):[]};var h=n("jaA/"),d=n("+AB3");const p=function(e){return(0,d.Z)((0,h.Z)(e,void 0,u),e+"")}((function(e,t){return null==e?{}:l(e,t)}))},xHu8:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("QQR6"),i=n("di10"),s=n("Wl3f"),o=n("30hn");const a=function(e){return(0,s.Z)(e)?(0,r.Z)((0,o.Z)(e)):(0,i.Z)(e)}},Nwlo:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("Gbt9"),i=n("EFuN"),s=n("vy2h");const o=function(e,t,n,r,i){return i(e,(function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)})),n};var a=n("ogfy");const l=function(e,t,n){var l=(0,a.Z)(e)?r.Z:o,c=arguments.length<3;return l(e,(0,s.Z)(t,4),n,c,i.Z)}},ukBZ:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("iF61");const i=function(e,t,n){return null==e?e:(0,r.Z)(e,t,n)}},kv6W:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n("IOiJ"),i=n("vy2h"),s=n("/bBH"),o=n("ogfy"),a=n("MG3Q");const l=function(e,t,n){var l=(0,o.Z)(e)?r.Z:s.Z;return n&&(0,a.Z)(e,t,n)&&(t=void 0),l(e,(0,i.Z)(t,3))}},"N+zd":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("EEY/"),i=n("rGsK");const s=(0,r.Z)((function(e,t,n){return e+(n?" ":"")+(0,i.Z)(t)}))},maBV:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){return[]}},"5nAB":(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){return!1}},tbiB:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("Q1Uy"),i=1/0;const s=function(e){return e?(e=(0,r.Z)(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},Z8k3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("tbiB");const i=function(e){var t=(0,r.Z)(e),n=t%1;return t==t?n?t-n:t:0}},Q1Uy:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n("q7Vo"),i=n("jaNM"),s=n("63ZI"),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;const u=function(e){if("number"==typeof e)return e;if((0,s.Z)(e))return NaN;if((0,i.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,i.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=(0,r.Z)(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}},ud8q:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("+8fF");const i=function(e){return null==e?"":(0,r.Z)(e)}},Yjeb:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n("LOr/");const i=function(e){return e&&e.length?(0,r.Z)(e):[]}},rGsK:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n("eRn5").Z)("toUpperCase")},ItLR:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n("QKXj"),i=n("7lg8");const s=function(e){return null==e?[]:(0,r.Z)(e,(0,i.Z)(e))}},PVtX:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n("UBMP"),i=n("eboQ"),s=n("FcBF");const o=(0,i.Z)((function(e,t){return(0,s.Z)(e)?(0,r.Z)(e,t):[]}))},Ub34:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n("94Nl"),i=n("i9IA"),s=n("ud8q"),o=n("V92Z");const a=function(e,t,n){return e=(0,s.Z)(e),void 0===(t=n?void 0:t)?(0,i.Z)(e)?(0,o.Z)(e):(0,r.Z)(e):e.match(t)||[]}},y9Bw:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:()=>ee,AddEquation:()=>S,AddOperation:()=>X,AdditiveAnimationBlendMode:()=>Mt,AdditiveBlending:()=>b,AlphaFormat:()=>Le,AlwaysDepth:()=>B,AlwaysStencilFunc:()=>en,AmbientLight:()=>Wh,AmbientLightProbe:()=>cd,AnimationClip:()=>gh,AnimationLoader:()=>Eh,AnimationMixer:()=>Ud,AnimationObjectGroup:()=>Dd,AnimationUtils:()=>rh,ArcCurve:()=>_c,ArrayCamera:()=>Ya,ArrowHelper:()=>Pp,Audio:()=>xd,AudioAnalyser:()=>Ad,AudioContext:()=>od,AudioListener:()=>_d,AudioLoader:()=>ad,AxesHelper:()=>Rp,BackSide:()=>m,BasicDepthPacking:()=>Lt,BasicShadowMap:()=>u,Bone:()=>Fl,BooleanKeyframeTrack:()=>ch,Box2:()=>Jd,Box3:()=>cr,Box3Helper:()=>Ep,BoxBufferGeometry:()=>Bp,BoxGeometry:()=>ls,BoxHelper:()=>Tp,BufferAttribute:()=>Ti,BufferGeometry:()=>Gi,BufferGeometryLoader:()=>Qh,ByteType:()=>we,Cache:()=>yh,Camera:()=>ps,CameraHelper:()=>xp,CanvasTexture:()=>vc,CapsuleBufferGeometry:()=>Vp,CapsuleGeometry:()=>Vc,CatmullRomCurve3:()=>Mc,CineonToneMapping:()=>Q,CircleBufferGeometry:()=>Gp,CircleGeometry:()=>Gc,ClampToEdgeWrapping:()=>ce,Clock:()=>fd,Color:()=>jn,ColorKeyframeTrack:()=>uh,ColorManagement:()=>zn,CompressedArrayTexture:()=>gc,CompressedTexture:()=>mc,CompressedTextureLoader:()=>Mh,ConeBufferGeometry:()=>Zp,ConeGeometry:()=>Hc,CubeCamera:()=>gs,CubeReflectionMapping:()=>re,CubeRefractionMapping:()=>ie,CubeTexture:()=>vs,CubeTextureLoader:()=>Ch,CubeUVReflectionMapping:()=>ae,CubicBezierCurve:()=>Pc,CubicBezierCurve3:()=>Rc,CubicInterpolant:()=>sh,CullFaceBack:()=>a,CullFaceFront:()=>l,CullFaceFrontBack:()=>c,CullFaceNone:()=>o,Curve:()=>yc,CurvePath:()=>zc,CustomBlending:()=>w,CustomToneMapping:()=>te,CylinderBufferGeometry:()=>Hp,CylinderGeometry:()=>Zc,Cylindrical:()=>Xd,Data3DTexture:()=>nr,DataArrayTexture:()=>er,DataTexture:()=>zl,DataTexture2DArray:()=>zp,DataTexture3D:()=>Up,DataTextureLoader:()=>kh,DataUtils:()=>Ip,DecrementStencilOp:()=>Zt,DecrementWrapStencilOp:()=>jt,DefaultLoadingManager:()=>_h,DepthFormat:()=>Fe,DepthStencilFormat:()=>ze,DepthTexture:()=>el,DirectionalLight:()=>jh,DirectionalLightHelper:()=>yp,DiscreteInterpolant:()=>ah,DodecahedronBufferGeometry:()=>jp,DodecahedronGeometry:()=>Wc,DoubleSide:()=>g,DstAlphaFactor:()=>N,DstColorFactor:()=>D,DynamicCopyUsage:()=>cn,DynamicDrawUsage:()=>nn,DynamicReadUsage:()=>on,EdgesGeometry:()=>Jc,EllipseCurve:()=>bc,EqualDepth:()=>Z,EqualStencilFunc:()=>Xt,EquirectangularReflectionMapping:()=>se,EquirectangularRefractionMapping:()=>oe,Euler:()=>Wr,EventDispatcher:()=>fn,ExtrudeBufferGeometry:()=>Wp,ExtrudeGeometry:()=>Au,FileLoader:()=>Th,Float16BufferAttribute:()=>Li,Float32BufferAttribute:()=>Oi,Float64BufferAttribute:()=>Ni,FloatType:()=>Ae,Fog:()=>al,FogExp2:()=>ol,FramebufferTexture:()=>fc,FrontSide:()=>f,Frustum:()=>Es,GLBufferAttribute:()=>Hd,GLSL1:()=>hn,GLSL3:()=>dn,GreaterDepth:()=>j,GreaterEqualDepth:()=>H,GreaterEqualStencilFunc:()=>Qt,GreaterStencilFunc:()=>Jt,GridHelper:()=>pp,Group:()=>Ja,HalfFloatType:()=>Ce,HemisphereLight:()=>Lh,HemisphereLightHelper:()=>dp,HemisphereLightProbe:()=>ld,IcosahedronBufferGeometry:()=>qp,IcosahedronGeometry:()=>ku,ImageBitmapLoader:()=>id,ImageLoader:()=>Ah,ImageUtils:()=>qn,ImmediateRenderObject:()=>Dp,IncrementStencilOp:()=>Gt,IncrementWrapStencilOp:()=>Ht,InstancedBufferAttribute:()=>Gl,InstancedBufferGeometry:()=>$h,InstancedInterleavedBuffer:()=>Zd,InstancedMesh:()=>Kl,Int16BufferAttribute:()=>Ci,Int32BufferAttribute:()=>Pi,Int8BufferAttribute:()=>Ei,IntType:()=>Ee,InterleavedBuffer:()=>cl,InterleavedBufferAttribute:()=>hl,Interpolant:()=>ih,InterpolateDiscrete:()=>bt,InterpolateLinear:()=>_t,InterpolateSmooth:()=>xt,InvertStencilOp:()=>Wt,KeepStencilOp:()=>Bt,KeyframeTrack:()=>lh,LOD:()=>Pl,LatheBufferGeometry:()=>Kp,LatheGeometry:()=>Bc,Layers:()=>qr,LessDepth:()=>V,LessEqualDepth:()=>G,LessEqualStencilFunc:()=>Yt,LessStencilFunc:()=>Kt,Light:()=>Rh,LightProbe:()=>Xh,Line:()=>tc,Line3:()=>ep,LineBasicMaterial:()=>Xl,LineCurve:()=>Lc,LineCurve3:()=>Oc,LineDashedMaterial:()=>Yu,LineLoop:()=>sc,LineSegments:()=>ic,LinearEncoding:()=>Pt,LinearFilter:()=>ge,LinearInterpolant:()=>oh,LinearMipMapLinearFilter:()=>_e,LinearMipMapNearestFilter:()=>ye,LinearMipmapLinearFilter:()=>be,LinearMipmapNearestFilter:()=>ve,LinearSRGBColorSpace:()=>zt,LinearToneMapping:()=>J,Loader:()=>xh,LoaderUtils:()=>Jh,LoadingManager:()=>bh,LoopOnce:()=>gt,LoopPingPong:()=>yt,LoopRepeat:()=>vt,LuminanceAlphaFormat:()=>De,LuminanceFormat:()=>Ie,MOUSE:()=>i,Material:()=>_i,MaterialLoader:()=>Yh,MathUtils:()=>Cn,Matrix3:()=>Pn,Matrix4:()=>Dr,MaxEquation:()=>A,Mesh:()=>os,MeshBasicMaterial:()=>xi,MeshDepthMaterial:()=>Ha,MeshDistanceMaterial:()=>ja,MeshLambertMaterial:()=>Ku,MeshMatcapMaterial:()=>Xu,MeshNormalMaterial:()=>qu,MeshPhongMaterial:()=>ju,MeshPhysicalMaterial:()=>Hu,MeshStandardMaterial:()=>Zu,MeshToonMaterial:()=>Wu,MinEquation:()=>M,MirroredRepeatWrapping:()=>ue,MixOperation:()=>K,MultiplyBlending:()=>x,MultiplyOperation:()=>q,NearestFilter:()=>he,NearestMipMapLinearFilter:()=>me,NearestMipMapNearestFilter:()=>pe,NearestMipmapLinearFilter:()=>fe,NearestMipmapNearestFilter:()=>de,NeverDepth:()=>U,NeverStencilFunc:()=>qt,NoBlending:()=>v,NoColorSpace:()=>Dt,NoToneMapping:()=>Y,NormalAnimationBlendMode:()=>Et,NormalBlending:()=>y,NotEqualDepth:()=>W,NotEqualStencilFunc:()=>$t,NumberKeyframeTrack:()=>hh,Object3D:()=>ai,ObjectLoader:()=>ed,ObjectSpaceNormalMap:()=>It,OctahedronBufferGeometry:()=>Xp,OctahedronGeometry:()=>Pu,OneFactor:()=>k,OneMinusDstAlphaFactor:()=>I,OneMinusDstColorFactor:()=>F,OneMinusSrcAlphaFactor:()=>O,OneMinusSrcColorFactor:()=>R,OrthographicCamera:()=>zs,PCFShadowMap:()=>h,PCFSoftShadowMap:()=>d,PMREMGenerator:()=>qs,Path:()=>Uc,PerspectiveCamera:()=>fs,Plane:()=>ws,PlaneBufferGeometry:()=>Yp,PlaneGeometry:()=>Cs,PlaneHelper:()=>Mp,PointLight:()=>Zh,PointLightHelper:()=>lp,Points:()=>hc,PointsMaterial:()=>oc,PolarGridHelper:()=>fp,PolyhedronBufferGeometry:()=>Jp,PolyhedronGeometry:()=>jc,PositionalAudio:()=>Md,PropertyBinding:()=>Id,PropertyMixer:()=>Cd,QuadraticBezierCurve:()=>Nc,QuadraticBezierCurve3:()=>Ic,Quaternion:()=>sr,QuaternionKeyframeTrack:()=>ph,QuaternionLinearInterpolant:()=>dh,REVISION:()=>r,RGBADepthPacking:()=>Ot,RGBAFormat:()=>Ne,RGBAIntegerFormat:()=>Ze,RGBA_ASTC_10x10_Format:()=>dt,RGBA_ASTC_10x5_Format:()=>ct,RGBA_ASTC_10x6_Format:()=>ut,RGBA_ASTC_10x8_Format:()=>ht,RGBA_ASTC_12x10_Format:()=>pt,RGBA_ASTC_12x12_Format:()=>ft,RGBA_ASTC_4x4_Format:()=>tt,RGBA_ASTC_5x4_Format:()=>nt,RGBA_ASTC_5x5_Format:()=>rt,RGBA_ASTC_6x5_Format:()=>it,RGBA_ASTC_6x6_Format:()=>st,RGBA_ASTC_8x5_Format:()=>ot,RGBA_ASTC_8x6_Format:()=>at,RGBA_ASTC_8x8_Format:()=>lt,RGBA_BPTC_Format:()=>mt,RGBA_ETC2_EAC_Format:()=>et,RGBA_PVRTC_2BPPV1_Format:()=>Je,RGBA_PVRTC_4BPPV1_Format:()=>Ye,RGBA_S3TC_DXT1_Format:()=>je,RGBA_S3TC_DXT3_Format:()=>We,RGBA_S3TC_DXT5_Format:()=>qe,RGBFormat:()=>Oe,RGB_ETC1_Format:()=>$e,RGB_ETC2_Format:()=>Qe,RGB_PVRTC_2BPPV1_Format:()=>Xe,RGB_PVRTC_4BPPV1_Format:()=>Ke,RGB_S3TC_DXT1_Format:()=>He,RGFormat:()=>Ve,RGIntegerFormat:()=>Ge,RawShaderMaterial:()=>Gu,Ray:()=>Ir,Raycaster:()=>jd,RectAreaLight:()=>qh,RedFormat:()=>Ue,RedIntegerFormat:()=>Be,ReinhardToneMapping:()=>$,RepeatWrapping:()=>le,ReplaceStencilOp:()=>Vt,ReverseSubtractEquation:()=>E,RingBufferGeometry:()=>$p,RingGeometry:()=>Ru,SRGBColorSpace:()=>Ft,Scene:()=>ll,ShaderChunk:()=>ks,ShaderLib:()=>Rs,ShaderMaterial:()=>ds,ShadowMaterial:()=>Vu,Shape:()=>$c,ShapeBufferGeometry:()=>Qp,ShapeGeometry:()=>Lu,ShapePath:()=>Lp,ShapeUtils:()=>Tu,ShortType:()=>Se,Skeleton:()=>Vl,SkeletonHelper:()=>op,SkinnedMesh:()=>Dl,Source:()=>Kn,Sphere:()=>Ar,SphereBufferGeometry:()=>ef,SphereGeometry:()=>Ou,Spherical:()=>Kd,SphericalHarmonics3:()=>Kh,SplineCurve:()=>Dc,SpotLight:()=>zh,SpotLightHelper:()=>np,Sprite:()=>Ml,SpriteMaterial:()=>dl,SrcAlphaFactor:()=>L,SrcAlphaSaturateFactor:()=>z,SrcColorFactor:()=>P,StaticCopyUsage:()=>ln,StaticDrawUsage:()=>tn,StaticReadUsage:()=>sn,StereoCamera:()=>pd,StreamCopyUsage:()=>un,StreamDrawUsage:()=>rn,StreamReadUsage:()=>an,StringKeyframeTrack:()=>fh,SubtractEquation:()=>T,SubtractiveBlending:()=>_,TOUCH:()=>s,TangentSpaceNormalMap:()=>Nt,TetrahedronBufferGeometry:()=>tf,TetrahedronGeometry:()=>Nu,Texture:()=>Jn,TextureLoader:()=>Ph,TorusBufferGeometry:()=>nf,TorusGeometry:()=>Iu,TorusKnotBufferGeometry:()=>rf,TorusKnotGeometry:()=>Du,Triangle:()=>yi,TriangleFanDrawMode:()=>kt,TriangleStripDrawMode:()=>Ct,TrianglesDrawMode:()=>At,TubeBufferGeometry:()=>sf,TubeGeometry:()=>Fu,UVMapping:()=>ne,Uint16BufferAttribute:()=>ki,Uint32BufferAttribute:()=>Ri,Uint8BufferAttribute:()=>Mi,Uint8ClampedBufferAttribute:()=>Ai,Uniform:()=>Bd,UniformsGroup:()=>Gd,UniformsLib:()=>Ps,UniformsUtils:()=>hs,UnsignedByteType:()=>xe,UnsignedInt248Type:()=>Re,UnsignedIntType:()=>Me,UnsignedShort4444Type:()=>ke,UnsignedShort5551Type:()=>Pe,UnsignedShortType:()=>Te,VSMShadowMap:()=>p,Vector2:()=>kn,Vector3:()=>or,Vector4:()=>$n,VectorKeyframeTrack:()=>mh,VideoTexture:()=>pc,WebGL1Renderer:()=>sl,WebGL3DRenderTarget:()=>rr,WebGLArrayRenderTarget:()=>tr,WebGLCubeRenderTarget:()=>ys,WebGLMultipleRenderTargets:()=>ir,WebGLMultisampleRenderTarget:()=>Fp,WebGLRenderTarget:()=>Qn,WebGLRenderer:()=>il,WebGLUtils:()=>Xa,WireframeGeometry:()=>zu,WrapAroundEnding:()=>Tt,ZeroCurvatureEnding:()=>wt,ZeroFactor:()=>C,ZeroSlopeEnding:()=>St,ZeroStencilOp:()=>Ut,_SRGBAFormat:()=>pn,sRGBEncoding:()=>Rt});const r="146",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,a=1,l=2,c=3,u=0,h=1,d=2,p=3,f=0,m=1,g=2,v=0,y=1,b=2,_=3,x=4,w=5,S=100,T=101,E=102,M=103,A=104,C=200,k=201,P=202,R=203,L=204,O=205,N=206,I=207,D=208,F=209,z=210,U=0,B=1,V=2,G=3,Z=4,H=5,j=6,W=7,q=0,K=1,X=2,Y=0,J=1,$=2,Q=3,ee=4,te=5,ne=300,re=301,ie=302,se=303,oe=304,ae=306,le=1e3,ce=1001,ue=1002,he=1003,de=1004,pe=1004,fe=1005,me=1005,ge=1006,ve=1007,ye=1007,be=1008,_e=1008,xe=1009,we=1010,Se=1011,Te=1012,Ee=1013,Me=1014,Ae=1015,Ce=1016,ke=1017,Pe=1018,Re=1020,Le=1021,Oe=1022,Ne=1023,Ie=1024,De=1025,Fe=1026,ze=1027,Ue=1028,Be=1029,Ve=1030,Ge=1031,Ze=1033,He=33776,je=33777,We=33778,qe=33779,Ke=35840,Xe=35841,Ye=35842,Je=35843,$e=36196,Qe=37492,et=37496,tt=37808,nt=37809,rt=37810,it=37811,st=37812,ot=37813,at=37814,lt=37815,ct=37816,ut=37817,ht=37818,dt=37819,pt=37820,ft=37821,mt=36492,gt=2200,vt=2201,yt=2202,bt=2300,_t=2301,xt=2302,wt=2400,St=2401,Tt=2402,Et=2500,Mt=2501,At=0,Ct=1,kt=2,Pt=3e3,Rt=3001,Lt=3200,Ot=3201,Nt=0,It=1,Dt="",Ft="srgb",zt="srgb-linear",Ut=0,Bt=7680,Vt=7681,Gt=7682,Zt=7683,Ht=34055,jt=34056,Wt=5386,qt=512,Kt=513,Xt=514,Yt=515,Jt=516,$t=517,Qt=518,en=519,tn=35044,nn=35048,rn=35040,sn=35045,on=35049,an=35041,ln=35046,cn=35050,un=35042,hn="100",dn="300 es",pn=1035;class fn{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const mn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let gn=1234567;const vn=Math.PI/180,yn=180/Math.PI;function bn(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(mn[255&e]+mn[e>>8&255]+mn[e>>16&255]+mn[e>>24&255]+"-"+mn[255&t]+mn[t>>8&255]+"-"+mn[t>>16&15|64]+mn[t>>24&255]+"-"+mn[63&n|128]+mn[n>>8&255]+"-"+mn[n>>16&255]+mn[n>>24&255]+mn[255&r]+mn[r>>8&255]+mn[r>>16&255]+mn[r>>24&255]).toLowerCase()}function _n(e,t,n){return Math.max(t,Math.min(n,e))}function xn(e,t){return(e%t+t)%t}function wn(e,t,n){return(1-n)*e+n*t}function Sn(e){return 0==(e&e-1)&&0!==e}function Tn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function En(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Mn(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function An(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var Cn=Object.freeze({__proto__:null,DEG2RAD:vn,RAD2DEG:yn,generateUUID:bn,clamp:_n,euclideanModulo:xn,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:wn,damp:function(e,t,n,r){return wn(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(xn(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(gn=e);let t=gn+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*vn},radToDeg:function(e){return e*yn},isPowerOfTwo:Sn,ceilPowerOfTwo:Tn,floorPowerOfTwo:En,setQuaternionFromProperEuler:function(e,t,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),c=s((t+r)/2),u=o((t+r)/2),h=s((t-r)/2),d=o((t-r)/2),p=s((r-t)/2),f=o((r-t)/2);switch(i){case"XYX":e.set(a*u,l*h,l*d,a*c);break;case"YZY":e.set(l*d,a*u,l*h,a*c);break;case"ZXZ":e.set(l*h,l*d,a*u,a*c);break;case"XZX":e.set(a*u,l*f,l*p,a*c);break;case"YXY":e.set(l*p,a*u,l*f,a*c);break;case"ZYZ":e.set(l*f,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:An,denormalize:Mn});class kn{constructor(e=0,t=0){kn.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pn{constructor(){Pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,s,o,a,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=s*f+o*v+a*_,i[3]=s*m+o*y+a*x,i[6]=s*g+o*b+a*w,i[1]=l*f+c*v+u*_,i[4]=l*m+c*y+u*x,i[7]=l*g+c*b+u*w,i[2]=h*f+d*v+p*_,i[5]=h*m+d*y+p*x,i[8]=h*g+d*b+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*s*c-t*o*l-n*i*c+n*o*a+r*i*l-r*s*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=c*s-o*l,h=o*a-c*i,d=l*i-s*a,p=t*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(o*n-r*s)*f,e[3]=h*f,e[4]=(c*t-r*a)*f,e[5]=(r*i-o*t)*f,e[6]=d*f,e[7]=(n*a-l*t)*f,e[8]=(s*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,o){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*s+l*o)+s+e,-r*l,r*a,-r*(-l*s+a*o)+o+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],s=r[3],o=r[6],a=r[1],l=r[4],c=r[7];return r[0]=t*i+n*a,r[3]=t*s+n*l,r[6]=t*o+n*c,r[1]=-n*i+t*a,r[4]=-n*s+t*l,r[7]=-n*o+t*c,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Rn(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Ln={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function On(e,t){return new Ln[e](t)}function Nn(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function In(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Dn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const Fn={[Ft]:{[zt]:In},[zt]:{[Ft]:Dn}},zn={legacyMode:!0,get workingColorSpace(){return zt},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(Fn[t]&&void 0!==Fn[t][n]){const r=Fn[t][n];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Un={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bn={r:0,g:0,b:0},Vn={h:0,s:0,l:0},Gn={h:0,s:0,l:0};function Zn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Hn(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}class jn{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ft){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,zn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=zt){return this.r=e,this.g=t,this.b=n,zn.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=zt){if(e=xn(e,1),t=_n(t,0,1),n=_n(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Zn(i,r,e+1/3),this.g=Zn(i,r,e),this.b=Zn(i,r,e-1/3)}return zn.toWorkingColorSpace(this,r),this}setStyle(e,t=Ft){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const i=r[1],s=r[2];switch(i){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,zn.toWorkingColorSpace(this,t),n(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,zn.toWorkingColorSpace(this,t),n(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const r=parseFloat(e[1])/360,i=parseFloat(e[2])/100,s=parseFloat(e[3])/100;return n(e[4]),this.setHSL(r,i,s,t)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=r[1],n=e.length;if(3===n)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,zn.toWorkingColorSpace(this,t),this;if(6===n)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,zn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ft){const n=Un[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=In(e.r),this.g=In(e.g),this.b=In(e.b),this}copyLinearToSRGB(e){return this.r=Dn(e.r),this.g=Dn(e.g),this.b=Dn(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ft){return zn.fromWorkingColorSpace(Hn(this,Bn),e),_n(255*Bn.r,0,255)<<16^_n(255*Bn.g,0,255)<<8^_n(255*Bn.b,0,255)<<0}getHexString(e=Ft){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=zt){zn.fromWorkingColorSpace(Hn(this,Bn),t);const n=Bn.r,r=Bn.g,i=Bn.b,s=Math.max(n,r,i),o=Math.min(n,r,i);let a,l;const c=(o+s)/2;if(o===s)a=0,l=0;else{const e=s-o;switch(l=c<=.5?e/(s+o):e/(2-s-o),s){case n:a=(r-i)/e+(r<i?6:0);break;case r:a=(i-n)/e+2;break;case i:a=(n-r)/e+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=zt){return zn.fromWorkingColorSpace(Hn(this,Bn),t),e.r=Bn.r,e.g=Bn.g,e.b=Bn.b,e}getStyle(e=Ft){return zn.fromWorkingColorSpace(Hn(this,Bn),e),e!==Ft?`color(${e} ${Bn.r} ${Bn.g} ${Bn.b})`:`rgb(${255*Bn.r|0},${255*Bn.g|0},${255*Bn.b|0})`}offsetHSL(e,t,n){return this.getHSL(Vn),Vn.h+=e,Vn.s+=t,Vn.l+=n,this.setHSL(Vn.h,Vn.s,Vn.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Vn),e.getHSL(Gn);const n=wn(Vn.h,Gn.h,t),r=wn(Vn.s,Gn.s,t),i=wn(Vn.l,Gn.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let Wn;jn.NAMES=Un;class qn{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Wn&&(Wn=Nn("canvas")),Wn.width=e.width,Wn.height=e.height;const n=Wn.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Wn}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Nn("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*In(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*In(t[e]/255)):t[e]=In(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Kn{constructor(e=null){this.isSource=!0,this.uuid=bn(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Xn(r[t].image)):e.push(Xn(r[t]))}else e=Xn(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Xn(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?qn.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Yn=0;class Jn extends fn{constructor(e=Jn.DEFAULT_IMAGE,t=Jn.DEFAULT_MAPPING,n=ce,r=ce,i=ge,s=be,o=Ne,a=xe,l=1,c=Pt){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Yn++}),this.uuid=bn(),this.name="",this.source=new Kn(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new kn(0,0),this.repeat=new kn(1,1),this.center=new kn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ne)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case le:e.x=e.x-Math.floor(e.x);break;case ce:e.x=e.x<0?0:1;break;case ue:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case le:e.y=e.y-Math.floor(e.y);break;case ce:e.y=e.y<0?0:1;break;case ue:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}Jn.DEFAULT_IMAGE=null,Jn.DEFAULT_MAPPING=ne;class $n{constructor(e=0,t=0,n=0,r=1){$n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=.01,o=.1,a=e.elements,l=a[0],c=a[4],u=a[8],h=a[1],d=a[5],p=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(c-h)<s&&Math.abs(u-f)<s&&Math.abs(p-m)<s){if(Math.abs(c+h)<o&&Math.abs(u+f)<o&&Math.abs(p+m)<o&&Math.abs(l+d+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(d+1)/2,v=(g+1)/2,y=(c+h)/4,b=(u+f)/4,_=(p+m)/4;return e>a&&e>v?e<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):a>v?a<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=y/r,i=_/r):v<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=_/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Qn extends fn{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new $n(0,0,e,t),this.scissorTest=!1,this.viewport=new $n(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Jn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ge,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Kn(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class er extends Jn{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=he,this.minFilter=he,this.wrapR=ce,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tr extends Qn{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new er(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class nr extends Jn{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=he,this.minFilter=he,this.wrapR=ce,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rr extends Qn{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new nr(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class ir extends Qn{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const i=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=i.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class sr{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,s,o){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[s+0],d=i[s+1],p=i[s+2],f=i[s+3];if(0===o)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||a!==h||l!==d||c!==p){let e=1-o;const t=a*h+l*d+c*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,o=Math.sin(o*s)/i}const i=o*n;if(a=a*e+h*i,l=l*e+d*i,c=c*e+p*i,u=u*e+f*i,e===1-o){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,s){const o=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[s],h=i[s+1],d=i[s+2],p=i[s+3];return e[t]=o*p+c*u+a*d-l*h,e[t+1]=a*p+c*h+l*u-o*d,e[t+2]=l*p+c*d+o*h-a*u,e[t+3]=c*p-o*u-a*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,s=e._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),h=a(n/2),d=a(r/2),p=a(i/2);switch(s){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],a=t[9],l=t[2],c=t[6],u=t[10],h=n+o+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-a)*e,this._y=(i-l)*e,this._z=(s-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(c-a)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+l)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(s-r)/e,this._x=(i+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_n(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,o=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+s*o+r*l-i*a,this._y=r*c+s*a+i*o-n*l,this._z=i*c+s*l+n*a-r*o,this._w=s*c-n*o-r*a-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let o=s*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const a=1-o*o;if(a<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,o),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class or{constructor(e=0,t=0,n=0){or.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(lr.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(lr.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z,a=e.w,l=a*t+s*r-o*n,c=a*n+o*t-i*r,u=a*r+i*n-s*t,h=-i*t-s*n-o*r;return this.x=l*a+h*-i+c*-o-u*-s,this.y=c*a+h*-s+u*-i-l*-o,this.z=u*a+h*-o+l*-s-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,a=t.z;return this.x=r*a-i*o,this.y=i*s-n*a,this.z=n*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ar.copy(this).projectOnVector(e),this.sub(ar)}reflect(e){return this.sub(ar.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(_n(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ar=new or,lr=new sr;class cr{constructor(e=new or(1/0,1/0,1/0),t=new or(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.length;a<l;a+=3){const l=e[a],c=e[a+1],u=e[a+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>s&&(s=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,s,o),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,o=-1/0;for(let a=0,l=e.count;a<l;a++){const l=e.getX(a),c=e.getY(a),u=e.getZ(a);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>i&&(i=l),c>s&&(s=c),u>o&&(o=u)}return this.min.set(t,n,r),this.max.set(i,s,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=hr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&null!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)hr.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(hr)}else null===n.boundingBox&&n.computeBoundingBox(),dr.copy(n.boundingBox),dr.applyMatrix4(e.matrixWorld),this.union(dr);const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hr),hr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(br),_r.subVectors(this.max,br),pr.subVectors(e.a,br),fr.subVectors(e.b,br),mr.subVectors(e.c,br),gr.subVectors(fr,pr),vr.subVectors(mr,fr),yr.subVectors(pr,mr);let t=[0,-gr.z,gr.y,0,-vr.z,vr.y,0,-yr.z,yr.y,gr.z,0,-gr.x,vr.z,0,-vr.x,yr.z,0,-yr.x,-gr.y,gr.x,0,-vr.y,vr.x,0,-yr.y,yr.x,0];return!!Sr(t,pr,fr,mr,_r)&&(t=[1,0,0,0,1,0,0,0,1],!!Sr(t,pr,fr,mr,_r)&&(xr.crossVectors(gr,vr),t=[xr.x,xr.y,xr.z],Sr(t,pr,fr,mr,_r)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return hr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(hr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ur[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ur[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ur[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ur[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ur[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ur[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ur[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ur[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ur)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ur=[new or,new or,new or,new or,new or,new or,new or,new or],hr=new or,dr=new cr,pr=new or,fr=new or,mr=new or,gr=new or,vr=new or,yr=new or,br=new or,_r=new or,xr=new or,wr=new or;function Sr(e,t,n,r,i){for(let s=0,o=e.length-3;s<=o;s+=3){wr.fromArray(e,s);const o=i.x*Math.abs(wr.x)+i.y*Math.abs(wr.y)+i.z*Math.abs(wr.z),a=t.dot(wr),l=n.dot(wr),c=r.dot(wr);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>o)return!1}return!0}const Tr=new cr,Er=new or,Mr=new or;class Ar{constructor(e=new or,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Tr.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Er.subVectors(e,this.center);const t=Er.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Er,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Mr.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Er.copy(e.center).add(Mr)),this.expandByPoint(Er.copy(e.center).sub(Mr))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Cr=new or,kr=new or,Pr=new or,Rr=new or,Lr=new or,Or=new or,Nr=new or;class Ir{constructor(e=new or,t=new or(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Cr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Cr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Cr.copy(this.direction).multiplyScalar(t).add(this.origin),Cr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){kr.copy(e).add(t).multiplyScalar(.5),Pr.copy(t).sub(e).normalize(),Rr.copy(this.origin).sub(kr);const i=.5*e.distanceTo(t),s=-this.direction.dot(Pr),o=Rr.dot(this.direction),a=-Rr.dot(Pr),l=Rr.lengthSq(),c=Math.abs(1-s*s);let u,h,d,p;if(c>0)if(u=s*a-o,h=s*o-a,p=i*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+s*h+2*o)+h*(s*u+h+2*a)+l}else h=i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+l;else h=-i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+l;else h<=-p?(u=Math.max(0,-(-s*i+o)),h=u>0?-i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l):h<=p?(u=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+l):(u=Math.max(0,-(s*i+o)),h=u>0?i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l);else h=s>0?-i:i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(Pr).multiplyScalar(h).add(kr),d}intersectSphere(e,t){Cr.subVectors(e.center,this.origin);const n=Cr.dot(this.direction),r=Cr.dot(Cr)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),o=n-s,a=n+s;return o<0&&a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,o,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,s=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,s=(e.min.y-h.y)*c),n>s||i>r?null:((i>n||isNaN(n))&&(n=i),(s<r||isNaN(r))&&(r=s),u>=0?(o=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),n>a||o>r?null:((o>n||n!=n)&&(n=o),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Cr)}intersectTriangle(e,t,n,r,i){Lr.subVectors(t,e),Or.subVectors(n,e),Nr.crossVectors(Lr,Or);let s,o=this.direction.dot(Nr);if(o>0){if(r)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}Rr.subVectors(this.origin,e);const a=s*this.direction.dot(Or.crossVectors(Rr,Or));if(a<0)return null;const l=s*this.direction.dot(Lr.cross(Rr));if(l<0)return null;if(a+l>o)return null;const c=-s*Rr.dot(Nr);return c<0?null:this.at(c/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Dr{constructor(){Dr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,s,o,a,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Dr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Fr.setFromMatrixColumn(e,0).length(),i=1/Fr.setFromMatrixColumn(e,1).length(),s=1/Fr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=s*c,n=s*u,r=o*c,i=o*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*a,t[2]=i-e*l,t[6]=r+n*l,t[10]=s*a}else if("YXZ"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=s*a}else if("ZXY"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e-i*o,t[4]=-s*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=s*c,t[9]=i-e*o,t[2]=-s*l,t[6]=o,t[10]=s*a}else if("ZYX"===e.order){const e=s*c,n=s*u,r=o*c,i=o*u;t[0]=a*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=a*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*a,t[10]=s*a}else if("YZX"===e.order){const e=s*a,n=s*l,r=o*a,i=o*l;t[0]=a*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=s*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=s*a,n=s*l,r=o*a,i=o*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=s*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Ur,e,Br)}lookAt(e,t,n){const r=this.elements;return Zr.subVectors(e,t),0===Zr.lengthSq()&&(Zr.z=1),Zr.normalize(),Vr.crossVectors(n,Zr),0===Vr.lengthSq()&&(1===Math.abs(n.z)?Zr.x+=1e-4:Zr.z+=1e-4,Zr.normalize(),Vr.crossVectors(n,Zr)),Vr.normalize(),Gr.crossVectors(Zr,Vr),r[0]=Vr.x,r[4]=Gr.x,r[8]=Zr.x,r[1]=Vr.y,r[5]=Gr.y,r[9]=Zr.y,r[2]=Vr.z,r[6]=Gr.z,r[10]=Zr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],S=r[8],T=r[12],E=r[1],M=r[5],A=r[9],C=r[13],k=r[2],P=r[6],R=r[10],L=r[14],O=r[3],N=r[7],I=r[11],D=r[15];return i[0]=s*x+o*E+a*k+l*O,i[4]=s*w+o*M+a*P+l*N,i[8]=s*S+o*A+a*R+l*I,i[12]=s*T+o*C+a*L+l*D,i[1]=c*x+u*E+h*k+d*O,i[5]=c*w+u*M+h*P+d*N,i[9]=c*S+u*A+h*R+d*I,i[13]=c*T+u*C+h*L+d*D,i[2]=p*x+f*E+m*k+g*O,i[6]=p*w+f*M+m*P+g*N,i[10]=p*S+f*A+m*R+g*I,i[14]=p*T+f*C+m*L+g*D,i[3]=v*x+y*E+b*k+_*O,i[7]=v*w+y*M+b*P+_*N,i[11]=v*S+y*A+b*R+_*I,i[15]=v*T+y*C+b*L+_*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],a=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*a*u-r*l*u-i*o*h+n*l*h+r*o*d-n*a*d)+e[7]*(+t*a*d-t*l*h+i*s*h-r*s*d+r*l*c-i*a*c)+e[11]*(+t*l*u-t*o*d-i*s*u+n*s*d+i*o*c-n*l*c)+e[15]*(-r*o*c-t*a*u+t*o*h+r*s*u-n*s*h+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*h*l+f*a*d-o*m*d-u*a*g+o*h*g,y=p*h*l-c*m*l-p*a*d+s*m*d+c*a*g-s*h*g,b=c*f*l-p*u*l+p*o*d-s*f*d-c*o*g+s*u*g,_=p*u*a-c*f*a-p*o*h+s*f*h+c*o*m-s*u*m,x=t*v+n*y+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=v*w,e[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*w,e[2]=(o*m*i-f*a*i+f*r*l-n*m*l-o*r*g+n*a*g)*w,e[3]=(u*a*i-o*h*i-u*r*l+n*h*l+o*r*d-n*a*d)*w,e[4]=y*w,e[5]=(c*m*i-p*h*i+p*r*d-t*m*d-c*r*g+t*h*g)*w,e[6]=(p*a*i-s*m*i-p*r*l+t*m*l+s*r*g-t*a*g)*w,e[7]=(s*h*i-c*a*i+c*r*l-t*h*l-s*r*d+t*a*d)*w,e[8]=b*w,e[9]=(p*u*i-c*f*i-p*n*d+t*f*d+c*n*g-t*u*g)*w,e[10]=(s*f*i-p*o*i+p*n*l-t*f*l-s*n*g+t*o*g)*w,e[11]=(c*o*i-s*u*i-c*n*l+t*u*l+s*n*d-t*o*d)*w,e[12]=_*w,e[13]=(c*f*r-p*u*r+p*n*h-t*f*h-c*n*m+t*u*m)*w,e[14]=(p*o*r-s*f*r-p*n*a+t*f*a+s*n*m-t*o*m)*w,e[15]=(s*u*r-c*o*r+c*n*a-t*u*a-s*n*h+t*o*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,a=e.z,l=i*s,c=i*o;return this.set(l*s+n,l*o-r*a,l*a+r*o,0,l*o+r*a,c*o+n,c*a-r*s,0,l*a-r*o,c*a+r*s,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,o=t._z,a=t._w,l=i+i,c=s+s,u=o+o,h=i*l,d=i*c,p=i*u,f=s*c,m=s*u,g=o*u,v=a*l,y=a*c,b=a*u,_=n.x,x=n.y,w=n.z;return r[0]=(1-(f+g))*_,r[1]=(d+b)*_,r[2]=(p-y)*_,r[3]=0,r[4]=(d-b)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(p+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Fr.set(r[0],r[1],r[2]).length();const s=Fr.set(r[4],r[5],r[6]).length(),o=Fr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],zr.copy(this);const a=1/i,l=1/s,c=1/o;return zr.elements[0]*=a,zr.elements[1]*=a,zr.elements[2]*=a,zr.elements[4]*=l,zr.elements[5]*=l,zr.elements[6]*=l,zr.elements[8]*=c,zr.elements[9]*=c,zr.elements[10]*=c,t.setFromRotationMatrix(zr),n.x=i,n.y=s,n.z=o,this}makePerspective(e,t,n,r,i,s){const o=this.elements,a=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(s+i)/(s-i),d=-2*s*i/(s-i);return o[0]=a,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=l,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,n,r,i,s){const o=this.elements,a=1/(t-e),l=1/(n-r),c=1/(s-i),u=(t+e)*a,h=(n+r)*l,d=(s+i)*c;return o[0]=2*a,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Fr=new or,zr=new Dr,Ur=new or(0,0,0),Br=new or(1,1,1),Vr=new or,Gr=new or,Zr=new or,Hr=new Dr,jr=new sr;class Wr{constructor(e=0,t=0,n=0,r=Wr.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],o=r[8],a=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(_n(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-_n(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(_n(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-_n(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(_n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-_n(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Hr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Hr,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return jr.setFromEuler(this),this.setFromQuaternion(jr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}Wr.DefaultOrder="XYZ",Wr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class qr{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Kr=0;const Xr=new or,Yr=new sr,Jr=new Dr,$r=new or,Qr=new or,ei=new or,ti=new sr,ni=new or(1,0,0),ri=new or(0,1,0),ii=new or(0,0,1),si={type:"added"},oi={type:"removed"};class ai extends fn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Kr++}),this.uuid=bn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ai.DefaultUp.clone();const e=new or,t=new Wr,n=new sr,r=new or(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Dr},normalMatrix:{value:new Pn}}),this.matrix=new Dr,this.matrixWorld=new Dr,this.matrixAutoUpdate=ai.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ai.DefaultMatrixWorldAutoUpdate,this.layers=new qr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Yr.setFromAxisAngle(e,t),this.quaternion.multiply(Yr),this}rotateOnWorldAxis(e,t){return Yr.setFromAxisAngle(e,t),this.quaternion.premultiply(Yr),this}rotateX(e){return this.rotateOnAxis(ni,e)}rotateY(e){return this.rotateOnAxis(ri,e)}rotateZ(e){return this.rotateOnAxis(ii,e)}translateOnAxis(e,t){return Xr.copy(e).applyQuaternion(this.quaternion),this.position.add(Xr.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ni,e)}translateY(e){return this.translateOnAxis(ri,e)}translateZ(e){return this.translateOnAxis(ii,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Jr.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?$r.copy(e):$r.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Qr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Jr.lookAt(Qr,$r,this.up):Jr.lookAt($r,Qr,this.up),this.quaternion.setFromRotationMatrix(Jr),r&&(Jr.extractRotation(r.matrixWorld),Yr.setFromRotationMatrix(Jr),this.quaternion.premultiply(Yr.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(si)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(oi)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(oi)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Jr.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Jr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Jr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qr,e,ei),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qr,ti,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),o=s(e.images),a=s(e.shapes),l=s(e.skeletons),c=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}ai.DefaultUp=new or(0,1,0),ai.DefaultMatrixAutoUpdate=!0,ai.DefaultMatrixWorldAutoUpdate=!0;const li=new or,ci=new or,ui=new or,hi=new or,di=new or,pi=new or,fi=new or,mi=new or,gi=new or,vi=new or;class yi{constructor(e=new or,t=new or,n=new or){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),li.subVectors(e,t),r.cross(li);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){li.subVectors(r,t),ci.subVectors(n,t),ui.subVectors(e,t);const s=li.dot(li),o=li.dot(ci),a=li.dot(ui),l=ci.dot(ci),c=ci.dot(ui),u=s*l-o*o;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*a-o*c)*h,p=(s*c-o*a)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,hi),hi.x>=0&&hi.y>=0&&hi.x+hi.y<=1}static getUV(e,t,n,r,i,s,o,a){return this.getBarycoord(e,t,n,r,hi),a.set(0,0),a.addScaledVector(i,hi.x),a.addScaledVector(s,hi.y),a.addScaledVector(o,hi.z),a}static isFrontFacing(e,t,n,r){return li.subVectors(n,t),ci.subVectors(e,t),li.cross(ci).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return li.subVectors(this.c,this.b),ci.subVectors(this.a,this.b),.5*li.cross(ci).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return yi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return yi.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return yi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,o;di.subVectors(r,n),pi.subVectors(i,n),mi.subVectors(e,n);const a=di.dot(mi),l=pi.dot(mi);if(a<=0&&l<=0)return t.copy(n);gi.subVectors(e,r);const c=di.dot(gi),u=pi.dot(gi);if(c>=0&&u<=c)return t.copy(r);const h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return s=a/(a-c),t.copy(n).addScaledVector(di,s);vi.subVectors(e,i);const d=di.dot(vi),p=pi.dot(vi);if(p>=0&&d<=p)return t.copy(i);const f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return o=l/(l-p),t.copy(n).addScaledVector(pi,o);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return fi.subVectors(i,r),o=(u-c)/(u-c+(d-p)),t.copy(r).addScaledVector(fi,o);const g=1/(m+f+h);return s=f*g,o=h*g,t.copy(n).addScaledVector(di,s).addScaledVector(pi,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let bi=0;class _i extends fn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bi++}),this.uuid=bn(),this.name="",this.type="Material",this.blending=y,this.side=f,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=L,this.blendDst=O,this.blendEquation=S,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=G,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=en,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bt,this.stencilZFail=Bt,this.stencilZPass=Bt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==y&&(n.blending=this.blending),this.side!==f&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class xi extends _i{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new jn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wi=new or,Si=new kn;class Ti{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=tn,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Si.fromBufferAttribute(this,t),Si.applyMatrix3(e),this.setXY(t,Si.x,Si.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)wi.fromBufferAttribute(this,t),wi.applyMatrix3(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)wi.fromBufferAttribute(this,t),wi.applyMatrix4(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)wi.fromBufferAttribute(this,t),wi.applyNormalMatrix(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)wi.fromBufferAttribute(this,t),wi.transformDirection(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Mn(t,this.array)),t}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Mn(t,this.array)),t}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Mn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Mn(t,this.array)),t}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),n=An(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),n=An(n,this.array),r=An(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=An(t,this.array),n=An(n,this.array),r=An(r,this.array),i=An(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==tn&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Ei extends Ti{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Mi extends Ti{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Ai extends Ti{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Ci extends Ti{constructor(e,t,n){super(new Int16Array(e),t,n)}}class ki extends Ti{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Pi extends Ti{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Ri extends Ti{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Li extends Ti{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class Oi extends Ti{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Ni extends Ti{constructor(e,t,n){super(new Float64Array(e),t,n)}}let Ii=0;const Di=new Dr,Fi=new ai,zi=new or,Ui=new cr,Bi=new cr,Vi=new or;class Gi extends fn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ii++}),this.uuid=bn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Rn(e)?Ri:ki)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Pn).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Di.makeRotationFromQuaternion(e),this.applyMatrix4(Di),this}rotateX(e){return Di.makeRotationX(e),this.applyMatrix4(Di),this}rotateY(e){return Di.makeRotationY(e),this.applyMatrix4(Di),this}rotateZ(e){return Di.makeRotationZ(e),this.applyMatrix4(Di),this}translate(e,t,n){return Di.makeTranslation(e,t,n),this.applyMatrix4(Di),this}scale(e,t,n){return Di.makeScale(e,t,n),this.applyMatrix4(Di),this}lookAt(e){return Fi.lookAt(e),Fi.updateMatrix(),this.applyMatrix4(Fi.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zi).negate(),this.translate(zi.x,zi.y,zi.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Oi(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new or(-1/0,-1/0,-1/0),new or(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Ui.setFromBufferAttribute(n),this.morphTargetsRelative?(Vi.addVectors(this.boundingBox.min,Ui.min),this.boundingBox.expandByPoint(Vi),Vi.addVectors(this.boundingBox.max,Ui.max),this.boundingBox.expandByPoint(Vi)):(this.boundingBox.expandByPoint(Ui.min),this.boundingBox.expandByPoint(Ui.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ar);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new or,1/0);if(e){const n=this.boundingSphere.center;if(Ui.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Bi.setFromBufferAttribute(n),this.morphTargetsRelative?(Vi.addVectors(Ui.min,Bi.min),Ui.expandByPoint(Vi),Vi.addVectors(Ui.max,Bi.max),Ui.expandByPoint(Vi)):(Ui.expandByPoint(Bi.min),Ui.expandByPoint(Bi.max))}Ui.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Vi.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Vi));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],o=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)Vi.fromBufferAttribute(s,t),o&&(zi.fromBufferAttribute(e,t),Vi.add(zi)),r=Math.max(r,n.distanceToSquared(Vi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ti(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<o;e++)l[e]=new or,c[e]=new or;const u=new or,h=new or,d=new or,p=new kn,f=new kn,m=new kn,g=new or,v=new or;function y(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(s,2*e),f.fromArray(s,2*t),m.fromArray(s,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),v.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const _=new or,x=new or,w=new or,S=new or;function T(e){w.fromArray(i,3*e),S.copy(w);const t=l[e];_.copy(t),_.sub(w.multiplyScalar(w.dot(t))).normalize(),x.crossVectors(S,t);const n=x.dot(c[e])<0?-1:1;a[4*e]=_.x,a[4*e+1]=_.y,a[4*e+2]=_.z,a[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)T(n[e+0]),T(n[e+1]),T(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Ti(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new or,i=new or,s=new or,o=new or,a=new or,l=new or,c=new or,u=new or;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),c.subVectors(s,i),u.subVectors(r,i),c.cross(u),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),o.add(c),a.add(c),l.add(c),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Vi.fromBufferAttribute(e,t),Vi.normalize(),e.setXYZ(t,Vi.x,Vi.y,Vi.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let o=0,a=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)s[a++]=n[o++]}return new Ti(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Gi,n=this.index.array,r=this.attributes;for(const i in r){const s=e(r[i],n);t.setAttribute(i,s)}const i=this.morphAttributes;for(const r in i){const s=[],o=i[r];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);s.push(r)}t.morphAttributes[r]=s}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let e=0,n=s.length;e<n;e++){const n=s[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],s=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];s.push(r.toJSON(e.data))}s.length>0&&(r[t]=s,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let e=0,t=s.length;e<t;e++){const t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const Zi=new Dr,Hi=new Ir,ji=new Ar,Wi=new or,qi=new or,Ki=new or,Xi=new or,Yi=new or,Ji=new or,$i=new or,Qi=new or,es=new or,ts=new kn,ns=new kn,rs=new kn,is=new or,ss=new or;class os extends ai{constructor(e=new Gi,t=new xi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),ji.copy(n.boundingSphere),ji.applyMatrix4(i),!1===e.ray.intersectsSphere(ji))return;if(Zi.copy(i).invert(),Hi.copy(e.ray).applyMatrix4(Zi),null!==n.boundingBox&&!1===Hi.intersectsBox(n.boundingBox))return;let s;const o=n.index,a=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,h=n.attributes.uv2,d=n.groups,p=n.drawRange;if(null!==o)if(Array.isArray(r))for(let n=0,i=d.length;n<i;n++){const i=d[n],f=r[i.materialIndex];for(let n=Math.max(i.start,p.start),r=Math.min(o.count,Math.min(i.start+i.count,p.start+p.count));n<r;n+=3){const r=o.getX(n),d=o.getX(n+1),p=o.getX(n+2);s=as(this,f,e,Hi,a,l,c,u,h,r,d,p),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=i.materialIndex,t.push(s))}}else{for(let n=Math.max(0,p.start),i=Math.min(o.count,p.start+p.count);n<i;n+=3){const i=o.getX(n),d=o.getX(n+1),p=o.getX(n+2);s=as(this,r,e,Hi,a,l,c,u,h,i,d,p),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,i=d.length;n<i;n++){const i=d[n],o=r[i.materialIndex];for(let n=Math.max(i.start,p.start),r=Math.min(a.count,Math.min(i.start+i.count,p.start+p.count));n<r;n+=3){s=as(this,o,e,Hi,a,l,c,u,h,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=i.materialIndex,t.push(s))}}else{for(let n=Math.max(0,p.start),i=Math.min(a.count,p.start+p.count);n<i;n+=3){s=as(this,r,e,Hi,a,l,c,u,h,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}}}function as(e,t,n,r,i,s,o,a,l,c,u,h){Wi.fromBufferAttribute(i,c),qi.fromBufferAttribute(i,u),Ki.fromBufferAttribute(i,h);const d=e.morphTargetInfluences;if(s&&d){$i.set(0,0,0),Qi.set(0,0,0),es.set(0,0,0);for(let e=0,t=s.length;e<t;e++){const t=d[e],n=s[e];0!==t&&(Xi.fromBufferAttribute(n,c),Yi.fromBufferAttribute(n,u),Ji.fromBufferAttribute(n,h),o?($i.addScaledVector(Xi,t),Qi.addScaledVector(Yi,t),es.addScaledVector(Ji,t)):($i.addScaledVector(Xi.sub(Wi),t),Qi.addScaledVector(Yi.sub(qi),t),es.addScaledVector(Ji.sub(Ki),t)))}Wi.add($i),qi.add(Qi),Ki.add(es)}e.isSkinnedMesh&&(e.boneTransform(c,Wi),e.boneTransform(u,qi),e.boneTransform(h,Ki));const p=function(e,t,n,r,i,s,o,a){let l;if(l=t.side===m?r.intersectTriangle(o,s,i,!0,a):r.intersectTriangle(i,s,o,t.side!==g,a),null===l)return null;ss.copy(a),ss.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(ss);return c<n.near||c>n.far?null:{distance:c,point:ss.clone(),object:e}}(e,t,n,r,Wi,qi,Ki,is);if(p){a&&(ts.fromBufferAttribute(a,c),ns.fromBufferAttribute(a,u),rs.fromBufferAttribute(a,h),p.uv=yi.getUV(is,Wi,qi,Ki,ts,ns,rs,new kn)),l&&(ts.fromBufferAttribute(l,c),ns.fromBufferAttribute(l,u),rs.fromBufferAttribute(l,h),p.uv2=yi.getUV(is,Wi,qi,Ki,ts,ns,rs,new kn));const e={a:c,b:u,c:h,normal:new or,materialIndex:0};yi.getNormal(Wi,qi,Ki,e.normal),p.face=e}return p}class ls extends Gi{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const o=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const a=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,r,i,s,p,f,m,g,v){const y=s/m,b=p/g,_=s/2,x=p/2,w=f/2,S=m+1,T=g+1;let E=0,M=0;const A=new or;for(let s=0;s<T;s++){const o=s*b-x;for(let a=0;a<S;a++){const h=a*y-_;A[e]=h*r,A[t]=o*i,A[n]=w,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(a/m),u.push(1-s/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+S*e,r=h+t+S*(e+1),i=h+(t+1)+S*(e+1),s=h+(t+1)+S*e;a.push(n,r,s),a.push(r,i,s),M+=6}o.addGroup(d,M,v),d+=M,h+=E}p("z","y","x",-1,-1,n,t,e,s,i,0),p("z","y","x",1,-1,n,t,-e,s,i,1),p("x","z","y",1,1,e,n,t,r,s,2),p("x","z","y",1,-1,e,n,-t,r,s,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new Oi(l,3)),this.setAttribute("normal",new Oi(c,3)),this.setAttribute("uv",new Oi(u,2))}static fromJSON(e){return new ls(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function cs(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function us(e){const t={};for(let n=0;n<e.length;n++){const r=cs(e[n]);for(const e in r)t[e]=r[e]}return t}const hs={clone:cs,merge:us};class ds extends _i{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=cs(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class ps extends ai{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Dr,this.projectionMatrix=new Dr,this.projectionMatrixInverse=new Dr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class fs extends ps{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*yn*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*vn*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*yn*Math.atan(Math.tan(.5*vn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*vn*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,o=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/o,r*=s.width/e,n*=s.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ms=90;class gs extends ai{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new fs(ms,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new or(1,0,0)),this.add(r);const i=new fs(ms,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new or(-1,0,0)),this.add(i);const s=new fs(ms,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new or(0,1,0)),this.add(s);const o=new fs(ms,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new or(0,-1,0)),this.add(o);const a=new fs(ms,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new or(0,0,1)),this.add(a);const l=new fs(ms,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new or(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,s,o,a,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=Y,e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,a),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class vs extends Jn{constructor(e,t,n,r,i,s,o,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:re,n,r,i,s,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ys extends Qn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new vs(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ge}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new ls(5,5,5),i=new ds({name:"CubemapFromEquirect",uniforms:cs(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:v});i.uniforms.tEquirect.value=t;const s=new os(r,i),o=t.minFilter;t.minFilter===be&&(t.minFilter=ge);return new gs(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const bs=new or,_s=new or,xs=new Pn;class ws{constructor(e=new or(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=bs.subVectors(n,t).cross(_s.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(bs),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||xs.getNormalMatrix(e),r=this.coplanarPoint(bs).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ss=new Ar,Ts=new or;class Es{constructor(e=new ws,t=new ws,n=new ws,r=new ws,i=new ws,s=new ws){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-r,u-a,f-h,y-m).normalize(),t[1].setComponents(o+r,u+a,f+h,y+m).normalize(),t[2].setComponents(o+i,u+l,f+d,y+g).normalize(),t[3].setComponents(o-i,u-l,f-d,y-g).normalize(),t[4].setComponents(o-s,u-c,f-p,y-v).normalize(),t[5].setComponents(o+s,u+c,f+p,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ss.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ss)}intersectsSprite(e){return Ss.center.set(0,0,0),Ss.radius=.7071067811865476,Ss.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ss)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Ts.x=r.normal.x>0?e.max.x:e.min.x,Ts.y=r.normal.y>0?e.max.y:e.min.y,Ts.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ts)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ms(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function As(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=r.get(t);void 0===s?r.set(t,function(t,r){const i=t.array,s=t.usage,o=e.createBuffer();let a;if(e.bindBuffer(r,o),e.bufferData(r,i,s),t.onUploadCallback(),i instanceof Float32Array)a=5126;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");a=5131}else a=5123;else if(i instanceof Int16Array)a=5122;else if(i instanceof Uint32Array)a=5125;else if(i instanceof Int32Array)a=5124;else if(i instanceof Int8Array)a=5120;else if(i instanceof Uint8Array)a=5121;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=5121}return{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):s.version<t.version&&(!function(t,r,i){const s=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,s):(n?e.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):e.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1)}(s.buffer,t,i),s.version=t.version)}}}class Cs extends Gi{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,o=Math.floor(n),a=Math.floor(r),l=o+1,c=a+1,u=e/o,h=t/a,d=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*h-s;for(let n=0;n<l;n++){const r=n*u-i;p.push(r,-t,0),f.push(0,0,1),m.push(n/o),m.push(1-e/a)}}for(let e=0;e<a;e++)for(let t=0;t<o;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),s=t+1+l*e;d.push(n,r,s),d.push(r,i,s)}this.setIndex(d),this.setAttribute("position",new Oi(p,3)),this.setAttribute("normal",new Oi(f,3)),this.setAttribute("uv",new Oi(m,2))}static fromJSON(e){return new Cs(e.width,e.height,e.widthSegments,e.heightSegments)}}const ks={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ps={common:{diffuse:{value:new jn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pn},uv2Transform:{value:new Pn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new kn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new jn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pn}},sprite:{diffuse:{value:new jn(16777215)},opacity:{value:1},center:{value:new kn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pn}}},Rs={basic:{uniforms:us([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.fog]),vertexShader:ks.meshbasic_vert,fragmentShader:ks.meshbasic_frag},lambert:{uniforms:us([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.fog,Ps.lights,{emissive:{value:new jn(0)}}]),vertexShader:ks.meshlambert_vert,fragmentShader:ks.meshlambert_frag},phong:{uniforms:us([Ps.common,Ps.specularmap,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.fog,Ps.lights,{emissive:{value:new jn(0)},specular:{value:new jn(1118481)},shininess:{value:30}}]),vertexShader:ks.meshphong_vert,fragmentShader:ks.meshphong_frag},standard:{uniforms:us([Ps.common,Ps.envmap,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.roughnessmap,Ps.metalnessmap,Ps.fog,Ps.lights,{emissive:{value:new jn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ks.meshphysical_vert,fragmentShader:ks.meshphysical_frag},toon:{uniforms:us([Ps.common,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.gradientmap,Ps.fog,Ps.lights,{emissive:{value:new jn(0)}}]),vertexShader:ks.meshtoon_vert,fragmentShader:ks.meshtoon_frag},matcap:{uniforms:us([Ps.common,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.fog,{matcap:{value:null}}]),vertexShader:ks.meshmatcap_vert,fragmentShader:ks.meshmatcap_frag},points:{uniforms:us([Ps.points,Ps.fog]),vertexShader:ks.points_vert,fragmentShader:ks.points_frag},dashed:{uniforms:us([Ps.common,Ps.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ks.linedashed_vert,fragmentShader:ks.linedashed_frag},depth:{uniforms:us([Ps.common,Ps.displacementmap]),vertexShader:ks.depth_vert,fragmentShader:ks.depth_frag},normal:{uniforms:us([Ps.common,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,{opacity:{value:1}}]),vertexShader:ks.meshnormal_vert,fragmentShader:ks.meshnormal_frag},sprite:{uniforms:us([Ps.sprite,Ps.fog]),vertexShader:ks.sprite_vert,fragmentShader:ks.sprite_frag},background:{uniforms:{uvTransform:{value:new Pn},t2D:{value:null}},vertexShader:ks.background_vert,fragmentShader:ks.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:ks.backgroundCube_vert,fragmentShader:ks.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ks.cube_vert,fragmentShader:ks.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ks.equirect_vert,fragmentShader:ks.equirect_frag},distanceRGBA:{uniforms:us([Ps.common,Ps.displacementmap,{referencePosition:{value:new or},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ks.distanceRGBA_vert,fragmentShader:ks.distanceRGBA_frag},shadow:{uniforms:us([Ps.lights,Ps.fog,{color:{value:new jn(0)},opacity:{value:1}}]),vertexShader:ks.shadow_vert,fragmentShader:ks.shadow_frag}};function Ls(e,t,n,r,i,s,o){const a=new jn(0);let l,c,u=!0===s?0:1,h=null,d=0,p=null;function g(e,t){r.buffers.color.setClear(e.r,e.g,e.b,t,o)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),u=t,g(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,g(a,u)},render:function(r,s){let o=!1,v=!0===s.isScene?s.background:null;if(v&&v.isTexture){v=(s.backgroundBlurriness>0?n:t).get(v)}const y=e.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(v=null),null===v?g(a,u):v&&v.isColor&&(g(v,1),o=!0),(e.autoClear||o)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===ae)?(void 0===c&&(c=new os(new ls(1,1,1),new ds({name:"BackgroundCubeMaterial",uniforms:cs(Rs.backgroundCube.uniforms),vertexShader:Rs.backgroundCube.vertexShader,fragmentShader:Rs.backgroundCube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=s.backgroundBlurriness,h===v&&d===v.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=v,d=v.version,p=e.toneMapping),c.layers.enableAll(),r.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new os(new Cs(2,2),new ds({name:"BackgroundMaterial",uniforms:cs(Rs.background.uniforms),vertexShader:Rs.background.vertexShader,fragmentShader:Rs.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),h===v&&d===v.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=v,d=v.version,p=e.toneMapping),l.layers.enableAll(),r.unshift(l,l.geometry,l.material,0,0,null))}}}function Os(e,t,n,r){const i=e.getParameter(34921),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==s,a={},l=p(null);let c=l,u=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const s=c.newAttributes,o=c.enabledAttributes,a=c.attributeDivisors;if(s[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),a[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,s,o,a){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,s,o,a):e.vertexAttribIPointer(t,n,i,o,a)}function b(){_(),u=!0,c!==l&&(c=l,h(c.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,b,_){let x=!1;if(o){const t=function(t,n,i){const o=!0===i.wireframe;let l=a[t.id];void 0===l&&(l={},a[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[o];void 0===u&&(u=p(r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[o]=u);return u}(b,d,l);c!==t&&(c=t,h(c.object)),x=function(e,t,n,r){const i=c.attributes,s=t.attributes;let o=0;const a=n.getAttributes();for(const t in a){if(a[t].location>=0){const n=i[t];let r=s[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;o++}}return c.attributesNum!==o||c.index!==r}(i,b,d,_),x&&function(e,t,n,r){const i={},s=t.attributes;let o=0;const a=n.getAttributes();for(const t in a){if(a[t].location>=0){let n=s[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,o++}}c.attributes=i,c.attributesNum=o,c.index=r}(i,b,d,_)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===d.id&&c.wireframe===e||(c.geometry=b.id,c.program=d.id,c.wireframe=e,x=!0)}null!==_&&n.update(_,34963),(x||u)&&(u=!1,function(i,s,o,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=a.attributes,c=o.getAttributes(),u=s.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const t=s.normalized,o=s.itemSize,l=n.get(s);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,d=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)g(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,o/r.locationSize,u,t,l*h,(d+o/r.locationSize*e)*h)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)g(r.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,o/r.locationSize,u,t,o*h,o/r.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}v()}(i,l,d,b),null!==_&&e.bindBuffer(34963,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){b();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function(e){if(void 0===a[e.id])return;const t=a[e.id];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete a[e.id]},releaseStatesOfProgram:function(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)d(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function Ns(e,t,n,r){const i=r.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,r){e.drawArrays(s,t,r),n.update(r,s,1)},this.renderInstances=function(r,o,a){if(0===a)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,r,o,a),n.update(o,s,a)}}function Is(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let o=void 0!==n.precision?n.precision:"highp";const a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=s||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),f=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,b=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:s?e.getParameter(36183):0}}function Ds(e){const t=this;let n=null,r=0,i=!1,s=!1;const o=new ws,a=new Pn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==i||null===c){const t=r+4*s,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==s;++t,n+=4)o.copy(e[t]).applyMatrix4(i,a),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,s){const o=0!==e.length||t||0!==r||i;return i=t,n=u(e,s,0),r=e.length,o},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(t,o,a){const h=t.clippingPlanes,d=t.clipIntersection,p=t.clipShadows,f=e.get(t);if(!i||null===h||0===h.length||s&&!p)s?u(null):c();else{const e=s?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=u(h,o,t,a);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Fs(e){let t=new WeakMap;function n(e,t){return t===se?e.mapping=re:t===oe&&(e.mapping=ie),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const s=i.mapping;if(s===se||s===oe){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const s=i.image;if(s&&s.height>0){const o=new ys(s.height/2);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}Rs.physical={uniforms:us([Rs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new kn(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new jn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new kn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new jn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new jn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ks.meshphysical_vert,fragmentShader:ks.meshphysical_frag};class zs extends ps{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,o=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,o-=t*this.view.offsetY,a=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,o,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Us=[.125,.215,.35,.446,.526,.582],Bs=20,Vs=new zs,Gs=new jn;let Zs=null;const Hs=(1+Math.sqrt(5))/2,js=1/Hs,Ws=[new or(1,1,1),new or(-1,1,1),new or(1,1,-1),new or(-1,1,-1),new or(0,Hs,js),new or(0,Hs,-js),new or(js,0,Hs),new or(-js,0,Hs),new or(Hs,js,0),new or(-Hs,js,0)];class qs{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Zs=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Js(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ys(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Zs),e.scissorTest=!1,Xs(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===re||e.mapping===ie?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Zs=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ge,minFilter:ge,generateMipmaps:!1,type:Ce,format:Ne,encoding:Pt,depthBuffer:!1},r=Ks(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Ks(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const s=e-4+1+Us.length;for(let o=0;o<s;o++){const s=Math.pow(2,i);n.push(s);let a=1/s;o>e-4?a=Us[o-e+4-1]:0===o&&(a=0),r.push(a);const l=1/(s-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),b=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),y.set(h,m*p*e);const i=[e,e,e,e,e,e];b.set(i,g*p*e)}const _=new Gi;_.setAttribute("position",new Ti(v,f)),_.setAttribute("uv",new Ti(y,m)),_.setAttribute("faceIndex",new Ti(b,g)),t.push(_),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(Bs),i=new or(0,1,0);return new ds({name:"SphericalGaussianBlur",defines:{n:Bs,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:$s(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:v,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new os(this._lodPlanes[0],e);this._renderer.compile(t,Vs)}_sceneToCubeUV(e,t,n,r){const i=new fs(90,1,t,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(Gs),a.toneMapping=Y,a.autoClear=!1;const u=new xi({name:"PMREM.Background",side:m,depthWrite:!1,depthTest:!1}),h=new os(new ls,u);let d=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(Gs),d=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,s[t],0),i.lookAt(o[t],0,0)):1===n?(i.up.set(0,0,s[t]),i.lookAt(0,o[t],0)):(i.up.set(0,s[t],0),i.lookAt(0,0,o[t]));const l=this._cubeSize;Xs(r,n*l,t>2?l:0,l,l),a.setRenderTarget(r),d&&a.render(h,i),a.render(e,i)}h.geometry.dispose(),h.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===re||e.mapping===ie;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Js()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ys());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new os(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const o=this._cubeSize;Xs(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(s,Vs)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=Ws[(t-1)%Ws.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new os(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):Bs;f>Bs&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<Bs;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,o&&(u.poleAxis.value=o);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[r];Xs(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),a.setRenderTarget(t),a.render(c,Vs)}}function Ks(e,t,n){const r=new Qn(e,t,n);return r.texture.mapping=ae,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Xs(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Ys(){return new ds({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$s(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:v,depthTest:!1,depthWrite:!1})}function Js(){return new ds({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$s(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:v,depthTest:!1,depthWrite:!1})}function $s(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Qs(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping,o=s===se||s===oe,a=s===re||s===ie;if(o||a){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new qs(e)),r=o?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const s=i.image;if(o&&s&&s.height>0||a&&s&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(s)){null===n&&(n=new qs(e));const s=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,s),i.addEventListener("dispose",r),s.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function eo(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function to(e,t,n,r){const i={},s=new WeakMap;function o(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const e in a.attributes)t.remove(a.attributes[e]);a.removeEventListener("dispose",o),delete i[a.id];const l=s.get(a);l&&(t.remove(l),s.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const a=new(Rn(n)?Ri:ki)(n,1);a.version=o;const l=s.get(e);l&&t.remove(l),s.set(e,a)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return s.get(e)}}}function no(e,t,n,r){const i=r.isWebGL2;let s,o,a;this.setMode=function(e){s=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(s,r,o,t*a),n.update(r,s,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](s,l,o,r*a,c),n.update(l,s,c)}}function ro(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function io(e,t){return e[0]-t[0]}function so(e,t){return Math.abs(t[1])-Math.abs(e[1])}function oo(e,t,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new $n,a=[];for(let e=0;e<8;e++)a[e]=[e,0];return{update:function(l,c,u,h){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==p?p.length:0;let m=s.get(c);if(void 0===m||m.count!==f){void 0!==m&&m.texture.dispose();const y=void 0!==c.morphAttributes.position,b=void 0!==c.morphAttributes.normal,_=void 0!==c.morphAttributes.color,x=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],S=c.morphAttributes.color||[];let T=0;!0===y&&(T=1),!0===b&&(T=2),!0===_&&(T=3);let E=c.attributes.position.count*T,M=1;E>t.maxTextureSize&&(M=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);const A=new Float32Array(E*M*4*f),C=new er(A,E,M,f);C.type=Ae,C.needsUpdate=!0;const k=4*T;for(let R=0;R<f;R++){const L=x[R],O=w[R],N=S[R],I=E*M*4*R;for(let D=0;D<L.count;D++){const F=D*k;!0===y&&(o.fromBufferAttribute(L,D),A[I+F+0]=o.x,A[I+F+1]=o.y,A[I+F+2]=o.z,A[I+F+3]=0),!0===b&&(o.fromBufferAttribute(O,D),A[I+F+4]=o.x,A[I+F+5]=o.y,A[I+F+6]=o.z,A[I+F+7]=0),!0===_&&(o.fromBufferAttribute(N,D),A[I+F+8]=o.x,A[I+F+9]=o.y,A[I+F+10]=o.z,A[I+F+11]=4===N.itemSize?o.w:1)}}function P(){C.dispose(),s.delete(c),c.removeEventListener("dispose",P)}m={count:f,texture:C,size:new kn(E,M)},s.set(c,m),c.addEventListener("dispose",P)}let g=0;for(let z=0;z<d.length;z++)g+=d[z];const v=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(e,"morphTargetBaseInfluence",v),h.getUniforms().setValue(e,"morphTargetInfluences",d),h.getUniforms().setValue(e,"morphTargetsTexture",m.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{const U=void 0===d?0:d.length;let B=r[c.id];if(void 0===B||B.length!==U){B=[];for(let j=0;j<U;j++)B[j]=[j,0];r[c.id]=B}for(let W=0;W<U;W++){const q=B[W];q[0]=W,q[1]=d[W]}B.sort(so);for(let K=0;K<8;K++)K<U&&B[K][1]?(a[K][0]=B[K][0],a[K][1]=B[K][1]):(a[K][0]=Number.MAX_SAFE_INTEGER,a[K][1]=0);a.sort(io);const V=c.morphAttributes.position,G=c.morphAttributes.normal;let Z=0;for(let X=0;X<8;X++){const Y=a[X],J=Y[0],$=Y[1];J!==Number.MAX_SAFE_INTEGER&&$?(V&&c.getAttribute("morphTarget"+X)!==V[J]&&c.setAttribute("morphTarget"+X,V[J]),G&&c.getAttribute("morphNormal"+X)!==G[J]&&c.setAttribute("morphNormal"+X,G[J]),i[X]=$,Z+=$):(V&&!0===c.hasAttribute("morphTarget"+X)&&c.deleteAttribute("morphTarget"+X),G&&!0===c.hasAttribute("morphNormal"+X)&&c.deleteAttribute("morphNormal"+X),i[X]=0)}const H=c.morphTargetsRelative?1:1-Z;h.getUniforms().setValue(e,"morphTargetBaseInfluence",H),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function ao(e,t,n,r){let i=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const o=r.render.frame,a=e.geometry,l=t.get(e,a);return i.get(l)!==o&&(t.update(l),i.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}const lo=new Jn,co=new er,uo=new nr,ho=new vs,po=[],fo=[],mo=new Float32Array(16),go=new Float32Array(9),vo=new Float32Array(4);function yo(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=po[i];if(void 0===s&&(s=new Float32Array(i),po[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function bo(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function _o(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function xo(e,t){let n=fo[t];void 0===n&&(n=new Int32Array(t),fo[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function wo(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function So(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bo(n,t))return;e.uniform2fv(this.addr,t),_o(n,t)}}function To(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(bo(n,t))return;e.uniform3fv(this.addr,t),_o(n,t)}}function Eo(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bo(n,t))return;e.uniform4fv(this.addr,t),_o(n,t)}}function Mo(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(bo(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),_o(n,t)}else{if(bo(n,r))return;vo.set(r),e.uniformMatrix2fv(this.addr,!1,vo),_o(n,r)}}function Ao(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(bo(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),_o(n,t)}else{if(bo(n,r))return;go.set(r),e.uniformMatrix3fv(this.addr,!1,go),_o(n,r)}}function Co(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(bo(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),_o(n,t)}else{if(bo(n,r))return;mo.set(r),e.uniformMatrix4fv(this.addr,!1,mo),_o(n,r)}}function ko(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Po(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bo(n,t))return;e.uniform2iv(this.addr,t),_o(n,t)}}function Ro(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(bo(n,t))return;e.uniform3iv(this.addr,t),_o(n,t)}}function Lo(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bo(n,t))return;e.uniform4iv(this.addr,t),_o(n,t)}}function Oo(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function No(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bo(n,t))return;e.uniform2uiv(this.addr,t),_o(n,t)}}function Io(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(bo(n,t))return;e.uniform3uiv(this.addr,t),_o(n,t)}}function Do(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bo(n,t))return;e.uniform4uiv(this.addr,t),_o(n,t)}}function Fo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||lo,i)}function zo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||uo,i)}function Uo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||ho,i)}function Bo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||co,i)}function Vo(e,t){e.uniform1fv(this.addr,t)}function Go(e,t){const n=yo(t,this.size,2);e.uniform2fv(this.addr,n)}function Zo(e,t){const n=yo(t,this.size,3);e.uniform3fv(this.addr,n)}function Ho(e,t){const n=yo(t,this.size,4);e.uniform4fv(this.addr,n)}function jo(e,t){const n=yo(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Wo(e,t){const n=yo(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function qo(e,t){const n=yo(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Ko(e,t){e.uniform1iv(this.addr,t)}function Xo(e,t){e.uniform2iv(this.addr,t)}function Yo(e,t){e.uniform3iv(this.addr,t)}function Jo(e,t){e.uniform4iv(this.addr,t)}function $o(e,t){e.uniform1uiv(this.addr,t)}function Qo(e,t){e.uniform2uiv(this.addr,t)}function ea(e,t){e.uniform3uiv(this.addr,t)}function ta(e,t){e.uniform4uiv(this.addr,t)}function na(e,t,n){const r=this.cache,i=t.length,s=xo(n,i);bo(r,s)||(e.uniform1iv(this.addr,s),_o(r,s));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||lo,s[e])}function ra(e,t,n){const r=this.cache,i=t.length,s=xo(n,i);bo(r,s)||(e.uniform1iv(this.addr,s),_o(r,s));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||uo,s[e])}function ia(e,t,n){const r=this.cache,i=t.length,s=xo(n,i);bo(r,s)||(e.uniform1iv(this.addr,s),_o(r,s));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||ho,s[e])}function sa(e,t,n){const r=this.cache,i=t.length,s=xo(n,i);bo(r,s)||(e.uniform1iv(this.addr,s),_o(r,s));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||co,s[e])}class oa{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return wo;case 35664:return So;case 35665:return To;case 35666:return Eo;case 35674:return Mo;case 35675:return Ao;case 35676:return Co;case 5124:case 35670:return ko;case 35667:case 35671:return Po;case 35668:case 35672:return Ro;case 35669:case 35673:return Lo;case 5125:return Oo;case 36294:return No;case 36295:return Io;case 36296:return Do;case 35678:case 36198:case 36298:case 36306:case 35682:return Fo;case 35679:case 36299:case 36307:return zo;case 35680:case 36300:case 36308:case 36293:return Uo;case 36289:case 36303:case 36311:case 36292:return Bo}}(t.type)}}class aa{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Vo;case 35664:return Go;case 35665:return Zo;case 35666:return Ho;case 35674:return jo;case 35675:return Wo;case 35676:return qo;case 5124:case 35670:return Ko;case 35667:case 35671:return Xo;case 35668:case 35672:return Yo;case 35669:case 35673:return Jo;case 5125:return $o;case 36294:return Qo;case 36295:return ea;case 36296:return ta;case 35678:case 36198:case 36298:case 36306:case 35682:return na;case 35679:case 36299:case 36307:return ra;case 35680:case 36300:case 36308:case 36293:return ia;case 36289:case 36303:case 36311:case 36292:return sa}}(t.type)}}class la{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}}}const ca=/(\w+)(\])?(\[|\.)?/g;function ua(e,t){e.seq.push(t),e.map[t.id]=t}function ha(e,t,n){const r=e.name,i=r.length;for(ca.lastIndex=0;;){const s=ca.exec(r),o=ca.lastIndex;let a=s[1];const l="]"===s[2],c=s[3];if(l&&(a|=0),void 0===c||"["===c&&o+2===i){ua(n,void 0===c?new oa(a,e,t):new aa(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new la(a),ua(n,e)),n=e}}}class da{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);ha(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],o=n[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function pa(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let fa=0;function ma(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const r=parseInt(s[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let e=i;e<s;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function ga(e,t){const n=function(e){switch(e){case Pt:return["Linear","( value )"];case Rt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function va(e,t){let n;switch(t){case J:n="Linear";break;case $:n="Reinhard";break;case Q:n="OptimizedCineon";break;case ee:n="ACESFilmic";break;case te:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ya(e){return""!==e}function ba(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function _a(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const xa=/^[ \t]*#include +<([\w\d./]+)>/gm;function wa(e){return e.replace(xa,Sa)}function Sa(e,t){const n=ks[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return wa(n)}const Ta=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ea(e){return e.replace(Ta,Ma)}function Ma(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Aa(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Ca(e,t,n,r){const i=e.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===p&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case re:case ie:t="ENVMAP_TYPE_CUBE";break;case ae:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===ie&&(t="ENVMAP_MODE_REFRACTION");return t}(n),f=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case q:t="ENVMAP_BLENDING_MULTIPLY";break;case K:t="ENVMAP_BLENDING_MIX";break;case X:t="ENVMAP_BLENDING_ADD"}return t}(n),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ya).join("\n")}(n),v=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),y=i.createProgram();let b,_,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(b=[v].filter(ya).join("\n"),b.length>0&&(b+="\n"),_=[g,v].filter(ya).join("\n"),_.length>0&&(_+="\n")):(b=[Aa(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ya).join("\n"),_=[g,Aa(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Y?"#define TONE_MAPPING":"",n.toneMapping!==Y?ks.tonemapping_pars_fragment:"",n.toneMapping!==Y?va("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ks.encodings_pars_fragment,ga("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ya).join("\n")),o=wa(o),o=ba(o,n),o=_a(o,n),a=wa(a),a=ba(a,n),a=_a(a,n),o=Ea(o),a=Ea(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",b=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,_=["#define varying in",n.glslVersion===dn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===dn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const w=x+_+a,S=pa(i,35633,x+b+o),T=pa(i,35632,w);if(i.attachShader(y,S),i.attachShader(y,T),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(y).trim(),t=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(T).trim();let r=!0,s=!0;if(!1===i.getProgramParameter(y,35714)){r=!1;const t=ma(i,S,"vertex"),n=ma(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(s=!1);s&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:b},fragmentShader:{log:n,prefix:_}})}let E,M;return i.deleteShader(S),i.deleteShader(T),this.getUniforms=function(){return void 0===E&&(E=new da(i,y)),E},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),s=r.name;let o=1;35674===r.type&&(o=2),35675===r.type&&(o=3),35676===r.type&&(o=4),n[s]={type:r.type,location:e.getAttribLocation(t,s),locationSize:o}}return n}(i,y)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=fa++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=T,this}let ka=0;class Pa{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(i)&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Ra(e),t.set(e,n)),n}}class Ra{constructor(e){this.id=ka++,this.code=e,this.usedTimes=0}}function La(e,t,n,r,i,s,o){const a=new qr,l=new Pa,c=[],u=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,a,c,v,b){const _=v.fog,x=b.geometry,w=s.isMeshStandardMaterial?v.environment:null,S=(s.isMeshStandardMaterial?n:t).get(s.envMap||w),T=S&&S.mapping===ae?S.image.height:null,E=f[s.type];null!==s.precision&&(p=i.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead."));const M=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,A=void 0!==M?M.length:0;let C,k,P,R,L=0;if(void 0!==x.morphAttributes.position&&(L=1),void 0!==x.morphAttributes.normal&&(L=2),void 0!==x.morphAttributes.color&&(L=3),E){const e=Rs[E];C=e.vertexShader,k=e.fragmentShader}else C=s.vertexShader,k=s.fragmentShader,l.update(s),P=l.getVertexShaderID(s),R=l.getFragmentShaderID(s);const O=e.getRenderTarget(),N=s.alphaTest>0,I=s.clearcoat>0,D=s.iridescence>0;return{isWebGL2:u,shaderID:E,shaderName:s.type,vertexShader:C,fragmentShader:k,defines:s.defines,customVertexShaderID:P,customFragmentShaderID:R,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:d,outputEncoding:null===O?e.outputEncoding:!0===O.isXRRenderTarget?O.texture.encoding:Pt,map:!!s.map,matcap:!!s.matcap,envMap:!!S,envMapMode:S&&S.mapping,envMapCubeUVHeight:T,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===It,tangentSpaceNormalMap:s.normalMapType===Nt,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&s.map.encoding===Rt,clearcoat:I,clearcoatMap:I&&!!s.clearcoatMap,clearcoatRoughnessMap:I&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!s.clearcoatNormalMap,iridescence:D,iridescenceMap:D&&!!s.iridescenceMap,iridescenceThicknessMap:D&&!!s.iridescenceThicknessMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&s.blending===y,alphaMap:!!s.alphaMap,alphaTest:N,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!x.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUvs:!!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatMap||s.clearcoatRoughnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.displacementMap||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheenColorMap||s.sheenRoughnessMap),uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap||!s.displacementMap),fog:!!_,useFog:!0===s.fog,fogExp2:_&&_.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:A,morphTextureStride:L,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:Y,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===g,flipSided:s.side===m,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){a.disableAll(),t.isWebGL2&&a.enable(0);t.supportsVertexTextures&&a.enable(1);t.instancing&&a.enable(2);t.instancingColor&&a.enable(3);t.map&&a.enable(4);t.matcap&&a.enable(5);t.envMap&&a.enable(6);t.lightMap&&a.enable(7);t.aoMap&&a.enable(8);t.emissiveMap&&a.enable(9);t.bumpMap&&a.enable(10);t.normalMap&&a.enable(11);t.objectSpaceNormalMap&&a.enable(12);t.tangentSpaceNormalMap&&a.enable(13);t.clearcoat&&a.enable(14);t.clearcoatMap&&a.enable(15);t.clearcoatRoughnessMap&&a.enable(16);t.clearcoatNormalMap&&a.enable(17);t.iridescence&&a.enable(18);t.iridescenceMap&&a.enable(19);t.iridescenceThicknessMap&&a.enable(20);t.displacementMap&&a.enable(21);t.specularMap&&a.enable(22);t.roughnessMap&&a.enable(23);t.metalnessMap&&a.enable(24);t.gradientMap&&a.enable(25);t.alphaMap&&a.enable(26);t.alphaTest&&a.enable(27);t.vertexColors&&a.enable(28);t.vertexAlphas&&a.enable(29);t.vertexUvs&&a.enable(30);t.vertexTangents&&a.enable(31);t.uvsVertexOnly&&a.enable(32);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.skinning&&a.enable(4);t.morphTargets&&a.enable(5);t.morphNormals&&a.enable(6);t.morphColors&&a.enable(7);t.premultipliedAlpha&&a.enable(8);t.shadowMapEnabled&&a.enable(9);t.physicallyCorrectLights&&a.enable(10);t.doubleSided&&a.enable(11);t.flipSided&&a.enable(12);t.useDepthPacking&&a.enable(13);t.dithering&&a.enable(14);t.specularIntensityMap&&a.enable(15);t.specularColorMap&&a.enable(16);t.transmission&&a.enable(17);t.transmissionMap&&a.enable(18);t.thicknessMap&&a.enable(19);t.sheen&&a.enable(20);t.sheenColorMap&&a.enable(21);t.sheenRoughnessMap&&a.enable(22);t.decodeVideoTexture&&a.enable(23);t.opaque&&a.enable(24);e.push(a.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Rs[t];n=hs.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Ca(e,n,t,s),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Oa(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Na(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ia(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Da(){const e=[];let t=0;const n=[],r=[],i=[];function s(n,r,i,s,o,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:s,renderOrder:n.renderOrder,z:o,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=o,l.group=a),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,a,l,c){const u=s(e,t,o,a,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)},unshift:function(e,t,o,a,l,c){const u=s(e,t,o,a,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Na),r.length>1&&r.sort(t||Ia),i.length>1&&i.sort(t||Ia)}}}function Fa(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Da,e.set(t,[i])):n>=r.length?(i=new Da,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function za(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new or,color:new jn};break;case"SpotLight":n={position:new or,direction:new or,color:new jn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new or,color:new jn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new or,skyColor:new jn,groundColor:new jn};break;case"RectAreaLight":n={color:new jn,position:new or,halfWidth:new or,halfHeight:new or}}return e[t.id]=n,n}}}let Ua=0;function Ba(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Va(e,t){const n=new za,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)i.probe.push(new or);const s=new or,o=new Dr,a=new Dr;return{setup:function(s,o){let a=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0,b=0;s.sort(Ba);const _=!0!==o?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],o=t.color,x=t.intensity,w=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=o.r*x*_,l+=o.g*x*_,c+=o.b*x*_;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],x);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(x*_),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[d]=e;const s=t.shadow;if(t.map&&(i.spotLightMap[y]=t.map,y++,s.updateMatrices(t),t.castShadow&&b++),i.spotLightMatrix[d]=s.matrix,t.castShadow){const e=r.get(t);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=S,v++}d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(o).multiplyScalar(x),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=S,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(x*_),e.groundColor.copy(t.groundColor).multiplyScalar(x*_),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Ps.LTC_FLOAT_1,i.rectAreaLTC2=Ps.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Ps.LTC_HALF_1,i.rectAreaLTC2=Ps.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=c;const x=i.hash;x.directionalLength===u&&x.pointLength===h&&x.spotLength===d&&x.rectAreaLength===p&&x.hemiLength===f&&x.numDirectionalShadows===m&&x.numPointShadows===g&&x.numSpotShadows===v&&x.numSpotMaps===y||(i.directional.length=u,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,x.directionalLength=u,x.pointLength=h,x.spotLength=d,x.rectAreaLength=p,x.hemiLength=f,x.numDirectionalShadows=m,x.numPointShadows=g,x.numSpotShadows=v,x.numSpotMaps=y,i.version=Ua++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),a.identity(),o.copy(d.matrixWorld),o.premultiply(h),a.extractRotation(o),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(d.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),u++}}},state:i}}function Ga(e,t){const n=new Va(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Za(e,t){let n=new WeakMap;return{get:function(r,i=0){const s=n.get(r);let o;return void 0===s?(o=new Ga(e,t),n.set(r,[o])):i>=s.length?(o=new Ga(e,t),s.push(o)):o=s[i],o},dispose:function(){n=new WeakMap}}}class Ha extends _i{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Lt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ja extends _i{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new or,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Wa(e,t,n){let r=new Es;const i=new kn,s=new kn,o=new $n,a=new Ha({depthPacking:Ot}),l=new ja,c={},u=n.maxTextureSize,d={0:m,1:f,2:g},y=new ds({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new kn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),b=y.clone();b.defines.HORIZONTAL_PASS=1;const _=new Gi;_.setAttribute("position",new Ti(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new os(_,y),w=this;function S(n,r){const s=t.update(x);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,b.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,b.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Qn(i.x,i.y)),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,s,y,x,null),b.uniforms.shadow_pass.value=n.mapPass.texture,b.uniforms.resolution.value=n.mapSize,b.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,s,b,x,null)}function T(t,n,r,i,s,o){let u=null;const h=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==h?h:!0===r.isPointLight?l:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=u.clone(),r[t]=i),u=i}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=o===p?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===r.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(r.matrixWorld),u.nearDistance=i,u.farDistance=s),u}function E(n,i,s,o,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===p)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=T(n,u,o,s.near,s.far,a);e.renderBufferDirect(s,null,r,t,n,c)}}}else if(i.visible){const t=T(n,i,o,s.near,s.far,a);e.renderBufferDirect(s,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)E(l[e],i,s,o,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(t,n,a){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(v),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let l=0,c=t.length;l<c;l++){const c=t[l],h=c.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const f=h.getFrameExtents();if(i.multiply(f),s.copy(h.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/f.x),i.x=s.x*f.x,h.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/f.y),i.y=s.y*f.y,h.mapSize.y=s.y)),null===h.map){const e=this.type!==p?{minFilter:he,magFilter:he}:{};h.map=new Qn(i.x,i.y,e),h.map.texture.name=c.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const m=h.getViewportCount();for(let e=0;e<m;e++){const t=h.getViewport(e);o.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(o),h.updateMatrices(c,e),r=h.getFrustum(),E(n,a,h.camera,c,this.type)}!0!==h.isPointLightShadow&&this.type===p&&S(h,a),h.needsUpdate=!1}w.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function qa(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new $n;let r=null;const i=new $n(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,o,a){!0===a&&(t*=o,r*=o,s*=o),n.set(t,r,s,o),!1===i.equals(n)&&(e.clearColor(t,r,s,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?xe(2929):we(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case U:e.depthFunc(512);break;case B:e.depthFunc(519);break;case V:e.depthFunc(513);break;case G:e.depthFunc(515);break;case Z:e.depthFunc(514);break;case H:e.depthFunc(518);break;case j:e.depthFunc(516);break;case W:e.depthFunc(517);break;default:e.depthFunc(515)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},c=new function(){let t=!1,n=null,r=null,i=null,s=null,o=null,a=null,l=null,c=null;return{setTest:function(e){t||(e?xe(2960):we(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&s===o||(e.stencilFunc(t,n,o),r=t,i=n,s=o)},setOp:function(t,n,r){o===t&&a===n&&l===r||(e.stencilOp(t,n,r),o=t,a=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,o=null,a=null,l=null,c=null}}},u=new WeakMap,h=new WeakMap;let d={},p={},f=new WeakMap,q=[],K=null,X=!1,Y=null,J=null,$=null,Q=null,ee=null,te=null,ne=null,re=!1,ie=null,se=null,oe=null,ae=null,le=null;const ce=e.getParameter(35661);let ue=!1,he=0;const de=e.getParameter(7938);-1!==de.indexOf("WebGL")?(he=parseFloat(/^WebGL (\d)/.exec(de)[1]),ue=he>=1):-1!==de.indexOf("OpenGL ES")&&(he=parseFloat(/^OpenGL ES (\d)/.exec(de)[1]),ue=he>=2);let pe=null,fe={};const me=e.getParameter(3088),ge=e.getParameter(2978),ve=(new $n).fromArray(me),ye=(new $n).fromArray(ge);function be(t,n,r){const i=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return s}const _e={};function xe(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function we(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}_e[3553]=be(3553,3553,1),_e[34067]=be(34067,34069,6),i.setClear(0,0,0,1),s.setClear(1),c.setClear(0),xe(2929),s.setFunc(G),Me(!1),Ae(a),xe(2884),Ee(v);const Se={[S]:32774,[T]:32778,[E]:32779};if(r)Se[M]=32775,Se[A]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(Se[M]=e.MIN_EXT,Se[A]=e.MAX_EXT)}const Te={[C]:0,[k]:1,[P]:768,[L]:770,[z]:776,[D]:774,[N]:772,[R]:769,[O]:771,[F]:775,[I]:773};function Ee(t,n,r,i,s,o,a,l){if(t!==v){if(!1===X&&(xe(3042),X=!0),t===w)s=s||n,o=o||r,a=a||i,n===J&&s===ee||(e.blendEquationSeparate(Se[n],Se[s]),J=n,ee=s),r===$&&i===Q&&o===te&&a===ne||(e.blendFuncSeparate(Te[r],Te[i],Te[o],Te[a]),$=r,Q=i,te=o,ne=a),Y=t,re=null;else if(t!==Y||l!==re){if(J===S&&ee===S||(e.blendEquation(32774),J=S,ee=S),l)switch(t){case y:e.blendFuncSeparate(1,771,1,771);break;case b:e.blendFunc(1,1);break;case _:e.blendFuncSeparate(0,769,0,1);break;case x:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case y:e.blendFuncSeparate(770,771,1,771);break;case b:e.blendFunc(770,1);break;case _:e.blendFuncSeparate(0,769,0,1);break;case x:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}$=null,Q=null,te=null,ne=null,Y=t,re=l}}else!0===X&&(we(3042),X=!1)}function Me(t){ie!==t&&(t?e.frontFace(2304):e.frontFace(2305),ie=t)}function Ae(t){t!==o?(xe(2884),t!==se&&(t===a?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):we(2884),se=t}function Ce(t,n,r){t?(xe(32823),ae===n&&le===r||(e.polygonOffset(n,r),ae=n,le=r)):we(32823)}return{buffers:{color:i,depth:s,stencil:c},enable:xe,disable:we,bindFramebuffer:function(t,n){return p[t]!==n&&(e.bindFramebuffer(t,n),p[t]=n,r&&(36009===t&&(p[36160]=n),36160===t&&(p[36009]=n)),!0)},drawBuffers:function(r,i){let s=q,o=!1;if(r)if(s=f.get(i),void 0===s&&(s=[],f.set(i,s)),r.isWebGLMultipleRenderTargets){const e=r.texture;if(s.length!==e.length||36064!==s[0]){for(let t=0,n=e.length;t<n;t++)s[t]=36064+t;s.length=e.length,o=!0}}else 36064!==s[0]&&(s[0]=36064,o=!0);else 1029!==s[0]&&(s[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(t){return K!==t&&(e.useProgram(t),K=t,!0)},setBlending:Ee,setMaterial:function(e,t){e.side===g?we(2884):xe(2884);let n=e.side===m;t&&(n=!n),Me(n),e.blending===y&&!1===e.transparent?Ee(v):Ee(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;c.setTest(r),r&&(c.setMask(e.stencilWriteMask),c.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),c.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ce(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?xe(32926):we(32926)},setFlipSided:Me,setCullFace:Ae,setLineWidth:function(t){t!==oe&&(ue&&e.lineWidth(t),oe=t)},setPolygonOffset:Ce,setScissorTest:function(e){e?xe(3089):we(3089)},activeTexture:function(t){void 0===t&&(t=33984+ce-1),pe!==t&&(e.activeTexture(t),pe=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===pe?33984+ce-1:pe);let i=fe[r];void 0===i&&(i={type:void 0,texture:void 0},fe[r]=i),i.type===t&&i.texture===n||(pe!==r&&(e.activeTexture(r),pe=r),e.bindTexture(t,n||_e[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=fe[pe];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=h.get(n);void 0===r&&(r=new WeakMap,h.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=h.get(n).get(t);u.get(t)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),u.set(t,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ve.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ve.copy(t))},viewport:function(t){!1===ye.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ye.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},pe=null,fe={},p={},f=new WeakMap,q=[],K=null,X=!1,Y=null,J=null,$=null,Q=null,ee=null,te=null,ne=null,re=!1,ie=null,se=null,oe=null,ae=null,le=null,ve.set(0,0,e.canvas.width,e.canvas.height),ye.set(0,0,e.canvas.width,e.canvas.height),i.reset(),s.reset(),c.reset()}}}function Ka(e,t,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=/OculusBrowser/g.test("undefined"==typeof navigator?"":navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(e,t){return v?new OffscreenCanvas(e,t):Nn("canvas")}function b(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?En:Math.floor,s=r(i*e.width),o=r(i*e.height);void 0===m&&(m=y(s,o));const a=n?y(s,o):m;a.width=s,a.height=o;return a.getContext("2d").drawImage(e,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+o+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function _(e){return Sn(e.width)&&Sn(e.height)}function x(e,t){return e.generateMipmaps&&t&&e.minFilter!==he&&e.minFilter!==ge}function w(t){e.generateMipmap(t)}function S(n,r,i,s,o=!1){if(!1===a)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return 6403===r&&(5126===i&&(l=33326),5131===i&&(l=33325),5121===i&&(l=33321)),33319===r&&(5126===i&&(l=33328),5131===i&&(l=33327),5121===i&&(l=33323)),6408===r&&(5126===i&&(l=34836),5131===i&&(l=34842),5121===i&&(l=s===Rt&&!1===o?35907:32856),32819===i&&(l=32854),32820===i&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function T(e,t,n){return!0===x(e,n)||e.isFramebufferTexture&&e.minFilter!==he&&e.minFilter!==ge?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function E(e){return e===he||e===de||e===fe?9728:9729}function M(e){const t=e.target;t.removeEventListener("dispose",M),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&C(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function A(t){const n=t.target;n.removeEventListener("dispose",A),function(t){const n=t.texture,i=r.get(t),s=r.get(n);void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function C(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete g.get(i)[n.__cacheKey],o.memory.textures--}let k=0;function P(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=o.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&i.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void I(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,i.__webglTexture,33984+t)}const R={[le]:10497,[ce]:33071,[ue]:33648},L={[he]:9728,[de]:9984,[fe]:9986,[ge]:9729,[ve]:9985,[be]:9987};function O(n,s,o){if(o?(e.texParameteri(n,10242,R[s.wrapS]),e.texParameteri(n,10243,R[s.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,R[s.wrapR]),e.texParameteri(n,10240,L[s.magFilter]),e.texParameteri(n,10241,L[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),s.wrapS===ce&&s.wrapT===ce||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,E(s.magFilter)),e.texParameteri(n,10241,E(s.minFilter)),s.minFilter!==he&&s.minFilter!==ge&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const o=t.get("EXT_texture_filter_anisotropic");if(s.type===Ae&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&s.type===Ce&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function N(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",M));const i=n.source;let s=g.get(i);void 0===s&&(s={},g.set(i,s));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(a!==t.__cacheKey){void 0===s[a]&&(s[a]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),s[a].usedTimes++;const i=s[t.__cacheKey];void 0!==i&&(s[t.__cacheKey].usedTimes--,0===i.usedTimes&&C(n)),t.__cacheKey=a,t.__webglTexture=s[a].texture}return r}function I(t,i,o){let l=3553;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=35866),i.isData3DTexture&&(l=32879);const c=N(t,i),h=i.source;n.bindTexture(l,t.__webglTexture,33984+o);const d=r.get(h);if(h.version!==d.__version||!0===c){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!a&&(e.wrapS!==ce||e.wrapT!==ce||e.minFilter!==he&&e.minFilter!==ge)}(i)&&!1===_(i.image);let r=b(i.image,t,!1,u);r=V(i,r);const p=_(r)||a,f=s.convert(i.format,i.encoding);let m,g=s.convert(i.type),v=S(i.internalFormat,f,g,i.encoding,i.isVideoTexture);O(l,i,p);const y=i.mipmaps,E=a&&!0!==i.isVideoTexture,M=void 0===d.__version||!0===c,A=T(i,r,p);if(i.isDepthTexture)v=6402,a?v=i.type===Ae?36012:i.type===Me?33190:i.type===Re?35056:33189:i.type===Ae&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Fe&&6402===v&&i.type!==Te&&i.type!==Me&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Me,g=s.convert(i.type)),i.format===ze&&6402===v&&(v=34041,i.type!==Re&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Re,g=s.convert(i.type))),M&&(E?n.texStorage2D(3553,1,v,r.width,r.height):n.texImage2D(3553,0,v,r.width,r.height,0,f,g,null));else if(i.isDataTexture)if(y.length>0&&p){E&&M&&n.texStorage2D(3553,A,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],E?n.texSubImage2D(3553,e,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,e,v,m.width,m.height,0,f,g,m.data);i.generateMipmaps=!1}else E?(M&&n.texStorage2D(3553,A,v,r.width,r.height),n.texSubImage2D(3553,0,0,0,r.width,r.height,f,g,r.data)):n.texImage2D(3553,0,v,r.width,r.height,0,f,g,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){E&&M&&n.texStorage3D(35866,A,v,y[0].width,y[0].height,r.depth);for(let e=0,t=y.length;e<t;e++)m=y[e],i.format!==Ne?null!==f?E?n.compressedTexSubImage3D(35866,e,0,0,0,m.width,m.height,r.depth,f,m.data,0,0):n.compressedTexImage3D(35866,e,v,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage3D(35866,e,0,0,0,m.width,m.height,r.depth,f,g,m.data):n.texImage3D(35866,e,v,m.width,m.height,r.depth,0,f,g,m.data)}else{E&&M&&n.texStorage2D(3553,A,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],i.format!==Ne?null!==f?E?n.compressedTexSubImage2D(3553,e,0,0,m.width,m.height,f,m.data):n.compressedTexImage2D(3553,e,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?n.texSubImage2D(3553,e,0,0,m.width,m.height,f,g,m.data):n.texImage2D(3553,e,v,m.width,m.height,0,f,g,m.data)}else if(i.isDataArrayTexture)E?(M&&n.texStorage3D(35866,A,v,r.width,r.height,r.depth),n.texSubImage3D(35866,0,0,0,0,r.width,r.height,r.depth,f,g,r.data)):n.texImage3D(35866,0,v,r.width,r.height,r.depth,0,f,g,r.data);else if(i.isData3DTexture)E?(M&&n.texStorage3D(32879,A,v,r.width,r.height,r.depth),n.texSubImage3D(32879,0,0,0,0,r.width,r.height,r.depth,f,g,r.data)):n.texImage3D(32879,0,v,r.width,r.height,r.depth,0,f,g,r.data);else if(i.isFramebufferTexture){if(M)if(E)n.texStorage2D(3553,A,v,r.width,r.height);else{let e=r.width,t=r.height;for(let r=0;r<A;r++)n.texImage2D(3553,r,v,e,t,0,f,g,null),e>>=1,t>>=1}}else if(y.length>0&&p){E&&M&&n.texStorage2D(3553,A,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],E?n.texSubImage2D(3553,e,0,0,f,g,m):n.texImage2D(3553,e,v,f,g,m);i.generateMipmaps=!1}else E?(M&&n.texStorage2D(3553,A,v,r.width,r.height),n.texSubImage2D(3553,0,0,0,f,g,r)):n.texImage2D(3553,0,v,f,g,r);x(i,p)&&w(l),d.__version=h.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function D(t,i,o,a,l){const c=s.convert(o.format,o.encoding),u=s.convert(o.type),h=S(o.internalFormat,c,u,o.encoding);r.get(i).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(36160,t),B(i)?d.framebufferTexture2DMultisampleEXT(36160,a,l,r.get(o).__webglTexture,0,U(i)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,a,l,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function F(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r||B(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Ae?i=36012:t.type===Me&&(i=33190));const r=U(n);B(n)?d.renderbufferStorageMultisampleEXT(36161,r,i,n.width,n.height):e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=U(n);r&&!1===B(n)?e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height):B(n)?d.renderbufferStorageMultisampleEXT(36161,i,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const o=t[i],a=s.convert(o.format,o.encoding),l=s.convert(o.type),c=S(o.internalFormat,a,l,o.encoding),u=U(n);r&&!1===B(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):B(n)?d.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function z(t){const i=r.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),P(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,o=U(i);if(i.depthTexture.format===Fe)B(i)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,o):e.framebufferTexture2D(36160,36096,3553,s,0);else{if(i.depthTexture.format!==ze)throw new Error("Unknown depthTexture format");B(i)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,o):e.framebufferTexture2D(36160,33306,3553,s,0)}}(i.__webglFramebuffer,t)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),F(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),F(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function U(e){return Math.min(h,e.samples)}function B(e){const n=r.get(e);return a&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(e,n){const r=e.encoding,i=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===pn||r!==Pt&&(r===Rt?!1===a?!0===t.has("EXT_sRGB")&&i===Ne?(e.format=pn,e.minFilter=ge,e.generateMipmaps=!1):n=qn.sRGBToLinear(n):i===Ne&&s===xe||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",r)),n}this.allocateTextureUnit=function(){const e=k;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),k+=1,e},this.resetTextureUnits=function(){k=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?I(i,e,t):n.bindTexture(35866,i.__webglTexture,33984+t)},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?I(i,e,t):n.bindTexture(32879,i.__webglTexture,33984+t)},this.setTextureCube=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,i,o){if(6!==i.image.length)return;const l=N(t,i),u=i.source;n.bindTexture(34067,t.__webglTexture,33984+o);const h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(33984+o),e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);const t=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=t||r?r?i.image[e].image:i.image[e]:b(i.image[e],!1,!0,c),d[e]=V(i,d[e]);const p=d[0],f=_(p)||a,m=s.convert(i.format,i.encoding),g=s.convert(i.type),v=S(i.internalFormat,m,g,i.encoding),y=a&&!0!==i.isVideoTexture,E=void 0===h.__version||!0===l;let M,A=T(i,p,f);if(O(34067,i,f),t){y&&E&&n.texStorage2D(34067,A,v,p.width,p.height);for(let e=0;e<6;e++){M=d[e].mipmaps;for(let t=0;t<M.length;t++){const r=M[t];i.format!==Ne?null!==m?y?n.compressedTexSubImage2D(34069+e,t,0,0,r.width,r.height,m,r.data):n.compressedTexImage2D(34069+e,t,v,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(34069+e,t,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t,v,r.width,r.height,0,m,g,r.data)}}}else{M=i.mipmaps,y&&E&&(M.length>0&&A++,n.texStorage2D(34067,A,v,d[0].width,d[0].height));for(let e=0;e<6;e++)if(r){y?n.texSubImage2D(34069+e,0,0,0,d[e].width,d[e].height,m,g,d[e].data):n.texImage2D(34069+e,0,v,d[e].width,d[e].height,0,m,g,d[e].data);for(let t=0;t<M.length;t++){const r=M[t].image[e].image;y?n.texSubImage2D(34069+e,t+1,0,0,r.width,r.height,m,g,r.data):n.texImage2D(34069+e,t+1,v,r.width,r.height,0,m,g,r.data)}}else{y?n.texSubImage2D(34069+e,0,0,0,m,g,d[e]):n.texImage2D(34069+e,0,v,m,g,d[e]);for(let t=0;t<M.length;t++){const r=M[t];y?n.texSubImage2D(34069+e,t+1,0,0,m,g,r.image[e]):n.texImage2D(34069+e,t+1,v,m,g,r.image[e])}}}x(i,f)&&w(34067),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(o,t,i):n.bindTexture(34067,o.__webglTexture,33984+i)},this.rebindTextures=function(e,t,n){const i=r.get(e);void 0!==t&&D(i.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&z(e)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,o.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=_(t)||a;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&t.samples>0&&!1===B(t)){const r=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const o=s.convert(i.format,i.encoding),a=s.convert(i.type),l=S(i.internalFormat,o,a,i.encoding,!0===t.isXRRenderTarget),u=U(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),F(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),O(34067,l,p);for(let e=0;e<6;e++)D(c.__webglFramebuffer[e],t,l,36064,34069+e);x(l,p)&&w(34067),n.unbindTexture()}else if(d){const e=t.texture;for(let i=0,s=e.length;i<s;i++){const s=e[i],o=r.get(s);n.bindTexture(3553,o.__webglTexture),O(3553,s,p),D(c.__webglFramebuffer,t,s,36064+i,3553),x(s,p)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(a?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),O(e,l,p),D(c.__webglFramebuffer,t,l,36064,e),x(l,p)&&w(e),n.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(e){const t=_(e)||a,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,o=i.length;s<o;s++){const o=i[s];if(x(o,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(o).__webglTexture;n.bindTexture(t,i),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(a&&t.samples>0&&!1===B(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,o=t.height;let a=16384;const l=[],c=t.stencilBuffer?33306:36096,u=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===d&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,s,o,0,0,s,o,a,9728),p&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);const s=r.get(i[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,s,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=D,this.useMultisampledRTT=B}function Xa(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=null){let s;if(n===xe)return 5121;if(n===ke)return 32819;if(n===Pe)return 32820;if(n===we)return 5120;if(n===Se)return 5122;if(n===Te)return 5123;if(n===Ee)return 5124;if(n===Me)return 5125;if(n===Ae)return 5126;if(n===Ce)return r?5131:(s=t.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(n===Le)return 6406;if(n===Ne)return 6408;if(n===Ie)return 6409;if(n===De)return 6410;if(n===Fe)return 6402;if(n===ze)return 34041;if(n===Ue)return 6403;if(n===Oe)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===pn)return s=t.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(n===Be)return 36244;if(n===Ve)return 33319;if(n===Ge)return 33320;if(n===Ze)return 36249;if(n===He||n===je||n===We||n===qe)if(i===Rt){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===He)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===je)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===We)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===qe)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===He)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===je)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===We)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===qe)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Ke||n===Xe||n===Ye||n===Je){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===Ke)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Xe)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ye)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Je)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===$e)return s=t.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Qe||n===et){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===Qe)return i===Rt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===et)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===tt||n===nt||n===rt||n===it||n===st||n===ot||n===at||n===lt||n===ct||n===ut||n===ht||n===dt||n===pt||n===ft){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===tt)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===nt)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===rt)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===it)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===st)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ot)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===at)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===lt)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===ct)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ut)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ht)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===dt)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===pt)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ft)return i===Rt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===mt){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===mt)return i===Rt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Re?r?34042:(s=t.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class Ya extends fs{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ja extends ai{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $a={type:"move"};class Qa{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ja,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ja,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new or,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new or),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ja,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new or,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new or),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new Ja;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&o>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent($a)))}return null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==s),this}}class el extends Jn{constructor(e,t,n,r,i,s,o,a,l,c){if((c=void 0!==c?c:Fe)!==Fe&&c!==ze)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Fe&&(n=Me),void 0===n&&c===ze&&(n=Re),super(null,r,i,s,o,a,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:he,this.minFilter=void 0!==a?a:he,this.flipY=!1,this.generateMipmaps=!1}}class tl extends fn{constructor(e,t){super();const n=this;let r=null,i=1,s=null,o="local-floor",a=null,l=null,c=null,u=null,h=null,d=null;const p=t.getContextAttributes();let f=null,m=null;const g=[],v=[],y=new fs;y.layers.enable(1),y.viewport=new $n;const b=new fs;b.layers.enable(2),b.viewport=new $n;const _=[y,b],x=new Ya;x.layers.enable(1),x.layers.enable(2);let w=null,S=null;function T(e){const t=v.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function E(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",E),r.removeEventListener("inputsourceschange",M);for(let e=0;e<g.length;e++){const t=v[e];null!==t&&(v[e]=null,g[e].disconnect(t))}w=null,S=null,e.setRenderTarget(f),h=null,u=null,c=null,r=null,m=null,R.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function M(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=v.indexOf(n);r>=0&&(v[r]=null,g[r].dispatchEvent({type:"disconnected",data:n}))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=v.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=v.length){v.push(n),r=e;break}if(null===v[e]){v[e]=n,r=e;break}}if(-1===r)break}const i=g[r];i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new Qa,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new Qa,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new Qa,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a||s},this.setReferenceSpace=function(e){a=e},this.getBaseLayer=function(){return null!==u?u:h},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(f=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",E),r.addEventListener("inputsourceschange",M),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),m=new Qn(h.framebufferWidth,h.framebufferHeight,{format:Ne,type:xe,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let n=null,s=null,o=null;p.depth&&(o=p.stencil?35056:33190,n=p.stencil?ze:Fe,s=p.stencil?Re:Me);const a={colorFormat:32856,depthFormat:o,scaleFactor:i};c=new XRWebGLBinding(r,t),u=c.createProjectionLayer(a),r.updateRenderState({layers:[u]}),m=new Qn(u.textureWidth,u.textureHeight,{format:Ne,type:xe,depthTexture:new el(u.textureWidth,u.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});e.properties.get(m).__ignoreDepthValues=u.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),a=null,s=await r.requestReferenceSpace(o),R.setContext(r),R.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const A=new or,C=new or;function k(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;x.near=b.near=y.near=e.near,x.far=b.far=y.far=e.far,w===x.near&&S===x.far||(r.updateRenderState({depthNear:x.near,depthFar:x.far}),w=x.near,S=x.far);const t=e.parent,n=x.cameras;k(x,t);for(let e=0;e<n.length;e++)k(n[e],t);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),e.matrix.copy(x.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){A.setFromMatrixPosition(t.matrixWorld),C.setFromMatrixPosition(n.matrixWorld);const r=A.distanceTo(C),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,o=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(s[8]+1)/s[0],d=o*u,p=o*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=o+f,v=a+f,y=d-m,b=p+(r-m),_=l*a/v*g,x=c*a/v*g;e.projectionMatrix.makePerspective(y,b,_,x,g,v)}(x,y,b):x.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(e){null!==u&&(u.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let P=null;const R=new Ms;R.setAnimationLoop((function(t,n){if(l=n.getViewerPose(a||s),d=n,null!==l){const t=l.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let n=!1;t.length!==x.cameras.length&&(x.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let s=null;if(null!==h)s=h.getViewport(i);else{const t=c.getViewSubImage(u,i);s=t.viewport,0===r&&(e.setRenderTargetTextures(m,t.colorTexture,u.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(m))}let o=_[r];void 0===o&&(o=new fs,o.layers.enable(r),o.viewport=new $n,_[r]=o),o.matrix.fromArray(i.transform.matrix),o.projectionMatrix.fromArray(i.projectionMatrix),o.viewport.set(s.x,s.y,s.width,s.height),0===r&&x.matrix.copy(o.matrix),!0===n&&x.cameras.push(o)}}for(let e=0;e<g.length;e++){const t=v[e],r=g[e];null!==t&&void 0!==r&&r.update(t,n,a||s)}P&&P(t,n),d=null})),this.setAnimationLoop=function(e){P=e},this.dispose=function(){}}}function nl(e,t){function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map),r.alphaMap&&(n.alphaMap.value=r.alphaMap),r.bumpMap&&(n.bumpMap.value=r.bumpMap,n.bumpScale.value=r.bumpScale,r.side===m&&(n.bumpScale.value*=-1)),r.displacementMap&&(n.displacementMap.value=r.displacementMap,n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap),r.normalMap&&(n.normalMap.value=r.normalMap,n.normalScale.value.copy(r.normalScale),r.side===m&&n.normalScale.value.negate()),r.specularMap&&(n.specularMap.value=r.specularMap),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const i=t.get(r).envMap;if(i&&(n.envMap.value=i,n.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t}let s,o;r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity),r.map?s=r.map:r.specularMap?s=r.specularMap:r.displacementMap?s=r.displacementMap:r.normalMap?s=r.normalMap:r.bumpMap?s=r.bumpMap:r.roughnessMap?s=r.roughnessMap:r.metalnessMap?s=r.metalnessMap:r.alphaMap?s=r.alphaMap:r.emissiveMap?s=r.emissiveMap:r.clearcoatMap?s=r.clearcoatMap:r.clearcoatNormalMap?s=r.clearcoatNormalMap:r.clearcoatRoughnessMap?s=r.clearcoatRoughnessMap:r.iridescenceMap?s=r.iridescenceMap:r.iridescenceThicknessMap?s=r.iridescenceThicknessMap:r.specularIntensityMap?s=r.specularIntensityMap:r.specularColorMap?s=r.specularColorMap:r.transmissionMap?s=r.transmissionMap:r.thicknessMap?s=r.thicknessMap:r.sheenColorMap?s=r.sheenColorMap:r.sheenRoughnessMap&&(s=r.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uvTransform.value.copy(s.matrix)),r.aoMap?o=r.aoMap:r.lightMap&&(o=r.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uv2Transform.value.copy(o.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,s,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===m&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function rl(e,t,n,r){let i={},s={},o=[];const a=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){const r=e.value;if(void 0===n[t])return n[t]="number"==typeof r?r:r.clone(),!0;if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=n[t];if(!1===e.equals(r))return e.copy(r),!0}return!1}function c(e){const t=e.value,n={boundary:0,storage:0};return"number"==typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const r=16;let i=0;for(let e=0,s=t.length;e<s;e++){const s=t[e],o=c(s);if(s.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),s.__offset=n,e>0){i=n%r;const e=r-i;0!==i&&e-o.boundary<0&&(n+=r-i,s.__offset=n)}n+=o.storage}i=n%r,i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<a;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,s=t.usage;return e.bindBuffer(35345,r),e.bufferData(35345,i,s),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const p=h.program;r.updateUBOMapping(n,p);const f=t.render.frame;s[n.id]!==f&&(!function(t){const n=i[t.id],r=t.uniforms,s=t.__cache;e.bindBuffer(35345,n);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(!0===l(n,t,s)){const t=n.value,r=n.__offset;"number"==typeof t?(n.__data[0]=t,e.bufferSubData(35345,r,n.__data)):(n.value.isMatrix3?(n.__data[0]=n.value.elements[0],n.__data[1]=n.value.elements[1],n.__data[2]=n.value.elements[2],n.__data[3]=n.value.elements[0],n.__data[4]=n.value.elements[3],n.__data[5]=n.value.elements[4],n.__data[6]=n.value.elements[5],n.__data[7]=n.value.elements[0],n.__data[8]=n.value.elements[6],n.__data[9]=n.value.elements[7],n.__data[10]=n.value.elements[8],n.__data[11]=n.value.elements[0]):t.toArray(n.__data),e.bufferSubData(35345,r,n.__data))}}e.bindBuffer(35345,null)}(n),s[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);o=[],i={},s={}}}}function il(e={}){this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=Nn("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,c=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h;h=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let d=null,p=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Pt,this.physicallyCorrectLights=!1,this.toneMapping=Y,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const b=this;let _=!1,x=0,w=0,S=null,T=-1,E=null;const M=new $n,A=new $n;let C=null,k=t.width,P=t.height,R=1,L=null,O=null;const N=new $n(0,0,k,P),I=new $n(0,0,k,P);let D=!1;const F=new Es;let z=!1,U=!1,B=null;const V=new Dr,G=new kn,Z=new or,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===S?R:1}let W,q,K,X,J,$,Q,ee,te,ne,re,ie,se,oe,ae,le,ce,ue,he,de,pe,fe,me,ge,ve=n;function ye(e,n){for(let r=0;r<e.length;r++){const i=e[r],s=t.getContext(i,n);if(null!==s)return s}return null}try{const e={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${r}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",Te,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&t.shift(),ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function _e(){W=new eo(ve),q=new Is(ve,W,e),W.init(q),fe=new Xa(ve,W,q),K=new qa(ve,W,q),X=new ro,J=new Oa,$=new Ka(ve,W,K,J,q,fe,X),Q=new Fs(b),ee=new Qs(b),te=new As(ve,q),me=new Os(ve,W,te,q),ne=new to(ve,te,X,me),re=new ao(ve,ne,te,X),he=new oo(ve,q,$),le=new Ds(J),ie=new La(b,Q,ee,W,q,me,le),se=new nl(b,J),oe=new Fa,ae=new Za(W,q),ue=new Ls(b,Q,ee,K,re,h,a),ce=new Wa(b,re,q),ge=new rl(ve,X,q,K),de=new Ns(ve,W,X,q),pe=new no(ve,W,X,q),X.programs=ie.programs,b.capabilities=q,b.extensions=W,b.properties=J,b.renderLists=oe,b.shadowMap=ce,b.state=K,b.info=X}_e();const we=new tl(b,ve);function Se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const e=X.autoReset,t=ce.enabled,n=ce.autoUpdate,r=ce.needsUpdate,i=ce.type;_e(),X.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=r,ce.type=i}function Ee(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Me(e){const t=e.target;t.removeEventListener("dispose",Me),function(e){(function(e){const t=J.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),J.remove(e)}(t)}this.xr=we,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=W.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=W.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(e){void 0!==e&&(R=e,this.setSize(k,P,!1))},this.getSize=function(e){return e.set(k,P)},this.setSize=function(e,n,r){we.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(k=e,P=n,t.width=Math.floor(e*R),t.height=Math.floor(n*R),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(k*R,P*R).floor()},this.setDrawingBufferSize=function(e,n,r){k=e,P=n,R=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(N)},this.setViewport=function(e,t,n,r){e.isVector4?N.set(e.x,e.y,e.z,e.w):N.set(e,t,n,r),K.viewport(M.copy(N).multiplyScalar(R).floor())},this.getScissor=function(e){return e.copy(I)},this.setScissor=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),K.scissor(A.copy(I).multiplyScalar(R).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){K.setScissorTest(D=e)},this.setOpaqueSort=function(e){L=e},this.setTransparentSort=function(e){O=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=16384),t&&(r|=256),n&&(r|=1024),ve.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",Te,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),oe.dispose(),ae.dispose(),J.dispose(),Q.dispose(),ee.dispose(),re.dispose(),me.dispose(),ge.dispose(),ie.dispose(),we.dispose(),we.removeEventListener("sessionstart",Pe),we.removeEventListener("sessionend",Re),B&&(B.dispose(),B=null),Le.stop()},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=H);const o=i.isMesh&&i.matrixWorld.determinant()<0,a=function(e,t,n,r,i){!0!==t.isScene&&(t=H);$.resetTextureUnits();const s=t.fog,o=r.isMeshStandardMaterial?t.environment:null,a=null===S?b.outputEncoding:!0===S.isXRRenderTarget?S.texture.encoding:Pt,l=(r.isMeshStandardMaterial?ee:Q).get(r.envMap||o),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,m=r.toneMapped?b.toneMapping:Y,g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,y=J.get(r),_=p.state.lights;if(!0===z&&(!0===U||e!==E)){const t=e===E&&r.id===T;le.setState(r,e,t)}let x=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==_.state.version||y.outputEncoding!==a||i.isInstancedMesh&&!1===y.instancing?x=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?x=!0:i.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===r.fog&&y.fog!==s?x=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===le.numPlanes&&y.numIntersection===le.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==f||y.toneMapping!==m||!0===q.isWebGL2&&y.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:(x=!0,y.__version=r.version);let w=y.currentProgram;!0===x&&(w=ze(r,t,i));let M=!1,A=!1,C=!1;const k=w.getUniforms(),L=y.uniforms;K.useProgram(w.program)&&(M=!0,A=!0,C=!0);r.id!==T&&(T=r.id,A=!0);if(M||E!==e){if(k.setValue(ve,"projectionMatrix",e.projectionMatrix),q.logarithmicDepthBuffer&&k.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),E!==e&&(E=e,A=!0,C=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=k.map.cameraPosition;void 0!==t&&t.setValue(ve,Z.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&k.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&k.setValue(ve,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){k.setOptional(ve,i,"bindMatrix"),k.setOptional(ve,i,"bindMatrixInverse");const e=i.skeleton;e&&(q.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),k.setValue(ve,"boneTexture",e.boneTexture,$),k.setValue(ve,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const O=n.morphAttributes;(void 0!==O.position||void 0!==O.normal||void 0!==O.color&&!0===q.isWebGL2)&&he.update(i,n,r,w);(A||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,k.setValue(ve,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(L.envMap.value=l,L.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);A&&(k.setValue(ve,"toneMappingExposure",b.toneMappingExposure),y.needsLights&&(I=C,(N=L).ambientLightColor.needsUpdate=I,N.lightProbe.needsUpdate=I,N.directionalLights.needsUpdate=I,N.directionalLightShadows.needsUpdate=I,N.pointLights.needsUpdate=I,N.pointLightShadows.needsUpdate=I,N.spotLights.needsUpdate=I,N.spotLightShadows.needsUpdate=I,N.rectAreaLights.needsUpdate=I,N.hemisphereLights.needsUpdate=I),s&&!0===r.fog&&se.refreshFogUniforms(L,s),se.refreshMaterialUniforms(L,r,R,P,B),da.upload(ve,y.uniformsList,L,$));var N,I;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(da.upload(ve,y.uniformsList,L,$),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&k.setValue(ve,"center",i.center);if(k.setValue(ve,"modelViewMatrix",i.modelViewMatrix),k.setValue(ve,"normalMatrix",i.normalMatrix),k.setValue(ve,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(q.isWebGL2){const n=e[t];ge.update(n,w),ge.bind(n,w)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return w}(e,t,n,r,i);K.setMaterial(r,o);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===r.wireframe&&(l=ne.getWireframeAttribute(n),h=2),me.setup(i,r,a,n,l);let d=de;null!==l&&(u=te.get(l),d=pe,d.setIndex(u));const f=null!==l?l.count:c.count,m=n.drawRange.start*h,g=n.drawRange.count*h,v=null!==s?s.start*h:0,y=null!==s?s.count*h:1/0,_=Math.max(m,v),x=Math.min(f,m+g,v+y)-1,w=Math.max(0,x-_+1);if(0!==w){if(i.isMesh)!0===r.wireframe?(K.setLineWidth(r.wireframeLinewidth*j()),d.setMode(1)):d.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),K.setLineWidth(e*j()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);if(i.isInstancedMesh)d.renderInstances(_,w,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(_,w,e)}else d.render(_,w)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===g?(e.side=m,e.needsUpdate=!0,ze(e,t,n),e.side=f,e.needsUpdate=!0,ze(e,t,n),e.side=g):ze(e,t,n)}p=ae.get(e),p.init(),y.push(p),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))})),p.setupLights(b.physicallyCorrectLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){n(r[i],e,t)}else n(r,e,t)})),y.pop(),p=null};let ke=null;function Pe(){Le.stop()}function Re(){Le.start()}const Le=new Ms;function Oe(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){r&&Z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V);const t=re.update(e),i=e.material;i.visible&&d.push(e,t,i,n,Z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==X.render.frame&&(e.skeleton.update(),e.skeleton.frame=X.render.frame),!e.frustumCulled||F.intersectsObject(e))){r&&Z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V);const t=re.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let s=0,o=r.length;s<o;s++){const o=r[s],a=i[o.materialIndex];a&&a.visible&&d.push(e,t,a,n,Z.z,o)}}else i.visible&&d.push(e,t,i,n,Z.z,null)}const i=e.children;for(let e=0,s=i.length;e<s;e++)Oe(i[e],t,n,r)}function Ie(e,t,n,r){const i=e.opaque,s=e.transmissive,a=e.transparent;p.setupLightsView(n),s.length>0&&function(e,t,n){const r=q.isWebGL2;null===B&&(B=new Qn(1,1,{generateMipmaps:!0,type:W.has("EXT_color_buffer_half_float")?Ce:xe,minFilter:be,samples:r&&!0===o?4:0}));b.getDrawingBufferSize(G),r?B.setSize(G.x,G.y):B.setSize(En(G.x),En(G.y));const i=b.getRenderTarget();b.setRenderTarget(B),b.clear();const s=b.toneMapping;b.toneMapping=Y,De(e,t,n),b.toneMapping=s,$.updateMultisampleRenderTarget(B),$.updateRenderTargetMipmap(B),b.setRenderTarget(i)}(i,t,n),r&&K.viewport(M.copy(r)),i.length>0&&De(i,t,n),s.length>0&&De(s,t,n),a.length>0&&De(a,t,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function De(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],o=s.object,a=s.geometry,l=null===r?s.material:r,c=s.group;o.layers.test(n.layers)&&Fe(o,t,n,a,l,c)}}function Fe(e,t,n,r,i,s){e.onBeforeRender(b,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(b,t,n,r,e,s),!0===i.transparent&&i.side===g?(i.side=m,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,s),i.side=f,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,s),i.side=g):b.renderBufferDirect(n,t,r,i,e,s),e.onAfterRender(b,t,n,r,i,s)}function ze(e,t,n){!0!==t.isScene&&(t=H);const r=J.get(e),i=p.state.lights,s=p.state.shadowsArray,o=i.state.version,a=ie.getParameters(e,i.state,s,t,n),l=ie.getProgramCacheKey(a);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:Q).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",Me),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return Ue(e,a),u}else a.uniforms=ie.getUniforms(e),e.onBuild(n,a,b),e.onBeforeCompile(a,b),u=ie.acquireProgram(a,l),c.set(l,u),r.uniforms=a.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=le.uniform),Ue(e,a),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=u.getUniforms(),f=da.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=f,u}function Ue(e,t){const n=J.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Le.setAnimationLoop((function(e){ke&&ke(e)})),"undefined"!=typeof self&&Le.setContext(self),this.setAnimationLoop=function(e){ke=e,we.setAnimationLoop(e),null===e?Le.stop():Le.start()},we.addEventListener("sessionstart",Pe),we.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===we.enabled&&!0===we.isPresenting&&(!0===we.cameraAutoUpdate&&we.updateCamera(t),t=we.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,S),p=ae.get(e,y.length),p.init(),y.push(p),V.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(V),U=this.localClippingEnabled,z=le.init(this.clippingPlanes,U,t),d=oe.get(e,v.length),d.init(),v.push(d),Oe(e,t,0,b.sortObjects),d.finish(),!0===b.sortObjects&&d.sort(L,O),!0===z&&le.beginShadows();const n=p.state.shadowsArray;if(ce.render(n,e,t),!0===z&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(d,e),p.setupLights(b.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ie(d,e,r,r.viewport)}}else Ie(d,e,t);null!==S&&($.updateMultisampleRenderTarget(S),$.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(b,e,t),me.resetDefaultState(),T=-1,E=null,y.pop(),p=y.length>0?y[y.length-1]:null,v.pop(),d=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=n;const r=J.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===W.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=J.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){S=e,x=t,w=n;let r=!0,i=null,s=!1,o=!1;if(e){const n=J.get(e);void 0!==n.__useDefaultFramebuffer?(K.bindFramebuffer(36160,null),r=!1):void 0===n.__webglFramebuffer?$.setupRenderTarget(e):n.__hasExternalTextures&&$.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture);const a=e.texture;(a.isData3DTexture||a.isDataArrayTexture||a.isCompressedArrayTexture)&&(o=!0);const l=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],s=!0):i=q.isWebGL2&&e.samples>0&&!1===$.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:l,M.copy(e.viewport),A.copy(e.scissor),C=e.scissorTest}else M.copy(N).multiplyScalar(R).floor(),A.copy(I).multiplyScalar(R).floor(),C=D;if(K.bindFramebuffer(36160,i)&&q.drawBuffers&&r&&K.drawBuffers(e,i),K.viewport(M),K.scissor(A),K.setScissorTest(C),s){const r=J.get(e.texture);ve.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(o){const r=J.get(e.texture),i=t||0;ve.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}T=-1},this.readRenderTargetPixels=function(e,t,n,r,i,s,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){K.bindFramebuffer(36160,a);try{const o=e.texture,a=o.format,l=o.type;if(a!==Ne&&fe.convert(a)!==ve.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===Ce&&(W.has("EXT_color_buffer_half_float")||q.isWebGL2&&W.has("EXT_color_buffer_float"));if(!(l===xe||fe.convert(l)===ve.getParameter(35738)||l===Ae&&(q.isWebGL2||W.has("OES_texture_float")||W.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ve.readPixels(t,n,r,i,fe.convert(a),fe.convert(l),s)}finally{const e=null!==S?J.get(S).__webglFramebuffer:null;K.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),s=Math.floor(t.image.height*r);$.setTexture2D(t,0),ve.copyTexSubImage2D(3553,n,0,0,e.x,e.y,i,s),K.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,s=t.image.height,o=fe.convert(n.format),a=fe.convert(n.type);$.setTexture2D(n,0),ve.pixelStorei(37440,n.flipY),ve.pixelStorei(37441,n.premultiplyAlpha),ve.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(3553,r,e.x,e.y,i,s,o,a,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ve.texSubImage2D(3553,r,e.x,e.y,o,a,t.image),0===r&&n.generateMipmaps&&ve.generateMipmap(3553),K.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(b.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,a=e.max.z-e.min.z+1,l=fe.convert(r.format),c=fe.convert(r.type);let u;if(r.isData3DTexture)$.setTexture3D(r,0),u=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");$.setTexture2DArray(r,0),u=35866}ve.pixelStorei(37440,r.flipY),ve.pixelStorei(37441,r.premultiplyAlpha),ve.pixelStorei(3317,r.unpackAlignment);const h=ve.getParameter(3314),d=ve.getParameter(32878),p=ve.getParameter(3316),f=ve.getParameter(3315),m=ve.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ve.pixelStorei(3314,g.width),ve.pixelStorei(32878,g.height),ve.pixelStorei(3316,e.min.x),ve.pixelStorei(3315,e.min.y),ve.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(u,i,t.x,t.y,t.z,s,o,a,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(u,i,t.x,t.y,t.z,s,o,a,l,g.data)):ve.texSubImage3D(u,i,t.x,t.y,t.z,s,o,a,l,c,g),ve.pixelStorei(3314,h),ve.pixelStorei(32878,d),ve.pixelStorei(3316,p),ve.pixelStorei(3315,f),ve.pixelStorei(32877,m),0===i&&r.generateMipmaps&&ve.generateMipmap(u),K.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?$.setTextureCube(e,0):e.isData3DTexture?$.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?$.setTexture2DArray(e,0):$.setTexture2D(e,0),K.unbindTexture()},this.resetState=function(){x=0,w=0,S=null,K.reset(),me.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class sl extends il{}sl.prototype.isWebGL1Renderer=!0;class ol{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new jn(e),this.density=t}clone(){return new ol(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class al{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new jn(e),this.near=t,this.far=n}clone(){return new al(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class ll extends ai{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.backgroundBlurriness=this.backgroundBlurriness),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class cl{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=tn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=bn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=bn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=bn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ul=new or;class hl{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ul.fromBufferAttribute(this,t),ul.applyMatrix4(e),this.setXYZ(t,ul.x,ul.y,ul.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ul.fromBufferAttribute(this,t),ul.applyNormalMatrix(e),this.setXYZ(t,ul.x,ul.y,ul.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ul.fromBufferAttribute(this,t),ul.transformDirection(e),this.setXYZ(t,ul.x,ul.y,ul.z);return this}setX(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=An(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Mn(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Mn(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Mn(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Mn(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),n=An(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),n=An(n,this.array),r=An(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=An(t,this.array),n=An(n,this.array),r=An(r,this.array),i=An(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Ti(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new hl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class dl extends _i{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new jn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let pl;const fl=new or,ml=new or,gl=new or,vl=new kn,yl=new kn,bl=new Dr,_l=new or,xl=new or,wl=new or,Sl=new kn,Tl=new kn,El=new kn;class Ml extends ai{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===pl){pl=new Gi;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new cl(e,5);pl.setIndex([0,1,2,0,2,3]),pl.setAttribute("position",new hl(t,3,0,!1)),pl.setAttribute("uv",new hl(t,2,3,!1))}this.geometry=pl,this.material=void 0!==e?e:new dl,this.center=new kn(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ml.setFromMatrixScale(this.matrixWorld),bl.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),gl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ml.multiplyScalar(-gl.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;Al(_l.set(-.5,-.5,0),gl,s,ml,r,i),Al(xl.set(.5,-.5,0),gl,s,ml,r,i),Al(wl.set(.5,.5,0),gl,s,ml,r,i),Sl.set(0,0),Tl.set(1,0),El.set(1,1);let o=e.ray.intersectTriangle(_l,xl,wl,!1,fl);if(null===o&&(Al(xl.set(-.5,.5,0),gl,s,ml,r,i),Tl.set(0,1),o=e.ray.intersectTriangle(_l,wl,xl,!1,fl),null===o))return;const a=e.ray.origin.distanceTo(fl);a<e.near||a>e.far||t.push({distance:a,point:fl.clone(),uv:yi.getUV(fl,_l,xl,wl,Sl,Tl,El,new kn),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Al(e,t,n,r,i,s){vl.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(yl.x=s*vl.x-i*vl.y,yl.y=i*vl.x+s*vl.y):yl.copy(vl),e.copy(t),e.x+=yl.x,e.y+=yl.y,e.applyMatrix4(bl)}const Cl=new or,kl=new or;class Pl extends ai{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Cl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Cl);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Cl.setFromMatrixPosition(e.matrixWorld),kl.setFromMatrixPosition(this.matrixWorld);const n=Cl.distanceTo(kl)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}const Rl=new or,Ll=new $n,Ol=new $n,Nl=new or,Il=new Dr;class Dl extends os{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Dr,this.bindMatrixInverse=new Dr}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new $n,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Ll.fromBufferAttribute(r.attributes.skinIndex,e),Ol.fromBufferAttribute(r.attributes.skinWeight,e),Rl.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Ol.getComponent(e);if(0!==r){const i=Ll.getComponent(e);Il.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Nl.copy(Rl).applyMatrix4(Il),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Fl extends ai{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zl extends Jn{constructor(e=null,t=1,n=1,r,i,s,o,a,l=he,c=he,u,h){super(null,s,o,a,l,c,r,i,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Ul=new Dr,Bl=new Dr;class Vl{constructor(e=[],t=[]){this.uuid=bn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Dr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Dr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:Bl;Ul.multiplyMatrices(i,t[r]),Ul.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Vl(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Tn(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new zl(t,e,e,Ne,Ae);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Fl),this.bones.push(i),this.boneInverses.push((new Dr).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const s=n[r];e.boneInverses.push(s.toArray())}return e}}class Gl extends Ti{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Zl=new Dr,Hl=new Dr,jl=[],Wl=new Dr,ql=new os;class Kl extends os{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Gl(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let e=0;e<n;e++)this.setMatrixAt(e,Wl)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(ql.geometry=this.geometry,ql.material=this.material,void 0!==ql.material)for(let i=0;i<r;i++){this.getMatrixAt(i,Zl),Hl.multiplyMatrices(n,Zl),ql.matrixWorld=Hl,ql.raycast(e,jl);for(let e=0,n=jl.length;e<n;e++){const n=jl[e];n.instanceId=i,n.object=this,t.push(n)}jl.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Gl(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Xl extends _i{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new jn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Yl=new or,Jl=new or,$l=new Dr,Ql=new Ir,ec=new Ar;class tc extends ai{constructor(e=new Gi,t=new Xl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Yl.fromBufferAttribute(t,e-1),Jl.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Yl.distanceTo(Jl);e.setAttribute("lineDistance",new Oi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ec.copy(n.boundingSphere),ec.applyMatrix4(r),ec.radius+=i,!1===e.ray.intersectsSphere(ec))return;$l.copy(r).invert(),Ql.copy(e.ray).applyMatrix4($l);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new or,c=new or,u=new or,h=new or,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,s.start),r=Math.min(p.count,s.start+s.count)-1;n<r;n+=d){const r=p.getX(n),i=p.getX(n+1);l.fromBufferAttribute(f,r),c.fromBufferAttribute(f,i);if(Ql.distanceSqToSegment(l,c,h,u)>a)continue;h.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(h);s<e.near||s>e.far||t.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),r=Math.min(f.count,s.start+s.count)-1;n<r;n+=d){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(Ql.distanceSqToSegment(l,c,h,u)>a)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const nc=new or,rc=new or;class ic extends tc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)nc.fromBufferAttribute(t,e),rc.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+nc.distanceTo(rc);e.setAttribute("lineDistance",new Oi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class sc extends tc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class oc extends _i{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new jn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ac=new Dr,lc=new Ir,cc=new Ar,uc=new or;class hc extends ai{constructor(e=new Gi,t=new oc){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),cc.copy(n.boundingSphere),cc.applyMatrix4(r),cc.radius+=i,!1===e.ray.intersectsSphere(cc))return;ac.copy(r).invert(),lc.copy(e.ray).applyMatrix4(ac);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,s.start),i=Math.min(l.count,s.start+s.count);n<i;n++){const i=l.getX(n);uc.fromBufferAttribute(c,i),dc(uc,i,a,r,e,t,this)}}else{for(let n=Math.max(0,s.start),i=Math.min(c.count,s.start+s.count);n<i;n++)uc.fromBufferAttribute(c,n),dc(uc,n,a,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function dc(e,t,n,r,i,s,o){const a=lc.distanceSqToPoint(e);if(a<n){const n=new or;lc.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:o})}}class pc extends Jn{constructor(e,t,n,r,i,s,o,a,l){super(e,t,n,r,i,s,o,a,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:ge,this.magFilter=void 0!==i?i:ge,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class fc extends Jn{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=he,this.minFilter=he,this.generateMipmaps=!1,this.needsUpdate=!0}}class mc extends Jn{constructor(e,t,n,r,i,s,o,a,l,c,u,h){super(null,s,o,a,l,c,r,i,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class gc extends mc{constructor(e,t,n,r,i,s){super(e,t,n,i,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=ce}}class vc extends Jn{constructor(e,t,n,r,i,s,o,a,l){super(e,t,n,r,i,s,o,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class yc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let s;s=t||e*n[i-1];let o,a=0,l=i-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),o=n[r]-s,o<0)a=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,n[r]===s)return r/(i-1);const c=n[r];return(r+(s-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),o=this.getPoint(i),a=t||(s.isVector2?new kn:new or);return a.copy(o).sub(s).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new or,r=[],i=[],s=[],o=new or,a=new Dr;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new or)}i[0]=new or,s[0]=new or;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),s[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),s[t]=s[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(_n(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(a.makeRotationAxis(o,e))}s[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(_n(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],t*n)),s[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class bc extends yc{constructor(e=0,t=0,n=1,r=1,i=0,s=2*Math.PI,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(e,t){const n=t||new kn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class _c extends bc{constructor(e,t,n,r,i,s){super(e,t,n,n,r,i,s),this.isArcCurve=!0,this.type="ArcCurve"}}function xc(){let e=0,t=0,n=0,r=0;function i(i,s,o,a){e=i,t=o,n=-3*i+3*s-2*o-a,r=2*i-2*s+o+a}return{initCatmullRom:function(e,t,n,r,s){i(t,n,s*(n-e),s*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,s,o,a){let l=(t-e)/s-(n-e)/(s+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+a)+(r-n)/a;l*=o,c*=o,i(t,n,l,c)},calc:function(i){const s=i*i;return e+t*i+n*s+r*(s*i)}}}const wc=new or,Sc=new xc,Tc=new xc,Ec=new xc;class Mc extends yc{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new or){const n=t,r=this.points,i=r.length,s=(i-(this.closed?0:1))*e;let o,a,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?o=r[(l-1)%i]:(wc.subVectors(r[0],r[1]).add(r[0]),o=wc);const u=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(wc.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=wc),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Sc.initNonuniformCatmullRom(o.x,u.x,h.x,a.x,t,n,r),Tc.initNonuniformCatmullRom(o.y,u.y,h.y,a.y,t,n,r),Ec.initNonuniformCatmullRom(o.z,u.z,h.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(Sc.initCatmullRom(o.x,u.x,h.x,a.x,this.tension),Tc.initCatmullRom(o.y,u.y,h.y,a.y,this.tension),Ec.initCatmullRom(o.z,u.z,h.z,a.z,this.tension));return n.set(Sc.calc(c),Tc.calc(c),Ec.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new or).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ac(e,t,n,r,i){const s=.5*(r-t),o=.5*(i-n),a=e*e;return(2*n-2*r+s+o)*(e*a)+(-3*n+3*r-2*s-o)*a+s*e+n}function Cc(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function kc(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class Pc extends yc{constructor(e=new kn,t=new kn,n=new kn,r=new kn){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new kn){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(kc(e,r.x,i.x,s.x,o.x),kc(e,r.y,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Rc extends yc{constructor(e=new or,t=new or,n=new or,r=new or){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new or){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(kc(e,r.x,i.x,s.x,o.x),kc(e,r.y,i.y,s.y,o.y),kc(e,r.z,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Lc extends yc{constructor(e=new kn,t=new kn){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new kn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new kn;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Oc extends yc{constructor(e=new or,t=new or){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new or){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Nc extends yc{constructor(e=new kn,t=new kn,n=new kn){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new kn){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Cc(e,r.x,i.x,s.x),Cc(e,r.y,i.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ic extends yc{constructor(e=new or,t=new or,n=new or){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new or){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Cc(e,r.x,i.x,s.x),Cc(e,r.y,i.y,s.y),Cc(e,r.z,i.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Dc extends yc{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new kn){const n=t,r=this.points,i=(r.length-1)*e,s=Math.floor(i),o=i-s,a=r[0===s?s:s-1],l=r[s],c=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return n.set(Ac(o,a.x,l.x,c.x,u.x),Ac(o,a.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new kn).fromArray(n))}return this}}var Fc=Object.freeze({__proto__:null,ArcCurve:_c,CatmullRomCurve3:Mc,CubicBezierCurve:Pc,CubicBezierCurve3:Rc,EllipseCurve:bc,LineCurve:Lc,LineCurve3:Oc,QuadraticBezierCurve:Nc,QuadraticBezierCurve3:Ic,SplineCurve:Dc});class zc extends yc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Lc(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,s=this.curves[i],o=s.getLength(),a=0===o?0:1-e/o;return s.getPointAt(a,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],o=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,a=s.getPoints(o);for(let e=0;e<a.length;e++){const r=a[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Fc[n.type]).fromJSON(n))}return this}}class Uc extends zc{constructor(e){super(),this.type="Path",this.currentPoint=new kn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Lc(this.currentPoint.clone(),new kn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Nc(this.currentPoint.clone(),new kn(e,t),new kn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,s){const o=new Pc(this.currentPoint.clone(),new kn(e,t),new kn(n,r),new kn(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Dc(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,n,r,i,s),this}absarc(e,t,n,r,i,s){return this.absellipse(e,t,n,n,r,i,s),this}ellipse(e,t,n,r,i,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,s,o,a),this}absellipse(e,t,n,r,i,s,o,a){const l=new bc(e,t,n,r,i,s,o,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Bc extends Gi{constructor(e=[new kn(0,-.5),new kn(.5,0),new kn(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=_n(r,0,2*Math.PI);const i=[],s=[],o=[],a=[],l=[],c=1/t,u=new or,h=new kn,d=new or,p=new or,f=new or;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case e.length-1:a.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),a.push(d.x,d.y,d.z),f.copy(p)}for(let i=0;i<=t;i++){const d=n+i*c*r,p=Math.sin(d),f=Math.cos(d);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*p,u.y=e[n].y,u.z=e[n].x*f,s.push(u.x,u.y,u.z),h.x=i/t,h.y=n/(e.length-1),o.push(h.x,h.y);const r=a[3*n+0]*p,c=a[3*n+1],d=a[3*n+0]*f;l.push(r,c,d)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,s=r,o=r+e.length,a=r+e.length+1,l=r+1;i.push(s,o,l),i.push(a,l,o)}this.setIndex(i),this.setAttribute("position",new Oi(s,3)),this.setAttribute("uv",new Oi(o,2)),this.setAttribute("normal",new Oi(l,3))}static fromJSON(e){return new Bc(e.points,e.segments,e.phiStart,e.phiLength)}}class Vc extends Bc{constructor(e=1,t=1,n=4,r=8){const i=new Uc;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new Vc(e.radius,e.length,e.capSegments,e.radialSegments)}}class Gc extends Gi{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],s=[],o=[],a=[],l=new or,c=new kn;s.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const h=n+i/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),s.push(l.x,l.y,l.z),o.push(0,0,1),c.x=(s[u]/e+1)/2,c.y=(s[u+1]/e+1)/2,a.push(c.x,c.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new Oi(s,3)),this.setAttribute("normal",new Oi(o,3)),this.setAttribute("uv",new Oi(a,2))}static fromJSON(e){return new Gc(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Zc extends Gi{constructor(e=1,t=1,n=1,r=8,i=1,s=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,s=new kn,f=new or;let v=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;const _=p;for(let e=0;e<=r;e++){const t=e/r*a+o,n=Math.cos(t),i=Math.sin(t);f.x=y*i,f.y=m*b,f.z=y*n,u.push(f.x,f.y,f.z),h.push(0,b,0),s.x=.5*n+.5,s.y=.5*i*b+.5,d.push(s.x,s.y),p++}for(let e=0;e<r;e++){const t=i+e,r=_+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const s=new or,v=new or;let y=0;const b=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*a+o,l=Math.sin(i),f=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*f,u.push(v.x,v.y,v.z),s.set(l,b,f).normalize(),h.push(s.x,s.y,s.z),d.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],s=f[t][e+1];c.push(n,r,s),c.push(r,i,s),y+=6}l.addGroup(g,y,0),g+=y}(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Oi(u,3)),this.setAttribute("normal",new Oi(h,3)),this.setAttribute("uv",new Oi(d,2))}static fromJSON(e){return new Zc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Hc extends Zc{constructor(e=1,t=1,n=8,r=1,i=!1,s=0,o=2*Math.PI){super(0,e,t,n,r,i,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:s,thetaLength:o}}static fromJSON(e){return new Hc(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jc extends Gi{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],s=[];function o(e,t,n,r){const i=r+1,s=[];for(let r=0;r<=i;r++){s[r]=[];const o=e.clone().lerp(n,r/i),a=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)s[r][e]=0===e&&r===i?o:o.clone().lerp(a,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(a(s[e][n+1]),a(s[e+1][n]),a(s[e][n])):(a(s[e][n+1]),a(s[e+1][n+1]),a(s[e+1][n]))}}function a(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new or,r=new or,i=new or;for(let s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],r),l(t[s+2],i),o(n,r,i,e)}(r),function(e){const t=new or;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new or;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,o=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);s.push(r,1-o)}var t;(function(){const e=new or,t=new or,n=new or,r=new or,o=new kn,a=new kn,l=new kn;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),o.set(s[d+0],s[d+1]),a.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=u(r);c(o,d+0,e,p),c(a,d+2,t,p),c(l,d+4,n,p)}})(),function(){for(let e=0;e<s.length;e+=6){const t=s[e+0],n=s[e+2],r=s[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),r<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new Oi(i,3)),this.setAttribute("normal",new Oi(i.slice(),3)),this.setAttribute("uv",new Oi(s,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new jc(e.vertices,e.indices,e.radius,e.details)}}class Wc extends jc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wc(e.radius,e.detail)}}const qc=new or,Kc=new or,Xc=new or,Yc=new yi;class Jc extends Gi{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(vn*t),s=e.getIndex(),o=e.getAttribute("position"),a=s?s.count:o.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<a;e+=3){s?(l[0]=s.getX(e),l[1]=s.getX(e+1),l[2]=s.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:a}=Yc;if(t.fromBufferAttribute(o,l[0]),n.fromBufferAttribute(o,l[1]),a.fromBufferAttribute(o,l[2]),Yc.getNormal(Xc),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(a.x*r)},${Math.round(a.y*r)},${Math.round(a.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],s=Yc[c[e]],o=Yc[c[t]],a=`${n}_${r}`,p=`${r}_${n}`;p in h&&h[p]?(Xc.dot(h[p].normal)<=i&&(d.push(s.x,s.y,s.z),d.push(o.x,o.y,o.z)),h[p]=null):a in h||(h[a]={index0:l[e],index1:l[t],normal:Xc.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];qc.fromBufferAttribute(o,t),Kc.fromBufferAttribute(o,n),d.push(qc.x,qc.y,qc.z),d.push(Kc.x,Kc.y,Kc.z)}this.setAttribute("position",new Oi(d,3))}}}class $c extends Uc{constructor(e){super(e),this.uuid=bn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Uc).fromJSON(n))}return this}}const Qc=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let s=eu(e,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,d,p;if(r&&(s=function(e,t,n,r){const i=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*r,l=s<o-1?t[s+1]*r:e.length,c=eu(e,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(hu(c));for(i.sort(au),s=0;s<i.length;s++)n=lu(i[s],n);return n}(e,t,s,n)),e.length>80*n){a=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<a&&(a=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-a,u-l),p=0!==p?32767/p:0}return nu(s,o,n,a,l,p,0),o};function eu(e,t,n,r,i){let s,o;if(i===function(e,t,n,r){let i=0;for(let s=t,o=n-r;s<n;s+=r)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}(e,t,n,r)>0)for(s=t;s<n;s+=r)o=xu(s,e[s],e[s+1],o);else for(s=n-r;s>=t;s-=r)o=xu(s,e[s],e[s+1],o);return o&&mu(o,o.next)&&(wu(o),o=o.next),o}function tu(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!mu(r,r.next)&&0!==fu(r.prev,r,r.next))r=r.next;else{if(wu(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function nu(e,t,n,r,i,s,o){if(!e)return;!o&&s&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=uu(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,s,o,a,l,c=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ,r);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,s);let a,l,c=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,s?iu(e,r,i,s):ru(e))t.push(a.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),wu(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?nu(e=su(tu(e),t,n),t,n,r,i,s,2):2===o&&ou(e,t,n,r,i,s):nu(tu(e),t,n,r,i,s,1);break}}function ru(e){const t=e.prev,n=e,r=e.next;if(fu(t,n,r)>=0)return!1;const i=t.x,s=n.x,o=r.x,a=t.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,d=i>s?i>o?i:o:s>o?s:o,p=a>l?a>c?a:c:l>c?l:c;let f=r.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&du(i,a,s,l,o,c,f.x,f.y)&&fu(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function iu(e,t,n,r){const i=e.prev,s=e,o=e.next;if(fu(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,h=s.y,d=o.y,p=a<l?a<c?a:c:l<c?l:c,f=u<h?u<d?u:d:h<d?h:d,m=a>l?a>c?a:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,v=uu(p,f,t,n,r),y=uu(m,g,t,n,r);let b=e.prevZ,_=e.nextZ;for(;b&&b.z>=v&&_&&_.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==o&&du(a,u,l,h,c,d,b.x,b.y)&&fu(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==o&&du(a,u,l,h,c,d,_.x,_.y)&&fu(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==o&&du(a,u,l,h,c,d,b.x,b.y)&&fu(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=y;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==o&&du(a,u,l,h,c,d,_.x,_.y)&&fu(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function su(e,t,n){let r=e;do{const i=r.prev,s=r.next.next;!mu(i,s)&&gu(i,r,r.next,s)&&bu(i,s)&&bu(s,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(s.i/n|0),wu(r),wu(r.next),r=e=s),r=r.next}while(r!==e);return tu(r)}function ou(e,t,n,r,i,s){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&pu(o,e)){let a=_u(o,e);return o=tu(o,o.next),a=tu(a,a.next),nu(o,t,n,r,i,s,0),void nu(a,t,n,r,i,s,0)}e=e.next}o=o.next}while(o!==e)}function au(e,t){return e.x-t.x}function lu(e,t){const n=function(e,t){let n,r=t,i=-1/0;const s=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){const e=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=s&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===s))return n}r=r.next}while(r!==t);if(!n)return null;const a=n,l=n.x,c=n.y;let u,h=1/0;r=n;do{s>=r.x&&r.x>=l&&s!==r.x&&du(o<c?s:i,o,l,c,o<c?i:s,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(s-r.x),bu(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&cu(n,r)))&&(n=r,h=u)),r=r.next}while(r!==a);return n}(e,t);if(!n)return t;const r=_u(n,e);return tu(r,r.next),tu(n,n.next)}function cu(e,t){return fu(e.prev,e,t.prev)<0&&fu(t.next,e,e.next)<0}function uu(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function hu(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function du(e,t,n,r,i,s,o,a){return(i-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(r-a)>=(n-o)*(t-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function pu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&gu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(bu(e,t)&&bu(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(fu(e.prev,e,t.prev)||fu(e,t.prev,t))||mu(e,t)&&fu(e.prev,e,e.next)>0&&fu(t.prev,t,t.next)>0)}function fu(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function mu(e,t){return e.x===t.x&&e.y===t.y}function gu(e,t,n,r){const i=yu(fu(e,t,n)),s=yu(fu(e,t,r)),o=yu(fu(n,r,e)),a=yu(fu(n,r,t));return i!==s&&o!==a||(!(0!==i||!vu(e,n,t))||(!(0!==s||!vu(e,r,t))||(!(0!==o||!vu(n,e,r))||!(0!==a||!vu(n,t,r)))))}function vu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function yu(e){return e>0?1:e<0?-1:0}function bu(e,t){return fu(e.prev,e,e.next)<0?fu(e,t,e.next)>=0&&fu(e,e.prev,t)>=0:fu(e,t,e.prev)<0||fu(e,e.next,t)<0}function _u(e,t){const n=new Su(e.i,e.x,e.y),r=new Su(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function xu(e,t,n,r){const i=new Su(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function wu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Su(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Tu{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Tu.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];Eu(e),Mu(n,e);let s=e.length;t.forEach(Eu);for(let e=0;e<t.length;e++)r.push(s),s+=t[e].length,Mu(n,t[e]);const o=Qc(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function Eu(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Mu(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Au extends Gi{constructor(e=new $c([new kn(.5,.5),new kn(-.5,.5),new kn(-.5,-.5),new kn(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++){s(e[t])}function s(e){const s=[],o=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Cu;let g,v,y,b,_,x=!1;f&&(g=f.getSpacedPoints(a),x=!0,c=!1,v=f.computeFrenetFrames(a,!1),y=new or,b=new or,_=new or),c||(p=0,u=0,h=0,d=0);const w=e.extractPoints(o);let S=w.shape;const T=w.holes;if(!Tu.isClockWise(S)){S=S.reverse();for(let e=0,t=T.length;e<t;e++){const t=T[e];Tu.isClockWise(t)&&(T[e]=t.reverse())}}const E=Tu.triangulateShape(S,T),M=S;for(let e=0,t=T.length;e<t;e++){const t=T[e];S=S.concat(t)}function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const C=S.length,k=E.length;function P(e,t,n){let r,i,s;const o=e.x-t.x,a=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=o*o+a*a,h=o*c-a*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=t.x-a/h,f=t.y+o/h,m=((n.x-c/d-p)*c-(n.y+l/d-f)*l)/(o*c-a*l);r=p+o*m-e.x,i=f+a*m-e.y;const g=r*r+i*i;if(g<=2)return new kn(r,i);s=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(c)&&(e=!0),e?(r=-a,i=o,s=Math.sqrt(u)):(r=o,i=a,s=Math.sqrt(u/2))}return new kn(r/s,i/s)}const R=[];for(let e=0,t=M.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),R[e]=P(M[e],M[n],M[r]);const L=[];let O,N=R.concat();for(let e=0,t=T.length;e<t;e++){const t=T[e];O=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),O[e]=P(t[e],t[r],t[i]);L.push(O),N=N.concat(O)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=A(M[e],R[e],r);F(t.x,t.y,-n)}for(let e=0,t=T.length;e<t;e++){const t=T[e];O=L[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],O[e],r);F(i.x,i.y,-n)}}}const I=h+d;for(let e=0;e<C;e++){const t=c?A(S[e],N[e],I):S[e];x?(b.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),_.copy(g[0]).add(b).add(y),F(_.x,_.y,_.z)):F(t.x,t.y,0)}for(let e=1;e<=a;e++)for(let t=0;t<C;t++){const n=c?A(S[t],N[t],I):S[t];x?(b.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),_.copy(g[e]).add(b).add(y),F(_.x,_.y,_.z)):F(n.x,n.y,l/a*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=M.length;e<t;e++){const t=A(M[e],R[e],r);F(t.x,t.y,l+n)}for(let e=0,t=T.length;e<t;e++){const t=T[e];O=L[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],O[e],r);x?F(i.x,i.y+g[a-1].y,g[a-1].x+n):F(i.x,i.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=a+2*p;e<n;e++){const n=C*e,s=C*(e+1);U(t+r+n,t+i+n,t+i+s,t+r+s)}}}function F(e,t,n){s.push(e),s.push(t),s.push(n)}function z(e,t,i){B(e),B(t),B(i);const s=r.length/3,o=m.generateTopUV(n,r,s-3,s-2,s-1);V(o[0]),V(o[1]),V(o[2])}function U(e,t,i,s){B(e),B(t),B(s),B(t),B(i),B(s);const o=r.length/3,a=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);V(a[0]),V(a[1]),V(a[3]),V(a[1]),V(a[2]),V(a[3])}function B(e){r.push(s[3*e+0]),r.push(s[3*e+1]),r.push(s[3*e+2])}function V(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=C*e;for(let e=0;e<k;e++){const n=E[e];z(n[2]+t,n[1]+t,n[0]+t)}e=a+2*p,t=C*e;for(let e=0;e<k;e++){const n=E[e];z(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<k;e++){const t=E[e];z(t[2],t[1],t[0])}for(let e=0;e<k;e++){const t=E[e];z(t[0]+C*a,t[1]+C*a,t[2]+C*a)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;D(M,t),t+=M.length;for(let e=0,n=T.length;e<n;e++){const n=T[e];D(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Oi(r,3)),this.setAttribute("uv",new Oi(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Fc[r.type]).fromJSON(r)),new Au(n,e.options)}}const Cu={generateTopUV:function(e,t,n,r,i){const s=t[3*n],o=t[3*n+1],a=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new kn(s,o),new kn(a,l),new kn(c,u)]},generateSideWallUV:function(e,t,n,r,i,s){const o=t[3*n],a=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new kn(o,1-l),new kn(c,1-h),new kn(d,1-f),new kn(m,1-v)]:[new kn(a,1-l),new kn(u,1-h),new kn(p,1-f),new kn(g,1-v)]}};class ku extends jc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ku(e.radius,e.detail)}}class Pu extends jc{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pu(e.radius,e.detail)}}class Ru extends Gi{constructor(e=.5,t=1,n=8,r=1,i=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s},n=Math.max(3,n);const o=[],a=[],l=[],c=[];let u=e;const h=(t-e)/(r=Math.max(1,r)),d=new or,p=new kn;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*s;d.x=u*Math.cos(r),d.y=u*Math.sin(r),a.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=h}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,s=r+n+1,a=r+n+2,l=r+1;o.push(i,s,l),o.push(s,a,l)}}this.setIndex(o),this.setAttribute("position",new Oi(a,3)),this.setAttribute("normal",new Oi(l,3)),this.setAttribute("uv",new Oi(c,2))}static fromJSON(e){return new Ru(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Lu extends Gi{constructor(e=new $c([new kn(0,.5),new kn(-.5,-.5),new kn(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],s=[];let o=0,a=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,a,t),o+=a,a=0;function l(e){const o=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Tu.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===Tu.isClockWise(t)&&(u[e]=t.reverse())}const h=Tu.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];r.push(t.x,t.y,0),i.push(0,0,1),s.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+o,i=t[1]+o,s=t[2]+o;n.push(r,i,s),a+=3}}this.setIndex(n),this.setAttribute("position",new Oi(r,3)),this.setAttribute("normal",new Oi(i,3)),this.setAttribute("uv",new Oi(s,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new Lu(n,e.curveSegments)}}class Ou extends Gi{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let l=0;const c=[],u=new or,h=new or,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],v=d/n;let y=0;0==d&&0==s?y=.5/t:d==n&&a==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const a=n/t;u.x=-e*Math.cos(r+a*i)*Math.sin(s+v*o),u.y=e*Math.cos(s+v*o),u.z=e*Math.sin(r+a*i)*Math.sin(s+v*o),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(a+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],o=c[e+1][r],l=c[e+1][r+1];(0!==e||s>0)&&d.push(t,i,l),(e!==n-1||a<Math.PI)&&d.push(i,o,l)}this.setIndex(d),this.setAttribute("position",new Oi(p,3)),this.setAttribute("normal",new Oi(f,3)),this.setAttribute("uv",new Oi(m,2))}static fromJSON(e){return new Ou(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Nu extends jc{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nu(e.radius,e.detail)}}class Iu extends Gi{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],a=[],l=[],c=new or,u=new or,h=new or;for(let s=0;s<=n;s++)for(let d=0;d<=r;d++){const p=d/r*i,f=s/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),o.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),h.subVectors(u,c).normalize(),a.push(h.x,h.y,h.z),l.push(d/r),l.push(s/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,o=(r+1)*(e-1)+t,a=(r+1)*e+t;s.push(n,i,a),s.push(i,o,a)}this.setIndex(s),this.setAttribute("position",new Oi(o,3)),this.setAttribute("normal",new Oi(a,3)),this.setAttribute("uv",new Oi(l,2))}static fromJSON(e){return new Iu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Du extends Gi{constructor(e=1,t=.4,n=64,r=8,i=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new or,h=new or,d=new or,p=new or,f=new or,m=new or,g=new or;for(let o=0;o<=n;++o){const y=o/n*i*Math.PI*2;v(y,i,s,e,d),v(y+.01,i,s,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,s=-t*Math.cos(i),p=t*Math.sin(i);u.x=d.x+(s*g.x+p*f.x),u.y=d.y+(s*g.y+p*f.y),u.z=d.z+(s*g.z+p*f.z),a.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(o/n),c.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,a=(r+1)*(e-1)+t;o.push(n,i,a),o.push(i,s,a)}function v(e,t,n,r,i){const s=Math.cos(e),o=Math.sin(e),a=n/t*e,l=Math.cos(a);i.x=r*(2+l)*.5*s,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(a)*.5}this.setIndex(o),this.setAttribute("position",new Oi(a,3)),this.setAttribute("normal",new Oi(l,3)),this.setAttribute("uv",new Oi(c,2))}static fromJSON(e){return new Du(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Fu extends Gi{constructor(e=new Ic(new or(-1,-1,0),new or(-1,1,0),new or(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const s=e.computeFrenetFrames(t,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new or,a=new or,l=new kn;let c=new or;const u=[],h=[],d=[],p=[];function f(i){c=e.getPointAt(i/t,c);const l=s.normals[i],d=s.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),s=-Math.cos(t);a.x=s*l.x+i*d.x,a.y=s*l.y+i*d.y,a.z=s*l.z+i*d.z,a.normalize(),h.push(a.x,a.y,a.z),o.x=c.x+n*a.x,o.y=c.y+n*a.y,o.z=c.z+n*a.z,u.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,o=(r+1)*(e-1)+t;p.push(n,i,o),p.push(i,s,o)}}()}(),this.setIndex(p),this.setAttribute("position",new Oi(u,3)),this.setAttribute("normal",new Oi(h,3)),this.setAttribute("uv",new Oi(d,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Fu((new Fc[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class zu extends Gi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new or,i=new or;if(null!==e.index){const s=e.attributes.position,o=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,l=a.length;e<l;++e){const l=a[e],c=l.start;for(let e=c,a=c+l.count;e<a;e+=3)for(let a=0;a<3;a++){const l=o.getX(e+a),c=o.getX(e+(a+1)%3);r.fromBufferAttribute(s,l),i.fromBufferAttribute(s,c),!0===Uu(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const s=e.attributes.position;for(let e=0,o=s.count/3;e<o;e++)for(let o=0;o<3;o++){const a=3*e+o,l=3*e+(o+1)%3;r.fromBufferAttribute(s,a),i.fromBufferAttribute(s,l),!0===Uu(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Oi(t,3))}}}function Uu(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var Bu=Object.freeze({__proto__:null,BoxGeometry:ls,CapsuleGeometry:Vc,CircleGeometry:Gc,ConeGeometry:Hc,CylinderGeometry:Zc,DodecahedronGeometry:Wc,EdgesGeometry:Jc,ExtrudeGeometry:Au,IcosahedronGeometry:ku,LatheGeometry:Bc,OctahedronGeometry:Pu,PlaneGeometry:Cs,PolyhedronGeometry:jc,RingGeometry:Ru,ShapeGeometry:Lu,SphereGeometry:Ou,TetrahedronGeometry:Nu,TorusGeometry:Iu,TorusKnotGeometry:Du,TubeGeometry:Fu,WireframeGeometry:zu});class Vu extends _i{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new jn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Gu extends ds{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Zu extends _i{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new jn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new kn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Hu extends Zu{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new kn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _n(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new jn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new jn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new jn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ju extends _i{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new jn(16777215),this.specular=new jn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new kn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wu extends _i{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new jn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new kn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class qu extends _i{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new kn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Ku extends _i{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new jn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new kn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=q,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xu extends _i{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new jn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Nt,this.normalScale=new kn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Yu extends Xl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ju(e,t,n){return Qu(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function $u(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Qu(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function eh(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function th(e,t,n){const r=e.length,i=new e.constructor(r);for(let s=0,o=0;o!==r;++s){const r=n[s]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i}function nh(e,t,n,r){let i=1,s=e[0];for(;void 0!==s&&void 0===s[r];)s=e[i++];if(void 0===s)return;let o=s[r];if(void 0!==o)if(Array.isArray(o))do{o=s[r],void 0!==o&&(t.push(s.time),n.push.apply(n,o)),s=e[i++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[r],void 0!==o&&(t.push(s.time),o.toArray(n,n.length)),s=e[i++]}while(void 0!==s);else do{o=s[r],void 0!==o&&(t.push(s.time),n.push(o)),s=e[i++]}while(void 0!==s)}var rh=Object.freeze({__proto__:null,arraySlice:Ju,convertArray:$u,isTypedArray:Qu,getKeyframeOrder:eh,sortedArray:th,flattenJSON:nh,subclip:function(e,t,n,r,i=30){const s=e.clone();s.name=t;const o=[];for(let e=0;e<s.tracks.length;++e){const t=s.tracks[e],a=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const s=t.times[e]*i;if(!(s<n||s>=r)){l.push(t.times[e]);for(let n=0;n<a;++n)c.push(t.values[e*a+n])}}0!==l.length&&(t.times=$u(l,t.times.constructor),t.values=$u(c,t.values.constructor),o.push(t))}s.tracks=o;let a=1/0;for(let e=0;e<s.tracks.length;++e)a>s.tracks[e].times[0]&&(a=s.tracks[e].times[0]);for(let e=0;e<s.tracks.length;++e)s.tracks[e].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,s=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)continue;let a=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let c=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=r.times.length-1;let d;if(s<=r.times[0]){const e=a,t=l-a;d=Ju(r.values,e,t)}else if(s>=r.times[h]){const e=h*l+a,t=e+l-a;d=Ju(r.values,e,t)}else{const e=r.createInterpolant(),t=a,n=l-a;e.evaluate(s),d=Ju(e.resultBuffer,t,n)}if("quaternion"===i){(new sr).fromArray(d).normalize().conjugate().toArray(d)}const p=o.times.length;for(let e=0;e<p;++e){const t=e*u+c;if("quaternion"===i)sr.multiplyQuaternionsFlat(o.values,t,d,0,o.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)o.values[t+n]-=d[n]}}}return e.blendMode=Mt,e}});class ih{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0}}for(;n<s;){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class sh extends ih{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:wt,endingEnd:wt}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,o=r[i],a=r[s];if(void 0===o)switch(this.getSettings_().endingStart){case St:i=e,o=2*t-n;break;case Tt:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case St:s=e,a=2*n-t;break;case Tt:s=1,a=n+r[1]-r[0];break;default:s=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=s*c}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let e=0;e!==o;++e)i[e]=g*s[c+e]+v*s[l+e]+y*s[a+e]+b*s[u+e];return i}}class oh extends ih{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==o;++e)i[e]=s[l+e]*u+s[a+e]*c;return i}}class ah extends ih{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class lh{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=$u(t,this.TimeBufferType),this.values=$u(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:$u(e.times,Array),values:$u(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ah(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new oh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new sh(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case bt:t=this.InterpolantFactoryMethodDiscrete;break;case _t:t=this.InterpolantFactoryMethodLinear;break;case xt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bt;case this.InterpolantFactoryMethodLinear:return _t;case this.InterpolantFactoryMethodSmooth:return xt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=Ju(n,i,s),this.values=Ju(this.values,i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==s&&s>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,s),e=!1;break}s=r}if(void 0!==r&&Qu(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=Ju(this.times),t=Ju(this.values),n=this.getValueSize(),r=this.getInterpolation()===xt,i=e.length-1;let s=1;for(let o=1;o<i;++o){let i=!1;const a=e[o];if(a!==e[o+1]&&(1!==o||a!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,s=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[s+o]){i=!0;break}}}if(i){if(o!==s){e[s]=e[o];const r=o*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,o=0;o!==n;++o)t[r+o]=t[e+o];++s}return s!==e.length?(this.times=Ju(e,0,s),this.values=Ju(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=Ju(this.times,0),t=Ju(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}lh.prototype.TimeBufferType=Float32Array,lh.prototype.ValueBufferType=Float32Array,lh.prototype.DefaultInterpolation=_t;class ch extends lh{}ch.prototype.ValueTypeName="bool",ch.prototype.ValueBufferType=Array,ch.prototype.DefaultInterpolation=bt,ch.prototype.InterpolantFactoryMethodLinear=void 0,ch.prototype.InterpolantFactoryMethodSmooth=void 0;class uh extends lh{}uh.prototype.ValueTypeName="color";class hh extends lh{}hh.prototype.ValueTypeName="number";class dh extends ih{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-t)/(r-t);let l=e*o;for(let e=l+o;l!==e;l+=4)sr.slerpFlat(i,0,s,l-o,s,l,a);return i}}class ph extends lh{InterpolantFactoryMethodLinear(e){return new dh(this.times,this.values,this.getValueSize(),e)}}ph.prototype.ValueTypeName="quaternion",ph.prototype.DefaultInterpolation=_t,ph.prototype.InterpolantFactoryMethodSmooth=void 0;class fh extends lh{}fh.prototype.ValueTypeName="string",fh.prototype.ValueBufferType=Array,fh.prototype.DefaultInterpolation=bt,fh.prototype.InterpolantFactoryMethodLinear=void 0,fh.prototype.InterpolantFactoryMethodSmooth=void 0;class mh extends lh{}mh.prototype.ValueTypeName="vector";class gh{constructor(e,t=-1,n,r=Et){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=bn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(vh(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(lh.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let e=0;e<i;e++){let o=[],a=[];o.push((e+i-1)%i,e,(e+1)%i),a.push(0,1,0);const l=eh(o);o=th(o,1,l),a=th(a,1,l),r||0!==o[0]||(o.push(i),a.push(a[0])),s.push(new hh(".morphTargetInfluences["+t[e].name+"]",o,a).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],s=n.name.match(i);if(s&&s.length>1){const e=s[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const s=[];for(const e in r)s.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const s=[],o=[];nh(n,s,o,r),0!==s.length&&i.push(new e(t,s,o))}},r=[],i=e.name||"default",s=e.fps||30,o=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],s=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),s.push(r.morphTarget===n?1:0)}r.push(new hh(".morphTargetInfluence["+n+"]",e,s))}a=e.length*s}else{const s=".bones["+t[e].name+"]";n(mh,s+".position",i,"pos",r),n(ph,s+".quaternion",i,"rot",r),n(mh,s+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,a,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function vh(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hh;case"vector":case"vector2":case"vector3":case"vector4":return mh;case"color":return uh;case"quaternion":return ph;case"bool":case"boolean":return ch;case"string":return fh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];nh(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const yh={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class bh{constructor(e,t,n){const r=this;let i,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===s&&void 0!==r.onStart&&r.onStart(e,o,a),s=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const _h=new bh;class xh{constructor(e){this.manager=void 0!==e?e:_h,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const wh={};class Sh extends Error{constructor(e,t){super(e),this.response=t}}class Th extends xh{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=yh.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==wh[e])return void wh[e].push({onLoad:t,onProgress:n,onError:r});wh[e]=[],wh[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=wh[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),s=i?parseInt(i):0,o=0!==s;let a=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{a+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new Sh(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,o)));case"json":return e.json();default:if(void 0===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{yh.add(e,t);const n=wh[e];delete wh[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=wh[e];if(void 0===n)throw this.manager.itemError(e),t;delete wh[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Eh extends xh{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Th(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=gh.parse(e[n]);t.push(r)}return t}}class Mh extends xh{constructor(e){super(e)}load(e,t,n,r){const i=this,s=[],o=new mc,a=new Th(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials);let l=0;function c(c){a.load(e[c],(function(e){const n=i.parse(e,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=ge),o.image=s,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)c(t);else a.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){s[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)s[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),s[t].format=n.format,s[t].width=n.width,s[t].height=n.height}o.image=s}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=ge),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}class Ah extends xh{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=yh.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const o=Nn("img");function a(){c(),yh.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class Ch extends xh{constructor(e){super(e)}load(e,t,n,r){const i=new vs,s=new Ah(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)a(t);return i}}class kh extends xh{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new zl,o=new Th(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:ce,s.wrapT=void 0!==n.wrapT?n.wrapT:ce,s.magFilter=void 0!==n.magFilter?n.magFilter:ge,s.minFilter=void 0!==n.minFilter?n.minFilter:ge,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=be),1===n.mipmapCount&&(s.minFilter=ge),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,t&&t(s,n))}),n,r),s}}class Ph extends xh{constructor(e){super(e)}load(e,t,n,r){const i=new Jn,s=new Ah(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Rh extends ai{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new jn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Lh extends Rh{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ai.DefaultUp),this.updateMatrix(),this.groundColor=new jn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Oh=new Dr,Nh=new or,Ih=new or;class Dh{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new kn(512,512),this.map=null,this.mapPass=null,this.matrix=new Dr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Es,this._frameExtents=new kn(1,1),this._viewportCount=1,this._viewports=[new $n(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Nh.setFromMatrixPosition(e.matrixWorld),t.position.copy(Nh),Ih.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ih),t.updateMatrixWorld(),Oh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Oh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Oh)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Fh extends Dh{constructor(){super(new fs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*yn*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class zh extends Rh{constructor(e,t,n=0,r=Math.PI/3,i=0,s=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ai.DefaultUp),this.updateMatrix(),this.target=new ai,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.map=null,this.shadow=new Fh}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Uh=new Dr,Bh=new or,Vh=new or;class Gh extends Dh{constructor(){super(new fs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new kn(4,2),this._viewportCount=6,this._viewports=[new $n(2,1,1,1),new $n(0,1,1,1),new $n(3,1,1,1),new $n(1,1,1,1),new $n(3,0,1,1),new $n(1,0,1,1)],this._cubeDirections=[new or(1,0,0),new or(-1,0,0),new or(0,0,1),new or(0,0,-1),new or(0,1,0),new or(0,-1,0)],this._cubeUps=[new or(0,1,0),new or(0,1,0),new or(0,1,0),new or(0,1,0),new or(0,0,1),new or(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Bh.setFromMatrixPosition(e.matrixWorld),n.position.copy(Bh),Vh.copy(n.position),Vh.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Vh),n.updateMatrixWorld(),r.makeTranslation(-Bh.x,-Bh.y,-Bh.z),Uh.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Uh)}}class Zh extends Rh{constructor(e,t,n=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Gh}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Hh extends Dh{constructor(){super(new zs(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class jh extends Rh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ai.DefaultUp),this.updateMatrix(),this.target=new ai,this.shadow=new Hh}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Wh extends Rh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class qh extends Rh{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Kh{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new or)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*i),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*r*1.092548),t.addScaledVector(s[5],r*i*1.092548),t.addScaledVector(s[6],.315392*(3*i*i-1)),t.addScaledVector(s[7],n*i*1.092548),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*r),t.addScaledVector(s[2],1.023328*i),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*r),t.addScaledVector(s[5],.858086*r*i),t.addScaledVector(s[6],.743125*i*i-.247708),t.addScaledVector(s[7],.858086*n*i),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class Xh extends Rh{constructor(e=new Kh,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Yh extends xh{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,s=new Th(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=Yh.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new jn).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new jn).setHex(i.value);break;case"v2":r.uniforms[t].value=(new kn).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new or).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new $n).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new Pn).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new Dr).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new kn).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new kn).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:Vu,SpriteMaterial:dl,RawShaderMaterial:Gu,ShaderMaterial:ds,PointsMaterial:oc,MeshPhysicalMaterial:Hu,MeshStandardMaterial:Zu,MeshPhongMaterial:ju,MeshToonMaterial:Wu,MeshNormalMaterial:qu,MeshLambertMaterial:Ku,MeshDepthMaterial:Ha,MeshDistanceMaterial:ja,MeshBasicMaterial:xi,MeshMatcapMaterial:Xu,LineDashedMaterial:Yu,LineBasicMaterial:Xl,Material:_i}[e]}}class Jh{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $h extends Gi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Qh extends xh{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Th(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],s=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),o=On(i.type,s),a=new cl(o,i.stride);return a.uuid=i.uuid,t[r]=a,a}const i=e.isInstancedBufferGeometry?new $h:new Gi,s=e.data.index;if(void 0!==s){const e=On(s.type,s.array);i.setIndex(new Ti(e,1))}const o=e.data.attributes;for(const t in o){const n=o[t];let s;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);s=new hl(t,n.itemSize,n.offset,n.normalized)}else{const e=On(n.type,n.array);s=new(n.isInstancedBufferAttribute?Gl:Ti)(e,n.itemSize,n.normalized)}void 0!==n.name&&(s.name=n.name),void 0!==n.usage&&s.setUsage(n.usage),void 0!==n.updateRange&&(s.updateRange.offset=n.updateRange.offset,s.updateRange.count=n.updateRange.count),i.setAttribute(t,s)}const a=e.data.morphAttributes;if(a)for(const t in a){const n=a[t],s=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let o;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);o=new hl(t,i.itemSize,i.offset,i.normalized)}else{const e=On(i.type,i.array);o=new Ti(e,i.itemSize,i.normalized)}void 0!==i.name&&(o.name=i.name),s.push(o)}i.morphAttributes[t]=s}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new or;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new Ar(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class ed extends xh{constructor(e){super(e)}load(e,t,n,r){const i=this,s=""===this.path?Jh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Th(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){let s=null;try{s=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const o=s.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(s,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}async loadAsync(e,t){const n=""===this.path?Jh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new Th(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),s=JSON.parse(i),o=s.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in s)if(s[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,s),a=this.parseObject(e.object,r,o,s,t),l=this.parseSkeletons(e.skeletons,a);return this.bindSkeletons(a,l),a}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new $c).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new Vl).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new Qh;for(let i=0,s=e.length;i<s;i++){let s;const o=e[i];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(o);break;default:o.type in Bu?s=Bu[o.type].fromJSON(o,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),!0===s.isBufferGeometry&&void 0!==o.userData&&(s.userData=o.userData),n[o.uuid]=s}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new Yh;i.setTextures(t);for(let t=0,s=e.length;t<s;t++){const s=e[t];void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=gh.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function s(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:On(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new bh(t);i=new Ah(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=s(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new zl(n.data,n.width,n.height)))}r[n.uuid]=new Kn(e)}else{const e=s(n.url);r[n.uuid]=new Kn(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:On(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Ah(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],s=r.url;if(Array.isArray(s)){const e=[];for(let t=0,n=s.length;t<n;t++){const n=s[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new zl(r.data,r.width,r.height)))}n[r.uuid]=new Kn(e)}else{const e=await i(r.url);n[r.uuid]=new Kn(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,s=e.length;i<s;i++){const s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const o=t[s.image],a=o.data;let l;Array.isArray(a)?(l=new vs,6===a.length&&(l.needsUpdate=!0)):(l=a&&a.data?new zl:new Jn,a&&(l.needsUpdate=!0)),l.source=o,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,td)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],nd),l.wrapT=n(s.wrap[1],nd)),void 0!==s.format&&(l.format=s.format),void 0!==s.type&&(l.type=s.type),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,rd)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,rd)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),void 0!==s.userData&&(l.userData=s.userData),r[s.uuid]=l}return r}parseObject(e,t,n,r,i){let s,o,a;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":s=new ll,void 0!==e.background&&(Number.isInteger(e.background)?s.background=new jn(e.background):s.background=u(e.background)),void 0!==e.environment&&(s.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new al(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new ol(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(s.backgroundBlurriness=e.backgroundBlurriness);break;case"PerspectiveCamera":s=new fs(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new zs(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new Wh(e.color,e.intensity);break;case"DirectionalLight":s=new jh(e.color,e.intensity);break;case"PointLight":s=new Zh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new qh(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new zh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Lh(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=(new Xh).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),a=c(e.material),s=new Dl(o,a),void 0!==e.bindMode&&(s.bindMode=e.bindMode),void 0!==e.bindMatrix&&s.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(s.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),a=c(e.material),s=new os(o,a);break;case"InstancedMesh":o=l(e.geometry),a=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;s=new Kl(o,a,t),s.instanceMatrix=new Gl(new Float32Array(n.array),16),void 0!==r&&(s.instanceColor=new Gl(new Float32Array(r.array),r.itemSize));break;case"LOD":s=new Pl;break;case"Line":s=new tc(l(e.geometry),c(e.material));break;case"LineLoop":s=new sc(l(e.geometry),c(e.material));break;case"LineSegments":s=new ic(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new hc(l(e.geometry),c(e.material));break;case"Sprite":s=new Ml(c(e.material));break;case"Group":s=new Ja;break;case"Bone":s=new Fl;break;default:s=new ai}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(s.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(s.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.frustumCulled&&(s.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(s.renderOrder=e.renderOrder),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.layers&&(s.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)s.add(this.parseObject(o[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];s.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(s.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=s.getObjectByProperty("uuid",n.object);void 0!==r&&s.addLevel(r,n.distance)}}return s}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const td={UVMapping:ne,CubeReflectionMapping:re,CubeRefractionMapping:ie,EquirectangularReflectionMapping:se,EquirectangularRefractionMapping:oe,CubeUVReflectionMapping:ae},nd={RepeatWrapping:le,ClampToEdgeWrapping:ce,MirroredRepeatWrapping:ue},rd={NearestFilter:he,NearestMipmapNearestFilter:de,NearestMipmapLinearFilter:fe,LinearFilter:ge,LinearMipmapNearestFilter:ve,LinearMipmapLinearFilter:be};class id extends xh{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=yh.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){yh.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let sd;class od{static getContext(){return void 0===sd&&(sd=new(window.AudioContext||window.webkitAudioContext)),sd}static setContext(e){sd=e}}class ad extends xh{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Th(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{const e=n.slice(0);od.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}class ld extends Xh{constructor(e,t,n=1){super(void 0,n),this.isHemisphereLightProbe=!0;const r=(new jn).set(e),i=(new jn).set(t),s=new or(r.r,r.g,r.b),o=new or(i.r,i.g,i.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(s).sub(o).multiplyScalar(l)}}class cd extends Xh{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const n=(new jn).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const ud=new Dr,hd=new Dr,dd=new Dr;class pd{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fs,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fs,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,dd.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(vn*t.fov*.5)/t.zoom;let s,o;hd.elements[12]=-n,ud.elements[12]=n,s=-i*t.aspect+r,o=i*t.aspect+r,dd.elements[0]=2*t.near/(o-s),dd.elements[8]=(o+s)/(o-s),this.cameraL.projectionMatrix.copy(dd),s=-i*t.aspect-r,o=i*t.aspect-r,dd.elements[0]=2*t.near/(o-s),dd.elements[8]=(o+s)/(o-s),this.cameraR.projectionMatrix.copy(dd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(hd),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ud)}}class fd{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=md(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=md();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function md(){return("undefined"==typeof performance?Date:performance).now()}const gd=new or,vd=new sr,yd=new or,bd=new or;class _d extends ai{constructor(){super(),this.type="AudioListener",this.context=od.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new fd}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(gd,vd,yd),bd.set(0,0,-1).applyQuaternion(vd),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(gd.x,e),t.positionY.linearRampToValueAtTime(gd.y,e),t.positionZ.linearRampToValueAtTime(gd.z,e),t.forwardX.linearRampToValueAtTime(bd.x,e),t.forwardY.linearRampToValueAtTime(bd.y,e),t.forwardZ.linearRampToValueAtTime(bd.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(gd.x,gd.y,gd.z),t.setOrientation(bd.x,bd.y,bd.z,n.x,n.y,n.z)}}class xd extends ai{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const wd=new or,Sd=new sr,Td=new or,Ed=new or;class Md extends xd{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(wd,Sd,Td),Ed.set(0,0,1).applyQuaternion(Sd);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(wd.x,e),t.positionY.linearRampToValueAtTime(wd.y,e),t.positionZ.linearRampToValueAtTime(wd.z,e),t.orientationX.linearRampToValueAtTime(Ed.x,e),t.orientationY.linearRampToValueAtTime(Ed.y,e),t.orientationZ.linearRampToValueAtTime(Ed.z,e)}else t.setPosition(wd.x,wd.y,wd.z),t.setOrientation(Ed.x,Ed.y,Ed.z)}}class Ad{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Cd{constructor(e,t,n){let r,i,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==r;++e)n[i+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){sr.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const s=this._workIndex*i;sr.multiplyQuaternionsFlat(e,s,e,t,e,n),sr.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,i){const s=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*s+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]+e[n+s]*r}}}const kd="\\[\\]\\.:\\/",Pd=new RegExp("[\\[\\]\\.:\\/]","g"),Rd="[^\\[\\]\\.:\\/]",Ld="[^"+kd.replace("\\.","")+"]",Od=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Rd)+/(WCOD+)?/.source.replace("WCOD",Ld)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rd)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rd)+"$"),Nd=["material","materials","bones","map"];class Id{constructor(e,t,n){this.path=t,this.parsedPath=n||Id.parseTrackName(t),this.node=Id.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Id.Composite(e,t,n):new Id(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Pd,"")}static parseTrackName(e){const t=Od.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Nd.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Id.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const s=e[r];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Id.Composite=class{constructor(e,t,n){const r=n||Id.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Id.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Id.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Id.prototype.GetterByBindingType=[Id.prototype._getValue_direct,Id.prototype._getValue_array,Id.prototype._getValue_arrayElement,Id.prototype._getValue_toArray],Id.prototype.SetterByBindingTypeAndVersioning=[[Id.prototype._setValue_direct,Id.prototype._setValue_direct_setNeedsUpdate,Id.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Id.prototype._setValue_array,Id.prototype._setValue_array_setNeedsUpdate,Id.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Id.prototype._setValue_arrayElement,Id.prototype._setValue_arrayElement_setNeedsUpdate,Id.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Id.prototype._setValue_fromArray,Id.prototype._setValue_fromArray_setNeedsUpdate,Id.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Dd{constructor(){this.isAnimationObjectGroup=!0,this.uuid=bn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,s=i.length;let o,a=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=a++,t[h]=d,e.push(u);for(let e=0,t=s;e!==t;++e)i[e].push(new Id(u,n[e],r[e]))}else if(d<l){o=e[d];const a=--l,c=e[a];t[c.uuid]=d,e[d]=c,t[h]=a,e[a]=u;for(let e=0,t=s;e!==t;++e){const t=i[e],s=t[a];let o=t[d];t[d]=s,void 0===o&&(o=new Id(u,n[e],r[e])),t[a]=o}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s],a=o.uuid,l=t[a];if(void 0!==l&&l>=i){const s=i++,c=e[s];t[c.uuid]=l,e[l]=c,t[a]=s,e[s]=o;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[l];t[l]=r,t[s]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,s=e.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o].uuid,l=t[a];if(void 0!==l)if(delete t[a],l<i){const o=--i,a=e[o],c=--s,u=e[c];t[a.uuid]=l,e[l]=a,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[c];t[l]=r,t[o]=i,t.pop()}}else{const i=--s,o=e[i];i>0&&(t[o.uuid]=l),e[l]=o,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const s=this._paths,o=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,s.push(e),o.push(t),i.push(u);for(let n=c,r=a.length;n!==r;++n){const r=a[n];u[n]=new Id(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];t[e[o]]=n,s[n]=a,s.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}class Fd{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,s=i.length,o=new Array(s),a={endingStart:wt,endingEnd:wt};for(let e=0;e!==s;++e){const t=i[e].createInterpolant(null);o[e]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,s=n/r;e.warp(1,i,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=i,a[1]=i+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Mt)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const s=n===yt;if(0===e)return-1===i?r:s&&1==(1&i)?t-r:r;if(n===gt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(s&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=St,r.endingEnd=St):(r.endingStart=e?this.zeroSlopeAtStart?St:wt:Tt,r.endingEnd=t?this.zeroSlopeAtEnd?St:wt:Tt)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=i,a[0]=t,o[1]=i+e,a[1]=n,this}}const zd=new Float32Array(1);class Ud extends fn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,o=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];void 0===c&&(c={},l[a]=c);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let u=c[l];if(void 0!==u)++u.referenceCount,s[e]=u;else{if(u=s[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,a,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new Cd(Id.create(n,l,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,a,l),s[e]=u}o[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let s=i[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,s=this._actionsByClip,o=s[i],a=o.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null;delete o.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete s[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,o=s[r],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete o[i],0===Object.keys(o).length&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new oh(new Float32Array(2),new Float32Array(2),1,zd),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let s="string"==typeof e?gh.findByName(r,e):e;const o=null!==s?s.uuid:e,a=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:Et),void 0!==a){const e=a.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=a.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new Fd(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,o,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?gh.findByName(n,e):e,s=i?i.uuid:e,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),s=this._accuIndex^=1;for(let o=0;o!==n;++o){t[o]._update(r,e,i,s)}const o=this._bindings,a=this._nActiveBindings;for(let e=0;e!==a;++e)o[e].apply(s);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,s=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,s._cacheIndex=i,t[i]=s,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Bd{constructor(e){this.value=e}clone(){return new Bd(void 0===this.value.clone?this.value:this.value.clone())}}let Vd=0;class Gd extends fn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Vd++}),this.name="",this.usage=tn,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++)this.uniforms.push(t[e].clone());return this}clone(){return(new this.constructor).copy(this)}}class Zd extends cl{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Hd{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class jd{constructor(e,t,n=0,r=1/0){this.ray=new Ir(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new qr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return qd(e,this,n,t),n.sort(Wd),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)qd(e[r],this,n,t);return n.sort(Wd),n}}function Wd(e,t){return e.distance-t.distance}function qd(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)qd(r[e],t,n,!0)}}class Kd{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(_n(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Xd{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const Yd=new kn;class Jd{constructor(e=new kn(1/0,1/0),t=new kn(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Yd.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Yd.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $d=new or,Qd=new or;class ep{constructor(e=new or,t=new or){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){$d.subVectors(e,this.start),Qd.subVectors(this.end,this.start);const n=Qd.dot(Qd);let r=Qd.dot($d)/n;return t&&(r=_n(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const tp=new or;class np extends ai{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new Gi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,s=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new Oi(r,3));const i=new Xl({fog:!1,toneMapped:!1});this.cone=new ic(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),tp.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tp),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const rp=new or,ip=new Dr,sp=new Dr;class op extends ic{constructor(e){const t=ap(e),n=new Gi,r=[],i=[],s=new jn(0,0,1),o=new jn(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(s.r,s.g,s.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new Oi(r,3)),n.setAttribute("color",new Oi(i,3));super(n,new Xl({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");sp.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(ip.multiplyMatrices(sp,i.matrixWorld),rp.setFromMatrixPosition(ip),r.setXYZ(n,rp.x,rp.y,rp.z),ip.multiplyMatrices(sp,i.parent.matrixWorld),rp.setFromMatrixPosition(ip),r.setXYZ(n+1,rp.x,rp.y,rp.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function ap(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,ap(e.children[n]));return t}class lp extends os{constructor(e,t,n){super(new Ou(t,4,2),new xi({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const cp=new or,up=new jn,hp=new jn;class dp extends ai{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Pu(t);r.rotateY(.5*Math.PI),this.material=new xi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),s=new Float32Array(3*i.count);r.setAttribute("color",new Ti(s,3)),this.add(new os(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");up.copy(this.light.color),hp.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?up:hp;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(cp.setFromMatrixPosition(this.light.matrixWorld).negate())}}class pp extends ic{constructor(e=10,t=10,n=4473924,r=8947848){n=new jn(n),r=new jn(r);const i=t/2,s=e/t,o=e/2,a=[],l=[];for(let e=0,c=0,u=-o;e<=t;e++,u+=s){a.push(-o,0,u,o,0,u),a.push(u,0,-o,u,0,o);const t=e===i?n:r;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new Gi;c.setAttribute("position",new Oi(a,3)),c.setAttribute("color",new Oi(l,3));super(c,new Xl({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class fp extends ic{constructor(e=10,t=16,n=8,r=64,i=4473924,s=8947848){i=new jn(i),s=new jn(s);const o=[],a=[];if(t>1)for(let n=0;n<t;n++){const r=n/t*(2*Math.PI),l=Math.sin(r)*e,c=Math.cos(r)*e;o.push(0,0,0),o.push(l,0,c);const u=1&n?i:s;a.push(u.r,u.g,u.b),a.push(u.r,u.g,u.b)}for(let t=0;t<n;t++){const l=1&t?i:s,c=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c;o.push(n,0,i),a.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*c,i=Math.cos(t)*c,o.push(n,0,i),a.push(l.r,l.g,l.b)}}const l=new Gi;l.setAttribute("position",new Oi(o,3)),l.setAttribute("color",new Oi(a,3));super(l,new Xl({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const mp=new or,gp=new or,vp=new or;class yp extends ai{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new Gi;r.setAttribute("position",new Oi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new Xl({fog:!1,toneMapped:!1});this.lightPlane=new tc(r,i),this.add(this.lightPlane),r=new Gi,r.setAttribute("position",new Oi([0,0,0,0,0,1],3)),this.targetLine=new tc(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){mp.setFromMatrixPosition(this.light.matrixWorld),gp.setFromMatrixPosition(this.light.target.matrixWorld),vp.subVectors(gp,mp),this.lightPlane.lookAt(gp),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(gp),this.targetLine.scale.z=vp.length()}}const bp=new or,_p=new ps;class xp extends ic{constructor(e){const t=new Gi,n=new Xl({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={};function o(e,t){a(e),a(t)}function a(e){r.push(0,0,0),i.push(0,0,0),void 0===s[e]&&(s[e]=[]),s[e].push(r.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new Oi(r,3)),t.setAttribute("color",new Oi(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new jn(16755200),c=new jn(16711680),u=new jn(43775),h=new jn(16777215),d=new jn(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,n,r,i){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,r.r,r.g,r.b),s.setXYZ(39,r.r,r.g,r.b),s.setXYZ(40,i.r,i.g,i.b),s.setXYZ(41,i.r,i.g,i.b),s.setXYZ(42,i.r,i.g,i.b),s.setXYZ(43,i.r,i.g,i.b),s.setXYZ(44,i.r,i.g,i.b),s.setXYZ(45,i.r,i.g,i.b),s.setXYZ(46,i.r,i.g,i.b),s.setXYZ(47,i.r,i.g,i.b),s.setXYZ(48,i.r,i.g,i.b),s.setXYZ(49,i.r,i.g,i.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;_p.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wp("c",t,e,_p,0,0,-1),wp("t",t,e,_p,0,0,1),wp("n1",t,e,_p,-1,-1,-1),wp("n2",t,e,_p,1,-1,-1),wp("n3",t,e,_p,-1,1,-1),wp("n4",t,e,_p,1,1,-1),wp("f1",t,e,_p,-1,-1,1),wp("f2",t,e,_p,1,-1,1),wp("f3",t,e,_p,-1,1,1),wp("f4",t,e,_p,1,1,1),wp("u1",t,e,_p,.7,1.1,-1),wp("u2",t,e,_p,-.7,1.1,-1),wp("u3",t,e,_p,0,2,-1),wp("cf1",t,e,_p,-1,0,1),wp("cf2",t,e,_p,1,0,1),wp("cf3",t,e,_p,0,-1,1),wp("cf4",t,e,_p,0,1,1),wp("cn1",t,e,_p,-1,0,-1),wp("cn2",t,e,_p,1,0,-1),wp("cn3",t,e,_p,0,-1,-1),wp("cn4",t,e,_p,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wp(e,t,n,r,i,s,o){bp.set(i,s,o).unproject(r);const a=t[e];if(void 0!==a){const e=n.getAttribute("position");for(let t=0,n=a.length;t<n;t++)e.setXYZ(a[t],bp.x,bp.y,bp.z)}}const Sp=new cr;class Tp extends ic{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Gi;i.setIndex(new Ti(n,1)),i.setAttribute("position",new Ti(r,3)),super(i,new Xl({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Sp.setFromObject(this.object),Sp.isEmpty())return;const t=Sp.min,n=Sp.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ep extends ic{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Gi;r.setIndex(new Ti(n,1)),r.setAttribute("position",new Oi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Xl({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Mp extends tc{constructor(e,t=1,n=16776960){const r=n,i=new Gi;i.setAttribute("position",new Oi([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new Xl({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=new Gi;s.setAttribute("position",new Oi([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),s.computeBoundingSphere(),this.add(new os(s,new xi({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Ap=new or;let Cp,kp;class Pp extends ai{constructor(e=new or(0,0,1),t=new or(0,0,0),n=1,r=16776960,i=.2*n,s=.2*i){super(),this.type="ArrowHelper",void 0===Cp&&(Cp=new Gi,Cp.setAttribute("position",new Oi([0,0,0,0,1,0],3)),kp=new Zc(0,.5,1,5,1),kp.translate(0,-.5,0)),this.position.copy(t),this.line=new tc(Cp,new Xl({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new os(kp,new xi({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Ap.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Ap,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Rp extends ic{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Gi;n.setAttribute("position",new Oi(t,3)),n.setAttribute("color",new Oi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Xl({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new jn,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Lp{constructor(){this.type="ShapePath",this.color=new jn,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Uc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,s){return this.currentPath.bezierCurveTo(e,t,n,r,i,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,s=0;s<n;i=s++){let n=t[i],o=t[s],a=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],a=-a,o=t[i],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r}const n=Tu.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,s,o;const a=[];if(1===r.length)return s=r[0],o=new $c,o.curves=s.curves,a.push(o),a;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,p=[],f=0;u[f]=void 0,p[f]=[];for(let t=0,o=r.length;t<o;t++)s=r[t],h=s.getPoints(),i=n(h),i=e?!i:i,i?(!l&&u[f]&&f++,u[f]={s:new $c,p:h},u[f].s.curves=s.curves,l&&f++,p[f]=[]):p[f].push({h:s,p:h[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new $c;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let e=0,t=u.length;e<t;e++)c[e]=[];for(let r=0,i=u.length;r<i;r++){const i=p[r];for(let s=0;s<i.length;s++){const o=i[s];let a=!0;for(let i=0;i<u.length;i++)t(o.p,u[i].p)&&(r!==i&&n++,a?(a=!1,c[i].push(o)):e=!0);a&&c[r].push(o)}}n>0&&!1===e&&(p=c)}for(let e=0,t=u.length;e<t;e++){o=u[e].s,a.push(o),d=p[e];for(let e=0,t=d.length;e<t;e++)o.holes.push(d[e].h)}return a}}const Op=Np();function Np(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;0==(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,s[e]=t|n}for(let e=1024;e<2048;++e)s[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)o[e]=e<<23;o[31]=1199570944,o[32]=2147483648;for(let e=33;e<63;++e)o[e]=2147483648+(e-32<<23);o[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(a[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}var Ip=Object.freeze({__proto__:null,toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=_n(e,-65504,65504),Op.floatView[0]=e;const t=Op.uint32View[0],n=t>>23&511;return Op.baseTable[n]+((8388607&t)>>Op.shiftTable[n])},fromHalfFloat:function(e){const t=e>>10;return Op.uint32View[0]=Op.mantissaTable[Op.offsetTable[t]+(1023&e)]+Op.exponentTable[t],Op.floatView[0]}});function Dp(){console.error("THREE.ImmediateRenderObject has been removed.")}class Fp extends Qn{constructor(e,t,n){console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),super(e,t,n),this.samples=4}}class zp extends er{constructor(e,t,n,r){console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),super(e,t,n,r)}}class Up extends nr{constructor(e,t,n,r){console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),super(e,t,n,r)}}class Bp extends ls{constructor(e,t,n,r,i,s){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,r,i,s)}}class Vp extends Vc{constructor(e,t,n,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,r)}}class Gp extends Gc{constructor(e,t,n,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,r)}}class Zp extends Hc{constructor(e,t,n,r,i,s,o){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,r,i,s,o)}}class Hp extends Zc{constructor(e,t,n,r,i,s,o,a){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,r,i,s,o,a)}}class jp extends Wc{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class Wp extends Au{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class qp extends ku{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class Kp extends Bc{constructor(e,t,n,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,r)}}class Xp extends Pu{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class Yp extends Cs{constructor(e,t,n,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,r)}}class Jp extends jc{constructor(e,t,n,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,r)}}class $p extends Ru{constructor(e,t,n,r,i,s){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,r,i,s)}}class Qp extends Lu{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class ef extends Ou{constructor(e,t,n,r,i,s,o){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,r,i,s,o)}}class tf extends Nu{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class nf extends Iu{constructor(e,t,n,r,i){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,r,i)}}class rf extends Du{constructor(e,t,n,r,i,s){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,r,i,s)}}class sf extends Fu{constructor(e,t,n,r,i){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,r,i)}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},Qn1W:(e,t,n)=>{"use strict";n.d(t,{L:()=>g});var r=n("y9Bw");const i=/^[og]\s*(.+)?/,s=/^mtllib /,o=/^usemtl /,a=/^usemap /,l=/\s+/,c=new r.Vector3,u=new r.Vector3,h=new r.Vector3,d=new r.Vector3,p=new r.Vector3,f=new r.Color;function m(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,i=this.object.geometry.normals;c.fromArray(r,e),u.fromArray(r,t),h.fromArray(r,n),p.subVectors(h,u),d.subVectors(c,u),p.cross(d),p.normalize(),i.push(p.x,p.y,p.z),i.push(p.x,p.y,p.z),i.push(p.x,p.y,p.z)},addColor:function(e,t,n){const r=this.colors,i=this.object.geometry.colors;void 0!==r[e]&&i.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&i.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,s,o,a,l){const c=this.vertices.length;let u=this.parseVertexIndex(e,c),h=this.parseVertexIndex(t,c),d=this.parseVertexIndex(n,c);if(this.addVertex(u,h,d),this.addColor(u,h,d),void 0!==o&&""!==o){const e=this.normals.length;u=this.parseNormalIndex(o,e),h=this.parseNormalIndex(a,e),d=this.parseNormalIndex(l,e),this.addNormal(u,h,d)}else this.addFaceNormal(u,h,d);if(void 0!==r&&""!==r){const e=this.uvs.length;u=this.parseUVIndex(r,e),h=this.parseUVIndex(i,e),d=this.parseUVIndex(s,e),this.addUV(u,h,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const r=this.parseVertexIndex(e[n],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let t=0,r=e.length;t<r;t++)this.addVertexLine(this.parseVertexIndex(e[t],n));for(let e=0,n=t.length;e<n;e++)this.addUVLine(this.parseUVIndex(t[e],r))}};return e.startObject("",!1),e}class g extends r.Loader{constructor(e){super(e),this.materials=null}load(e,t,n,i){const s=this,o=new r.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(s.parse(n))}catch(t){i?i(t):console.error(t),s.manager.itemError(e)}}),n,i)}setMaterials(e){return this.materials=e,this}parse(e){const t=new m;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let c=[];for(let e=0,r=n.length;e<r;e++){const r=n[e].trimStart();if(0===r.length)continue;const u=r.charAt(0);if("#"!==u)if("v"===u){const e=r.split(l);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?(f.setRGB(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6])).convertSRGBToLinear(),t.colors.push(f.r,f.g,f.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===u){const e=r.slice(1).trim().split(l),n=[];for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r.length>0){const e=r.split("/");n.push(e)}}const i=n[0];for(let e=1,r=n.length-1;e<r;e++){const r=n[e],s=n[e+1];t.addFace(i[0],r[0],s[0],i[1],r[1],s[1],i[2],r[2],s[2])}}else if("l"===u){const e=r.substring(1).trim().split(" ");let n=[];const i=[];if(-1===r.indexOf("/"))n=e;else for(let t=0,r=e.length;t<r;t++){const r=e[t].split("/");""!==r[0]&&n.push(r[0]),""!==r[1]&&i.push(r[1])}t.addLineGeometry(n,i)}else if("p"===u){const e=r.slice(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(c=i.exec(r))){const e=(" "+c[0].slice(1).trim()).slice(1);t.startObject(e)}else if(o.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(s.test(r))t.materialLibraries.push(r.substring(7).trim());else if(a.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(c=r.split(" "),c.length>1){const e=c[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===r)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}}t.finalize();const u=new r.Group;u.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let e=0,n=t.objects.length;e<n;e++){const n=t.objects[e],i=n.geometry,s=n.materials,o="Line"===i.type,a="Points"===i.type;let l=!1;if(0===i.vertices.length)continue;const c=new r.BufferGeometry;c.setAttribute("position",new r.Float32BufferAttribute(i.vertices,3)),i.normals.length>0&&c.setAttribute("normal",new r.Float32BufferAttribute(i.normals,3)),i.colors.length>0&&(l=!0,c.setAttribute("color",new r.Float32BufferAttribute(i.colors,3))),!0===i.hasUVIndices&&c.setAttribute("uv",new r.Float32BufferAttribute(i.uvs,2));const h=[];for(let e=0,n=s.length;e<n;e++){const n=s[e],i=n.name+"_"+n.smooth+"_"+l;let c=t.materials[i];if(null!==this.materials)if(c=this.materials.create(n.name),!o||!c||c instanceof r.LineBasicMaterial){if(a&&c&&!(c instanceof r.PointsMaterial)){const e=new r.PointsMaterial({size:10,sizeAttenuation:!1});r.Material.prototype.copy.call(e,c),e.color.copy(c.color),e.map=c.map,c=e}}else{const e=new r.LineBasicMaterial;r.Material.prototype.copy.call(e,c),e.color.copy(c.color),c=e}void 0===c&&(c=o?new r.LineBasicMaterial:a?new r.PointsMaterial({size:1,sizeAttenuation:!1}):new r.MeshPhongMaterial,c.name=n.name,c.flatShading=!n.smooth,c.vertexColors=l,t.materials[i]=c),h.push(c)}let d;if(h.length>1){for(let e=0,t=s.length;e<t;e++){const t=s[e];c.addGroup(t.groupStart,t.groupCount,e)}d=o?new r.LineSegments(c,h):a?new r.Points(c,h):new r.Mesh(c,h)}else d=o?new r.LineSegments(c,h[0]):a?new r.Points(c,h[0]):new r.Mesh(c,h[0]);d.name=n.name,u.add(d)}else if(t.vertices.length>0){const e=new r.PointsMaterial({size:1,sizeAttenuation:!1}),n=new r.BufferGeometry;n.setAttribute("position",new r.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(n.setAttribute("color",new r.Float32BufferAttribute(t.colors,3)),e.vertexColors=!0);const i=new r.Points(n,e);u.add(i)}return u}}},"WH/H":(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n("y9Bw");class i extends r.DataTextureLoader{constructor(e){super(e)}parse(e){const t=0,n=1,i=2,s=3,o=9,a=10,l=11,c=48,u=4,h=0,d=1,p=2,f=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let m=0;const g=new Uint8Array(e),v={id_length:g[m++],colormap_type:g[m++],image_type:g[m++],colormap_index:g[m++]|g[m++]<<8,colormap_length:g[m++]|g[m++]<<8,colormap_size:g[m++],origin:[g[m++]|g[m++]<<8,g[m++]|g[m++]<<8],width:g[m++]|g[m++]<<8,height:g[m++]|g[m++]<<8,pixel_size:g[m++],flags:g[m++]};!function(e){switch(e.image_type){case n:case o:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case i:case s:case a:case l:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(v),v.id_length+m>e.length&&console.error("THREE.TGALoader: No data."),m+=v.id_length;let y=!1,b=!1,_=!1;switch(v.image_type){case o:y=!0,b=!0;break;case n:b=!0;break;case a:y=!0;break;case i:break;case l:y=!0,_=!0;break;case s:_=!0}const x=new Uint8Array(v.width*v.height*4),w=function(e,t,n,r,i){let s,o;const a=n.pixel_size>>3,l=n.width*n.height*a;if(t&&(o=i.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),e){let e,t,n;s=new Uint8Array(l);let o=0;const c=new Uint8Array(a);for(;o<l;)if(e=i[r++],t=1+(127&e),128&e){for(n=0;n<a;++n)c[n]=i[r++];for(n=0;n<t;++n)s.set(c,o+n*a);o+=a*t}else{for(t*=a,n=0;n<t;++n)s[o+n]=i[r++];o+=t}}else s=i.subarray(r,r+=t?n.width*n.height:l);return{pixel_data:s,palettes:o}}(y,b,v,m,g);return function(e,t,n,r,i){let s,o,a,l,m,g;switch((v.flags&c)>>u){default:case p:s=0,a=1,m=t,o=0,l=1,g=n;break;case h:s=0,a=1,m=t,o=n-1,l=-1,g=-1;break;case f:s=t-1,a=-1,m=-1,o=0,l=1,g=n;break;case d:s=t-1,a=-1,m=-1,o=n-1,l=-1,g=-1}if(_)switch(v.pixel_size){case 8:!function(e,t,n,r,i,s,o,a){let l,c,u,h=0;const d=v.width;for(u=t;u!==r;u+=n)for(c=i;c!==o;c+=s,h++)l=a[h],e[4*(c+d*u)+0]=l,e[4*(c+d*u)+1]=l,e[4*(c+d*u)+2]=l,e[4*(c+d*u)+3]=255}(e,o,l,g,s,a,m,r);break;case 16:!function(e,t,n,r,i,s,o,a){let l,c,u=0;const h=v.width;for(c=t;c!==r;c+=n)for(l=i;l!==o;l+=s,u+=2)e[4*(l+h*c)+0]=a[u+0],e[4*(l+h*c)+1]=a[u+0],e[4*(l+h*c)+2]=a[u+0],e[4*(l+h*c)+3]=a[u+1]}(e,o,l,g,s,a,m,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(v.pixel_size){case 8:!function(e,t,n,r,i,s,o,a,l){const c=l;let u,h,d,p=0;const f=v.width;for(d=t;d!==r;d+=n)for(h=i;h!==o;h+=s,p++)u=a[p],e[4*(h+f*d)+3]=255,e[4*(h+f*d)+2]=c[3*u+0],e[4*(h+f*d)+1]=c[3*u+1],e[4*(h+f*d)+0]=c[3*u+2]}(e,o,l,g,s,a,m,r,i);break;case 16:!function(e,t,n,r,i,s,o,a){let l,c,u,h=0;const d=v.width;for(u=t;u!==r;u+=n)for(c=i;c!==o;c+=s,h+=2)l=a[h+0]+(a[h+1]<<8),e[4*(c+d*u)+0]=(31744&l)>>7,e[4*(c+d*u)+1]=(992&l)>>2,e[4*(c+d*u)+2]=(31&l)<<3,e[4*(c+d*u)+3]=32768&l?0:255}(e,o,l,g,s,a,m,r);break;case 24:!function(e,t,n,r,i,s,o,a){let l,c,u=0;const h=v.width;for(c=t;c!==r;c+=n)for(l=i;l!==o;l+=s,u+=3)e[4*(l+h*c)+3]=255,e[4*(l+h*c)+2]=a[u+0],e[4*(l+h*c)+1]=a[u+1],e[4*(l+h*c)+0]=a[u+2]}(e,o,l,g,s,a,m,r);break;case 32:!function(e,t,n,r,i,s,o,a){let l,c,u=0;const h=v.width;for(c=t;c!==r;c+=n)for(l=i;l!==o;l+=s,u+=4)e[4*(l+h*c)+2]=a[u+0],e[4*(l+h*c)+1]=a[u+1],e[4*(l+h*c)+0]=a[u+2],e[4*(l+h*c)+3]=a[u+3]}(e,o,l,g,s,a,m,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(x,v.width,v.height,w.pixel_data,w.palettes),{data:x,width:v.width,height:v.height,flipY:!0,generateMipmaps:!0,minFilter:r.LinearMipmapLinearFilter}}}},XvIh:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r="Invariant failed";function i(e,t){if(!e)throw new Error(r)}},"0xhk":e=>{"use strict";e.exports=JSON.parse('{"type":"part","content":{"layout":"struct Part\\n{\\n\\tfloat3 pos;\\n\\tfloat timelife;\\n};","graph":{"last_node_id":21,"last_link_id":4,"nodes":[{"id":19,"type":"fx/SpawnRoutine","pos":{"0":504,"1":102,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":[180,30],"flags":{},"order":0,"mode":0,"inputs":[{"name":"count = 1","type":"int","link":null}],"outputs":[],"title":"SpawnRoutine","properties":{"count":1}},{"id":20,"type":"fx/UpdateRoutine","pos":{"0":503,"1":218,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":[140,30],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"stmts","type":-1,"links":null,"visible":false}],"title":"UpdateRoutine","properties":{}},{"id":21,"type":"fx/InitRoutine","pos":{"0":504,"1":319,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":[140,30],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"stmts","type":-1,"links":null,"visible":false}],"title":"Init Routine","properties":{}}],"links":[],"groups":[],"config":{},"extra":{},"version":0.4}}}')}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return i[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=i,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o.a=(i,s,o)=>{var a;o&&((a=[]).d=1);var l,c,u,h=new Set,d=i.exports,p=new Promise(((e,t)=>{u=t,c=e}));p[t]=d,p[e]=e=>(a&&e(a),h.forEach(e),p.catch((e=>{}))),i.exports=p,s((i=>{var s;l=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var s=[];s.d=0,i.then((e=>{o[t]=e,r(s)}),(e=>{o[n]=e,r(s)}));var o={};return o[e]=e=>e(s),o}}var a={};return a[e]=e=>{},a[t]=i,a})))(i);var o=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),c=new Promise((t=>{(s=()=>t(o)).r=0;var n=e=>e!==a&&!h.has(e)&&(h.add(e),e&&!e.d&&(s.r++,e.push(s)));l.map((t=>t[e](n)))}));return s.r?c:o()}),(e=>(e?u(p[n]=e):c(d),r(a)))),a&&(a.d=0)},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),o.b=document.baseURI||self.location.href,o.nc=void 0;o("yZBA")})();